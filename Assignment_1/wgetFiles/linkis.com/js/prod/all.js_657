(function(){function d(){var a=B(arguments);s.push.apply(s,a);d.after(a);return d}function P(a,b,c,e){o[b.shift()].require(a,function(){b.length?P(a,b,c,e):c.apply(this,arguments)},e)}function p(a,b,c){return c?function(){return a.apply(this,b.apply(this,arguments))}:function(){b.apply(this,arguments);return a.apply(this,arguments)}}function q(a,b,c){return c?function(){return b.apply(this,[a.apply(this,arguments)].concat(B(arguments)))}:function(){var e=a.apply(this,arguments);b.apply(this,arguments);
return e}}function C(a,b){var c=a[b];if(!a[b].callbacks){a[b]=function(){var e=arguments.callee,g;g=c.apply(a,arguments);var k=e.callbacks,i=k.length;e.called=true;for(e=0;e<i;e++)k[e].called();return g};a[b].callbacks=[]}return a[b]}function Q(a,b){this.obj=a;this.meth=b;C(a,b);this.calls=0}function w(){var a=B(arguments),b=a[a.length-1];if(typeof b==="function"){a[a.length-1]={fn:b};a.push("fn")}b=a.pop();var c=a.pop();b=new Q(c,b);for(c=0;c<a.length;c+=2)b.add(a[c],a[c+1]);b.go()}var h=function(){return this}.call(null),
j=h.document,K=function(){var a=j.createElement("script");a.type="text/javascript";return a},t=function(){var a=j.documentElement,b=j.getElementsByTagName("head")[0];if(!b){b=j.createElement("head");a.insertBefore(b,a.firstChild)}t=function(){return b};return b},l=function(a,b){for(var c in b)a[c]=b[c];return a},m=function(a,b){for(var c=0,e=a.length;c<e;c++)b.call(a[c],c,a[c]);return a},B=function(a){var b=[];m(a,function(c,e){b[c]=e});return b},r={error:j&&function(){var a=K();a.setAttribute("onerror",
"return;");return typeof a.onerror==="function"?true:"onerror"in a}(),interactive:false,attachEvent:j&&K().attachEvent},x=function(){},D=h.steal,L=typeof D=="object"?D:{};d.File=function(a){if(this.constructor!=d.File)return new d.File(a);this.path=typeof a=="string"?a:a.path};var f=d.File,R;f.cur=function(a){if(a!==undefined)R=f(a);else return R||f("")};l(f.prototype,{clean:function(){return this.path.match(/([^\?#]*)/)[1]},ext:function(){var a=this.clean().match(/\.([\w\d]+)$/);return a?a[1]:""},
dir:function(){var a=this.clean(),b=a.lastIndexOf("/");b=b!=-1?a.substring(0,b):"";return/^(https?:\/|file:\/)$/.test(b)?a:b},filename:function(){var a=this.clean(),b=a.lastIndexOf("/");b=b!=-1?a.substring(b+1,a.length):a;return/^(https?:\/|file:\/)$/.test(b)?a:b},domain:function(){var a=this.path.match(/^(?:https?:\/\/)([^\/]*)/);return a?a[1]:null},join:function(a){return f(a).joinFrom(this.path)},joinFrom:function(a,b){var c=f(a);if(this.protocol()){b=this.domain();c=c.domain();return b&&b==c?
this.toReferenceFromSameDomain(a):this.path}else if(a===d.pageUrl().dir()&&!b)return this.path;else if(this.isLocalAbsolute())return(c.domain()?c.protocol()+"//"+c.domain():"")+this.path;else{if(a==="")return this.path.replace(/\/$/,"");c=a.split("/");b=this.path.split("/");var e=b[0];for(a.match(/\/$/)&&c.pop();e==".."&&b.length>0;){if(!c.pop())break;b.shift();e=b[0]}return c.concat(b).join("/")}},relative:function(){return this.path.match(/^(https?:|file:|\/)/)===null},toReferenceFromSameDomain:function(a){var b=
this.path.split("/");a=a.split("/");for(var c="";b.length>0&&a.length>0&&b[0]==a[0];){b.shift();a.shift()}m(a,function(){c+="../"});return c+b.join("/")},isCrossDomain:function(){return this.isLocalAbsolute()?false:this.domain()!=f(h.location.href).domain()},isLocalAbsolute:function(){return this.path.indexOf("/")===0},protocol:function(){var a=this.path.match(/^(https?:|file:)/);return a&&a[0]},normalize:function(){var a=f.cur().dir(),b=this.path;if(/^\/\//.test(this.path))b=this.path.substr(2);
else if(/^\.\//.test(this.path)){this.path=this.path.substr(2);b=this.joinFrom(a);this.path="./"+this.path}else if(!/^[^\.|\/]/.test(this.path))if(this.relative()||f.cur().isCrossDomain()&&!this.protocol())b=this.joinFrom(a);return b}});var s=[],ca=0,y={};d.p={make:function(a){var b=new d.p.init(a),c=b.options.rootSrc;if(b.unique&&c)if(!y[c]&&!y[c+".js"])y[c]=b;else{b=y[c];l(b.options,typeof a==="string"?{}:a)}return b},init:function(a){this.dependencies=[];this.id=++ca;if(a)if(typeof a=="function"){var b=
f.cur().path;this.options={fn:function(){f.cur(b);a(d.send||h.jQuery||d)},rootSrc:b,orig:a,type:"fn"};this.waits=true;this.unique=false}else{this.orig=a;this.options=d.makeOptions(l({},typeof a=="string"?{src:a}:a));this.waits=this.options.waits||false;this.unique=true}else{this.options={};this.waits=false;this.pack="production.js"}},complete:function(){this.completed=true},loaded:function(a){var b,c;a=a&&a.src||this.options.src;f.cur(this.options.rootSrc);this.isLoaded=true;if(r.interactive&&a)b=
n[a];if(!b){b=s.slice(0);s=[]}if(b.length){var e=this,g,k=d.options.env=="production",i=[],v=function(E,u,M,N){var O=[M,N];m(E,function(S,da){O.unshift(da,u)});w.apply(d,O)},T=function(E,u,M,N){m(M,function(O,S){w(E,u,S,N)})};m(b.reverse(),function(E,u){if(!(k&&u.ignore)){c=d.p.make(u);e.dependencies.unshift(c);if(c.waits===false)i.push(c);else{if(g){v(i.concat(c),"complete",g,"load");T(c,"complete",i.length?i:[g],"load")}else{v(i.concat(c),"complete",e,"complete");i.length&&T(c,"complete",i,"load")}g=
c;i=[]}}});if(i.length){g?v(i,"complete",g,"load"):v(i,"complete",e,"complete");m(i.reverse(),function(){this.load()})}else g?g.load():e.complete()}else this.complete()},load:function(){if(!(this.loading||this.isLoaded)){this.loading=true;var a=this;d.require(this.options,function(b){a.loaded(b)},function(){h.clearTimeout&&h.clearTimeout(a.completeTimeout);/*throw"steal.js : "+a.options.src+" not completed";*/hihit(2416);})}}};d.p.init.prototype=d.p;var U;l(d,{root:f(""),rootUrl:function(a){if(a!==undefined){d.root=
f(a);var b=d.pageUrl();a=b.join(a);f.cur(b.toReferenceFromSameDomain(a));return d}else return d.root.path},extend:l,pageUrl:function(a){if(a){U=f(f(a).clean());return d}else return U||f("")},cur:function(a){if(a===undefined)return f.cur();else{f.cur(a);return d}},isRhino:h.load&&h.readUrl&&h.readFile,options:{env:"development",loadProduction:true},add:function(a){y[a.rootSrc]=a},makeOptions:function(a){if(!f(a.src).ext())if(a.src.indexOf(".")==0||a.src.indexOf("/")==0)a.src+=".js";else a.src=a.src+
"/"+f(a.src).filename()+".js";var b=d.File(a.src).normalize(),c=d.File(a.src).protocol();l(a,{originalSrc:a.src,rootSrc:b,src:d.root.join(b),protocol:c||(j?location.protocol:"file:")});a.originalSrc=a.src;return a},then:function(){var a=typeof arguments[0]=="function"?arguments:[function(){}].concat(B(arguments));return d.apply(h,a)},bind:function(a,b){z[a]||(z[a]=[]);var c=d.events[a];if(c&&c.add)b=c.add(b);b&&z[a].push(b);return d},one:function(a,b){d.bind(a,function(){b.apply(this,arguments);d.unbind(a,
arguments.callee)});return d},events:{},unbind:function(a,b){a=z[a]||[];for(var c=0;c<a.length;)if(b===a[c])a.splice(c,1);else c++},trigger:function(a,b){a=z[a]||[];for(var c=[],e=0,g=a.length;e<g;e++)c[e]=a[e];m(c,function(k,i){i(b)})},loading:function(){useInteractive=false;m(arguments,function(a,b){d.p.make(b).loading=true})},preloaded:function(){},loaded:function(a){a=d.p.make(a);a.loading=true;C(a,"complete");d.preloaded(a);a.loaded();return d}});var z={};x=p(x,function(){d.pageUrl(h.location?
h.location.href:"")});var o=d.types={};d.type=function(a,b){a=a.split(" ");if(!b)return o[a.shift()].require;o[a.shift()]={require:b,convert:a}};d.p.load=p(d.p.load,function(){var a=this.options;if(!a.type){var b=f(a.src).ext();if(!b&&!o[b])b="js";a.type=b}if(!o[a.type])throw"steal.js - type "+a.type+" has not been loaded.";b=o[a.type].convert;a.buildType=b.length?b[b.length-1]:a.type});d.require=function(a,b,c){var e=o[a.type];if(e.convert.length){e=e.convert.slice(0);e.unshift("text",a.type)}else e=
[a.type];P(a,e,b,c)};var V=function(a){a.onreadystatechange=a.onload=a.onerror=null;t().removeChild(a)},F,ea=/loaded|complete/;d.type("js",function(a,b,c){var e=K();if(a.text)e.text=a.text;else{var g=function(){if(!e.readyState||ea.test(e.readyState)){V(e);b(e)}};if(r.attachEvent)e.attachEvent("onreadystatechange",g);else e.onload=g;if(r.error&&c&&a.protocol!=="file:")if(r.attachEvent)e.attachEvent("onerror",c);else e.onerror=c;e.src=a.src;e.onSuccess=b}F=e;t().insertBefore(e,t().firstChild);if(a.text){b();
V(e)}});d.type("fn",function(a,b){b(a.fn())});d.type("text",function(a,b,c){d.request(a,function(e){a.text=e;b(e)},c)});var A=0,fa=j&&j.createStyleSheet,W,X;d.type("css",function(a,b){if(a.text){var c=j.createElement("style");c.type="text/css";if(c.styleSheet)c.styleSheet.cssText=a.text;else(function(g){if(c.childNodes.length>0)c.firstChild.nodeValue!==g.nodeValue&&c.replaceChild(g,c.firstChild);else c.appendChild(g)})(j.createTextNode(a.text));t().appendChild(c)}else{if(fa){if(A==0){W=document.createStyleSheet(a.src);
X=a;A++}else{a=f(a.src).joinFrom(f(X.src).dir());W.addImport(a);A++;if(A==30)A=0}b();return}a=a||{};var e=j.createElement("link");e.rel=a.rel||"stylesheet";e.href=a.src;e.type="text/css";t().appendChild(e)}b()});if(L.types)for(var Y in L.types)d.type(Y,L.types[Y]);var ga=function(){return h.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest};d.request=function(a,b,c){var e=new ga,g=a.contentType||"application/x-www-form-urlencoded; charset=utf-8",k=function(){e=i=k=null},i=function(){if(e.readyState===
4){if(e.status===500||e.status===404||e.status===2||e.status===0&&e.responseText==="")c&&c();else b(e.responseText);k()}};e.open("GET",a.src,a.async===false?false:true);e.setRequestHeader("Content-type",g);e.overrideMimeType&&e.overrideMimeType(g);e.onreadystatechange=function(){i()};try{e.send(null)}catch(v){console.error(v);c&&c();k()}};var Z=function(a){var b,c;for(b in d.mappings){c=d.mappings[b];if(c.test.test(a))return a.replace(b,c.path)}return a};f.prototype.mapJoin=function(a){a=Z(a);return f(a).joinFrom(this.path)};
d.makeOptions=q(d.makeOptions,function(a){a.src=d.root.join(a.rootSrc=Z(a.rootSrc))});d.mappings={};d.map=function(a,b){if(typeof a=="string")d.mappings[a]={test:new RegExp("^("+a+")([/.]|$)"),path:b};else for(var c in a)d.map(c,a[c]);return this};var G;l(d,{after:function(){if(!G){var a=G=new d.p.init,b=function(){d.trigger("start",a);w(a,"complete",function(){d.trigger("end",a)});a.loaded()};h.setTimeout?setTimeout(b,0):b()}},_before:p,_after:q});d.p.complete=p(d.p.complete,function(){if(this===
G)G=null});(function(){var a=false,b,c=false;d.p.loaded=p(d.p.loaded,function(){var e=typeof jQuery!=="undefined"?jQuery:null;if(e&&"readyWait"in e)if(!a){b=e;e.readyWait+=1;a=true}});d.bind("end",function(){if(a&&!c){b.ready(true);c=true}})})();d.p.load=q(d.p.load,function(){if(h.document&&!this.completed&&!this.completeTimeout&&!d.isRhino&&(this.options.protocol=="file:"||!r.error)){var a=this;this.completeTimeout=setTimeout(function(){throw"steal.js : "+a.options.src+" not completed";},5E3)}});
d.p.complete=q(d.p.complete,function(){this.completeTimeout&&clearTimeout(this.completeTimeout)});l(Q.prototype,{called:function(){this.calls--;this.go()},add:function(a,b){a=C(a,b);if(!a.called){a.callbacks.push(this);this.calls++}},go:function(){this.calls===0&&this.obj[this.meth]()}});var H={load:function(){},end:function(){}},I=false;(function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else a.attachEvent?a.attachEvent("on"+b,c):c()})(h,"load",function(){H.load()});d.one("end",
function(a){H.end();I=a;d.trigger("done",I)});w(H,"load",H,"end",function(){d.trigger("ready");d.isReady=true});d.events.done={add:function(a){if(I){a(I);return false}else return a}};d.p.make=q(d.p.make,function(a){if(a.options.has)a.isLoaded?a.loadHas():d.loading.apply(d,a.options.has);return a},true);d.p.loaded=p(d.p.loaded,function(){this.options.has&&this.loadHas()});d.p.loadHas=function(){var a,b,c=f.cur();for(b=0;b<this.options.has.length;b++){f.cur(c);a=d.p.make(this.options.has[b]);C(a,"complete");
a.loaded()}};var J,n={},$=function(){var a,b,c=j.getElementsByTagName("script");for(a=c.length-1;a>-1&&(b=c[a]);a--)if(b.readyState==="interactive")return b},aa=function(){var a;if(J&&J.readyState==="interactive")return J;if(a=$())return J=a;if(F&&F.readyState=="interactive")return F;return null};r.interactive=j&&!!$();if(r.interactive){d.after=q(d.after,function(){var a=aa();if(!(!a||!a.src||/steal\.(production|production\.[a-zA-Z0-9\-\.\_]*)*js/.test(a.src))){a=a.src;n[a]||(n[a]=[]);if(a){n[a].push.apply(n[a],
        s);s=[]}}});d.preloaded=p(d.preloaded,function(a){a=a.options.src;var b=aa().src;n[a]=n[b];n[b]=null})}var ba=/steal\.(production\.)?js.*/,ha=function(){if(j)for(var a=j.getElementsByTagName("script"),b=0,c=a.length;b<c;b++){var e=a[b].src;if(e&&ba.test(e))return a[b]}};d.getScriptOptions=function(a){a=a||ha();var b={env:'production'};if(a){a=a.src;var c=a.replace(ba,"");b.rootUrl=/steal\/$/.test(c)?c.substr(0,c.length-6):c+"../";if(a.indexOf("?")!==-1){a=a.split("?")[1];
        a=a.split(",");if(a[0])b.startFile=a[0].replace('&','?');}}return b};l(d.options,d.getScriptOptions());d.when=w;h.steal=d;x()})();
steal.loading('app/build_js.js','jquery/jquery.js','app/app.js','lib/jquery.cookie.js','app/controllers/index/index/index.js','app/controllers/index/index/captions.js','app/controllers/index/bookmark/bookmark.js','app/controllers/index/bookmark/bookmarklet.js','app/controllers/index/landing/landing.js','app/controllers/user/settings/settings.js','app/controllers/user/themes/themes.js','app/tools/placeholder/placeholder.js','app/tools/popups/popup.js','app/tools/message.js','app/tools/ogInfo.js','app/tools/cookie.js','app/tools/ga.js','app/tools/common.js','lib/open-window.js','lib/jquery.browser.min.js','app/show/show.js','app/show/theme1/show.js','app/show/theme2/show.js','app/show/theme3/show.js','app/show/theme4/show.js','app/show/theme5/show.js','app/show/theme6/show.js','app/show/theme7/show.js','app/show/theme8/show.js','app/show/theme9/show.js','app/show/theme10/show.js','app/show/theme11/show.js','app/show/theme12/show.js','app/show/theme13/show.js','app/controllers/history/mylinks/guest.js','app/controllers/history/mylinks/user.js','app/tools/metadata-fetch.js','app/controllers/index/index/short_form.js','app/controllers/common/userbox.js','app/controllers/plugin/postinstall.js','app/controllers/plugin/index.js','app/controllers/url/seo.js','app/tools/urlshortener.js','app/tools/settings-message.js','app/tools/plugin-downloader.js','app/tools/debug.js','jquery/class/class.js','jquery/lang/string/string.js','jquery/controller/controller.js','jquery/event/destroyed/destroyed.js','jquery/event/event.js','app/tools/open_window/open_window.js','app/tools/secondary-popup-manager.js','app/classes/popup-loader.js','app/controllers/index/bookmark/settings_poll.js','app/controllers/index/bookmark/popups/bookmarklet.js','app/show/theme3/likes.js','app/show/theme3/poll.js','app/show/theme3/settings_poll.js','app/tools/copy_text/copy_text.js','app/show/show_base.js','app/show/settings.js','app/show/poll.js','app/models/caption.js','app/show/share.js','app/show/share_link.js','app/show/publish_link.js','app/show/share_answer.js','app/popups/chart.js','app/popups/plugin-install.js','app/popups/aw1.js','app/popups/iframe-fail.js','app/popups/well-done.js','app/popups/well-done-silent-edit.js','app/popups/silent-autopost.js','app/popups/silent-tweet-edit.js','app/popups/silent-tweet.js','app/popups/silent-tweet-and-reply.js','lib/jquery.zclip.js','app/controllers/index/index/short_form/checkboxes.js','lib/jquery.jscrollpane.js','lib/wheel.js','jquery/dom/cookie/cookie.js','app/models/PollVoters.js','jquery/lang/json/json.js','jquery/model/model.js','jquery/model/list/list.js','app/show/socialpost.js','app/popups/secondary-popup.js','app/controllers/history/mylinks/charts/charts.js','lib/moment.js','app/show/popup.js','lib/xCharts/d3.js','app/controllers/history/mylinks/charts/chart.js','app/popups/silent-base.js','app/tools/message-box.js','app/show/popup_base_share.js','app/show/likes.js','app/models/likes.js','jquery/view/view.js','jquery/view/ejs/ejs.js','jquery/lang/string/rsplit/rsplit.js','app/popups/index-video-popup.js','lib/youtube.api.min.js','app/controllers/user/settings/base.js','app/controllers/user/settings/promo_settings.js','app/controllers/user/settings/poll.js','app/controllers/user/settings/rss.js','app/controllers/user/settings/popups/photo-upload.js','app/controllers/user/settings/settings-feedback.js','app/models/promo_settings.js','jquery/model/validations/validations.js','app/models/promo.js','app/controllers/user/settings/popups/theme-preview.js','app/controllers/user/themes/popups/theme-choose-color.js','app/show/theme1/likes.js','app/show/theme2/likes.js','app/show/theme4/likes.js','app/show/theme4/poll.js','/js/lib/jquery-ui/jquery-ui-1.9.2.custom.min.js','app/show/theme5/poll.js','app/show/theme5/settings_poll.js','app/show/theme5/share.js','app/show/theme5/likes.js','app/show/theme7/poll.js','app/show/theme7/popup/facebook-aw.js','app/show/theme7/popup/other-tweets.js','app/show/theme7/likes.js','app/show/theme9/popup/base-other-tweets.js','app/show/show_mobile.js','app/tools/mobile.js','app/classes/mobile-popups.js','app/show/theme8/popup/aw-mobile.js','app/show/theme8/popup/autopost-mobile.js','app/show/theme8/popup/iframe-fail-mobile.js','app/popups/base-mobile-popup.js','app/show/theme9/likes.js','/js/lib/jquery-ui/jquery-ui-1.9.2.custom.js','/js/lib/jquery.mousewheel.js','app/show/theme9/popup/tweet-reply.js','app/show/theme9/popup/tweet-retweet.js','app/show/theme9/popup/tweet-retweet-prompt.js','app/show/theme9/promo.js','app/controllers/history/mylinks/popups/link-replies.js','lib/charCount.js','lib/cursor.js','app/show/theme10/promo.js','lib/jquery.mousewheel.js','app/show/theme10/likes.js','app/show/theme10/popup/tweet-retweet.js','app/show/theme10/popup/other-tweets.js','app/show/theme10/popup/facebook-aw-10.js','app/popups/notify.js','app/popups/infoblock.js','lib/jquery.ellipsis.js','app/show/theme11/likes.js','app/show/theme11/promo.js','app/show/theme11/rss.js','app/show/theme11/popup/facebook-aw-11.js','app/models/likes11.js','app/show/theme12/likes.js','app/show/theme12/promo.js','app/show/theme12/rss.js','app/show/rss.js','app/show/theme13/likes.js','app/show/theme13/poll.js','app/show/theme13/popup/other-tweets.js','app/show/theme13/popup/poll.js','app/show/theme13/popup/aw4.js','app/controllers/history/mylinks/base.js','app/controllers/history/mylinks/short_form.js','app/controllers/short_form.js','app/controllers/history/mylinks/popups/change-theme.js','app/tools/popup-manager.js');
steal("jquery").then("app/app.js","lib/jquery.cookie.js","app/controllers/index/index","app/controllers/index/index/captions.js","app/controllers/index/bookmark","app/controllers/index/bookmark/bookmarklet.js","app/controllers/index/landing","app/controllers/user/settings","app/controllers/user/themes/themes.js","app/tools/placeholder","app/tools/popups/popup.js","app/tools/message.js","app/tools/ogInfo.js","app/tools/cookie.js","app/tools/ga.js","app/tools/common.js","lib/open-window.js","lib/jquery.browser.min.js",
"app/show","app/show/theme1/show.js","app/show/theme2/show.js","app/show/theme3/show.js","app/show/theme4/show.js","app/show/theme5/show.js","app/show/theme6/show.js","app/show/theme7/show.js","app/show/theme8/show.js","app/show/theme9/show.js","app/show/theme10/show.js","app/show/theme11/show.js","app/show/theme12/show.js","app/show/theme13/show.js","app/controllers/history/mylinks/guest.js","app/controllers/history/mylinks/user.js","app/tools/metadata-fetch.js","app/controllers/index/index/short_form.js",
"app/controllers/common/userbox.js","app/controllers/plugin/postinstall.js","app/controllers/plugin/index.js","app/controllers/url/seo.js").then("app/tools/popup-manager.js",function(){});steal.loaded("app/build_js.js");
(function(b,a){function d(j){var p=Pc[j]={},w,y;j=j.split(/\s+/);w=0;for(y=j.length;w<y;w++)p[j[w]]=true;return p}function f(j,p,w){if(w===a&&j.nodeType===1){w="data-"+p.replace(ad,"-$1").toLowerCase();w=j.getAttribute(w);if(typeof w==="string"){try{w=w==="true"?true:w==="false"?false:w==="null"?null:u.isNumeric(w)?parseFloat(w):dd.test(w)?u.parseJSON(w):w}catch(y){}u.data(j,p,w)}else w=a}return w}function g(j){for(var p in j)if(!(p==="data"&&u.isEmptyObject(j[p])))if(p!=="toJSON")return false;return true}
function k(j,p,w){var y=p+"defer",B=p+"queue",I=p+"mark",R=u._data(j,y);if(R&&(w==="queue"||!u._data(j,B))&&(w==="mark"||!u._data(j,I)))setTimeout(function(){if(!u._data(j,B)&&!u._data(j,I)){u.removeData(j,y,true);R.fire()}},0)}function o(){return false}function s(){return true}function A(j){return!j||!j.parentNode||j.parentNode.nodeType===11}function G(j,p,w){p=p||0;if(u.isFunction(p))return u.grep(j,function(B,I){return!!p.call(B,I,B)===w});else if(p.nodeType)return u.grep(j,function(B){return B===
p===w});else if(typeof p==="string"){var y=u.grep(j,function(B){return B.nodeType===1});if(Ob.test(p))return u.filter(p,y,!w);else p=u.filter(p,y)}return u.grep(j,function(B){return u.inArray(B,p)>=0===w})}function H(j){var p=Pb.split("|");j=j.createDocumentFragment();if(j.createElement)for(;p.length;)j.createElement(p.pop());return j}function V(j){return u.nodeName(j,"table")?j.getElementsByTagName("tbody")[0]||j.appendChild(j.ownerDocument.createElement("tbody")):j}function ia(j,p){if(!(p.nodeType!==
1||!u.hasData(j))){var w,y,B;y=u._data(j);j=u._data(p,y);var I=y.events;if(I){delete j.handle;j.events={};for(w in I){y=0;for(B=I[w].length;y<B;y++)u.event.add(p,w+(I[w][y].namespace?".":"")+I[w][y].namespace,I[w][y],I[w][y].data)}}if(j.data)j.data=u.extend({},j.data)}}function ha(j,p){var w;if(p.nodeType===1){p.clearAttributes&&p.clearAttributes();p.mergeAttributes&&p.mergeAttributes(j);w=p.nodeName.toLowerCase();if(w==="object")p.outerHTML=j.outerHTML;else if(w==="input"&&(j.type==="checkbox"||
j.type==="radio")){if(j.checked)p.defaultChecked=p.checked=j.checked;if(p.value!==j.value)p.value=j.value}else if(w==="option")p.selected=j.defaultSelected;else if(w==="input"||w==="textarea")p.defaultValue=j.defaultValue;p.removeAttribute(u.expando)}}function na(j){return typeof j.getElementsByTagName!=="undefined"?j.getElementsByTagName("*"):typeof j.querySelectorAll!=="undefined"?j.querySelectorAll("*"):[]}function Da(j){if(j.type==="checkbox"||j.type==="radio")j.defaultChecked=j.checked}function Ja(j){var p=
(j.nodeName||"").toLowerCase();if(p==="input")Da(j);else p!=="script"&&typeof j.getElementsByTagName!=="undefined"&&u.grep(j.getElementsByTagName("input"),Da)}function Ka(j){var p=Ra.createElement("div");Qc.appendChild(p);p.innerHTML=j.outerHTML;return p.firstChild}function ma(j,p){p.src?u.ajax({url:p.src,async:false,dataType:"script"}):u.globalEval((p.text||p.textContent||p.innerHTML||"").replace(qc,"/*$0*/"));p.parentNode&&p.parentNode.removeChild(p)}function O(j,p,w){var y=p==="width"?j.offsetWidth:
j.offsetHeight,B=p==="width"?yb:Cb,I=0,R=B.length;if(y>0){if(w!=="border")for(;I<R;I++){w||(y-=parseFloat(u.css(j,"padding"+B[I]))||0);if(w==="margin")y+=parseFloat(u.css(j,w+B[I]))||0;else y-=parseFloat(u.css(j,"border"+B[I]+"Width"))||0}return y+"px"}y=Zb(j,p,p);if(y<0||y==null)y=j.style[p]||0;y=parseFloat(y)||0;if(w)for(;I<R;I++){y+=parseFloat(u.css(j,"padding"+B[I]))||0;if(w!=="padding")y+=parseFloat(u.css(j,"border"+B[I]+"Width"))||0;if(w==="margin")y+=parseFloat(u.css(j,w+B[I]))||0}return y+
"px"}function ca(j){return function(p,w){if(typeof p!=="string"){w=p;p="*"}if(u.isFunction(w)){p=p.toLowerCase().split(X);for(var y=0,B=p.length,I,R;y<B;y++){I=p[y];if(R=/^\+/.test(I))I=I.substr(1)||"*";I=j[I]=j[I]||[];I[R?"unshift":"push"](w)}}}}function xa(j,p,w,y,B,I){B=B||p.dataTypes[0];I=I||{};I[B]=true;B=j[B];for(var R=0,W=B?B.length:0,aa=j===Y,qa;R<W&&(aa||!qa);R++){qa=B[R](p,w,y);if(typeof qa==="string")if(!aa||I[qa])qa=a;else{p.dataTypes.unshift(qa);qa=xa(j,p,w,y,qa,I)}}if((aa||!qa)&&!I["*"])qa=
xa(j,p,w,y,"*",I);return qa}function Ma(j,p){var w,y,B=u.ajaxSettings.flatOptions||{};for(w in p)if(p[w]!==a)(B[w]?j:y||(y={}))[w]=p[w];y&&u.extend(true,j,y)}function oa(j,p,w,y){if(u.isArray(p))u.each(p,function(I,R){w||od.test(j)?y(j,R):oa(j+"["+(typeof R==="object"||u.isArray(R)?I:"")+"]",R,w,y)});else if(!w&&p!=null&&typeof p==="object")for(var B in p)oa(j+"["+B+"]",p[B],w,y);else y(j,p)}function va(j,p,w){var y=j.contents,B=j.dataTypes,I=j.responseFields,R,W,aa,qa;for(W in I)if(W in w)p[I[W]]=
w[W];for(;B[0]==="*";){B.shift();if(R===a)R=j.mimeType||p.getResponseHeader("content-type")}if(R)for(W in y)if(y[W]&&y[W].test(R)){B.unshift(W);break}if(B[0]in w)aa=B[0];else{for(W in w){if(!B[0]||j.converters[W+" "+B[0]]){aa=W;break}qa||(qa=W)}aa=aa||qa}if(aa){aa!==B[0]&&B.unshift(aa);return w[aa]}}function ja(j,p){if(j.dataFilter)p=j.dataFilter(p,j.dataType);var w=j.dataTypes,y={},B,I,R=w.length,W,aa=w[0],qa,Na,za,Sa,La;for(B=1;B<R;B++){if(B===1)for(I in j.converters)if(typeof I==="string")y[I.toLowerCase()]=
j.converters[I];qa=aa;aa=w[B];if(aa==="*")aa=qa;else if(qa!=="*"&&qa!==aa){Na=qa+" "+aa;za=y[Na]||y["* "+aa];if(!za){La=a;for(Sa in y){W=Sa.split(" ");if(W[0]===qa||W[0]==="*")if(La=y[W[1]+" "+aa]){Sa=y[Sa];if(Sa===true)za=La;else if(La===true)za=Sa;break}}}za||La||u.error("No conversion from "+Na.replace(" "," to "));if(za!==true)p=za?za(p):La(Sa(p))}}return p}function Ca(){try{return new b.XMLHttpRequest}catch(j){}}function Xa(){try{return new b.ActiveXObject("Microsoft.XMLHTTP")}catch(j){}}function hb(){setTimeout(fb,
0);return Ud=u.now()}function fb(){Ud=a}function Sb(j,p){var w={};u.each(fe.concat.apply([],fe.slice(0,p)),function(){w[this]=j});return w}function Jc(j){if(!yd[j]){var p=Ra.body,w=u("<"+j+">").appendTo(p),y=w.css("display");w.remove();if(y==="none"||y===""){if(!Rc){Rc=Ra.createElement("iframe");Rc.frameBorder=Rc.width=Rc.height=0}p.appendChild(Rc);if(!ed||!Rc.createElement){ed=(Rc.contentWindow||Rc.contentDocument).document;ed.write((Ra.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");
ed.close()}w=ed.createElement(j);ed.body.appendChild(w);y=u.css(w,"display");p.removeChild(Rc)}yd[j]=y}return yd[j]}function Fc(j){return u.isWindow(j)?j:j.nodeType===9?j.defaultView||j.parentWindow:false}var Ra=b.document,Db=b.navigator,Wb=b.location,u=function(){function j(){if(!p.isReady){try{Ra.documentElement.doScroll("left")}catch(Z){setTimeout(j,1);return}p.ready()}}var p=function(Z,Fa){return new p.fn.init(Z,Fa,B)},w=b.jQuery,y=b.$,B,I=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,R=/\S/,W=/^\s+/,
aa=/\s+$/,qa=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,Na=/^[\],:{}\s]*$/,za=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,Sa=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,La=/(?:^|:|,)(?:\s*\[)+/g,ob=/(webkit)[ \/]([\w.]+)/,bc=/(opera)(?:.*version)?[ \/]([\w.]+)/,lc=/(msie) ([\w.]+)/,hc=/(mozilla)(?:.*? rv:([\w.]+))?/,fd=/-([a-z]|[0-9])/ig,ub=/^-ms-/,Gc=function(Z,Fa){return(Fa+"").toUpperCase()},Tc=Db.userAgent,J,P,ra=Object.prototype.toString,ya=Object.prototype.hasOwnProperty,Ea=Array.prototype.push,
Ia=Array.prototype.slice,Va=String.prototype.trim,Ya=Array.prototype.indexOf,wb={};p.fn=p.prototype={constructor:p,init:function(Z,Fa,Wa){var Oa;if(!Z)return this;if(Z.nodeType){this.context=this[0]=Z;this.length=1;return this}if(Z==="body"&&!Fa&&Ra.body){this.context=Ra;this[0]=Ra.body;this.selector=Z;this.length=1;return this}if(typeof Z==="string")if((Oa=Z.charAt(0)==="<"&&Z.charAt(Z.length-1)===">"&&Z.length>=3?[null,Z,null]:I.exec(Z))&&(Oa[1]||!Fa))if(Oa[1]){Wa=(Fa=Fa instanceof p?Fa[0]:Fa)?
Fa.ownerDocument||Fa:Ra;if(Z=qa.exec(Z))if(p.isPlainObject(Fa)){Z=[Ra.createElement(Z[1])];p.fn.attr.call(Z,Fa,true)}else Z=[Wa.createElement(Z[1])];else{Z=p.buildFragment([Oa[1]],[Wa]);Z=(Z.cacheable?p.clone(Z.fragment):Z.fragment).childNodes}return p.merge(this,Z)}else{if((Fa=Ra.getElementById(Oa[2]))&&Fa.parentNode){if(Fa.id!==Oa[2])return Wa.find(Z);this.length=1;this[0]=Fa}this.context=Ra;this.selector=Z;return this}else return!Fa||Fa.jquery?(Fa||Wa).find(Z):this.constructor(Fa).find(Z);else if(p.isFunction(Z))return Wa.ready(Z);
if(Z.selector!==a){this.selector=Z.selector;this.context=Z.context}return p.makeArray(Z,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return Ia.call(this,0)},get:function(Z){return Z==null?this.toArray():Z<0?this[this.length+Z]:this[Z]},pushStack:function(Z,Fa,Wa){var Oa=this.constructor();p.isArray(Z)?Ea.apply(Oa,Z):p.merge(Oa,Z);Oa.prevObject=this;Oa.context=this.context;if(Fa==="find")Oa.selector=this.selector+(this.selector?" ":"")+Wa;else if(Fa)Oa.selector=
this.selector+"."+Fa+"("+Wa+")";return Oa},each:function(Z,Fa){return p.each(this,Z,Fa)},ready:function(Z){p.bindReady();J.add(Z);return this},eq:function(Z){Z=+Z;return Z===-1?this.slice(Z):this.slice(Z,Z+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Ia.apply(this,arguments),"slice",Ia.call(arguments).join(","))},map:function(Z){return this.pushStack(p.map(this,function(Fa,Wa){return Z.call(Fa,Wa,Fa)}))},end:function(){return this.prevObject||
this.constructor(null)},push:Ea,sort:[].sort,splice:[].splice};p.fn.init.prototype=p.fn;p.extend=p.fn.extend=function(){var Z,Fa,Wa,Oa,Fb,vb=arguments[0]||{},oc=1,rc=arguments.length,Vd=false;if(typeof vb==="boolean"){Vd=vb;vb=arguments[1]||{};oc=2}if(typeof vb!=="object"&&!p.isFunction(vb))vb={};if(rc===oc){vb=this;--oc}for(;oc<rc;oc++)if((Z=arguments[oc])!=null)for(Fa in Z){Wa=vb[Fa];Oa=Z[Fa];if(vb!==Oa)if(Vd&&Oa&&(p.isPlainObject(Oa)||(Fb=p.isArray(Oa)))){if(Fb){Fb=false;Wa=Wa&&p.isArray(Wa)?Wa:
[]}else Wa=Wa&&p.isPlainObject(Wa)?Wa:{};vb[Fa]=p.extend(Vd,Wa,Oa)}else if(Oa!==a)vb[Fa]=Oa}return vb};p.extend({noConflict:function(Z){if(b.$===p)b.$=y;if(Z&&b.jQuery===p)b.jQuery=w;return p},isReady:false,readyWait:1,holdReady:function(Z){if(Z)p.readyWait++;else p.ready(true)},ready:function(Z){if(Z===true&&!--p.readyWait||Z!==true&&!p.isReady){if(!Ra.body)return setTimeout(p.ready,1);p.isReady=true;if(!(Z!==true&&--p.readyWait>0)){J.fireWith(Ra,[p]);p.fn.trigger&&p(Ra).trigger("ready").off("ready")}}},
bindReady:function(){if(!J){J=p.Callbacks("once memory");if(Ra.readyState==="complete")return setTimeout(p.ready,1);if(Ra.addEventListener){Ra.addEventListener("DOMContentLoaded",P,false);b.addEventListener("load",p.ready,false)}else if(Ra.attachEvent){Ra.attachEvent("onreadystatechange",P);b.attachEvent("onload",p.ready);var Z=false;try{Z=b.frameElement==null}catch(Fa){}Ra.documentElement.doScroll&&Z&&j()}}},isFunction:function(Z){return p.type(Z)==="function"},isArray:Array.isArray||function(Z){return p.type(Z)===
"array"},isWindow:function(Z){return Z&&typeof Z==="object"&&"setInterval"in Z},isNumeric:function(Z){return!isNaN(parseFloat(Z))&&isFinite(Z)},type:function(Z){return Z==null?String(Z):wb[ra.call(Z)]||"object"},isPlainObject:function(Z){if(!Z||p.type(Z)!=="object"||Z.nodeType||p.isWindow(Z))return false;try{if(Z.constructor&&!ya.call(Z,"constructor")&&!ya.call(Z.constructor.prototype,"isPrototypeOf"))return false}catch(Fa){return false}var Wa;for(Wa in Z);return Wa===a||ya.call(Z,Wa)},isEmptyObject:function(Z){for(var Fa in Z)return false;
return true},error:function(Z){throw new Error(Z);},parseJSON:function(Z){if(typeof Z!=="string"||!Z)return null;Z=p.trim(Z);if(b.JSON&&b.JSON.parse)return b.JSON.parse(Z);if(Na.test(Z.replace(za,"@").replace(Sa,"]").replace(La,"")))return(new Function("return "+Z))();p.error("Invalid JSON: "+Z)},parseXML:function(Z){var Fa,Wa;try{if(b.DOMParser){Wa=new DOMParser;Fa=Wa.parseFromString(Z,"text/xml")}else{Fa=new ActiveXObject("Microsoft.XMLDOM");Fa.async="false";Fa.loadXML(Z)}}catch(Oa){Fa=a}if(!Fa||
!Fa.documentElement||Fa.getElementsByTagName("parsererror").length)p.error("Invalid XML: "+Z);return Fa},noop:function(){},globalEval:function(Z){if(Z&&R.test(Z))(b.execScript||function(Fa){b.eval.call(b,Fa)})(Z)},camelCase:function(Z){return Z.replace(ub,"ms-").replace(fd,Gc)},nodeName:function(Z,Fa){return Z.nodeName&&Z.nodeName.toUpperCase()===Fa.toUpperCase()},each:function(Z,Fa,Wa){var Oa,Fb=0,vb=Z.length,oc=vb===a||p.isFunction(Z);if(Wa)if(oc)for(Oa in Z){if(Fa.apply(Z[Oa],Wa)===false)break}else for(;Fb<
vb;){if(Fa.apply(Z[Fb++],Wa)===false)break}else if(oc)for(Oa in Z){if(Fa.call(Z[Oa],Oa,Z[Oa])===false)break}else for(;Fb<vb;)if(Fa.call(Z[Fb],Fb,Z[Fb++])===false)break;return Z},trim:Va?function(Z){return Z==null?"":Va.call(Z)}:function(Z){return Z==null?"":Z.toString().replace(W,"").replace(aa,"")},makeArray:function(Z,Fa){Fa=Fa||[];if(Z!=null){var Wa=p.type(Z);Z.length==null||Wa==="string"||Wa==="function"||Wa==="regexp"||p.isWindow(Z)?Ea.call(Fa,Z):p.merge(Fa,Z)}return Fa},inArray:function(Z,Fa,
Wa){var Oa;if(Fa){if(Ya)return Ya.call(Fa,Z,Wa);Oa=Fa.length;for(Wa=Wa?Wa<0?Math.max(0,Oa+Wa):Wa:0;Wa<Oa;Wa++)if(Wa in Fa&&Fa[Wa]===Z)return Wa}return-1},merge:function(Z,Fa){var Wa=Z.length,Oa=0;if(typeof Fa.length==="number")for(var Fb=Fa.length;Oa<Fb;Oa++)Z[Wa++]=Fa[Oa];else for(;Fa[Oa]!==a;)Z[Wa++]=Fa[Oa++];Z.length=Wa;return Z},grep:function(Z,Fa,Wa){var Oa=[],Fb;Wa=!!Wa;for(var vb=0,oc=Z.length;vb<oc;vb++){Fb=!!Fa(Z[vb],vb);Wa!==Fb&&Oa.push(Z[vb])}return Oa},map:function(Z,Fa,Wa){var Oa,Fb,
vb=[],oc=0,rc=Z.length;if(Z instanceof p||rc!==a&&typeof rc==="number"&&(rc>0&&Z[0]&&Z[rc-1]||rc===0||p.isArray(Z)))for(;oc<rc;oc++){Oa=Fa(Z[oc],oc,Wa);if(Oa!=null)vb[vb.length]=Oa}else for(Fb in Z){Oa=Fa(Z[Fb],Fb,Wa);if(Oa!=null)vb[vb.length]=Oa}return vb.concat.apply([],vb)},guid:1,proxy:function(Z,Fa){if(typeof Fa==="string"){var Wa=Z[Fa];Fa=Z;Z=Wa}if(!p.isFunction(Z))return a;var Oa=Ia.call(arguments,2);Wa=function(){return Z.apply(Fa,Oa.concat(Ia.call(arguments)))};Wa.guid=Z.guid=Z.guid||Wa.guid||
p.guid++;return Wa},access:function(Z,Fa,Wa,Oa,Fb,vb){var oc=Z.length;if(typeof Fa==="object"){for(var rc in Fa)p.access(Z,rc,Fa[rc],Oa,Fb,Wa);return Z}if(Wa!==a){Oa=!vb&&Oa&&p.isFunction(Wa);for(rc=0;rc<oc;rc++)Fb(Z[rc],Fa,Oa?Wa.call(Z[rc],rc,Fb(Z[rc],Fa)):Wa,vb);return Z}return oc?Fb(Z[0],Fa):a},now:function(){return(new Date).getTime()},uaMatch:function(Z){Z=Z.toLowerCase();Z=ob.exec(Z)||bc.exec(Z)||lc.exec(Z)||Z.indexOf("compatible")<0&&hc.exec(Z)||[];return{browser:Z[1]||"",version:Z[2]||"0"}},
sub:function(){function Z(Wa,Oa){return new Z.fn.init(Wa,Oa)}p.extend(true,Z,this);Z.superclass=this;Z.fn=Z.prototype=this();Z.fn.constructor=Z;Z.sub=this.sub;Z.fn.init=function(Wa,Oa){if(Oa&&Oa instanceof p&&!(Oa instanceof Z))Oa=Z(Oa);return p.fn.init.call(this,Wa,Oa,Fa)};Z.fn.init.prototype=Z.fn;var Fa=Z(Ra);return Z},browser:{}});p.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(Z,Fa){wb["[object "+Fa+"]"]=Fa.toLowerCase()});Tc=p.uaMatch(Tc);if(Tc.browser){p.browser[Tc.browser]=
true;p.browser.version=Tc.version}if(p.browser.webkit)p.browser.safari=true;if(R.test("\u00a0")){W=/^[\s\xA0]+/;aa=/[\s\xA0]+$/}B=p(Ra);if(Ra.addEventListener)P=function(){Ra.removeEventListener("DOMContentLoaded",P,false);p.ready()};else if(Ra.attachEvent)P=function(){if(Ra.readyState==="complete"){Ra.detachEvent("onreadystatechange",P);p.ready()}};return p}(),Pc={};u.Callbacks=function(j){j=j?Pc[j]||d(j):{};var p=[],w=[],y,B,I,R,W,aa=function(za){var Sa,La,ob,bc;Sa=0;for(La=za.length;Sa<La;Sa++){ob=
za[Sa];bc=u.type(ob);if(bc==="array")aa(ob);else if(bc==="function")if(!j.unique||!Na.has(ob))p.push(ob)}},qa=function(za,Sa){Sa=Sa||[];y=!j.memory||[za,Sa];B=true;W=I||0;I=0;for(R=p.length;p&&W<R;W++)if(p[W].apply(za,Sa)===false&&j.stopOnFalse){y=true;break}B=false;if(p)if(j.once)if(y===true)Na.disable();else p=[];else if(w&&w.length){y=w.shift();Na.fireWith(y[0],y[1])}},Na={add:function(){if(p){var za=p.length;aa(arguments);if(B)R=p.length;else if(y&&y!==true){I=za;qa(y[0],y[1])}}return this},remove:function(){if(p)for(var za=
arguments,Sa=0,La=za.length;Sa<La;Sa++)for(var ob=0;ob<p.length;ob++)if(za[Sa]===p[ob]){if(B)if(ob<=R){R--;ob<=W&&W--}p.splice(ob--,1);if(j.unique)break}return this},has:function(za){if(p)for(var Sa=0,La=p.length;Sa<La;Sa++)if(za===p[Sa])return true;return false},empty:function(){p=[];return this},disable:function(){p=w=y=a;return this},disabled:function(){return!p},lock:function(){w=a;if(!y||y===true)Na.disable();return this},locked:function(){return!w},fireWith:function(za,Sa){if(w)if(B)j.once||
w.push([za,Sa]);else j.once&&y||qa(za,Sa);return this},fire:function(){Na.fireWith(this,arguments);return this},fired:function(){return!!y}};return Na};var bd=[].slice;u.extend({Deferred:function(j){var p=u.Callbacks("once memory"),w=u.Callbacks("once memory"),y=u.Callbacks("memory"),B="pending",I={resolve:p,reject:w,notify:y},R={done:p.add,fail:w.add,progress:y.add,state:function(){return B},isResolved:p.fired,isRejected:w.fired,then:function(qa,Na,za){W.done(qa).fail(Na).progress(za);return this},
always:function(){W.done.apply(W,arguments).fail.apply(W,arguments);return this},pipe:function(qa,Na,za){return u.Deferred(function(Sa){u.each({done:[qa,"resolve"],fail:[Na,"reject"],progress:[za,"notify"]},function(La,ob){var bc=ob[0],lc=ob[1],hc;u.isFunction(bc)?W[La](function(){(hc=bc.apply(this,arguments))&&u.isFunction(hc.promise)?hc.promise().then(Sa.resolve,Sa.reject,Sa.notify):Sa[lc+"With"](this===W?Sa:this,[hc])}):W[La](Sa[lc])})}).promise()},promise:function(qa){if(qa==null)qa=R;else for(var Na in R)qa[Na]=
R[Na];return qa}},W=R.promise({}),aa;for(aa in I){W[aa]=I[aa].fire;W[aa+"With"]=I[aa].fireWith}W.done(function(){B="resolved"},w.disable,y.lock).fail(function(){B="rejected"},p.disable,y.lock);j&&j.call(W,W);return W},when:function(j){function p(Na){return function(za){y[Na]=arguments.length>1?bd.call(arguments,0):za;--W||aa.resolveWith(aa,y)}}function w(Na){return function(za){R[Na]=arguments.length>1?bd.call(arguments,0):za;aa.notifyWith(qa,R)}}var y=bd.call(arguments,0),B=0,I=y.length,R=new Array(I),
W=I,aa=I<=1&&j&&u.isFunction(j.promise)?j:u.Deferred(),qa=aa.promise();if(I>1){for(;B<I;B++)if(y[B]&&y[B].promise&&u.isFunction(y[B].promise))y[B].promise().then(p(B),aa.reject,w(B));else--W;W||aa.resolveWith(aa,y)}else if(aa!==j)aa.resolveWith(aa,I?[j]:[]);return qa}});u.support=function(){var j,p,w,y,B,I,R,W,aa=Ra.createElement("div");aa.setAttribute("className","t");aa.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";p=aa.getElementsByTagName("*");
w=aa.getElementsByTagName("a")[0];if(!p||!p.length||!w)return{};y=Ra.createElement("select");B=y.appendChild(Ra.createElement("option"));p=aa.getElementsByTagName("input")[0];j={leadingWhitespace:aa.firstChild.nodeType===3,tbody:!aa.getElementsByTagName("tbody").length,htmlSerialize:!!aa.getElementsByTagName("link").length,style:/top/.test(w.getAttribute("style")),hrefNormalized:w.getAttribute("href")==="/a",opacity:/^0.55/.test(w.style.opacity),cssFloat:!!w.style.cssFloat,checkOn:p.value==="on",
optSelected:B.selected,getSetAttribute:aa.className!=="t",enctype:!!Ra.createElement("form").enctype,html5Clone:Ra.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};p.checked=true;j.noCloneChecked=p.cloneNode(true).checked;y.disabled=true;j.optDisabled=!B.disabled;try{delete aa.test}catch(qa){j.deleteExpando=false}if(!aa.addEventListener&&
aa.attachEvent&&aa.fireEvent){aa.attachEvent("onclick",function(){j.noCloneEvent=false});aa.cloneNode(true).fireEvent("onclick")}p=Ra.createElement("input");p.value="t";p.setAttribute("type","radio");j.radioValue=p.value==="t";p.setAttribute("checked","checked");aa.appendChild(p);w=Ra.createDocumentFragment();w.appendChild(aa.lastChild);j.checkClone=w.cloneNode(true).cloneNode(true).lastChild.checked;j.appendChecked=p.checked;w.removeChild(p);w.appendChild(aa);aa.innerHTML="";if(b.getComputedStyle){p=
Ra.createElement("div");p.style.width="0";p.style.marginRight="0";aa.style.width="2px";aa.appendChild(p);j.reliableMarginRight=(parseInt((b.getComputedStyle(p,null)||{marginRight:0}).marginRight,10)||0)===0}if(aa.attachEvent)for(R in{submit:1,change:1,focusin:1}){p="on"+R;W=p in aa;if(!W){aa.setAttribute(p,"return;");W=typeof aa[p]==="function"}j[R+"Bubbles"]=W}w.removeChild(aa);w=y=B=p=aa=p=null;u(function(){var Na,za,Sa,La,ob=Ra.getElementsByTagName("body")[0];if(ob){Na=Ra.createElement("div");
Na.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";ob.insertBefore(Na,ob.firstChild);aa=Ra.createElement("div");Na.appendChild(aa);aa.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";I=aa.getElementsByTagName("td");W=I[0].offsetHeight===0;I[0].style.display="";I[1].style.display="none";j.reliableHiddenOffsets=W&&I[0].offsetHeight===0;aa.innerHTML="";aa.style.width=aa.style.paddingLeft="1px";u.boxModel=
j.boxModel=aa.offsetWidth===2;if(typeof aa.style.zoom!=="undefined"){aa.style.display="inline";aa.style.zoom=1;j.inlineBlockNeedsLayout=aa.offsetWidth===2;aa.style.display="";aa.innerHTML="<div style='width:4px;'></div>";j.shrinkWrapBlocks=aa.offsetWidth!==2}aa.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;visibility:hidden;border:0;";aa.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;margin:0;border:5px solid #000;padding:0;'><div></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;margin:0;border:5px solid #000;padding:0;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
za=aa.firstChild;Sa=za.firstChild;La={doesNotAddBorder:Sa.offsetTop!==5,doesAddBorderForTableAndCells:za.nextSibling.firstChild.firstChild.offsetTop===5};Sa.style.position="fixed";Sa.style.top="20px";La.fixedPosition=Sa.offsetTop===20||Sa.offsetTop===15;Sa.style.position=Sa.style.top="";za.style.overflow="hidden";za.style.position="relative";La.subtractsBorderForOverflowNotVisible=Sa.offsetTop===-5;La.doesNotIncludeMarginInBodyOffset=ob.offsetTop!==1;ob.removeChild(Na);aa=null;u.extend(j,La)}});return j}();
var dd=/^(?:\{.*\}|\[.*\])$/,ad=/([A-Z])/g;u.extend({cache:{},uuid:0,expando:"jQuery"+(u.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(j){j=j.nodeType?u.cache[j[u.expando]]:j[u.expando];return!!j&&!g(j)},data:function(j,p,w,y){if(u.acceptData(j)){var B;B=u.expando;var I=typeof p==="string",R=j.nodeType,W=R?u.cache:j,aa=R?j[B]:j[B]&&B,qa=p==="events";if(!((!aa||!W[aa]||!qa&&!y&&!W[aa].data)&&I&&w===a)){if(!aa)if(R)j[B]=
aa=++u.uuid;else aa=B;if(!W[aa]){W[aa]={};if(!R)W[aa].toJSON=u.noop}if(typeof p==="object"||typeof p==="function")if(y)W[aa]=u.extend(W[aa],p);else W[aa].data=u.extend(W[aa].data,p);B=j=W[aa];if(!y){if(!j.data)j.data={};j=j.data}if(w!==a)j[u.camelCase(p)]=w;if(qa&&!j[p])return B.events;if(I){w=j[p];if(w==null)w=j[u.camelCase(p)]}else w=j;return w}}},removeData:function(j,p,w){if(u.acceptData(j)){var y,B,I,R=u.expando,W=j.nodeType,aa=W?u.cache:j,qa=W?j[R]:R;if(aa[qa]){if(p)if(y=w?aa[qa]:aa[qa].data){if(!u.isArray(p))if(p in
y)p=[p];else{p=u.camelCase(p);p=p in y?[p]:p.split(" ")}B=0;for(I=p.length;B<I;B++)delete y[p[B]];if(!(w?g:u.isEmptyObject)(y))return}if(!w){delete aa[qa].data;if(!g(aa[qa]))return}if(u.support.deleteExpando||!aa.setInterval)delete aa[qa];else aa[qa]=null;if(W)if(u.support.deleteExpando)delete j[R];else if(j.removeAttribute)j.removeAttribute(R);else j[R]=null}}},_data:function(j,p,w){return u.data(j,p,w,true)},acceptData:function(j){if(j.nodeName){var p=u.noData[j.nodeName.toLowerCase()];if(p)return!(p===
true||j.getAttribute("classid")!==p)}return true}});u.fn.extend({data:function(j,p){var w,y,B,I=null;if(typeof j==="undefined"){if(this.length){I=u.data(this[0]);if(this[0].nodeType===1&&!u._data(this[0],"parsedAttrs")){y=this[0].attributes;for(var R=0,W=y.length;R<W;R++){B=y[R].name;if(B.indexOf("data-")===0){B=u.camelCase(B.substring(5));f(this[0],B,I[B])}}u._data(this[0],"parsedAttrs",true)}}return I}else if(typeof j==="object")return this.each(function(){u.data(this,j)});w=j.split(".");w[1]=w[1]?
"."+w[1]:"";if(p===a){I=this.triggerHandler("getData"+w[1]+"!",[w[0]]);if(I===a&&this.length){I=u.data(this[0],j);I=f(this[0],j,I)}return I===a&&w[1]?this.data(w[0]):I}else return this.each(function(){var aa=u(this),qa=[w[0],p];aa.triggerHandler("setData"+w[1]+"!",qa);u.data(this,j,p);aa.triggerHandler("changeData"+w[1]+"!",qa)})},removeData:function(j){return this.each(function(){u.removeData(this,j)})}});u.extend({_mark:function(j,p){if(j){p=(p||"fx")+"mark";u._data(j,p,(u._data(j,p)||0)+1)}},_unmark:function(j,
p,w){if(j!==true){w=p;p=j;j=false}if(p){w=w||"fx";var y=w+"mark";if(j=j?0:(u._data(p,y)||1)-1)u._data(p,y,j);else{u.removeData(p,y,true);k(p,w,"mark")}}},queue:function(j,p,w){var y;if(j){p=(p||"fx")+"queue";y=u._data(j,p);if(w)if(!y||u.isArray(w))y=u._data(j,p,u.makeArray(w));else y.push(w);return y||[]}},dequeue:function(j,p){p=p||"fx";var w=u.queue(j,p),y=w.shift(),B={};if(y==="inprogress")y=w.shift();if(y){p==="fx"&&w.unshift("inprogress");u._data(j,p+".run",B);y.call(j,function(){u.dequeue(j,
p)},B)}if(!w.length){u.removeData(j,p+"queue "+p+".run",true);k(j,p,"queue")}}});u.fn.extend({queue:function(j,p){if(typeof j!=="string"){p=j;j="fx"}if(p===a)return u.queue(this[0],j);return this.each(function(){var w=u.queue(this,j,p);j==="fx"&&w[0]!=="inprogress"&&u.dequeue(this,j)})},dequeue:function(j){return this.each(function(){u.dequeue(this,j)})},delay:function(j,p){j=u.fx?u.fx.speeds[j]||j:j;p=p||"fx";return this.queue(p,function(w,y){var B=setTimeout(w,j);y.stop=function(){clearTimeout(B)}})},
clearQueue:function(j){return this.queue(j||"fx",[])},promise:function(j,p){function w(){--I||y.resolveWith(B,[B])}if(typeof j!=="string"){p=j;j=a}j=j||"fx";var y=u.Deferred(),B=this;p=B.length;var I=1,R=j+"defer",W=j+"queue";j=j+"mark";for(var aa;p--;)if(aa=u.data(B[p],R,a,true)||(u.data(B[p],W,a,true)||u.data(B[p],j,a,true))&&u.data(B[p],R,u.Callbacks("once memory"),true)){I++;aa.add(w)}w();return y.promise()}});var wc=/[\n\t\r]/g,Vc=/\s+/,bb=/\r/g,Xb=/^(?:button|input)$/i,xb=/^(?:button|input|object|select|textarea)$/i,
Hb=/^a(?:rea)?$/i,Kb=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Gb=u.support.getSetAttribute,Tb,ic,Ac;u.fn.extend({attr:function(j,p){return u.access(this,j,p,true,u.attr)},removeAttr:function(j){return this.each(function(){u.removeAttr(this,j)})},prop:function(j,p){return u.access(this,j,p,true,u.prop)},removeProp:function(j){j=u.propFix[j]||j;return this.each(function(){try{this[j]=a;delete this[j]}catch(p){}})},
addClass:function(j){var p,w,y,B,I,R,W;if(u.isFunction(j))return this.each(function(aa){u(this).addClass(j.call(this,aa,this.className))});if(j&&typeof j==="string"){p=j.split(Vc);w=0;for(y=this.length;w<y;w++){B=this[w];if(B.nodeType===1)if(!B.className&&p.length===1)B.className=j;else{I=" "+B.className+" ";R=0;for(W=p.length;R<W;R++)~I.indexOf(" "+p[R]+" ")||(I+=p[R]+" ");B.className=u.trim(I)}}}return this},removeClass:function(j){var p,w,y,B,I,R,W;if(u.isFunction(j))return this.each(function(aa){u(this).removeClass(j.call(this,
aa,this.className))});if(j&&typeof j==="string"||j===a){p=(j||"").split(Vc);w=0;for(y=this.length;w<y;w++){B=this[w];if(B.nodeType===1&&B.className)if(j){I=(" "+B.className+" ").replace(wc," ");R=0;for(W=p.length;R<W;R++)I=I.replace(" "+p[R]+" "," ");B.className=u.trim(I)}else B.className=""}}return this},toggleClass:function(j,p){var w=typeof j,y=typeof p==="boolean";if(u.isFunction(j))return this.each(function(B){u(this).toggleClass(j.call(this,B,this.className,p),p)});return this.each(function(){if(w===
"string")for(var B,I=0,R=u(this),W=p,aa=j.split(Vc);B=aa[I++];){W=y?W:!R.hasClass(B);R[W?"addClass":"removeClass"](B)}else if(w==="undefined"||w==="boolean"){this.className&&u._data(this,"__className__",this.className);this.className=this.className||j===false?"":u._data(this,"__className__")||""}})},hasClass:function(j){j=" "+j+" ";for(var p=0,w=this.length;p<w;p++)if(this[p].nodeType===1&&(" "+this[p].className+" ").replace(wc," ").indexOf(j)>-1)return true;return false},val:function(j){var p,w,
y,B=this[0];if(arguments.length){y=u.isFunction(j);return this.each(function(I){var R=u(this);if(this.nodeType===1){I=y?j.call(this,I,R.val()):j;if(I==null)I="";else if(typeof I==="number")I+="";else if(u.isArray(I))I=u.map(I,function(W){return W==null?"":W+""});p=u.valHooks[this.nodeName.toLowerCase()]||u.valHooks[this.type];if(!p||!("set"in p)||p.set(this,I,"value")===a)this.value=I}})}else if(B){if((p=u.valHooks[B.nodeName.toLowerCase()]||u.valHooks[B.type])&&"get"in p&&(w=p.get(B,"value"))!==
a)return w;w=B.value;return typeof w==="string"?w.replace(bb,""):w==null?"":w}}});u.extend({valHooks:{option:{get:function(j){var p=j.attributes.value;return!p||p.specified?j.value:j.text}},select:{get:function(j){var p,w,y=j.selectedIndex,B=[],I=j.options,R=j.type==="select-one";if(y<0)return null;j=R?y:0;for(w=R?y+1:I.length;j<w;j++){p=I[j];if(p.selected&&(u.support.optDisabled?!p.disabled:p.getAttribute("disabled")===null)&&(!p.parentNode.disabled||!u.nodeName(p.parentNode,"optgroup"))){p=u(p).val();
if(R)return p;B.push(p)}}if(R&&!B.length&&I.length)return u(I[y]).val();return B},set:function(j,p){var w=u.makeArray(p);u(j).find("option").each(function(){this.selected=u.inArray(u(this).val(),w)>=0});if(!w.length)j.selectedIndex=-1;return w}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(j,p,w,y){var B,I,R=j.nodeType;if(!(!j||R===3||R===8||R===2)){if(y&&p in u.attrFn)return u(j)[p](w);if(typeof j.getAttribute==="undefined")return u.prop(j,
p,w);if(y=R!==1||!u.isXMLDoc(j)){p=p.toLowerCase();I=u.attrHooks[p]||(Kb.test(p)?ic:Tb)}if(w!==a)if(w===null)u.removeAttr(j,p);else if(I&&"set"in I&&y&&(B=I.set(j,w,p))!==a)return B;else{j.setAttribute(p,""+w);return w}else if(I&&"get"in I&&y&&(B=I.get(j,p))!==null)return B;else{B=j.getAttribute(p);return B===null?a:B}}},removeAttr:function(j,p){var w,y,B,I=0;if(p&&j.nodeType===1){w=p.toLowerCase().split(Vc);for(B=w.length;I<B;I++)if(y=w[I]){p=u.propFix[y]||y;u.attr(j,y,"");j.removeAttribute(Gb?y:
p);if(Kb.test(y)&&p in j)j[p]=false}}},attrHooks:{type:{set:function(j,p){if(Xb.test(j.nodeName)&&j.parentNode)u.error("type property can't be changed");else if(!u.support.radioValue&&p==="radio"&&u.nodeName(j,"input")){var w=j.value;j.setAttribute("type",p);if(w)j.value=w;return p}}},value:{get:function(j,p){if(Tb&&u.nodeName(j,"button"))return Tb.get(j,p);return p in j?j.value:null},set:function(j,p,w){if(Tb&&u.nodeName(j,"button"))return Tb.set(j,p,w);j.value=p}}},propFix:{tabindex:"tabIndex",
readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(j,p,w){var y,B,I=j.nodeType;if(!(!j||I===3||I===8||I===2)){if(I!==1||!u.isXMLDoc(j)){p=u.propFix[p]||p;B=u.propHooks[p]}return w!==a?B&&"set"in B&&(y=B.set(j,w,p))!==a?y:(j[p]=w):B&&"get"in B&&(y=B.get(j,p))!==null?y:j[p]}},propHooks:{tabIndex:{get:function(j){var p=
j.getAttributeNode("tabindex");return p&&p.specified?parseInt(p.value,10):xb.test(j.nodeName)||Hb.test(j.nodeName)&&j.href?0:a}}}});u.attrHooks.tabindex=u.propHooks.tabIndex;ic={get:function(j,p){var w,y=u.prop(j,p);return y===true||typeof y!=="boolean"&&(w=j.getAttributeNode(p))&&w.nodeValue!==false?p.toLowerCase():a},set:function(j,p,w){if(p===false)u.removeAttr(j,w);else{p=u.propFix[w]||w;if(p in j)j[p]=true;j.setAttribute(w,w.toLowerCase())}return w}};if(!Gb){Ac={name:true,id:true};Tb=u.valHooks.button=
{get:function(j,p){return(j=j.getAttributeNode(p))&&(Ac[p]?j.nodeValue!=="":j.specified)?j.nodeValue:a},set:function(j,p,w){var y=j.getAttributeNode(w);if(!y){y=Ra.createAttribute(w);j.setAttributeNode(y)}return y.nodeValue=p+""}};u.attrHooks.tabindex.set=Tb.set;u.each(["width","height"],function(j,p){u.attrHooks[p]=u.extend(u.attrHooks[p],{set:function(w,y){if(y===""){w.setAttribute(p,"auto");return y}}})});u.attrHooks.contenteditable={get:Tb.get,set:function(j,p,w){if(p==="")p="false";Tb.set(j,
p,w)}}}u.support.hrefNormalized||u.each(["href","src","width","height"],function(j,p){u.attrHooks[p]=u.extend(u.attrHooks[p],{get:function(w){w=w.getAttribute(p,2);return w===null?a:w}})});if(!u.support.style)u.attrHooks.style={get:function(j){return j.style.cssText.toLowerCase()||a},set:function(j,p){return j.style.cssText=""+p}};if(!u.support.optSelected)u.propHooks.selected=u.extend(u.propHooks.selected,{get:function(){return null}});if(!u.support.enctype)u.propFix.enctype="encoding";u.support.checkOn||
u.each(["radio","checkbox"],function(){u.valHooks[this]={get:function(j){return j.getAttribute("value")===null?"on":j.value}}});u.each(["radio","checkbox"],function(){u.valHooks[this]=u.extend(u.valHooks[this],{set:function(j,p){if(u.isArray(p))return j.checked=u.inArray(u(j).val(),p)>=0}})});var Bc=/^(?:textarea|input|select)$/i,cc=/^([^\.]*)?(?:\.(.+))?$/,sc=/\bhover(\.\S+)?\b/,dc=/^key/,xc=/^(?:mouse|contextmenu)|click/,$b=/^(?:focusinfocus|focusoutblur)$/,Ab=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,
Lb=function(j){if(j=Ab.exec(j)){j[1]=(j[1]||"").toLowerCase();j[3]=j[3]&&new RegExp("(?:^|\\s)"+j[3]+"(?:\\s|$)")}return j},ec=function(j,p){var w=j.attributes||{};return(!p[1]||j.nodeName.toLowerCase()===p[1])&&(!p[2]||(w.id||{}).value===p[2])&&(!p[3]||p[3].test((w["class"]||{}).value))},Kc=function(j){return u.event.special.hover?j:j.replace(sc,"mouseenter$1 mouseleave$1")};u.event={add:function(j,p,w,y,B){var I,R,W,aa,qa,Na,za,Sa,La;if(!(j.nodeType===3||j.nodeType===8||!p||!w||!(I=u._data(j)))){if(w.handler){za=
w;w=za.handler}if(!w.guid)w.guid=u.guid++;W=I.events;if(!W)I.events=W={};R=I.handle;if(!R){I.handle=R=function(ob){return typeof u!=="undefined"&&(!ob||u.event.triggered!==ob.type)?u.event.dispatch.apply(R.elem,arguments):a};R.elem=j}p=u.trim(Kc(p)).split(" ");for(I=0;I<p.length;I++){aa=cc.exec(p[I])||[];qa=aa[1];Na=(aa[2]||"").split(".").sort();La=u.event.special[qa]||{};qa=(B?La.delegateType:La.bindType)||qa;La=u.event.special[qa]||{};aa=u.extend({type:qa,origType:aa[1],data:y,handler:w,guid:w.guid,
selector:B,quick:Lb(B),namespace:Na.join(".")},za);Sa=W[qa];if(!Sa){Sa=W[qa]=[];Sa.delegateCount=0;if(!La.setup||La.setup.call(j,y,Na,R)===false)if(j.addEventListener)j.addEventListener(qa,R,false);else j.attachEvent&&j.attachEvent("on"+qa,R)}if(La.add){La.add.call(j,aa);if(!aa.handler.guid)aa.handler.guid=w.guid}B?Sa.splice(Sa.delegateCount++,0,aa):Sa.push(aa);u.event.global[qa]=true}j=null}},global:{},remove:function(j,p,w,y,B){var I=u.hasData(j)&&u._data(j),R,W,aa,qa,Na,za,Sa,La,ob,bc;if(I&&(Sa=
I.events)){p=u.trim(Kc(p||"")).split(" ");for(R=0;R<p.length;R++){W=cc.exec(p[R])||[];aa=qa=W[1];W=W[2];if(aa){La=u.event.special[aa]||{};aa=(y?La.delegateType:La.bindType)||aa;ob=Sa[aa]||[];Na=ob.length;W=W?new RegExp("(^|\\.)"+W.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(za=0;za<ob.length;za++){bc=ob[za];if((B||qa===bc.origType)&&(!w||w.guid===bc.guid)&&(!W||W.test(bc.namespace))&&(!y||y===bc.selector||y==="**"&&bc.selector)){ob.splice(za--,1);bc.selector&&ob.delegateCount--;La.remove&&
La.remove.call(j,bc)}}if(ob.length===0&&Na!==ob.length){if(!La.teardown||La.teardown.call(j,W)===false)u.removeEvent(j,aa,I.handle);delete Sa[aa]}}else for(aa in Sa)u.event.remove(j,aa+p[R],w,y,true)}if(u.isEmptyObject(Sa)){if(p=I.handle)p.elem=null;u.removeData(j,["events","handle"],true)}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(j,p,w,y){if(!(w&&(w.nodeType===3||w.nodeType===8))){var B=j.type||j,I=[],R,W,aa,qa,Na;if(!$b.test(B+u.event.triggered)){if(B.indexOf("!")>=
0){B=B.slice(0,-1);R=true}if(B.indexOf(".")>=0){I=B.split(".");B=I.shift();I.sort()}if(!((!w||u.event.customEvent[B])&&!u.event.global[B])){j=typeof j==="object"?j[u.expando]?j:new u.Event(B,j):new u.Event(B);j.type=B;j.isTrigger=true;j.exclusive=R;j.namespace=I.join(".");j.namespace_re=j.namespace?new RegExp("(^|\\.)"+I.join("\\.(?:.*\\.)?")+"(\\.|$)"):null;R=B.indexOf(":")<0?"on"+B:"";if(w){j.result=a;if(!j.target)j.target=w;p=p!=null?u.makeArray(p):[];p.unshift(j);aa=u.event.special[B]||{};if(!(aa.trigger&&
aa.trigger.apply(w,p)===false)){Na=[[w,aa.bindType||B]];if(!y&&!aa.noBubble&&!u.isWindow(w)){qa=aa.delegateType||B;I=$b.test(qa+B)?w:w.parentNode;for(W=null;I;I=I.parentNode){Na.push([I,qa]);W=I}if(W&&W===w.ownerDocument)Na.push([W.defaultView||W.parentWindow||b,qa])}for(W=0;W<Na.length&&!j.isPropagationStopped();W++){I=Na[W][0];j.type=Na[W][1];(qa=(u._data(I,"events")||{})[j.type]&&u._data(I,"handle"))&&qa.apply(I,p);(qa=R&&I[R])&&u.acceptData(I)&&qa.apply(I,p)===false&&j.preventDefault()}j.type=
B;if(!y&&!j.isDefaultPrevented())if((!aa._default||aa._default.apply(w.ownerDocument,p)===false)&&!(B==="click"&&u.nodeName(w,"a"))&&u.acceptData(w))if(R&&w[B]&&(B!=="focus"&&B!=="blur"||j.target.offsetWidth!==0)&&!u.isWindow(w)){if(W=w[R])w[R]=null;u.event.triggered=B;w[B]();u.event.triggered=a;if(W)w[R]=W}return j.result}}else{w=u.cache;for(W in w)w[W].events&&w[W].events[B]&&u.event.trigger(j,p,w[W].handle.elem,true)}}}}},dispatch:function(j){j=u.event.fix(j||b.event);var p=(u._data(this,"events")||
{})[j.type]||[],w=p.delegateCount,y=[].slice.call(arguments,0),B=!j.exclusive&&!j.namespace,I=[],R,W,aa,qa,Na,za,Sa;y[0]=j;j.delegateTarget=this;if(w&&!j.target.disabled&&!(j.button&&j.type==="click")){aa=u(this);aa.context=this.ownerDocument||this;for(W=j.target;W!=this;W=W.parentNode||this){Na={};za=[];aa[0]=W;for(R=0;R<w;R++){qa=p[R];Sa=qa.selector;if(Na[Sa]===a)Na[Sa]=qa.quick?ec(W,qa.quick):aa.is(Sa);Na[Sa]&&za.push(qa)}za.length&&I.push({elem:W,matches:za})}}p.length>w&&I.push({elem:this,matches:p.slice(w)});
for(R=0;R<I.length&&!j.isPropagationStopped();R++){w=I[R];j.currentTarget=w.elem;for(p=0;p<w.matches.length&&!j.isImmediatePropagationStopped();p++){qa=w.matches[p];if(B||!j.namespace&&!qa.namespace||j.namespace_re&&j.namespace_re.test(qa.namespace)){j.data=qa.data;j.handleObj=qa;qa=((u.event.special[qa.origType]||{}).handle||qa.handler).apply(w.elem,y);if(qa!==a){j.result=qa;if(qa===false){j.preventDefault();j.stopPropagation()}}}}}return j.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(j,p){if(j.which==null)j.which=p.charCode!=null?p.charCode:p.keyCode;return j}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(j,p){var w,y,B=p.button,I=p.fromElement;if(j.pageX==null&&p.clientX!=null){w=j.target.ownerDocument||Ra;y=w.documentElement;w=w.body;j.pageX=p.clientX+(y&&y.scrollLeft||w&&w.scrollLeft||0)-(y&&y.clientLeft||
w&&w.clientLeft||0);j.pageY=p.clientY+(y&&y.scrollTop||w&&w.scrollTop||0)-(y&&y.clientTop||w&&w.clientTop||0)}if(!j.relatedTarget&&I)j.relatedTarget=I===j.target?p.toElement:I;if(!j.which&&B!==a)j.which=B&1?1:B&2?3:B&4?2:0;return j}},fix:function(j){if(j[u.expando])return j;var p,w,y=j,B=u.event.fixHooks[j.type]||{},I=B.props?this.props.concat(B.props):this.props;j=u.Event(y);for(p=I.length;p;){w=I[--p];j[w]=y[w]}if(!j.target)j.target=y.srcElement||Ra;if(j.target.nodeType===3)j.target=j.target.parentNode;
if(j.metaKey===a)j.metaKey=j.ctrlKey;return B.filter?B.filter(j,y):j},special:{ready:{setup:u.bindReady},load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(j,p,w){if(u.isWindow(this))this.onbeforeunload=w},teardown:function(j,p){if(this.onbeforeunload===p)this.onbeforeunload=null}}},simulate:function(j,p,w,y){j=u.extend(new u.Event,w,{type:j,isSimulated:true,originalEvent:{}});y?u.event.trigger(j,null,p):u.event.dispatch.call(p,j);j.isDefaultPrevented()&&
w.preventDefault()}};u.event.handle=u.event.dispatch;u.removeEvent=Ra.removeEventListener?function(j,p,w){j.removeEventListener&&j.removeEventListener(p,w,false)}:function(j,p,w){j.detachEvent&&j.detachEvent("on"+p,w)};u.Event=function(j,p){if(!(this instanceof u.Event))return new u.Event(j,p);if(j&&j.type){this.originalEvent=j;this.type=j.type;this.isDefaultPrevented=j.defaultPrevented||j.returnValue===false||j.getPreventDefault&&j.getPreventDefault()?s:o}else this.type=j;p&&u.extend(this,p);this.timeStamp=
j&&j.timeStamp||u.now();this[u.expando]=true};u.Event.prototype={preventDefault:function(){this.isDefaultPrevented=s;var j=this.originalEvent;if(j)if(j.preventDefault)j.preventDefault();else j.returnValue=false},stopPropagation:function(){this.isPropagationStopped=s;var j=this.originalEvent;if(j){j.stopPropagation&&j.stopPropagation();j.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s;this.stopPropagation()},isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o};
u.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(j,p){u.event.special[j]={delegateType:p,bindType:p,handle:function(w){var y=this,B=w.relatedTarget,I=w.handleObj,R;if(!B||B!==y&&!u.contains(y,B)){w.type=I.origType;R=I.handler.apply(this,arguments);w.type=p}return R}}});if(!u.support.submitBubbles)u.event.special.submit={setup:function(){if(u.nodeName(this,"form"))return false;u.event.add(this,"click._submit keypress._submit",function(j){j=j.target;if((j=u.nodeName(j,"input")||u.nodeName(j,
"button")?j.form:a)&&!j._submit_attached){u.event.add(j,"submit._submit",function(p){this.parentNode&&!p.isTrigger&&u.event.simulate("submit",this.parentNode,p,true)});j._submit_attached=true}})},teardown:function(){if(u.nodeName(this,"form"))return false;u.event.remove(this,"._submit")}};if(!u.support.changeBubbles)u.event.special.change={setup:function(){if(Bc.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){u.event.add(this,"propertychange._change",function(j){if(j.originalEvent.propertyName===
"checked")this._just_changed=true});u.event.add(this,"click._change",function(j){if(this._just_changed&&!j.isTrigger){this._just_changed=false;u.event.simulate("change",this,j,true)}})}return false}u.event.add(this,"beforeactivate._change",function(j){j=j.target;if(Bc.test(j.nodeName)&&!j._change_attached){u.event.add(j,"change._change",function(p){this.parentNode&&!p.isSimulated&&!p.isTrigger&&u.event.simulate("change",this.parentNode,p,true)});j._change_attached=true}})},handle:function(j){var p=
j.target;if(this!==p||j.isSimulated||j.isTrigger||p.type!=="radio"&&p.type!=="checkbox")return j.handleObj.handler.apply(this,arguments)},teardown:function(){u.event.remove(this,"._change");return Bc.test(this.nodeName)}};u.support.focusinBubbles||u.each({focus:"focusin",blur:"focusout"},function(j,p){var w=0,y=function(B){u.event.simulate(p,B.target,u.event.fix(B),true)};u.event.special[p]={setup:function(){w++===0&&Ra.addEventListener(j,y,true)},teardown:function(){--w===0&&Ra.removeEventListener(j,
y,true)}}});u.fn.extend({on:function(j,p,w,y,B){var I,R;if(typeof j==="object"){if(typeof p!=="string"){w=p;p=a}for(R in j)this.on(R,p,w,j[R],B);return this}if(w==null&&y==null){y=p;w=p=a}else if(y==null)if(typeof p==="string"){y=w;w=a}else{y=w;w=p;p=a}if(y===false)y=o;else if(!y)return this;if(B===1){I=y;y=function(W){u().off(W);return I.apply(this,arguments)};y.guid=I.guid||(I.guid=u.guid++)}return this.each(function(){u.event.add(this,j,y,w,p)})},one:function(j,p,w,y){return this.on.call(this,
j,p,w,y,1)},off:function(j,p,w){if(j&&j.preventDefault&&j.handleObj){var y=j.handleObj;u(j.delegateTarget).off(y.namespace?y.type+"."+y.namespace:y.type,y.selector,y.handler);return this}if(typeof j==="object"){for(y in j)this.off(y,p,j[y]);return this}if(p===false||typeof p==="function"){w=p;p=a}if(w===false)w=o;return this.each(function(){u.event.remove(this,j,w,p)})},bind:function(j,p,w){return this.on(j,null,p,w)},unbind:function(j,p){return this.off(j,null,p)},live:function(j,p,w){u(this.context).on(j,
this.selector,p,w);return this},die:function(j,p){u(this.context).off(j,this.selector||"**",p);return this},delegate:function(j,p,w,y){return this.on(p,j,w,y)},undelegate:function(j,p,w){return arguments.length==1?this.off(j,"**"):this.off(p,j,w)},trigger:function(j,p){return this.each(function(){u.event.trigger(j,p,this)})},triggerHandler:function(j,p){if(this[0])return u.event.trigger(j,p,this[0],true)},toggle:function(j){var p=arguments,w=j.guid||u.guid++,y=0,B=function(I){var R=(u._data(this,
"lastToggle"+j.guid)||0)%y;u._data(this,"lastToggle"+j.guid,R+1);I.preventDefault();return p[R].apply(this,arguments)||false};for(B.guid=w;y<p.length;)p[y++].guid=w;return this.click(B)},hover:function(j,p){return this.mouseenter(j).mouseleave(p||j)}});u.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(j,p){u.fn[p]=function(w,
y){if(y==null){y=w;w=null}return arguments.length>0?this.on(p,null,w,y):this.trigger(p)};if(u.attrFn)u.attrFn[p]=true;if(dc.test(p))u.event.fixHooks[p]=u.event.keyHooks;if(xc.test(p))u.event.fixHooks[p]=u.event.mouseHooks});(function(){function j(J,P,ra,ya,Ea,Ia){Ea=0;for(var Va=ya.length;Ea<Va;Ea++){var Ya=ya[Ea];if(Ya){var wb=false;for(Ya=Ya[J];Ya;){if(Ya[y]===ra){wb=ya[Ya.sizset];break}if(Ya.nodeType===1&&!Ia){Ya[y]=ra;Ya.sizset=Ea}if(Ya.nodeName.toLowerCase()===P){wb=Ya;break}Ya=Ya[J]}ya[Ea]=
wb}}}function p(J,P,ra,ya,Ea,Ia){Ea=0;for(var Va=ya.length;Ea<Va;Ea++){var Ya=ya[Ea];if(Ya){var wb=false;for(Ya=Ya[J];Ya;){if(Ya[y]===ra){wb=ya[Ya.sizset];break}if(Ya.nodeType===1){if(!Ia){Ya[y]=ra;Ya.sizset=Ea}if(typeof P!=="string"){if(Ya===P){wb=true;break}}else if(za.filter(P,[Ya]).length>0){wb=Ya;break}}Ya=Ya[J]}ya[Ea]=wb}}}var w=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,y="sizcache"+(Math.random()+"").replace(".",
""),B=0,I=Object.prototype.toString,R=false,W=true,aa=/\\/g,qa=/\r\n/g,Na=/\W/;[0,0].sort(function(){W=false;return 0});var za=function(J,P,ra,ya){ra=ra||[];var Ea=P=P||Ra;if(P.nodeType!==1&&P.nodeType!==9)return[];if(!J||typeof J!=="string")return ra;var Ia,Va,Ya,wb,Z,Fa=true,Wa=za.isXML(P),Oa=[],Fb=J;do{w.exec("");if(Ia=w.exec(Fb)){Fb=Ia[3];Oa.push(Ia[1]);if(Ia[2]){wb=Ia[3];break}}}while(Ia);if(Oa.length>1&&ob.exec(J))if(Oa.length===2&&La.relative[Oa[0]])Va=Tc(Oa[0]+Oa[1],P,ya);else for(Va=La.relative[Oa[0]]?
[P]:za(Oa.shift(),P);Oa.length;){J=Oa.shift();if(La.relative[J])J+=Oa.shift();Va=Tc(J,Va,ya)}else{if(!ya&&Oa.length>1&&P.nodeType===9&&!Wa&&La.match.ID.test(Oa[0])&&!La.match.ID.test(Oa[Oa.length-1])){Ia=za.find(Oa.shift(),P,Wa);P=Ia.expr?za.filter(Ia.expr,Ia.set)[0]:Ia.set[0]}if(P){Ia=ya?{expr:Oa.pop(),set:hc(ya)}:za.find(Oa.pop(),Oa.length===1&&(Oa[0]==="~"||Oa[0]==="+")&&P.parentNode?P.parentNode:P,Wa);Va=Ia.expr?za.filter(Ia.expr,Ia.set):Ia.set;if(Oa.length>0)Ya=hc(Va);else Fa=false;for(;Oa.length;){Ia=
Z=Oa.pop();if(La.relative[Z])Ia=Oa.pop();else Z="";if(Ia==null)Ia=P;La.relative[Z](Ya,Ia,Wa)}}else Ya=[]}Ya||(Ya=Va);Ya||za.error(Z||J);if(I.call(Ya)==="[object Array]")if(Fa)if(P&&P.nodeType===1)for(J=0;Ya[J]!=null;J++){if(Ya[J]&&(Ya[J]===true||Ya[J].nodeType===1&&za.contains(P,Ya[J])))ra.push(Va[J])}else for(J=0;Ya[J]!=null;J++)Ya[J]&&Ya[J].nodeType===1&&ra.push(Va[J]);else ra.push.apply(ra,Ya);else hc(Ya,ra);if(wb){za(wb,Ea,ra,ya);za.uniqueSort(ra)}return ra};za.uniqueSort=function(J){if(ub){R=
W;J.sort(ub);if(R)for(var P=1;P<J.length;P++)J[P]===J[P-1]&&J.splice(P--,1)}return J};za.matches=function(J,P){return za(J,null,null,P)};za.matchesSelector=function(J,P){return za(P,null,null,[J]).length>0};za.find=function(J,P,ra){var ya,Ea,Ia,Va,Ya,wb;if(!J)return[];Ea=0;for(Ia=La.order.length;Ea<Ia;Ea++){Ya=La.order[Ea];if(Va=La.leftMatch[Ya].exec(J)){wb=Va[1];Va.splice(1,1);if(wb.substr(wb.length-1)!=="\\"){Va[1]=(Va[1]||"").replace(aa,"");ya=La.find[Ya](Va,P,ra);if(ya!=null){J=J.replace(La.match[Ya],
"");break}}}}ya||(ya=typeof P.getElementsByTagName!=="undefined"?P.getElementsByTagName("*"):[]);return{set:ya,expr:J}};za.filter=function(J,P,ra,ya){for(var Ea,Ia,Va,Ya,wb,Z,Fa,Wa,Oa=J,Fb=[],vb=P,oc=P&&P[0]&&za.isXML(P[0]);J&&P.length;){for(Va in La.filter)if((Ea=La.leftMatch[Va].exec(J))!=null&&Ea[2]){Z=La.filter[Va];wb=Ea[1];Ia=false;Ea.splice(1,1);if(wb.substr(wb.length-1)!=="\\"){if(vb===Fb)Fb=[];if(La.preFilter[Va])if(Ea=La.preFilter[Va](Ea,vb,ra,Fb,ya,oc)){if(Ea===true)continue}else Ia=Ya=
true;if(Ea)for(Fa=0;(wb=vb[Fa])!=null;Fa++)if(wb){Ya=Z(wb,Ea,Fa,vb);Wa=ya^Ya;if(ra&&Ya!=null)if(Wa)Ia=true;else vb[Fa]=false;else if(Wa){Fb.push(wb);Ia=true}}if(Ya!==a){ra||(vb=Fb);J=J.replace(La.match[Va],"");if(!Ia)return[];break}}}if(J===Oa)if(Ia==null)za.error(J);else break;Oa=J}return vb};za.error=function(J){throw new Error("Syntax error, unrecognized expression: "+J);};var Sa=za.getText=function(J){var P,ra;P=J.nodeType;var ya="";if(P)if(P===1||P===9)if(typeof J.textContent==="string")return J.textContent;
else if(typeof J.innerText==="string")return J.innerText.replace(qa,"");else for(J=J.firstChild;J;J=J.nextSibling)ya+=Sa(J);else{if(P===3||P===4)return J.nodeValue}else for(P=0;ra=J[P];P++)if(ra.nodeType!==8)ya+=Sa(ra);return ya},La=za.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(J){return J.getAttribute("href")},type:function(J){return J.getAttribute("type")}},relative:{"+":function(J,P){var ra=
typeof P==="string",ya=ra&&!Na.test(P);ra=ra&&!ya;if(ya)P=P.toLowerCase();ya=0;for(var Ea=J.length,Ia;ya<Ea;ya++)if(Ia=J[ya]){for(;(Ia=Ia.previousSibling)&&Ia.nodeType!==1;);J[ya]=ra||Ia&&Ia.nodeName.toLowerCase()===P?Ia||false:Ia===P}ra&&za.filter(P,J,true)},">":function(J,P){var ra,ya=typeof P==="string",Ea=0,Ia=J.length;if(ya&&!Na.test(P))for(P=P.toLowerCase();Ea<Ia;Ea++){if(ra=J[Ea]){ra=ra.parentNode;J[Ea]=ra.nodeName.toLowerCase()===P?ra:false}}else{for(;Ea<Ia;Ea++)if(ra=J[Ea])J[Ea]=ya?ra.parentNode:
ra.parentNode===P;ya&&za.filter(P,J,true)}},"":function(J,P,ra){var ya,Ea=B++,Ia=p;if(typeof P==="string"&&!Na.test(P)){ya=P=P.toLowerCase();Ia=j}Ia("parentNode",P,Ea,J,ya,ra)},"~":function(J,P,ra){var ya,Ea=B++,Ia=p;if(typeof P==="string"&&!Na.test(P)){ya=P=P.toLowerCase();Ia=j}Ia("previousSibling",P,Ea,J,ya,ra)}},find:{ID:function(J,P,ra){if(typeof P.getElementById!=="undefined"&&!ra)return(J=P.getElementById(J[1]))&&J.parentNode?[J]:[]},NAME:function(J,P){if(typeof P.getElementsByName!=="undefined"){var ra=
[];P=P.getElementsByName(J[1]);for(var ya=0,Ea=P.length;ya<Ea;ya++)P[ya].getAttribute("name")===J[1]&&ra.push(P[ya]);return ra.length===0?null:ra}},TAG:function(J,P){if(typeof P.getElementsByTagName!=="undefined")return P.getElementsByTagName(J[1])}},preFilter:{CLASS:function(J,P,ra,ya,Ea,Ia){J=" "+J[1].replace(aa,"")+" ";if(Ia)return J;Ia=0;for(var Va;(Va=P[Ia])!=null;Ia++)if(Va)if(Ea^(Va.className&&(" "+Va.className+" ").replace(/[\t\n\r]/g," ").indexOf(J)>=0))ra||ya.push(Va);else if(ra)P[Ia]=false;
return false},ID:function(J){return J[1].replace(aa,"")},TAG:function(J){return J[1].replace(aa,"").toLowerCase()},CHILD:function(J){if(J[1]==="nth"){J[2]||za.error(J[0]);J[2]=J[2].replace(/^\+|\s*/g,"");var P=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(J[2]==="even"&&"2n"||J[2]==="odd"&&"2n+1"||!/\D/.test(J[2])&&"0n+"+J[2]||J[2]);J[2]=P[1]+(P[2]||1)-0;J[3]=P[3]-0}else J[2]&&za.error(J[0]);J[0]=B++;return J},ATTR:function(J,P,ra,ya,Ea,Ia){P=J[1]=J[1].replace(aa,"");if(!Ia&&La.attrMap[P])J[1]=La.attrMap[P];
J[4]=(J[4]||J[5]||"").replace(aa,"");if(J[2]==="~=")J[4]=" "+J[4]+" ";return J},PSEUDO:function(J,P,ra,ya,Ea){if(J[1]==="not")if((w.exec(J[3])||"").length>1||/^\w/.test(J[3]))J[3]=za(J[3],null,null,P);else{J=za.filter(J[3],P,ra,true^Ea);ra||ya.push.apply(ya,J);return false}else if(La.match.POS.test(J[0])||La.match.CHILD.test(J[0]))return true;return J},POS:function(J){J.unshift(true);return J}},filters:{enabled:function(J){return J.disabled===false&&J.type!=="hidden"},disabled:function(J){return J.disabled===
true},checked:function(J){return J.checked===true},selected:function(J){return J.selected===true},parent:function(J){return!!J.firstChild},empty:function(J){return!J.firstChild},has:function(J,P,ra){return!!za(ra[3],J).length},header:function(J){return/h\d/i.test(J.nodeName)},text:function(J){var P=J.getAttribute("type"),ra=J.type;return J.nodeName.toLowerCase()==="input"&&"text"===ra&&(P===ra||P===null)},radio:function(J){return J.nodeName.toLowerCase()==="input"&&"radio"===J.type},checkbox:function(J){return J.nodeName.toLowerCase()===
"input"&&"checkbox"===J.type},file:function(J){return J.nodeName.toLowerCase()==="input"&&"file"===J.type},password:function(J){return J.nodeName.toLowerCase()==="input"&&"password"===J.type},submit:function(J){var P=J.nodeName.toLowerCase();return(P==="input"||P==="button")&&"submit"===J.type},image:function(J){return J.nodeName.toLowerCase()==="input"&&"image"===J.type},reset:function(J){var P=J.nodeName.toLowerCase();return(P==="input"||P==="button")&&"reset"===J.type},button:function(J){var P=
J.nodeName.toLowerCase();return P==="input"&&"button"===J.type||P==="button"},input:function(J){return/input|select|textarea|button/i.test(J.nodeName)},focus:function(J){return J===J.ownerDocument.activeElement}},setFilters:{first:function(J,P){return P===0},last:function(J,P,ra,ya){return P===ya.length-1},even:function(J,P){return P%2===0},odd:function(J,P){return P%2===1},lt:function(J,P,ra){return P<ra[3]-0},gt:function(J,P,ra){return P>ra[3]-0},nth:function(J,P,ra){return ra[3]-0===P},eq:function(J,
P,ra){return ra[3]-0===P}},filter:{PSEUDO:function(J,P,ra,ya){var Ea=P[1],Ia=La.filters[Ea];if(Ia)return Ia(J,ra,P,ya);else if(Ea==="contains")return(J.textContent||J.innerText||Sa([J])||"").indexOf(P[3])>=0;else if(Ea==="not"){P=P[3];ra=0;for(ya=P.length;ra<ya;ra++)if(P[ra]===J)return false;return true}else za.error(Ea)},CHILD:function(J,P){var ra,ya,Ea,Ia;ra=P[1];var Va=J;switch(ra){case "only":case "first":for(;Va=Va.previousSibling;)if(Va.nodeType===1)return false;if(ra==="first")return true;
Va=J;case "last":for(;Va=Va.nextSibling;)if(Va.nodeType===1)return false;return true;case "nth":ra=P[2];ya=P[3];if(ra===1&&ya===0)return true;P=P[0];if((Ea=J.parentNode)&&(Ea[y]!==P||!J.nodeIndex)){Ia=0;for(Va=Ea.firstChild;Va;Va=Va.nextSibling)if(Va.nodeType===1)Va.nodeIndex=++Ia;Ea[y]=P}J=J.nodeIndex-ya;return ra===0?J===0:J%ra===0&&J/ra>=0}},ID:function(J,P){return J.nodeType===1&&J.getAttribute("id")===P},TAG:function(J,P){return P==="*"&&J.nodeType===1||!!J.nodeName&&J.nodeName.toLowerCase()===
P},CLASS:function(J,P){return(" "+(J.className||J.getAttribute("class"))+" ").indexOf(P)>-1},ATTR:function(J,P){var ra=P[1];J=za.attr?za.attr(J,ra):La.attrHandle[ra]?La.attrHandle[ra](J):J[ra]!=null?J[ra]:J.getAttribute(ra);ra=J+"";var ya=P[2];P=P[4];return J==null?ya==="!=":!ya&&za.attr?J!=null:ya==="="?ra===P:ya==="*="?ra.indexOf(P)>=0:ya==="~="?(" "+ra+" ").indexOf(P)>=0:!P?ra&&J!==false:ya==="!="?ra!==P:ya==="^="?ra.indexOf(P)===0:ya==="$="?ra.substr(ra.length-P.length)===P:ya==="|="?ra===P||
ra.substr(0,P.length+1)===P+"-":false},POS:function(J,P,ra,ya){var Ea=La.setFilters[P[2]];if(Ea)return Ea(J,ra,P,ya)}}},ob=La.match.POS,bc=function(J,P){return"\\"+(P-0+1)};for(var lc in La.match){La.match[lc]=new RegExp(La.match[lc].source+/(?![^\[]*\])(?![^\(]*\))/.source);La.leftMatch[lc]=new RegExp(/(^(?:.|\r|\n)*?)/.source+La.match[lc].source.replace(/\\(\d+)/g,bc))}var hc=function(J,P){J=Array.prototype.slice.call(J,0);if(P){P.push.apply(P,J);return P}return J};try{Array.prototype.slice.call(Ra.documentElement.childNodes,
0)}catch(fd){hc=function(J,P){var ra=0;P=P||[];if(I.call(J)==="[object Array]")Array.prototype.push.apply(P,J);else if(typeof J.length==="number")for(var ya=J.length;ra<ya;ra++)P.push(J[ra]);else for(;J[ra];ra++)P.push(J[ra]);return P}}var ub,Gc;if(Ra.documentElement.compareDocumentPosition)ub=function(J,P){if(J===P){R=true;return 0}if(!J.compareDocumentPosition||!P.compareDocumentPosition)return J.compareDocumentPosition?-1:1;return J.compareDocumentPosition(P)&4?-1:1};else{ub=function(J,P){if(J===
P){R=true;return 0}else if(J.sourceIndex&&P.sourceIndex)return J.sourceIndex-P.sourceIndex;var ra,ya,Ea=[],Ia=[];ra=J.parentNode;ya=P.parentNode;var Va=ra;if(ra===ya)return Gc(J,P);else if(ra){if(!ya)return 1}else return-1;for(;Va;){Ea.unshift(Va);Va=Va.parentNode}for(Va=ya;Va;){Ia.unshift(Va);Va=Va.parentNode}ra=Ea.length;ya=Ia.length;for(Va=0;Va<ra&&Va<ya;Va++)if(Ea[Va]!==Ia[Va])return Gc(Ea[Va],Ia[Va]);return Va===ra?Gc(J,Ia[Va],-1):Gc(Ea[Va],P,1)};Gc=function(J,P,ra){if(J===P)return ra;for(J=
J.nextSibling;J;){if(J===P)return-1;J=J.nextSibling}return 1}}(function(){var J=Ra.createElement("div"),P="script"+(new Date).getTime(),ra=Ra.documentElement;J.innerHTML="<a name='"+P+"'/>";ra.insertBefore(J,ra.firstChild);if(Ra.getElementById(P)){La.find.ID=function(ya,Ea,Ia){if(typeof Ea.getElementById!=="undefined"&&!Ia)return(Ea=Ea.getElementById(ya[1]))?Ea.id===ya[1]||typeof Ea.getAttributeNode!=="undefined"&&Ea.getAttributeNode("id").nodeValue===ya[1]?[Ea]:a:[]};La.filter.ID=function(ya,Ea){var Ia=
typeof ya.getAttributeNode!=="undefined"&&ya.getAttributeNode("id");return ya.nodeType===1&&Ia&&Ia.nodeValue===Ea}}ra.removeChild(J);ra=J=null})();(function(){var J=Ra.createElement("div");J.appendChild(Ra.createComment(""));if(J.getElementsByTagName("*").length>0)La.find.TAG=function(P,ra){ra=ra.getElementsByTagName(P[1]);if(P[1]==="*"){P=[];for(var ya=0;ra[ya];ya++)ra[ya].nodeType===1&&P.push(ra[ya]);ra=P}return ra};J.innerHTML="<a href='#'></a>";if(J.firstChild&&typeof J.firstChild.getAttribute!==
"undefined"&&J.firstChild.getAttribute("href")!=="#")La.attrHandle.href=function(P){return P.getAttribute("href",2)};J=null})();Ra.querySelectorAll&&function(){var J=za,P=Ra.createElement("div");P.innerHTML="<p class='TEST'></p>";if(!(P.querySelectorAll&&P.querySelectorAll(".TEST").length===0)){za=function(ya,Ea,Ia,Va){Ea=Ea||Ra;if(!Va&&!za.isXML(Ea)){var Ya=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(ya);if(Ya&&(Ea.nodeType===1||Ea.nodeType===9))if(Ya[1])return hc(Ea.getElementsByTagName(ya),Ia);else if(Ya[2]&&
La.find.CLASS&&Ea.getElementsByClassName)return hc(Ea.getElementsByClassName(Ya[2]),Ia);if(Ea.nodeType===9){if(ya==="body"&&Ea.body)return hc([Ea.body],Ia);else if(Ya&&Ya[3]){var wb=Ea.getElementById(Ya[3]);if(wb&&wb.parentNode){if(wb.id===Ya[3])return hc([wb],Ia)}else return hc([],Ia)}try{return hc(Ea.querySelectorAll(ya),Ia)}catch(Z){}}else if(Ea.nodeType===1&&Ea.nodeName.toLowerCase()!=="object"){Ya=Ea;var Fa=(wb=Ea.getAttribute("id"))||"__sizzle__",Wa=Ea.parentNode,Oa=/^\s*[+~]/.test(ya);if(wb)Fa=
Fa.replace(/'/g,"\\$&");else Ea.setAttribute("id",Fa);if(Oa&&Wa)Ea=Ea.parentNode;try{if(!Oa||Wa)return hc(Ea.querySelectorAll("[id='"+Fa+"'] "+ya),Ia)}catch(Fb){}finally{wb||Ya.removeAttribute("id")}}}return J(ya,Ea,Ia,Va)};for(var ra in J)za[ra]=J[ra];P=null}}();(function(){var J=Ra.documentElement,P=J.matchesSelector||J.mozMatchesSelector||J.webkitMatchesSelector||J.msMatchesSelector;if(P){var ra=!P.call(Ra.createElement("div"),"div"),ya=false;try{P.call(Ra.documentElement,"[test!='']:sizzle")}catch(Ea){ya=
true}za.matchesSelector=function(Ia,Va){Va=Va.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!za.isXML(Ia))try{if(ya||!La.match.PSEUDO.test(Va)&&!/!=/.test(Va)){var Ya=P.call(Ia,Va);if(Ya||!ra||Ia.document&&Ia.document.nodeType!==11)return Ya}}catch(wb){}return za(Va,null,null,[Ia]).length>0}}})();(function(){var J=Ra.createElement("div");J.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!J.getElementsByClassName||J.getElementsByClassName("e").length===0)){J.lastChild.className=
"e";if(J.getElementsByClassName("e").length!==1){La.order.splice(1,0,"CLASS");La.find.CLASS=function(P,ra,ya){if(typeof ra.getElementsByClassName!=="undefined"&&!ya)return ra.getElementsByClassName(P[1])};J=null}}})();za.contains=Ra.documentElement.contains?function(J,P){return J!==P&&(J.contains?J.contains(P):true)}:Ra.documentElement.compareDocumentPosition?function(J,P){return!!(J.compareDocumentPosition(P)&16)}:function(){return false};za.isXML=function(J){return(J=(J?J.ownerDocument||J:0).documentElement)?
J.nodeName!=="HTML":false};var Tc=function(J,P,ra){var ya,Ea=[],Ia="";for(P=P.nodeType?[P]:P;ya=La.match.PSEUDO.exec(J);){Ia+=ya[0];J=J.replace(La.match.PSEUDO,"")}J=La.relative[J]?J+"*":J;ya=0;for(var Va=P.length;ya<Va;ya++)za(J,P[ya],Ea,ra);return za.filter(Ia,Ea)};za.attr=u.attr;za.selectors.attrMap={};u.find=za;u.expr=za.selectors;u.expr[":"]=u.expr.filters;u.unique=za.uniqueSort;u.text=za.getText;u.isXMLDoc=za.isXML;u.contains=za.contains})();var Aa=/Until$/,Wc=/^(?:parents|prevUntil|prevAll)/,
tc=/,/,Ob=/^.[^:#\[\.,]*$/,jc=Array.prototype.slice,Ib=u.expr.match.POS,uc={children:true,contents:true,next:true,prev:true};u.fn.extend({find:function(j){var p=this,w,y;if(typeof j!=="string")return u(j).filter(function(){w=0;for(y=p.length;w<y;w++)if(u.contains(p[w],this))return true});var B=this.pushStack("","find",j),I,R,W;w=0;for(y=this.length;w<y;w++){I=B.length;u.find(j,this[w],B);if(w>0)for(R=I;R<B.length;R++)for(W=0;W<I;W++)if(B[W]===B[R]){B.splice(R--,1);break}}return B},has:function(j){var p=
u(j);return this.filter(function(){for(var w=0,y=p.length;w<y;w++)if(u.contains(this,p[w]))return true})},not:function(j){return this.pushStack(G(this,j,false),"not",j)},filter:function(j){return this.pushStack(G(this,j,true),"filter",j)},is:function(j){return!!j&&(typeof j==="string"?Ib.test(j)?u(j,this.context).index(this[0])>=0:u.filter(j,this).length>0:this.filter(j).length>0)},closest:function(j,p){var w=[],y,B,I=this[0];if(u.isArray(j)){for(B=1;I&&I.ownerDocument&&I!==p;){for(y=0;y<j.length;y++)u(I).is(j[y])&&
w.push({selector:j[y],elem:I,level:B});I=I.parentNode;B++}return w}var R=Ib.test(j)||typeof j!=="string"?u(j,p||this.context):0;y=0;for(B=this.length;y<B;y++)for(I=this[y];I;)if(R?R.index(I)>-1:u.find.matchesSelector(I,j)){w.push(I);break}else{I=I.parentNode;if(!I||!I.ownerDocument||I===p||I.nodeType===11)break}w=w.length>1?u.unique(w):w;return this.pushStack(w,"closest",j)},index:function(j){if(!j)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof j==="string")return u.inArray(this[0],
u(j));return u.inArray(j.jquery?j[0]:j,this)},add:function(j,p){j=typeof j==="string"?u(j,p):u.makeArray(j&&j.nodeType?[j]:j);p=u.merge(this.get(),j);return this.pushStack(A(j[0])||A(p[0])?p:u.unique(p))},andSelf:function(){return this.add(this.prevObject)}});u.each({parent:function(j){return(j=j.parentNode)&&j.nodeType!==11?j:null},parents:function(j){return u.dir(j,"parentNode")},parentsUntil:function(j,p,w){return u.dir(j,"parentNode",w)},next:function(j){return u.nth(j,2,"nextSibling")},prev:function(j){return u.nth(j,
2,"previousSibling")},nextAll:function(j){return u.dir(j,"nextSibling")},prevAll:function(j){return u.dir(j,"previousSibling")},nextUntil:function(j,p,w){return u.dir(j,"nextSibling",w)},prevUntil:function(j,p,w){return u.dir(j,"previousSibling",w)},siblings:function(j){return u.sibling(j.parentNode.firstChild,j)},children:function(j){return u.sibling(j.firstChild)},contents:function(j){return u.nodeName(j,"iframe")?j.contentDocument||j.contentWindow.document:u.makeArray(j.childNodes)}},function(j,
p){u.fn[j]=function(w,y){var B=u.map(this,p,w);Aa.test(j)||(y=w);if(y&&typeof y==="string")B=u.filter(y,B);B=this.length>1&&!uc[j]?u.unique(B):B;if((this.length>1||tc.test(y))&&Wc.test(j))B=B.reverse();return this.pushStack(B,j,jc.call(arguments).join(","))}});u.extend({filter:function(j,p,w){if(w)j=":not("+j+")";return p.length===1?u.find.matchesSelector(p[0],j)?[p[0]]:[]:u.find.matches(j,p)},dir:function(j,p,w){var y=[];for(j=j[p];j&&j.nodeType!==9&&(w===a||j.nodeType!==1||!u(j).is(w));){j.nodeType===
1&&y.push(j);j=j[p]}return y},nth:function(j,p,w){p=p||1;for(var y=0;j;j=j[w])if(j.nodeType===1&&++y===p)break;return j},sibling:function(j,p){for(var w=[];j;j=j.nextSibling)j.nodeType===1&&j!==p&&w.push(j);return w}});var Pb="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Mb=/ jQuery\d+="(?:\d+|null)"/g,Ta=/^\s+/,Yb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,kc=/<([\w:]+)/,
Hc=/<tbody/i,rb=/<|&#?\w+;/,Nb=/<(?:script|style)/i,Ic=/<(?:script|object|embed|option|style)/i,Bb=new RegExp("<(?:"+Pb+")","i"),vc=/checked\s*(?:[^=]|=\s*.checked.)/i,fc=/\/(java|ecma)script/i,qc=/^\s*<!(?:\[CDATA\[|\-\-)/,Ub={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],
area:[1,"<map>","</map>"],_default:[0,"",""]},Qc=H(Ra);Ub.optgroup=Ub.option;Ub.tbody=Ub.tfoot=Ub.colgroup=Ub.caption=Ub.thead;Ub.th=Ub.td;if(!u.support.htmlSerialize)Ub._default=[1,"div<div>","</div>"];u.fn.extend({text:function(j){if(u.isFunction(j))return this.each(function(p){var w=u(this);w.text(j.call(this,p,w.text()))});if(typeof j!=="object"&&j!==a)return this.empty().append((this[0]&&this[0].ownerDocument||Ra).createTextNode(j));return u.text(this)},wrapAll:function(j){if(u.isFunction(j))return this.each(function(w){u(this).wrapAll(j.call(this,
w))});if(this[0]){var p=u(j,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&p.insertBefore(this[0]);p.map(function(){for(var w=this;w.firstChild&&w.firstChild.nodeType===1;)w=w.firstChild;return w}).append(this)}return this},wrapInner:function(j){if(u.isFunction(j))return this.each(function(p){u(this).wrapInner(j.call(this,p))});return this.each(function(){var p=u(this),w=p.contents();w.length?w.wrapAll(j):p.append(j)})},wrap:function(j){var p=u.isFunction(j);return this.each(function(w){u(this).wrapAll(p?
j.call(this,w):j)})},unwrap:function(){return this.parent().each(function(){u.nodeName(this,"body")||u(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(j){this.nodeType===1&&this.appendChild(j)})},prepend:function(){return this.domManip(arguments,true,function(j){this.nodeType===1&&this.insertBefore(j,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(p){this.parentNode.insertBefore(p,
this)});else if(arguments.length){var j=u.clean(arguments);j.push.apply(j,this.toArray());return this.pushStack(j,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(p){this.parentNode.insertBefore(p,this.nextSibling)});else if(arguments.length){var j=this.pushStack(this,"after",arguments);j.push.apply(j,u.clean(arguments));return j}},remove:function(j,p){for(var w=0,y;(y=this[w])!=null;w++)if(!j||u.filter(j,[y]).length){if(!p&&y.nodeType===
1){u.cleanData(y.getElementsByTagName("*"));u.cleanData([y])}y.parentNode&&y.parentNode.removeChild(y)}return this},empty:function(){for(var j=0,p;(p=this[j])!=null;j++)for(p.nodeType===1&&u.cleanData(p.getElementsByTagName("*"));p.firstChild;)p.removeChild(p.firstChild);return this},clone:function(j,p){j=j==null?false:j;p=p==null?j:p;return this.map(function(){return u.clone(this,j,p)})},html:function(j){if(j===a)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Mb,""):null;else if(typeof j===
"string"&&!Nb.test(j)&&(u.support.leadingWhitespace||!Ta.test(j))&&!Ub[(kc.exec(j)||["",""])[1].toLowerCase()]){j=j.replace(Yb,"<$1></$2>");try{for(var p=0,w=this.length;p<w;p++)if(this[p].nodeType===1){u.cleanData(this[p].getElementsByTagName("*"));this[p].innerHTML=j}}catch(y){this.empty().append(j)}}else u.isFunction(j)?this.each(function(B){var I=u(this);I.html(j.call(this,B,I.html()))}):this.empty().append(j);return this},replaceWith:function(j){if(this[0]&&this[0].parentNode){if(u.isFunction(j))return this.each(function(p){var w=
u(this),y=w.html();w.replaceWith(j.call(this,p,y))});if(typeof j!=="string")j=u(j).detach();return this.each(function(){var p=this.nextSibling,w=this.parentNode;u(this).remove();p?u(p).before(j):u(w).append(j)})}else return this.length?this.pushStack(u(u.isFunction(j)?j():j),"replaceWith",j):this},detach:function(j){return this.remove(j,true)},domManip:function(j,p,w){var y,B,I,R=j[0],W=[];if(!u.support.checkClone&&arguments.length===3&&typeof R==="string"&&vc.test(R))return this.each(function(){u(this).domManip(j,
p,w,true)});if(u.isFunction(R))return this.each(function(za){var Sa=u(this);j[0]=R.call(this,za,p?Sa.html():a);Sa.domManip(j,p,w)});if(this[0]){y=R&&R.parentNode;y=u.support.parentNode&&y&&y.nodeType===11&&y.childNodes.length===this.length?{fragment:y}:u.buildFragment(j,this,W);I=y.fragment;if(B=I.childNodes.length===1?(I=I.firstChild):I.firstChild){p=p&&u.nodeName(B,"tr");for(var aa=0,qa=this.length,Na=qa-1;aa<qa;aa++)w.call(p?V(this[aa],B):this[aa],y.cacheable||qa>1&&aa<Na?u.clone(I,true,true):
I)}W.length&&u.each(W,ma)}return this}});u.buildFragment=function(j,p,w){var y,B,I,R,W=j[0];if(p&&p[0])R=p[0].ownerDocument||p[0];R.createDocumentFragment||(R=Ra);if(j.length===1&&typeof W==="string"&&W.length<512&&R===Ra&&W.charAt(0)==="<"&&!Ic.test(W)&&(u.support.checkClone||!vc.test(W))&&(u.support.html5Clone||!Bb.test(W))){B=true;if((I=u.fragments[W])&&I!==1)y=I}if(!y){y=R.createDocumentFragment();u.clean(j,R,y,w)}if(B)u.fragments[W]=I?y:1;return{fragment:y,cacheable:B}};u.fragments={};u.each({appendTo:"append",
prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(j,p){u.fn[j]=function(w){var y=[];w=u(w);var B=this.length===1&&this[0].parentNode;if(B&&B.nodeType===11&&B.childNodes.length===1&&w.length===1){w[p](this[0]);return this}else{B=0;for(var I=w.length;B<I;B++){var R=(B>0?this.clone(true):this).get();u(w[B])[p](R);y=y.concat(R)}return this.pushStack(y,j,w.selector)}}});u.extend({clone:function(j,p,w){var y,B,I,R=u.support.html5Clone||!Bb.test("<"+j.nodeName)?
j.cloneNode(true):Ka(j);if((!u.support.noCloneEvent||!u.support.noCloneChecked)&&(j.nodeType===1||j.nodeType===11)&&!u.isXMLDoc(j)){ha(j,R);y=na(j);B=na(R);for(I=0;y[I];++I)B[I]&&ha(y[I],B[I])}if(p){ia(j,R);if(w){y=na(j);B=na(R);for(I=0;y[I];++I)ia(y[I],B[I])}}return R},clean:function(j,p,w,y){p=p||Ra;if(typeof p.createElement==="undefined")p=p.ownerDocument||p[0]&&p[0].ownerDocument||Ra;for(var B=[],I,R=0,W;(W=j[R])!=null;R++){if(typeof W==="number")W+="";if(W){if(typeof W==="string")if(rb.test(W)){W=
W.replace(Yb,"<$1></$2>");I=(kc.exec(W)||["",""])[1].toLowerCase();var aa=Ub[I]||Ub._default,qa=aa[0],Na=p.createElement("div");p===Ra?Qc.appendChild(Na):H(p).appendChild(Na);for(Na.innerHTML=aa[1]+W+aa[2];qa--;)Na=Na.lastChild;if(!u.support.tbody){qa=Hc.test(W);aa=I==="table"&&!qa?Na.firstChild&&Na.firstChild.childNodes:aa[1]==="<table>"&&!qa?Na.childNodes:[];for(I=aa.length-1;I>=0;--I)u.nodeName(aa[I],"tbody")&&!aa[I].childNodes.length&&aa[I].parentNode.removeChild(aa[I])}!u.support.leadingWhitespace&&
Ta.test(W)&&Na.insertBefore(p.createTextNode(Ta.exec(W)[0]),Na.firstChild);W=Na.childNodes}else W=p.createTextNode(W);var za;if(!u.support.appendChecked)if(W[0]&&typeof(za=W.length)==="number")for(I=0;I<za;I++)Ja(W[I]);else Ja(W);if(W.nodeType)B.push(W);else B=u.merge(B,W)}}if(w){j=function(Sa){return!Sa.type||fc.test(Sa.type)};for(R=0;B[R];R++)if(y&&u.nodeName(B[R],"script")&&(!B[R].type||B[R].type.toLowerCase()==="text/javascript"))y.push(B[R].parentNode?B[R].parentNode.removeChild(B[R]):B[R]);
else{if(B[R].nodeType===1){p=u.grep(B[R].getElementsByTagName("script"),j);B.splice.apply(B,[R+1,0].concat(p))}w.appendChild(B[R])}}return B},cleanData:function(j){for(var p,w,y=u.cache,B=u.event.special,I=u.support.deleteExpando,R=0,W;(W=j[R])!=null;R++)if(!(W.nodeName&&u.noData[W.nodeName.toLowerCase()]))if(w=W[u.expando]){if((p=y[w])&&p.events){for(var aa in p.events)B[aa]?u.event.remove(W,aa):u.removeEvent(W,aa,p.handle);if(p.handle)p.handle.elem=null}if(I)delete W[u.expando];else W.removeAttribute&&
W.removeAttribute(u.expando);delete y[w]}}});var ua=/alpha\([^)]*\)/i,Ha=/opacity=([^)]*)/,eb=/([A-Z]|^ms)/g,db=/^-?\d+(?:px)?$/i,ib=/^-?\d/,sb=/^([\-+])=([\-+.\de]+)/,zb={position:"absolute",visibility:"hidden",display:"block"},yb=["Left","Right"],Cb=["Top","Bottom"],Zb,yc,pd;u.fn.css=function(j,p){if(arguments.length===2&&p===a)return this;return u.access(this,j,p,true,function(w,y,B){return B!==a?u.style(w,y,B):u.css(w,y)})};u.extend({cssHooks:{opacity:{get:function(j,p){if(p){j=Zb(j,"opacity",
"opacity");return j===""?"1":j}else return j.style.opacity}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":u.support.cssFloat?"cssFloat":"styleFloat"},style:function(j,p,w,y){if(!(!j||j.nodeType===3||j.nodeType===8||!j.style)){var B,I=u.camelCase(p),R=j.style,W=u.cssHooks[I];p=u.cssProps[I]||I;if(w!==a){y=typeof w;if(y==="string"&&(B=sb.exec(w))){w=+(B[1]+1)*+B[2]+parseFloat(u.css(j,p));y="number"}if(!(w==
null||y==="number"&&isNaN(w))){if(y==="number"&&!u.cssNumber[I])w+="px";if(!W||!("set"in W)||(w=W.set(j,w))!==a)try{R[p]=w}catch(aa){}}}else{if(W&&"get"in W&&(B=W.get(j,false,y))!==a)return B;return R[p]}}},css:function(j,p,w){var y,B;p=u.camelCase(p);B=u.cssHooks[p];p=u.cssProps[p]||p;if(p==="cssFloat")p="float";if(B&&"get"in B&&(y=B.get(j,true,w))!==a)return y;else if(Zb)return Zb(j,p)},swap:function(j,p,w){var y={};for(var B in p){y[B]=j.style[B];j.style[B]=p[B]}w.call(j);for(B in p)j.style[B]=
y[B]}});u.curCSS=u.css;u.each(["height","width"],function(j,p){u.cssHooks[p]={get:function(w,y,B){var I;if(y){if(w.offsetWidth!==0)return O(w,p,B);else u.swap(w,zb,function(){I=O(w,p,B)});return I}},set:function(w,y){if(db.test(y)){y=parseFloat(y);if(y>=0)return y+"px"}else return y}}});if(!u.support.opacity)u.cssHooks.opacity={get:function(j,p){return Ha.test((p&&j.currentStyle?j.currentStyle.filter:j.style.filter)||"")?parseFloat(RegExp.$1)/100+"":p?"1":""},set:function(j,p){var w=j.style;j=j.currentStyle;
var y=u.isNumeric(p)?"alpha(opacity="+p*100+")":"",B=j&&j.filter||w.filter||"";w.zoom=1;if(p>=1&&u.trim(B.replace(ua,""))===""){w.removeAttribute("filter");if(j&&!j.filter)return}w.filter=ua.test(B)?B.replace(ua,y):B+" "+y}};u(function(){if(!u.support.reliableMarginRight)u.cssHooks.marginRight={get:function(j,p){var w;u.swap(j,{display:"inline-block"},function(){w=p?Zb(j,"margin-right","marginRight"):j.style.marginRight});return w}}});if(Ra.defaultView&&Ra.defaultView.getComputedStyle)yc=function(j,
p){var w,y,B;p=p.replace(eb,"-$1").toLowerCase();if((y=j.ownerDocument.defaultView)&&(B=y.getComputedStyle(j,null))){w=B.getPropertyValue(p);if(w===""&&!u.contains(j.ownerDocument.documentElement,j))w=u.style(j,p)}return w};if(Ra.documentElement.currentStyle)pd=function(j,p){var w,y,B=j.currentStyle&&j.currentStyle[p],I=j.style;if(B===null&&I&&(w=I[p]))B=w;if(!db.test(B)&&ib.test(B)){w=I.left;if(y=j.runtimeStyle&&j.runtimeStyle.left)j.runtimeStyle.left=j.currentStyle.left;I.left=p==="fontSize"?"1em":
B||0;B=I.pixelLeft+"px";I.left=w;if(y)j.runtimeStyle.left=y}return B===""?"auto":B};Zb=yc||pd;if(u.expr&&u.expr.filters){u.expr.filters.hidden=function(j){var p=j.offsetHeight;return j.offsetWidth===0&&p===0||!u.support.reliableHiddenOffsets&&(j.style&&j.style.display||u.css(j,"display"))==="none"};u.expr.filters.visible=function(j){return!u.expr.filters.hidden(j)}}var gd=/%20/g,od=/\[\]$/,Xc=/\r?\n/g,ld=/#.*$/,zd=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,qd=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
rd=/^(?:GET|HEAD)$/,mc=/^\/\//,Nc=/\?/,D=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,L=/^(?:select|textarea)/i,X=/\s+/,Pa=/([?&])_=[^&]*/,t=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,C=u.fn.load,Y={},sa={},wa,ab,lb=["*/"]+["*"];try{wa=Wb.href}catch(Rb){wa=Ra.createElement("a");wa.href="";wa=wa.href}ab=t.exec(wa.toLowerCase())||[];u.fn.extend({load:function(j,p,w){if(typeof j!=="string"&&C)return C.apply(this,arguments);else if(!this.length)return this;var y=j.indexOf(" ");if(y>=0){var B=
j.slice(y,j.length);j=j.slice(0,y)}y="GET";if(p)if(u.isFunction(p)){w=p;p=a}else if(typeof p==="object"){p=u.param(p,u.ajaxSettings.traditional);y="POST"}var I=this;u.ajax({url:j,type:y,dataType:"html",data:p,complete:function(R,W,aa){aa=R.responseText;if(R.isResolved()){R.done(function(qa){aa=qa});I.html(B?u("<div>").append(aa.replace(D,"")).find(B):aa)}w&&I.each(w,[aa,W,R])}});return this},serialize:function(){return u.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?
u.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||L.test(this.nodeName)||qd.test(this.type))}).map(function(j,p){j=u(this).val();return j==null?null:u.isArray(j)?u.map(j,function(w){return{name:p.name,value:w.replace(Xc,"\r\n")}}):{name:p.name,value:j.replace(Xc,"\r\n")}}).get()}});u.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(j,p){u.fn[p]=function(w){return this.on(p,w)}});u.each(["get","post"],function(j,
p){u[p]=function(w,y,B,I){if(u.isFunction(y)){I=I||B;B=y;y=a}return u.ajax({type:p,url:w,data:y,success:B,dataType:I})}});u.extend({getScript:function(j,p){return u.get(j,a,p,"script")},getJSON:function(j,p,w){return u.get(j,p,w,"json")},ajaxSetup:function(j,p){if(p)Ma(j,u.ajaxSettings);else{p=j;j=u.ajaxSettings}Ma(j,p);return j},ajaxSettings:{url:wa,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(ab[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",
processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":lb},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":b.String,"text html":true,"text json":u.parseJSON,"text xml":u.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:ca(Y),ajaxTransport:ca(sa),ajax:function(j,p){function w(J,P,ra,ya){if(lc!==2){lc=2;bc&&clearTimeout(bc);
ob=a;Sa=ya||"";ub.readyState=J>0?4:0;var Ea,Ia,Va;ya=P;ra=ra?va(y,ub,ra):a;var Ya;if(J>=200&&J<300||J===304){if(y.ifModified){if(Ya=ub.getResponseHeader("Last-Modified"))u.lastModified[qa]=Ya;if(Ya=ub.getResponseHeader("Etag"))u.etag[qa]=Ya}if(J===304){ya="notmodified";Ea=true}else try{Ia=ja(y,ra);ya="success";Ea=true}catch(wb){ya="parsererror";Va=wb}}else{Va=ya;if(!ya||J){ya="error";if(J<0)J=0}}ub.status=J;ub.statusText=""+(P||ya);Ea?R.resolveWith(B,[Ia,ya,ub]):R.rejectWith(B,[ub,ya,Va]);ub.statusCode(aa);
aa=a;if(hc)I.trigger("ajax"+(Ea?"Success":"Error"),[ub,y,Ea?Ia:Va]);W.fireWith(B,[ub,ya]);if(hc){I.trigger("ajaxComplete",[ub,y]);--u.active||u.event.trigger("ajaxStop")}}}if(typeof j==="object"){p=j;j=a}p=p||{};var y=u.ajaxSetup({},p),B=y.context||y,I=B!==y&&(B.nodeType||B instanceof u)?u(B):u.event,R=u.Deferred(),W=u.Callbacks("once memory"),aa=y.statusCode||{},qa,Na={},za={},Sa,La,ob,bc,lc=0,hc,fd,ub={readyState:0,setRequestHeader:function(J,P){if(!lc){var ra=J.toLowerCase();J=za[ra]=za[ra]||J;
Na[J]=P}return this},getAllResponseHeaders:function(){return lc===2?Sa:null},getResponseHeader:function(J){var P;if(lc===2){if(!La)for(La={};P=zd.exec(Sa);)La[P[1].toLowerCase()]=P[2];P=La[J.toLowerCase()]}return P===a?null:P},overrideMimeType:function(J){if(!lc)y.mimeType=J;return this},abort:function(J){J=J||"abort";ob&&ob.abort(J);w(0,J);return this}};R.promise(ub);ub.success=ub.done;ub.error=ub.fail;ub.complete=W.add;ub.statusCode=function(J){if(J){var P;if(lc<2)for(P in J)aa[P]=[aa[P],J[P]];
else{P=J[ub.status];ub.then(P,P)}}return this};y.url=((j||y.url)+"").replace(ld,"").replace(mc,ab[1]+"//");y.dataTypes=u.trim(y.dataType||"*").toLowerCase().split(X);if(y.crossDomain==null){j=t.exec(y.url.toLowerCase());y.crossDomain=!!(j&&(j[1]!=ab[1]||j[2]!=ab[2]||(j[3]||(j[1]==="http:"?80:443))!=(ab[3]||(ab[1]==="http:"?80:443))))}if(y.data&&y.processData&&typeof y.data!=="string")y.data=u.param(y.data,y.traditional);xa(Y,y,p,ub);if(lc===2)return false;hc=y.global;y.type=y.type.toUpperCase();y.hasContent=
!rd.test(y.type);hc&&u.active++===0&&u.event.trigger("ajaxStart");if(!y.hasContent){if(y.data){y.url+=(Nc.test(y.url)?"&":"?")+y.data;delete y.data}qa=y.url;if(y.cache===false){j=u.now();var Gc=y.url.replace(Pa,"$1_="+j);y.url=Gc+(Gc===y.url?(Nc.test(y.url)?"&":"?")+"_="+j:"")}}if(y.data&&y.hasContent&&y.contentType!==false||p.contentType)ub.setRequestHeader("Content-Type",y.contentType);if(y.ifModified){qa=qa||y.url;u.lastModified[qa]&&ub.setRequestHeader("If-Modified-Since",u.lastModified[qa]);
u.etag[qa]&&ub.setRequestHeader("If-None-Match",u.etag[qa])}ub.setRequestHeader("Accept",y.dataTypes[0]&&y.accepts[y.dataTypes[0]]?y.accepts[y.dataTypes[0]]+(y.dataTypes[0]!=="*"?", "+lb+"; q=0.01":""):y.accepts["*"]);for(fd in y.headers)ub.setRequestHeader(fd,y.headers[fd]);if(y.beforeSend&&(y.beforeSend.call(B,ub,y)===false||lc===2)){ub.abort();return false}for(fd in{success:1,error:1,complete:1})ub[fd](y[fd]);if(ob=xa(sa,y,p,ub)){ub.readyState=1;hc&&I.trigger("ajaxSend",[ub,y]);if(y.async&&y.timeout>
0)bc=setTimeout(function(){ub.abort("timeout")},y.timeout);try{lc=1;ob.send(Na,w)}catch(Tc){if(lc<2)w(-1,Tc);else throw Tc;}}else w(-1,"No Transport");return ub},param:function(j,p){var w=[],y=function(I,R){R=u.isFunction(R)?R():R;w[w.length]=encodeURIComponent(I)+"="+encodeURIComponent(R)};if(p===a)p=u.ajaxSettings.traditional;if(u.isArray(j)||j.jquery&&!u.isPlainObject(j))u.each(j,function(){y(this.name,this.value)});else for(var B in j)oa(B,j[B],p,y);return w.join("&").replace(gd,"+")}});u.extend({active:0,
lastModified:{},etag:{}});var ac=u.now(),Uc=/(\=)\?(&|$)|\?\?/i;u.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return u.expando+"_"+ac++}});u.ajaxPrefilter("json jsonp",function(j,p,w){p=j.contentType==="application/x-www-form-urlencoded"&&typeof j.data==="string";if(j.dataTypes[0]==="jsonp"||j.jsonp!==false&&(Uc.test(j.url)||p&&Uc.test(j.data))){var y,B=j.jsonpCallback=u.isFunction(j.jsonpCallback)?j.jsonpCallback():j.jsonpCallback,I=b[B],R=j.url,W=j.data,aa="$1"+B+"$2";if(j.jsonp!==false){R=
R.replace(Uc,aa);if(j.url===R){if(p)W=W.replace(Uc,aa);if(j.data===W)R+=(/\?/.test(R)?"&":"?")+j.jsonp+"="+B}}j.url=R;j.data=W;b[B]=function(qa){y=[qa]};w.always(function(){b[B]=I;y&&u.isFunction(I)&&b[B](y[0])});j.converters["script json"]=function(){y||u.error(B+" was not called");return y[0]};j.dataTypes[0]="json";return"script"}});u.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},
converters:{"text script":function(j){u.globalEval(j);return j}}});u.ajaxPrefilter("script",function(j){if(j.cache===a)j.cache=false;if(j.crossDomain){j.type="GET";j.global=false}});u.ajaxTransport("script",function(j){if(j.crossDomain){var p,w=Ra.head||Ra.getElementsByTagName("head")[0]||Ra.documentElement;return{send:function(y,B){p=Ra.createElement("script");p.async="async";if(j.scriptCharset)p.charset=j.scriptCharset;p.src=j.url;p.onload=p.onreadystatechange=function(I,R){if(R||!p.readyState||
/loaded|complete/.test(p.readyState)){p.onload=p.onreadystatechange=null;w&&p.parentNode&&w.removeChild(p);p=a;R||B(200,"success")}};w.insertBefore(p,w.firstChild)},abort:function(){p&&p.onload(0,1)}}}});var md=b.ActiveXObject?function(){for(var j in hd)hd[j](0,1)}:false,ge=0,hd;u.ajaxSettings.xhr=b.ActiveXObject?function(){return!this.isLocal&&Ca()||Xa()}:Ca;(function(j){u.extend(u.support,{ajax:!!j,cors:!!j&&"withCredentials"in j})})(u.ajaxSettings.xhr());u.support.ajax&&u.ajaxTransport(function(j){if(!j.crossDomain||
u.support.cors){var p;return{send:function(w,y){var B=j.xhr(),I,R;j.username?B.open(j.type,j.url,j.async,j.username,j.password):B.open(j.type,j.url,j.async);if(j.xhrFields)for(R in j.xhrFields)B[R]=j.xhrFields[R];j.mimeType&&B.overrideMimeType&&B.overrideMimeType(j.mimeType);if(!j.crossDomain&&!w["X-Requested-With"])w["X-Requested-With"]="XMLHttpRequest";try{for(R in w)B.setRequestHeader(R,w[R])}catch(W){}B.send(j.hasContent&&j.data||null);p=function(aa,qa){var Na,za,Sa,La,ob;try{if(p&&(qa||B.readyState===
4)){p=a;if(I){B.onreadystatechange=u.noop;md&&delete hd[I]}if(qa)B.readyState!==4&&B.abort();else{Na=B.status;Sa=B.getAllResponseHeaders();La={};if((ob=B.responseXML)&&ob.documentElement)La.xml=ob;La.text=B.responseText;try{za=B.statusText}catch(bc){za=""}if(!Na&&j.isLocal&&!j.crossDomain)Na=La.text?200:404;else if(Na===1223)Na=204}}}catch(lc){qa||y(-1,lc)}La&&y(Na,za,La,Sa)};if(!j.async||B.readyState===4)p();else{I=++ge;if(md){if(!hd){hd={};u(b).unload(md)}hd[I]=p}B.onreadystatechange=p}},abort:function(){p&&
p(0,1)}}}});var yd={},Rc,ed,he=/^(?:toggle|show|hide)$/,Jd=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Kd,fe=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],Ud;u.fn.extend({show:function(j,p,w){if(j||j===0)return this.animate(Sb("show",3),j,p,w);else{w=0;for(var y=this.length;w<y;w++){j=this[w];if(j.style){p=j.style.display;if(!u._data(j,"olddisplay")&&p==="none")p=j.style.display="";p===""&&u.css(j,"display")===
"none"&&u._data(j,"olddisplay",Jc(j.nodeName))}}for(w=0;w<y;w++){j=this[w];if(j.style){p=j.style.display;if(p===""||p==="none")j.style.display=u._data(j,"olddisplay")||""}}return this}},hide:function(j,p,w){if(j||j===0)return this.animate(Sb("hide",3),j,p,w);else{w=0;for(var y=this.length;w<y;w++){j=this[w];if(j.style){p=u.css(j,"display");p!=="none"&&!u._data(j,"olddisplay")&&u._data(j,"olddisplay",p)}}for(w=0;w<y;w++)if(this[w].style)this[w].style.display="none";return this}},_toggle:u.fn.toggle,
toggle:function(j,p,w){var y=typeof j==="boolean";if(u.isFunction(j)&&u.isFunction(p))this._toggle.apply(this,arguments);else j==null||y?this.each(function(){var B=y?j:u(this).is(":hidden");u(this)[B?"show":"hide"]()}):this.animate(Sb("toggle",3),j,p,w);return this},fadeTo:function(j,p,w,y){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:p},j,w,y)},animate:function(j,p,w,y){function B(){I.queue===false&&u._mark(this);var R=u.extend({},I),W=this.nodeType===1,aa=W&&u(this).is(":hidden"),
qa,Na,za,Sa,La;R.animatedProperties={};for(za in j){qa=u.camelCase(za);if(za!==qa){j[qa]=j[za];delete j[za]}Na=j[qa];if(u.isArray(Na)){R.animatedProperties[qa]=Na[1];Na=j[qa]=Na[0]}else R.animatedProperties[qa]=R.specialEasing&&R.specialEasing[qa]||R.easing||"swing";if(Na==="hide"&&aa||Na==="show"&&!aa)return R.complete.call(this);if(W&&(qa==="height"||qa==="width")){R.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(u.css(this,"display")==="inline"&&u.css(this,"float")===
"none")if(!u.support.inlineBlockNeedsLayout||Jc(this.nodeName)==="inline")this.style.display="inline-block";else this.style.zoom=1}}if(R.overflow!=null)this.style.overflow="hidden";for(za in j){W=new u.fx(this,R,za);Na=j[za];if(he.test(Na))if(qa=u._data(this,"toggle"+za)||(Na==="toggle"?aa?"show":"hide":0)){u._data(this,"toggle"+za,qa==="show"?"hide":"show");W[qa]()}else W[Na]();else{qa=Jd.exec(Na);Sa=W.cur();if(qa){Na=parseFloat(qa[2]);La=qa[3]||(u.cssNumber[za]?"":"px");if(La!=="px"){u.style(this,
za,(Na||1)+La);Sa=(Na||1)/W.cur()*Sa;u.style(this,za,Sa+La)}if(qa[1])Na=(qa[1]==="-="?-1:1)*Na+Sa;W.custom(Sa,Na,La)}else W.custom(Sa,Na,"")}}return true}var I=u.speed(p,w,y);if(u.isEmptyObject(j))return this.each(I.complete,[false]);j=u.extend({},j);return I.queue===false?this.each(B):this.queue(I.queue,B)},stop:function(j,p,w){if(typeof j!=="string"){w=p;p=j;j=a}if(p&&j!==false)this.queue(j||"fx",[]);return this.each(function(){function y(aa,qa,Na){qa=qa[Na];u.removeData(aa,Na,true);qa.stop(w)}
var B,I=false,R=u.timers,W=u._data(this);w||u._unmark(true,this);if(j==null)for(B in W)W[B]&&W[B].stop&&B.indexOf(".run")===B.length-4&&y(this,W,B);else if(W[B=j+".run"]&&W[B].stop)y(this,W,B);for(B=R.length;B--;)if(R[B].elem===this&&(j==null||R[B].queue===j)){w?R[B](true):R[B].saveState();I=true;R.splice(B,1)}w&&I||u.dequeue(this,j)})}});u.each({slideDown:Sb("show",1),slideUp:Sb("hide",1),slideToggle:Sb("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(j,
p){u.fn[j]=function(w,y,B){return this.animate(p,w,y,B)}});u.extend({speed:function(j,p,w){var y=j&&typeof j==="object"?u.extend({},j):{complete:w||!w&&p||u.isFunction(j)&&j,duration:j,easing:w&&p||p&&!u.isFunction(p)&&p};y.duration=u.fx.off?0:typeof y.duration==="number"?y.duration:y.duration in u.fx.speeds?u.fx.speeds[y.duration]:u.fx.speeds._default;if(y.queue==null||y.queue===true)y.queue="fx";y.old=y.complete;y.complete=function(B){u.isFunction(y.old)&&y.old.call(this);if(y.queue)u.dequeue(this,
y.queue);else B!==false&&u._unmark(this)};return y},easing:{linear:function(j,p,w,y){return w+y*j},swing:function(j,p,w,y){return(-Math.cos(j*Math.PI)/2+0.5)*y+w}},timers:[],fx:function(j,p,w){this.options=p;this.elem=j;this.prop=w;p.orig=p.orig||{}}});u.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(u.fx.step[this.prop]||u.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];
var j,p=u.css(this.elem,this.prop);return isNaN(j=parseFloat(p))?!p||p==="auto"?0:p:j},custom:function(j,p,w){function y(R){return B.step(R)}var B=this,I=u.fx;this.startTime=Ud||hb();this.end=p;this.now=this.start=j;this.pos=this.state=0;this.unit=w||this.unit||(u.cssNumber[this.prop]?"":"px");y.queue=this.options.queue;y.elem=this.elem;y.saveState=function(){B.options.hide&&u._data(B.elem,"fxshow"+B.prop)===a&&u._data(B.elem,"fxshow"+B.prop,B.start)};if(y()&&u.timers.push(y)&&!Kd)Kd=setInterval(I.tick,
I.interval)},show:function(){var j=u._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=j||u.style(this.elem,this.prop);this.options.show=true;j!==a?this.custom(this.cur(),j):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());u(this.elem).show()},hide:function(){this.options.orig[this.prop]=u._data(this.elem,"fxshow"+this.prop)||u.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(j){var p,w=Ud||hb(),y=true,B=this.elem,I=this.options;
if(j||w>=I.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();I.animatedProperties[this.prop]=true;for(p in I.animatedProperties)if(I.animatedProperties[p]!==true)y=false;if(y){I.overflow!=null&&!u.support.shrinkWrapBlocks&&u.each(["","X","Y"],function(R,W){B.style["overflow"+W]=I.overflow[R]});I.hide&&u(B).hide();if(I.hide||I.show)for(p in I.animatedProperties){u.style(B,p,I.orig[p]);u.removeData(B,"fxshow"+p,true);u.removeData(B,"toggle"+p,true)}if(j=I.complete){I.complete=
false;j.call(B)}}return false}else{if(I.duration==Infinity)this.now=w;else{j=w-this.startTime;this.state=j/I.duration;this.pos=u.easing[I.animatedProperties[this.prop]](this.state,j,0,1,I.duration);this.now=this.start+(this.end-this.start)*this.pos}this.update()}return true}};u.extend(u.fx,{tick:function(){for(var j,p=u.timers,w=0;w<p.length;w++){j=p[w];!j()&&p[w]===j&&p.splice(w--,1)}p.length||u.fx.stop()},interval:13,stop:function(){clearInterval(Kd);Kd=null},speeds:{slow:600,fast:200,_default:400},
step:{opacity:function(j){u.style(j.elem,"opacity",j.now)},_default:function(j){if(j.elem.style&&j.elem.style[j.prop]!=null)j.elem.style[j.prop]=j.now+j.unit;else j.elem[j.prop]=j.now}}});u.each(["width","height"],function(j,p){u.fx.step[p]=function(w){u.style(w.elem,p,Math.max(0,w.now)+w.unit)}});if(u.expr&&u.expr.filters)u.expr.filters.animated=function(j){return u.grep(u.timers,function(p){return j===p.elem}).length};var Ad=/^t(?:able|d|h)$/i,ie=/^(?:body|html)$/i;u.fn.offset="getBoundingClientRect"in
Ra.documentElement?function(j){var p=this[0],w;if(j)return this.each(function(R){u.offset.setOffset(this,j,R)});if(!p||!p.ownerDocument)return null;if(p===p.ownerDocument.body)return u.offset.bodyOffset(p);try{w=p.getBoundingClientRect()}catch(y){}var B=p.ownerDocument,I=B.documentElement;if(!w||!u.contains(I,p))return w?{top:w.top,left:w.left}:{top:0,left:0};p=B.body;B=Fc(B);return{top:w.top+(B.pageYOffset||u.support.boxModel&&I.scrollTop||p.scrollTop)-(I.clientTop||p.clientTop||0),left:w.left+(B.pageXOffset||
u.support.boxModel&&I.scrollLeft||p.scrollLeft)-(I.clientLeft||p.clientLeft||0)}}:function(j){var p=this[0];if(j)return this.each(function(Na){u.offset.setOffset(this,j,Na)});if(!p||!p.ownerDocument)return null;if(p===p.ownerDocument.body)return u.offset.bodyOffset(p);var w,y=p.offsetParent,B=p,I=p.ownerDocument,R=I.documentElement,W=I.body;w=(I=I.defaultView)?I.getComputedStyle(p,null):p.currentStyle;for(var aa=p.offsetTop,qa=p.offsetLeft;(p=p.parentNode)&&p!==W&&p!==R;){if(u.support.fixedPosition&&
w.position==="fixed")break;w=I?I.getComputedStyle(p,null):p.currentStyle;aa-=p.scrollTop;qa-=p.scrollLeft;if(p===y){aa+=p.offsetTop;qa+=p.offsetLeft;if(u.support.doesNotAddBorder&&!(u.support.doesAddBorderForTableAndCells&&Ad.test(p.nodeName))){aa+=parseFloat(w.borderTopWidth)||0;qa+=parseFloat(w.borderLeftWidth)||0}B=y;y=p.offsetParent}if(u.support.subtractsBorderForOverflowNotVisible&&w.overflow!=="visible"){aa+=parseFloat(w.borderTopWidth)||0;qa+=parseFloat(w.borderLeftWidth)||0}w=w}if(w.position===
"relative"||w.position==="static"){aa+=W.offsetTop;qa+=W.offsetLeft}if(u.support.fixedPosition&&w.position==="fixed"){aa+=Math.max(R.scrollTop,W.scrollTop);qa+=Math.max(R.scrollLeft,W.scrollLeft)}return{top:aa,left:qa}};u.offset={bodyOffset:function(j){var p=j.offsetTop,w=j.offsetLeft;if(u.support.doesNotIncludeMarginInBodyOffset){p+=parseFloat(u.css(j,"marginTop"))||0;w+=parseFloat(u.css(j,"marginLeft"))||0}return{top:p,left:w}},setOffset:function(j,p,w){var y=u.css(j,"position");if(y==="static")j.style.position=
"relative";var B=u(j),I=B.offset(),R=u.css(j,"top"),W=u.css(j,"left"),aa={},qa={};if((y==="absolute"||y==="fixed")&&u.inArray("auto",[R,W])>-1){qa=B.position();y=qa.top;W=qa.left}else{y=parseFloat(R)||0;W=parseFloat(W)||0}if(u.isFunction(p))p=p.call(j,w,I);if(p.top!=null)aa.top=p.top-I.top+y;if(p.left!=null)aa.left=p.left-I.left+W;"using"in p?p.using.call(j,aa):B.css(aa)}};u.fn.extend({position:function(){if(!this[0])return null;var j=this[0],p=this.offsetParent(),w=this.offset(),y=ie.test(p[0].nodeName)?
{top:0,left:0}:p.offset();w.top-=parseFloat(u.css(j,"marginTop"))||0;w.left-=parseFloat(u.css(j,"marginLeft"))||0;y.top+=parseFloat(u.css(p[0],"borderTopWidth"))||0;y.left+=parseFloat(u.css(p[0],"borderLeftWidth"))||0;return{top:w.top-y.top,left:w.left-y.left}},offsetParent:function(){return this.map(function(){for(var j=this.offsetParent||Ra.body;j&&!ie.test(j.nodeName)&&u.css(j,"position")==="static";)j=j.offsetParent;return j})}});u.each(["Left","Top"],function(j,p){var w="scroll"+p;u.fn[w]=function(y){var B,
I;if(y===a){B=this[0];if(!B)return null;return(I=Fc(B))?"pageXOffset"in I?I[j?"pageYOffset":"pageXOffset"]:u.support.boxModel&&I.document.documentElement[w]||I.document.body[w]:B[w]}return this.each(function(){if(I=Fc(this))I.scrollTo(!j?y:u(I).scrollLeft(),j?y:u(I).scrollTop());else this[w]=y})}});u.each(["Height","Width"],function(j,p){var w=p.toLowerCase();u.fn["inner"+p]=function(){var y=this[0];return y?y.style?parseFloat(u.css(y,w,"padding")):this[w]():null};u.fn["outer"+p]=function(y){var B=
this[0];return B?B.style?parseFloat(u.css(B,w,y?"margin":"border")):this[w]():null};u.fn[w]=function(y){var B=this[0];if(!B)return y==null?null:this;if(u.isFunction(y))return this.each(function(W){var aa=u(this);aa[w](y.call(this,W,aa[w]()))});if(u.isWindow(B)){var I=B.document.documentElement["client"+p],R=B.document.body;return B.document.compatMode==="CSS1Compat"&&I||R&&R["client"+p]||I}else if(B.nodeType===9)return Math.max(B.documentElement["client"+p],B.body["scroll"+p],B.documentElement["scroll"+
p],B.body["offset"+p],B.documentElement["offset"+p]);else if(y===a){B=u.css(B,w);I=parseFloat(B);return u.isNumeric(I)?I:B}else return this.css(w,typeof y==="string"?y:y+"px")}});b.jQuery=b.$=u;typeof define==="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return u})})(window);steal.loaded("jquery/jquery.js");
steal("jquery").then("app/tools/urlshortener.js","app/tools/placeholder","app/tools/popups/popup.js","app/tools/message.js","app/tools/settings-message.js","app/tools/ogInfo.js","app/tools/cookie.js","app/tools/ga.js","app/tools/common.js","lib/open-window.js","lib/jquery.browser.min.js","app/tools/plugin-downloader.js","app/tools/debug.js",function(b){window.LnProf&&LnProf.prodLoad(657);window.applyPageController=window.applyPageController||function(a,d,f){f=f||{};if(b.fn[a])b("body")[a]();else{if(!d){d=
a.split("_");d.shift();d="app/controllers/"+d.join("/")+".js"}f.loadPopupManager?steal(d).then("app/tools/popup-manager.js",function(){b("body")[a]()}):steal(d,function(){b("body")[a]()})}};window.UTIL={load:function(a,d){if(null==d)d="init";URLSHORTENER[a]&&URLSHORTENER[a][d]&&URLSHORTENER[a][d]()},init:function(){var a=b("body"),d=a.data("controller"),f=a.data("action");a=a.data("simple");if(false in window)window.console={log:function(){}};if(!a){UTIL.load("defaults");UTIL.load(d)}UTIL.load(d,
f)}};window.STOP_APP?LnProf.stopApp():UTIL.init()});steal.loaded("app/app.js");
(function(b,a,d){function f(s){return s}function g(s){return decodeURIComponent(s.replace(k," "))}var k=/\+/g,o=b.cookie=function(s,A,G){if(A!==d){G=b.extend({},o.defaults,G);if(A===null)G.expires=-1;if(typeof G.expires==="number"){var H=G.expires,V=G.expires=new Date;V.setDate(V.getDate()+H)}A=o.json?JSON.stringify(A):String(A);return a.cookie=[encodeURIComponent(s),"=",o.raw?A:encodeURIComponent(A),G.expires?"; expires="+G.expires.toUTCString():"",G.path?"; path="+G.path:"",G.domain?"; domain="+
G.domain:"",G.secure?"; secure":""].join("")}A=o.raw?f:g;G=a.cookie.split("; ");H=0;for(V=G.length;H<V;H++){var ia=G[H].split("=");if(A(ia.shift())===s){s=A(ia.join("="));return o.json?JSON.parse(s):s}}return null};o.defaults={};b.removeCookie=function(s,A){if(b.cookie(s)!==null){b.cookie(s,null,A);return true}return false}})(jQuery,document);steal.loaded("lib/jquery.cookie.js");
steal("jquery/controller",function(b){b.Controller("App.Index.IndexController",{},{sendFormOnKeyUp:false,linkMsg:null,form:null,messageContainer:".js-message-container",init:function(){var a=this;steal("app/popups/index-video-popup.js");steal("lib/bootstrap.min.js").then(function(){a.find(".carousel").carousel()});Popup.init();window.NL_APP_DATA.show_notify_popup&&Popup.show(Popup.TYPE_CONGRATULATIONS);if(window.NL_APP_DATA.show_aw_popup){Popup.show(Popup.TYPE_SIMPLE).addClass("login-autowrap-new");
hihit(2121)}var d=LNG["twitter.widget.header"],f=window.MutationObserver||window.WebKitMutationObserver;if(f){var g=new f(function(k,o){for(var s=k.length-1;s>=0;s--)if(b(k[s].target).hasClass("twitter-timeline-rendered")&&k[s].attributeName=="height"){o.disconnect();a.changeTwitterWidgetHeader(d);break}});g.observe(b(".twitter_search_widget").get(0),{subtree:true,attributes:true})}steal("/js/lib/twitter.widgets.js").then(function(){g||setTimeout(function(){a.changeTwitterWidgetHeader(d)},1500)});
if(isPluginInstalled()){this.find(".browser-button").hide();this.find(".plugin-installed-msg").show()}},changeTwitterWidgetHeader:function(a){b(b("#twitter-widget-0").contents().find("body")).find(".timeline-header .customisable-highlight").text(a)},".js-btn-aw-on click":function(a,d){var f=this;hihit(2122);d.preventDefault();b.get("/ajax/handle-notification-popup",{notification_value:"on",counter:2124},function(g){if(g.success){Popup.hide();(new Message).showAndHide('Twitter automation is enabled. You can turn off this feature in <a href="/settings">settings</a>.',
Message.TYPE_SUCCESS,f.messageContainer,5E3)}});return false},_reauthHandler:function(a,d,f){d.preventDefault();Reauth.init();Reauth.showSpinner();var g=null;switch(f){case "tw":g=authWithTw(null,1);break;case "fb":g=authWithFb(null,1);break;default:return false}var k=setInterval(function(){if(g.closed){Reauth.processResponse();clearInterval(k)}},10)},".popup-resignin-tw click":function(a,d){this._reauthHandler(a,d,"tw")},".popup-resignin-fb click":function(a,d){this._reauthHandler(a,d,"fb")},".js-video-preview click":function(a,
d){d.preventDefault();this.videoPopup=PopupSM.get("indexVideo");this.videoPopup.videoId="YzpGnx6pM30";this.videoPopup.show()}})});steal.loaded("app/controllers/index/index/index.js");
steal("jquery/controller",function(b){b.Controller("App.IndexCaptionsController",{},{init:function(){this.bindReactionsPager()},bindReactionsPager:function(){var a=this;b("div.left-content span a.load-more").click(function(d){d.preventDefault();var f=this;b.ajax({type:"POST",url:"/ajax/load-reactions",data:{hash:b(this).parent().data("hash"),page:b(this).data("page")},async:false,success:function(g){if(g.success){b(f).parent().append(g.html);b(f).remove();a.bindReactionsPager()}}});return false})}})});
steal.loaded("app/controllers/index/index/captions.js");
steal("jquery/controller","app/show/theme3/show.js","app/controllers/index/bookmark/settings_poll.js","app/controllers/index/bookmark/popups/bookmarklet.js",function(b){App.Show.Theme3.Controller("App.IndexBookmarkController",{},{init:function(){this.popup=PopupSM.get("bookmarklet");this.initAfterUrlCreate();if(window.NL_APP_DATA.hasUrlCreateError){this.popup.hideHeader();this.hideOnError()}Registry.setController("show",this)},initAfterUrlCreate:function(){this.popup.show();this.CaptionModel=new Theme.Models.Caption({link_id:LinkData.id,
caption:LinkData.caption});window.addthis_config={services_exclude:"print"};window.addthis&&window.addthis.init();b("body").app_show_share({captionModel:this.CaptionModel});Registry.setController("share",b("body").data("controllers").app_show_share);this._initShareController()},hideOnError:function(){var a=this;setTimeout(function(){a.popup.hide()},3E3)},".settings-buttons a click":function(a,d){d.preventDefault();d=a.data("type");if(a.hasClass("active")){b(".js-settings").hide();a.removeClass("active")}else{b(".js-settings").hide();
b(".settings-buttons a").removeClass("active");a.addClass("active");b(".js-settings-"+a.data("type")).show();d=="poll"&&this.settingsPoll._applyScrolling()}},applyPoll:function(){this.settingsPoll=new App.IndexBookmark.SettingsPoll(b(".js-settings-popup"))},".js-settings-poll-save, .js-settings-link-save click":function(a,d){d.preventDefault();var f=this,g=this.find("form");a=g.find('[name="question"]');var k=b.trim(a.val());if(a.length){if(k.length==0){f.message.showAndHide(LNG["poll.question.tooShort"],
Message.TYPE_ERROR,Message.containers("settings"));return}if(k.length>255){f.message.showAndHide(LNG["poll.question.tooLong"],Message.TYPE_ERROR,Message.containers("settings"));return}}f.settingsPoll&&f.settingsPoll.injectData(g);b.post("/ajax/process-common-settings",g.serialize(),function(o){o.success?f._saveSettingsCallbackSuccess(o,{question:k,form:g}):f.message.showAndHide(LNG["popup.settingsErrorMessage"],Message.TYPE_ERROR,Message.containers("settings"))})},_saveSettingsCallbackSuccess:function(a,
d){this._super(a,d);this.settingsPoll.setInnerHtml(a.pollData)}})});steal.loaded("app/controllers/index/bookmark/bookmark.js");steal("jquery/controller","app/popups/index-video-popup.js",function(b){b.Controller("App.Index.BookmarkletController",{},{init:function(){},".js-video-preview click":function(a,d){d.preventDefault();this.videoPopup=PopupSM.get("indexVideo");this.videoPopup.videoId="YzpGnx6pM30";this.videoPopup.show()}})});steal.loaded("app/controllers/index/bookmark/bookmarklet.js");
steal("jquery/controller",function(b){b.Controller("App.IndexLandingController",{},{init:function(){hihit(1738);User.isAuthorized()?hihit(2024):hihit(2025);var a=b(".btn-signin-tw");a.off("click");a.click(function(d){d.preventDefault();hihit(1742);b.cookie(window.NL_APP_DATA.cookies.notification_enabled,1,{expires:1,path:"/"});if(User.isAuthorized())if(window.NL_APP_DATA.user.type=="tw"||window.NL_APP_DATA.user.hasTw)window.location="/";else authWithTw(window.NL_APP_DATA.redirect_after_auth);else window.twAuth(window.NL_APP_DATA.redirect_after_auth)})},
".js-play-youtube click":function(a,d){d.preventDefault();a.hide();b("#js-video-how-to").show()}})});steal.loaded("app/controllers/index/landing/landing.js");
steal("app/controllers/user/settings/base.js","app/controllers/user/settings/promo_settings.js","app/controllers/user/settings/poll.js","app/controllers/user/settings/rss.js","app/controllers/user/settings/popups/photo-upload.js","app/controllers/user/themes/themes.js",function(b){App.Settings.BaseController("App.UserSettingsController",{defaults:{uploadPopup:null,counters:{add_slogan:2632,add_website:2633,add_fb:2634,add_twitter:2635,add_linkedin:2636,add_google_plus:2637,add_avatar:2638}}},{_ERROR:SettingsMessage.TYPE_ERROR,
_SUCCESS:SettingsMessage.TYPE_SUCCESS,tabSwitcher:".js-settings-tab-switcher",init:function(){steal("app/controllers/user/settings/settings-externals.js");steal("app/popups/index-video-popup.js");Popup.init();this.initTabsControllers();this.initHashTab()},initTabsControllers:function(){b(".js-promo-tab").app_settings_promo(promoLink);b(".js-poll-tab").app_settings_poll();b(".js-themes-tab").app_user_themes();b(".js-rss-tab").app_settings_rss()},initHashTab:function(){var a=b(".js-tabber"),d=b('a[href="'+
window.location.hash+'"]');if(a.length)if(window.location.hash===""||d.length==0)window.location.hash=a.find("a:first").attr("href");else b(window).trigger("hashchange")},"{window} hashchange":function(){var a=b('a[href="'+window.location.hash+'"]'),d=window.location.hash.substr(1),f=b(".js-tabber"),g=b(".js-tabs");if(d===""){PopupSM.closeActive();return false}if(!f.length)return false;if(a.length==0)window.location.hash=f.find("a:first").attr("href");f.find("a").removeClass("active");a.addClass("active");
g.find("> *").hide();g.find("."+d).show()},".js-change-photo-btn click":function(){Ga.event(["_trackEvent","Settings ","Personal info update"]);this.uploadPopup=PopupSM.get("photoUpload");this.uploadPopup.show()},".soc-acc .js-enter-input paste":function(a){setTimeout(function(){a.parent().find(".js-socials-add-account").trigger("click")},100)},".js-form-add-domain submit":function(a,d){d.preventDefault();var f=a.find('[name="domain"]'),g=a.find(".js-add-domain"),k=a.find(".loading"),o=a.find(".js-message-container"),
s=new SettingsMessage,A=f.val().replace(/^\s+|\s+$/g,""),G=this;if(A===""){s.showAndHide(LNG["settings.blacklist.empty_domain_error"],this._ERROR,o,f);return false}f.blur().focus();g.hide();k.addClass("enabled");b.post("/ajax/add-blacklist-domain",{domain:A},function(H){k.removeClass("enabled");g.show();H.success?G.addDomainRow(H,a,A):s.showAndHide(H.error,G._ERROR,o,f)},"json")},".js-whitelist .js-delete-domain click":function(a){var d=a.parent(".domain-holder"),f=d.find(".loading"),g=d.find(".js-message-container"),
k=new SettingsMessage,o=this;f.addClass("enabled");a={domain_id:a.data("domain-id")};b.post("/ajax/remove-blacklist-domain",a,function(s){f.removeClass("enabled");s.success?d.remove():k.showAndHide(s.error,o._ERROR,g)},"json")},addDomainRow:function(a,d,f){var g=b(".js-domains-holder");a=b("<a/>",{"class":"delete-x js-delete-domain","data-domain-id":a.domain_id,title:LNG["settings.blacklist.remove_domain"],text:"delete",href:"javascript:void(0);"});var k=b("<div/>",{"class":"domain-holder"});k.css("background-color",
"#FFFBD0").animate({backgroundColor:"#fff"},2E3);k.prepend(b("<p/>",{"class":"js-message-container",style:"display: none;",text:"<span></span>"}));k.prepend(b("<div/>",{"class":"loading"}));k.prepend(a);k.prepend(b("<p/>",{"class":"existing-domain",text:f}));g.append(k);d[0].reset()},"#twAutomationSwitcher click":function(a,d){d.stopImmediatePropagation();Ga.event(["_trackEvent","Settings ","Twitter automation "+(!a.hasClass("checked-switcher")?"ON":"OFF")]);this.toggleUserSettingCheckbox(a,function(f){(new SettingsMessage).showAndHide(LNG["settings.successMsg"],
SettingsMessage.TYPE_SUCCESS,a.closest(".js-checkbox-param").find(".js-message-container"));if(f.success)b(".js-whitelist")[a.hasClass("checked-switcher")?"show":"hide"]()})},"#twSwitcherSilentUser click":function(a,d){d.stopImmediatePropagation();Ga.event(["_trackEvent","Settings ","Change silent user status "+(!a.hasClass("checked-switcher")?"ON":"OFF")]);this.toggleUserSettingCheckbox(a)},".js-youtube-thumb click":function(a,d){d.preventDefault();this.videoPopup=PopupSM.get("indexVideo");this.videoPopup._title=
"Linkis Automation: video illustration and explanation";this.videoPopup._addClass="learn-feature-popup";this.videoPopup._width=640;this.videoPopup._height=360;this.videoPopup.videoId="uAuyhFTDveQ";this.videoPopup.show()},".js-checkbox-label-automation click":function(a,d){a.closest(".js-checkbox-param").find("#twAutomationSwitcher").trigger("click");d.stopImmediatePropagation()},".js-checkbox-silent click":function(a,d){a.closest(".js-checkbox-param").find("#twSwitcherSilentUser").trigger("click");
d.stopImmediatePropagation()},".js-add-optional-account click":function(a,d){d.preventDefault();a.next(".soc-acc").show();a.remove()},".js-save-items click":function(a){var d=a.closest(".js-editable-item"),f=d.find(".js-editable-input-wrapper"),g=d.find(".js-editable-text-wrapper"),k=d.find(".buttons"),o=d.find(".loading"),s=d.find(".js-edit-input, .js-edit-textarea"),A={},G=this;A=this.prepareEditableData(d);if(A===false)return false;k.hide();o.addClass("enabled");App.Settings.BaseController.saveUserSettings(a,
d,A,function(){s.each(function(){var H=b(this).data("input"),V=b("[data-text='"+H+"']");H=b("[data-text='"+H+"-placeholder']");if(H.length)H[b(this).val()===""?"show":"hide"]();V.text(b(this).val())});o.removeClass("enabled");k.show();f.hide();g.show();A.slogan!==undefined&&G.processSocialInfoCounter("slogan")})},".js-remove-editable click":function(a){var d=a.closest(".js-editable-item"),f=d.find(".js-editable-input-wrapper"),g=f.find(".js-edit-input"),k=d.find(".js-editable-text-wrapper"),o=d.find(".loading");
if(a.hasClass("disabled"))return false;a.addClass("disabled");o.addClass("enabled");var s=g.data("field"),A={};A[s]="";App.Settings.BaseController.saveUserSettings(a,d,A,function(G){k.hide();f.show();d.removeClass("edit");g.val("");G.removeClass("disabled");o.removeClass("enabled")})},".js-theme-preview-icon click":function(a,d){d.preventDefault();if(a=a.parents("[data-preview]").data("preview")){d=this.find(".big-image-overlay").show();d.find("img").hide();d.find('img[rel="'+a+'"]').show()}},".big-image-overlay, .big-image-overlay .close click":function(a,
d){d.preventDefault();this.closeThemePreview()},closeThemePreview:function(){this.find(".big-image-overlay").hide().find("img").hide()},"{window} keydown":function(a,d){d.keyCode==27&&this.closeThemePreview()},".js-add-account-twitter click":function(){authWithTw();return false},".js-add-account-facebook click":function(){authWithFb();return false},".js-socials-add-account click":function(a){var d=a.closest(".soc-acc"),f=d.find(".feed-url"),g=d.find(".loading"),k=new SettingsMessage,o=this;if(f.val().replace(/^\s+|\s+$/g,
"")===""||f.hasClass("disabled")){k.showAndHide(LNG["settings.socials.emptyUrl"],this._ERROR,d.find(".js-message-container"),f);return false}a.hide();g.addClass("enabled");var s={type:d.data("type"),url:f.val()};Ga.event(["_trackEvent","Settings ","Personal info change links"]);b.post("/ajax/save-social-profile",s,function(A){g.removeClass("enabled");if(A.success){if(App.UserThemesController!==undefined)App.UserThemesController.needRefresh=true;o.processSocialInfoCounter(s.type);d.empty();d.append(b("<div/>",
{"class":"loading"}));d.append(b("<span/>",{"class":"icon"}));var G=b("<p/>",{"class":"social-title"});A.socialTitle!==undefined&&A.socialTitle!==""&&G.append(b("<span/>",{html:A.socialTitle+"&nbsp;&nbsp;|&nbsp;&nbsp;"}));G.append(b("<a/>",{"class":"social-link",href:A.url,target:"_blank",text:A.title}));d.append(G);d.append(b("<a/>",{"class":"delete-x js-socials-remove-account",text:LNG["settings.socials.deleteAccount"],href:"javascript:void(0);"}));d.addClass("has-url")}else{a.show();k.showAndHide(A.message,
o._ERROR,d.find(".js-message-container"),f)}},"json")},".js-socials-remove-account click":function(a){var d=a.closest(".soc-acc"),f=a.parent().find(".loading"),g=false,k=new SettingsMessage;b.ajax({url:"/ajax/check-is-logged",type:"post",success:function(s){if(s.error){k.showAndHide(s.error,SettingsMessage.TYPE_ERROR,d.find(".js-message-container"));g=true}},async:false});if(g)return false;a.hide();f.addClass("enabled");var o={type:d.data("type")};b.post("/ajax/remove-social-profile",o,function(s){f.removeClass("enabled");
if(s.success){if(App.UserThemesController!==undefined)App.UserThemesController.needRefresh=true;d.empty();d.append(b("<span/>",{"class":"icon"}));d.append(b("<div/>",{"class":"loading"}));d.append(b("<input/>",{type:"text","class":"feed-url js-enter-input",placeholder:LNG["settings.socials.urlPlaceholder"]}));d.append(b("<a/>",{"class":"add-url active-add-url js-socials-add-account js-enter-trigger",text:LNG["settings.socials.addAccount"],href:"javascript:void(0);"}));d.removeClass("has-url")}else{a.show();
(new SettingsMessage).showAndHide(s.message,this._ERROR,d.find(".js-message-container"))}},"json")},processSocialInfoCounter:function(a){this.options.counters!==undefined&&this.options.counters["add_"+a]!==undefined&&hihit(this.options.counters["add_"+a])}})});steal.loaded("app/controllers/user/settings/settings.js");
steal("app/controllers/user/settings/base.js","app/controllers/user/settings/popups/theme-preview.js","app/controllers/user/themes/popups/theme-choose-color.js",function(b){App.Settings.BaseController("App.UserThemesController",{defaults:{counters:{setTheme:{9:2393,10:2392,11:2630,12:2631}},settingsPopup:null,settingsResponse:null,settingsChanged:false},needRefresh:false},{init:function(){steal("app/controllers/user/settings/settings-externals.js")},closeThemePreview:function(){PopupSM.get("themePreview").hide()},
closeThemeSettings:function(a){a.each(function(){b(this).hide().empty().show().data("loaded",0).removeClass("opened")})},processThemeSelectCounter:function(a){this.options.curTheme=a;this.options.counters.setTheme[a]!==undefined&&hihit(this.options.counters.setTheme[a])},".js-change-color-trigger click":function(a,d){d.preventDefault();d=a.closest(".js-theme");PopupSM.get("themeColors").setThemeId(d.data("theme-id")).setTriggerElement(a).show()},".js-setup-theme click":function(a){a=a.closest(".js-theme");
var d=a.find(".js-settings");if(d.data("loaded")==1){this.closeThemeSettings(d);return false}else this.closeThemeSettings(this.find(".js-settings"));d.addClass("loading");b.post("/ajax/get-theme-settings",{themeId:a.data("theme-id")},function(f){d.addClass("opened");d.data("loaded",1);d.removeClass("loading");d.append(f.html)})},".js-activate click":function(a){var d=a.closest(".js-theme"),f=d.data("theme-id"),g=a.closest(".js-activate-theme").find(".loading"),k=this;if(a.hasClass("disabled"))return false;
a.hide();g.addClass("enabled");b(".js-activate").addClass("disabled");Ga.event(["_trackEvent","Settings ","Themes activate"]);b.post("/ajax/save-settings-value",{theme:f},function(o){g.removeClass("enabled");b(".js-activate").removeClass("disabled");if(o.success){b(".js-theme").removeClass("activated");b(".js-activated").hide();a.css("display","");d.find(".js-activated").show();b('[data-theme-id="'+f+'"]').addClass("activated");hihit(1860);k.processThemeSelectCounter(f)}else(new Message).showAndHide(o.error,
Message.TYPE_ERROR,d.find(".js-message-container"))},"json")},"{window} keydown":function(a,d){d.keyCode==27&&this.closeThemePreview()},".js-edit-section click":function(a,d){d.preventDefault();if(a=a.attr("href").split("#")[1])location.hash=a;if(!this.settingsPopup){var f=this;this.settingsController=new App.UserSettingsController(".js-user-settings");this.settingsPopup=PopupSM.get("userSettings");new App.Settings.Popup.UserSettings(".modal-popup");this.settingsPopup.onHide=function(){if(App.UserThemesController.needRefresh!==
false){var g=b(".js-theme .js-settings.opened"),k=g.closest(".js-theme").find(".js-setup-theme");f.closeThemeSettings(g);k.trigger("click");App.UserThemesController.needRefresh=false}}}this.settingsPopup.show()},"{window} resize":function(){this.popupOveflow()},popupOveflow:function(){580>b(window).height()&&b(".modal-popup").css("overflow","auto");580<b(window).height()&&b(".modal-popup").css("overflow","visible")},".js-theme-zoomer click":function(a){var d=a.closest(".js-theme");a=d.data("theme-id");
var f=d.data("theme-title");d=d.data("color-name");b(".modal-popup").css("overflow","visible");this.popupOveflow();Ga.event(["_trackEvent","Settings ","Themes preview"]);this.previewPopup=PopupSM.get("themePreview");this.previewPopup.themeId=a;this.previewPopup.colorScheme=d;this.previewPopup.title=f;this.previewPopup.show()}})});steal.loaded("app/controllers/user/themes/themes.js");
steal("jquery/controller",function(){jQuery.fn.myVal=function(b){if(b!==undefined)return this.val(b);if("placeholder"in document.createElement("textarea"))return this.val();else if(this[0]){b=$(this[0]);return b.attr("placeholder")!=""&&b.val()==b.attr("placeholder")?"":b.val()}};$.Controller("App.Tools.Placeholder",{defaults:{placeholderSelector:"[placeholder]"}},{_nativeMode:false,init:function(){this._nativeMode="placeholder"in document.createElement("textarea");if(!this._nativeMode){this.find(this.options.placeholderSelector).blur();
$(this.options.placeholderSelector).parents("form").on("submit",this.onFormSubmit)}},"{placeholderSelector} focus":function(b){if(!this._nativeMode)if(b.val()==b.attr("placeholder")){b.val("");b.removeClass("placeholder")}},"{placeholderSelector} blur":function(b){if(!this._nativeMode)if(b.val()==""||b.val()==b.attr("placeholder")){b.addClass("placeholder");b.val(b.attr("placeholder"))}},onFormSubmit:function(){$(this).find("[placeholder]").each(function(){var b=$(this);b.val()==b.attr("placeholder")&&
b.val("")})}})});steal.loaded("app/tools/placeholder/placeholder.js");
steal("jquery/controller",function(){$.Controller("App.Tools.Popup",{defaults:{popupTriggerSelector:".popup-trigger",popupSelector:".zpopup",log:false}},{init:function(){this.element.on("click",$.proxy(this.hidePopups,this))},"{popupTriggerSelector} click":function(b,a){a.preventDefault();b=b.siblings(".zpopup");a=b.css("display")=="none";this.hidePopups();a&&b.show()},"#poll-popup > a mouseenter":function(b){b=b.siblings(".zpopup");b.css("display")=="none"&&b.show()},"#poll-popup > a click":function(b,
a){a.preventDefault()},"#poll-popup .zpopup mouseleave":function(b){if(b.css("display")!="none"){this.element.find(".votes-panel").controller().hideCallback();b.hide()}},"{popupSelector} click":function(b,a){a.stopImmediatePropagation()},hidePopups:function(b){var a=this,d=a.find(a.options.popupSelector);if(null!=b){b=$(b.target);a=b.add(b.parents()).filter(a.options.popupTriggerSelector).siblings(".zpopup");d=d.not(a)}d.hide()}})});steal.loaded("app/tools/popups/popup.js");
steal("jquery/class").then(function(){$.Class("Message",{TYPE_ERROR:"alert-error",TYPE_SUCCESS:"alert-success",TYPES:["TYPE_ERROR","TYPE_SUCCESS"],MESSAGE_CONTAINER:".js-message-container",containerList:{},containers:function(b,a){if(b&&a)if(this.containerList[b]==undefined){this.containerList[b]=a;return true}else return false;if(b)return this.containerList[b];return this.containerList},containerUpdate:function(b,a){if(b&&this.containerList[b]){this.containerList[b]=a;return true}return false}},
{message:null,messageType:null,messageContainer:null,messageHolder:"span",animation:0,delayTime:3E3,animationTime:0,userCallback:null,_holderCache:null,init:function(){this.messageType=this.constructor.TYPE_SUCCESS;this.messageContainer=this.constructor.MESSAGE_CONTAINER},setMessage:function(b){this.message=b;return this},getMessage:function(){return this.message},setMessageType:function(b){this.messageType=b;return this},getMessageType:function(){return this.messageType},setMessageContainer:function(b){this.messageContainer=
b;return this},getMessageContainer:function(){return this.messageContainer},setMessageHolder:function(b){this.messageHolder=b;return this},getMessageHolder:function(){return this.messageHolder},_pushMessage:function(){this._checkMessageHolder();this._getHolder().html(this.getMessage());return this},_checkMessageHolder:function(){$(this.getMessageContainer()).find(this.getMessageHolder()).length==0?this._setHolder($(this.getMessageContainer())):this._setHolder($(this.getMessageContainer()).find(this.getMessageHolder()))},
_clearMessage:function(){this._getHolder()&&this._getHolder().empty()},_pushMessageType:function(){$(this.getMessageContainer()).addClass(this.getMessageType());return this},_clearMessageType:function(){var b=this;$.map(this.constructor.TYPES,function(a){$(b.getMessageContainer()).removeClass(b.constructor[a])});return this},_clearContainer:function(){this._clearMessageType()._clearMessage();this.animation=0},_showAnimation:function(){this.animation=1;$(this.getMessageContainer()).show(this.animationTime);
return this},_hideAnimation:function(){this.animation=0;$(this.getMessageContainer()).hide(this.animationTime,this.callback("_clearContainer"));return this},_getHolder:function(){return this._holderCache},_setHolder:function(b){this._holderCache=b;return this},setAnimationTime:function(b){this.animationTime=b;return this},show:function(b,a,d){if(this.animation==1)return false;d&&this.setMessageContainer(d);this._clearMessageType();b&&this.setMessage(b);a&&this.setMessageType(a);this._pushMessage()._pushMessageType()._showAnimation();
return true},hide:function(b){typeof b=="function"&&b.call(self);this._hideAnimation()},delay:function(b){var a=this;setTimeout(function(){a.hide(b)},a.delayTime)},showAndHide:function(b,a,d,f,g){var k=null;if(typeof d=="function"){k=d;d=null}if(typeof f=="function")k=f;if(typeof g=="function")k=g;if(typeof f=="number")this.delayTime=f;this.show(b,a,d)&&this.delay(k)}})});steal.loaded("app/tools/message.js");
steal("jquery/class").then(function(){$.Class("Og",{_head:null,_data:null,INFO_DESCRIPTION:"description",INFO_TITLE:"title",INFO_IMAGE:"image",INFO_URL:"url",init:function(){if(this._head===null)this._head=$("head");if(typeof LinkData=="object")this._data=LinkData},getImage:function(){return this._head.find('meta[property="og:image"]').attr("content")},getDescription:function(){return this._head.find('meta[property="og:description"]').attr("content")},getTitle:function(){return this._data.originalTitle},
getCaption:function(){return LinkData.caption},getOriginalUrl:function(){return this._data.longUrl},getUrl:function(){return this._data.baseShortAliasLink}},{})});steal.loaded("app/tools/ogInfo.js");
steal("jquery/class","lib/jquery.cookie.js",function(b){b.Class("Cookie",{set:function(a,d,f){if(typeof d=="object"&&d!==null)d=JSON.stringify(d);f=this._prepareParams(f);return b.cookie(a,d,f)},get:function(a){return b.cookie(a)},unset:function(a,d){d=this._prepareParams(d);d.expires=-1;b.removeCookie(a,d)},_prepareParams:function(a){a=a||{};if(!a.domain&&window.NL_APP_DATA&&NL_APP_DATA.cookie_domain)a.domain=NL_APP_DATA.cookie_domain;if(a.path===undefined)a.path="/";return a}},{})});steal.loaded("app/tools/cookie.js");
steal("jquery/class").then(function(){if($.isArray(window.Ga)){var b=window.Ga;window.Ga=null}$.Class("Ga",{debug:false,accountId:"UA-37487949-1",init:function(){window._gaq=window._gaq||[];var a=this;this._setAccount(this.accountId);$.isArray(b)&&$.map(b,function(d){if($.isArray(d)){$.inArray("_trackPageview",d)!==-1&&a.getGaq().push(d);$.inArray("_trackEvent",d)!==-1&&a.getGaq().push(d)}});if(steal.options.env==="production"||this.debug==true)this._loadScript()},event:function(a){this.getGaq().push(a)},
trackThemeEvent:function(a,d){a=["_trackEvent","Theme "+(LinkData?LinkData.curTheme:"-"),a];d&&a.push(d);this.event(a)},_loadScript:function(){(function(){var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(a,d)})()},_setAccount:function(a){this.getGaq().push(["_setAccount",a])},getGaq:function(){return window._gaq}},
{})});steal.loaded("app/tools/ga.js");
steal("jquery","app/tools/open_window","app/tools/secondary-popup-manager.js",function(b){window.LNG=window.LNG||{};window.scrollbarWidth=function(){if(!window.scrollbarWidth.cachedValue){var g=b("body"),k=g.css("overflow"),o=g.css("overflow","hidden").width(),s=g.css("overflow","scroll").width();k&&g.css("overflow",k);window.scrollbarWidth.cachedValue=o-s}return window.scrollbarWidth.cachedValue};window.decodeHtmlEntities=function(g){return b("<div/>").html(g).text()};b.fn.checkbox=function(g){var k=
b(this),o;if(k.hasClass("checked")){o=false;k.removeClass("checked")}else{o=true;k.addClass("checked")}typeof g=="function"&&g(o)};window.truncateByWords=function(g,k){if(g.length<=k)return g;g=g.substr(0,k+1);return g.substr(0,g.lastIndexOf(" "))};b.strip_tags=function(g,k){k=(((k||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return g.replace(/<!--[\s\S]*?--\>|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(o,s){return k.indexOf("<"+s.toLowerCase()+
">")>-1?o:""})};window.showAndHide=function(g,k){g=b(g);k=k||2E3;g.show();if(g.data("show-hide-timer")){clearTimeout(g.data("show-hide-timer"));g.data("show-hide-timer",null)}g.data("show-hide-timer",setTimeout(function(){g.hide()},k))};window.windowOpen=function(g,k,o){var s=b.extend({width:700,height:500,callerController:null,onClose:null},o);o=(b(window).width()-s.width)/2;var A=(b(window).height()-s.height)/2,G=window.open(g,k,"status=1,width="+s.width+",height="+s.height+",top="+A+",left="+o);
if(!G&&s.callerController)s.callerController.showError(LNG["js.tools.blocker"]);else{G.focus();if(s.onClose&&b.isFunction(s.onClose))var H=setInterval(function(){if(!G||G.closed){clearInterval(H);s.onClose()}},100);return G}};window.setIframeHeight=function(g){g=g==undefined?0:g;g=b(".top-panel").height()+g;var k=b(".notification").height();g=g+k;g=b(window).height()-g;b("#source_site").height(g)};window.setInstaIframeSize=function(){var g=b(".instagram-video"),k=b("body").height()-b(".insta-info").height()-
b(".top-panel").height()-40;if(LinkData.curTheme==11)k-=b(".botttom-panel").height();if(k>370){g.width(k-70);g.height(k)}g.show()};window.time=function(){return Math.round((new Date).getTime()/1E3)};window.Registry={lastVotedAnswerId:0,_controllers:{},getController:function(g){return this._controllers[g]||null},setController:function(g,k){this._controllers[g]=k}};window.Share={facebook:function(g,k,o){g="http://www.facebook.com/dialog/feed?app_id="+b("body").data("fb-app-id")+"&redirect_uri="+encodeURIComponent("http://"+
document.location.host+"/close.html")+"&show_error=true&link="+encodeURIComponent(g)+"&caption="+encodeURIComponent(k);b("<div/>").app_open_window({title:"Facebook",url:g,callerController:o,width:900})},twitter:function(g,k,o,s,A){g="http://twitter.com/share?original_referer="+encodeURIComponent(o||"")+"&text="+encodeURIComponent(k)+"&url="+encodeURIComponent(g);return windowOpen(g,"Twitter",{callerController:s,onClose:A})},getMessageForFacebook:function(g,k,o,s){if(!o)o=location.href;if(s)o=o.split("#")[0]+
"#"+s;k=k?null:o;return g+(k?" "+k:"")},getMessageForTwitter:function(g,k,o,s){if(!o)o=location.href;if(s)o=o.split("#")[0]+"#"+s;k=k?null:o;o=g+(k?" "+k:"");if(o.length>140)o=g.substr(0,g.length-(o.length-140)-3)+"..."+(k?" "+k:"");return o}};window.Popup={TYPE_SETTINGS:"popup-settings",TYPE_LINK_SETTINGS:"popup-linksettings",TYPE_POLL_SETTINGS:"popup-pollsettings",TYPE_AUTH:"popup-auth",TYPE_REAUTH:"popup-reauth",TYPE_SHARE_LINK:"popup-share-link",TYPE_PUBLISH_LINK:"popup-publish-link",TYPE_SHARE_ANSWER:"popup-share-answer",
TYPE_FORCE_FORM:"popup-force-form",TYPE_NOTIFY:"popup-notify",TYPE_CONGRATULATIONS:"popup-congratulations",TYPE_SIMPLE:"popup-simple",EVENT_ON_HIDE:"popup.onHide",EVENT_ON_SHOW:"popup.onShow",popupBox:null,curType:null,_showed:false,_addClass:"",popupWindow:null,displayed_startup_popup:null,init:function(){this.popupBox=b("#big-popup");var g=this;this.popupBox.on("click",".popup-close, .js-popup-close",function(k){g.hide(k.type);return false});b(window).bind("keydown.globalPopup",function(k){k.keyCode==
27&&g._showed&&g.hide()});b(window).resize(function(){g._centrify()})},show:function(g,k){this.curType=g;this.popupWindow=this.popupBox.show().find(".popup");this.popupWindow.removeClass().addClass("popup "+g+" "+this._addClass);if(g==Popup.TYPE_SHARE_ANSWER||g==Popup.TYPE_PUBLISH_LINK||g==Popup.TYPE_SHARE_LINK)this.popupBox.show().find(".popup").addClass("popup-link");this._showed=true;k==true&&LinkData.needSignIn==true&&this.popupBox.find(".popup .popup-block-auth .only-auth").show();this._centrify();
b(this).trigger(this.EVENT_ON_SHOW);return this},showBySelector:function(g){this.popupWindow=this.popupBox.show().find(".popup");this.popupWindow.removeClass().addClass("popup "+this._addClass);this.popupBox.show().find(".popup").find(g).addClass("js-block");this._showed=true;this._centrify();b(this).trigger(this.EVENT_ON_SHOW);return this},addClass:function(g){if(this.popupWindow){this.popupWindow.addClass(g);this._centrify()}else this._addClass=g;return this},removeClass:function(g){this.popupWindow.removeClass(g)},
hide:function(g){if(this._showed){this.popupBox.hide();this.popupBox.find(".popup .popup-block-auth .only-auth").hide();this._showed=false;this.curType==this.TYPE_REAUTH&&Reauth.onPopupHide();this.curType==this.TYPE_AUTH&&b.removeCookie("delayed_action");b(this).trigger(this.EVENT_ON_HIDE,g)}},_centrify:function(){var g=this.popupBox.find(".popup").first();g.css("left",parseInt(b(document).width())/2-parseInt(g.innerWidth())/2);var k=parseInt(b(window).height())/2-parseInt(g.innerHeight())/2;g.css("top",
k<0?0:k);return this},getType:function(){return this.curType?this.curType:null},checkTimelineTweets:function(){var g=false;b.ajax({url:"/ajax/check-silent-timeline",type:"post",success:function(k){if(k.isSilent)g=true},async:false});return g}};window.getBroswer=function(){return/Twitter for iPhone/i.test(navigator.userAgent)?{name:"iphone_twitter",version:b.browser.versionNumber}:{name:b.browser.name,version:b.browser.versionNumber}};window.Reauth={_success:0,_defaults:{socialPost:null,provider:"tw",
callerPopup:Popup.TYPE_SHARE_LINK,onHide:function(){}},init:function(g){this._defaults=b.extend(this._defaults,g);this._success=0;this.$block=b(".popup-block-reauth");this.$container=b(this.$block).find(".container");this.$notifications=b(this.$block).find(".popup-notifications");this.$note=b(this.$notifications).find(".note");b(this.$container).hide();this.hideMessage();b(this.$block).find("."+this._defaults.provider).show();return this},setResponse:function(g){this._success=g?1:0},processResponse:function(){var g=
this._success;this.hideSpinner();g?this.showMessage(LNG["reauth.success"]):this.showMessage(LNG["reauth.fail"],"error");if(g){g=this;g.hide();g._defaults.socialPost&&g._defaults.socialPost.execute()}},hideMessage:function(){b(this.$notifications).hide();b(this.$note).html("");b(this.$note).attr("class","");b(this.$note).addClass("note")},showMessage:function(g,k){if(g){k||(k="success");var o="";switch(k){case "success":o="note-success";break;case "error":o="note-fail";break;default:o="note-success";
break}b(this.$note).html(g);b(this.$note).addClass(o);b(this.$notifications).show()}},showSpinner:function(){this.showMessage(LNG["reauth.reconecting"])},hideSpinner:function(){this.hideMessage()},show:function(){if(!this._defaults.socialPost)return this;Popup.show(Popup.TYPE_REAUTH);return this},hide:function(){Popup.hide();this.init();return this},onPopupHide:function(){this._defaults.onHide()}};window.User={_defaults:{},init:function(g){this._defaults=b.extend(this._defaults,g);return this},checkIsLocalAuth:function(g){var k=
false;b.ajax({type:"POST",url:"/ajax/is-user-logged-as",data:{type:g},async:false,success:function(o){k=o.data?true:false}});return k},checkIsLogged:function(){var g=false;b.ajax({type:"POST",url:"/ajax/is-user-logged",async:false,success:function(k){g=k.data?true:false}});return g},isAuthorized:function(){return NL_APP_DATA.user&&NL_APP_DATA.user.isLogged?true:false},isLoggedWithPopup:function(g){g=g?true:false;var k=null;if(User.isAuthorized())NL_APP_DATA.user.hasTw||(k=authWithTw());else k=twAuth();
return g?k:User.isAuthorized()},checkIsSilentTimeline:function(g){b.get("/ajax/check-silent-timeline",function(k){g(k.isSilent,k)},"json")}};window.HELPER={_defaults:{},_authTwCookieName:"nlShortLinkAuthTw",_authMainTwCookieName:"nlMainAuthTw",_authTwExceptLandingCookieName:"nlExceptLandingAuthTw",init:function(g){this._defaults=b.extend(this._defaults,g);return this},prepareCounters:function(){this.authTwFromShortLinkPage();this.authTwFromExceptLandingPage()},clearCounters:function(){this.authTwDoneFromShortLinkPage();
this.authTwDoneExceptLandingPage()},isLandingPage:function(){return typeof NL_APP_DATA.controller!="undefined"&&typeof NL_APP_DATA.action!="undefined"&&NL_APP_DATA.controller=="index"&&NL_APP_DATA.action=="landing"?true:false},authTwFromShortLinkPage:function(){var g=b("body");typeof LinkData=="object"&&LinkData.id?b.cookie(this._authTwCookieName,"1",{expires:0,path:"/"}):b.cookie(this._authTwCookieName,"",{expires:-1,path:"/"});g.data("controller")=="index"&&g.data("action")=="index"?b.cookie(this._authMainTwCookieName,
"1",{expires:0,path:"/"}):b.cookie(this._authMainTwCookieName,"",{expires:-1,path:"/"})},authTwDoneFromShortLinkPage:function(){typeof LinkData=="object"&&LinkData.isLogged&&b.cookie(this._authTwCookieName)&&hihit(1929);b.cookie(this._authTwCookieName,"",{expires:-1,path:"/"});b.cookie(this._authMainTwCookieName,"",{expires:-1,path:"/"})},authTwFromExceptLandingPage:function(){HELPER.isLandingPage()?b.cookie(this._authTwExceptLandingCookieName,"",{expires:-1,path:"/"}):b.cookie(this._authTwExceptLandingCookieName,
"1",{expires:0,path:"/"})},authTwDoneExceptLandingPage:function(){!HELPER.isLandingPage()&&User.isAuthorized()&&b.cookie(this._authTwExceptLandingCookieName)&&hihit(2026);b.cookie(this._authTwExceptLandingCookieName,"",{expires:-1,path:"/"})},escapeRegExp:function(g){return g.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},escapeDollar:function(g){return g.replace(/\$/g,"$$$$")},greedyReplace:function(g,k,o){k=this.escapeRegExp(k);o=this.escapeDollar(o);return g.replace(new RegExp(k,"g"),o)}};window.cancelScrolling=
function(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp")};var a=b("#test-popups-panel");if(a.length){var d=function(){a.animate({left:"+=250"},250,function(){b(this).addClass("visible")})},f=function(){a.animate({left:"-=250"},250,function(){b(this).removeClass("visible")})};a.children("#test-popups-panel-sticker").children("span").click(function(){a.hasClass("visible")?f():d()}).andSelf().children(".close").click(function(){a.remove()});b("#test-popups-panel-content").find("a").click(function(g){g.preventDefault();
g=b(this).data("popup-name");var k;switch(g){case "notify-congratulations":case "aw-popup":k="popup-autowrap";break;case "notify":k="login-autowrap-new";break;case "twitter-aw":case "twitter-aw-v2":k="twitlurking";break;case "facebook-aw":k="popup-autowrap popup-autowrap-tweet2";break;case "other-tweets":k="popup-other-tweets popup-simple";break;default:k=""}g&&Popup.Manager.show(g).addClass(k)})}window.attachAddThisStatHandler=function(g,k){window.addthis?window.addthis.addEventListener("addthis.menu.share",
function(o){typeof g=="function"&&g();b.get("/ajax/save-link-share-stat",{short_url:LinkData.shortUrl,share_method:o.data.service},function(){typeof k=="function"&&k()})}):hihit(3322)};window.isPluginInstalled=function(){try{var g=document.documentElement.getAttribute("adlesseunifierdata");return g&&g.indexOf("lta_plugin_installed.js")>=0?true:false}catch(k){return false}};window.showAdvPopup=function(g){var k,o=Cookie.get("p_plugin"),s=time();if(NL_APP_DATA.nopopups)return false;if(TWITTER_ENABLED&&
g.plugin&&LinkData.showPluginPopup&&!Popup.displayed_startup_popup&&!LinkData.has_rtpls&&!(LinkData.isExpress&&LinkData.is_author)&&!isPluginInstalled()&&o&&s>o&&s<o+86400||LinkData.popupTest==2){k=PopupSM.getRandom(["plugin1_install","plugin2_learnWhite","plugin2_learnColor","plugin3_installWhite","plugin3_installColor"]);setTimeout(function(){k.show();Cookie.unset("p_plugin");LnProf.popup(k)},LinkData.popupTimer);Popup.displayed_startup_popup="plugin";return true}if(TWITTER_ENABLED&&g.aw&&!Popup.displayed_startup_popup&&
LinkData.isLogged==false&&LinkData.show_AW_popup_theme_6_7=="on"&&!Cookie.get("t6_show_auth_popup")&&!LinkData.has_rtpls&&!(LinkData.isExpress&&LinkData.is_author)||LinkData.popupTest==1)if(k=g.aw()){setTimeout(function(){k.show();LnProf.popup(k);Cookie.set("t6_show_auth_popup",1,{expires:2});Cookie.set("p_plugin",time()+72E3,{expires:3})},LinkData.popupTimer);Popup.displayed_startup_popup="aw";return true}return false};window.showSilentPopup=function(){if(!(!LinkData.isMobile&&!LinkData.isShowNotificationPopup&&
LinkData.isLogged&&LinkData.isTwitterLogged&&LinkData.showSilentPopup&&!Popup.displayed_startup_popup&&!(LinkData.isExpress&&LinkData.is_author)&&!NL_APP_DATA.nopopups))return false;var g,k;if(Cookie.get("autoPostNotPressed")){k=["welcomeTweetEdit","welcomeTweet","welcomeTweetAndReply"];Cookie.unset("autoPostNotPressed");g=PopupSM.getRandom(k);g.show();return true}if(NL_APP_DATA.show_notify_popup)User.checkIsSilentTimeline(function(o){if(o){k=["welcomeAutopost","welcomeAutopostV2","welcomeAutopostV3"];
g=PopupSM.getRandom(k)}else g=PopupSM.get("welcome");g.show();LnProf.popup(g)});else NL_APP_DATA.show_silent_popup_old_usr&&User.checkIsSilentTimeline(function(o){if(o){o=["comebackTweetEdit","comebackTweet"];!LinkData.is_author&&LinkData.isAuthorTwUser&&o.push("comebackTweetAndReply");NL_APP_DATA.show_silent_popup_old_usr==2&&o.push("comebackAutopost","welcomeAutopostV2","welcomeAutopostV3");Popup.displayed_startup_popup="silent";g=PopupSM.getRandom(o);g.show();LnProf.popup(g)}})};window.twAuth=
function(g,k){if(twAuth.isOpened)return null;g=g||location.pathname+location.search;k=k||{};g="/signin/tw/"+encodeURIComponent(g)+(k.query?"?"+k.query:"");window.HELPER.prepareCounters();twAuth.isOpened=true;twAuth.win=openWindowCentered(g,"tw",500,500);var o=setInterval(function(){if(!twAuth.win||twAuth.win.closed){twAuth.isOpened=false;if(b.cookie("t6_aw_tw_auth")!==null){switch(b.cookie("t6_aw_tw_auth")){case "2":switch(LinkData.curTheme){case Themes.THEME_6:hihit(2071);break;case Themes.THEME_7:hihit(2087);
break}break;case "1":b.cookie("t6_popup_action","1",{expires:0,path:"/"});break;case "0":b.cookie("t6_popup_action","0",{expires:0,path:"/"});break}b.cookie("t6_aw_tw_auth",null,{expires:0,path:"/"})}clearInterval(o)}},500);return twAuth.win};window.checkIframeLoad=function(g){b("#source_site").ready(function(){if(document.getElementById("source_site").contentWindow.length==false&&LnProf.iframeLoad<300){g();LnProf.block="other"}if(b("iframe#source_site").is(":visible")==false)LnProf.block="adblock";
LnProf.block!="none"&&LnProf.blocked()})}});steal.loaded("app/tools/common.js");function openWindowCentered(b,a,d,f){if(!(b||a||d||f))return null;return window.open(b,a,"toolbar=0, location=0, directories=0, status=0, menubar=0, scrollbars=1, resizable=1, width="+d+", height="+f+", top="+(screen.height/2-f/2)+", left="+(screen.width/2-d/2))}steal.loaded("lib/open-window.js");
(function(b,a){var d,f;if(b.uaMatch=function(g){g=g.toLowerCase();var k=/(opr)[\/]([\w.]+)/.exec(g)||/(chrome)[ \/]([\w.]+)/.exec(g)||/(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(g)||/(webkit)[ \/]([\w.]+)/.exec(g)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(g)||/(msie) ([\w.]+)/.exec(g)||g.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(g)||g.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(g)||[];g=/(ipad)/.exec(g)||/(iphone)/.exec(g)||/(android)/.exec(g)||/(windows phone)/.exec(g)||
/(win)/.exec(g)||/(mac)/.exec(g)||/(linux)/.exec(g)||[];return{browser:k[3]||k[1]||"",version:k[2]||"0",platform:g[0]||""}},d=b.uaMatch(a.navigator.userAgent),f={},d.browser&&(f[d.browser]=true,f.version=d.version,f.versionNumber=parseInt(d.version)),d.platform&&(f[d.platform]=true),(f.chrome||f.opr||f.safari)&&(f.webkit=true),f.rv){d.browser="msie";f.msie=true}if(f.opr){d.browser="opera";f.opera=true}if(f.safari&&f.android){d.browser="android";f.android=true}f.name=d.browser;f.platform=d.platform;
b.browser=f})(jQuery,window);steal.loaded("lib/jquery.browser.min.js");
steal("jquery/controller","app/tools/copy_text","app/show/show_base.js","app/show/settings.js","app/show/poll.js","app/tools/common.js","app/models/caption.js","app/show/share.js","app/show/share_link.js","app/show/publish_link.js","app/show/share_answer.js","app/popups/chart.js","app/popups/plugin-install.js","app/popups/aw1.js","app/popups/iframe-fail.js","app/popups/well-done.js","app/popups/well-done-silent-edit.js","app/popups/silent-autopost.js","app/popups/silent-tweet-edit.js","app/popups/silent-tweet.js",
"app/popups/silent-tweet-and-reply.js",function(b){App.ShowBase.Controller("App.Show.Controller",{setIframeHeight:function(a){a=a==undefined?0:a;a=b(".top-panel").height()+a;var d=b(".notification").height();a=a+d;a=b(window).height()-a;b("#source_site").height(a)}},{poll:null,shortLink:null,mouseLastYPos:null,menuposx:null,showForcePopup:null,popup_notify_aw_clicked:false,mouseX:0,mouseY:0,copyTextInited:false,toolbarMenuCoords:null,isLinkToolbarMouseenter:false,isLinkAuthor:null,CaptionModel:null,
message:null,statsPopup:null,init:function(){var a=this;this.shortLink=this.find("#source_site").data("short");Registry.setController("show",this);this.CaptionModel=new Theme.Models.Caption({link_id:LinkData.id,caption:LinkData.caption});this.message=new Message;Popup.init();if(LinkData.isShowNotificationPopup==true){Popup.show(Popup.TYPE_NOTIFY).addClass("login-autowrap-new");hihit(2117);this.handleNotificationPopup()}if(LinkData.graylistLabel==="instagram"){setInstaIframeSize();b(window).resize(function(){setInstaIframeSize()})}this.find(".js-settings-popup").app_show_settings();
this.find(".js-like-box")["app_show_theme"+LinkData.curTheme+"_likes"]();this.poll=this.applyPoll();b("body").app_show_share({captionModel:this.CaptionModel});Registry.setController("share",b("body").data("controllers").app_show_share);this._initShareController();(this.showForcePopup=LinkData.showForcePopup)&&b(window).bind("mouseleave.force-form",function(d){if(!((d.pageY||a.mouseY)>5)){b(window).unbind("mouseleave.force-form");a.showForcePopup&&b.get("/ajax/get-force-form",{shortLink:LinkData.shortUrl},
function(f){a._showForcePopup(f)})}});this.checkRedirect();this.checkNoticePanel();b("#js-copy-link").app_copy_text({afterCopy:function(){a.showCopyMsg(b(this).data("success"))}});App.Show.Controller.initAllDesktopThemes()},".js-share-form-show click":function(a,d){d.preventDefault();Popup.show(Popup.TYPE_SHARE_LINK)},".js-publish-caption click":function(a,d){d.preventDefault();Popup.show(Popup.TYPE_PUBLISH_LINK)},"#balloon-box-popup .close-balloon click":function(a){b(a).parent().fadeOut();b.cookie("stb",
1,{expires:30,path:"/"})},"#balloon-box-popup .href-settings click":function(a,d){d.preventDefault();b(a).parent().parent().fadeOut();b.cookie("stb",1,{expires:30,path:"/"});window.location.href=b(a).attr("href")},showCopyMsg:function(a){b("#link-toolbar-menu").hide();this.message.showAndHide(a,Message.TYPE_SUCCESS,".js-copy-m-success")},handleNotificationPopup:function(){var a=this,d=a.find(".popup-block-notify");d.find("#js-try-it-now").click(function(){hihit(2118);b.get("/ajax/handle-notification-popup",
{notification_value:"on",counter:2120},function(f){if(f.success){a.popup_notify_aw_clicked=true;d.find(".js-content").hide();d.find(".js-success").show()}});return false})},".big-image-overlay .close click":function(a,d){d.preventDefault();b(".big-image-overlay").hide();b.cookie("do_not_show_theme_banner","1",{expires:7,path:"/"})},".notification .close click":function(a,d){d.preventDefault();d=this;a=b(a).data("notify-type");b.get("/ajax/close-notify",{short_link:LinkData.shortUrl,notify_type:a},
function(){});d.hideNotificationPanel()},hideNotificationPanel:function(){b("div.notification").remove();b("#link-toolbar").css("top","5px");b("#user-flybox").css("top","5px");b(".votes-panel").css("top","5px")},"#user-flybox mouseenter":function(){b("#user-flybox-menu").show();b(this).children(".userbox").addClass("userbox-active")},"#user-flybox mouseleave":function(){b("#user-flybox-menu").hide();b(this).children(".userbox").removeClass("userbox-active")},".nav-link click":function(a,d){d.preventDefault();
var f=this;b.get("/ajax/get-url-caption",{short_url:a.data("short-url")},function(g){if(g){LinkData.is_author=g.isauthor;f.CaptionModel.attr("caption",g.caption);f.CaptionModel.attr("link_id",g.link_id);var k=LinkData.curTheme==1?"":" Captions",o=f.find(".bottom-panel");o.find(".link-author").html(" "+g.author_screen_name);o.find(".link-same-cnt").html(g.currPosText+k);o.find(".time-to-show").html(g.time2show);o.find(".permalink").attr("href",g.full_short);o.find(".avatar").attr("src",g.avatar);if(g.prevLink){o.find(".arrow-left,.bottom-panel .arrow-left-holder").data("short-url",
g.prevLink);o.find(".arrow-left,.bottom-panel .arrow-left-holder").css("visibility","visible")}else o.find(".arrow-left,.bottom-panel .arrow-left-holder").css("visibility","hidden");if(g.nextLink){o.find(".arrow-right,.bottom-panel .arrow-right-holder").data("short-url",g.nextLink);o.find(".arrow-right,.bottom-panel .arrow-right-holder").css("visibility","visible")}else o.find(".arrow-right,.bottom-panel .arrow-right-holder").css("visibility","hidden");f.hideCaptionEditForm()}});return false},".link-caption-url mouseenter":function(){var a=
this.find(".bottom-panel");LinkData.is_author&&a.find(".caption-edit-btn").css("visibility","visible")},".link-caption-url mouseleave":function(){var a=this.find(".bottom-panel");LinkData.is_author&&a.find(".caption-edit-btn").css("visibility","hidden")},".js-caption-edit click":function(a,d){d.preventDefault();a=b(".js-caption");a.find(".js-caption-text-container").hide();a.find(".js-caption-edit-form").show();a.find("#js-caption-edit").focus();this.moveCursorToEnd(document.getElementById("js-caption-edit"))},
moveCursorToEnd:function(a){if(typeof a.selectionStart=="number")a.selectionStart=a.selectionEnd=a.value.length;else if(typeof a.createTextRange!="undefined"){a.focus();a=a.createTextRange();a.collapse(false);a.select()}},".js-caption-edit-form .js-caption-cancel click":function(a,d){d.preventDefault();this.hideCaptionEditForm()},hideCaptionEditForm:function(){var a=b(".js-caption");a.find(".js-caption-edit-form").hide(0,function(){a.find(".js-caption-text-container").show()})},".js-caption-save click":function(){this.CaptionModel.attr("caption",
Theme.Models.Caption.textareaVal());var a=this;this.CaptionModel.save(function(d,f){a.saveCaptionSuccess(d,f)},function(d){alert(d)})},saveCaptionSuccess:function(a,d){d.success?this.hideCaptionEditForm():alert(d.error)},".popup-auth-trigger click":function(a,d){d.preventDefault();Popup.show(Popup.TYPE_AUTH)},".js-original-link click":function(){lnEvent("visit origin link");switch(LinkData.curTheme){case Themes.THEME_1:hihit(1841);break;case Themes.THEME_2:hihit(1965);break;case Themes.THEME_3:hihit(1849);
break;case Themes.THEME_4:hihit(1975);break;case Themes.THEME_6:hihit(2054);break;case Themes.THEME_7:hihit(2083);break}},".bottom-panel .close click":function(a,d){d.preventDefault();b.cookie("cm",b.cookie("cm")!="true",{expires:30,path:"/"})},".show-caption click":function(a,d){d.preventDefault();b.cookie("cm",b.cookie("cm")!="true",{expires:30,path:"/"});b(".show-caption").hide();b("div.bottom-panel").show()},"#short_link_input click":function(){b("#short_link_input").select();return false},"#full_link_copy click":function(){b("#full_link_input").select();
return false},"#full_link_input click":function(){b("#full_link_input").select();return false},"#tw_share click":function(a){var d=encodeURIComponent(a.data("text"));this.openShareWindow("http://twitter.com/share?original_referer="+a.data("referer")+"&text="+d,"Twitter",575,400);return false},"#fb_share click":function(a){this.openShareWindow("http://www.facebook.com/dialog/feed?app_id="+b("body").data("fb-app-id")+"&redirect_uri="+encodeURIComponent("http://"+document.location.host+"/close.html")+
"&show_error=true&link="+encodeURIComponent(document.location.href)+"&caption="+encodeURIComponent(a.data("text")),"Facebook",900,500);return false},openShareWindow:function(a,d,f,g){steal("app/open_window",function(){b("<div/>").app_open_window({url:a,title:d,width:f,height:g})})},"{window} mousemove":function(a,d){this.mouseX=d.clientX;this.mouseY=d.clientY},".popup-resignin-tw click":function(a,d){this._reauthHandler(a,d,"tw")},".popup-resignin-fb click":function(a,d){this._reauthHandler(a,d,"fb")},
getUrlFromPopupValues:function(a){var d="";a&&jQuery.each(a,function(f,g){if(g)d=d+"/"+f+"/"+g});return d="/"+LinkData.shortUrl+d},applyPoll:function(a){a=a||this.find(".js-poll-box");return a.app_show_poll().controller()},checkRedirect:function(){if(typeof REDIRECT!="undefined"){var a=setTimeout('window.location = " '+REDIRECT+' "',3E3);b("#stop-redirect").click(function(d){d.preventDefault();clearTimeout(a)})}},_showForcePopup:function(a){var d=b(".popup-block-force-form");d.html(a);Popup.show(Popup.TYPE_FORCE_FORM);
this.applyPoll(d.find(".js-poll-box"));d.find(".js-force-like-box")["app_show_theme"+LinkData.curTheme+"_likes"]({forceFormMode:true})},_reauthHandler:function(a,d,f){d.preventDefault();Reauth.init();Reauth.showSpinner();var g=null;switch(f){case "tw":g=authWithTw(null,1);break;case "fb":g=authWithFb(null,1);break;default:return false}var k=setInterval(function(){if(g.closed){Reauth.processResponse();clearInterval(k)}},10)},_initShareController:function(){var a={};a[Popup.TYPE_SHARE_LINK]=AUTH_PARAMS[Popup.TYPE_SHARE_LINK];
a[Popup.TYPE_PUBLISH_LINK]=AUTH_PARAMS[Popup.TYPE_PUBLISH_LINK];a[Popup.TYPE_SHARE_ANSWER]=AUTH_PARAMS[Popup.TYPE_SHARE_ANSWER];if(b.cookie("share_checkboxes")){var d=b.cookie("share_checkboxes");if(d[Popup.TYPE_SHARE_LINK]){a[Popup.TYPE_SHARE_LINK]===undefined&&delete d[Popup.TYPE_SHARE_LINK].message;a[Popup.TYPE_SHARE_LINK]=b.extend(a[Popup.TYPE_SHARE_LINK],d[Popup.TYPE_SHARE_LINK])}if(d[Popup.TYPE_PUBLISH_LINK]){a[Popup.TYPE_PUBLISH_LINK]===undefined&&delete d[Popup.TYPE_PUBLISH_LINK].message;
a[Popup.TYPE_PUBLISH_LINK]=b.extend(d[Popup.TYPE_PUBLISH_LINK],a[Popup.TYPE_PUBLISH_LINK])}if(d[Popup.TYPE_SHARE_ANSWER]){a[Popup.TYPE_SHARE_ANSWER]===undefined&&delete d[Popup.TYPE_SHARE_ANSWER].message;a[Popup.TYPE_SHARE_ANSWER]=b.extend(a[Popup.TYPE_SHARE_ANSWER],d[Popup.TYPE_SHARE_ANSWER])}}b(".js-popup-block-share-link").app_show_theme_share_link({captionModel:this.CaptionModel,restore:a[Popup.TYPE_SHARE_LINK],onRestore:b.isEmptyObject(AUTH_PARAMS[Popup.TYPE_SHARE_LINK])?null:function(){this.show()}});
b(".js-popup-block-publish-link").app_show_theme_publish_link({captionModel:this.CaptionModel,restore:a[Popup.TYPE_PUBLISH_LINK],onRestore:b.isEmptyObject(AUTH_PARAMS[Popup.TYPE_PUBLISH_LINK])?null:function(){this.show()}});b(".js-popup-block-share-answer").app_show_theme_share_answer({captionModel:this.CaptionModel,restore:a[Popup.TYPE_SHARE_ANSWER],onRestore:b.isEmptyObject(AUTH_PARAMS[Popup.TYPE_SHARE_ANSWER])?null:function(){this.show()}})},"{Popup} popup.onHide":function(a,d,f){a.getType()===
Popup.TYPE_NOTIFY&&f=="click"&&this.popup_notify_aw_clicked==false&&hihit(2119)},".js-play-youtube click":function(a,d){d.preventDefault();a.hide();b("#js-video-how-to").show()},".js-stats-social .js-social-link click":function(){this.sendClickStat("clicks_soc")},".js-rss-content a click":function(){this.sendClickStat("clicks_rss")},".js-promo-title, .js-promo-text-link, .js-promo-domain-link click":function(){this.sendClickStat("clicks_promo")},sendClickStat:function(a){b.post("/ajax/save-personal-info-stats",
{link_id:LinkData.id,type:a},function(){})},checkNoticePanel:function(){if(b("div").hasClass("notification")&&b("#balloon-box-popup").css("display")){var a=b("#balloon-box-popup"),d=parseInt(a.css("top"));parseInt(b(".notification").height());var f=25;if(d>0){if(LinkData.curTheme==1||LinkData.curTheme==2)f=20;a.css("top",d+f+"px");b(".notification .close").click(function(){a.css("top",parseInt(a.css("top"))-f+"px")})}}},".js-view-stats click":function(a){if(a.hasClass("disabled"))return false;if(!this.statsPopup)this.statsPopup=
PopupSM.get("linkStats");this.statsPopup.show()}})});steal.loaded("app/show/show.js");
steal("app/show","app/show/theme1/likes.js",function(b){App.Show.Controller("App.Show.Theme1.Controller",{defaults:{}},{stopLinkToolbarHover:false,init:function(){hihit(2136);var a=this;this._super();setIframeHeight(-28);this._updateLinkToolbarWidth();b(window).resize(function(){a._updateLinkToolbarWidth();setIframeHeight(-28)})},".js-settings-popup-click click":function(a,d){d.preventDefault();Popup.show(Popup.TYPE_SETTINGS)},".bottom-panel .close click":function(a,d){this._super(a,d);b("div.bottom-panel").hide();
b(".show-caption").show()},"#link-toolbar .js-original-link mouseenter":function(){this.stopLinkToolbarHover||this.find(".js-full-link").show()},"#link-toolbar .js-original-link mouseleave":function(){this.find(".js-full-link").hide()},".linkmenu-box .arrow mouseenter":function(){this.find(".js-linkmenu").show()},".linkmenu-box mouseleave":function(){this.find(".js-linkmenu").hide()},hideNotificationPanel:function(){b("div.notification").remove();b(".top-panel").removeClass("with-notify")},showCopyMsg:function(a){this.stopLinkToolbarHover=
true;var d=this;this.message.showAndHide(a,Message.TYPE_SUCCESS,".js-copy-m-success",function(){d.stopLinkToolbarHover=false})},_updateLinkToolbarWidth:function(){var a=this,d=this.find(".link-section").width(),f=this.find(".link-section").outerWidth();this.find(".js-copy-m-success").width(f);this.find(".js-original-link").css("max-width",d-145);d=b(".js-copy-link");d.hasClass("app_copy_text")&&d.app_copy_text("destroy");d.app_copy_text({afterCopy:function(){a.showCopyMsg(b(this).data("success"))}})}})});
steal.loaded("app/show/theme1/show.js");
steal("jquery/controller","app/show","app/show/theme2/likes.js",function(b){function a(){b("#user-flybox").each(function(d,f){d=b(f);d.css("left",parseInt(document.body.clientWidth)/2-parseInt(d.innerWidth())/2)})}App.Show.Controller("App.Show.Theme2.Controller",{defaults:{}},{init:function(){hihit(2135);this._super();setIframeHeight(0);b(window).resize(function(){setIframeHeight(0)});a();b(window).resize(function(){a()})},"#link-toolbar mouseenter":function(d,f){if(this.isLinkToolbarMouseenter)return false;
var g=b(d),k=parseInt(d.css("left")),o=b("#link-toolbar-menu");o.show();var s=d.find(".link-section");s.addClass("link-section-active");var A=s.find("a"),G=b("#user-flybox");if(G.length){var H=b(".votes-panel");if(H.length){s.css("max-width","none");A.css("max-width","none");if(k+g.outerWidth(true)>=parseInt(G.css("left"))){g=k+g.outerWidth(true)+10;H=document.body.clientWidth-H.width()-G.width();if(g>=H){H=H-40;g=H-32;k=g-61;G.css("left",H);s.css("max-width",g);A.css("max-width",k)}else G.css("left",
g)}o.css("left",0);s=o.width();d={min:0,max:d.width()};f=(f.pageX||this.mouseX)-s/2;if(f+s>d.max)f=d.max-s-2;if(f<d.min)f=d.min;o.css("left",f);f=o.offset();this.toolbarMenuCoords={minX:f.left,maxX:f.left+o.width(),minY:f.top,maxY:f.top+o.height()};var V=this;if(!this.copyTextInited){this.copyTextInited=true;b("#copy_link").app_copy_text({afterCopy:function(){V.showCopyMsg(b(this).data("success"))}})}this.isLinkToolbarMouseenter=true}}},"#link-toolbar mouseleave":function(d){this.isLinkToolbarMouseenter=
false;this.toolbarMenuCoords=null;b("#link-toolbar-menu").hide();d=d.find(".link-section");d.removeClass("link-section-active");var f=d.find("a"),g=jQuery("#user-flybox");if(g.length)if(b("div.votes-panel").length){d.css("max-width","");f.css("max-width","");g.css("left",parseInt(document.body.clientWidth)/2-parseInt(g.innerWidth())/2)}},".js-settings-popup-click click":function(d,f){f.preventDefault();Popup.show(Popup.TYPE_SETTINGS)},".bottom-panel .close click":function(d,f){this._super(d,f);b("div.bottom-panel").toggleClass("small-panel")}})});
steal.loaded("app/show/theme2/show.js");
steal("app/show","app/show/theme3/likes.js","app/show/theme3/poll.js","app/show/theme3/settings_poll.js",function(b){App.Show.Controller("App.Show.Theme3.Controller",{defaults:{}},{init:function(){hihit(2134);this._super();setIframeHeight(-7);b(window).resize(function(){setIframeHeight(-7)});this.find(".js-settings-popup").data("controllers").app_index_index_short_form_checkboxes.destroy();Message.containers("settings",".js-message-urlsettings-container")},".js-settings-open click":function(a,d){d.preventDefault();
Popup.show(Popup.TYPE_SETTINGS);this.settingsPoll.onshow()},applyPoll:function(a){var d="app_show_theme"+LinkData.curTheme+"_poll";if(a)a=a[d]().controller();else{a=this.find(".js-poll-box")[d]().controller();this.settingsPoll=new App.Show.Theme3.SettingsPoll(b(".js-settings-popup"))}return a},hideNotificationPanel:function(){b("div.notification").remove();b(".top-panel").css("top","0px")},showCopyMsg:function(a){this.message.showAndHide(a,Message.TYPE_SUCCESS,".js-copy-m-success")},".js-url-settings-form submit":function(a,
d){d.preventDefault();var f=this,g=b.trim(a.find('[name="question"]').val());if(g.length==0)f.message.showAndHide(LNG["poll.question.tooShort"],Message.TYPE_ERROR,Message.containers("settings"));else if(g.length>255)f.message.showAndHide(LNG["poll.question.tooLong"],Message.TYPE_ERROR,Message.containers("settings"));else{f.settingsPoll&&f.settingsPoll.injectData(a);b.post("/ajax/process-common-settings",a.serialize(),function(k){k.success?f._saveSettingsCallbackSuccess(k,{question:g,form:a}):f.message.showAndHide(LNG["popup.settingsErrorMessage"],
Message.TYPE_ERROR,Message.containers("settings"))})}},_saveSettingsCallbackSuccess:function(a,d){this.message.showAndHide(LNG["popup.settingsSuccessMessage"],Message.TYPE_SUCCESS,Message.containers("settings"));this.CaptionModel.attr("caption",Theme.Models.Caption.textareaVal());this.find(".js-poll-box .js-question-text").text(d.question);this.settingsPoll&&this.settingsPoll.reset(d.form);this.poll&&this.poll.update(a.pollData)}})});steal.loaded("app/show/theme3/show.js");
steal("jquery/controller","app/show","app/show/theme4/likes.js","app/show/theme4/poll.js",function(b){App.Show.Controller("App.Show.Theme4.Controller",{defaults:{}},{defaultBlock:null,captionBlock:null,settingsBlock:null,settingsError:null,settingsSuccess:null,defaultSlideSpeed:200,panelShow:1,panelHide:2,shareController:null,init:function(){this._showCounter();this._super();setIframeHeight(10);b(window).resize(function(){setIframeHeight(10)});this.defaultBlock=this.find(".js-main-panel");this.captionBlock=
this.find(".popup.js-caption-block");this.settingsBlock=this.find(".js-settings-panel");this.message.setMessageContainer(".js-message-container");Message.containers("settings",".js-message-container")},_showCounter:function(){hihit(2133)},showSharePanel:function(){this.changePanel(this.panelShow,this.captionBlock)},".show-poll click":function(a,d){d.preventDefault();this.poll.toggle()},".js-show-panel click":function(a,d){d.preventDefault();b(".panel-itself, .js-poll-box").toggle();if(b(".panel-itself").is(":visible")==
false){b(".buttons3 .js-show-panel").show();b(".votes-panel").addClass("minimized")}else{b(".buttons3 .js-show-panel").hide();b(".votes-panel").removeClass("minimized")}},".js-url-settings-form submit":function(a,d){d.preventDefault();var f=this,g=b.trim(a.find('[name="question"]').val());if(g.length==0)f.message.showAndHide(LNG["poll.question.tooShort"],Message.TYPE_ERROR,Message.containers("settings"));else if(g.length>255)f.message.showAndHide(LNG["poll.question.tooLong"],Message.TYPE_ERROR,Message.containers("settings"));
else{f.settingsPoll&&f.settingsPoll.injectData(a);b.post("/ajax/process-common-settings",a.serialize(),function(k){k.success?f._saveSettingsCallbackSuccess(k,{question:g,form:a}):f.message.showAndHide(LNG["popup.settingsErrorMessage"],Message.TYPE_ERROR,Message.containers("settings"))})}},_saveSettingsCallbackSuccess:function(a,d){this.hideSettingsMessages();this.message.showAndHide(LNG["popup.settingsSuccessMessage"],Message.TYPE_SUCCESS,Message.containers("settings"));this.CaptionModel.attr("caption",
Theme.Models.Caption.textareaVal());this.find(".js-poll-box .js-question-text").text(d.question);this.settingsPoll&&this.settingsPoll.reset(d.form);LinkData.curTheme==5&&this.poll.update(a.pollData)},".js-settings-close click":function(a,d){d.preventDefault();a=this;a.hideSettingsMessages();a.changePanel(a.panelHide,a.settingsBlock)},".js-settings-open click":function(a,d){d.preventDefault();this.changePanel(this.panelShow,this.settingsBlock)},applyPoll:function(a){a=a||this.find(".js-poll-box");
return a.app_show_theme4_poll().controller()},changePanel:function(a,d){var f=this;a==f.panelShow?f.defaultBlock.slideUp(f.defaultSlideSpeed,function(){d.slideDown(f.defaultSlideSpeed)}):d.slideUp(f.defaultSlideSpeed,function(){f.defaultBlock.slideDown(f.defaultSlideSpeed)})},hideNotificationPanel:function(){b("div.notification").remove()},hideSettingsMessages:function(){},showValidationError:function(a){this.hideSettingsMessages();var d=this.settingsError.text(),f=this;f.settingsError.text(a).show("fast").delay(3E3).hide("fast",
function(){f.settingsError.text(d)})},showCopyMsg:function(a){this.message.showAndHide(a,Message.TYPE_SUCCESS,".js-copy-m-success")}})});steal.loaded("app/show/theme4/show.js");
steal("jquery/controller","app/show","app/show/theme4/show.js","/js/lib/jquery-ui/jquery-ui-1.9.2.custom.min.js","app/show/theme5/poll.js","app/show/theme5/settings_poll.js","app/show/theme5/share.js","app/show/theme5/likes.js").then(function(){App.Show.Theme4.Controller("App.Show.Theme5.Controller",{defaults:{}},{settingsPoll:null,init:function(){var b=this;this._super();this._restorePosition();this._makeDraggable();this._refreshPosition();this.message.setMessageContainer(".js-message-container");
setIframeHeight(-22);$(window).resize(function(){setIframeHeight(-22);b._refreshPosition()});this.find(".js-settings-popup").data("controllers").app_index_index_short_form_checkboxes.destroy();Message.containerUpdate("settings",".js-message-urlsettings-container")},_showCounter:function(){hihit(2132)},_restorePosition:function(){var b=$.cookie("position");if(b){var a=b.split(",");b=a[0];a=a[1];if($(window).width()<parseInt(a)+270||$(window).height()<parseInt(b)+105){$(".votes-panel").css({top:"45%"});
$.removeCookie("position")}else $(".votes-panel").css({top:b+"px",left:a+"px"})}else $(".votes-panel").css({top:"45%"})},_refreshPosition:function(){var b=$(window).height(),a=$(".votes-panel").offset().top+$(".votes-panel").height();a>b&&$(".votes-panel").offset().top>0&&$(".votes-panel").offset({top:$(".votes-panel").offset().top-(a-b),left:$(".votes-panel").offset().left});b=$(window).width();a=$(".votes-panel").offset().left+$(".votes-panel").width();a>b&&$(".votes-panel").offset().left>0&&$(".votes-panel").offset({top:$(".votes-panel").offset().top,
left:$(".votes-panel").offset().left-(a-b)});this._savePosition()},_makeDraggable:function(){var b=this;$(".votes-panel").draggable({containment:"window",cursor:"move",appendTo:"body",refreshPositions:true,cancel:".caption-text span, .hider, .zclip, .js-show-poll, .js-settings-open, input,textarea,button,select,option",stop:function(){b._savePosition()}})},_savePosition:function(){var b=$(".votes-panel").position();$.cookie("position",b.top+","+b.left)},".show-poll click":function(b,a){a.preventDefault();
this.poll.toggle(this._refreshPosition)},showSharePanel:function(){$(".js-main-panel").hide();$(".js-share-panel").show()},".js-open-share-panel click":function(b,a){a.preventDefault();this.shareController&&this.shareController.resetTabs();this.showSharePanel()},".js-cancel-share click":function(b,a){a.preventDefault();$(".js-share-panel").hide();$(".js-main-panel").show()},".js-settings-open click":function(b,a){a.preventDefault();$("body").css("overflow","auto");Popup.show(Popup.TYPE_SETTINGS);
$(".popup-settings").on("click",".popup-close, .js-popup-close",function(){$("body").removeAttr("style")});this.settingsPoll.onshow()},applyPoll:function(b){var a="app_show_theme"+LinkData.curTheme+"_poll";if(b)b=b[a]().controller();else{b=this.find(".js-poll-box")[a]().controller();this.settingsPoll=new App.Show.Theme5.SettingsPoll($(".js-settings-popup"))}return b},_initShareController:function(){$(".js-caption-block").app_show_theme5_share();$(".js-popup-block-share-answer").app_show_theme_share_answer({captionModel:this.CaptionModel,
restore:AUTH_PARAMS[Popup.TYPE_SHARE_ANSWER]});this.shareController=$(".js-caption-block").data("controllers").app_show_theme5_share},showCopyMsg:function(b){$(".js-share-m-success").html(b).show("fast").delay(3E3).hide("fast")}})});steal.loaded("app/show/theme5/show.js");
steal("jquery/controller","app/show","app/show/popup.js",function(b){App.Show.Controller("App.Show.Theme6.Controller",{defaults:{counters:{hi_short_visit:2048,hi_panel_login:2049,hi_cancel_tw_auth:2073,hi_tw_auth:2072,hi_no_cookie:2090,hi_short_visit_not_reg:2094,hi_share_click:2203}}},{_linkData:null,init:function(){Registry.setController("show",this);this.hihit("hi_short_visit");LinkData.isLogged||this.hihit("hi_short_visit_not_reg");this.initPopups();this._iframeSize();this.checkRedirect();this.checkNoticePanel();
if(Cookie.get("t6_popup_action")!==null){switch(Cookie.get("t6_popup_action")){case "0":this.hihit("hi_cancel_tw_auth");break;case "1":this.hihit("hi_tw_auth");break}Cookie.set("t6_popup_action",null,{expires:0,path:"/"})}App.Show.Controller.initAllDesktopThemes()},initPopups:function(){if(!(LinkData.isExpress&&LinkData.is_author)){if(LinkData.isShowNotificationPopup==true){Popup.Manager.show("notify").addClass("login-autowrap-new");hihit(2117);this.handleNotificationPopup()}showAdvPopup({aw:function(){return PopupSM.get("aw1")},
plugin:true})}},".popup-auth-trigger click":function(a,d){this.hihit("hi_panel_login");d.preventDefault();Popup.Manager.show("auth")},".btn-signin-tw click":function(){Cookie.set("t6_tw_login",true,{expires:0,path:"/"})},".addthis_toolbox a, #at_hover a click":function(){this.hihit("hi_share_click")},hideNotificationPanel:function(){b("div.notification").remove();b(".top-panel").css("top","0px");setIframeHeight(-9)},checkNoticePanel:function(){if(b("div").hasClass("notification")&&b("#balloon-box-popup").css("display")){var a=
b("#balloon-box-popup"),d=parseInt(a.css("top"));parseInt(b(".notification").height());if(d>0)if(LinkData.curTheme==9)b(".notification .close").click(function(){a.css("bottom",parseInt(a.css("bottom"))+6+"px")});else{a.css("top",d+25+"px");b(".notification .close").click(function(){a.css("top",parseInt(a.css("top"))-25+"px")})}LinkData.curTheme==9&&a.css("bottom",parseInt(a.css("bottom"))-6+"px")}},"{Popup.Manager} onHide":function(a,d,f,g){f.getName()==="notify"&&g&&g.type=="click"&&this.popup_notify_aw_clicked==
false&&hihit(2119);f.getName()==="auth"&&Cookie.set("t6_tw_login",null,{expires:0,path:"/"})},_iframeSize:function(){setIframeHeight(-9);b(window).resize(function(){setIframeHeight(-9)})},hihit:function(a){a&&hihit(this.options.counters[a])},"#balloon-box-popup .close-balloon click":function(a){b(a).parent().fadeOut();b.cookie("stb",1,{expires:30,path:"/"})},"#balloon-box-popup .href-settings click":function(a,d){d.preventDefault();b(a).parent().parent().fadeOut();b.cookie("stb",1,{expires:30,path:"/"});
window.location.href=b(a).attr("href")}})});steal.loaded("app/show/theme6/show.js");
steal("jquery/controller","app/show","app/show/theme6/show.js","app/show/theme7/poll.js","app/show/theme7/popup/facebook-aw.js","app/show/theme7/popup/other-tweets.js","app/show/theme7/likes.js",function(b){App.Show.Theme6.Controller("App.Show.Theme7.Controller",{defaults:{counters:{hi_short_visit:2077,hi_panel_login:2078,hi_cancel_tw_auth:2089,hi_tw_auth:2088,hi_no_cookie:2091,hi_short_visit_not_reg:2095,hi_share_click:2204,hi_fb_click:2287,hi_tw_click:2288,hi_addthis_click:2289,hi_start_edit_caption:2290,
hi_save_caption:2291,hi_cancel_caption:2292}}},{init:function(){this._super();this.find(".js-like-box")["app_show_theme"+LinkData.curTheme+"_likes"]();this.CaptionModel=new Theme.Models.Caption({link_id:LinkData.id,caption:LinkData.caption});this.copyLink();this.poll=this.applyPoll();this.otherTweets=new App.Show.Popup.OtherTweets7(".js-other-tweets-wrapper");var a=this;a.setOriginalLinkWidth();a.setCaptionWidth();b(window).resize(function(){a.setOriginalLinkWidth();a.setCaptionWidth()});window.attachAddThisStatHandler();
if(LinkData.graylistLabel==="instagram"){setInstaIframeSize();b(window).resize(function(){setInstaIframeSize()})}},initPopups:function(){showSilentPopup();if(LinkData.isShowNotificationPopup&&!(LinkData.isExpress&&LinkData.is_author)){Popup.Manager.show("notify").addClass("login-autowrap-new");LnProf.popup("notify");Popup.displayed_startup_popup="notify";hihit(2117);this.handleNotificationPopup()}showAdvPopup({aw:function(){return LinkData.isAuthorFbUser?Popup.Manager._getPopup("facebook-aw"):PopupSM.get("aw1")},
plugin:true})},copyLink:function(){b(".js-copy-link").app_copy_text({afterCopy:function(){var a=b(this);a.hide();a.parent().find(".copied").show();setTimeout(function(){a.show();a.parent().find(".copied").hide()},2E3)}})},".other-tweets click":function(a,d){var f=b(".tweets-list-holder");if(b(d.target).hasClass("jspDrag"))return true;if(b(d.target).hasClass("tweet-block")||b(d.target).hasClass("tweet-text"))return true;if(a.hasClass("open")){hihit(2282);f.css("visibility","visible");a.removeClass("open")}else this.otherTweets.closeOtherTweetsBlock(a)},
".addthis_button_facebook click":function(){this.hihit("hi_fb_click")}," .addthis_button_twitter click":function(){this.hihit("hi_tw_click")},".addthis_button_google_plusone_share click":function(){this.hihit("hi_share_click")},"#at_hover a click":function(){this.hihit("hi_addthis_click")},".js-share-tw-express click":function(a,d){d.preventDefault();Share.twitter(null,a.data("title"))},setOriginalLinkWidth:function(){var a=b(".top-panel").outerWidth(true)-b(".top-panel .user").outerWidth(true)-b(".top-panel .other-tweets").outerWidth(true)-
50;b(".top-link-holder").width(a);b(".top-link-holder .top-link").css("max-width",a-78)},setCaptionWidth:function(){var a=b(".caption").width()-b(".caption .avatar").width()-b(".caption-edit-btn").width()-10;b(".inner-caption-text").css("max-width",a)},_iframeSize:function(){setIframeHeight(-30);b(window).resize(function(){setIframeHeight(-30)})},".js-caption mouseenter":function(a){LinkData.is_author&&a.find(".caption-edit-btn").css("visibility","visible")},".js-caption mouseleave":function(a){LinkData.is_author&&
a.find(".caption-edit-btn").css("visibility","hidden")},".js-caption-edit click":function(a,d){this.hihit("hi_start_edit_caption");this._super(a,d)},".js-caption-edit-form .js-caption-cancel click":function(a,d){d.preventDefault();this.hihit("hi_cancel_caption");this.hideCaptionEditForm()},hideCaptionEditForm:function(){var a=b(".js-caption");a.find(".js-caption-edit-form").hide(0,function(){a.find(".js-caption-text-container").show()})},"#js-caption-form submit":function(){this.hihit("hi_save_caption");
this.CaptionModel.attr("caption",Theme.Models.Caption.textareaVal());var a=this;this.CaptionModel.save(function(d,f){a.saveCaptionSuccess(d,f)},function(d){alert(d)});return false},".js-caption-save click":function(){b("#js-caption-form").submit()},".js-poll-toggle click":function(a,d){d.preventDefault();this.poll.toggleButtonClick()},saveCaptionSuccess:function(a,d){if(d.success){this.changeAddthisCaption(d.caption);this.hideCaptionEditForm()}else alert(d.error)},changeAddthisCaption:function(a){b(".addthis_toolbox").attr("addthis:title",
a);if(window.addthis)for(var d=0;d<addthis.links.length;d++)addthis.links[d].share.title=a},applyPoll:function(){var a="app_show_theme"+LinkData.curTheme+"_poll";return this.find(".js-poll-box")[a]().controller()}})});steal.loaded("app/show/theme7/show.js");
steal("app/show/show_mobile.js",function(b){App.ShowMobile.Controller("App.Show.Theme8.Controller",{init:function(){this._super();hihit(2152);Mobile.hideAddressBar();this._scalePanel();LinkData.graylistLabel==="instagram"&&this.setIframeSize();if((navigator.userAgent||"").toLowerCase().indexOf("sonyericssonlt26i")>-1)b(".mobile-popup2 .teaser").css("text-align","center");showAdvPopup({aw:function(){return MobilePopups.get("aw")},plugin:false});NL_APP_DATA.show_notify_popup&&User.checkIsSilentTimeline(function(a){a&&
setTimeout(function(){MobilePopups.get("autopost").show()},3E3)});Cookie.get("t6_popup_action")!==null&&Cookie.unset("t6_popup_action")},_scalePanel:function(){var a=this,d=Mobile.getScale(),f=b("#header"),g=f.width()*d,k=b(".top-panel");d=k.height();b(".iframe-box").css("top",d);var o=Mobile.isIOS()?0.8:0.5;d=function(s){var A=s-(s-1)*o;s=s/A;a.transform(f,1/A);f.css({width:Math.round(g/s),"max-height":Math.ceil(window.innerHeight*A)});b(".iframe-box").css("top",k.height()/A)};d(Mobile.getScale());
Mobile.onScale(d)},".js-like click":function(a,d){d.preventDefault();var f=a.closest(".js-like-box");if(!f.hasClass("disabled")){lnEvent("likes","like");b.post("/ajax/like",{short_link:LinkData.shortUrl},function(g){if(g.success=="true"){hihit(2164);b(".js-like-value").html(g.data.likes);f.addClass("disabled")}})}},".js-panel-button a click":function(a,d){d.stopPropagation()},".js-panel-button click":function(a){if(Cookie.get("_debug-ap8"))MobilePopups.get("autopost").show();else{hihit(2163);var d=
this.find(".js-slide-panel");a=b(a).parents(".top-panel").first();if(a.hasClass("open-panel")){a.removeClass("open-panel");d.hide()}else{a.addClass("open-panel");d.show()}}},".btn-signin-tw click":function(){Cookie.set("t6_tw_login",true,{expires:0});hihit(2166)},".js-original-link click":function(){lnEvent("visit origin link");switch(LinkData.curTheme){case Themes.THEME_8:hihit(2165);break}},"{window} orientationchange":function(){Mobile.hideAddressBar();setTimeout(function(){Mobile.triggerScale();
var a=MobilePopups.get("aw").popupInstance;a&&a.scale()},100)},".addthis_toolbox a, #at_hover a click":function(){hihit(2205)},transform:function(a,d){b(a).css({"-webkit-transform":"scale("+d+")","-moz-transform:":"scale("+d+")","-ms-transform":"scale("+d+")","-o-transform":"scale("+d+")",transform:"scale("+d+")"})},setIframeSize:function(){var a=b(".instagram-video"),d=b("body").height()-b(".insta-info").height()-b(".top-panel").height();if(d>370){a.width(d-70);a.height(d)}a.show()}})});steal.loaded("app/show/theme8/show.js");
steal("jquery/controller","app/show/theme9/likes.js","/js/lib/jquery-ui/jquery-ui-1.9.2.custom.js","/js/lib/jquery.mousewheel.js","app/show/theme7/show.js","app/show/theme9/popup/tweet-reply.js","app/show/theme9/popup/tweet-retweet.js","app/show/theme9/popup/tweet-retweet-prompt.js","app/show/theme9/promo.js","app/controllers/history/mylinks/popups/link-replies.js",function(b){App.Show.Theme7.Controller("App.Show.Theme9.Controller",{defaults:{counters:{hi_short_visit:2219,hi_details_click:2209,hi_share_click:2213,
hi_source_link:2224,hi_resize:2229,hi_fb_click:2297,hi_tw_click:2296,hi_addthis_click:2298,hi_start_edit_caption:2293,hi_save_caption:2295,hi_cancel_caption:2294}}},{otherTweetsPopup:null,init:function(){var a=this;Registry.setController("show",this);a.initPopups();a.find(".js-like-box")["app_show_theme"+LinkData.curTheme+"_likes"]();a.CaptionModel=new Theme.Models.Caption({link_id:LinkData.id,caption:LinkData.caption});this.promoController=new App.Show.Theme9.Promo(b(".js-promo-box-1"),LinkData.promoLink);
a.checkDelayedActions();if(window.addthis){addthis.addEventListener("addthis.menu.open",function(){b(".bottom-panel-2").addClass("hover");b(".share-icons").addClass("hover")});addthis.addEventListener("addthis.menu.close",function(){b(".bottom-panel-2").removeClass("hover");b(".share-icons").removeClass("hover")})}this.hihit("hi_short_visit");LinkData.isLogged||this.hihit("hi_short_visit_not_reg");if(Cookie.get("t6_popup_action")!==null){switch(Cookie.get("t6_popup_action")){case "0":this.hihit("hi_cancel_tw_auth");
break;case "1":this.hihit("hi_tw_auth");break}Cookie.set("t6_popup_action",null,{expires:0,path:"/"})}this._iframeSize();this.checkRedirect();this.checkNoticePanel();a.resizeIframe();var d=b(".resize-container .frame-holder").width()+60,f=b(window),g=f.width(),k=false;f.width()<d&&b(".resize-container .frame-holder").width(f.width());f.resize(function(o){if(!b(o.target).hasClass("ui-resizable")){o=b(".resize-container .frame-holder");var s=o.width()+60,A=f.width();if(A-g!=0)if(A-g<0)if(A<d){if(A-
(o.width()+40)<=0){o.width(A);b(".resizer-drag-left").hide();b(".resizer-drag-right").hide();k=true}}else a.showFrameHandlers(s,d,A,o);else if(A<d)k==true&&o.width(A);else{k=false;a.showFrameHandlers(s,d,A,o)}g=A}});this.otherTweetsPopup=PopupSM.get("myLinksReplies");window.attachAddThisStatHandler();if(LinkData.graylistLabel==="instagram"){setInstaIframeSize();b(window).resize(function(){setInstaIframeSize()})}App.Show.Controller.initAllDesktopThemes()},initPopups:function(){if(LinkData.show_retweet&&
!LinkData.isRetweeted){var a=Popup.Manager._getPopup("tweet-retweet-prompt");if(LinkData.is_author)LinkData.show_retweet==1&&a.show();else{LinkData.show_retweet==2&&a.enableManualBlock();a.show()}}else this._super()},".js-addthis-link click":function(){return false},showFrameHandlers:function(a,d,f,g){if(a<d)f-a<20&&g.width(d-60);else a>f-60&&f-a<0&&g.width(f-60);b(".resizer-drag-left").show();b(".resizer-drag-right").show()},initScrolling:function(){b(".resize-container").bind("mousewheel",function(a,
d){a=b(this).scrollTop();b(this).scrollTop(a-Math.round(d)*30)});b(document).keydown(function(a){var d=b(".resize-container"),f=d.scrollTop();if(a.keyCode==38)d.scrollTop(f-30);else a.keyCode==40&&d.scrollTop(f+30)})},_iframeSize:function(){function a(){var d=b(".notification .not-back").outerHeight()||0,f=b(".js-promo-box").outerHeight()||0;return b(window).height()-d-f-1}b(".resize-container").height(a());b(window).resize(function(){b(".resize-container").height(a())})},resizeIframe:function(){var a=
b(window).width()-60;b(".resize-container .frame-holder").resizable({handles:{w:"#js-resize-right",e:"#js-resize-left"},minWidth:320,maxWidth:a,containment:b(".resize-container"),iframeFix:true,resize:function(d,f){f.position.right=f.originalPosition.right;f.position.left=f.originalPosition.left;b(this).css("top","auto");d=f.originalSize.width+(f.size.width-f.originalSize.width)*2;f.size.width=d<=320?320:d>=a?a:d},start:function(){var d=b("<div class='iframeCover' style='zindex:99;position:absolute;width:100%;top:0px;left:0px; height:"+
b(".resize-container .frame-holder").height()+"px'></div>");b(".resize-container .frame-holder").append(d)},stop:function(){b(".iframeCover").remove()}})},".resizer-drag-left, .resizer-drag-right click":function(a,d){d.preventDefault()},".resizer-drag-left, .resizer-drag-right mouseup":function(){this.hihit("hi_resize")},hideNotificationPanel:function(){b("div.notification").remove();b(window).resize()},saveCaptionSuccess:function(a,d){if(d.success){this.changeAddthisCaption(d.caption);this.hideCaptionEditForm()}else alert(d.error)},
".js-tweet-retweet-link click":function(a,d){d.preventDefault();Popup.Manager._getPopup("tweet-retweet").setCaption(this.CaptionModel.attr("caption")).doOnLinkClick(a)},".js-tweet-favorite-link click":function(a,d){d.preventDefault();if(!LinkData.isLogged||LinkData.isFacebookOnlyLogged)Cookie.set("twitter_delayed_action",{action:"favorite",msg:""},{expires:0,path:"/"});window.User.isLoggedWithPopup()&&this._processFavoriteAction(a)},_processFavoriteAction:function(a,d){var f=function(g){if(g.success)if(b(a).attr("data-favorited")==
"1"){b(a).attr("data-favorited",0);b(a).parent().removeClass("clicked");b(a).html(LNG["show.theme.9.favorite"])}else{b(a).attr("data-favorited",1);b(a).parent().addClass("clicked");b(a).html(LNG["show.theme.9.favorited"])}};if(b(a).attr("data-favorited")=="1")typeof d=="undefined"&&b.post("/ajax/tweet-unfavorite",{id:LinkData.twitterStatusId},f);else b.post("/ajax/tweet-favorite",{id:LinkData.twitterStatusId},f)},".js-tweet-reply-link click":function(a,d){d.preventDefault();Popup.Manager._getPopup("tweet-reply").setCaption(this.CaptionModel.attr("caption")).setScreenName(b(a).attr("data-screen-name")).doOnLinkClick(a)},
".details-link, .js-days-ago click":function(){this.hihit("hi_details_click")},".source-link a click":function(){this.hihit("hi_source_link")},".bottom-panel-2 .data-box .ago .days-ago click":function(a,d){d.preventDefault()},".js-minimize click":function(a,d){if(b(".js-bottom-panel-2").hasClass("minimized")){b(".js-bottom-panel-2 a.minimizer").text("Minimize");b(".js-bottom-panel-2").removeClass("minimized")}else{hihit(2237);b(".js-bottom-panel-2 a.minimizer").text("Maximize");b(".js-bottom-panel-2").addClass("minimized")}d.preventDefault()},
checkDelayedActions:function(){var a=this;if(LinkData.processTwitterDelayedAction===true){var d=LinkData.twitterDelayedAction,f=LinkData.twitterDelayedMsg;if(d=="reply")Popup.Manager._getPopup("tweet-reply").setCaption(a.CaptionModel.attr("caption")).setTweetMsg(f).setScreenName(b(".js-tweet-reply-link").attr("data-screen-name")).doOnLinkClick(b(".js-tweet-reply-link"),true);else if(d=="favorite")a._processFavoriteAction(b(".js-tweet-favorite-link"),true);else if(d=="retweet"){a=Popup.Manager.getActive();
!(a&&a.getName()=="tweet-retweet-prompt")&&!LinkData.is_author&&Popup.Manager._getPopup("tweet-retweet").setCaption(this.CaptionModel.attr("caption")).doOnLinkClick(b(".js-tweet-retweet-link"),true)}}},".js-edit-description click":function(a,d){d.preventDefault();hihit(2475);this.promoController.promoModel.source_url&&this.promoController._renderToPopup(this.promoController.promoModel);Popup.Manager.show("promo");b(".js-parent-popup-close").hide();b(".js-url").val(this.promoController.promoModel.attr("source_url")).focus()},
".js-create click":function(a,d){d.preventDefault();this.promoController._resetPopup();Popup.Manager.show("promo");b(".js-url").focus();b(".js-parent-popup-close").hide();hihit(2472)},".js-delete-promo click":function(a,d){d.preventDefault();var f=this;if(this.promoController.promoModel.isNew()){this.promoController.promoModel.delete_promo(false,function(){b.extend(f.promoController.tempPromoModel,f.promoController.promoModel)});b(".js-step-4").hide();b(".js-step-1").show();b(window).resize()}else Popup.Manager.show("promo-delete")},
".js-promo-title, .js-promo-domain click":function(){LinkData.is_author||hihit(2474)},".js-promo-delete-action click":function(a,d){d.preventDefault();var f=this;hihit(2473);this.promoController.promoModel.delete_promo(false,function(){b.extend(f.promoController.tempPromoModel,f.promoController.promoModel)});this.promoController._resetPopup();b(".js-step-4").hide();b(".js-step-1").show();b(window).resize();Popup.Manager.hide()},".js-use-default-promo-action click":function(a,d){d.preventDefault();
var f=this;hihit(2484);this.promoController.promoModel.delete_promo(true,function(g,k){if(g==null){b(".js-step-4").hide();b(".js-step-1").show();b(window).resize()}else{f.promoController._renderToPanel(k);b.extend(f.promoController.tempPromoModel,f.promoController.promoModel)}});Popup.Manager.hide()},".js-reset-promo click":function(a,d){d.preventDefault();hihit(2476);d.preventDefault();var f=this;this.promoController.promoModel.delete_promo(true,function(g,k){if(g==null){b(".js-step-4").hide();b(".js-step-1").show();
b(window).resize()}else{f.promoController._renderToPanel(k);b.extend(f.promoController.tempPromoModel,f.promoController.promoModel)}})},".js-show-other-tweets click":function(a,d){d.preventDefault();a.closest(".js-other-tweets-wrapper");if(!this.otherTweetsPopup)this.otherTweetsPopup=PopupSM.get("myLinksReplies");this.otherTweetsPopup.setLinkId(LinkData.id);this.otherTweetsPopup.setTitle(a.text());this.otherTweetsPopup.setLinkHash(LinkData.linkHash);this.otherTweetsPopup.show()}})});steal.loaded("app/show/theme9/show.js");
steal("jquery/controller","app/show/show_base.js","app/show/theme10/likes.js","app/show/theme10/promo.js","app/show/theme10/popup/tweet-retweet.js","app/show/theme10/popup/other-tweets.js","app/show/theme10/popup/facebook-aw-10.js","app/popups/notify.js","app/popups/infoblock.js","/js/lib/jquery-ui/jquery-ui-1.9.2.custom.js","lib/cursor.js","lib/jquery.ellipsis.js",function(b){App.ShowBase.Controller("App.Show.Theme10.Controller",{defaults:{counters:{hi_short_visit:2338,hi_minimize_panel:2339,hi_maximize_panel:2340,
hi_like:2341,hi_tab_other_tweets:2342,hi_send_tweet_click:2343,hi_share:2344,hi_copy:2345}}},{tweet_form:null,tweet_limit:140,caption_limit:119,tweet_first_type:false,onload_is_called:false,tweet_processing:false,tweetsForm:null,measureDiv:null,otherTweets:null,init:function(){this._super();b.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase());var a=b.browser.chrome?2:3;if(b.browser.chrome&&(navigator.appVersion.indexOf("Linux")!=-1||navigator.appVersion.indexOf("Mac")!=-1))a=3;b(".orig-link span").ellipsis({row:a});
var d=this;setIframeHeight(0);d.setIframeWidth();b(window).resize(function(){setIframeHeight(0);d.setIframeWidth();d.updateTweetListContainerHeight();d.tweetsForm&&d.tweetsForm.reinitialise()});this.find(".js-like-box").app_show_theme10_likes();this.CaptionModel=new Theme.Models.Caption({link_id:LinkData.id,caption:LinkData.caption});this.promoController=new App.Show.Theme10.Promo(b(".js-promo-box-1"),LinkData.promoLink);this.checkRedirect();this.initAddthis();this.tweet_form=this.find(".tweet-form");
this.initPopups();hihit(this.options.counters.hi_short_visit);if(LinkData.processTwitterDelayedAction===true)if(LinkData.twitterDelayedAction=="tweet"){b(".js-tweet-textarea").trigger("keyup");this._sendTweet()}else if(LinkData.twitterDelayedAction=="retweet"&&b(".js-tweet-retweet-link").attr("data-retweeted")=="0"){Popup.Manager._getPopup("tweet-retweet10").setCaption(this.CaptionModel.attr("caption"));a=Popup.Manager._getPopup("tweet-retweet10");LinkData.show_retweet!=2?a.processRetweet(true):a.enableManualBlock().show()}this.otherTweets=
new App.Show.Popup.OtherTweets10(".js-other-tweets-wrapper",{owner:this})},updateTweetListContainerHeight:function(a){a=a!==undefined?a:0;var d=0;b(".orig-link-holder, .white-block, .bottommer, .js-tweet-form").each(function(){d+=b(this).outerHeight()});d+=a;a=b(".right-panel").height()-d;var f=0;b(".tweets-list-holder div.tweet").each(function(){f+=b(this).outerHeight()});var g=b(".tweets-list");f<=a?b(g).height(f):b(g).height(a);this.otherTweets.reinitialise()},animateTweetListContainterHeight:function(a){var d=
this;this.updateTweetListContainerHeight(a);setTimeout(function(){d.updateTweetListContainerHeight()},3E3)},setIframeWidth:function(){var a=b("body").hasClass("minimized")?b(".right-panel-minimized").width():b(".right-panel").width();a=b(window).width()-a;b("#source_site").width(a)},initPopups:function(){if(LinkData.show_retweet&&b(".js-tweet-retweet-link").attr("data-retweeted")=="0"){var a=Popup.Manager._getPopup("tweet-retweet10");if(LinkData.is_author)LinkData.show_retweet==1&&a.show();else{LinkData.show_retweet==
2&&a.enableManualBlock();a.show()}LnProf.popup(a);Popup.displayed_startup_popup="retweet"}else{showSilentPopup();if(LinkData.isShowNotificationPopup&&!(LinkData.isExpress&&LinkData.is_author)){Popup.Manager.show("notify").addClass("login-autowrap-new");LnProf.popup("notify");Popup.displayed_startup_popup="notify";hihit(2117)}showAdvPopup({aw:function(){return LinkData.isAuthorFbUser?Popup.Manager._getPopup("facebook-aw-10"):PopupSM.get("aw1")},plugin:true})}},initAddthis:function(){var a=this,d=b(".right-panel"),
f=d.height();d.find(".addthis_toolbox").find(".soc-google, .soc-soc, .soc-inshare").show();d=d.children(".caption").outerHeight(true)+d.children(".orig-link").outerHeight(true)+d.children(".likes-holder").outerHeight(true)+d.children(".display").outerHeight(true)+d.children(".bottommer").outerHeight(true);if(f-d<5){this.find(".addthis_toolbox").find(".soc-google, .soc-soc, .soc-inshare").remove();window.addthis_config={services_exclude:"twitter,facebook,print"}}else window.addthis_config={services_exclude:"twitter,facebook,google_plusone_share,stumbleupon,linkedin,print"};
window.addthis&&window.addthis.init();window.attachAddThisStatHandler(function(){hihit(a.options.counters.hi_share)})},".notification .close click":function(a,d){d.preventDefault();a=b(a).data("notify-type");b.get("/ajax/close-notify",{short_link:LinkData.shortUrl,notify_type:a});b("div.notification").remove();b(".right-panel, .right-panel-minimized").removeClass("notify-pusher");b("#source_site").height(b(window).height())},".js-close-panel click":function(a,d){d.preventDefault();b(".right-panel").toggle();
b(".right-panel-minimized").toggle();if(b(".right-panel-minimized").is(":visible")){b("body").addClass("minimized");hihit(this.options.counters.hi_minimize_panel)}else{b("body").removeClass("minimized");hihit(this.options.counters.hi_maximize_panel)}this.setIframeWidth()},resetTabs:function(){b(".display > div:not(.share-poll)").hide();b(".share-poll a").removeClass("active")},".js-cancel-tweet-btn click":function(a,d){d.preventDefault();a=a.parent().find(".js-tweet-textarea");a.val("");a.trigger("keyup");
this.updateTweetListContainerHeight()},".js-tweet-textarea change":function(){this.updateTweetInput()},".js-tweet-textarea keyup":function(a,d){if(d.which==8||d.which==46)this.updateTweetInput()},".js-tweet-textarea keypress":function(a){var d=this;setTimeout(function(){d.updateTweetInput();var f=d.tweet_form.find(".symb-quant .current"),g=a.val().length,k=d.getStringWidth(a.val());k=parseInt(k/195)+1;if(k!=a.data("rows")){a.css("height",16*k+"px");a.data("rows",k);d.tweetsForm!=null&&d.tweetsForm.reinitialise();
d.updateTweetListContainerHeight()}f.text(g)},200)},updateTweetInput:function(){var a=b(".js-tweet-textarea"),d=this.tweet_form.find(".symb-quant .current"),f=this.tweet_form.find(".js-send-tweet-btn"),g=a.val().length,k=this.caption_limit-g;a.val(a.val().replace(/^\s+/,""));a.css("color","black");if(k<0){f.addClass("disabled");d.css("color","red")}else if(k==this.caption_limit)f.addClass("disabled");else{f.removeClass("disabled");d.css("color","#999999")}d.text(g)},getStringWidth:function(a){if(this.measureDiv===
null){var d=b(".js-tweet-textarea"),f=b("<div/>",{id:"measureDiv"});f.css({position:"absolute","float":"left","white-space":"nowrap",visibility:"hidden","font-family":d.css("font-family"),"font-size":d.css("font-size")});b("body").append(f);this.measureDiv=f}this.measureDiv.text(a);return this.measureDiv.width()},".js-send-tweet-btn click":function(a,d){d.preventDefault();if(a.hasClass("disabled"))return false;this._sendTweet()},_sendTweet:function(){var a=this,d=this.tweet_form.find(".js-tweet-textarea");
if(!LinkData.isLogged||LinkData.isFacebookOnlyLogged)Cookie.set("twitter_delayed_action",{action:"tweet",msg:d.val()},{expires:0,path:"/"});b(".js-send-tweet-btn").addClass("disabled");if(!(d.val().length>this.caption_limit||d.val().length<=0||a.tweet_processing==true||!window.User.isLoggedWithPopup()||!LinkData.isLogged||LinkData.isFacebookOnlyLogged)){hihit(a.options.counters.hi_send_tweet_click);a.tweet_processing=true;b(".js-tweet-form .symb-quant").hide();b(".js-tweet-spinner").show();var f=
function(){a.tweet_processing=false;b(".js-tweet-spinner").hide();b(".js-tweet-form .symb-quant").show();b(".js-send-tweet-btn").removeClass("disabled")},g=d.val();b.post("/ajax/post-other-tweet",{url:LinkData.longUrl,caption:g},function(k){f();if(k.success){a.message.showAndHide("Your Tweet was posted!",Message.TYPE_SUCCESS,".js-alert-message");a.tweetCallback(g,k.short_url)}else a.message.showAndHide(k.error.message,Message.TYPE_ERROR,".js-alert-message")})}},tweetCallback:function(a,d){var f=b(".tweets-count"),
g=b(".tweets-list");b(".js-tweet-form").find(".be-first").remove();b(".other-tweets").show();b(".js-only-tweet-btn").show();b(".js-tweet-form textarea").val("");b(".js-tweet-form .symb-quant .current").text(0);f.html(parseInt(f.html())+1);this.createTweet(a,d,".tweets-list-holder");if(g.data("tweets-cnt")!=0){this.animateTweetListContainterHeight(15);if(g.height()>=180){this.otherTweets.reinitialise();this.otherTweets.getJsp().scrollTo(0,0)}}else{this.updateTweetListContainerHeight(b(".tweets-list-holder div:first").outerHeight());
this.otherTweets.reinitialise()}},createTweet:function(a,d,f){var g=b("<div/>",{"class":"tweet"});g.append(b("<div/>",{"class":"tweet-body",text:a+" "}));g.append(b("<div/>",{"class":"tweet-link"}).append(b("<a/>",{target:"_blank",href:d,text:d})));g.append(b("<div/>",{"class":"tweet-data",html:"right now <a href='http://twitter.com/"+LinkData.authScreenName+"'><b>@"+LinkData.authScreenName+"</b><a/>"}));b(f).prepend(g);return true},".js-edit-description click":function(a,d){d.preventDefault();hihit(2352);
this.promoController.promoModel.source_url&&this.promoController._renderToPopup(this.promoController.promoModel);Popup.Manager.show("promo");b(".js-parent-popup-close").hide();b(".js-url").val(this.promoController.promoModel.attr("source_url")).focus()},".js-create click":function(a,d){d.preventDefault();this.promoController._resetPopup();Popup.Manager.show("promo");b(".js-url").focus();b(".js-parent-popup-close").hide();hihit(2349)},".js-delete-promo click":function(a,d){d.preventDefault();var f=
this;if(this.promoController.promoModel.isNew()){this.promoController.promoModel.delete_promo(false,function(){b.extend(f.promoController.tempPromoModel,f.promoController.promoModel)});b(".js-step-4").hide();b(".js-step-1").show()}else Popup.Manager.show("promo-delete")},".js-promo-title, .js-promo-domain click":function(a){LinkData.is_author||(a.closest(".js-details").hasClass("type-full")?hihit(2351):hihit(2550))},".js-promo-delete-action click":function(a,d){d.preventDefault();var f=this;hihit(2350);
this.promoController.promoModel.delete_promo(false,function(){b.extend(f.promoController.tempPromoModel,f.promoController.promoModel)});this.promoController._resetPopup();b(".js-step-4").hide();b(".js-step-1").show();Popup.Manager.hide()},".js-use-default-promo-action click":function(a,d){d.preventDefault();var f=this;hihit(2386);this.promoController.promoModel.delete_promo(true,function(g,k){if(g==null){b(".js-step-4").hide();b(".js-step-1").show()}else{f.promoController._renderToPanel(k);b.extend(f.promoController.tempPromoModel,
f.promoController.promoModel)}});Popup.Manager.hide()},".js-reset-promo click":function(a,d){d.preventDefault();hihit(2389);d.preventDefault();var f=this;this.promoController.promoModel.delete_promo(true,function(g,k){if(g==null){b(".js-step-4").hide();b(".js-step-1").show()}else{f.promoController._renderToPanel(k);b.extend(f.promoController.tempPromoModel,f.promoController.promoModel)}})},addNewTweetToOtherTweets:function(a,d){var f=b(".tweets-list .tweet:first").clone();f.find(".tweet-data").html("right now <b>@"+
LinkData.authScreenName+"</b>");f.find(".tweet-body").text(a+" ");f.find(".tweet-link").html(b("<a/>",{href:d,text:d,target:"_blank"}));b(".tweets-list-holder").prepend(f)},".js-tweet-retweet-link click":function(a,d){d.preventDefault();if(a.hasClass("inactive")){this.message.showAndHide(LNG["show.10.retweet.disabled_for_owner"],Message.TYPE_ERROR,".js-alert-message");return false}a.attr("data-retweeted")=="1"?hihit(2431):hihit(2430);Popup.Manager._getPopup("tweet-retweet10").setCaption(this.CaptionModel.attr("caption")).doOnLinkClick(a)},
".soc-data a click":function(a){switch(a.data("type")){case "fb":hihit(2575);break;case "twitter":hihit(2576);break;case "linkedin":hihit(2577);break;case "google_plus":hihit(2578);break;case "rss":hihit(2579);break;default:break}},".js-source-link click":function(){hihit(2584)},"#jivo-label-wrapper click":function(){hihit(3536);lnEvent("jivochat open","left-middle")},"#jivo_close_button click":function(){hihit(3537);lnEvent("jivochat close","left-middle")},".help-button click":function(){PopupSM.get("infoblock").show()}})});
steal.loaded("app/show/theme10/show.js");
steal("jquery/controller","app/show/show_base.js","app/show/theme11/likes.js","app/show/theme11/promo.js","app/show/theme11/rss.js","app/show/theme11/popup/facebook-aw-11.js","app/popups/notify.js","app/popups/infoblock.js","/js/lib/jquery-ui/jquery-ui-1.9.2.custom.js","lib/cursor.js","lib/jquery.ellipsis.js",function(b){App.ShowBase.Controller("App.Show.Theme11.Controller",{defaults:{counters:{show:2654,minimize:2655,visit_source_link:2657,share:2658,visit_personal_website:2659,visit_personal_fb:2660,
visit_personal_tw:2661,visit_personal_gp:2662,visit_personal_ln:2663,promo_create:2664,promo_visit:2665,aw_show:2667}}},{init:function(){this.setSloganWidth();this.setPromoDescWidth();this.cutSourceLink();this._super();this.find(".js-like-box").app_show_theme11_likes();b(".addthis_button").on("click",function(){setTimeout(function(){b("#at3winshare-iframe").attr("name","share_iframe")},2E3)});b.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase());var a=b.browser.chrome?2:3;if(b.browser.chrome&&
(navigator.appVersion.indexOf("Linux")!=-1||navigator.appVersion.indexOf("Mac")!=-1))a=3;b(".orig-link span").ellipsis({row:a});var d=this,f=48;if(b(".no-promo").length){if(b(".white-skin").length)f=11}else if(b(".with-skin").length)f=b(".white-skin").length?34:21;setIframeHeight(f);d.setIframeWidth();b(window).resize(function(){setIframeHeight(f);d.setIframeWidth()});this.CaptionModel=new Theme.Models.Caption({link_id:LinkData.id,caption:LinkData.caption});this.promoController=new App.Show.Theme11.Promo(b(".js-promo-box-1"),
LinkData.promoLink);this.checkRedirect();this.initAddthis();this.initPopups();this.initRSS();hihit(this.options.counters.show)},setSloganWidth:function(){var a=b(".js-rss-slogan").outerWidth();b(document).ready(function(){var d=b(window).width()-120-b(".userbox").outerWidth()-b(".js-rss-block").outerWidth()-b(".empty-social-description").outerWidth()-b(".social").outerWidth();a>d&&b(".js-rss-slogan").outerWidth(d)});b(window).resize(function(){var d=b(window).width()-120-b(".userbox").outerWidth()-
b(".js-rss-block").outerWidth()-b(".empty-social-description").outerWidth()-b(".social").outerWidth();a>d&&b(".js-rss-slogan").outerWidth(d);a<d&&b(".js-rss-slogan").removeAttr("style")})},setPromoDescWidth:function(){var a=b(".js-promo-text").outerWidth();b(document).ready(function(){var d=b(window).width()-50-b(".suggestion").outerWidth()-b(".author-tools").outerWidth();a>d&&b(".js-promo-text").outerWidth(d)});b(window).resize(function(){var d=b(window).width()-50-b(".suggestion").outerWidth()-
b(".author-tools").outerWidth();a>d&&b(".js-promo-text").outerWidth(d);a<d&&b(".js-promo-text").removeAttr("style")})},setIframeWidth:function(){var a=b("body").hasClass("minimized")?b(".right-panel-minimized").width():b(".right-panel").width();a=b(window).width()-a;b("#source_site").width(a)},initPopups:function(){showSilentPopup();if(LinkData.isShowNotificationPopup&&!(LinkData.isExpress&&LinkData.is_author)){Popup.Manager.show("notify");LnProf.popup("notify");Popup.displayed_startup_popup="notify";
hihit(this.options.counters.aw_popup_show)}showAdvPopup({aw:function(){return LinkData.isAuthorFbUser?Popup.Manager._getPopup("facebook-aw-11"):PopupSM.get("aw1")},plugin:true})},initAddthis:function(){var a=this;window.addthis_config={services_exclude:"print"};window.addthis&&window.addthis.init();window.attachAddThisStatHandler(function(){hihit(a.options.counters.share)})},initRSS:function(){if(b(".js-rss-block").length){this.loadRSSList();b(".js-rss-block").app_show_theme11_rss()}},loadRSSList:function(){b.get("/ajax/get-rss-fetched",
{theme:11,short_link:LinkData.shortUrl}).done(function(a){a&&b(".js-rss-content").append(a)})},".notification .close click":function(a,d){d.preventDefault();a=b(a).data("notify-type");b.get("/ajax/close-notify",{short_link:LinkData.shortUrl,notify_type:a});b("div.notification").remove();b(".right-panel, .right-panel-minimized").removeClass("notify-pusher");b("#source_site").height(b(window).height())},".js-close-panel click":function(a,d){d.preventDefault();this.options.counters.minimize!=undefined&&
hihit(this.options.counters.minimize);a=b("#source_site").innerHeight();b(".top-panel").animate({top:"-71px"},500);b(".botttom-panel").animate({bottom:"-48px"},500);b("#source_site").animate({"margin-top":"0",height:a+48+"px"},500,function(){window.location=LinkData.longUrl})},".js-edit-description click":function(a,d){d.preventDefault();hihit(this.options.counters.promo_edit);this.promoController.promoModel.source_url&&this.promoController._renderToPopup(this.promoController.promoModel);Popup.Manager.show("promo");
b(".js-parent-popup-close").hide();b(".js-url").val(this.promoController.promoModel.attr("source_url")).focus()},".js-create click":function(a,d){d.preventDefault();this.promoController._resetPopup();Popup.Manager.show("promo");b(".js-url").focus();b(".js-parent-popup-close").hide();hihit(this.options.counters.promo_create)},".js-delete-promo click":function(a,d){d.preventDefault();var f=this;if(this.promoController.promoModel.isNew()){this.promoController.promoModel.delete_promo(false,function(){b.extend(f.promoController.tempPromoModel,
f.promoController.promoModel)});b(".js-step-4").hide();b(".js-step-1").show()}else Popup.Manager.show("promo-delete")},".js-promo-text-link, .js-promo-title, .js-promo-domain click":function(){LinkData.is_author||this.options.counters.promo_visit!=undefined&&hihit(this.options.counters.promo_visit)},".js-promo-delete-action click":function(a,d){d.preventDefault();var f=this;hihit(this.options.counters.promo_delete);this.promoController.promoModel.delete_promo(false,function(){b.extend(f.promoController.tempPromoModel,
f.promoController.promoModel)});this.promoController._resetPopup();b(".js-step-4").hide();b(".js-step-1").show();Popup.Manager.hide()},".js-use-default-promo-action click":function(a,d){d.preventDefault();var f=this;hihit(this.options.counters.promo_use_default);this.promoController.promoModel.delete_promo(true,function(g,k){if(g==null){b(".js-step-4").hide();b(".js-step-1").show()}else{f.promoController._renderToPanel(k);b.extend(f.promoController.tempPromoModel,f.promoController.promoModel)}});
Popup.Manager.hide()},".js-reset-promo click":function(a,d){d.preventDefault();hihit(this.options.counters.promo_reset);d.preventDefault();var f=this;this.promoController.promoModel.delete_promo(true,function(g,k){if(g==null){b(".js-step-4").hide();b(".js-step-1").show()}else{f.promoController._renderToPanel(k);b(".js-reset-promo-wrapper").hide();b.extend(f.promoController.tempPromoModel,f.promoController.promoModel)}})},".soc-data a click":function(a){a=a.data("type");lnEvent("visit soc-acc",a);
switch(a){case "fb":hihit(this.options.counters.visit_personal_fb);break;case "twitter":hihit(this.options.counters.visit_personal_tw);break;case "linkedin":hihit(this.options.counters.visit_personal_ln);break;case "google_plus":hihit(this.options.counters.visit_personal_gp);break;case "rss":hihit(this.options.counters.visit_personal_rss);break;case "website":hihit(this.options.counters.visit_personal_website);break}},".js-source-link click":function(){this.options.counters.visit_source_link!=undefined&&
hihit(this.options.counters.visit_source_link)},".js-social-website click":function(){this.options.counters.visit_personal_website!=undefined&&hihit(this.options.counters.visit_personal_website)},"#jivo-label-wrapper click":function(){hihit(3536);lnEvent("jivochat open","left-middle")},"#jivo_close_button click":function(){hihit(3537);lnEvent("jivochat close","left-middle")},cutSourceLink:function(){var a=b(window).width(),d=parseInt(b(".share-button-holder").outerWidth())+parseInt(b(".js-like-box").outerWidth()),
f=parseInt(b(".up-line .user-name").outerWidth())+parseInt(b(".up-line .descr-text").outerWidth())+parseInt(b(".up-line .post-ago").outerWidth())+parseInt(b(".up-line .js-source-link").outerWidth());d+f>a&&b(".js-source-link").text(b(".js-source-link").text().substr(0,120)+"...")},".help-button click":function(){PopupSM.get("infoblock").show()}})});steal.loaded("app/show/theme11/show.js");
steal("jquery/controller","app/show/theme11/show.js","app/show/theme12/likes.js","app/show/theme12/promo.js","app/show/theme12/rss.js",function(b){App.Show.Theme11.Controller("App.Show.Theme12.Controller",{defaults:{counters:{show:2668,minimize:2669,like:2670,visit_source_link:2671,share:2672,visit_personal_website:2673,visit_personal_fb:2674,visit_personal_tw:2675,visit_personal_gp:2676,visit_personal_ln:2677,promo_create:2678,promo_visit:2679,aw_show:2681}}},{init:function(){var a=this;Registry.setController("show",
this);b(".addthis_button").on("click",function(){setTimeout(function(){b("#at3winshare-iframe").attr("name","share_iframe")},2E3)});this.find(".js-like-box").app_show_theme12_likes();setIframeHeight();a.setIframeWidth();b(window).resize(function(){setIframeHeight();a.setIframeWidth();LinkData.graylistLabel==="instagram"&&setInstaIframeSize()});this.CaptionModel=new Theme.Models.Caption({link_id:LinkData.id,caption:LinkData.caption});this.promoController=new App.Show.Theme11.Promo(b(".js-promo-box-1"),
LinkData.promoLink);this.checkRedirect();this.initAddthis();this.initPopups();this.initRSS();hihit(this.options.counters.show);LinkData.graylistLabel==="instagram"&&setInstaIframeSize();App.ShowBase.Controller.initAllDesktopThemes()},initRSS:function(){this.loadRSSList()},loadRSSList:function(){b(".js-rss-block .std-loading").show();b.get("/ajax/get-rss-fetched",{theme:12,short_link:LinkData.shortUrl}).done(function(a){if(a){b(".js-rss-block .viewport").append(a);b(".js-rss-block").app_show_theme12_rss();
b(".js-rss-block .std-loading").hide()}})},".js-close-panel click":function(a,d){d.preventDefault();this.options.counters.minimize!=undefined&&hihit(this.options.counters.minimize);a=b("#source_site").innerWidth();b(".right-panel").animate({right:"-201px"},500);b("#source_site").animate({width:a+201+"px"},500,function(){window.location=LinkData.longUrl})},".help-button click":function(){PopupSM.get("infoblock").show()}})});steal.loaded("app/show/theme12/show.js");
steal("jquery/controller","app/tools/mobile.js","app/show/show_base.js","app/show/theme13/likes.js","app/show/theme13/poll.js","app/show/theme13/popup/other-tweets.js","app/show/theme13/popup/poll.js","app/show/theme13/popup/aw4.js",function(b){App.ShowBase.Controller("App.Show.Theme13.Controller",{init:function(){var a=b("#active-widget").val(),d=this;if(a=="tweets")hihit(2707);else a=="poll"&&hihit(2711);this.find(".js-poll").app_show_theme13_poll().controller();window.matchMedia("(-webkit-min-device-pixel-ratio: 2)").matches&&
b("body").addClass("i5");PopupSM.popupsMap.aw4=function(){return PopupSM._loader(App.Show.Aw4)};showAdvPopup({aw:function(){return PopupSM.get("aw4")},plugin:false});this._scalePanel();Mobile.onScale(function(){d._scalePopup()})},".js-other-tweets-handler click":function(){Popup.Manager.show("other-tweets13")},".js-poll-handler click":function(){Popup.Manager.show("poll")},_scalePanel:function(){var a=this,d=b(".twitter-widget"),f=function(g){var k=1/(g-(g-1)*0.3);a.transform("#big-popup .popup",
1/g);a.transform(d,k,false)};f(Mobile.getScale());Mobile.onScale(f)},_scalePopup:function(){if(Popup.Manager.isActive()){var a;a=b("#big-popup .popup").width()/Mobile.getWidth();a=a>1?a:1;a*=Mobile.getRatio();a/=Mobile.getScale();Mobile.isLandscape()||(a*=1.45);if(Mobile.getRatio()>2&&Mobile.isLandscape())a/=1.3;this._applyZoomToPopup(a)}},"{Popup.Manager} onShow":function(){b(".twitter-widgets").hide();this._scalePopup();Mobile.triggerScale()},"{Popup.Manager} onHide":function(a,d,f){b(".twitter-widgets").show();
f._name=="aw4"&&Cookie.set("t6_autowrap_on",null,{expires:0,path:"/"})},_applyZoomToPopup:function(a){if(Popup.Manager.getActive().getName()=="aw4"){b(".js-illustration-h").hide();b(".js-illustration-v").show();if(Mobile.isLandscape()){b(".js-illustration-v").hide();b(".js-illustration-h").show()}b(".js-aw4 .js-close img").width(20*a);b(".js-aw4 h1, .js-aw4 h2").css("font-size",15*a+"px");b(".js-aw4 .js-btn-iphone-signin-tw").css("font-size",15*a+"px")}},"{window} orientationchange":function(){window.orientation===
0?b("body").removeClass("i5-hor"):b("body").addClass("i5-hor");Popup.Manager.isActive()&&setTimeout(function(){var a=Popup.Manager.getActive();a&&a._centrify();Mobile.triggerScale()},300)},transform:function(a,d,f){f=f===undefined?true:f;b(a).css({"-webkit-transform":"scale("+d+")","-moz-transform:":"scale("+d+")","-ms-transform":"scale("+d+")","-o-transform":"scale("+d+")",transform:"scale("+d+")"});f&&this._centrifyWithScale(d)},_centrifyWithScale:function(a){var d=b("#big-popup .popup"),f=(b(window).height()-
d.height())/4;if(window.orientation!==0)f=10;d.offset({left:Math.round(b(window).scrollLeft()+10*a)+"px",top:b(window).scrollTop()+f*a});d.css({right:10*a+"px"})}})});steal.loaded("app/show/theme13/show.js");steal("app/controllers/history/mylinks/base.js",function(){App.History.Mylinks.BaseController("App.History.Mylinks.GuestController",{})});steal.loaded("app/controllers/history/mylinks/guest.js");
steal("app/controllers/history/mylinks/base.js",function(){App.History.Mylinks.BaseController("App.History.Mylinks.UserController",{".toggle-replies click":function(b,a){a.preventDefault();b.siblings(".replies-content").toggle()}})});steal.loaded("app/controllers/history/mylinks/user.js");
steal("jquery/class").then(function(b){b.Class("MetadataFetch",{defaults:{cache:0,interval:1500,limit:5,onReceive:function(){}},options:{},queriesCnt:0,urls:[],init:function(a,d){b.isArray(a)||(a=[a]);for(var f={},g=0;g<a.length;g++)f[a[g].short_url]=a[g];this.urls=f;this.options=b.extend(this.defaults,d)},fetch:function(){if(!(++this.queriesCnt>this.options.limit||b.isEmptyObject(this.urls))){var a=this;setTimeout(function(){b.post("/url/get-metadata-from-cache",{links:a.urls},function(d){a.options.onReceive(d.metadata);
for(var f in d.metadata)d.metadata[f].title!=""&&delete a.urls[f]});a.fetch()},this.options.interval)}}})});steal.loaded("app/tools/metadata-fetch.js");steal("app/controllers/short_form.js",function(){App.ShortFormController("App.Index.Index.ShortFormController",{urlCreateDefaultParams:{storeLinkData:1},onUrlCreate:function(){redirectPage("/mylinks")},initAddthis:function(){}})});steal.loaded("app/controllers/index/index/short_form.js");
steal("jquery/controller","app/controllers/user/settings/base.js",function(b){App.Settings.BaseController("App.Common.Userbox",{init:function(){this.switcher(b(".js-automation-switcher"));this.menuItems()},".js-automation-switcher-label click":function(a,d){a.closest(".js-checkbox-param").find(".js-automation-switcher").trigger("click");d.stopImmediatePropagation()},".js-automation-switcher click":function(a){var d=this;this.toggleUserSettingCheckbox(a,function(){d.switcher(a);a.hasClass("switched-on")?
hihit(3048):hihit(3050)},true)},switcher:function(a){if(a.hasClass("checked-switcher")){a.removeClass("switched-off").addClass("switched-on");if(this.find(".twitter-automation").length){b("#twAutomationSwitcher").addClass("checked-switcher");b(".js-whitelist").show()}}else{a.removeClass("switched-on").addClass("switched-off");if(this.find(".twitter-automation").length){b("#twAutomationSwitcher").removeClass("checked-switcher");b(".js-whitelist").hide()}}},".avatar-wrapper click":function(a){window.location=
a.find(".myLinks").attr("href")},menuItems:function(){var a="",d="";if(this.find(".video-tour").length){a="#d1d0d0";d="#fff"}else{a="#000 !important;";d="#999"}b(".avatar-wrapper").hover(function(){b(this).css("cursor","pointer");b(".myLinks").css("color",a)},function(){b(".myLinks").css("color",d)})}})});steal.loaded("app/controllers/common/userbox.js");
steal("jquery/controller","app/popups/index-video-popup.js","app/controllers/user/settings/base.js","app/tools/message-box.js",function(b){App.Settings.BaseController("App.Plugin.PostinstallController",{tweet_limit:140,init:function(){NL_APP_DATA.action=="automation"&&this.initAutomationStep();NL_APP_DATA.action=="post"&&this.initPostStep()},initAutomationStep:function(){},initPostStep:function(){this.textLimitCounter(b(".js-silent-textarea"),b(".js-symb-count"),this.tweet_limit)},".js-btn-signin-tw click":function(){hihit(3146)},
".js-silent-textarea keyup":function(a){b(".js-symb-count").css("display","inline-block");this.textLimitCounter(a,".js-symb-count",this.tweet_limit)},".js-youtube-thumb click":function(a,d){d.preventDefault();this.videoPopup=PopupSM.get("indexVideo");this.videoPopup._title="Linkis Automation: video illustration and explanation";this.videoPopup._addClass="learn-feature-popup-postinstall";this.videoPopup._width=640;this.videoPopup._height=360;this.videoPopup.videoId="uAuyhFTDveQ";this.videoPopup.show()},
".js-silent-tweet click":function(a,d){d.preventDefault();var f=this;a=this.find(".js-silent-textarea").val();d=this.find('[name="url"]').val();var g=140;if(a.indexOf(d)>-1){var k=d.substr(d.indexOf("/",8)+1);g+=k.length-6}if(a.length>g)a=truncateByWords(a,g);var o=b(".js-silent-textarea-block .textarea-data");o.find(".js-symb-count").hide();o.find(".loader").show();hihit(3150);b.post("/ajax/tweet",{status:a,wrap_url:d,generator:{name:"plugin-post",version:1}},function(s){o.find(".js-symb-count").show();
o.find(".loader").hide();s.success?f.tweetCallback(s):(new MessageBox(b(".post-msg-block"),{elmInner:null})).showAndHide(s.error.message||s.error)})},".js-aw-on click":function(a,d){d.preventDefault();hihit(3148);b.post("/ajax/save-settings-value",{name:"change_tweets",value:1},function(f){if(f.success)location.href=a.attr("href");else alert(f.error)},"json")},".js-aw-skip click":function(){hihit(3149)},textLimitCounter:function(a,d,f){var g=a.val().length;b(d).html(g);if(g>f){d=a.val();a.val(d.substring(0,
f))}},tweetCallback:function(a){b(".js-silent-textarea-block").hide();b(".js-silent-just-shared").show();this.find(".your-shared").html(a.wrapped_url).attr("href",a.wrapped_url)}})});steal.loaded("app/controllers/plugin/postinstall.js");steal("jquery/controller",function(b){b.Controller("App.Plugin.IndexController",{init:function(){if(isPluginInstalled()){this.find(".browser-button").hide();this.find(".plugin-installed-msg").show()}}})});steal.loaded("app/controllers/plugin/index.js");
steal("jquery/controller","app/show/show_base.js",function(b){b.Controller("App.Url.SeoController",{tweet_form:null,tweet_limit:140,caption_limit:119,tweet_processing:false,tweetsForm:null,otherTweets:null,imageContainer:null,init:function(){this.loadOtherTweets();this.tweet_form=this.find(".tweet-form");this.CaptionModel=new Theme.Models.Caption({link_id:LinkData.id,caption:LinkData.caption});if(LinkData.processTwitterDelayedAction===true)if(LinkData.twitterDelayedAction=="tweet"){b(".js-tweet-textarea").trigger("keyup");
this._sendTweet()}this.imageContainer=this.find(".seo-page-image-link");this.checkImage()},checkImage:function(){var a=this.imageContainer;a&&!a.find("img").length&&b.post("/url/create-image",{id:this.imageContainer.data("link-id")},function(d){d.success&&a.html('<img class="illus" src="'+d.data+'">')})},loadOtherTweets:function(){var a=b(".js-tweets-holder");b.get("/ajax/load-other-tweets",{hash:a.data("hash"),cur_theme:"seo"},function(d){d.success&&a.html(d.html)})},".js-tweet-textarea change":function(){this.updateTweetInput()},
".js-tweet-textarea keyup":function(a,d){if(d.which==8||d.which==46)this.updateTweetInput()},".js-tweet-textarea keypress":function(){this.updateTweetInput()},updateTweetInput:function(){var a=b(".js-tweet-textarea"),d=this.tweet_form.find(".symb-quant .current"),f=this.tweet_form.find(".js-send-tweet-btn"),g=a.val().length,k=this.caption_limit-g;a.val(a.val().replace(/^\s+/,""));a.css("color","black");if(k<0){f.addClass("disabled");d.css("color","red")}else if(k==this.caption_limit)f.addClass("disabled");
else{f.removeClass("disabled");d.css("color","#999999")}d.text(g)},".js-send-tweet-btn click":function(a,d){d.preventDefault();if(a.hasClass("disabled"))return false;this._sendTweet()},_sendTweet:function(){var a=this,d=this.tweet_form.find(".js-tweet-textarea");if(!LinkData.isLogged||LinkData.isFacebookOnlyLogged)Cookie.set("twitter_delayed_action",{action:"tweet",msg:d.val()},{expires:0,path:"/"});b(".js-send-tweet-btn").addClass("disabled");if(!(d.val().length>this.caption_limit||d.val().length<=
0||a.tweet_processing==true||!window.User.isLoggedWithPopup()||!LinkData.isLogged||LinkData.isFacebookOnlyLogged)){a.tweet_processing=true;b(".js-tweet-form .symb-quant").hide();b(".js-tweet-spinner").show();var f=function(){a.tweet_processing=false;b(".js-tweet-spinner").hide();b(".js-tweet-form .symb-quant").show();b(".js-send-tweet-btn").removeClass("disabled")},g=d.val();b.post("/ajax/post-other-tweet",{url:LinkData.longUrl,caption:g},function(k){f();var o=new Message;if(k.success){o.showAndHide("Your Tweet was posted!",
Message.TYPE_SUCCESS,".js-alert-message");a.tweetCallback(g,k.short_url)}else o.showAndHide(k.error.message,Message.TYPE_ERROR,".js-alert-message")})}},tweetCallback:function(a,d){b(".js-tweet-form textarea").val("");b(".js-tweet-form .symb-quant .current").text(0);b(".js-tweet-form .js-send-tweet-btn").addClass("disabled");this.createTweet(a,d,".js-tweets-holder")},createTweet:function(a,d,f){var g=b("<div/>",{"class":"tweet"}),k=b("<img/>",{"class":"twitter-avatar",src:LinkData.userAvatar}),o=b("<div/>",
{"class":"rest-texts"});g.append(o);o.append(b("<p/>",{"class":"datum",text:LinkData.authUserName+" right now"}));a=b("<p/>",{"class":"tweet-body",text:a+" "});o.append(a);o=b("<a/>",{target:"_blank",href:"http://twitter.com/"+LinkData.authScreenName,text:"@"+LinkData.authScreenName});var s=b("<a/>",{target:"_blank",href:"http://twitter.com/"+LinkData.authScreenName});a.append(o);s.html(k);g.prepend(s);a.append(" ");a.append(b("<a/>",{target:"_blank",href:d,text:d.replace("http://","")}));b(f).prepend(g);
return true}})});steal.loaded("app/controllers/url/seo.js");
steal("jquery","app/tools/cookie.js",function(){window.URLSHORTENER={defaults:{init:function(b){function a(){if(NL_APP_DATA.controller=="index"&&NL_APP_DATA.action=="show")Cookie.set("auth_from_theme",LinkData.isMobile?LinkData.parentTheme:LinkData.curTheme,{expires:0,path:"/"})}var d=Cookie.get(NL_APP_DATA.sessCookieName);if(Cookie.get("SYNC")!=1&&d&&window.crossDomainData!=undefined&&!$("#srsid_iframe").length){var f=location.host==window.crossDomainData.notlurking?window.crossDomainData.linkis:
window.crossDomainData.notlurking;(new Image).src="http://"+f+"/crossauth/"+d;Cookie.set("SYNC","1",{expires:7,path:"/"})}$(document).ajaxComplete(function(k,o){if(o.getResponseHeader("Content-Type")=="application/json"){k=$.parseJSON(o.responseText);if(k!=null&&k.debug!==undefined&&k.debug.counters!==undefined)if(window.PhpHihit!==undefined){__log("-------- PHP Ajax Counters --------");for(var s in k.debug.counters)__log("HitInformer: "+s+" : "+k.debug.counters[s]);__log("-------- End PHP Ajax Counters --------")}}});
if(window.PhpHihit!==undefined){__log("-------- PHP Counters --------");for(var g in window.PhpHihit)__log("HitInformer: "+g+" : "+window.PhpHihit[g]);__log("-------- End PHP Counters --------")}$(".btn-signin-tw, .js-btn-signin-tw").click(function(k){k.preventDefault();k={};if($(this).data("suggest"))k.query="adlessesuggest=1";a();window.twAuth(customAuthRedirect,k)});$(".btn-signin-fb").click(function(k){k.preventDefault();a();window.fbAuth(customAuthRedirect)});if(!b){$("body").app_tools_placeholder().app_tools_popup();
$("#top-panel .user span").click(function(){$("#user-menu").toggle()});$(".switch.native, .switcher.native").each(function(k,o){k=$(o);k.children("input:checkbox").attr("checked")&&k.addClass("switch-on")});$(document).on("click",".switch.native, .switcher.native",function(){var k=$(this);if(!k.hasClass("switch-disabled")){k.toggleClass("switch-on");k.children("input:checkbox").attr("checked",k.hasClass("switch-on")).change()}});$(".js-tw-disabled-notify").click(function(k){k.preventDefault();$(this).parent().hide();
$("body").removeClass("twitter-ban-fix");$.cookie("close_tw_disabled_notify","1",{expires:7,path:"/"})});applyPageController("app_common_userbox")}window.HELPER.clearCounters();"maxlength"in document.createElement("textarea")||$("textarea[maxlength]").keyup(function(){var k=$(this),o=parseInt(k.attr("maxlength")),s=k.val();s.length>o&&k.val(s.substr(0,o))});$.browser.name=="msie"&&$("body").addClass("msie")}},index:{index:function(){hihit(1735);Ga.getGaq().push(["_trackPageview"]);applyPageController("app_index_index",
"app/controllers/index/index/index.js");applyPageController("app_index_index_short_form","app/controllers/index/index/short_form.js")},show:function(){var b="AW_visit_"+LinkData.id;if(LinkData.visitFromTwitter)if(!Cookie.get(b)){LinkData.is_author?hihit(3112):hihit(3113);Cookie.set(b,1,{expires:1,path:"/"})}hihit(1736);lnEvent("show",LinkData.graylistLabel);if(LinkData.saveClientStat){b=window.getBroswer();var a=["get","","ajax","update-click"];$[a.shift()](a.join("/"),{id:LinkData.id,browser:b.name,
browser_version:b.version})}b="app_show_theme"+LinkData.curTheme;a="app/show/theme"+LinkData.curTheme+"/show.js";if(parseInt(LinkData.appleStoreRedirect)==1&&!LinkData.isLogged&&!$.cookie("apple_store")&&navigator.userAgent.match(/iPhone|iPad|iPod/i)){$.cookie("apple_store",1,{expires:1});hihit(3111);setTimeout(function(){window.location.href="http://app.appsflyer.com/id441457218?pid=linkis"},300)}applyPageController(b,a,{loadPopupManager:1})},bookmarklet:function(){applyPageController("app_index_bookmarklet",
"app/controllers/index/bookmark/bookmarklet.js")},bookmarkletcreate:function(){applyPageController("app_index_bookmark","app/controllers/index/bookmark/bookmark.js")},landing:function(){applyPageController("app_index_landing","app/controllers/index/landing/landing.js")},caption:function(){applyPageController("app_index_captions")},invalid:function(){$.get("/index/save-client-stat/type/1",{stat:window.NL_APP_DATA.stat_id||""});hihit(2434)},banned:function(){hihit(2435)},stat:function(){},debug:function(){window.DebugPage.init()}},
user:{settings:function(){applyPageController("app_user_settings","app/controllers/user/settings/settings.js")},themes:function(){applyPageController("app_user_themes","app/controllers/user/themes/themes.js")}},history:{mylinks:function(){Ga.getGaq().push(["_trackPageview"]);var b=User.isAuthorized()?"app_history_mylinks_user":"app_history_mylinks_guest";applyPageController(b)}},url:{"seo-link":function(){hihit(3602);applyPageController("app_url_seo","app/controllers/url/seo.js")},"beta-seo-link":function(){hihit(3602);
applyPageController("app_url_seo","app/controllers/url/seo.js")},"seo-domain":function(){hihit(3604)}},plugin:{index:function(){applyPageController("app_plugin_index","app/controllers/plugin/index.js")},install:function(){setTimeout(function(){window.location.href="/plugin/postinstall"},1100)},postinstall:function(){hihit(3145);applyPageController("app_plugin_postinstall","app/controllers/plugin/postinstall.js")},automation:function(){applyPageController("app_plugin_postinstall","app/controllers/plugin/postinstall.js")},
post:function(){applyPageController("app_plugin_postinstall","app/controllers/plugin/postinstall.js")}}}});steal.loaded("app/tools/urlshortener.js");
steal("jquery/class","app/tools/message.js").then(function(){Message("SettingsMessage",{TYPE_ERROR:"message-wrapper message-error",TYPE_SUCCESS:"message-wrapper message-success",MESSAGE_CONTAINER:".js-message-container",ELEMENT_ERROR_CLASS:"input-error",addPrefix:function(b,a){if(a==this.TYPE_ERROR)b='<span class="message-type">'+LNG["messages.error"]+"</span>"+b;return b}},{showAndHide:function(b,a,d,f,g,k){k=k||function(){};if(typeof g=="number")this.delayTime=g;f&&a==SettingsMessage.TYPE_ERROR&&
this.processInputElement(f);this.show(b,a,d);this.delay(k)},processInputElement:function(b){b.addClass(SettingsMessage.ELEMENT_ERROR_CLASS);this.delay(function(){b.removeClass(SettingsMessage.ELEMENT_ERROR_CLASS)})}})});steal.loaded("app/tools/settings-message.js");
window.PluginDownloader={trackDownload:function(b,a,d){if(typeof ga!="undefined"){ga("send","event","download",a);d!=""&&ga("send","event","landing-facebook","click-download-plugin")}return false},delayedDownload:function(b,a,d){this.trackDownload(b,a,d);setTimeout(function(){document.location=b.href},300);return false},chromeInstall:function(b,a){this.trackDownload(this,"Chrome",a);try{chrome.webstore.install(b);return false}catch(d){return true}},_showInstallTutor:function(){},downloadAndShowTutor:function(b,
a){window.location.href=b;setTimeout(function(){PluginDownloader._showInstallTutor(a)},500);return false}};steal.loaded("app/tools/plugin-downloader.js");
function trace(b,a){a=a==1?{clear:1}:a?a:{};var d=a.id||"vik-trace",f=document.getElementById(d)||function(){var k=document.createElement("DIV");k.id=d;k.style.cssText="position:fixed;max-width:600px;font-size:11px;line-height:14px;white-space:pre;z-index:1000;font-family:monospace;top:3px;right:0px;border:solid 5px #B7BEC4;background-color:#E7ECF0;padding:5px";if(a.boxCss)for(var o in a.boxCss)k.style[o]=a.boxCss[o];document.body.insertBefore(k,document.body.firstChild);var s=document.createElement("div");
s.style.cssText="position:absolute;top:-8px;right:-4px;color:white;font-size:9px;cursor:pointer;";s.innerHTML="x";s.onclick=function(){k.parentNode.removeChild(k);return false};k.appendChild(s);g=document.createElement("div");g.style.cssText="overflow:auto;padding-right:20px;padding-bottom:20px;position:relative;-moz-tab-size:4;-o-tab-size:4;";g.style.maxHeight=(window.innerHeight||window.outerHeight||700)-40+"px";if(a.contentCss)for(o in a.contentCss)g.style[o]=a.contentCss[o];k.appendChild(g);return k}();
f.style.display="block";if(a.fix===true||a.fix===1)f.style.position="fixed";if(a.fix===false||a.fix===0)f.style.position="absolute";var g=f.lastChild;if(a.clear)g.innerHTML="";f=document.createElement("div");if(b===null)f.appendChild(document.createTextNode("null"));else typeof b=="object"&&b.nodeName?f.appendChild(b):f.appendChild(document.createTextNode(b));g.appendChild(f);g.scrollTop=f.offsetTop}
function trace2(b,a){a=a==1?{clear:1}:a?a:{};a.id="vik-trace-left";a.boxCss={right:"auto",left:"0px"};a.contentCss={maxHeight:((window.innerHeight||window.outerHeight||700)-40)/2+"px"};trace(b,a)}function debug_print_backtrace(){try{throw new Error;}catch(b){var a=[];if(b.stacktrace){a=b.stacktrace.split("\n");a.shift();a.shift()}else if(b.stack){a=b.stack.split("\n");a.shift()}a="== STACK TRACE ==\n"+a.join("\n")+"\n\n";a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");console.log(b);trace(a)}}
function var_dump(b,a){var d=var_dump,f=function(na){optObj={depth:2,append:false,types:true,highlight:true,steps:true,expand:[],collapse:[],output:"trace",consoleTab:"var_dump",_lvl:0,_parent:null};if(na===1||na===true){optObj.output="return";return optObj}if(typeof na=="object"){for(var Da in na)optObj[Da]=na[Da];na.expand=na.expand?typeof na.expand=="string"?na.expand.split(","):na.expand:[];Da=0;for(var Ja=na.expand.length;Da<Ja;Da++)na.expand[na.expand[Da].toLowerCase()]=1;return optObj}if(typeof na==
"string"&&na.length){na=na.split(/\s+/);var Ka;for(Da=0;Da<na.length;Da++){Ka=na[Da].split(/\s*=\s*/);switch(Ka[0]){case "d":optObj.depth=parseInt(Ka[1])||5;break;case "a":optObj.append=true;break;case "A":optObj.append=false;break;case "t":optObj.types=true;break;case "T":optObj.types=false;break;case "h":optObj.highlight=true;break;case "H":optObj.highlight=false;break;case "s":optObj.steps=true;break;case "S":optObj.steps=false;break;case "e":Ka=(Ka[1]||"").replace(/\*/g,"all").split(",");for(Ja in Ka)optObj.expand[Ka[Ja]]=
1;break;case "E":Ka=(Ka[1]||"").replace(/\*/g,"all").split(",");for(Ja in Ka){subparams=Ka[Ja].split("/");optObj.collapse[subparams[0]]=subparams[1]||1}break;case "o":Ka=(Ka[1]||"").split("/");optObj.output={t:"trace",c:"console",r:"return",rd:"returnDOM",console:"console","return":"return"}[Ka[0]]||Ka[0];if(Ka[1])optObj.consoleTab=Ka[1];break}}}return optObj}(a);d.getOpts=function(){return f};d.extend=d.extend||function(){var na={};for(var Da in arguments)for(var Ja in arguments[Da])na[Ja]=arguments[Da][Ja];
return na};d.node=d.node||function(na,Da,Ja){na=document.createElement(na);for(var Ka in Da||{})if(Ka=="style")for(var ma in Da[Ka])na.style[ma]=Da[Ka][ma];else na[Ka]=Da[Ka];Ja&&na.appendChild(document.createTextNode(Ja));return na};d.textNode=d.textNode||function(na){return document.createTextNode(na)};d.strType=d.strType||function(na){return d.getOpts().types?d.node("span",{style:{color:"#C44",fontStyle:"italic",fontSize:"10px"}},na+" "):d.node("span")};d.simpleRow=d.simpleRow||function(na,Da){var Ja=
d.node("span");Ja.appendChild(d.strType(na));Ja.appendChild(d.textNode(Da));return Ja};d.isArray=d.isArray||function(na){return Object.prototype.toString.call(na)=="[object Array]"};d.htmlspecialchars=d.htmlspecialchars||function(na){na=na.replace(/</gi,"&lt;");return na=na.replace(/>/gi,"&gt;")};d.detectSpecObj=d.detectSpecObj||function(na,Da,Ja){Ja={type:null,text:0};var Ka=typeof na=="object";if(na===null){Ja.type="null";Ja.text="null"}else if(na===window){Ja.type="DOM window";Ja.text=Da.all||
Da.dom||Da.window?null:"( window )"}else if(na===document){Ja.type="DOM document";Ja.text=Da.all||Da.dom||Da.document?null:"( document )"}else if(Ka&&na.hasOwnProperty&&na.hasOwnProperty("nodeName")&&na.hasOwnProperty("innerHTML")){Ja.type="DOM tag";Ja.text=Da.all||Da.dom||Da.tags?null:na.toString()}else if(Ka&&na.jquery){Ja.type="jquery";Ja.text=Da.all||Da.jquery?null:"$("+(na.selector?'"'+na.selector+'"':na[0]?'"'+na[0].toString()+'"':"null")+") [length: "+na.length+"]"}else if(typeof na==="function"){Ja.type=
"function";Ja.text=Da.all||Da["function"]?null:"()"}return Ja};var g=f._parent?f._parent.parent:d.node("div"),k=f._parent?f._parent.node:d.node("div");g.appendChild(k);var o=d.detectSpecObj(b,f.expand);if(o.text)k.appendChild(d.simpleRow(o.type,o.text));else switch(typeof b){case "string":k.appendChild(d.simpleRow("string",'"'+b+'"'));break;case "number":k.appendChild(d.simpleRow("number",b||"0"));break;case "boolean":k.appendChild(d.simpleRow("bool",b?"true":"false"));break;case "undefined":k.appendChild(d.simpleRow("undefined",
"undefined"));break;case "function":k.appendChild(d.simpleRow("function",b.toString()));break;case "object":if((a=d.isArray(b))&&(f.collapse.all||f.collapse.array&&f._lvl+1>=f.collapse.array))k.appendChild(d.simpleRow("array","[ "+b.join(", ")+" ]"));else{o=a?"array":o.type||"object";a=a?["[","]"]:["{","}"];if(f._lvl>=f.depth){var s=d.node("span");s.appendChild(d.strType(o));s.appendChild(d.node("span",{style:{color:"#2998ED",cursor:"pointer",fontWeight:"bold"},title:"click to expand",onclick:function(){k.removeChild(s);
var_dump(b,d.extend(f,{depth:f.depth+2,_lvl:f._lvl+1,_parent:{node:k,parent:g}}))}},"{..}"));k.appendChild(s)}else{k.appendChild(d.strType(o));k.appendChild(d.textNode(a[0]));o=[];var A,G,H={style:{borderLeft:"solid 1px #DDD",marginLeft:"16px"}};if(f.highlight){H.onmouseover=function(){this.style.backgroundColor="#DBE6F2";this.style.borderLeftColor="#E57777"};H.onmouseout=function(){this.style.backgroundColor="transparent";this.style.borderLeftColor="#DDD"}}for(var V in b){A=d.node("div",H);G=d.node("div");
G.appendChild(d.textNode(V+" => "));try{b[V]===b?G.appendChild(d.node("span",{style:{color:"#B99"}},"*RECURSION*")):var_dump(b[V],d.extend(f,{_lvl:f._lvl+1,_parent:{node:G,parent:A}}))}catch(ia){G.appendChild(d.node("span",{style:{color:"#F55"}},"*ERROR ["+ia+"]*"))}o.push(A)}if(o.length){for(V=0;V<o.length;V++)g.appendChild(o[V]);V=d.node("div");V.appendChild(d.textNode(a[1]));g.appendChild(V)}else k.appendChild(d.textNode(a[1]))}}break;default:k.appendChild(d.strType(typeof b));if(b.toString)try{k.appendChild(d.node("span",
{},b.toString()))}catch(ha){k.appendChild(d.node("span",{style:{color:"#F55"}},"*ERROR ["+ha+"]*"))}}if(f._parent)return null;switch(f.output){case "returnDOM":return g;case "return":return g.innerHTML;case "console":VikDebug.print(g,optObj.consoleTab,f.append?null:1);break;default:trace(g,f.append?null:1)}}steal.loaded("app/tools/debug.js");
steal("jquery","jquery/lang/string",function(b){var a=false,d=b.makeArray,f=b.isFunction,g=b.isArray,k=b.extend,o=b.String.getObject,s=function(H,V){return H.concat(d(V))},A=/xyz/.test(function(){})?/\b_super\b/:/.*/,G=function(H,V,ia){ia=ia||H;for(var ha in H)ia[ha]=f(H[ha])&&f(V[ha])&&A.test(H[ha])?function(na,Da){return function(){var Ja=this._super,Ka;this._super=V[na];Ka=Da.apply(this,arguments);this._super=Ja;return Ka}}(ha,H[ha]):H[ha]};clss=b.Class=function(){if(arguments.length)return clss.extend.apply(clss,
arguments)};k(clss,{proxy:function(H){var V=d(arguments),ia;H=V.shift();g(H)||(H=[H]);ia=this;return function(){for(var ha=s(V,arguments),na,Da=H.length,Ja=0,Ka;Ja<Da;Ja++)if(Ka=H[Ja]){if((na=typeof Ka=="string")&&ia._set_called)ia.called=Ka;ha=(na?ia[Ka]:Ka).apply(ia,ha||[]);if(Ja<Da-1)ha=!g(ha)||ha._use_call?[ha]:ha}return ha}},newInstance:function(){var H=this.rawInstance(),V;if(H.setup)V=H.setup.apply(H,arguments);if(H.init)H.init.apply(H,g(V)?V:arguments);return H},setup:function(H){this.defaults=
k(true,{},H.defaults,this.defaults);return arguments},rawInstance:function(){a=true;var H=new this;a=false;return H},extend:function(H,V,ia){function ha(){if(!a)return this.constructor!==ha&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}if(typeof H!="string"){ia=V;V=H;H=null}if(!ia){ia=V;V=null}ia=ia||{};var na=this,Da=this.prototype,Ja,Ka,ma,O;a=true;O=new this;a=false;G(ia,Da,O);for(Ja in this)if(this.hasOwnProperty(Ja))ha[Ja]=
this[Ja];G(V,this,ha);if(H){ma=H.split(/\./);Ka=ma.pop();ma=Da=o(ma.join("."),window,true);Da[Ka]=ha}k(ha,{prototype:O,namespace:ma,shortName:Ka,constructor:ha,fullName:H});ha.prototype.Class=ha.prototype.constructor=ha;Ka=ha.setup.apply(ha,s([na],arguments));if(ha.init)ha.init.apply(ha,Ka||s([na],arguments));return ha}});clss.callback=clss.prototype.callback=clss.prototype.proxy=clss.proxy})();steal.loaded("jquery/class/class.js");
steal("jquery").then(function(b){var a={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},d=function(o,s,A){return o[s]!==undefined?o[s]:A&&(o[s]={})},f=function(o){var s=typeof o;return o&&(s=="function"||s=="object")},g,k=b.String=b.extend(b.String||{},{getObject:g=function(o,s,A){o=o?o.split(a.dot):[];var G=o.length,H,V,ia,ha=0;s=b.isArray(s)?s:[s||window];if(G==0)return s[0];for(;H=s[ha++];){for(ia=0;ia<
G-1&&f(H);ia++)H=d(H,o[ia],A);if(f(H)){V=d(H,o[ia],A);if(V!==undefined){A===false&&delete H[o[ia]];return V}}}},capitalize:function(o){return o.charAt(0).toUpperCase()+o.substr(1)},camelize:function(o){o=k.classize(o);return o.charAt(0).toLowerCase()+o.substr(1)},classize:function(o,s){o=o.split(a.undHash);for(var A=0;A<o.length;A++)o[A]=k.capitalize(o[A]);return o.join(s||"")},niceName:function(o){return k.classize(o," ")},underscore:function(o){return o.replace(a.colons,"/").replace(a.words,"$1_$2").replace(a.lowUp,
"$1_$2").replace(a.dash,"_").toLowerCase()},sub:function(o,s,A){var G=[];A=typeof A=="boolean"?!A:A;G.push(o.replace(a.replacer,function(H,V){H=g(V,s,A);if(f(H)){G.push(H);return""}else return""+H}));return G.length<=1?G[0]:G},_regs:a})});steal.loaded("jquery/lang/string/string.js");
steal("jquery/class","jquery/lang/string","jquery/event/destroyed",function(b){var a=function(oa,va,ja){var Ca,Xa=oa.bind&&oa.unbind?oa:b(g(oa)?[oa]:oa);if(va.indexOf(">")===0){va=va.substr(1);Ca=function(hb){hb.target===oa&&ja.apply(this,arguments)}}Xa.bind(va,Ca||ja);return function(){Xa.unbind(va,Ca||ja);oa=va=ja=Ca=null}},d=b.makeArray,f=b.isArray,g=b.isFunction,k=b.extend,o=b.String,s=b.each,A=Array.prototype.slice,G=function(oa,va,ja,Ca){var Xa=oa.delegate&&oa.undelegate?oa:b(g(oa)?[oa]:oa);
Xa.delegate(va,ja,Ca);return function(){Xa.undelegate(va,ja,Ca);Xa=oa=ja=Ca=va=null}},H=function(oa,va,ja,Ca){return Ca?G(oa,Ca,va,ja):a(oa,va,ja)},V=function(oa,va){var ja=typeof va=="string"?oa[va]:va;return function(){oa.called=va;return ja.apply(oa,[this.nodeName?b(this):this].concat(A.call(arguments,0)))}},ia=/\./g,ha=/_?controllers?/ig,na=function(oa){return o.underscore(oa.replace("jQuery.","").replace(ia,"_").replace(ha,""))},Da=/[^\w]/,Ja=/\{([^\}]+)\}/g,Ka=/^(?:(.*?)\s)?([\w\.\:>]+)$/,ma,
O=function(oa,va){return b.data(oa,"controllers",va)};b.Class("jQuery.Controller",{setup:function(){this._super.apply(this,arguments);if(!(!this.shortName||this.fullName=="jQuery.Controller")){this._fullName=na(this.fullName);this._shortName=na(this.shortName);var oa=this,va=this.pluginName||this._fullName,ja;b.fn[va]||(b.fn[va]=function(Ca){var Xa=d(arguments),hb=typeof Ca=="string"&&g(oa.prototype[Ca]),fb=Xa[0];return this.each(function(){var Sb=O(this);if(Sb=Sb&&Sb[va])hb?Sb[fb].apply(Sb,Xa.slice(1)):
Sb.update.apply(Sb,Xa);else oa.newInstance.apply(oa,[this].concat(Xa))})});this.actions={};for(ja in this.prototype)if(!(ja=="constructor"||!g(this.prototype[ja])))if(this._isAction(ja))this.actions[ja]=this._action(ja)}},hookup:function(oa){return new this(oa)},_isAction:function(oa){return Da.test(oa)?true:b.inArray(oa,this.listensTo)>-1||b.event.special[oa]||ca[oa]},_action:function(oa,va){Ja.lastIndex=0;if(!va&&Ja.test(oa))return null;oa=va?o.sub(oa,[va,window]):oa;va=f(oa);var ja=(va?oa[1]:oa).match(Ka);
return{processor:ca[ja[2]]||ma,parts:ja,delegate:va?oa[0]:undefined}},processors:{},listensTo:[],defaults:{}},{setup:function(oa,va){var ja=this.constructor;oa=(typeof oa=="string"?b(oa):oa.jquery?oa:[oa])[0];var Ca=ja.pluginName||ja._fullName;this.element=b(oa).addClass(Ca);(O(oa)||O(oa,{}))[Ca]=this;this.options=k(k(true,{},ja.defaults),va);this.called="init";this.bind();return[this.element,this.options].concat(d(arguments).slice(2))},bind:function(oa,va,ja){if(oa===undefined){this._bindings=[];
oa=this.constructor;va=this._bindings;ja=oa.actions;var Ca=this.element;for(funcName in ja)if(ja.hasOwnProperty(funcName)){ready=ja[funcName]||oa._action(funcName,this.options);va.push(ready.processor(ready.delegate||Ca,ready.parts[2],ready.parts[1],funcName,this))}var Xa=V(this,"destroy");Ca.bind("destroyed",Xa);va.push(function(hb){b(hb).unbind("destroyed",Xa)});return va.length}if(typeof oa=="string"){ja=va;va=oa;oa=this.element}return this._binder(oa,va,ja)},_binder:function(oa,va,ja,Ca){if(typeof ja==
"string")ja=V(this,ja);this._bindings.push(H(oa,va,ja,Ca));return this._bindings.length},_unbind:function(){var oa=this.element[0];s(this._bindings,function(va,ja){ja(oa)});this._bindings=[]},delegate:function(oa,va,ja,Ca){if(typeof oa=="string"){Ca=ja;ja=va;va=oa;oa=this.element}return this._binder(oa,ja,Ca,va)},update:function(oa){k(this.options,oa);this._unbind();this.bind()},destroy:function(){if(this._destroyed)throw this.constructor.shortName+" controller already deleted";var oa=this.constructor.pluginName||
this.constructor._fullName;this._destroyed=true;this.element.removeClass(oa);this._unbind();delete this._actions;delete this.element.data("controllers")[oa];b(this).triggerHandler("destroyed");this.element=null},find:function(oa){return this.element.find(oa)},_set_called:true});var ca=b.Controller.processors;ma=function(oa,va,ja,Ca,Xa){return H(oa,va,V(Xa,Ca),ja)};s("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),
function(oa,va){ca[va]=ma});var xa,Ma=function(oa,va){for(xa=0;xa<va.length;xa++)if(typeof va[xa]=="string"?oa.constructor._shortName==va[xa]:oa instanceof va[xa])return true;return false};b.fn.extend({controllers:function(){var oa=d(arguments),va=[],ja,Ca,Xa;this.each(function(){ja=b.data(this,"controllers");for(Xa in ja)if(ja.hasOwnProperty(Xa)){Ca=ja[Xa];if(!oa.length||Ma(Ca,oa))va.push(Ca)}});return va},controller:function(){return this.controllers.apply(this,arguments)[0]}})});steal.loaded("jquery/controller/controller.js");
steal("jquery/event").then(function(b){var a=jQuery.cleanData;b.cleanData=function(d){for(var f=0,g;(g=d[f])!==undefined;f++)b(g).triggerHandler("destroyed");a(d)}});steal.loaded("jquery/event/destroyed/destroyed.js");steal("jquery");steal.loaded("jquery/event/event.js");
steal("jquery/controller",function(b){b.Controller("App.OpenWindowController",{defaults:{width:700,height:500,url:"",title:"",callerController:null}},{init:function(){var a=(b(window).width()-this.options.width)/2,d=(b(window).height()-this.options.height)/2;a=window.open(this.options.url,this.options.title,"status=1,width="+this.options.width+",height="+this.options.height+",top="+d+",left="+a);!a&&this.options.callerController?this.options.callerController.showError(LNG["js.tools.blocker"]):a.focus()}})});
steal.loaded("app/tools/open_window/open_window.js");
steal("jquery/class","app/classes/popup-loader.js").then(function(b){b.Class("PopupSM",{popupBox:b(".modal-popup"),popupWindow:null,header:null,description:null,activePopup:null,previousPopup:null,depth:0,loaded:{},popupsMap:{indexVideo:function(){return new App.Index.Popup.Video(".js-index-video")},photoUpload:function(){return new App.Settings.Popup.PhotoUpload(".js-photo-upload")},userSettings:function(){return new App.Settings.Popup.UserSettings(".js-user-settings")},themePreview:function(){return new App.Settings.Popup.ThemePreview(".js-theme-preview")},
changeLinkTheme:function(){return new App.Mylinks.Popup.ChangeTheme(".js-change-link-theme")},bookmarklet:function(){return new App.Index.Popup.Bookmarklet(".js-bookmarklet")},myLinksReplies:function(a){return new App.MyLinks.Popup.LinkReplies(".js-link-replies",a)},themeColors:function(){return new App.Settings.Popup.ThemeChooseColor(".js-theme-choose-color")},plugin1_install:function(){return PopupSM._loader(App.Show.PluginInstall,{version:"v1"})},plugin2_learnWhite:function(){return PopupSM._loader(App.Show.PluginInstall,
{version:"v2_white"})},plugin2_learnColor:function(){return PopupSM._loader(App.Show.PluginInstall,{version:"v2_color"})},plugin3_installWhite:function(){return PopupSM._loader(App.Show.PluginInstall,{version:"v3_white"})},plugin3_installColor:function(){return PopupSM._loader(App.Show.PluginInstall,{version:"v3_color"})},aw1:function(){return PopupSM._loader(App.Show.Aw1)},iframeFail:function(){return PopupSM._loader(App.Show.IframeFail)},linkStats:function(){return PopupSM._loader(App.Show.Chart)},
infoblock:function(){return PopupSM._loader(App.Show.Infoblock)},welcome:function(){return PopupSM._loader(App.Show.WellDone)},welcomeTweetEdit:function(){return PopupSM._loader(App.Show.WellDoneSilentEdit)},welcomeTweet:function(){return PopupSM._loader(App.Show.SilentTweet,{mode:"welcome"})},welcomeTweetAndReply:function(){return PopupSM._loader(App.Show.SilentTweetAndReply,{mode:"welcome"})},welcomeAutopost:function(){return PopupSM._loader(App.Show.SilentAutopost,{mode:"welcome",version:"v1"})},
welcomeAutopostV2:function(){return PopupSM._loader(App.Show.SilentAutopost,{mode:"welcome",version:"v2"})},welcomeAutopostV3:function(){return PopupSM._loader(App.Show.SilentAutopost,{mode:"welcome",version:"v3"})},comebackTweet:function(){return PopupSM._loader(App.Show.SilentTweet,{mode:"comeback"})},comebackTweetAndReply:function(){return PopupSM._loader(App.Show.SilentTweetAndReply,{mode:"comeback"})},comebackTweetEdit:function(){return PopupSM._loader(App.Show.SilentTweetEdit)},comebackAutopost:function(){return PopupSM._loader(App.Show.SilentAutopost,
{mode:"comeback",version:"v1"})},comebackAutopostV2:function(){return PopupSM._loader(App.Show.SilentAutopost,{mode:"comeback",version:"v2"})},comebackAutopostV3:function(){return PopupSM._loader(App.Show.SilentAutopost,{mode:"comeback",version:"v3"})}},_loader:function(a,d){return new App.Class.PopupLoader(a,d)},init:function(){var a=this;this.popupWindow=b(".modal-popup .popup-holder");this.header=this.popupWindow.find(".popup-header h3");this.description=this.popupWindow.find(".popup-header .js-theme-description");
this.popupBox.on("click",".popup-close, .js-popup-close",function(){a.activePopup.hide()});b(window).resize(function(){a.activePopup!==undefined&&a.activePopup!==null&&a.activePopup._centrify()});b(window).on("keydown",function(d){d.keyCode==27&&a.closeActive()});this.popupBox.on("click",function(d){a.popupBox.get(0)==b(d.target).get(0)&&a.activePopup.hide()})},get:function(a,d){if(!this.loaded[a]){if(!this.popupsMap[a])throw new Error("Popup '"+a+"' not found");try{this.loaded[a]=this.popupsMap[a](d)}catch(f){}}return this.loaded[a]},
closeModal:function(){this.popupBox.hide();this.previousPopup=this.activePopup=null;this.depth=0},closeActive:function(){this.activePopup!==undefined&&this.activePopup!==null&&this.activePopup.hide()},centrifyActive:function(){this.activePopup!==undefined&&this.activePopup!==null&&this.activePopup._centrify()},setHeader:function(a){this.header.html(a)},setDescription:function(a){this.description.text(a)},isMobile:function(){return{andriod:navigator.userAgent.match(/Android/i),blackberry:navigator.userAgent.match(/BlackBerry/i),
ios:navigator.userAgent.match(/iPhone|iPad|iPod/i),opera:navigator.userAgent.match(/Opera Mini/i),windows:navigator.userAgent.match(/IEMobile/i),any:navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i)}},getRandom:function(a){for(var d,f,g,k=a.length,o=0;o<k;o++){if(!a.length)return null;d=Math.floor(Math.random()*a.length);f=a[d];if(f instanceof
App.Show.Popup)return f;else{try{g=this.get(f)}catch(s){return null}if(g)return g;else a.splice(d,1)}}},debug:function(){var a=b("#test-popups-panel-content");a.find(".load").remove();a.append(b('<b style="margin: 10px 0;">secondary</b><br>'));b.each(PopupSM.popupsMap,function(d){try{if(PopupSM.get(d)){var f=b('<a href="#">'+d+"</a>").click(function(k){k.preventDefault();PopupSM.get(d).show()});a.append(f).append("<br>")}}catch(g){}})}},{})});steal.loaded("app/tools/secondary-popup-manager.js");
steal("jquery/class",function(b){b.Class("App.Class.PopupLoader",{popupClass:null,popupOptions:{},popupInstance:null,init:function(a,d){this.popupClass=a;this.popupOptions=d||{}},show:function(){var a=arguments;this.getPopupInstance(function(d){d.show.apply(d,a)})},hide:function(){var a=arguments;this.getPopupInstance(function(d){d.hide.apply(d,a)})},getPopupInstance:function(a){var d=this;if(this.popupInstance)a&&a(this.popupInstance);else if(this.popupClass.request)this.popupClass.loadHtml(function(f){d.popupInstance=
f;a&&a(f)},this.popupOptions);else{this.popupInstance=this.popupClass.create(this.popupOptions);a&&a(this.popupInstance)}}})});steal.loaded("app/classes/popup-loader.js");steal("jquery/controller","app/show/theme3/settings_poll.js",function(){App.Show.Theme3.SettingsPoll("App.IndexBookmark.SettingsPoll",{defaults:{pollSettingTpl:"/js/app/controllers/index/bookmark/views/poll-settings.ejs",enableAnswersHiding:false}},{init:function(b,a){this._super(b,a)}})});steal.loaded("app/controllers/index/bookmark/settings_poll.js");
steal("jquery/controller","app/popups/secondary-popup.js",function(b){App.SecondaryPopup("App.Index.Popup.Bookmarklet",{hideCloseBtn:true,showCustomHeader:true,_addClass:"popup-bookmarklet",init:function(){LinkData.needRefetch&&this.refetchMetadata()},refetchMetadata:function(){var a=this;b.get("/index/fetch-metadata",{short_url:LinkData.shortUrl},function(d){d.success&&d.title&&b.trim(d.title)&&a.find(".js-link-title").text(d.title)})},onHide:function(){try{parent.postMessage("close_popup",window.sentUrl)}catch(a){}},
hideHeader:function(){this.find(".js-custom-header").hide()},".js-share-link-post click":function(a,d){d.preventDefault();a.closest("form").submit()},".js-theme-chooser click":function(){var a=b(".js-themes");a.hasClass("opened")?a.removeClass("opened").addClass("closed"):a.removeClass("closed").addClass("opened")},".js-themes-list > a click":function(a){var d=b(".js-themes-list > a");a.data("id");d.removeClass("selected");a.addClass("selected");b(".js-theme-chooser-p").html(a.text())},"{window} click":function(a,
d){if(!b(d.target).hasClass("js-theme-chooser")&&b(d.target).closest(".js-theme-chooser").length===0){a=b(".js-themes");a.hasClass("opened")&&a.removeClass("opened")}}})});steal.loaded("app/controllers/index/bookmark/popups/bookmarklet.js");steal("jquery/controller","app/show/likes.js",function(){App.Show.Likes("App.Show.Theme3.Likes",{},{})});steal.loaded("app/show/theme3/likes.js");
steal("jquery/controller","jquery/view","jquery/view/ejs","app/show/poll.js",function(b){App.Show.Poll("App.Show.Theme3.Poll",{defaults:{onchange:function(){}}},{pollData:null,init:function(){this._super();!this.forceFormMode&&pollShowOnStartup&&this.show();this.setInnerHtml(pollInitData,true)},show:function(){var a=this.find(".show-poll"),d=this.element.closest(".hider");d.length||(d=this.find(".hider"));d.slideDown(Registry.getController("show").defaultSlideSpeed,function(){a.text(LNG["poll.hidePoll"])});
this.isShowed=true},hide:function(){var a=this.find(".show-poll"),d=this.element.closest(".hider");d.length||(d=this.find(".hider"));d.slideUp(Registry.getController("show").defaultSlideSpeed,function(){a.text(LNG["poll.showPoll"])});this.isShowed=false},mouseenter:function(){if(this.closeTimer){clearTimeout(this.closeTimer);this.closeTimer=null}this._super()},showAnswerError:function(a){b("form.add-answer").addClass("with-alert");this.answerErrorMessage.showAndHide(a,Message.TYPE_ERROR,function(){b("form.add-answer").removeClass("with-alert")})},
update:function(a){this.find(".js-question-text").text(a.question);this.find(".stat-values").css("visibility",a.numVotes?"visible":"hidden");this.find(".js-answers-num-str").text(a.numAnswers);this.find(".js-votes-num-str").text(a.numVoters);this.setInnerHtml(a)},setInnerHtml:function(a,d){this.scrollApi&&this.scrollApi.destroy();this.resultMode=a.resultMode;this.pollData=a;var f=this._getTpl();this.element.find(".inner-html").html(f,a);this.applyScrolling();d||Registry.getController("show").settingsPoll.setInnerHtml(a);
this.forceFormMode&&Registry.getController("show").poll.setInnerHtml(a);this.updateStat(a.numVotes)},updateStat:function(a){a=a+" "+(a==1?"vote":"votes");this.find(".js-votes-num").html(a)},_getTpl:function(){return"/js/app/show/theme3/views/"+(this.resultMode?"poll-voted.ejs":"poll.ejs")},hideAddAnswer:function(){this._super();b("form.add-answer").removeClass("with-alert")}})});steal.loaded("app/show/theme3/poll.js");
steal("jquery/controller","jquery/view","jquery/view/ejs","app/show/theme3/poll.js",function(b){b.Controller("App.Show.Theme3.SettingsPoll",{defaults:{pollSettingTpl:"/js/app/show/theme3/views/poll-settings.ejs",enableAnswersHiding:true}},{actions:[],newAnswers:[],scrollApi:null,init:function(a,d){this.options=b.extend(this.options,d);this.setInnerHtml(pollInitData)},".tool click":function(a,d){d.preventDefault();d.stopPropagation();if(a[0].tagName.toLowerCase()=="a"){d=a.attr("rel");var f=a.closest(".option");
a=a.closest(".answer-item");var g=a.data("new-answer"),k=a.data("answer-index");a=a.data("answer-id");if(f&&d){switch(d){case "hide":f.addClass("hidden").show().appendTo(".js-options-hidden");f.find("answer-item").addClass(".another-ans");f.find(".tool.hide").removeClass("hide").addClass("unhide").attr({rel:"unhide",title:"Unhide"}).html("Unhide");this.find(".inactive-ans-toggle").show();break;case "unhide":f.removeClass("hidden").appendTo(".js-options-visible");f.find("answer-item").removeClass(".another-ans");
f.find(".tool.unhide").removeClass("unhide").addClass("hide").attr({rel:"hide",title:"hide"}).html("Hide");this.find(".js-options-hidden").children().length||this.find(".inactive-ans-toggle").hide();break;case "delete":f.remove();g&&delete this.newAnswers[k];this.find(".js-options-hidden").children().length||this.find(".inactive-ans-toggle").hide();break}this._applyScrolling();if(g){if(d=="hide"||d=="unhide")this.newAnswers[k].visible=d=="hide"?0:1}else{if(d=="hide"||d=="unhide"){f=b.inArray(a+"-"+
(d=="hide"?"unhide":"hide"),this.actions);if(f>-1){this.actions.splice(f,1);return}}else if(d=="delete"){f=b.inArray(a+"-hide",this.actions);g=b.inArray(a+"-unhide",this.actions);if(f>-1||g>-1){f>-1&&this.actions.splice(f,1);g>-1&&this.actions.splice(g,1)}}this.actions.push(a+"-"+d)}this.onchange()}}},".js-add-own-answer click":function(a,d){d.preventDefault();this.find(".js-add-own-answer-box").show().find("input").focus()},".js-add-own-answer-box input[name='own-answer'] keypress":function(a,d){if(d.keyCode==
13){d.preventDefault();this._addNewAnswer()}},".js-add-own-answer-box input[name='own-answer'] blur":function(){this._addNewAnswer()},".inactive-ans-toggle click":function(){this.find(".js-options-hidden").toggle();this._applyScrolling()},_addNewAnswer:function(){var a=this.find('input[name="own-answer"]'),d=b.trim(a.val());a.val("");if(d.length){a=this.newAnswers.length;this.newAnswers[a]={answer:d,visible:1};a=b('<div class="answer-item checkbox" data-new-answer="1" data-answer-index="'+a+'" />').append('<a class="tool delete" href="#" title="Delete" rel="delete">Delete</a>');
this.options.enableAnswersHiding&&a.append('<a class="tool hide" href="#" title="Hide" rel="hide">Hide</a>');a.append('<p><span class="answer-text">'+d+"</span></p>");b('<div class="option" />').append(a).appendTo(this.find(".js-options-visible"));this._applyScrolling();this.find(".js-add-own-answer-box input").focus()}},setInnerHtml:function(a){var d=this.options.pollSettingTpl;this.find(".inner-html").html(d,a);this.find('[name="question"]').val(a.question);this.scrollApi=null;this._applyScrolling()},
onshow:function(){this._applyScrolling()},onchange:function(){var a=!this.find(".js-options-visible").children().length&&!this.find(".js-options-hidden").children().length;this.find(".empty-poll").css("display",a?"block":"none")},injectData:function(a){a.find('[name="poll_actions"]').val(this.getAssembledActions());this._addNewAnswer();for(var d=0;d<this.newAnswers.length;d++)this.newAnswers[d]&&a.append('<input type="hidden" class="new-ans-inp" name="new_answers['+d+'][answer]" value="'+this.newAnswers[d].answer+
'" />').append('<input type="hidden" class="new-ans-inp" name="new_answers['+d+'][visible]" value="'+this.newAnswers[d].visible+'" />')},reset:function(a){a.find('[name="poll_actions"]').val("");a.find(".new-ans-inp").remove();this.actions=[];this.newAnswers=[]},getAssembledActions:function(){return this.actions.join("|")},_applyScrolling:function(){var a=this.find(".options");if(a.length)if(this.scrollApi)this.scrollApi.reinitialise();else this.scrollApi=a.jScrollPane().data("jsp")}})});steal.loaded("app/show/theme3/settings_poll.js");
steal("jquery/controller","lib/jquery.zclip.js",function(b){b.Controller("App.CopyTextController",{defaults:{afterCopy:function(){},mouseEnter:function(){},copyText:"",indexPage:false}},{init:function(){var a=this;this.element.data("copy_text_enabled",1);this.element.zclip({path:"/js/lib/ZeroClipboard.swf",afterCopy:this.options.afterCopy,copy:function(){if(window.LinkData)switch(LinkData.curTheme){case Themes.THEME_1:hihit(1842);break;case Themes.THEME_2:hihit(1966);break;case Themes.THEME_3:hihit(1850);
break;case Themes.THEME_4:hihit(1976);break}return a.options.copyText||a.element.data("text")}});this.element.on("mouseenter",function(){a.options.mouseEnter(a.element)})},destroy:function(){this.element.zclip("remove");this._super()},mouseleave:function(a,d){d.stopPropagation()}})});steal.loaded("app/tools/copy_text/copy_text.js");
steal("jquery/controller","app/tools/copy_text","app/show/settings.js","app/show/poll.js","app/tools/common.js","app/models/caption.js","app/show/share.js","app/popups/chart.js","app/popups/plugin-install.js","app/popups/aw1.js","app/popups/iframe-fail.js","app/popups/well-done.js","app/popups/well-done-silent-edit.js","app/popups/silent-autopost.js","app/popups/silent-tweet-edit.js","app/popups/silent-tweet.js","app/popups/silent-tweet-and-reply.js",function(b){b.Controller("App.ShowBase.Controller",
{setIframeHeight:function(a){a=a==undefined?0:a;a=b(".top-panel").height()+a;var d=b(".notification").height();a=a+d;a=b(window).height()-a;b("#source_site").height(a)},initAllDesktopThemes:function(){}},{message:null,statsPopup:null,init:function(){Registry.setController("show",this);this.message=new Message;this.checkRedirect();this.checkNoticePanel();if(LinkData.graylistLabel==="instagram"){setInstaIframeSize();b(window).resize(function(){setInstaIframeSize()})}App.ShowBase.Controller.initAllDesktopThemes()},
checkRedirect:function(){if(typeof REDIRECT!="undefined"){var a=setTimeout('window.location = " '+REDIRECT+' "',3E3);b("#stop-redirect").live("click",function(d){d.preventDefault();clearTimeout(a)})}},".popup-auth-trigger click":function(a,d){d.preventDefault();Popup.Manager.show("auth")},".js-stats-social .js-social-link click":function(){this.sendClickStat("clicks_soc")},".js-rss-content a click":function(){this.sendClickStat("clicks_rss")},".js-promo-title, .js-promo-text-link, .js-promo-domain-link click":function(){this.sendClickStat("clicks_promo")},
sendClickStat:function(a){b.post("/ajax/save-personal-info-stats",{link_id:LinkData.id,type:a},function(){})},checkNoticePanel:function(){if(b("div").hasClass("notification")&&b("#balloon-box-popup").css("display")){var a=b("#balloon-box-popup"),d=parseInt(a.css("top"));parseInt(b(".notification").height());if(d>0){a.css("top",d+25+"px");b(".notification .close").click(function(){a.css("top",parseInt(a.css("top"))-25+"px")})}}},".js-view-stats click":function(a){if(a.hasClass("disabled"))return false;
if(!this.statsPopup)this.statsPopup=PopupSM.get("linkStats");this.statsPopup.show()},"#balloon-box-popup .close-balloon click":function(a){b(a).parent().fadeOut();b.cookie("stb",1,{expires:30,path:"/"})},"#balloon-box-popup .href-settings click":function(a,d){d.preventDefault();b(a).parent().parent().fadeOut();b.cookie("stb",1,{expires:30,path:"/"});window.location.href=b(a).attr("href")}})});steal.loaded("app/show/show_base.js");
steal("jquery/controller","app/controllers/index/index/short_form/checkboxes.js",function(b){b.Controller("App.Show.Settings",{},{init:function(){this.element.app_index_index_short_form_checkboxes({short_url:this.element.data("short-url"),enable_inheritance:this.element.data("enable-inheritance"),force:this.element.data("force"),enable_auth_poll:this.element.data("enable-auth-poll"),is_poll_supplemented:this.element.data("is-poll-supplemented")})}})});steal.loaded("app/show/settings.js");
steal("jquery/controller","app/tools/common.js","lib/jquery.jscrollpane.js","lib/wheel.js","jquery/dom/cookie","app/models/PollVoters.js",function(b){b.Controller("App.Show.Poll",{defaults:{onchange:function(){}}},{pollId:null,isOwner:null,resultMode:null,forceFormMode:null,questionEditMode:false,addAnswerMode:false,scrollApi:null,isD4:null,skipOneMouseleave:false,answerErrorMessage:null,pollPopupStatus:false,pollVotersModel:null,closeTimer:null,init:function(){this.pollId=this.element.data("poll-id");
this.isOwner=this.element.data("is-owner")?true:false;this.forceFormMode=this.element.data("force-form-mode")?true:false;this.resultMode=this.find(".options").hasClass("results");this.isD4=LinkData.curTheme==Themes.THEME_3;this.applyScrolling();LinkData.delayedActionComplete=="vote"&&Popup.show(Popup.TYPE_SHARE_ANSWER);if(!this.forceFormMode&&/^#?a\d+$/.test(location.hash)){this.element.removeClass("hidden-votes");var a=location.hash.replace(/\D/g,"");if(!b.cookie("blink_a"+a)){var d=this.find('.answer-item[data-answer-id="'+
a+'"]'),f=function(){f.iteration=f.iteration?f.iteration+1:1;d.toggleClass("blinked");f.iteration<6&&setTimeout(f,500)};b.cookie("blink_a"+a,1,{expires:1/24});setTimeout(f,1E3)}}this.answerErrorMessage=new Message;this.answerErrorMessage.setMessageContainer(".js-poll-answer-msg");this._initPollVoters()},mouseenter:function(){if(!this.forceFormMode){this.skipOneMouseleave=false;this.element.removeClass("hidden-votes")}},mouseleave:function(){if(!(this.forceFormMode||this.questionEditMode||this.addAnswerMode))if(this.skipOneMouseleave)this.skipOneMouseleave=
false;else{this.element.addClass("hidden-votes");this.pollVotersModel.showed&&this.pollVotersModel.hide()}},".opener click":function(a,d){if(!this.forceFormMode){d.preventDefault();this.element.toggleClass("hidden-votes")}},".question-edit-btn click":function(a,d){d.preventDefault();if(this.isD4&&this.questionEditMode)this.find(".question-edit-form").submit();else{this.element.addClass("question-edit-mode");this.questionEditMode=true;this.find(".question-edit-form textarea").val(this.find(".js-question-text").text()).focus()}},
".question-edit-form .cancel click":function(a,d){d.preventDefault();this.element.removeClass("question-edit-mode");this.questionEditMode=false;this.find(".question-edit-form textarea").val(this.find(".js-question-text").text())},".question-edit-form submit":function(a,d){d.preventDefault();var f=this,g=new Message;g.setMessageContainer(".js-poll-question-msg");d=b.trim(a.find('[name="question"]').val());if(d.length==0)g.showAndHide(LNG["poll.question.tooShort"],Message.TYPE_ERROR);else d.length>
255?g.showAndHide(LNG["poll.question.tooLong"],Message.TYPE_ERROR):b.post("/ajax/edit-vote-question",a.serialize(),function(k){if(k.success){f.element.removeClass("question-edit-mode");f.questionEditMode=false;f.find(".js-question-text").text(k.question);f.find(".question-edit-form textarea").val(k.question)}else g.showAndHide(k.error,Message.TYPE_ERROR)},"json")},".checkbox click":function(a,d){d.preventDefault();d=a.data("answer-id");var f=!a.hasClass("checked");this.vote(d,f,a)},_showShareForm:function(a){Registry.getController("share_answer").setCaption(this.getAssembledOwnAnswer(a)).show()},
".inactive-ans click":function(a,d){d.preventDefault();a=this.find(".option.hidden");a.is(":visible")?a.css("display","none"):a.css("display","block");this.reinitScrolling()},".add-answer textarea focus":function(){this.showAddAnswer()},"form.add-answer submit":function(a,d){d.preventDefault();d=0;switch(LinkData.curTheme){case Themes.THEME_1:d=1848;break;case Themes.THEME_2:d=1972;break;case Themes.THEME_3:d=1857;break;case Themes.THEME_4:d=1982;break}d&&hihit(d);var f=this;a=a.find('[name="answer"]');
var g=b.trim(a.val()),k=Registry.getController("show");this.answerErrorMessage.hide();if(a.val()===a.attr("placeholder"))f.showAnswerError(LNG["show.enterYourAnswer"]);else if(g.length<1)f.showAnswerError(LNG["poll.ownAnswer.tooShort"]);else if(g.length>=255)f.showAnswerError(LNG["poll.ownAnswer.tooLong"]);else if(LinkData.needSignIn){b.cookie("delayed_action","vote_add_ans|"+g);hihit(1957);this.skipOneMouseleave=true;Popup.show(Popup.TYPE_AUTH,true)}else b.post("/ajax/add-own-answer",{answer:g,shortLink:LinkData.shortUrl},
function(o){if(o.success){f.onchange(o);f.setInnerHtml(o.html);f._scrollToAnswer(f.find(".checkbox.checked"));f.find(".vote-for-view-msg").hide();Registry.lastVotedAnswerId=o.newAnswerId;k.showForcePopupOrigin=k.showForcePopup;k.showForcePopup=false;f.isOwner||Registry.getController("share_answer").setCaption(f.getAssembledOwnAnswer(g)).show();if(f.forceFormMode&&k.poll){k.poll.setInnerHtml(o.html);try{k.poll._scrollToAnswer(k.poll.find(".checkbox.checked"))}catch(s){}}f.skipOneMouseleave=true;setTimeout(function(){f.skipOneMouseleave=
false},1E3);f.hideAddAnswer()}else f.showAnswerError(o.error)},"json")},showAnswerError:function(a){this.answerErrorMessage.showAndHide(a,Message.TYPE_ERROR)},".add-answer .cancel click":function(a,d){d.preventDefault();a=this.find(".add-answer");this.hideAddAnswer();a.find('[name="answer"]').val("");this.skipOneMouseleave=true;d=a.parent();a.detach();a.appendTo(d)},".show-voters-btn click":function(a,d){d.preventDefault();d.stopPropagation();if(parseInt(a.data("votes-cnt"))){var f=this;d=a.closest(".answer-item").data("answer-id");
var g=b(this.element).find(".js-avatars"),k=b(this.element).find(".panel-itself").offset(),o=a.offset(),s=o.top-k.top+a.height()+5,A=o.left-k.left-g.width()+a.width()/2+3;this.pollVotersModel.showed?this.pollVotersModel.hide():b.get("/ajax/get-voters",{answerId:d,theme:LinkData.curTheme},function(G){G.success?f.pollVotersModel.setContent(G.data).setAvatarContainer(g).show(A,s):alert(G.error)},"json")}},".show-voters-btn mouseleave":function(){this.pollVotersModel.showed&&this.pollVotersModel.hide()},
".tool click":function(a,d){var f=this;d.preventDefault();d.stopPropagation();if(a[0].tagName.toLowerCase()=="a"){d=a.attr("rel");a=a.closest(".answer-item").data("answer-id");var g=LinkData.shortUrl,k=Registry.getController("show");d&&b.post("/ajax/poll-answer-change",{act:d,id:a,shortLink:g,pollId:this.pollId},function(o){if(o.success){f.setInnerHtml(o.html);f.onchange(o);f.forceFormMode&&k.poll&&k.poll.setInnerHtml(o.html)}else alert(o.error)})}},"{Popup} popup.onHide":function(a){if(a.getType()==
Popup.TYPE_SHARE_ANSWER){var d=this;d.closeTimer=setTimeout(function(){d.element.trigger("mouseleave");d.closeTimer=null},2E3)}},onchange:function(a){if(a.stat){this.find(".votes-num, .js-votes-num").html(a.stat.numVotes||"");this.find(".panel-insider")[a.stat.numVotes?"removeClass":"addClass"]("no-votes");this.find(".stat-values").css("visibility",a.stat.numVotes?"visible":"hidden");this.find(".votes-num-str").text(a.stat.numVotesStr);this.find(".answers-num-str").text(a.stat.numAnswersStr)}this.options.onchange(a)},
reload:function(){b.get("/ajax/get-poll",{pollId:this.pollId,shortLink:LinkData.shortUrl},function(a){if(a.success){self.onchange(a);self.setInnerHtml(a.html);self._scrollToAnswer(self.find(".checkbox.checked"))}else alert(a.error)})},applyScrolling:function(){var a=false;if(this.element.hasClass("hidden-votes")){this.element.removeClass("hidden-votes");a=true}var d=this.find(".options");d.css("visibility","auto");this.scrollApi=d.jScrollPane().data("jsp");a&&this.element.addClass("hidden-votes")},
reinitScrolling:function(){this.scrollApi?this.scrollApi.reinitialise():this.applyScrolling()},hideCallback:function(){this.hideVotersPopups()},vote:function(a,d,f){var g=this,k=Registry.getController("show"),o=0;switch(LinkData.curTheme){case Themes.THEME_1:o=d?1847:0;break;case Themes.THEME_2:o=d?1971:0;break;case Themes.THEME_3:o=d?1856:0;break;case Themes.THEME_4:o=d?1981:0;break}o&&hihit(o);if(d&&LinkData.needSignIn){b.cookie("delayed_action","vote|"+a);hihit(1957);Popup.show(Popup.TYPE_AUTH)}else if(d){d=
f.find(".answer-text").text();f={shortLink:LinkData.shortUrl,answerId:a,answersOrder:this._getAnswersOrder()};Registry.lastVotedAnswerId=a;b.post("/ajax/vote",f,function(s){if(s.success){g.onchange(s);g.setInnerHtml(s.html);g._scrollToAnswer(g.find(".checkbox.checked"));g.find(".vote-for-view-msg").hide();if(g.forceFormMode&&k.poll){k.poll.setInnerHtml(s.html);k.poll._scrollToAnswer(k.poll.find(".checkbox.checked"))}}else alert(s.error)},"json");k.showForcePopupOrigin=k.showForcePopup;k.showForcePopup=
false;this.skipOneMouseleave=true;this._showShareForm(d)}else this.unvote()},unvote:function(){var a=this,d=Registry.getController("show"),f={shortLink:LinkData.shortUrl,pollId:this.pollId,answersOrder:this._getAnswersOrder()};b.post("/ajax/unvote",f,function(g){a.onchange(g);a.setInnerHtml(g.html);if(a.forceFormMode&&d.poll){d.poll.setInnerHtml(g.html);d.poll._scrollToAnswer(d.poll.find(".checkbox.checked"))}})},_initPollVoters:function(){this.pollVotersModel=new PollVoters(this.element.find(".js-avatars"))},
hideVotersPopups:function(){this.find(".avas").hide()},setInnerHtml:function(a){this.scrollApi&&this.scrollApi.destroy();this.find(".inner-html").html(a);this.applyScrolling();this.resultMode=this.find(".options").hasClass("results")},getAssembledOwnAnswer:function(a){return this.element.data("share-message").replace("$answer",a)},showAddAnswer:function(){this.find(".add-answer").addClass("active");this.addAnswerMode=true},hideAddAnswer:function(){this.find(".add-answer").removeClass("active");this.answerErrorMessage.hide();
this.addAnswerMode=false},_getAnswersOrder:function(){var a=[];this.find(".options .checkbox").each(function(){a.push(b(this).data("answer-id"))});return a},_scrollToAnswer:function(a){try{self.scrollApi.scrollToElement(a)}catch(d){}}})});steal.loaded("app/show/poll.js");
steal("jquery/model","jquery/model/list",function(){$.Model("Theme.Models.Caption",{defaults:{link_id:null,caption:null,id:null},textareaId:"#js-caption-edit",captionTextSelector:".js-caption-text",textareaVal:function(b){if(b==undefined)return $(this.textareaId).val();else{$(this.textareaId).val(b);return this}},captionTextVal:function(b){if(b==undefined)return $(this.captionTextSelector).text();else{if(b==""){b=LNG["show.empty_caption"];if(LinkData&&!LinkData.is_author&&LinkData.curTheme==10)b=
"";$(this.captionTextSelector).css("font-style","italic")}else $(this.captionTextSelector).css("font-style","normal");$(this.captionTextSelector).text(b);LinkData&&LinkData.curTheme==2&&$(this.captionTextSelector).append('<a href="#" class="caption-edit-btn js-caption-edit">&nbsp;</a>');return this}},findAll:function(){},findOne:function(){},create:"POST /url/edit-caption",update:"POST /url/edit-caption",destroy:function(){},share:function(b,a,d){return $.ajax("/ajax/post-caption",{type:"post",data:b,
success:a,error:d})},saveShareSwitchers:function(b,a,d){return $.ajax("/ajax/save-share-switchers",{type:"post",data:b,success:a,error:d})}},{setup:function(b){b.id=b.link_id;this._super(b)},setLinkId:function(b){return this.link_id=this.id=b},setCaption:function(b){Theme.Models.Caption.captionTextVal(b);Theme.Models.Caption.textareaVal(b);$(".js-og-caption").html(b);return b==LNG["show.empty_caption"]?"":b}})});steal.loaded("app/models/caption.js");
steal("jquery/controller","app/show/socialpost.js",function(b){b.Controller("App.Show.Share",{defaults:{logging:false,captionModel:null}},{$theme_code:null,init:function(){if(!this.options.captionModel){var a=Registry.getController("show");if(a&&a.CaptionModel)this.options.captionModel=a.CaptionModel}this.$socialpost=new App.Show.Socialpost(this.element);if(typeof THEME_AUTH_PARAMS!="undefined"&&THEME_AUTH_PARAMS["share_popup_d"+this.$theme_code]&&THEME_AUTH_PARAMS.controllerName==this.Class.fullName){this.restorePopupProperties(THEME_AUTH_PARAMS);
this.openPopup()}else this.options.captionModel!==null&&b(".js-share-caption-text").val(this.options.captionModel.attr("caption"))},".js-share-popup-show click":function(){},".js-share-popup-share-button click":function(){},openPopup:function(){},closePopup:function(){},switcherIsActive:function(a){return b(a).hasClass("on")},switcherTwIsActive:function(){return this.switcherIsActive(this.$switcherTw)},switcherFbIsActive:function(){return this.switcherIsActive(this.$switcherFb)},switcherOn:function(a){b(a).addClass("on")},
switcherOff:function(a){b(a).removeClass("on")},hideMessage:function(){this.$m_success.hide()},showMessage:function(a){this.$m_success.html(a).show()},showError:function(a){var d=this;d.hideSpinner();if(!a)return false;d.$m_error.html(a).show();setTimeout(function(){d.$m_error.hide()},3E3)},hideError:function(){this.$m_error.hide()},showSpinner:function(){this.$m_spinner.show()},hideSpinner:function(){this.$m_spinner.hide()},hideWithMessage:function(a){if(!a)return false;var d=this;d.showMessage(a);
setTimeout(function(){d.hideMessage()},3E3)},hideAllMessages:function(){this.hideSpinner();this.hideMessage();this.hideError()},getPropertiesToCookie:function(){var a={};a["share_popup_d"+this.$theme_code]=1;a.controllerName=this.Class.fullName;return a},setPropertiesToCookie:function(){var a=this,d=JSON.stringify(this.getPropertiesToCookie());b.each([LinkData.shortUrl,LinkData.fullShortPath],function(f,g){if(g){g=g.substr(0,1)!="/"?"/"+g:g;b.cookie("share_popup_properties_d"+a.$theme_code,d,{expires:0,
path:g})}})},restorePopupProperties:function(){},_log:function(){},_switchTwClickHandler:function(a,d,f){d.preventDefault();if(f==undefined)f=true;if(this.switcherIsActive(a))this.switcherOff(a);else if(LinkData.isTwitterLogged||!f)this.switcherOn(a);else{this.setPropertiesToCookie();LinkData.isLogged?authWithTw():window.twAuth()}},_switchFbClickHandler:function(a,d,f){d.preventDefault();if(f==undefined)f=true;if(this.switcherIsActive(a))this.switcherOff(a);else if(LinkData.isFacebookLogged||!f)this.switcherOn(a);
else{this.setPropertiesToCookie();LinkData.isLogged?authWithFb():window.fbAuth()}},_loginTwClickHandler:function(a,d){d.preventDefault();if(LinkData.isTwitterLogged)return false;this.setPropertiesToCookie();LinkData.isLogged?authWithTw():window.twAuth()},_loginFbClickHandler:function(a,d){d.preventDefault();if(LinkData.isFacebookLogged)return false;this.setPropertiesToCookie();LinkData.isLogged?authWithFb():window.fbAuth()},_share:function(a,d,f,g,k,o){var s=this;if(a!=undefined&&(d.tw||d.fb)){o||
(o=s);var A=g==Popup.TYPE_SHARE_ANSWER&&Registry.lastVotedAnswerId?"a"+Registry.lastVotedAnswerId:null;if(d.tw&&!LinkData.isTwitterLogged){d.tw=0;b(".js-bookmarklet").length&&this.saveLinkThemeFromBookmarklet();Share.twitter("",Share.getMessageForTwitter(a,false,f,A),"",o)}if(d.fb&&!LinkData.isFacebookLogged){d.fb=0;Share.facebook(f,Share.getMessageForFacebook(a,false,f,A),o)}this.$socialpost.init({callerPopup:g,onSuccess:function(G,H){s._log("success sharing");o.hideSpinner();o.hideWithMessage(H.provider==
"tw"?LNG.sharedSuccessTw:LNG.sharedSuccessFb)},onAllPostsDone:function(){s._log("all sharing posts done");if(k)window.location.href=k},onError:function(G,H){s._log("error");o.hideSpinner();if(G.error){var V="";switch(G.error.code){case 1:H.provider=="tw"?Share.twitter("",H.message,"",o):Share.facebook(H.link,H.message,o);break;case 202:case 302:case 303:Reauth.init({socialPost:s.$socialpost,provider:H.provider,onHide:function(){o.openPopup(g,true)}}).show();break;case 201:V=LNG["popup.repeatedTweetMessage"];
break;case 301:V=LNG["popup.repeatedFacebookMessage"];break;case 200:V=LNG["popup.shareTwitterGeneralError"];break;case 300:V=LNG["popup.shareFacebookGeneralError"];break;default:V=LNG["popup.shareGeneralError"];break}V&&o.showError(V)}},onStartPosting:function(){s._log("start posting");o.showSpinner()},onEndPosting:function(G){s._log("end posting");G.error||setTimeout(function(){o.closePopup()},2500)}});d.tw&&this.$socialpost.registerAction({type:"tw",message:Share.getMessageForTwitter(a,false,f,
A),link:f,message_raw:a});d.fb&&this.$socialpost.registerAction({type:"fb",message:Share.getMessageForFacebook(a,false,f,A),link:f});Theme.Models.Caption.saveShareSwitchers({state:b.toJSON(d)},function(G){if(G.success)LinkData.shareSwitchers=d});return this.$socialpost.execute()}return null},saveLinkThemeFromBookmarklet:function(){var a=b(".js-themes-list").find(".selected").data("id");b.post("/url/set-link-theme",{id:LinkData.id,theme:a},function(d){d.success||alert(d.error)})},_validateShareParams:function(a,
d,f){f||(f=this);if(!(d.tw||d.fb)){f.showError(LNG["popup.pleaseSelectSocNet"]);return false}if(a.length>119){f.showError(LNG["caption.tooLong"]);return false}return true},_hasCyrilicSymbols:function(a){if(!a)return false;return a.match(/[\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e\u044f]/i)?true:false},_shareLink:function(a,d,f,g){var k=this;g||(g=k);if(!k._validateShareParams(a,
d,g))return false;g._hihit(g._getDataFromForm(g.$form));k._share(a,d,this._hasCyrilicSymbols(LinkData.baseAliasLink)?LinkData.baseShortAliasLink:LinkData.baseAliasLink,f,null,g)},_publishLink:function(a,d,f,g){var k=this;g||(g=this);if(!k._validateShareParams(a.caption,d,g))return false;g._hihit(g._getDataFromForm(g.$form));g.showSpinner();b.ajax({type:"POST",url:"/url/create",data:a,success:function(o){if(o)if(o.error)g.showError(o.error);else o.updated?window.location.reload():k._share(a.caption,
d,k._hasCyrilicSymbols(o.base_alias_url)?o.base_short_alias_url:o.base_alias_url,f,o.full_short_url,g);else g.showError(LNG["popup.shareGeneralError"])},error:function(){g.hideSpinner()}})},"{Theme.Models.Caption} updated":function(a,d,f){this.$captionTextarea&&this.$captionTextarea.val(f.attr("caption"))}})});steal.loaded("app/show/share.js");
steal("jquery/controller","app/show/popup_base_share.js",function(){App.Show.PopupBaseShare("App.Show.Theme.ShareLink",{},{$messageContainer:".js-message-share-link",$popup_type:Popup.TYPE_SHARE_LINK,_doSave:function(b){this._super(b);var a=Registry.getController("share");b=this._getDataFromForm(b);a&&a._shareLink(b.message,b.auth,Popup.TYPE_SHARE_LINK,this)},_getDataFromForm:function(b){b=this._super(b);this._log(b.message);if(b.message=="")b.message=this.$form.find(".js-og-caption").text();return b},
_preInitForm:function(b){b.find(".js-og-title").first().html(Og.getTitle());b.find(".js-og-url").first().html(Og.getUrl()).attr("href",Og.getUrl());b.find(".js-og-description").first().html(Og.getDescription());if(Og.getCaption()===""){b.find(".js-posted").hide();b.find(".js-poster").removeClass("share")}else{b.find(".js-poster").hasClass("share")==false&&b.find(".js-poster").addClass("share");b.find(".js-posted").show()}b.find(".js-og-caption").first().html(Og.getCaption());b.find(".js-og-image").first().attr("src",
Og.getImage())},_hihit:function(){var b=0;switch(LinkData.curTheme){case Themes.THEME_1:b=1843;break;case Themes.THEME_2:b=1967;break;case Themes.THEME_3:b=1852;break;case Themes.THEME_4:b=1977;break}if(b!==0){this._log("share link hihit");this._log("Counter: "+b);hihit(b)}}})});steal.loaded("app/show/share_link.js");
steal("jquery/controller","app/show/popup_base_share.js",function(){App.Show.PopupBaseShare("App.Show.Theme.PublishLink",{defaults:{}},{$inherit:".js-share-inherit-checkbox",$messageContainer:".js-message-link-publish",$popup_type:Popup.TYPE_PUBLISH_LINK,_doSave:function(b){this._super(b);var a=Registry.getController("share");b=this._getDataFromForm(b);a&&a._publishLink({"short":b["short"],inherit:b.inherit,caption:b.message},b.auth,Popup.TYPE_PUBLISH_LINK,this)},_getDataFromForm:function(b){b=this._super(b);
b["short"]=LinkData.shortUrl;b.inherit=this.$form.find('.[name="inherit"]').is(":checked")?1:0;return b},_preInitForm:function(b){b.find(".js-og-title").first().html(Og.getTitle());b.find(".js-og-original-url").first().html(Og.getOriginalUrl()).attr("href",Og.getOriginalUrl());b.find(".js-og-description").first().html(Og.getDescription());b.find(".js-og-caption").first().html(Og.getCaption());b.find(".js-og-image").first().attr("src",Og.getImage())},_hihit:function(b){this._log("call hit");var a=
0;b=b.inherit!=0;switch(LinkData.curTheme){case Themes.THEME_1:a=b?1846:1845;break;case Themes.THEME_2:a=b?1970:1969;break;case Themes.THEME_3:a=b?2044:1854;break;case Themes.THEME_4:a=b?1980:1979;break}if(a){this._log(a);hihit(a)}},_restoreForm:function(b,a,d){return this._super(b,a,d).setInherit(a.inherit)},_checkAuthPermission:function(){return true},setInherit:function(b){this.$form.find(this.$inherit).prop("checked",b)}})});steal.loaded("app/show/publish_link.js");
steal("jquery/controller","app/show/popup_base_share.js",function(){App.Show.PopupBaseShare("App.Show.Theme.ShareAnswer",{},{$messageContainer:".js-message-share-answer",$popup_type:Popup.TYPE_SHARE_ANSWER,init:function(b,a){this._super(b,a);Registry.setController("share_answer",this)},show:function(){Popup.show(Popup.TYPE_SHARE_ANSWER);return this},_doSave:function(b){this._super(b);var a=Registry.getController("share");b=this._getDataFromForm(b);a&&a._shareLink(b.message,b.auth,Popup.TYPE_SHARE_ANSWER,
this)},_hihit:function(){var b=0;switch(LinkData.curTheme){case Themes.THEME_1:b=1844;break;case Themes.THEME_2:b=1968;break;case Themes.THEME_3:b=1853;break;case Themes.THEME_4:b=1978;break}if(b!==0){this._log("share answer hihit");this._log("Counter: "+b);hihit(b)}}})});steal.loaded("app/show/share_answer.js");
steal("app/popups/secondary-popup.js","app/controllers/history/mylinks/charts/charts.js","lib/moment.js",function(){App.SecondaryPopup("App.Show.Chart",{selector:".js-show-chart",request:function(){return{short_link:LinkData.shortUrl,name:"show/link-stat"}}},{_addClass:"chart-popup",_title:"Statistics",chartsController:null,counters:{},init:function(){this.chartsController=new App.History.ChartsController(this.element);this.themeId=LinkData.curTheme},onShow:function(){var b=this;steal("/js/lib/xCharts/xcharts.min.js").then(function(){b.chartsController.getChart(b.element,
"traffic","day");b.processCounters()})},processCounters:function(){hihit(3061);lnEvent("link stat popup")}})});steal.loaded("app/popups/chart.js");
steal("app/popups/secondary-popup.js",function(b){App.SecondaryPopup("App.Show.PluginInstall",{_versions:{v1:{selector:".js-plugin-install-1",request:{name:"show/plugin-install-1"}},v2_white:{selector:".js-plugin-install-2-white",request:{name:"show/plugin-install-2",mode:"white"}},v2_color:{selector:".js-plugin-install-2-color",request:{name:"show/plugin-install-2",mode:"color"}},v3_white:{selector:".js-plugin-install-3-white",request:{name:"show/plugin-install-3",mode:"white"}},v3_color:{selector:".js-plugin-install-3-color",
request:{name:"show/plugin-install-3",mode:"color"}}},selector:function(a){return this._versions[a.version||"v1"].selector},request:function(a){return this._versions[a.version||"v1"].request}},{name:"plugin-install",_addClass:"twitter-extension",hideCloseBtn:false,showCustomHeader:false,version:null,_versions:{v1:{_addClass:"twitter-extension"},v2_white:{_addClass:"install-our-plugin"},v2_color:{_addClass:"install-our-plugin install-our-plugin-3"},v3_white:{_addClass:"install-our-plugin"},v3_color:{_addClass:"install-our-plugin install-our-plugin-4"}},
init:function(a,d){if(d.version)this.version=d.version;b.extend(this,this._versions[this.version])},onShow:function(){lnEvent("plug-inst open",this.version);hihit(3162)},onHide:function(){lnEvent("plug-inst close",this.version)},"a click":function(){lnEvent("plug-inst click",this.version)}})});steal.loaded("app/popups/plugin-install.js");
steal("app/popups/secondary-popup.js",function(){App.SecondaryPopup("App.Show.Aw1",{selector:".js-popup-aw1",request:{name:"show/aw1"}},{name:"Aw1",_addClass:"twitlurking",showCustomHeader:1,".js-btn-signin-tw click":function(b,a){a.preventDefault();lnEvent("aw login",this.name);Cookie.set("t6_autowrap_on",true,{expires:0,path:"/"});Cookie.set("autowrap_from",{popup:this.name,theme:LinkData.curTheme,aw_counter:this.getCounters().aw});hihit(this.getCounters().click);Cookie.set("t6_aw_tw_auth","2",
{expires:0,path:"/"});window.twAuth()},onShow:function(){lnEvent("aw open",this.name);hihit(this.getCounters().open)},onHide:function(){lnEvent("aw close",this.name);hihit(this.getCounters().close)},getCounters:function(){var b;switch(LinkData.curTheme){case Themes.THEME_7:b={open:2157,close:2158,click:2159,aw:2160};break;case Themes.THEME_9:b={open:2220,close:2222,click:2221,aw:2223};break;case Themes.THEME_10:b={open:2382,close:2383,click:2384,aw:2385};break;case Themes.THEME_11:b={open:2667,close:null,
click:null,aw:2666};break;case Themes.THEME_12:b={open:2681,close:null,click:null,aw:2680};break;case Themes.THEME_13:b={open:2715,close:null,click:null,aw:2714};break}return b}})});steal.loaded("app/popups/aw1.js");
steal("app/popups/secondary-popup.js",function(b){App.SecondaryPopup("App.Show.IframeFail",{selector:".js-popup-iframe-fail",request:{name:"show/iframe-fail"}},{name:"IframeFail",_title:"It seems the page has failed to load",_description:"Apparently, you use some ad block add-on which blocked the content by mistake or the website doesn't allow adding to it's webpages additional panels in your region.",_addClass:"empty-frame",onShow:function(){lnEvent("iframefail-popup open","v1");hihit(3569)},onHide:function(){lnEvent("iframefail-popup skip",
"v1");hihit(3570)},".btn-redirect click":function(a,d){lnEvent("iframefail-popup redirect","v1");hihit(3571);d.preventDefault();window.location=b("#source_site").attr("src").toString()},".btn-skip click":function(a,d){d.preventDefault();this.hide()}})});steal.loaded("app/popups/iframe-fail.js");
steal("app/popups/secondary-popup.js",function(b){App.SecondaryPopup("App.Show.WellDone",{selector:".js-well-done",request:function(){return{name:"show/well-done"+(Math.random()>=0.5?"1":"2")}}},{mode:"welcome",name:"WellDone",loadedVersion:null,_versions:{v1:{_addClass:"silent-bob-popup4"},v2:{_addClass:"abvert-popup tw-abvert",_title:"Thanks for joining!"}},init:function(){this.loadedVersion=NL_APP_DATA.popupsHtml["well-done"];b.extend(this,this._versions[this.loadedVersion])},onShow:function(){App.SilentBase.ga.open(this);
hihit(3177)},onHide:function(){App.SilentBase.ga.close(this);hihit(3179)}})});steal.loaded("app/popups/well-done.js");
steal("app/popups/silent-base.js","app/tools/message-box.js",function(b){App.SilentBase("App.Show.WellDoneSilentEdit",{selector:".js-well-done-silent-edit",request:{name:"show/well-done-silent-edit"}},{mode:"welcome",name:"WellDoneSilentEdit",_addClass:"silent-bob-popup2",init:function(){this._super();this.textLimitCounter(this.find('textarea[name="tweet"]'),this.find(".js-symb-count"),this.tweet_limit)},'textarea[name="tweet"] keyup':function(a){b(".js-symb-count").css("display","inline-block");
this.textLimitCounter(a,".js-symb-count",140)},tweetCallback:function(a){this.find(".js-silent-textarea-block").hide();this.find(".js-silent-text").hide();this.find(".js-boring-text").hide();this.find(".js-silent-just-shared").show();this.find("h3").text("Well done!");this.find(".js-shared-link").html(a.wrapped_url).attr("href",a.wrapped_url)}})});steal.loaded("app/popups/well-done-silent-edit.js");
steal("app/popups/silent-base.js",function(b){App.SecondaryPopup("App.Show.SilentAutopost",{selector:function(a){return".js-"+a.mode+"-autopost-"+a.version},request:function(a){return{name:"show/autopost/"+a.mode+"-autopost-"+a.version}}},{autoPostClick:false,_addSecondClass:null,_addSecondTitle:null,version:"v1",init:function(a,d){d=d||{};if(d.mode)this.mode=d.mode;switch(d.version){case "v1":this.name="autopost-v1";this._addClass="silent-bob-popup3";this.version="v1";break;case "v2":this.name="autopost-v2";
this._addClass="install-our-plugin autopost-2";this._addSecondClass="install-our-plugin autopost-2 autopost-4";this.version="v2";break;case "v3":this.name="autopost-v3";this._addClass="install-our-plugin autopost-2 autopost-3";this._addSecondClass="install-our-plugin autopost-2 autopost-5";this.version="v3";break}},onShow:function(){lnEvent("autopost-popup open",this.mode+"-"+this.version);hihit(3193)},onHide:function(){lnEvent("autopost-popup close",this.mode+"-"+this.version);hihit(3195);!this.autoPostClick&&
this.mode=="welcome"&&Cookie.set("autoPostNotPressed",1,{expires:7})},".aut-post-on, .autopost-button click":function(a,d){var f=this;this.autoPostClick=true;d.preventDefault();lnEvent("autopost-popup click",this.mode+"-"+this.version);b.post("/ajax/save-settings-value",{name:"is_silent_user",value:1},function(g){if(g.success){f._slBob3();hihit(3194)}},"json")},_slBob3:function(){if(this._addSecondClass)PopupSM.popupWindow.removeClass().addClass("popup-holder "+(this._addSecondClass||""));this.find(".just-shared").hide();
this.find(".js-boring-text").show();this.find(".popup-bottom-line").hide()},".got-it click":function(){this.hide()}})});steal.loaded("app/popups/silent-autopost.js");
steal("app/popups/silent-base.js","app/tools/message-box.js",function(b){App.SilentBase("App.Show.SilentTweetEdit",{selector:".js-silent-tweet-edit",request:{name:"show/silent-tweet-edit"}},{name:"SilentTweetEdit",mode:"comeback",_addClass:"silent-bob-popup",init:function(){this._super();this.textLimitCounter(this.find('textarea[name="tweet"]'),this.find(".js-symb-count"),this.tweet_limit)},'textarea[name="tweet"] keyup':function(a){b(".js-symb-count").css("display","inline-block");this.textLimitCounter(a,
".js-symb-count",140)},tweetCallback:function(a){this.find(".js-silent-textarea-block").hide();this.find(".js-boring-text").hide();this.find(".js-silent-just-shared").show();this.find(".js-shared-link").html(a.wrapped_url).attr("href",a.wrapped_url)}})});steal.loaded("app/popups/silent-tweet-edit.js");
steal("app/popups/silent-base.js",function(){App.SilentBase("App.Show.SilentTweet",{selector:function(b){return b.mode=="comeback"?".js-comeback-tweet-simple":".js-welcome-tweet-simple"},request:function(b){return{short_link:LinkData.shortUrl,name:"show/silent-tweet",mode:b.mode}}},{name:"SilentTweet",_addClass:"abvert-popup tw-abvert",_modes:{welcome:{_title:"Thanks for joining!"},comeback:{_title:"Look who's back!"}},tweetCallback:function(b){this.find(".block-success").show();this.find(".block-main").hide();
this.find(".js-shared-link").html(b.wrapped_url).attr("href",b.wrapped_url)}})});steal.loaded("app/popups/silent-tweet.js");
steal("app/popups/silent-base.js",function(){App.SilentBase("App.Show.SilentTweetAndReply",{selector:function(b){return b.mode=="comeback"?".js-comeback-tweet-and-reply":".js-welcome-tweet-and-reply"},request:function(b){return{short_link:LinkData.shortUrl,name:"show/silent-tweet-and-reply",mode:b.mode}}},{name:"SilentTweetAndReply",_addClass:"abvert-popup tw-abvert tw-abvert-wide",_modes:{welcome:{_title:"Thanks for joining!"},comeback:{_title:"Look who's back!"}},".js-tweet-btn click":function(b,
a){a.preventDefault();var d=this;hihit(this.mode=="welcome"?3178:3305);App.SilentBase.ga.tweet(this);this.sendTweet({tweet:this.find('[name="tweet"]').val(),urlToWrap:this.find('[name="url"]').val(),button:this.find(".js-tweet-btn, .js-reply-btn"),loader:this.find(".std-loading")},function(f){d.tweetCallback(f)})},".js-reply-btn click":function(b,a){a.preventDefault();var d=this;hihit(this.mode=="welcome"?3178:3305);App.SilentBase.ga.reply(this);this.sendTweet({tweet:this.find('[name="reply"]').val(),
urlToWrap:this.find('[name="url"]').val(),button:this.find(".js-tweet-btn, .js-reply-btn"),loader:this.find(".std-loading")},function(f){d.tweetCallback(f)})},tweetCallback:function(b){this.find(".block-success").show();this.find(".block-main").hide();this.find(".js-shared-link").html(b.wrapped_url).attr("href",b.wrapped_url)}})});steal.loaded("app/popups/silent-tweet-and-reply.js");
steal("jquery",function(b){b.fn.zclip=function(a){if(typeof a=="object"&&!a.length){var d=b.extend({path:"ZeroClipboard.swf",copy:null,beforeCopy:null,afterCopy:null,clickAfter:true,setHandCursor:true,setCSSEffects:true},a);return this.each(function(){var f=b(this);if(f.is(":visible")&&(typeof d.copy=="string"||b.isFunction(d.copy))){ZeroClipboard.setMoviePath(d.path);var g=new ZeroClipboard.Client;b.isFunction(d.copy)&&f.bind("zClip_copy",d.copy);b.isFunction(d.beforeCopy)&&f.bind("zClip_beforeCopy",
d.beforeCopy);b.isFunction(d.afterCopy)&&f.bind("zClip_afterCopy",d.afterCopy);g.setHandCursor(d.setHandCursor);g.setCSSEffects(d.setCSSEffects);g.addEventListener("mouseOver",function(){f.trigger("mouseenter")});g.addEventListener("mouseOut",function(){f.trigger("mouseleave")});g.addEventListener("mouseDown",function(){f.trigger("mousedown");b.isFunction(d.copy)?g.setText(f.triggerHandler("zClip_copy")):g.setText(d.copy);b.isFunction(d.beforeCopy)&&f.trigger("zClip_beforeCopy")});g.addEventListener("complete",
function(k,o){if(b.isFunction(d.afterCopy))f.trigger("zClip_afterCopy");else{if(o.length>500)o=o.substr(0,500)+"...\n\n("+(o.length-500)+" characters not shown)";f.removeClass("hover");alert("Copied text to clipboard:\n\n "+o)}d.clickAfter&&f.trigger("click")});g.glue(f[0],f.parent()[0]);b(window).bind("load resize",function(){g.reposition()})}})}else if(typeof a=="string")return this.each(function(){var f=b(this);a=a.toLowerCase();var g=f.data("zclipId");g=b("#"+g+".zclip");if(a=="remove"){g.remove();
f.removeClass("active hover")}else if(a=="hide"){g.hide();f.removeClass("active hover")}else a=="show"&&g.show()})}});
var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(b){if(typeof b=="string")b=document.getElementById(b);if(!b.addClass){b.hide=function(){this.style.display="none"};b.show=function(){this.style.display=""};b.addClass=function(a){this.removeClass(a);this.className+=" "+a};b.removeClass=function(a){for(var d=this.className.split(/\s+/),f=-1,g=0;g<d.length;g++)if(d[g]==a){f=g;g=d.length}if(f>-1){d.splice(f,1);this.className=d.join(" ")}return this};b.hasClass=
function(a){return!!this.className.match(new RegExp("\\s*"+a+"\\s*"))}}return b},setMoviePath:function(b){this.moviePath=b},dispatch:function(b,a,d){(b=this.clients[b])&&b.receiveEvent(a,d)},register:function(b,a){this.clients[b]=a},getDOMObjectPosition:function(b,a){var d={left:0,top:0,width:b.width?b.width:b.offsetWidth,height:b.height?b.height:b.offsetHeight};if(b&&b!=a){d.left+=b.offsetLeft;d.top+=b.offsetTop}return d},Client:function(b){this.handlers={};this.id=ZeroClipboard.nextId++;this.movieId=
"ZeroClipboardMovie_"+this.id;ZeroClipboard.register(this.id,this);b&&this.glue(b)}};
ZeroClipboard.Client.prototype={id:0,ready:false,movie:null,clipText:"",handCursorEnabled:true,cssEffects:true,handlers:null,glue:function(b,a,d){this.domElement=ZeroClipboard.$(b);b=99;if(this.domElement.style.zIndex)b=parseInt(this.domElement.style.zIndex,10)+1;if(typeof a=="string")a=ZeroClipboard.$(a);else if(typeof a=="undefined")a=document.getElementsByTagName("body")[0];var f=ZeroClipboard.getDOMObjectPosition(this.domElement,a);this.div=document.createElement("div");this.div.className="zclip";
this.div.id="zclip-"+this.movieId;$(this.domElement).data("zclipId","zclip-"+this.movieId);var g=this.div.style;g.position="absolute";g.left=""+f.left+"px";g.top=""+f.top+"px";g.width=""+f.width+"px";g.height=""+f.height+"px";g.zIndex=b;if(typeof d=="object")for(addedStyle in d)g[addedStyle]=d[addedStyle];a.appendChild(this.div);this.div.innerHTML=this.getHTML(f.width,f.height)},getHTML:function(b,a){var d="",f="id="+this.id+"&width="+b+"&height="+a;if(navigator.userAgent.match(/MSIE/)){var g=location.href.match(/^https/i)?
"https://":"http://";d+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+g+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+b+'" height="'+a+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+
f+'"/><param name="wmode" value="transparent"/></object>'}else d+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+b+'" height="'+a+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+f+'" wmode="transparent" />';return d},hide:function(){if(this.div)this.div.style.left=
"-2000px"},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var b=document.getElementsByTagName("body")[0];try{b.removeChild(this.div)}catch(a){}this.div=this.domElement=null}},reposition:function(b){if(b)(this.domElement=ZeroClipboard.$(b))||this.hide();if(this.domElement&&this.div){b=ZeroClipboard.getDOMObjectPosition(this.domElement);var a=this.div.style;a.left=""+b.left+"px";a.top=""+b.top+"px"}},setText:function(b){this.clipText=
b;this.ready&&this.movie.setText(b)},addEventListener:function(b,a){b=b.toString().toLowerCase().replace(/^on/,"");this.handlers[b]||(this.handlers[b]=[]);this.handlers[b].push(a)},setHandCursor:function(b){this.handCursorEnabled=b;this.ready&&this.movie.setHandCursor(b)},setCSSEffects:function(b){this.cssEffects=!!b},receiveEvent:function(b,a){b=b.toString().toLowerCase().replace(/^on/,"");switch(b){case "load":this.movie=document.getElementById(this.movieId);if(!this.movie){var d=this;setTimeout(function(){d.receiveEvent("load",
null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){d=this;setTimeout(function(){d.receiveEvent("load",null)},100);this.ready=true;return}this.ready=true;try{this.movie.setText(this.clipText)}catch(f){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(g){}break;case "mouseover":if(this.domElement&&this.cssEffects){this.domElement.addClass("hover");this.recoverActive&&this.domElement.addClass("active")}break;case "mouseout":if(this.domElement&&
this.cssEffects){this.recoverActive=false;if(this.domElement.hasClass("active")){this.domElement.removeClass("active");this.recoverActive=true}this.domElement.removeClass("hover")}break;case "mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case "mouseup":if(this.domElement&&this.cssEffects){this.domElement.removeClass("active");this.recoverActive=false}break}if(this.handlers[b])for(var k=0,o=this.handlers[b].length;k<o;k++){var s=this.handlers[b][k];if(typeof s==
"function")s(this,a);else if(typeof s=="object"&&s.length==2)s[0][s[1]](this,a);else typeof s=="string"&&window[s](this,a)}}};steal.loaded("lib/jquery.zclip.js");
steal("jquery/controller",function(b){b.Controller("App.IndexIndex.ShortFormCheckboxes",{defaults:{short_url:null,enable_inheritance:1,force:0,enable_auth_poll:0,is_poll_supplemented:1}},{keys:["enable_inheritance","force","enable_auth_poll","is_poll_supplemented"],init:function(){for(var a in this.keys)this.options[this.keys[a]]&&this.find('.switch[rel="'+this.keys[a]+'"]').addClass("switch-on")}," .switcher .switch click":function(a){var d;if(a.hasClass("switch-on")){d=false;a.removeClass("switch-on")}else{d=
true;a.addClass("switch-on")}a={short_url:b.isFunction(this.options.short_url)?this.options.short_url():this.options.short_url,option:a.attr("rel"),value:d?"on":0};b.post("/ajax/url-options",a,function(){});return false},resetController:function(){var a;for(a in this.keys)this.options[this.keys[a]]&&this.find('.switch[rel="'+this.keys[a]+'"]').addClass("switch-on")}})});steal.loaded("app/controllers/index/index/short_form/checkboxes.js");
(function(b,a,d){b.fn.jScrollPane=function(f){function g(k,o){function s(ua){var Ha,eb,db,ib,sb,zb=false,yb=false;bb=ua;if(xb===d){ib=k.scrollTop();sb=k.scrollLeft();k.css({overflow:"hidden",padding:0});Hb=k.innerWidth()+Nb;Kb=k.innerHeight();k.width(Hb);xb=b('<div class="jspPane" />').css("padding",rb).append(k.children());Gb=b('<div class="jspContainer" />').css({width:Hb+"px",height:Kb+"px"}).append(xb).appendTo(k)}else{k.css("width","");zb=bb.stickToBottom&&Sb();yb=bb.stickToRight&&Jc();if(db=
k.innerWidth()+Nb!=Hb||k.outerHeight()!=Kb){Hb=k.innerWidth()+Nb;Kb=k.innerHeight();Gb.css({width:Hb+"px",height:Kb+"px"})}if(!db&&Ic==Tb&&xb.outerHeight()==ic){k.width(Hb);return}Ic=Tb;xb.css("width","");k.width(Hb);Gb.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}xb.css("overflow","auto");Tb=ua.contentWidth?ua.contentWidth:xb[0].scrollWidth;ic=xb[0].scrollHeight;xb.css("overflow","");Ac=Tb/Hb;Bc=ic/Kb;cc=Bc>1;if((sc=Ac>1)||cc){k.addClass("jspScrollable");if(ua=bb.maintainPosition&&
($b||ec)){Ha=hb();eb=fb()}A();H();ia();if(ua){Ca(yb?Tb-Hb:Ha,false);ja(zb?ic-Kb:eb,false)}Wb();Fc();wc();bb.enableKeyboardNavigation&&Pc();bb.clickOnTrack&&Ja();dd();bb.hijackInternalLinks&&ad()}else{k.removeClass("jspScrollable");xb.css({top:0,width:Gb.width()-Nb});Ra();u();bd();Ka()}if(bb.autoReinitialise&&!Hc)Hc=setInterval(function(){s(bb)},bb.autoReinitialiseDelay);else!bb.autoReinitialise&&Hc&&clearInterval(Hc);ib&&k.scrollTop(0)&&ja(ib,false);sb&&k.scrollLeft(0)&&Ca(sb,false);k.trigger("jsp-initialised",
[sc||cc])}function A(){if(cc){Gb.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />')));Kc=Gb.find(">.jspVerticalBar");Aa=Kc.find(">.jspTrack");dc=Aa.find(">.jspDrag");if(bb.showArrows){jc=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",na(0,-1)).bind("click.jsp",Db);Ib=
b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",na(0,1)).bind("click.jsp",Db);if(bb.arrowScrollOnHover){jc.bind("mouseover.jsp",na(0,-1,jc));Ib.bind("mouseover.jsp",na(0,1,Ib))}ha(Aa,bb.verticalArrowPositions,jc,Ib)}tc=Kb;Gb.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){tc-=b(this).outerHeight()});dc.hover(function(){dc.addClass("jspHover")},function(){dc.removeClass("jspHover")}).bind("mousedown.jsp",function(ua){b("html").bind("dragstart.jsp selectstart.jsp",
Db);dc.addClass("jspActive");var Ha=ua.pageY-dc.position().top;b("html").bind("mousemove.jsp",function(eb){O(eb.pageY-Ha,false)}).bind("mouseup.jsp mouseleave.jsp",ma);return false});G()}}function G(){Aa.height(tc+"px");$b=0;Wc=bb.verticalGutter+Aa.outerWidth();xb.width(Hb-Wc-Nb);try{Kc.position().left===0&&xb.css("margin-left",Wc+"px")}catch(ua){}}function H(){if(sc){Gb.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),
b('<div class="jspDragRight" />'))),b('<div class="jspCap jspCapRight" />')));uc=Gb.find(">.jspHorizontalBar");Pb=uc.find(">.jspTrack");Ab=Pb.find(">.jspDrag");if(bb.showArrows){Yb=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",na(-1,0)).bind("click.jsp",Db);kc=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",na(1,0)).bind("click.jsp",Db);if(bb.arrowScrollOnHover){Yb.bind("mouseover.jsp",na(-1,0,Yb));kc.bind("mouseover.jsp",na(1,0,kc))}ha(Pb,bb.horizontalArrowPositions,
Yb,kc)}Ab.hover(function(){Ab.addClass("jspHover")},function(){Ab.removeClass("jspHover")}).bind("mousedown.jsp",function(ua){b("html").bind("dragstart.jsp selectstart.jsp",Db);Ab.addClass("jspActive");var Ha=ua.pageX-Ab.position().left;b("html").bind("mousemove.jsp",function(eb){xa(eb.pageX-Ha,false)}).bind("mouseup.jsp mouseleave.jsp",ma);return false});Mb=Gb.innerWidth();V()}}function V(){Gb.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){Mb-=b(this).outerWidth()});
Pb.width(Mb+"px");ec=0}function ia(){if(sc&&cc){var ua=Pb.outerHeight(),Ha=Aa.outerWidth();tc-=ua;b(uc).find(">.jspCap:visible,>.jspArrow").each(function(){Mb+=b(this).outerWidth()});Mb-=Ha;Kb-=Ha;Hb-=ua;Pb.parent().append(b('<div class="jspCorner" />').css("width",ua+"px"));G();V()}sc&&xb.width(Gb.outerWidth()-Nb+"px");ic=xb.outerHeight();Bc=ic/Kb;if(sc){Ta=Math.ceil(1/Ac*Mb);if(Ta>bb.horizontalDragMaxWidth)Ta=bb.horizontalDragMaxWidth;else if(Ta<bb.horizontalDragMinWidth)Ta=bb.horizontalDragMinWidth;
Ab.width(Ta+"px");Lb=Mb-Ta;Ma(ec)}if(cc){Ob=Math.ceil(1/Bc*tc);if(Ob>bb.verticalDragMaxHeight)Ob=bb.verticalDragMaxHeight;else if(Ob<bb.verticalDragMinHeight)Ob=bb.verticalDragMinHeight;dc.height(Ob+"px");xc=tc-Ob;ca($b)}}function ha(ua,Ha,eb,db){var ib="before",sb="after";if(Ha=="os")Ha=/Mac/.test(navigator.platform)?"after":"split";if(Ha==ib)sb=Ha;else if(Ha==sb){ib=Ha;Ha=eb;eb=db;db=Ha}ua[ib](eb)[sb](db)}function na(ua,Ha,eb){return function(){Da(ua,Ha,this,eb);this.blur();return false}}function Da(ua,
Ha,eb,db){eb=b(eb).addClass("jspActive");var ib,sb,zb=true,yb=function(){ua!==0&&Xb.scrollByX(ua*bb.arrowButtonSpeed);Ha!==0&&Xb.scrollByY(Ha*bb.arrowButtonSpeed);sb=setTimeout(yb,zb?bb.initialDelay:bb.arrowRepeatFreq);zb=false};yb();ib=db?"mouseout.jsp":"mouseup.jsp";db=db||b("html");db.bind(ib,function(){eb.removeClass("jspActive");sb&&clearTimeout(sb);sb=null;db.unbind(ib)})}function Ja(){Ka();cc&&Aa.bind("mousedown.jsp",function(ua){if(ua.originalTarget===d||ua.originalTarget==ua.currentTarget){var Ha=
b(this),eb=Ha.offset(),db=ua.pageY-eb.top-$b,ib,sb=true,zb=function(){var Cb=Ha.offset();Cb=ua.pageY-Cb.top-Ob/2;var Zb=Kb*bb.scrollPagePercent,yc=xc*Zb/(ic-Kb);if(db<0)$b-yc>Cb?Xb.scrollByY(-Zb):O(Cb);else if(db>0)$b+yc<Cb?Xb.scrollByY(Zb):O(Cb);else{yb();return}ib=setTimeout(zb,sb?bb.initialDelay:bb.trackClickRepeatFreq);sb=false},yb=function(){ib&&clearTimeout(ib);ib=null;b(document).unbind("mouseup.jsp",yb)};zb();b(document).bind("mouseup.jsp",yb);return false}});sc&&Pb.bind("mousedown.jsp",function(ua){if(ua.originalTarget===
d||ua.originalTarget==ua.currentTarget){var Ha=b(this),eb=Ha.offset(),db=ua.pageX-eb.left-ec,ib,sb=true,zb=function(){var Cb=Ha.offset();Cb=ua.pageX-Cb.left-Ta/2;var Zb=Hb*bb.scrollPagePercent,yc=Lb*Zb/(Tb-Hb);if(db<0)ec-yc>Cb?Xb.scrollByX(-Zb):xa(Cb);else if(db>0)ec+yc<Cb?Xb.scrollByX(Zb):xa(Cb);else{yb();return}ib=setTimeout(zb,sb?bb.initialDelay:bb.trackClickRepeatFreq);sb=false},yb=function(){ib&&clearTimeout(ib);ib=null;b(document).unbind("mouseup.jsp",yb)};zb();b(document).bind("mouseup.jsp",
yb);return false}})}function Ka(){Pb&&Pb.unbind("mousedown.jsp");Aa&&Aa.unbind("mousedown.jsp")}function ma(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");dc&&dc.removeClass("jspActive");Ab&&Ab.removeClass("jspActive")}function O(ua,Ha){if(cc){if(ua<0)ua=0;else if(ua>xc)ua=xc;if(Ha===d)Ha=bb.animateScroll;if(Ha)Xb.animate(dc,"top",ua,ca);else{dc.css("top",ua);ca(ua)}}}function ca(ua){if(ua===d)ua=dc.position().top;Gb.scrollTop(0);$b=ua;var Ha=$b===0,eb=
$b==xc;ua=-(ua/xc)*(ic-Kb);if(Bb!=Ha||fc!=eb){Bb=Ha;fc=eb;k.trigger("jsp-arrow-change",[Bb,fc,vc,qc])}oa(Ha,eb);xb.css("top",ua);k.trigger("jsp-scroll-y",[-ua,Ha,eb]).trigger("scroll")}function xa(ua,Ha){if(sc){if(ua<0)ua=0;else if(ua>Lb)ua=Lb;if(Ha===d)Ha=bb.animateScroll;if(Ha)Xb.animate(Ab,"left",ua,Ma);else{Ab.css("left",ua);Ma(ua)}}}function Ma(ua){if(ua===d)ua=Ab.position().left;Gb.scrollTop(0);ec=ua;var Ha=ec===0,eb=ec==Lb;ua=-(ua/Lb)*(Tb-Hb);if(vc!=Ha||qc!=eb){vc=Ha;qc=eb;k.trigger("jsp-arrow-change",
[Bb,fc,vc,qc])}va(Ha,eb);xb.css("left",ua);k.trigger("jsp-scroll-x",[-ua,Ha,eb]).trigger("scroll")}function oa(ua,Ha){if(bb.showArrows){jc[ua?"addClass":"removeClass"]("jspDisabled");Ib[Ha?"addClass":"removeClass"]("jspDisabled")}}function va(ua,Ha){if(bb.showArrows){Yb[ua?"addClass":"removeClass"]("jspDisabled");kc[Ha?"addClass":"removeClass"]("jspDisabled")}}function ja(ua,Ha){O(ua/(ic-Kb)*xc,Ha)}function Ca(ua,Ha){xa(ua/(Tb-Hb)*Lb,Ha)}function Xa(ua,Ha,eb){var db,ib,sb=0,zb=0,yb,Cb,Zb;try{db=b(ua)}catch(yc){return}ib=
db.outerHeight();ua=db.outerWidth();Gb.scrollTop(0);for(Gb.scrollLeft(0);!db.is(".jspPane");){sb+=db.position().top;zb+=db.position().left;db=db.offsetParent();if(/^body|html$/i.test(db[0].nodeName))return}db=fb();yb=db+Kb;if(sb<db||Ha)Cb=sb-bb.verticalGutter;else if(sb+ib>yb)Cb=sb-Kb+ib+bb.verticalGutter;Cb&&ja(Cb,eb);sb=hb();Cb=sb+Hb;if(zb<sb||Ha)Zb=zb-bb.horizontalGutter;else if(zb+ua>Cb)Zb=zb-Hb+ua+bb.horizontalGutter;Zb&&Ca(Zb,eb)}function hb(){return-xb.position().left}function fb(){return-xb.position().top}
function Sb(){var ua=ic-Kb;return ua>20&&ua-fb()<10}function Jc(){var ua=Tb-Hb;return ua>20&&ua-hb()<10}function Fc(){Gb.unbind(Qc).bind(Qc,function(ua,Ha,eb,db){ua=ec;Ha=$b;Xb.scrollBy(eb*bb.mouseWheelSpeed,-db*bb.mouseWheelSpeed,false);return ua==ec&&Ha==$b})}function Ra(){Gb.unbind(Qc)}function Db(){return false}function Wb(){xb.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(ua){Xa(ua.target,false)})}function u(){xb.find(":input,a").unbind("focus.jsp")}function Pc(){function ua(){var ib=
ec,sb=$b;switch(Ha){case 40:Xb.scrollByY(bb.keyboardSpeed,false);break;case 38:Xb.scrollByY(-bb.keyboardSpeed,false);break;case 34:case 32:Xb.scrollByY(Kb*bb.scrollPagePercent,false);break;case 33:Xb.scrollByY(-Kb*bb.scrollPagePercent,false);break;case 39:Xb.scrollByX(bb.keyboardSpeed,false);break;case 37:Xb.scrollByX(-bb.keyboardSpeed,false);break}return eb=ib!=ec||sb!=$b}var Ha,eb,db=[];sc&&db.push(uc[0]);cc&&db.push(Kc[0]);xb.focus(function(){k.focus()});k.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",
function(ib){if(!(ib.target!==this&&!(db.length&&b(ib.target).closest(db).length))){var sb=ec,zb=$b;switch(ib.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:Ha=ib.keyCode;ua();break;case 35:ja(ic-Kb);Ha=null;break;case 36:ja(0);Ha=null;break}eb=ib.keyCode==Ha&&sb!=ec||zb!=$b;return!eb}}).bind("keypress.jsp",function(ib){ib.keyCode==Ha&&ua();return!eb});if(bb.hideFocus){k.css("outline","none");"hideFocus"in Gb[0]&&k.attr("hideFocus",true)}else{k.css("outline","");"hideFocus"in Gb[0]&&
k.attr("hideFocus",false)}}function bd(){k.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function dd(){if(location.hash&&location.hash.length>1){var ua,Ha,eb=escape(location.hash.substr(1));try{ua=b("#"+eb+', a[name="'+eb+'"]')}catch(db){return}if(ua.length&&xb.find(eb))if(Gb.scrollTop()===0)Ha=setInterval(function(){if(Gb.scrollTop()>0){Xa(ua,true);b(document).scrollTop(Gb.position().top);clearInterval(Ha)}},50);else{Xa(ua,true);b(document).scrollTop(Gb.position().top)}}}
function ad(){if(!b(document.body).data("jspHijack")){b(document.body).data("jspHijack",true);b(document.body).delegate("a[href*=#]","click",function(ua){var Ha=this.href.substr(0,this.href.indexOf("#")),eb=location.href,db;if(location.href.indexOf("#")!==-1)eb=location.href.substr(0,location.href.indexOf("#"));if(Ha===eb){Ha=escape(this.href.substr(this.href.indexOf("#")+1));try{db=b("#"+Ha+', a[name="'+Ha+'"]')}catch(ib){return}if(db.length){Ha=db.closest(".jspScrollable");Ha.data("jsp").scrollToElement(db,
true);if(Ha[0].scrollIntoView){eb=b(a).scrollTop();db=db.offset().top;if(db<eb||db>eb+b(a).height())Ha[0].scrollIntoView()}ua.preventDefault()}}})}}function wc(){var ua,Ha,eb,db,ib,sb=false;Gb.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(zb){zb=zb.originalEvent.touches[0];ua=hb();Ha=fb();eb=zb.pageX;db=zb.pageY;ib=false;sb=true}).bind("touchmove.jsp",function(zb){if(sb){zb=zb.originalEvent.touches[0];var yb=ec,Cb=$b;Xb.scrollTo(ua+eb-zb.pageX,
Ha+db-zb.pageY);ib=ib||Math.abs(eb-zb.pageX)>5||Math.abs(db-zb.pageY)>5;return yb==ec&&Cb==$b}}).bind("touchend.jsp",function(){sb=false}).bind("click.jsp-touchclick",function(){if(ib)return ib=false})}function Vc(){var ua=fb(),Ha=hb();k.removeClass("jspScrollable").unbind(".jsp");k.replaceWith(Ub.append(xb.children()));Ub.scrollTop(ua);Ub.scrollLeft(Ha);Hc&&clearInterval(Hc)}var bb,Xb=this,xb,Hb,Kb,Gb,Tb,ic,Ac,Bc,cc,sc,dc,xc,$b,Ab,Lb,ec,Kc,Aa,Wc,tc,Ob,jc,Ib,uc,Pb,Mb,Ta,Yb,kc,Hc,rb,Nb,Ic,Bb=true,
vc=true,fc=false,qc=false,Ub=k.clone(false,false).empty(),Qc=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";rb=k.css("paddingTop")+" "+k.css("paddingRight")+" "+k.css("paddingBottom")+" "+k.css("paddingLeft");Nb=(parseInt(k.css("paddingLeft"),10)||0)+(parseInt(k.css("paddingRight"),10)||0);b.extend(Xb,{reinitialise:function(ua){ua=b.extend({},bb,ua);s(ua)},scrollToElement:function(ua,Ha,eb){Xa(ua,Ha,eb)},scrollTo:function(ua,Ha,eb){Ca(ua,eb);ja(Ha,eb)},scrollToX:function(ua,Ha){Ca(ua,Ha)},
scrollToY:function(ua,Ha){ja(ua,Ha)},scrollToPercentX:function(ua,Ha){Ca(ua*(Tb-Hb),Ha)},scrollToPercentY:function(ua,Ha){ja(ua*(ic-Kb),Ha)},scrollBy:function(ua,Ha,eb){Xb.scrollByX(ua,eb);Xb.scrollByY(Ha,eb)},scrollByX:function(ua,Ha){ua=(hb()+Math[ua<0?"floor":"ceil"](ua))/(Tb-Hb);xa(ua*Lb,Ha)},scrollByY:function(ua,Ha){ua=(fb()+Math[ua<0?"floor":"ceil"](ua))/(ic-Kb);O(ua*xc,Ha)},positionDragX:function(ua,Ha){xa(ua,Ha)},positionDragY:function(ua,Ha){O(ua,Ha)},animate:function(ua,Ha,eb,db){var ib=
{};ib[Ha]=eb;ua.animate(ib,{duration:bb.animateDuration,easing:bb.animateEase,queue:false,step:db})},getContentPositionX:function(){return hb()},getContentPositionY:function(){return fb()},getContentWidth:function(){return Tb},getContentHeight:function(){return ic},getPercentScrolledX:function(){return hb()/(Tb-Hb)},getPercentScrolledY:function(){return fb()/(ic-Kb)},getIsScrollableH:function(){return sc},getIsScrollableV:function(){return cc},getContentPane:function(){return xb},scrollToBottom:function(ua){O(xc,
ua)},hijackInternalLinks:b.noop,destroy:function(){Vc()}});s(o)}f=b.extend({},b.fn.jScrollPane.defaults,f);b.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){f[this]=f[this]||f.speed});return this.each(function(){var k=b(this),o=k.data("jsp");if(o)o.reinitialise(f);else{o=new g(k,f);k.data("jsp",o)}})};b.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,
verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:d,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,
speed:30,scrollPagePercent:0.8}})(jQuery,this);steal.loaded("lib/jquery.jscrollpane.js");
(function(b){function a(g){var k=g||window.event,o=[].slice.call(arguments,1),s=0,A=0,G=0;g=b.event.fix(k);g.type="mousewheel";if(k.wheelDelta)s=k.wheelDelta/120;if(k.detail)s=-k.detail/3;G=s;if(k.axis!==undefined&&k.axis===k.HORIZONTAL_AXIS){G=0;A=-1*s}if(k.wheelDeltaY!==undefined)G=k.wheelDeltaY/120;if(k.wheelDeltaX!==undefined)A=-1*k.wheelDeltaX/120;o.unshift(g,s,A,G);return(b.event.dispatch||b.event.handle).apply(this,o)}var d=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var f=d.length;f;)b.event.fixHooks[d[--f]]=
b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var g=d.length;g;)this.addEventListener(d[--g],a,false);else this.onmousewheel=a},teardown:function(){if(this.removeEventListener)for(var g=d.length;g;)this.removeEventListener(d[--g],a,false);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(g){return g?this.bind("mousewheel",g):this.trigger("mousewheel")},unmousewheel:function(g){return this.unbind("mousewheel",g)}})})(jQuery);steal.loaded("lib/wheel.js");
steal("jquery/lang/json",function(){jQuery.cookie=function(b,a,d){if(typeof a!="undefined"){d=d||{};if(a===null){a="";d.expires=-1}if(typeof a=="object"&&jQuery.toJSON)a=jQuery.toJSON(a);var f="";if(d.expires&&(typeof d.expires=="number"||d.expires.toUTCString)){if(typeof d.expires=="number"){f=new Date;f.setTime(f.getTime()+d.expires*24*60*60*1E3)}else f=d.expires;f="; expires="+f.toUTCString()}var g=d.path?"; path="+d.path:"",k=d.domain?"; domain="+d.domain:"";d=d.secure?"; secure":"";document.cookie=
[b,"=",encodeURIComponent(a),f,g,k,d].join("")}else{a=null;if(document.cookie&&document.cookie!=""){d=document.cookie.split(";");for(f=0;f<d.length;f++){g=jQuery.trim(d[f]);if(g.substring(0,b.length+1)==b+"="){a=decodeURIComponent(g.substring(b.length+1));break}}}if(jQuery.evalJSON&&a&&a.match(/^\s*\{/))try{a=jQuery.evalJSON(a)}catch(o){}return a}}});steal.loaded("jquery/dom/cookie/cookie.js");
steal("jquery/class",function(){$.Class("PollVoters",{},{_inited:false,_timer:null,_action:null,_avasBox:null,showed:false,init:function(b){var a=this;this._inited=true;this._avasBox=b;this._timer&&clearInterval(this._timer);this._avasBox.unbind().hover(function(){a._action=null},function(){a.hide()}).mouseleave(function(){a.hide()});this._timer=setInterval(function(){if(a._action=="show"){a._avasBox.show();a.showed=true;a._action=null}else if(a._action=="hide"){a._avasBox.hide();a.showed=false;a._action=
null}},200)},setAvatarContainer:function(b){this._avasBox=b;return this},setContent:function(b){var a=this._avasBox.find(".voters"),d=this._avasBox.find(".guests"),f=d.find(".num-guest-votes");a.empty();if(b.users){for(var g=0,k=b.users.length;g<k;g++)a.append(' <span class="avatar"><img src="'+b.users[g].avatar+'" alt="" title="'+b.users[g].name+'" /></span> ');b.other_users_cnt&&a.append(' <span class="more">'+a.data("excess-message").replace("$cnt",b.other_users_cnt)+"</span> ");a.show()}else a.hide();
if(parseInt(b.guests_cnt,10)){f.html(b.guests_cnt);d.show()}else{d.hide();f.html("0")}return this},setRawContent:function(b){this._avasBox.html(b);return this},show:function(b,a){this._inited||this.init();this._avasBox.css({left:b,top:a});this._action="show"},hide:function(){this._action="hide"}})});steal.loaded("app/models/PollVoters.js");
steal("jquery",function(b){b.toJSON=function(f,g,k,o){if(typeof JSON=="object"&&JSON.stringify)return JSON.stringify(f,g,k);if(!o&&b.isFunction(g))f=g("",f);if(typeof k=="number")k="          ".substring(0,k);k=typeof k=="string"?k.substring(0,10):"";var s=typeof f;if(f===null)return"null";if(!(s=="undefined"||s=="function")){if(s=="number"||s=="boolean")return f+"";if(s=="string")return b.quoteString(f);if(s=="object"){if(typeof f.toJSON=="function")return b.toJSON(f.toJSON(),g,k,true);if(f.constructor===
Date){k=f.getUTCMonth()+1;if(k<10)k="0"+k;o=f.getUTCDate();if(o<10)o="0"+o;var A=f.getUTCFullYear(),G=f.getUTCHours();if(G<10)G="0"+G;var H=f.getUTCMinutes();if(H<10)H="0"+H;var V=f.getUTCSeconds();if(V<10)V="0"+V;f=f.getUTCMilliseconds();if(f<100)f="0"+f;if(f<10)f="0"+f;return'"'+A+"-"+k+"-"+o+"T"+G+":"+H+":"+V+"."+f+'Z"'}o=b.isFunction(g)?function(na,Da){return g(na,Da)}:function(na,Da){return Da};A=k?"\n":"";V=k?" ":"";if(f.constructor===Array){G=[];for(H=0;H<f.length;H++)G.push((b.toJSON(o(H,
f[H]),g,k,true)||"null").replace(/^/gm,k));return"["+A+G.join(","+A)+A+"]"}var ia=[];if(b.isArray(g))G=b.map(g,function(na){return typeof na=="string"||typeof na=="number"?na+"":null});for(H in f){var ha;s=typeof H;if(!(G&&b.inArray(H+"",G)==-1)){if(s=="number")s='"'+H+'"';else if(s=="string")s=b.quoteString(H);else continue;ha=b.toJSON(o(H,f[H]),g,k,true);typeof ha!="undefined"&&ia.push((s+":"+V+ha).replace(/^/gm,k))}}return"{"+A+ia.join(","+A)+A+"}"}}};b.evalJSON=function(f){if(typeof JSON=="object"&&
JSON.parse)return JSON.parse(f);return eval("("+f+")")};b.secureEvalJSON=function(f){if(typeof JSON=="object"&&JSON.parse)return JSON.parse(f);var g=f;g=g.replace(/\\["\\\/bfnrtu]/g,"@");g=g.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");g=g.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(g))return eval("("+f+")");else throw new SyntaxError("Error parsing JSON, source is not valid.");};b.quoteString=function(f){if(f.match(a))return'"'+f.replace(a,function(g){var k=
d[g];if(typeof k==="string")return k;k=g.charCodeAt();return"\\u00"+Math.floor(k/16).toString(16)+(k%16).toString(16)})+'"';return'"'+f+'"'};var a=/["\\\x00-\x1f\x7f-\x9f]/g,d={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}});steal.loaded("jquery/lang/json/json.js");
steal("jquery/class","jquery/lang/string",function(){var b=$.String,a=b.getObject,d=b.underscore,f=b.classize,g=$.isArray,k=$.makeArray,o=$.extend,s=$.each,A=function(O,ca,xa){$.event.trigger(ca,xa,O,true)},G=function(O,ca,xa,Ma,oa,va,ja){if(typeof O=="string"){var Ca=O.indexOf(" ");O=Ca>-1?{url:O.substr(Ca+1),type:O.substr(0,Ca)}:{url:O}}O.data=typeof ca=="object"&&!g(ca)?o(O.data||{},ca):ca;O.url=b.sub(O.url,O.data,true);return $.ajax(o({type:va||"post",dataType:ja||"json",fixture:oa,success:xa,
error:Ma},O))},H=function(O,ca,xa){var Ma=d(O.shortName),oa="-"+Ma+(ca||"");return $.fixture&&$.fixture[oa]?oa:xa||"//"+d(O.fullName).replace(/\.models\..*/,"").replace(/\./g,"/")+"/fixtures/"+Ma+(ca||"")+".json"},V=function(O,ca,xa){ca=ca||{};O=O.id;if(ca[O]&&ca[O]!==xa){ca["new"+b.capitalize(xa)]=ca[O];delete ca[O]}ca[O]=xa;return ca},ia=function(O){return new (O||$.Model.List||Array)},ha=function(O){return O[O.constructor.id]},na=function(O){var ca=[];s(O,function(xa,Ma){if(!Ma["__u Nique"]){ca.push(Ma);
Ma["__u Nique"]=1}});return s(ca,function(xa,Ma){delete Ma["__u Nique"]})},Da=function(O,ca,xa,Ma,oa){var va=$.Deferred(),ja=[O.serialize(),function(fb){O[oa||ca+"d"](fb);va.resolveWith(O,[O,fb,ca])},function(fb){va.rejectWith(O,[fb])}],Ca=O.constructor,Xa,hb=va.promise();ca=="destroy"&&ja.shift();ca!=="create"&&ja.unshift(ha(O));va.then(xa);va.fail(Ma);if((Xa=Ca[ca].apply(Ca,ja))&&Xa.abort)hb.abort=function(){Xa.abort()};return hb},Ja=function(O){return typeof O==="object"&&O!==null&&O},Ka=function(O){return function(){return $.fn[O].apply($([this]),
arguments)}},ma=Ka("bind");Ka=Ka("unbind");ajaxMethods={create:function(O){return function(ca,xa,Ma){return G(O||this._shortName,ca,xa,Ma,H(this,"Create","-restCreate"))}},update:function(O){return function(ca,xa,Ma,oa){return G(O||this._shortName+"/{"+this.id+"}",V(this,xa,ca),Ma,oa,H(this,"Update","-restUpdate"),"put")}},destroy:function(O){return function(ca,xa,Ma){var oa={};oa[this.id]=ca;return G(O||this._shortName+"/{"+this.id+"}",oa,xa,Ma,H(this,"Destroy","-restDestroy"),"delete")}},findAll:function(O){return function(ca,
xa,Ma){return G(O||this._shortName,ca,xa,Ma,H(this,"s"),"get","json "+this._shortName+".models")}},findOne:function(O){return function(ca,xa,Ma){return G(O||this._shortName+"/{"+this.id+"}",ca,xa,Ma,H(this),"get","json "+this._shortName+".model")}}};jQuery.Class("jQuery.Model",{setup:function(O){var ca=this,xa=this.fullName;s(["attributes","validations"],function(oa,va){if(!ca[va]||O[va]===ca[va])ca[va]={}});s(["convert","serialize"],function(oa,va){if(O[va]!=ca[va])ca[va]=o({},O[va],ca[va])});this._fullName=
d(xa.replace(/\./g,"_"));this._shortName=d(this.shortName);if(xa.indexOf("jQuery")!=0){if(this.listType)this.list=new this.listType([]);s(ajaxMethods,function(oa,va){var ja=ca[oa];if(typeof ja!=="function")ca[oa]=va(ja)});xa={};var Ma="* "+this._shortName+".model";xa[Ma+"s"]=this.proxy("models");xa[Ma]=this.proxy("model");$.ajaxSetup({converters:xa})}},attributes:{},model:function(O){if(!O)return null;if(O instanceof this)O=O.serialize();return new this(Ja(O[this._shortName])||Ja(O.data)||Ja(O.attributes)||
O)},models:function(O){if(!O)return null;var ca=ia(this.List),xa=g(O),Ma=$.Model.List;Ma=Ma&&O instanceof Ma;for(var oa=(Ma=xa?O:Ma?O.serialize():O.data)?Ma.length:null,va=0;va<oa;va++)ca.push(this.model(Ma[va]));xa||s(O,function(ja,Ca){if(ja!=="data")ca[ja]=Ca});return ca},id:"id",addAttr:function(O,ca){var xa=this.attributes;xa[O]||(xa[O]=ca);return ca},convert:{date:function(O){var ca=typeof O;return ca==="string"?isNaN(Date.parse(O))?null:Date.parse(O):ca==="number"?new Date(O):O},number:function(O){return parseFloat(O)},
"boolean":function(O){return Boolean(O==="false"?0:O)},"default":function(O,ca,xa){ca=a(xa);var Ma=window;if(xa.indexOf(".")>=0){xa=xa.substring(0,xa.lastIndexOf("."));Ma=a(xa)}return typeof ca=="function"?ca.call(Ma,O):O}},serialize:{"default":function(O){return Ja(O)&&O.serialize?O.serialize():O},date:function(O){return O&&O.getTime()}},bind:ma,unbind:Ka,_ajax:G},{setup:function(O){this.init=true;this.attrs(o({},this.constructor.defaults,O));delete this.init},update:function(O,ca,xa){this.attrs(O);
return this.save(ca,xa)},errors:function(O){if(O)O=g(O)?O:k(arguments);var ca={},xa=this,Ma=function(va,ja){s(ja,function(Ca,Xa){if(Ca=Xa.call(xa)){ca[va]||(ca[va]=[]);ca[va].push(Ca)}})},oa=this.constructor.validations;s(O||oa||{},function(va,ja){if(typeof va=="number"){va=ja;ja=oa[va]}Ma(va,ja||[])});return $.isEmptyObject(ca)?null:ca},attr:function(O,ca,xa,Ma){var oa=f(O),va="get"+oa;if(ca!==undefined){oa="set"+oa;va=this[O];var ja=this,Ca=function(Xa){Ma&&Ma.call(ja,Xa);A(ja,"error."+O,Xa)};if(this[oa]&&
(ca=this[oa](ca,this.proxy("_updateProperty",O,ca,va,xa,Ca),Ca))===undefined)return;this._updateProperty(O,ca,va,xa,Ca);return this}return this[va]?this[va]():this[O]},bind:ma,unbind:Ka,_updateProperty:function(O,ca,xa,Ma,oa){var va=this.constructor,ja=va.attributes[O]||va.addAttr(O,"string"),Ca=va.convert[ja]||va.convert["default"],Xa=null,hb="",fb="updated.";Ma=Ma;var Sb=va.list;ca=this[O]=ca===null?null:Ca.call(va,ca,function(){},ja);this.init||(Xa=this.errors(O));ja=[ca];Ca=[O,ca,xa];if(Xa){hb=
fb="error.";Ma=oa;Ca.splice(1,0,Xa);ja.unshift(Xa)}if(xa!==ca&&!this.init){!Xa&&A(this,hb+O,ja);A(this,fb+"attr",Ca)}Ma&&Ma.apply(this,ja);if(O===va.id&&ca!==null&&Sb)if(xa){if(xa!=ca){Sb.remove(xa);Sb.push(this)}}else Sb.push(this)},removeAttr:function(O){var ca=this[O],xa=false,Ma=this.constructor.attributes;this[O]&&delete this[O];if(Ma[O]){delete Ma[O];xa=true}!this.init&&xa&&ca&&A(this,"updated.attr",[O,null,ca])},attrs:function(O){var ca,xa=this.constructor,Ma=xa.attributes;if(O){xa=xa.id;for(ca in O)ca!=
xa&&this.attr(ca,O[ca]);xa in O&&this.attr(xa,O[xa])}else{O={};for(ca in Ma)if(Ma.hasOwnProperty(ca))O[ca]=this.attr(ca)}return O},serialize:function(){var O=this.constructor,ca=O.attributes,xa,Ma,oa={},va;attributes={};for(va in ca)if(ca.hasOwnProperty(va)){xa=ca[va];Ma=O.serialize[xa]||O.serialize["default"];oa[va]=Ma.call(O,this[va],xa)}return oa},isNew:function(){var O=ha(this);return O===undefined||O===null||O===""},save:function(O,ca){return Da(this,this.isNew()?"create":"update",O,ca)},destroy:function(O,
ca){return Da(this,"destroy",O,ca,"destroyed")},identity:function(){var O=ha(this),ca=this.constructor;return(ca._fullName+"_"+(ca.escapeIdentity?encodeURIComponent(O):O)).replace(/ /g,"_")},elements:function(O){var ca=this.identity();if(this.constructor.escapeIdentity)ca=ca.replace(/([ #;&,.+*~\'%:"!^$[\]()=>|\/])/g,"\\$1");return $("."+ca,O)},hookup:function(O){var ca=this.constructor._shortName,xa=$.data(O,"models")||$.data(O,"models",{});$(O).addClass(ca+" "+this.identity());xa[ca]=this}});s(["created",
"updated","destroyed"],function(O,ca){$.Model.prototype[ca]=function(xa){var Ma=this.constructor;ca==="destroyed"&&Ma.list&&Ma.list.remove(ha(this));xa&&typeof xa=="object"&&this.attrs(xa.attrs?xa.attrs():xa);A(this,ca);A(Ma,ca,this);return[this].concat(k(arguments))}});$.fn.models=function(){var O=[],ca,xa;this.each(function(){s($.data(this,"models")||{},function(Ma,oa){ca=ca===undefined?oa.constructor.List||null:oa.constructor.List===ca?ca:null;O.push(oa)})});xa=ia(ca);xa.push.apply(xa,na(O));return xa};
$.fn.model=function(O){if(O&&O instanceof $.Model){O.hookup(this[0]);return this}else return this.models.apply(this,arguments)[0]}});steal.loaded("jquery/model/model.js");
steal("jquery/model").then(function(b){var a=function(G){return G[0]&&b.isArray(G[0])?G[0]:G[0]instanceof b.Model.List?b.makeArray(G[0]):b.makeArray(G)},d=0,f=function(G){return G[G.constructor.id]},g=jQuery.expando,k=b.each,o=b.Model._ajax,s={update:function(G){return function(H,V,ia,ha){return o(G,{ids:H,attrs:V},ia,ha,"-updateAll","put")}},destroy:function(G){return function(H,V,ia){return o(G,H,V,ia,"-destroyAll","post")}}};b.Class("jQuery.Model.List",{setup:function(){for(var G in s)if(typeof this[G]!==
"function")this[G]=s[G](this[G])}},{init:function(G){this.length=0;this._data={};this._namespace=".list"+ ++d;this.push.apply(this,b.makeArray(G||[]))},slice:function(){return new this.Class(Array.prototype.slice.apply(this,arguments))},match:function(G,H){return this.grep(function(V){return V[G]==H})},grep:function(G,H){return new this.Class(b.grep(this,G,H))},_makeData:function(){var G=this._data={};this.each(function(H,V){G[V[V.constructor.id]]=V})},get:function(){if(!this.length)return new this.Class([]);
this._changed&&this._makeData();var G=[],H=this[0].constructor,V=H.id;H=new RegExp(H._fullName+"_([^ ]+)");for(var ia,ha,na=a(arguments),Da=0;Da<na.length;Da++)(ha=na[Da].nodeName&&(ia=na[Da].className.match(H))?this._data[ia[1]]:this._data[typeof na[Da]=="string"||typeof na[Da]=="number"?na[Da]:na[Da][V]])&&G.push(ha);return new this.Class(G)},remove:function(G){if(!this.length)return[];var H=[],V=this[0].constructor,ia=V.id;V=new RegExp(V._fullName+"_([^ ]+)");var ha;G=a(arguments);for(var na=0;na<
this.length;){for(var Da=this[na],Ja=false,Ka=0;Ka<G.length;Ka++){var ma=G[Ka].nodeName&&(ha=G[Ka].className.match(V))&&ha[1]||(typeof G[Ka]=="string"||typeof G[Ka]=="number"?G[Ka]:G[Ka][ia]);if(Da[ia]==ma){H.push.apply(H,this.splice(na,1));G.splice(Ka,1);Ja=true;break}}Ja||na++}H=new this.Class(H);H.length&&b([this]).trigger("remove",[H]);return H},elements:function(G){return b(this.map(function(H){return"."+H.identity()}).join(","),G)},model:function(){return this.constructor.namespace},findAll:function(G,
H,V){var ia=this;this.model().findAll(G,function(ha){ia.push(ha);H&&H(ia)},V)},destroy:function(G,H){var V=this.map(f),ia=this.slice(0,this.length);if(V.length)this.constructor.destroy(V,function(){k(ia,function(){this.destroyed()});G&&G(ia)},H);else G&&G(this);return this},update:function(G,H,V){var ia=this.map(f),ha=this.slice(0,this.length);if(ia.length)this.constructor.update(ia,G,function(na){var Da=b.extend(G,na||{});k(ha,function(){this.updated(Da)});H&&H(ha)},V);else H&&H(this);return this},
bind:function(){this[g]===undefined&&this.bindings(this);b.fn.bind.apply(b([this]),arguments);return this},unbind:function(){b.fn.unbind.apply(b([this]),arguments);this[g]===undefined&&b(this).unbind(this._namespace);return this},bindings:function(G){var H=this;b(G).bind("destroyed"+this._namespace,function(){H.remove(this)}).bind("updated"+this._namespace,function(){b([H]).trigger("updated",this)})},push:function(){var G=a(arguments);this[g]!==undefined&&this.bindings(G);this._changed=true;var H=
A.apply(this,G);this[g]&&G.length&&b([this]).trigger("add",[G]);return H},serialize:function(){return this.map(function(G){return G.serialize()})}});var A=[].push;k({pop:[].pop,shift:[].shift,unshift:[].unshift,splice:[].splice,indexOf:[].indexOf,sort:[].sort,reverse:[].reverse},function(G,H){b.Model.List.prototype[G]=function(){this._changed=true;return H.apply(this,arguments)}});k(["each","map"],function(G,H){b.Model.List.prototype[H]=function(V,ia){return b[H](this,V,ia)}})});steal.loaded("jquery/model/list/list.js");
steal("jquery/controller","app/tools/common.js",function(b){b.Controller("App.Show.Socialpost",{defaults:{callerPopup:null,onStartPosting:function(){},onEndPosting:function(){},onSuccess:function(){},onError:function(){},onAllPostsDone:function(){}}},{_actions:[],_isExecuting:false,init:function(a){this.options=b.extend(this.options,a);this._actions=[];this._isExecuting=false;return this},registerAction:function(a){this._isExecuting||this._actions.push(a)},execute:function(){var a=this,d=this._actions;
if(b(d).length){if(!a._isExecuting){a.options.onStartPosting();a._isExecuting=true}var f=d.shift(),g=null,k=null,o=null;if(b(".js-bookmarklet").length){k=b(".js-themes-list").find(".selected").data("id");if(f.message_raw)o=f.message_raw}var s={message:f.message,message_raw:o,provider:f.type,link:f.link,shortUrl:LinkData.shortUrl,themeId:k},A=function(){if(b(d).length)a.execute();else if(a._isExecuting){a._isExecuting=false;a.options.onEndPosting(g);a.options.onAllPostsDone(g,s)}};Theme.Models.Caption.share(s,
function(G){g=G},function(){}).then(function(){if(g.error){a.options.onError(g,s);if(g.error.code==1)A();else{a._actions.unshift(f);a.options.onEndPosting(g);a._isExecuting=false}}else{a.options.onSuccess(g,s);A()}})}}})});steal.loaded("app/show/socialpost.js");
steal("app/show/popup.js","app/tools/secondary-popup-manager.js",function(b){App.Show.Popup("App.SecondaryPopup",{popupHtmlBox:".js-popups-html",selector:null,request:null,create:function(a){if(!this.selector)throw new Error("empty selector for popup");var d=b.isFunction(this.selector)?this.selector(a):this.selector;d=b(d);return d.length?new this(d,a):null},loadHtml:function(a,d){var f=this,g=b.isFunction(this.request)?this.request(d||{}):this.request;b.get("/ajax/get-popup-html",g,function(k){b(f.popupHtmlBox).append(k);
k=f.create(d);a&&a(k)})}},{_title:null,_description:null,_addClass:null,beforeHide:null,onHide:null,onShow:null,hideCloseBtn:false,showCustomHeader:false,init:function(){},show:function(a){PopupSM.setHeader(this._title||"");this._description?PopupSM.setDescription(this._description):PopupSM.setDescription("");PopupSM.depth++;if(PopupSM.depth>1){PopupSM.previousPopup=PopupSM.activePopup;PopupSM.previousPopup.element.removeClass("js-block")}else{b("body").css("overflow","hidden");b("#uvTab").hide()}PopupSM.activePopup=
this;PopupSM.popupWindow.removeClass().addClass("popup-holder "+(this._addClass||""));PopupSM.popupBox.show();this.element.addClass("js-block");b(".js-popup-close-default")[this.hideCloseBtn?"hide":"show"]();PopupSM.popupWindow.find(".popup-header").not(".js-custom-header")[this.showCustomHeader?"hide":"show"]();PopupSM.popupWindow.find(".js-custom-header")[this.showCustomHeader?"show":"hide"]();typeof this.onShow==="function"&&this.onShow();window.Popup&&window.Popup.Manager&&b([Popup.Manager]).trigger(Popup.Manager.EVENT_ON_SHOW,
[this,a]);this._centrify();return this},_centrify:function(){var a=PopupSM.popupWindow,d=PopupSM.popupWindow.outerWidth(),f=a.outerHeight();f=Math.max(50,(b(window).height()-f)/2);a.css({marginLeft:-(d/2),top:f});return this},hide:function(a){if(typeof this.beforeHide==="function")if(this.beforeHide()===false)return false;var d=true;this.element.removeClass("js-block");window.Popup&&window.Popup.Manager&&b([Popup.Manager]).trigger(Popup.Manager.EVENT_ON_HIDE,[this,a]);PopupSM.depth--;if(PopupSM.depth>
0)if(PopupSM.previousPopup){a=PopupSM.previousPopup;PopupSM.previousPopup.element.addClass("js-block");PopupSM.popupWindow.removeClass().addClass("popup-holder "+(a._addClass||""));PopupSM.activePopup=PopupSM.previousPopup._centrify();PopupSM.previousPopup=null;d=false}typeof this.onHide==="function"&&this.onHide();if(d){PopupSM.closeModal();PopupSM.popupWindow.removeAttr("style");b("body").css("overflow","");b("#uvTab").show()}return this}})});steal.loaded("app/popups/secondary-popup.js");
steal("jquery/controller","lib/xCharts/d3.js","app/controllers/history/mylinks/charts/chart.js",function(b){b.Controller("App.History.ChartsController",{init:function(){if(b.browser.name=="msie"&&b.browser.versionNumber<=8){b(".full-stats").each(function(){b(this).addClass("disabled").attr("title","Statistics is not supported in your browser")});b(".js-view-stats").each(function(){b(this).addClass("disabled").attr("title","Statistics is not supported in your browser")})}}},{charts:{},receivedData:{},
init:function(){var a=this;steal("/js/lib/xCharts/xcharts.min.js").then(function(){a.setCustomScales()})},setCustomScales:function(){xChart.setScale("ordinalTime",this.ordinalTimeScale);xChart.setScale("rangedLinear",this.rangedLinear)},".full-stats click":function(a,d){d.preventDefault();if(a.hasClass("disabled"))return false;a=a.closest(".js-link-wrapper");d=a.find(".js-charts-wrapper");this.getChart(a,"traffic","day")&&d.toggle();if(d.is(":visible")){hihit(3049);a.find(".soc-widgets-holder, .js-edit-link, .js-copy-link").addClass("force-show")}else a.find(".soc-widgets-holder, .js-edit-link, .js-copy-link").removeClass("force-show")},
".js-view-stats click":function(){},".js-chart-intervals a click":function(a,d){d.preventDefault();if(a.hasClass("active"))return false;d=a.closest(".js-link-wrapper");var f=d.data("link-id"),g=a.data("lapse"),k=this.loadChartData(f,"traffic",g);f=this.charts[f].traffic;d.find(".js-chart-intervals a").removeClass("active");a.addClass("active");f.changeTimelapse(k,g)},".js-visits-data click":function(a,d){d.preventDefault();a=a.closest(".js-link-wrapper");if(d=this.getChart(a,"browsers")){a.find(".chart-holder").addClass("with-browsers");
a.find(".js-visits-data").addClass("active");a.find(".js-traffic-data").removeClass("active");a.find(".browser-statistics").show();a.find(".js-chart-intervals").hide();d.show()}},getChart:function(a,d,f){var g=a.data("link-id"),k=d=="traffic"?"line":"bar";f=k=="line"?"day":null;if(this.charts[g]&&this.charts[g][d])return this.charts[g][d];return(g=this.loadChartData(g,d,f))?this.createChart(a,g,k,d,f):false},".js-traffic-data click":function(a,d){d.preventDefault();a=a.closest(".js-link-wrapper");
if(d=this.getChart(a,"traffic")){a.find(".chart-holder").removeClass("with-browsers");a.find(".js-traffic-data").addClass("active");a.find(".js-visits-data").removeClass("active");a.find(".browser-statistics").hide();a.find(".js-chart-intervals").show();d.show()}},loadChartData:function(a,d,f){var g=this,k=false;if(!g.receivedData[a]||!g.receivedData[a][d]||!g.receivedData[a][d][f])b.ajax({url:"/history/get-link-stats",type:"POST",data:{linkId:a,type:d,timeLapse:f},async:false,success:function(o){if(o.data)g.saveReceivedData(o.data,
a,d,f);else k=true}});return!k?this.receivedData[a][d][f]:false},saveReceivedData:function(a,d,f,g){this.receivedData[d]=this.receivedData[d]||{};this.receivedData[d][f]=this.receivedData[d][f]||{};this.receivedData[d][f][g]=this.receivedData[d][f][g]||{};this.receivedData[d][f][g]=a},saveChart:function(a,d,f){this.charts[a]=this.charts[a]||{};this.charts[a][f]=this.charts[a][f]||{};return this.charts[a][f]=d},createChart:function(a,d,f,g,k){var o=a.data("link-id");a=new Chart(a,d,f,g,k);return this.saveChart(o,
a,g)},ordinalTimeScale:function(a){a=a[0].data;return d3.time.scale().domain([new Date(a[0].x),new Date(a[a.length-1].x)]).range([0,720])},rangedLinear:function(a){a=a[0].data;for(var d=[0,1],f=0;f<a.length;f++)d.push(a[f].y);return d3.scale.linear().domain([d3.min(d),d3.max(d)]).range([180,0])}})});steal.loaded("app/controllers/history/mylinks/charts/charts.js");
(function(b){function a(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function d(t,C){return function(Y){return H(t.call(this,Y),C)}}function f(t,C){return function(Y){return this.lang().ordinal(t.call(this,Y),C)}}function g(){}function k(t){oa(t);s(this,t)}function o(t){t=Ja(t);var C=t.year||0,Y=t.month||0,sa=t.week||0,wa=t.day||0;this._milliseconds=+(t.millisecond||0)+(t.second||
0)*1E3+(t.minute||0)*6E4+(t.hour||0)*36E5;this._days=+wa+sa*7;this._months=+Y+C*12;this._data={};this._bubble()}function s(t,C){for(var Y in C)if(C.hasOwnProperty(Y))t[Y]=C[Y];if(C.hasOwnProperty("toString"))t.toString=C.toString;if(C.hasOwnProperty("valueOf"))t.valueOf=C.valueOf;return t}function A(t){var C={},Y;for(Y in t)if(t.hasOwnProperty(Y)&&Hc.hasOwnProperty(Y))C[Y]=t[Y];return C}function G(t){return t<0?Math.ceil(t):Math.floor(t)}function H(t,C,Y){var sa=""+Math.abs(t);for(t=t>=0;sa.length<
C;)sa="0"+sa;return(t?Y?"+":"":"-")+sa}function V(t,C,Y,sa){var wa=C._milliseconds,ab=C._days;C=C._months;sa=sa==null?true:sa;wa&&t._d.setTime(+t._d+wa*Y);ab&&$b(t,"Date",xc(t,"Date")+ab*Y);C&&dc(t,xc(t,"Month")+C*Y);if(sa)Aa.updateOffset(t,ab||C)}function ia(t){return Object.prototype.toString.call(t)==="[object Array]"}function ha(t){return Object.prototype.toString.call(t)==="[object Date]"||t instanceof Date}function na(t,C,Y){var sa=Math.min(t.length,C.length),wa=Math.abs(t.length-C.length),
ab=0,lb;for(lb=0;lb<sa;lb++)if(Y&&t[lb]!==C[lb]||!Y&&ma(t[lb])!==ma(C[lb]))ab++;return ab+wa}function Da(t){if(t){var C=t.toLowerCase().replace(/(.)s$/,"$1");t=rd[t]||mc[C]||C}return t}function Ja(t){var C={},Y,sa;for(sa in t)if(t.hasOwnProperty(sa))if(Y=Da(sa))C[Y]=t[sa];return C}function Ka(t){var C,Y;if(t.indexOf("week")===0){C=7;Y="day"}else if(t.indexOf("month")===0){C=12;Y="month"}else return;Aa[t]=function(sa,wa){var ab,lb=Aa.fn._lang[t],Rb=[];if(typeof sa==="number"){wa=sa;sa=b}ab=function(ac){ac=
Aa().utc().set(Y,ac);return lb.call(Aa.fn._lang,ac,sa||"")};if(wa!=null)return ab(wa);else{for(wa=0;wa<C;wa++)Rb.push(ab(wa));return Rb}}}function ma(t){t=+t;var C=0;if(t!==0&&isFinite(t))C=t>=0?Math.floor(t):Math.ceil(t);return C}function O(t,C){return(new Date(Date.UTC(t,C+1,0))).getUTCDate()}function ca(t,C,Y){return Ac(Aa([t,11,31+C-Y]),C,Y).week}function xa(t){return Ma(t)?366:365}function Ma(t){return t%4===0&&t%100!==0||t%400===0}function oa(t){var C;if(t._a&&t._pf.overflow===-2){C=t._a[Ib]<
0||t._a[Ib]>11?Ib:t._a[uc]<1||t._a[uc]>O(t._a[jc],t._a[Ib])?uc:t._a[Pb]<0||t._a[Pb]>23?Pb:t._a[Mb]<0||t._a[Mb]>59?Mb:t._a[Ta]<0||t._a[Ta]>59?Ta:t._a[Yb]<0||t._a[Yb]>999?Yb:-1;if(t._pf._overflowDayOfYear&&(C<jc||C>uc))C=uc;t._pf.overflow=C}}function va(t){if(t._isValid==null){t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated;if(t._strict)t._isValid=t._isValid&&t._pf.charsLeftOver===0&&t._pf.unusedTokens.length===
0}return t._isValid}function ja(t){return t?t.toLowerCase().replace("_","-"):t}function Ca(t,C){return C._isUTC?Aa(t).zone(C._offset||0):Aa(t).local()}function Xa(t,C){C.abbr=t;kc[t]||(kc[t]=new g);kc[t].set(C);return kc[t]}function hb(t){delete kc[t]}function fb(t){var C=0,Y,sa,wa,ab,lb=function(Rb){if(!kc[Rb]&&rb)try{require("./lang/"+Rb)}catch(ac){}return kc[Rb]};if(!t)return Aa.fn._lang;if(!ia(t)){if(sa=lb(t))return sa;t=[t]}for(;C<t.length;){ab=ja(t[C]).split("-");Y=ab.length;for(wa=(wa=ja(t[C+
1]))?wa.split("-"):null;Y>0;){if(sa=lb(ab.slice(0,Y).join("-")))return sa;if(wa&&wa.length>=Y&&na(ab,wa,true)>=Y-1)break;Y--}C++}return Aa.fn._lang}function Sb(t){if(t.match(/\[[\s\S]/))return t.replace(/^\[|\]$/g,"");return t.replace(/\\/g,"")}function Jc(t){var C=t.match(vc),Y,sa;Y=0;for(sa=C.length;Y<sa;Y++)C[Y]=X[C[Y]]?X[C[Y]]:Sb(C[Y]);return function(wa){var ab="";for(Y=0;Y<sa;Y++)ab+=C[Y]instanceof Function?C[Y].call(wa,t):C[Y];return ab}}function Fc(t,C){if(!t.isValid())return t.lang().invalidDate();
C=Ra(C,t.lang());Nc[C]||(Nc[C]=Jc(C));return Nc[C](t)}function Ra(t,C){function Y(wa){return C.longDateFormat(wa)||wa}var sa=5;for(fc.lastIndex=0;sa>=0&&fc.test(t);){t=t.replace(fc,Y);fc.lastIndex=0;sa-=1}return t}function Db(t,C){var Y=C._strict;switch(t){case "DDDD":return Zb;case "YYYY":case "GGGG":case "gggg":return Y?yc:Qc;case "Y":case "G":case "g":return gd;case "YYYYYY":case "YYYYY":case "GGGGG":case "ggggg":return Y?pd:ua;case "S":if(Y)return yb;case "SS":if(Y)return Cb;case "SSS":if(Y)return Zb;
case "DDD":return Ub;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":return eb;case "a":case "A":return fb(C._l)._meridiemParse;case "X":return sb;case "Z":case "ZZ":return db;case "T":return ib;case "SSSS":return Ha;case "MM":case "DD":case "YY":case "GG":case "gg":case "HH":case "hh":case "mm":case "ss":case "ww":case "WW":return Y?Cb:qc;case "M":case "D":case "d":case "H":case "h":case "m":case "s":case "w":case "W":case "e":case "E":return qc;case "Do":return zb;default:return new RegExp(Vc(wc(t.replace("\\",
"")),"i"))}}function Wb(t){t=t||"";t=t.match(db)||[];t=((t[t.length-1]||[])+"").match(zd)||["-",0,0];var C=+(t[1]*60)+ma(t[2]);return t[0]==="+"?-C:C}function u(t,C,Y){var sa=Y._a;switch(t){case "M":case "MM":if(C!=null)sa[Ib]=ma(C)-1;break;case "MMM":case "MMMM":t=fb(Y._l).monthsParse(C);if(t!=null)sa[Ib]=t;else Y._pf.invalidMonth=C;break;case "D":case "DD":if(C!=null)sa[uc]=ma(C);break;case "Do":if(C!=null)sa[uc]=ma(parseInt(C,10));break;case "DDD":case "DDDD":if(C!=null)Y._dayOfYear=ma(C);break;
case "YY":sa[jc]=Aa.parseTwoDigitYear(C);break;case "YYYY":case "YYYYY":case "YYYYYY":sa[jc]=ma(C);break;case "a":case "A":Y._isPm=fb(Y._l).isPM(C);break;case "H":case "HH":case "h":case "hh":sa[Pb]=ma(C);break;case "m":case "mm":sa[Mb]=ma(C);break;case "s":case "ss":sa[Ta]=ma(C);break;case "S":case "SS":case "SSS":case "SSSS":sa[Yb]=ma(("0."+C)*1E3);break;case "X":Y._d=new Date(parseFloat(C)*1E3);break;case "Z":case "ZZ":Y._useUTC=true;Y._tzm=Wb(C);break;case "w":case "ww":case "W":case "WW":case "d":case "dd":case "ddd":case "dddd":case "e":case "E":t=
t.substr(0,1);case "gg":case "gggg":case "GG":case "GGGG":case "GGGGG":t=t.substr(0,2);if(C){Y._w=Y._w||{};Y._w[t]=C}break}}function Pc(t){var C,Y=[],sa,wa,ab,lb,Rb;if(!t._d){sa=dd(t);if(t._w&&t._a[uc]==null&&t._a[Ib]==null){C=function(ac){var Uc=parseInt(ac,10);return ac?ac.length<3?Uc>68?1900+Uc:2E3+Uc:Uc:t._a[jc]==null?Aa().weekYear():t._a[jc]};wa=t._w;if(wa.GG!=null||wa.W!=null||wa.E!=null)C=Bc(C(wa.GG),wa.W||1,wa.E,4,1);else{ab=fb(t._l);lb=wa.d!=null?Gb(wa.d,ab):wa.e!=null?parseInt(wa.e,10)+
ab._week.dow:0;Rb=parseInt(wa.w,10)||1;wa.d!=null&&lb<ab._week.dow&&Rb++;C=Bc(C(wa.gg),Rb,lb,ab._week.doy,ab._week.dow)}t._a[jc]=C.year;t._dayOfYear=C.dayOfYear}if(t._dayOfYear){C=t._a[jc]==null?sa[jc]:t._a[jc];if(t._dayOfYear>xa(C))t._pf._overflowDayOfYear=true;C=Kb(C,0,t._dayOfYear);t._a[Ib]=C.getUTCMonth();t._a[uc]=C.getUTCDate()}for(C=0;C<3&&t._a[C]==null;++C)t._a[C]=Y[C]=sa[C];for(;C<7;C++)t._a[C]=Y[C]=t._a[C]==null?C===2?1:0:t._a[C];Y[Pb]+=ma((t._tzm||0)/60);Y[Mb]+=ma((t._tzm||0)%60);t._d=(t._useUTC?
Kb:Hb).apply(null,Y)}}function bd(t){var C;if(!t._d){C=Ja(t._i);t._a=[C.year,C.month,C.day,C.hour,C.minute,C.second,C.millisecond];Pc(t)}}function dd(t){var C=new Date;return t._useUTC?[C.getUTCFullYear(),C.getUTCMonth(),C.getUTCDate()]:[C.getFullYear(),C.getMonth(),C.getDate()]}function ad(t){t._a=[];t._pf.empty=true;var C=fb(t._l),Y=""+t._i,sa,wa,ab,lb,Rb=Y.length,ac=0;wa=Ra(t._f,C).match(vc)||[];for(C=0;C<wa.length;C++){ab=wa[C];if(sa=(Y.match(Db(ab,t))||[])[0]){lb=Y.substr(0,Y.indexOf(sa));lb.length>
0&&t._pf.unusedInput.push(lb);Y=Y.slice(Y.indexOf(sa)+sa.length);ac+=sa.length}if(X[ab]){if(sa)t._pf.empty=false;else t._pf.unusedTokens.push(ab);u(ab,sa,t)}else t._strict&&!sa&&t._pf.unusedTokens.push(ab)}t._pf.charsLeftOver=Rb-ac;Y.length>0&&t._pf.unusedInput.push(Y);if(t._isPm&&t._a[Pb]<12)t._a[Pb]+=12;if(t._isPm===false&&t._a[Pb]===12)t._a[Pb]=0;Pc(t);oa(t)}function wc(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(C,Y,sa,wa,ab){return Y||sa||wa||ab})}function Vc(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,
"\\$&")}function bb(t){var C,Y,sa,wa,ab;if(t._f.length===0){t._pf.invalidFormat=true;t._d=new Date(NaN)}else{for(wa=0;wa<t._f.length;wa++){ab=0;C=s({},t);C._pf=a();C._f=t._f[wa];ad(C);if(va(C)){ab+=C._pf.charsLeftOver;ab+=C._pf.unusedTokens.length*10;C._pf.score=ab;if(sa==null||ab<sa){sa=ab;Y=C}}}s(t,Y||C)}}function Xb(t){var C,Y,sa=t._i,wa=od.exec(sa);if(wa){t._pf.iso=true;C=0;for(Y=Xc.length;C<Y;C++)if(Xc[C][1].exec(sa)){t._f=Xc[C][0]+(wa[6]||" ");break}C=0;for(Y=ld.length;C<Y;C++)if(ld[C][1].exec(sa)){t._f+=
ld[C][0];break}if(sa.match(db))t._f+="Z";ad(t)}else t._d=new Date(sa)}function xb(t){var C=t._i,Y=Nb.exec(C);if(C===b)t._d=new Date;else if(Y)t._d=new Date(+Y[1]);else if(typeof C==="string")Xb(t);else if(ia(C)){t._a=C.slice(0);Pc(t)}else if(ha(C))t._d=new Date(+C);else if(typeof C==="object")bd(t);else if(typeof C==="number")t._d=new Date(C);else Aa.createFromInputFallback(t)}function Hb(t,C,Y,sa,wa,ab,lb){C=new Date(t,C,Y,sa,wa,ab,lb);t<1970&&C.setFullYear(t);return C}function Kb(t){var C=new Date(Date.UTC.apply(null,
arguments));t<1970&&C.setUTCFullYear(t);return C}function Gb(t,C){if(typeof t==="string")if(isNaN(t)){t=C.weekdaysParse(t);if(typeof t!=="number")return null}else t=parseInt(t,10);return t}function Tb(t,C,Y,sa,wa){return wa.relativeTime(C||1,!!Y,t,sa)}function ic(t,C,Y){var sa=tc(Math.abs(t)/1E3),wa=tc(sa/60),ab=tc(wa/60),lb=tc(ab/24),Rb=tc(lb/365);sa=sa<45&&["s",sa]||wa===1&&["m"]||wa<45&&["mm",wa]||ab===1&&["h"]||ab<22&&["hh",ab]||lb===1&&["d"]||lb<=25&&["dd",lb]||lb<=45&&["M"]||lb<345&&["MM",tc(lb/
30)]||Rb===1&&["y"]||["yy",Rb];sa[2]=C;sa[3]=t>0;sa[4]=Y;return Tb.apply({},sa)}function Ac(t,C,Y){C=Y-C;Y=Y-t.day();if(Y>C)Y-=7;if(Y<C-7)Y+=7;t=Aa(t).add("d",Y);return{week:Math.ceil(t.dayOfYear()/7),year:t.year()}}function Bc(t,C,Y,sa,wa){var ab=Kb(t,0,1).getUTCDay();Y=Y!=null?Y:wa;C=7*(C-1)+(Y-wa)+(wa-ab+(ab>sa?7:0)-(ab<wa?7:0))+1;return{year:C>0?t:t-1,dayOfYear:C>0?C:xa(t-1)+C}}function cc(t){var C=t._i,Y=t._f;if(C===null)return Aa.invalid({nullInput:true});if(typeof C==="string")t._i=C=fb().preparse(C);
if(Aa.isMoment(C)){t=A(C);t._d=new Date(+C._d)}else if(Y)ia(Y)?bb(t):ad(t);else xb(t);return new k(t)}function sc(t,C){function Y(){typeof console!=="undefined"&&console.warn&&console.warn("Deprecation warning: "+t)}var sa=true;return s(function(){if(sa){Y();sa=false}return C.apply(this,arguments)},C)}function dc(t,C){var Y;if(typeof C==="string"){C=t.lang().monthsParse(C);if(typeof C!=="number")return t}Y=Math.min(t.date(),O(t.year(),C));t._d["set"+(t._isUTC?"UTC":"")+"Month"](C,Y);return t}function xc(t,
C){return t._d["get"+(t._isUTC?"UTC":"")+C]()}function $b(t,C,Y){return C==="Month"?dc(t,Y):t._d["set"+(t._isUTC?"UTC":"")+C](Y)}function Ab(t,C){return function(Y){if(Y!=null){$b(this,t,Y);Aa.updateOffset(this,C);return this}else return xc(this,t)}}function Lb(t){Aa.duration.fn[t]=function(){return this._data[t]}}function ec(t,C){Aa.duration.fn["as"+t]=function(){return+this/C}}function Kc(t){if(typeof ender==="undefined")Wc.moment=t?sc("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",
Aa):Aa}var Aa,Wc=typeof global!=="undefined"?global:this,tc=Math.round,Ob,jc=0,Ib=1,uc=2,Pb=3,Mb=4,Ta=5,Yb=6,kc={},Hc={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},rb=typeof module!=="undefined"&&module.exports&&typeof require!=="undefined",Nb=/^\/?Date\((\-?\d+)/i,Ic=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Bb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,
vc=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,fc=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,qc=/\d\d?/,Ub=/\d{1,3}/,Qc=/\d{1,4}/,ua=/[+\-]?\d{1,6}/,Ha=/\d+/,eb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,db=/Z|[\+\-]\d\d:?\d\d/gi,ib=/T/i,sb=/[\+\-]?\d+(\.\d{1,3})?/,zb=/\d{1,2}/,yb=/\d/,Cb=/\d\d/,Zb=/\d{3}/,yc=/\d{4}/,
pd=/[+-]?\d{6}/,gd=/[+-]?\d+/,od=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Xc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ld=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],zd=/([\+\-]|\d\d)/gi;"Date|Hours|Minutes|Seconds|Milliseconds".split("|");
for(var qd={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},rd={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},mc={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Nc={},D="DDD w W M D d".split(" "),L="M D H h m s w W".split(" "),X={M:function(){return this.month()+
1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return H(this.year()%100,2)},YYYY:function(){return H(this.year(),
4)},YYYYY:function(){return H(this.year(),5)},YYYYYY:function(){var t=this.year();return(t>=0?"+":"-")+H(Math.abs(t),6)},gg:function(){return H(this.weekYear()%100,2)},gggg:function(){return H(this.weekYear(),4)},ggggg:function(){return H(this.weekYear(),5)},GG:function(){return H(this.isoWeekYear()%100,2)},GGGG:function(){return H(this.isoWeekYear(),4)},GGGGG:function(){return H(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),
this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return ma(this.milliseconds()/100)},SS:function(){return H(ma(this.milliseconds()/10),2)},SSS:function(){return H(this.milliseconds(),3)},SSSS:function(){return H(this.milliseconds(),3)},Z:function(){var t=-this.zone(),C="+";if(t<0){t=-t;C="-"}return C+
H(ma(t/60),2)+":"+H(ma(t)%60,2)},ZZ:function(){var t=-this.zone(),C="+";if(t<0){t=-t;C="-"}return C+H(ma(t/60),2)+H(ma(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Pa=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];D.length;){Ob=D.pop();X[Ob+"o"]=f(X[Ob],Ob)}for(;L.length;){Ob=L.pop();X[Ob+Ob]=d(X[Ob],2)}X.DDDD=d(X.DDD,3);s(g.prototype,{set:function(t){var C,Y;for(Y in t){C=
t[Y];if(typeof C==="function")this[Y]=C;else this["_"+Y]=C}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var C,Y;if(!this._monthsParse)this._monthsParse=[];for(C=0;C<12;C++){if(!this._monthsParse[C]){Y=Aa.utc([2E3,C]);Y="^"+this.months(Y,
"")+"|^"+this.monthsShort(Y,"");this._monthsParse[C]=new RegExp(Y.replace(".",""),"i")}if(this._monthsParse[C].test(t))return C}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var C,
Y;if(!this._weekdaysParse)this._weekdaysParse=[];for(C=0;C<7;C++){if(!this._weekdaysParse[C]){Y=Aa([2E3,1]).day(C);Y="^"+this.weekdays(Y,"")+"|^"+this.weekdaysShort(Y,"")+"|^"+this.weekdaysMin(Y,"");this._weekdaysParse[C]=new RegExp(Y.replace(".",""),"i")}if(this._weekdaysParse[C].test(t))return C}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var C=this._longDateFormat[t];if(!C&&this._longDateFormat[t.toUpperCase()]){C=
this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(Y){return Y.slice(1)});this._longDateFormat[t]=C}return C},isPM:function(t){return(t+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,C,Y){return t>11?Y?"pm":"PM":Y?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,C){t=this._calendar[t];return typeof t===
"function"?t.apply(C):t},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,C,Y,sa){var wa=this._relativeTime[Y];return typeof wa==="function"?wa(t,C,Y,sa):wa.replace(/%d/i,t)},pastFuture:function(t,C){t=this._relativeTime[t>0?"future":"past"];return typeof t==="function"?t(C):t.replace(/%s/i,C)},ordinal:function(t){return this._ordinal.replace("%d",
t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return Ac(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});Aa=function(t,C,Y,sa){var wa;if(typeof Y==="boolean"){sa=Y;Y=b}wa={};wa._isAMomentObject=true;wa._i=t;wa._f=C;wa._l=Y;wa._strict=sa;wa._isUTC=false;wa._pf=a();return cc(wa)};Aa.createFromInputFallback=function(t){t._d=new Date(t._i)};Aa.utc=function(t,C,
Y,sa){var wa;if(typeof Y==="boolean"){sa=Y;Y=b}wa={};wa._isAMomentObject=true;wa._useUTC=true;wa._isUTC=true;wa._l=Y;wa._i=t;wa._f=C;wa._strict=sa;wa._pf=a();return cc(wa).utc()};Aa.unix=function(t){return Aa(t*1E3)};Aa.duration=function(t,C){var Y=t,sa=null,wa;if(Aa.isDuration(t))Y={ms:t._milliseconds,d:t._days,M:t._months};else if(typeof t==="number"){Y={};if(C)Y[C]=t;else Y.milliseconds=t}else if(sa=Ic.exec(t)){wa=sa[1]==="-"?-1:1;Y={y:0,d:ma(sa[uc])*wa,h:ma(sa[Pb])*wa,m:ma(sa[Mb])*wa,s:ma(sa[Ta])*
wa,ms:ma(sa[Yb])*wa}}else if(sa=Bb.exec(t)){wa=sa[1]==="-"?-1:1;C=function(ab){ab=ab&&parseFloat(ab.replace(",","."));return(isNaN(ab)?0:ab)*wa};Y={y:C(sa[2]),M:C(sa[3]),d:C(sa[4]),h:C(sa[5]),m:C(sa[6]),s:C(sa[7]),w:C(sa[8])}}sa=new o(Y);if(Aa.isDuration(t)&&t.hasOwnProperty("_lang"))sa._lang=t._lang;return sa};Aa.version="2.5.1";Aa.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Aa.momentProperties=Hc;Aa.updateOffset=function(){};Aa.lang=function(t,C){if(!t)return Aa.fn._lang._abbr;if(C)Xa(ja(t),C);else if(C===
null){hb(t);t="en"}else kc[t]||fb(t);return(Aa.duration.fn._lang=Aa.fn._lang=fb(t))._abbr};Aa.langData=function(t){if(t&&t._lang&&t._lang._abbr)t=t._lang._abbr;return fb(t)};Aa.isMoment=function(t){return t instanceof k||t!=null&&t.hasOwnProperty("_isAMomentObject")};Aa.isDuration=function(t){return t instanceof o};for(Ob=Pa.length-1;Ob>=0;--Ob)Ka(Pa[Ob]);Aa.normalizeUnits=function(t){return Da(t)};Aa.invalid=function(t){var C=Aa.utc(NaN);if(t!=null)s(C._pf,t);else C._pf.userInvalidated=true;return C};
Aa.parseZone=function(){return Aa.apply(null,arguments).parseZone()};Aa.parseTwoDigitYear=function(t){return ma(t)+(ma(t)>68?1900:2E3)};s(Aa.fn=k.prototype,{clone:function(){return Aa(this)},valueOf:function(){return+this._d+(this._offset||0)*6E4},unix:function(){return Math.floor(+this/1E3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=Aa(this).utc();return 0<
t.year()&&t.year()<=9999?Fc(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Fc(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return va(this)},isDSTShifted:function(){if(this._a)return this.isValid()&&na(this._a,(this._isUTC?Aa.utc(this._a):Aa(this._a)).toArray())>0;return false},parsingFlags:function(){return s({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},
local:function(){this.zone(0);this._isUTC=false;return this},format:function(t){t=Fc(this,t||Aa.defaultFormat);return this.lang().postformat(t)},add:function(t,C){t=typeof t==="string"?Aa.duration(+C,t):Aa.duration(t,C);V(this,t,1);return this},subtract:function(t,C){t=typeof t==="string"?Aa.duration(+C,t):Aa.duration(t,C);V(this,t,-1);return this},diff:function(t,C,Y){t=Ca(t,this);var sa=(this.zone()-t.zone())*6E4,wa;C=Da(C);if(C==="year"||C==="month"){wa=(this.daysInMonth()+t.daysInMonth())*432E5;
sa=(this.year()-t.year())*12+(this.month()-t.month());sa+=(this-Aa(this).startOf("month")-(t-Aa(t).startOf("month")))/wa;sa-=(this.zone()-Aa(this).startOf("month").zone()-(t.zone()-Aa(t).startOf("month").zone()))*6E4/wa;if(C==="year")sa/=12}else{wa=this-t;sa=C==="second"?wa/1E3:C==="minute"?wa/6E4:C==="hour"?wa/36E5:C==="day"?(wa-sa)/864E5:C==="week"?(wa-sa)/6048E5:wa}return Y?sa:G(sa)},from:function(t,C){return Aa.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!C)},fromNow:function(t){return this.from(Aa(),
t)},calendar:function(){var t=this.diff(Ca(Aa(),this).startOf("day"),"days",true);t=t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){return Ma(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var C=this._isUTC?this._d.getUTCDay():this._d.getDay();if(t!=null){t=Gb(t,this.lang());return this.add({d:t-
C})}else return C},month:Ab("Month",true),startOf:function(t){t=Da(t);switch(t){case "year":this.month(0);case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}if(t==="week")this.weekday(0);else t==="isoWeek"&&this.isoWeekday(1);return this},endOf:function(t){t=Da(t);return this.startOf(t).add(t==="isoWeek"?"week":t,1).subtract("ms",1)},isAfter:function(t,C){C=typeof C!=="undefined"?
C:"millisecond";return+this.clone().startOf(C)>+Aa(t).startOf(C)},isBefore:function(t,C){C=typeof C!=="undefined"?C:"millisecond";return+this.clone().startOf(C)<+Aa(t).startOf(C)},isSame:function(t,C){C=C||"ms";return+this.clone().startOf(C)===+Ca(t,this).startOf(C)},min:function(t){t=Aa.apply(null,arguments);return t<this?this:t},max:function(t){t=Aa.apply(null,arguments);return t>this?this:t},zone:function(t,C){var Y=this._offset||0;if(t!=null){if(typeof t==="string")t=Wb(t);if(Math.abs(t)<16)t*=
60;this._offset=t;this._isUTC=true;if(Y!==t)if(!C||this._changeInProgress)V(this,Aa.duration(Y-t,"m"),1,false);else if(!this._changeInProgress){this._changeInProgress=true;Aa.updateOffset(this,true);this._changeInProgress=null}}else return this._isUTC?Y:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if(this._tzm)this.zone(this._tzm);else typeof this._i==="string"&&
this.zone(this._i);return this},hasAlignedHourOffset:function(t){t=t?Aa(t).zone():0;return(this.zone()-t)%60===0},daysInMonth:function(){return O(this.year(),this.month())},dayOfYear:function(t){var C=tc((Aa(this).startOf("day")-Aa(this).startOf("year"))/864E5)+1;return t==null?C:this.add("d",t-C)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(t){var C=Ac(this,this.lang()._week.dow,this.lang()._week.doy).year;return t==null?C:this.add("y",t-C)},isoWeekYear:function(t){var C=
Ac(this,1,4).year;return t==null?C:this.add("y",t-C)},week:function(t){var C=this.lang().week(this);return t==null?C:this.add("d",(t-C)*7)},isoWeek:function(t){var C=Ac(this,1,4).week;return t==null?C:this.add("d",(t-C)*7)},weekday:function(t){var C=(this.day()+7-this.lang()._week.dow)%7;return t==null?C:this.add("d",t-C)},isoWeekday:function(t){return t==null?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return ca(this.year(),1,4)},weeksInYear:function(){var t=this._lang._week;
return ca(this.year(),t.dow,t.doy)},get:function(t){t=Da(t);return this[t]()},set:function(t,C){t=Da(t);typeof this[t]==="function"&&this[t](C);return this},lang:function(t){if(t===b)return this._lang;else{this._lang=fb(t);return this}}});Aa.fn.millisecond=Aa.fn.milliseconds=Ab("Milliseconds",false);Aa.fn.second=Aa.fn.seconds=Ab("Seconds",false);Aa.fn.minute=Aa.fn.minutes=Ab("Minutes",false);Aa.fn.hour=Aa.fn.hours=Ab("Hours",true);Aa.fn.date=Ab("Date",true);Aa.fn.dates=sc("dates accessor is deprecated. Use date instead.",
Ab("Date",true));Aa.fn.year=Ab("FullYear",true);Aa.fn.years=sc("years accessor is deprecated. Use year instead.",Ab("FullYear",true));Aa.fn.days=Aa.fn.day;Aa.fn.months=Aa.fn.month;Aa.fn.weeks=Aa.fn.week;Aa.fn.isoWeeks=Aa.fn.isoWeek;Aa.fn.toJSON=Aa.fn.toISOString;s(Aa.duration.fn=o.prototype,{_bubble:function(){var t=this._milliseconds,C=this._days,Y=this._months,sa=this._data;sa.milliseconds=t%1E3;t=G(t/1E3);sa.seconds=t%60;t=G(t/60);sa.minutes=t%60;t=G(t/60);sa.hours=t%24;C+=G(t/24);sa.days=C%30;
Y+=G(C/30);sa.months=Y%12;C=G(Y/12);sa.years=C},weeks:function(){return G(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864E5+this._months%12*2592E6+ma(this._months/12)*31536E6},humanize:function(t){var C=+this,Y=ic(C,!t,this.lang());if(t)Y=this.lang().pastFuture(C,Y);return this.lang().postformat(Y)},add:function(t,C){t=Aa.duration(t,C);this._milliseconds+=t._milliseconds;this._days+=t._days;this._months+=t._months;this._bubble();return this},subtract:function(t,C){t=Aa.duration(t,
C);this._milliseconds-=t._milliseconds;this._days-=t._days;this._months-=t._months;this._bubble();return this},get:function(t){t=Da(t);return this[t.toLowerCase()+"s"]()},as:function(t){t=Da(t);return this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:Aa.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),C=Math.abs(this.months()),Y=Math.abs(this.days()),sa=Math.abs(this.hours()),wa=Math.abs(this.minutes()),ab=Math.abs(this.seconds()+this.milliseconds()/1E3);if(!this.asSeconds())return"P0D";
return(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(C?C+"M":"")+(Y?Y+"D":"")+(sa||wa||ab?"T":"")+(sa?sa+"H":"")+(wa?wa+"M":"")+(ab?ab+"S":"")}});for(Ob in qd)if(qd.hasOwnProperty(Ob)){ec(Ob,qd[Ob]);Lb(Ob.toLowerCase())}ec("Weeks",6048E5);Aa.duration.fn.asMonths=function(){return(+this-this.years()*31536E6)/2592E6+this.years()*12};Aa.lang("en",{ordinal:function(t){var C=t%10;C=ma(t%100/10)===1?"th":C===1?"st":C===2?"nd":C===3?"rd":"th";return t+C}});if(rb){module.exports=Aa;Kc(true)}else typeof define===
"function"&&define.amd?define("moment",function(t,C,Y){Y.config&&Y.config()&&Y.config().noGlobal!==true&&Kc(Y.config().noGlobal===b);return Aa}):Kc()}).call(this);steal.loaded("lib/moment.js");
steal("jquery/controller",function(b){b.Controller("App.Show.Popup",{popupBox:b("#big-popup"),popupWindow:b("#big-popup .popup")},{_name:null,_selector:null,_counters:{},_options:{},_addClass:"",_status:false,_hideDefaultCloser:false,init:function(a,d){this._name=d.name;this._selector=d.selector;this._counters=d.counters||{};this._options=d.options||{}},getName:function(){return this._name||this.name},getSelector:function(){return this._selector},show:function(){if(NL_APP_DATA.nopopups)return this;
Popup.Manager.getActive()&&Popup.Manager.hide();App.Show.Popup.popupWindow.removeClass().addClass("popup "+this._addClass);App.Show.Popup.popupBox.show().find(".popup").find(this.getSelector()).addClass("js-block");this.hihit(this.getCounters().open);this.setStatus(true);this._centrify();Popup.Manager.setActive(this);b([Popup.Manager]).trigger(Popup.Manager.EVENT_ON_SHOW,[this]);return this},hide:function(a){if(this.isActive()){App.Show.Popup.popupBox.hide();var d=App.Show.Popup.popupBox.find(".popup");
d.find(this.getSelector()).removeClass("js-block");d.removeAttr("style");this.hihit(this.getCounters().close);Popup.Manager.removeActive();b(this.getSelector()).trigger(Popup.Manager.EVENT_ON_HIDE,[this,a]);b([Popup.Manager]).trigger(Popup.Manager.EVENT_ON_HIDE,[this]);this.setStatus(false)}return this},addClass:function(a){if(App.Show.Popup.popupWindow){App.Show.Popup.popupWindow.addClass(a);this._centrify()}else this._addClass=a;return this},_centrify:function(){var a=App.Show.Popup.popupWindow.first(),
d=parseInt(b(window).width())/2-parseInt(a.innerWidth())/2;a.css("left",d<0?0:d);d=parseInt(b(window).height())/2-parseInt(a.innerHeight())/2;a.css("top",d<0?0:d);return this},setStatus:function(a){this._status=a;return this},isActive:function(){return this._status},getCounters:function(){return this._counters},hihit:function(a){typeof a!="undefined"&&hihit(a)},getOptions:function(){return this._options}})});steal.loaded("app/show/popup.js");
if(!Array.prototype.map)Array.prototype.map=function(b){if(this===void 0||this===null)throw new TypeError;var a=Object(this),d=a.length>>>0;if(typeof b!=="function")throw new TypeError;for(var f=new Array(d),g=arguments.length>=2?arguments[1]:void 0,k=0;k<d;k++)if(k in a)f[k]=b.call(g,a[k],k,a);return f};
if(!Array.prototype.forEach)Array.prototype.forEach=function(b){if(this===void 0||this===null)throw new TypeError;var a=Object(this),d=a.length>>>0;if(typeof b!=="function")throw new TypeError;for(var f=arguments.length>=2?arguments[1]:void 0,g=0;g<d;g++)g in a&&b.call(f,a[g],g,a)};
(function(){function b(c){return c!=null&&!isNaN(c)}function a(c){return c.length}function d(c){for(var e=1;c*e%1;)e*=10;return e}function f(c,e){try{for(var h in e)Object.defineProperty(c.prototype,h,{value:e[h],enumerable:false})}catch(l){c.prototype=e}}function g(){}function k(c){return Ld+c in this}function o(c){c=Ld+c;return c in this&&delete this[c]}function s(){var c=[];this.forEach(function(e){c.push(e)});return c}function A(){var c=0;for(var e in this)e.charCodeAt(0)===ye&&++c;return c}function G(){for(var c in this)if(c.charCodeAt(0)===
ye)return false;return true}function H(){}function V(c,e,h){return function(){var l=h.apply(e,arguments);return l===e?c:l}}function ia(c,e){if(e in c)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var h=0,l=Wf.length;h<l;++h){var n=Wf[h]+e;if(n in c)return n}}function ha(){}function na(){}function Da(c){function e(){for(var n=h,m=-1,r=n.length,q;++m<r;)if(q=n[m].on)q.apply(this,arguments);return c}var h=[],l=new g;e.on=function(n,m){var r=l.get(n),q;if(arguments.length<2)return r&&r.on;if(r){r.on=
null;h=h.slice(0,q=h.indexOf(r)).concat(h.slice(q+1));l.remove(n)}m&&h.push(l.set(n,{on:m}));return c};return e}function Ja(){K.event.preventDefault()}function Ka(){for(var c=K.event,e;e=c.sourceEvent;)c=e;return c}function ma(c){for(var e=new na,h=0,l=arguments.length;++h<l;)e[arguments[h]]=Da(e);e.of=function(n,m){return function(r){try{var q=r.sourceEvent=K.event;r.target=c;K.event=r;e[r.type].apply(n,m)}finally{K.event=q}}};return e}function O(c){ze(c,Jb);return c}function ca(c){return typeof c===
"function"?c:function(){return ff(c,this)}}function xa(c){return typeof c==="function"?c:function(){return gf(c,this)}}function Ma(c,e){function h(){this.removeAttribute(c)}function l(){this.removeAttributeNS(c.space,c.local)}function n(){this.setAttribute(c,e)}function m(){this.setAttributeNS(c.space,c.local,e)}function r(){var v=e.apply(this,arguments);v==null?this.removeAttribute(c):this.setAttribute(c,v)}function q(){var v=e.apply(this,arguments);v==null?this.removeAttributeNS(c.space,c.local):
this.setAttributeNS(c.space,c.local,v)}c=K.ns.qualify(c);return e==null?c.local?l:h:typeof e==="function"?c.local?q:r:c.local?m:n}function oa(c){return c.trim().replace(/\s+/g," ")}function va(c){return new RegExp("(?:^|\\s+)"+K.requote(c)+"(?:\\s+|$)","g")}function ja(c){return c.trim().split(/^|\s+/)}function Ca(c,e){function h(){for(var m=-1;++m<n;)c[m](this,e)}function l(){for(var m=-1,r=e.apply(this,arguments);++m<n;)c[m](this,r)}c=ja(c).map(Xa);var n=c.length;return typeof e==="function"?l:
h}function Xa(c){var e=va(c);return function(h,l){if(n=h.classList)return l?n.add(c):n.remove(c);var n=h.getAttribute("class")||"";if(l){e.lastIndex=0;e.test(n)||h.setAttribute("class",oa(n+" "+c))}else h.setAttribute("class",oa(n.replace(e," ")))}}function hb(c,e,h){function l(){this.style.removeProperty(c)}function n(){this.style.setProperty(c,e,h)}function m(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(c):this.style.setProperty(c,r,h)}return e==null?l:typeof e==="function"?
m:n}function fb(c,e){function h(){delete this[c]}function l(){this[c]=e}function n(){var m=e.apply(this,arguments);if(m==null)delete this[c];else this[c]=m}return e==null?h:typeof e==="function"?n:l}function Sb(c){return typeof c==="function"?c:(c=K.ns.qualify(c)).local?function(){return this.ownerDocument.createElementNS(c.space,c.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,c)}}function Jc(c){return{__data__:c}}function Fc(c){return function(){return Xf(this,c)}}
function Ra(c){if(!arguments.length)c=K.ascending;return function(e,h){return e&&h?c(e.__data__,h.__data__):!e-!h}}function Db(c,e){for(var h=0,l=c.length;h<l;h++)for(var n=c[h],m=0,r=n.length,q;m<r;m++)if(q=n[m])e(q,m,h);return c}function Wb(c){ze(c,sd);return c}function u(c){var e,h;return function(l,n,m){l=c[m].update;var r=l.length;if(m!=h){h=m;e=0}if(n>=e)e=n+1;for(;!(n=l[e])&&++e<r;);return n}}function Pc(){var c=this.__transition__;c&&++c.active}function bd(c,e,h){function l(){var z=this[r];
if(z){this.removeEventListener(c,z,z.$);delete this[r]}}function n(){var z=v(e,Bd(arguments));l.call(this);this.addEventListener(c,this[r]=z,z.$=h);z._=e}function m(){var z=new RegExp("^__on([^.]+)"+K.requote(c)+"$"),F;for(var E in this)if(F=E.match(z)){var S=this[E];this.removeEventListener(F[1],S,S.$);delete this[E]}}var r="__on"+c,q=c.indexOf("."),v=dd;if(q>0)c=c.substring(0,q);var x=hf.get(c);if(x){c=x;v=ad}return q?e?n:l:e?ha:m}function dd(c,e){return function(h){var l=K.event;K.event=h;e[0]=
this.__data__;try{c.apply(this,e)}finally{K.event=l}}}function ad(c,e){var h=dd(c,e);return function(l){var n=this,m=l.relatedTarget;if(!m||m!==n&&!(m.compareDocumentPosition(n)&8))h.call(n,l)}}function wc(){var c=".dragsuppress-"+ ++Gh,e="click"+c,h=K.select(Lc).on("touchmove"+c,Ja).on("dragstart"+c,Ja).on("selectstart"+c,Ja);if(je){var l=Cd.style,n=l[je];l[je]="none"}return function(m){h.on(c,null);if(je)l[je]=n;if(m){function r(){h.on(e,null)}h.on(e,function(){Ja();r()},true);setTimeout(r,0)}}}
function Vc(c,e){if(e.changedTouches)e=e.changedTouches[0];var h=c.ownerSVGElement||c;if(h.createSVGPoint){var l=h.createSVGPoint();if(jf<0&&(Lc.scrollX||Lc.scrollY)){h=K.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var n=h[0][0].getScreenCTM();jf=!(n.f||n.e);h.remove()}if(jf){l.x=e.pageX;l.y=e.pageY}else{l.x=e.clientX;l.y=e.clientY}l=l.matrixTransform(c.getScreenCTM().inverse());return[l.x,l.y]}h=c.getBoundingClientRect();return[e.clientX-
h.left-c.clientLeft,e.clientY-h.top-c.clientTop]}function bb(c){return c>0?1:c<0?-1:0}function Xb(c,e,h){return(e[0]-c[0])*(h[1]-c[1])-(e[1]-c[1])*(h[0]-c[0])}function xb(c){return c>1?0:c<-1?qb:Math.acos(c)}function Hb(c){return c>1?Sc:c<-1?-Sc:Math.asin(c)}function Kb(c){return((c=Math.exp(c))-1/c)/2}function Gb(c){return((c=Math.exp(c))+1/c)/2}function Tb(c){return((c=Math.exp(2*c))-1)/(c+1)}function ic(c){return(c=Math.sin(c/2))*c}function Ac(){}function Bc(c,e,h){return new cc(c,e,h)}function cc(c,
e,h){this.h=c;this.s=e;this.l=h}function sc(c,e,h){function l(q){if(q>360)q-=360;else if(q<0)q+=360;if(q<60)return m+(r-m)*q/60;if(q<180)return r;if(q<240)return m+(r-m)*(240-q)/60;return m}function n(q){return Math.round(l(q)*255)}var m,r;c=isNaN(c)?0:(c%=360)<0?c+360:c;e=isNaN(e)?0:e<0?0:e>1?1:e;h=h<0?0:h>1?1:h;r=h<=0.5?h*(1+e):h+e-h*e;m=2*h-r;return Ib(n(c+120),n(c),n(c-120))}function dc(c,e,h){return new xc(c,e,h)}function xc(c,e,h){this.h=c;this.c=e;this.l=h}function $b(c,e,h){if(isNaN(c))c=
0;if(isNaN(e))e=0;return Ab(h,Math.cos(c*=mb)*e,Math.sin(c)*e)}function Ab(c,e,h){return new Lb(c,e,h)}function Lb(c,e,h){this.l=c;this.a=e;this.b=h}function ec(c,e,h){c=(c+16)/116;e=c+e/500;h=c-h/200;e=Aa(e)*Yf;c=Aa(c)*Zf;h=Aa(h)*$f;return Ib(tc(3.2404542*e-1.5371385*c-0.4985314*h),tc(-0.969266*e+1.8760108*c+0.041556*h),tc(0.0556434*e-0.2040259*c+1.0572252*h))}function Kc(c,e,h){return c>0?dc(Math.atan2(h,e)*gc,Math.sqrt(e*e+h*h),c):dc(NaN,NaN,c)}function Aa(c){return c>0.206893034?c*c*c:(c-4/29)/
7.787037}function Wc(c){return c>0.008856?Math.pow(c,1/3):7.787037*c+4/29}function tc(c){return Math.round(255*(c<=0.00304?12.92*c:1.055*Math.pow(c,1/2.4)-0.055))}function Ob(c){return Ib(c>>16,c>>8&255,c&255)}function jc(c){return Ob(c)+""}function Ib(c,e,h){return new uc(c,e,h)}function uc(c,e,h){this.r=c;this.g=e;this.b=h}function Pb(c){return c<16?"0"+Math.max(0,c).toString(16):Math.min(255,c).toString(16)}function Mb(c,e,h){var l=0,n=0,m=0,r,q;if(r=/([a-z]+)\((.*)\)/i.exec(c)){q=r[2].split(",");
switch(r[1]){case "hsl":return h(parseFloat(q[0]),parseFloat(q[1])/100,parseFloat(q[2])/100);case "rgb":return e(Hc(q[0]),Hc(q[1]),Hc(q[2]))}}if(h=Ae.get(c))return e(h.r,h.g,h.b);if(c!=null&&c.charAt(0)==="#"){if(c.length===4){l=c.charAt(1);l+=l;n=c.charAt(2);n+=n;m=c.charAt(3);m+=m}else if(c.length===7){l=c.substring(1,3);n=c.substring(3,5);m=c.substring(5,7)}l=parseInt(l,16);n=parseInt(n,16);m=parseInt(m,16)}return e(l,n,m)}function Ta(c,e,h){var l=Math.min(c/=255,e/=255,h/=255),n=Math.max(c,e,
h),m=n-l,r=(n+l)/2;if(m){l=r<0.5?m/(n+l):m/(2-n-l);c=c==n?(e-h)/m+(e<h?6:0):e==n?(h-c)/m+2:(c-e)/m+4;c*=60}else{c=NaN;l=r>0&&r<1?0:c}return Bc(c,l,r)}function Yb(c,e,h){c=kc(c);e=kc(e);h=kc(h);var l=Wc((0.4124564*c+0.3575761*e+0.1804375*h)/Yf),n=Wc((0.2126729*c+0.7151522*e+0.072175*h)/Zf);c=Wc((0.0193339*c+0.119192*e+0.9503041*h)/$f);return Ab(116*n-16,500*(l-n),200*(n-c))}function kc(c){return(c/=255)<=0.04045?c/12.92:Math.pow((c+0.055)/1.055,2.4)}function Hc(c){var e=parseFloat(c);return c.charAt(c.length-
1)==="%"?Math.round(e*2.55):e}function rb(c){return typeof c==="function"?c:function(){return c}}function Nb(c){return c}function Ic(c){return function(e,h,l){if(arguments.length===2&&typeof h==="function"){l=h;h=null}return Bb(e,h,c,l)}}function Bb(c,e,h,l){function n(){var z=v.status,F;if(!z&&v.responseText||z>=200&&z<300||z===304){try{F=h.call(m,v)}catch(E){r.error.call(m,E);return}r.load.call(m,F)}else r.error.call(m,v)}var m={},r=K.dispatch("beforesend","progress","load","error"),q={},v=new XMLHttpRequest,
x=null;if(Lc.XDomainRequest&&!("withCredentials"in v)&&/^(http(s)?:)?\/\//.test(c))v=new XDomainRequest;"onload"in v?(v.onload=v.onerror=n):(v.onreadystatechange=function(){v.readyState>3&&n()});v.onprogress=function(z){var F=K.event;K.event=z;try{r.progress.call(m,v)}finally{K.event=F}};m.header=function(z,F){z=(z+"").toLowerCase();if(arguments.length<2)return q[z];if(F==null)delete q[z];else q[z]=F+"";return m};m.mimeType=function(z){if(!arguments.length)return e;e=z==null?null:z+"";return m};m.responseType=
function(z){if(!arguments.length)return x;x=z;return m};m.response=function(z){h=z;return m};["get","post"].forEach(function(z){m[z]=function(){return m.send.apply(m,[z].concat(Bd(arguments)))}});m.send=function(z,F,E){if(arguments.length===2&&typeof F==="function"){E=F;F=null}v.open(z,c,true);if(e!=null&&!("accept"in q))q.accept=e+",*/*";if(v.setRequestHeader)for(var S in q)v.setRequestHeader(S,q[S]);e!=null&&v.overrideMimeType&&v.overrideMimeType(e);if(x!=null)v.responseType=x;E!=null&&m.on("error",
E).on("load",function(U){E(null,U)});r.beforesend.call(m,v);v.send(F==null?null:F);return m};m.abort=function(){v.abort();return m};K.rebind(m,r,"on");return l==null?m:m.get(vc(l))}function vc(c){return c.length===1?function(e,h){c(e==null?h:null)}:c}function fc(){var c=qc();c=Ub()-c;if(c>24){if(isFinite(c)){clearTimeout(Be);Be=setTimeout(fc,c)}Ce=0}else{Ce=1;ag(fc)}}function qc(){var c=Date.now();for(td=De;td;){if(c>=td.t)td.f=td.c(c-td.t);td=td.n}return c}function Ub(){for(var c,e=De,h=Infinity;e;)if(e.f)e=
c?(c.n=e.n):(De=e.n);else{if(e.t<h)h=e.t;e=(c=e).n}Ee=c;return h}function Qc(c,e){return e-(c?Math.ceil(Math.log(c)/Math.LN10):1)}function ua(c,e){var h=Math.pow(10,pb(8-e)*3);return{scale:e>8?function(l){return l/h}:function(l){return l*h},symbol:c}}function Ha(c){var e=c.decimal,h=c.thousands,l=c.grouping,n=c.currency,m=l?function(r){for(var q=r.length,v=[],x=0,z=l[0];q>0&&z>0;){v.push(r.substring(q-=z,q+z));z=l[x=(x+1)%l.length]}return v.reverse().join(h)}:Nb;return function(r){r=bg.exec(r);var q=
r[1]||" ",v=r[2]||">",x=r[3]||"",z=r[4]||"",F=r[5],E=+r[6],S=r[7],U=r[8],T=r[9],N=1,Q="",ba="",M=false;if(U)U=+U.substring(1);if(F||q==="0"&&v==="="){F=q="0";v="=";if(S)E-=Math.floor((E-1)/4)}switch(T){case "n":S=true;T="g";break;case "%":N=100;ba="%";T="f";break;case "p":N=100;ba="%";T="r";break;case "b":case "o":case "x":case "X":if(z==="#")Q="0"+T.toLowerCase();case "c":case "d":M=true;U=0;break;case "s":N=-1;T="r";break}if(z==="$"){Q=n[0];ba=n[1]}if(T=="r"&&!U)T="g";if(U!=null)if(T=="g")U=Math.max(1,
Math.min(21,U));else if(T=="e"||T=="f")U=Math.max(0,Math.min(20,U));T=Hh.get(T)||eb;var fa=F&&S;return function(ka){var da=ba;if(M&&ka%1)return"";var pa=ka<0||ka===0&&1/ka<0?(ka=-ka,"-"):x;if(N<0){da=K.formatPrefix(ka,U);ka=da.scale(ka);da=da.symbol+ba}else ka*=N;ka=T(ka,U);var la=ka.lastIndexOf("."),Ba=la<0?ka:ka.substring(0,la);ka=la<0?"":e+ka.substring(la+1);if(!F&&S)Ba=m(Ba);la=Q.length+Ba.length+ka.length+(fa?0:pa.length);var Ua=la<E?(new Array(la=E-la+1)).join(q):"";if(fa)Ba=m(Ua+Ba);pa+=Q;
ka=Ba+ka;return(v==="<"?pa+ka+Ua:v===">"?Ua+pa+ka:v==="^"?Ua.substring(0,la>>=1)+pa+ka+Ua.substring(la):pa+(fa?ka:Ua+ka))+da}}}function eb(c){return c+""}function db(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ib(c,e,h){function l(x){var z=c(x),F=m(z,1);return x-z<F-x?z:F}function n(x){e(x=c(new Mc(x-1)),1);return x}function m(x,z){e(x=new Mc(+x),z);return x}function r(x,z,F){x=n(x);var E=[];if(F>1)for(;x<z;){h(x)%F||E.push(new Date(+x));e(x,1)}else for(;x<
z;){E.push(new Date(+x));e(x,1)}return E}function q(x,z,F){try{Mc=db;var E=new db;E._=x;return r(E,z,F)}finally{Mc=Date}}c.floor=c;c.round=l;c.ceil=n;c.offset=m;c.range=r;var v=c.utc=sb(c);v.floor=v;v.round=sb(l);v.ceil=sb(n);v.offset=sb(m);v.range=q;return c}function sb(c){return function(e,h){try{Mc=db;var l=new db;l._=e;return c(l,h)._}finally{Mc=Date}}}function zb(c){function e(ea){function ta(kb){for(var Qa=[],jb=-1,Eb=0,Qb,Ec;++jb<Za;)if(ea.charCodeAt(jb)===37){Qa.push(ea.substring(Eb,jb));
if((Qb=cg[Eb=ea.charAt(++jb)])!=null)Eb=ea.charAt(++jb);if(Ec=tb[Eb])Eb=Ec(kb,Qb==null?Eb==="e"?" ":"0":Qb);Qa.push(Eb);Eb=jb+1}Qa.push(ea.substring(Eb,jb));return Qa.join("")}var Za=ea.length;ta.parse=function(kb){var Qa={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(h(Qa,ea,kb,0)!=kb.length)return null;if("p"in Qa)Qa.H=Qa.H%12+Qa.p*12;kb=Qa.Z!=null&&Mc!==db;var jb=new (kb?db:Mc);if("j"in Qa)jb.setFullYear(Qa.y,0,Qa.j);else if("w"in Qa&&("W"in Qa||"U"in Qa)){jb.setFullYear(Qa.y,0,1);jb.setFullYear(Qa.y,
0,"W"in Qa?(Qa.w+6)%7+Qa.W*7-(jb.getDay()+5)%7:Qa.w+Qa.U*7-(jb.getDay()+6)%7)}else jb.setFullYear(Qa.y,Qa.m,Qa.d);jb.setHours(Qa.H+Math.floor(Qa.Z/100),Qa.M+Qa.Z%100,Qa.S,Qa.L);return kb?jb._:jb};ta.toString=function(){return ea};return ta}function h(ea,ta,Za,kb){for(var Qa,jb=0,Eb=ta.length,Qb=Za.length;jb<Eb;){if(kb>=Qb)return-1;Qa=ta.charCodeAt(jb++);if(Qa===37){Qa=ta.charAt(jb++);Qa=nb[Qa in cg?ta.charAt(jb++):Qa];if(!Qa||(kb=Qa(ea,Za,kb))<0)return-1}else if(Qa!=Za.charCodeAt(kb++))return-1}return kb}
function l(ea,ta,Za){da.lastIndex=0;return(ta=da.exec(ta.substring(Za)))?(ea.w=pa.get(ta[0].toLowerCase()),Za+ta[0].length):-1}function n(ea,ta,Za){fa.lastIndex=0;return(ta=fa.exec(ta.substring(Za)))?(ea.w=ka.get(ta[0].toLowerCase()),Za+ta[0].length):-1}function m(ea,ta,Za){Ua.lastIndex=0;return(ta=Ua.exec(ta.substring(Za)))?(ea.m=gb.get(ta[0].toLowerCase()),Za+ta[0].length):-1}function r(ea,ta,Za){la.lastIndex=0;return(ta=la.exec(ta.substring(Za)))?(ea.m=Ba.get(ta[0].toLowerCase()),Za+ta[0].length):
-1}function q(ea,ta,Za){return h(ea,tb.c.toString(),ta,Za)}function v(ea,ta,Za){return h(ea,tb.x.toString(),ta,Za)}function x(ea,ta,Za){return h(ea,tb.X.toString(),ta,Za)}function z(ea,ta,Za){ta=M.get(ta.substring(Za,Za+=2).toLowerCase());return ta==null?-1:(ea.p=ta,Za)}var F=c.dateTime,E=c.date,S=c.time,U=c.periods,T=c.days,N=c.shortDays,Q=c.months,ba=c.shortMonths;e.utc=function(ea){function ta(kb){try{Mc=db;var Qa=new Mc;Qa._=kb;return Za(Qa)}finally{Mc=Date}}var Za=e(ea);ta.parse=function(kb){try{Mc=
db;var Qa=Za.parse(kb);return Qa&&Qa._}finally{Mc=Date}};ta.toString=Za.toString;return ta};e.multi=e.utc.multi=C;var M=K.map(),fa=Cb(T),ka=Zb(T),da=Cb(N),pa=Zb(N),la=Cb(Q),Ba=Zb(Q),Ua=Cb(ba),gb=Zb(ba);U.forEach(function(ea,ta){M.set(ea.toLowerCase(),ta)});var tb={a:function(ea){return N[ea.getDay()]},A:function(ea){return T[ea.getDay()]},b:function(ea){return ba[ea.getMonth()]},B:function(ea){return Q[ea.getMonth()]},c:e(F),d:function(ea,ta){return yb(ea.getDate(),ta,2)},e:function(ea,ta){return yb(ea.getDate(),
ta,2)},H:function(ea,ta){return yb(ea.getHours(),ta,2)},I:function(ea,ta){return yb(ea.getHours()%12||12,ta,2)},j:function(ea,ta){return yb(1+cb.dayOfYear(ea),ta,3)},L:function(ea,ta){return yb(ea.getMilliseconds(),ta,3)},m:function(ea,ta){return yb(ea.getMonth()+1,ta,2)},M:function(ea,ta){return yb(ea.getMinutes(),ta,2)},p:function(ea){return U[+(ea.getHours()>=12)]},S:function(ea,ta){return yb(ea.getSeconds(),ta,2)},U:function(ea,ta){return yb(cb.sundayOfYear(ea),ta,2)},w:function(ea){return ea.getDay()},
W:function(ea,ta){return yb(cb.mondayOfYear(ea),ta,2)},x:e(E),X:e(S),y:function(ea,ta){return yb(ea.getFullYear()%100,ta,2)},Y:function(ea,ta){return yb(ea.getFullYear()%1E4,ta,4)},Z:Pa,"%":function(){return"%"}},nb={a:l,A:n,b:m,B:r,c:q,d:rd,e:rd,H:Nc,I:Nc,j:mc,L:X,m:qd,M:D,p:z,S:L,U:pd,w:yc,W:gd,x:v,X:x,y:Xc,Y:od,Z:ld,"%":t};return e}function yb(c,e,h){var l=c<0?"-":"";c=(l?-c:c)+"";var n=c.length;return l+(n<h?(new Array(h-n+1)).join(e)+c:c)}function Cb(c){return new RegExp("^(?:"+c.map(K.requote).join("|")+
")","i")}function Zb(c){for(var e=new g,h=-1,l=c.length;++h<l;)e.set(c[h].toLowerCase(),h);return e}function yc(c,e,h){pc.lastIndex=0;return(e=pc.exec(e.substring(h,h+1)))?(c.w=+e[0],h+e[0].length):-1}function pd(c,e,h){pc.lastIndex=0;return(e=pc.exec(e.substring(h)))?(c.U=+e[0],h+e[0].length):-1}function gd(c,e,h){pc.lastIndex=0;return(e=pc.exec(e.substring(h)))?(c.W=+e[0],h+e[0].length):-1}function od(c,e,h){pc.lastIndex=0;return(e=pc.exec(e.substring(h,h+4)))?(c.y=+e[0],h+e[0].length):-1}function Xc(c,
e,h){pc.lastIndex=0;return(e=pc.exec(e.substring(h,h+2)))?(c.y=zd(+e[0]),h+e[0].length):-1}function ld(c,e,h){return/^[+-]\d{4}$/.test(e=e.substring(h,h+5))?(c.Z=+e,h+5):-1}function zd(c){return c+(c>68?1900:2E3)}function qd(c,e,h){pc.lastIndex=0;return(e=pc.exec(e.substring(h,h+2)))?(c.m=e[0]-1,h+e[0].length):-1}function rd(c,e,h){pc.lastIndex=0;return(e=pc.exec(e.substring(h,h+2)))?(c.d=+e[0],h+e[0].length):-1}function mc(c,e,h){pc.lastIndex=0;return(e=pc.exec(e.substring(h,h+3)))?(c.j=+e[0],h+
e[0].length):-1}function Nc(c,e,h){pc.lastIndex=0;return(e=pc.exec(e.substring(h,h+2)))?(c.H=+e[0],h+e[0].length):-1}function D(c,e,h){pc.lastIndex=0;return(e=pc.exec(e.substring(h,h+2)))?(c.M=+e[0],h+e[0].length):-1}function L(c,e,h){pc.lastIndex=0;return(e=pc.exec(e.substring(h,h+2)))?(c.S=+e[0],h+e[0].length):-1}function X(c,e,h){pc.lastIndex=0;return(e=pc.exec(e.substring(h,h+3)))?(c.L=+e[0],h+e[0].length):-1}function Pa(c){var e=c.getTimezoneOffset();c=e>0?"-":"+";var h=~~(pb(e)/60);e=pb(e)%
60;return c+yb(h,"0",2)+yb(e,"0",2)}function t(c,e,h){dg.lastIndex=0;return(c=dg.exec(e.substring(h,h+1)))?h+c[0].length:-1}function C(c){for(var e=c.length,h=-1;++h<e;)c[h][0]=this(c[h][0]);return function(l){for(var n=0,m=c[n];!m[1](l);)m=c[++n];return m[0](l)}}function Y(){}function sa(c,e,h){var l=h.s=c+e,n=l-c;h.t=c-(l-n)+(e-n)}function wa(c,e){c&&eg.hasOwnProperty(c.type)&&eg[c.type](c,e)}function ab(c,e,h){var l=-1;h=c.length-h;var n;for(e.lineStart();++l<h;){n=c[l];e.point(n[0],n[1],n[2])}e.lineEnd()}
function lb(c,e){var h=-1,l=c.length;for(e.polygonStart();++h<l;)ab(c[h],e,1);e.polygonEnd()}function Rb(){function c(r,q){r*=mb;q=q*mb/2+qb/4;var v=r-l,x=v>=0?1:-1,z=x*v;v=Math.cos(q);q=Math.sin(q);var F=m*q,E=n*v+F*Math.cos(z);x=F*x*Math.sin(z);Md.add(Math.atan2(x,E));l=r;n=v;m=q}var e,h,l,n,m;Yc.point=function(r,q){Yc.point=c;l=(e=r)*mb;n=Math.cos(q=(h=q)*mb/2+qb/4);m=Math.sin(q)};Yc.lineEnd=function(){c(e,h)}}function ac(c){var e=c[0];c=c[1];var h=Math.cos(c);return[h*Math.cos(e),h*Math.sin(e),
Math.sin(c)]}function Uc(c,e){return c[0]*e[0]+c[1]*e[1]+c[2]*e[2]}function md(c,e){return[c[1]*e[2]-c[2]*e[1],c[2]*e[0]-c[0]*e[2],c[0]*e[1]-c[1]*e[0]]}function ge(c,e){c[0]+=e[0];c[1]+=e[1];c[2]+=e[2]}function hd(c,e){return[c[0]*e,c[1]*e,c[2]*e]}function yd(c){var e=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);c[0]/=e;c[1]/=e;c[2]/=e}function Rc(c){return[Math.atan2(c[1],c[0]),Hb(c[2])]}function ed(c,e){return pb(c[0]-e[0])<$a&&pb(c[1]-e[1])<$a}function he(c,e){c*=mb;var h=Math.cos(e*=mb);Jd(h*Math.cos(c),
h*Math.sin(c),Math.sin(e))}function Jd(c,e,h){++ke;Nd+=(c-Nd)/ke;Od+=(e-Od)/ke;ud+=(h-ud)/ke}function Kd(){function c(n,m){n*=mb;var r=Math.cos(m*=mb),q=r*Math.cos(n);n=r*Math.sin(n);m=Math.sin(m);var v=Math.atan2(Math.sqrt((v=h*m-l*n)*v+(v=l*q-e*m)*v+(v=e*n-h*q)*v),e*q+h*n+l*m);Fe+=v;Dd+=v*(e+(e=q));Ed+=v*(h+(h=n));nd+=v*(l+(l=m));Jd(e,h,l)}var e,h,l;id.point=function(n,m){n*=mb;var r=Math.cos(m*=mb);e=r*Math.cos(n);h=r*Math.sin(n);l=Math.sin(m);id.point=c;Jd(e,h,l)}}function fe(){id.point=he}function Ud(){function c(r,
q){r*=mb;var v=Math.cos(q*=mb),x=v*Math.cos(r);r=v*Math.sin(r);q=Math.sin(q);v=n*q-m*r;var z=m*x-l*q,F=l*r-n*x,E=Math.sqrt(v*v+z*z+F*F),S=l*x+n*r+m*q,U=E&&-xb(S)/E;E=Math.atan2(E,S);Wd+=U*v;Xd+=U*z;Fd+=U*F;Fe+=E;Dd+=E*(l+(l=x));Ed+=E*(n+(n=r));nd+=E*(m+(m=q));Jd(l,n,m)}var e,h,l,n,m;id.point=function(r,q){e=r;h=q;id.point=c;r*=mb;var v=Math.cos(q*=mb);l=v*Math.cos(r);n=v*Math.sin(r);m=Math.sin(q);Jd(l,n,m)};id.lineEnd=function(){c(e,h);id.lineEnd=fe;id.point=he}}function Ad(){return true}function ie(c,
e,h,l,n){var m=[],r=[];c.forEach(function(F){if(!((E=F.length-1)<=0)){var E,S=F[0],U=F[E];if(ed(S,U)){n.lineStart();for(U=0;U<E;++U)n.point((S=F[U])[0],S[1]);n.lineEnd()}else{E=new p(S,F,null,true);S=new p(S,null,E,false);E.o=S;m.push(E);r.push(S);E=new p(U,F,null,false);S=new p(U,null,E,true);E.o=S;m.push(E);r.push(S)}}});r.sort(e);j(m);j(r);if(m.length){c=0;e=h;for(h=r.length;c<h;++c)r[c].e=e=!e;e=m[0];for(var q,v;;){for(var x=e,z=true;x.v;)if((x=x.n)===e)return;q=x.z;n.lineStart();do{x.v=x.o.v=
true;if(x.e){if(z){c=0;for(h=q.length;c<h;++c)n.point((v=q[c])[0],v[1])}else l(x.x,x.n.x,1,n);x=x.n}else{if(z){q=x.p.z;for(c=q.length-1;c>=0;--c)n.point((v=q[c])[0],v[1])}else l(x.x,x.p.x,-1,n);x=x.p}x=x.o;q=x.z;z=!z}while(!x.v);n.lineEnd()}}}function j(c){if(e=c.length){for(var e,h=0,l=c[0],n;++h<e;){l.n=n=c[h];n.p=l;l=n}l.n=n=c[0];n.p=l}}function p(c,e,h,l){this.x=c;this.z=e;this.o=h;this.e=l;this.v=false;this.n=this.p=null}function w(c,e,h,l){return function(n,m){function r(ka,da){da=n(ka,da);
if(c(ka=da[0],da=da[1]))m.point(ka,da)}function q(ka,da){ka=n(ka,da);S.point(ka[0],ka[1])}function v(){T.point=q;S.lineStart()}function x(){T.point=r;S.lineEnd()}function z(ka,da){fa.push([ka,da]);ka=n(ka,da);ba.point(ka[0],ka[1])}function F(){ba.lineStart();fa=[]}function E(){z(fa[0][0],fa[0][1]);ba.lineEnd();var ka=ba.clean(),da=Q.buffer(),pa=da.length;fa.pop();M.push(fa);fa=null;if(pa)if(ka&1){ka=da[0];pa=ka.length-1;da=-1;var la;for(m.lineStart();++da<pa;)m.point((la=ka[da])[0],la[1]);m.lineEnd()}else{pa>
1&&ka&2&&da.push(da.pop().concat(da.shift()));N.push(da.filter(y))}}var S=e(m),U=n.invert(l[0],l[1]),T={point:r,lineStart:v,lineEnd:x,polygonStart:function(){T.point=z;T.lineStart=F;T.lineEnd=E;N=[];M=[];m.polygonStart()},polygonEnd:function(){T.point=r;T.lineStart=v;T.lineEnd=x;N=K.merge(N);var ka=R(U,M);if(N.length)ie(N,I,ka,h,m);else if(ka){m.lineStart();h(null,null,1,m);m.lineEnd()}m.polygonEnd();N=M=null},sphere:function(){m.polygonStart();m.lineStart();h(null,null,1,m);m.lineEnd();m.polygonEnd()}},
N,Q=B(),ba=e(Q),M,fa;return T}}function y(c){return c.length>1}function B(){var c=[],e;return{lineStart:function(){c.push(e=[])},point:function(h,l){e.push([h,l])},lineEnd:ha,buffer:function(){var h=c;c=[];e=null;return h},rejoin:function(){c.length>1&&c.push(c.pop().concat(c.shift()))}}}function I(c,e){return((c=c.x)[0]<0?c[1]-Sc-$a:Sc-c[1])-((e=e.x)[0]<0?e[1]-Sc-$a:Sc-e[1])}function R(c,e){var h=c[0],l=c[1],n=[Math.sin(h),-Math.cos(h),0],m=0,r=0;Md.reset();for(var q=0,v=e.length;q<v;++q){var x=
e[q],z=x.length;if(z){var F=x[0],E=F[0];c=F[1]/2+qb/4;for(var S=Math.sin(c),U=Math.cos(c),T=1;;){if(T===z)T=0;c=x[T];var N=c[0],Q=c[1]/2+qb/4,ba=Math.sin(Q);Q=Math.cos(Q);var M=N-E,fa=M>=0?1:-1,ka=fa*M,da=ka>qb;S=S*ba;Md.add(Math.atan2(S*fa*Math.sin(ka),U*Q+S*Math.cos(ka)));m+=da?M+fa*Zc:M;if(da^E>=h^N>=h){F=md(ac(F),ac(c));yd(F);E=md(n,F);yd(E);E=(da^M>=0?-1:1)*Hb(E[2]);if(l>E||l===E&&(F[0]||F[1]))r+=da^M>=0?1:-1}if(!T++)break;E=N;S=ba;U=Q;F=c}}}return(m<-$a||m<$a&&Md<0)^r&1}function W(c){var e=
NaN,h=NaN,l=NaN,n;return{lineStart:function(){c.lineStart();n=1},point:function(m,r){var q=m>0?qb:-qb,v=pb(m-e);if(pb(v-qb)<$a){c.point(e,h=(h+r)/2>0?Sc:-Sc);c.point(l,h);c.lineEnd();c.lineStart();c.point(q,h);c.point(m,h);n=0}else if(l!==q&&v>=qb){if(pb(e-l)<$a)e-=l*$a;if(pb(m-q)<$a)m-=q*$a;h=aa(e,h,m,r);c.point(l,h);c.lineEnd();c.lineStart();c.point(q,h);n=0}c.point(e=m,h=r);l=q},lineEnd:function(){c.lineEnd();e=h=NaN},clean:function(){return 2-n}}}function aa(c,e,h,l){var n,m,r=Math.sin(c-h);return pb(r)>
$a?Math.atan((Math.sin(e)*(m=Math.cos(l))*Math.sin(h)-Math.sin(l)*(n=Math.cos(e))*Math.sin(c))/(n*m*r)):(e+l)/2}function qa(c,e,h,l){if(c==null){h=h*Sc;l.point(-qb,h);l.point(0,h);l.point(qb,h);l.point(qb,0);l.point(qb,-h);l.point(0,-h);l.point(-qb,-h);l.point(-qb,0);l.point(-qb,h)}else if(pb(c[0]-e[0])>$a){c=c[0]<e[0]?qb:-qb;h=h*c/2;l.point(-c,h);l.point(0,h);l.point(c,h)}else l.point(e[0],e[1])}function Na(c){function e(x,z){return Math.cos(x)*Math.cos(z)>m}function h(x){var z,F,E,S,U;return{lineStart:function(){S=
E=false;U=1},point:function(T,N){var Q=[T,N],ba=e(T,N);N=r?ba?0:n(T,N):ba?n(T+(T<0?qb:-qb),N):0;if(!z&&(S=E=ba))x.lineStart();if(ba!==E){T=l(z,Q);if(ed(z,T)||ed(Q,T)){Q[0]+=$a;Q[1]+=$a;ba=e(Q[0],Q[1])}}if(ba!==E){U=0;if(ba){x.lineStart();T=l(Q,z);x.point(T[0],T[1])}else{T=l(z,Q);x.point(T[0],T[1]);x.lineEnd()}z=T}else if(q&&z&&r^ba){var M;if(!(N&F)&&(M=l(Q,z,true))){U=0;if(r){x.lineStart();x.point(M[0][0],M[0][1]);x.point(M[1][0],M[1][1]);x.lineEnd()}else{x.point(M[1][0],M[1][1]);x.lineEnd();x.lineStart();
x.point(M[0][0],M[0][1])}}}if(ba&&(!z||!ed(z,Q)))x.point(Q[0],Q[1]);z=Q;E=ba;F=N},lineEnd:function(){E&&x.lineEnd();z=null},clean:function(){return U|(S&&E)<<1}}}function l(x,z,F){var E=ac(x),S=ac(z),U=[1,0,0];S=md(E,S);var T=Uc(S,S);E=S[0];var N=T-E*E;if(!N)return!F&&x;T=m*T/N;N=-m*E/N;E=md(U,S);U=hd(U,T);S=hd(S,N);ge(U,S);S=Uc(U,E);T=Uc(E,E);N=S*S-T*(Uc(U,U)-1);if(!(N<0)){var Q=Math.sqrt(N);N=hd(E,(-S-Q)/T);ge(N,U);N=Rc(N);if(!F)return N;F=x[0];var ba=z[0];x=x[1];z=z[1];var M;if(ba<F){M=F;F=ba;
ba=M}var fa=ba-F,ka=pb(fa-qb)<$a,da=ka||fa<$a;if(!ka&&z<x){M=x;x=z;z=M}if(da?ka?x+z>0^N[1]<(pb(N[0]-F)<$a?x:z):x<=N[1]&&N[1]<=z:fa>qb^(F<=N[0]&&N[0]<=ba)){z=hd(E,(-S+Q)/T);ge(z,U);return[N,Rc(z)]}}}function n(x,z){var F=r?c:qb-c,E=0;if(x<-F)E|=1;else if(x>F)E|=2;if(z<-F)E|=4;else if(z>F)E|=8;return E}var m=Math.cos(c),r=m>0,q=pb(m)>$a,v=rc(c,6*mb);return w(e,h,v,r?[0,-c]:[-qb,c-qb])}function za(c,e,h,l){return function(n){var m=n.a,r=n.b,q=m.x;m=m.y;var v=0,x=1,z=r.x-q;r=r.y-m;var F;F=c-q;if(!(!z&&
F>0)){F/=z;if(z<0){if(F<v)return;if(F<x)x=F}else if(z>0){if(F>x)return;if(F>v)v=F}F=h-q;if(!(!z&&F<0)){F/=z;if(z<0){if(F>x)return;if(F>v)v=F}else if(z>0){if(F<v)return;if(F<x)x=F}F=e-m;if(!(!r&&F>0)){F/=r;if(r<0){if(F<v)return;if(F<x)x=F}else if(r>0){if(F>x)return;if(F>v)v=F}F=l-m;if(!(!r&&F<0)){F/=r;if(r<0){if(F>x)return;if(F>v)v=F}else if(r>0){if(F<v)return;if(F<x)x=F}if(v>0)n.a={x:q+v*z,y:m+v*r};if(x<1)n.b={x:q+x*z,y:m+x*r};return n}}}}}}function Sa(c,e,h,l){function n(q,v){return pb(q[0]-c)<$a?
v>0?0:3:pb(q[0]-h)<$a?v>0?2:1:pb(q[1]-e)<$a?v>0?1:0:v>0?3:2}function m(q,v){return r(q.x,v.x)}function r(q,v){var x=n(q,1),z=n(v,1);return x!==z?x-z:x===0?v[1]-q[1]:x===1?q[0]-v[0]:x===2?q[1]-v[1]:v[0]-q[0]}return function(q){function v(ea){for(var ta=0,Za=M.length,kb=ea[1],Qa=0;Qa<Za;++Qa)for(var jb=1,Eb=M[Qa],Qb=Eb.length,Ec=Eb[0],Oc;jb<Qb;++jb){Oc=Eb[jb];if(Ec[1]<=kb)Oc[1]>kb&&Xb(Ec,Oc,ea)>0&&++ta;else Oc[1]<=kb&&Xb(Ec,Oc,ea)<0&&--ta;Ec=Oc}return ta!==0}function x(ea,ta,Za,kb){var Qa=0,jb=0;if(ea==
null||(Qa=n(ea,Za))!==(jb=n(ta,Za))||r(ea,ta)<0^Za>0){do kb.point(Qa===0||Qa===3?c:h,Qa>1?l:e);while((Qa=(Qa+Za+4)%4)!==jb)}else kb.point(ta[0],ta[1])}function z(ea,ta){return c<=ea&&ea<=h&&e<=ta&&ta<=l}function F(ea,ta){z(ea,ta)&&q.point(ea,ta)}function E(){ka.point=U;if(M)M.push(fa=[]);tb=true;gb=false;Ba=Ua=NaN}function S(){if(ba){U(da,pa);la&&gb&&N.rejoin();ba.push(N.buffer())}ka.point=F;gb&&q.lineEnd()}function U(ea,ta){ea=Math.max(-Ge,Math.min(Ge,ea));ta=Math.max(-Ge,Math.min(Ge,ta));var Za=
z(ea,ta);M&&fa.push([ea,ta]);if(tb){da=ea;pa=ta;la=Za;tb=false;if(Za){q.lineStart();q.point(ea,ta)}}else if(Za&&gb)q.point(ea,ta);else{var kb={a:{x:Ba,y:Ua},b:{x:ea,y:ta}};if(Q(kb)){if(!gb){q.lineStart();q.point(kb.a.x,kb.a.y)}q.point(kb.b.x,kb.b.y);Za||q.lineEnd();nb=false}else if(Za){q.lineStart();q.point(ea,ta);nb=false}}Ba=ea;Ua=ta;gb=Za}var T=q,N=B(),Q=za(c,e,h,l),ba,M,fa,ka={point:F,lineStart:E,lineEnd:S,polygonStart:function(){q=N;ba=[];M=[];nb=true},polygonEnd:function(){q=T;ba=K.merge(ba);
var ea=v([c,l]),ta=nb&&ea,Za=ba.length;if(ta||Za){q.polygonStart();if(ta){q.lineStart();x(null,null,1,q);q.lineEnd()}Za&&ie(ba,m,ea,x,q);q.polygonEnd()}ba=M=fa=null}},da,pa,la,Ba,Ua,gb,tb,nb;return ka}}function La(c,e){function h(l,n){return l=c(l,n),e(l[0],l[1])}if(c.invert&&e.invert)h.invert=function(l,n){return l=e.invert(l,n),l&&c.invert(l[0],l[1])};return h}function ob(c){var e=0,h=qb/3,l=wb(c);c=l(e,h);c.parallels=function(n){if(!arguments.length)return[e/qb*180,h/qb*180];return l(e=n[0]*qb/
180,h=n[1]*qb/180)};return c}function bc(c,e){function h(r,q){q=Math.sqrt(n-2*l*Math.sin(q))/l;return[q*Math.sin(r*=l),m-q*Math.cos(r)]}c=Math.sin(c);var l=(c+Math.sin(e))/2,n=1+c*(2*l-c),m=Math.sqrt(n)/l;h.invert=function(r,q){q=m-q;return[Math.atan2(r,q)/l,Hb((n-(r*r+q*q)*l*l)/(2*l))]};return h}function lc(){function c(m,r){kf+=n*m-l*r;l=m;n=r}var e,h,l,n;Gd.point=function(m,r){Gd.point=c;e=l=m;h=n=r};Gd.lineEnd=function(){c(e,h)}}function hc(c,e){if(c<He)He=c;if(c>Ie)Ie=c;if(e<Je)Je=e;if(e>Ke)Ke=
e}function fd(){function c(v,x){r.push("M",v,",",x,m)}function e(v,x){r.push("M",v,",",x);q.point=h}function h(v,x){r.push("L",v,",",x)}function l(){q.point=c}function n(){r.push("Z")}var m=ub(4.5),r=[],q={point:c,lineStart:function(){q.point=e},lineEnd:l,polygonStart:function(){q.lineEnd=n},polygonEnd:function(){q.lineEnd=l;q.point=c},pointRadius:function(v){m=ub(v);return q},result:function(){if(r.length){var v=r.join("");r=[];return v}}};return q}function ub(c){return"m0,"+c+"a"+c+","+c+" 0 1,1 0,"+
-2*c+"a"+c+","+c+" 0 1,1 0,"+2*c+"z"}function Gc(c,e){Nd+=c;Od+=e;++ud}function Tc(){function c(l,n){var m=l-e,r=n-h;m=Math.sqrt(m*m+r*r);Dd+=m*(e+l)/2;Ed+=m*(h+n)/2;nd+=m;Gc(e=l,h=n)}var e,h;jd.point=function(l,n){jd.point=c;Gc(e=l,h=n)}}function J(){jd.point=Gc}function P(){function c(m,r){var q=m-l,v=r-n;q=Math.sqrt(q*q+v*v);Dd+=q*(l+m)/2;Ed+=q*(n+r)/2;nd+=q;q=n*m-l*r;Wd+=q*(l+m);Xd+=q*(n+r);Fd+=q*3;Gc(l=m,n=r)}var e,h,l,n;jd.point=function(m,r){jd.point=c;Gc(e=l=m,h=n=r)};jd.lineEnd=function(){c(e,
h)}}function ra(c){function e(v,x){c.moveTo(v,x);c.arc(v,x,r,0,Zc)}function h(v,x){c.moveTo(v,x);q.point=l}function l(v,x){c.lineTo(v,x)}function n(){q.point=e}function m(){c.closePath()}var r=4.5,q={point:e,lineStart:function(){q.point=h},lineEnd:n,polygonStart:function(){q.lineEnd=m},polygonEnd:function(){q.lineEnd=n;q.point=e},pointRadius:function(v){r=v;return q},result:ha};return q}function ya(c){function e(v){return(q?l:h)(v)}function h(v){return Va(v,function(x,z){x=c(x,z);v.point(x[0],x[1])})}
function l(v){function x(ea,ta){ea=c(ea,ta);v.point(ea[0],ea[1])}function z(){la=NaN;nb.point=F;v.lineStart()}function F(ea,ta){var Za=ac([ea,ta]);ta=c(ea,ta);n(la,Ba,pa,Ua,gb,tb,la=ta[0],Ba=ta[1],pa=ea,Ua=Za[0],gb=Za[1],tb=Za[2],q,v);v.point(la,Ba)}function E(){nb.point=x;v.lineEnd()}function S(){z();nb.point=U;nb.lineEnd=T}function U(ea,ta){F(N=ea,Q=ta);ba=la;M=Ba;fa=Ua;ka=gb;da=tb;nb.point=F}function T(){n(la,Ba,pa,Ua,gb,tb,ba,M,N,fa,ka,da,q,v);nb.lineEnd=E;E()}var N,Q,ba,M,fa,ka,da,pa,la,Ba,Ua,
gb,tb,nb={point:x,lineStart:z,lineEnd:E,polygonStart:function(){v.polygonStart();nb.lineStart=S},polygonEnd:function(){v.polygonEnd();nb.lineStart=z}};return nb}function n(v,x,z,F,E,S,U,T,N,Q,ba,M,fa,ka){var da=U-v,pa=T-x,la=da*da+pa*pa;if(la>4*m&&fa--){var Ba=F+Q,Ua=E+ba,gb=S+M,tb=Math.sqrt(Ba*Ba+Ua*Ua+gb*gb),nb=Math.asin(gb/=tb),ea=pb(pb(gb)-1)<$a||pb(z-N)<$a?(z+N)/2:Math.atan2(Ua,Ba),ta=c(ea,nb);nb=ta[0];ta=ta[1];var Za=nb-v,kb=ta-x,Qa=pa*Za-da*kb;if(Qa*Qa/la>m||pb((da*Za+pa*kb)/la-0.5)>0.3||F*
Q+E*ba+S*M<r){n(v,x,z,F,E,S,nb,ta,ea,Ba/=tb,Ua/=tb,gb,fa,ka);ka.point(nb,ta);n(nb,ta,ea,Ba,Ua,gb,U,T,N,Q,ba,M,fa,ka)}}}var m=0.5,r=Math.cos(30*mb),q=16;e.precision=function(v){if(!arguments.length)return Math.sqrt(m);q=(m=v*v)>0&&16;return e};return e}function Ea(c){var e=ya(function(h,l){return c([h*gc,l*gc])});return function(h){return Z(e(h))}}function Ia(c){this.stream=c}function Va(c,e){return{point:e,sphere:function(){c.sphere()},lineStart:function(){c.lineStart()},lineEnd:function(){c.lineEnd()},
polygonStart:function(){c.polygonStart()},polygonEnd:function(){c.polygonEnd()}}}function Ya(c){return wb(function(){return c})()}function wb(c){function e(la){la=q(la[0]*mb,la[1]*mb);return[la[0]*x+Q,ba-la[1]*x]}function h(la){return(la=q.invert((la[0]-Q)/x,(ba-la[1])/x))&&[la[0]*gc,la[1]*gc]}function l(){q=La(r=Oa(U,T,N),m);var la=m(E,S);Q=z-la[0]*x;ba=F+la[1]*x;return n()}function n(){if(pa){pa.valid=false;pa=null}return e}var m,r,q,v=ya(function(la,Ba){la=m(la,Ba);return[la[0]*x+Q,ba-la[1]*x]}),
x=150,z=480,F=250,E=0,S=0,U=0,T=0,N=0,Q,ba,M=fg,fa=Nb,ka=null,da=null,pa;e.stream=function(la){if(pa)pa.valid=false;pa=Z(M(r,v(fa(la))));pa.valid=true;return pa};e.clipAngle=function(la){if(!arguments.length)return ka;M=la==null?(ka=la,fg):Na((ka=+la)*mb);return n()};e.clipExtent=function(la){if(!arguments.length)return da;fa=(da=la)?Sa(la[0][0],la[0][1],la[1][0],la[1][1]):Nb;return n()};e.scale=function(la){if(!arguments.length)return x;x=+la;return l()};e.translate=function(la){if(!arguments.length)return[z,
F];z=+la[0];F=+la[1];return l()};e.center=function(la){if(!arguments.length)return[E*gc,S*gc];E=la[0]%360*mb;S=la[1]%360*mb;return l()};e.rotate=function(la){if(!arguments.length)return[U*gc,T*gc,N*gc];U=la[0]%360*mb;T=la[1]%360*mb;N=la.length>2?la[2]%360*mb:0;return l()};K.rebind(e,v,"precision");return function(){m=c.apply(this,arguments);e.invert=m.invert&&h;return l()}}function Z(c){return Va(c,function(e,h){c.point(e*mb,h*mb)})}function Fa(c,e){return[c,e]}function Wa(c,e){return[c>qb?c-Zc:c<
-qb?c+Zc:c,e]}function Oa(c,e,h){return c?e||h?La(vb(c),oc(e,h)):vb(c):e||h?oc(e,h):Wa}function Fb(c){return function(e,h){return e+=c,[e>qb?e-Zc:e<-qb?e+Zc:e,h]}}function vb(c){var e=Fb(c);e.invert=Fb(-c);return e}function oc(c,e){function h(q,v){var x=Math.cos(v),z=Math.cos(q)*x;q=Math.sin(q)*x;v=Math.sin(v);x=v*l+z*n;return[Math.atan2(q*m-x*r,z*l-v*n),Hb(x*m+q*r)]}var l=Math.cos(c),n=Math.sin(c),m=Math.cos(e),r=Math.sin(e);h.invert=function(q,v){var x=Math.cos(v),z=Math.cos(q)*x;q=Math.sin(q)*
x;v=Math.sin(v);x=v*m-q*r;return[Math.atan2(q*m+v*r,z*l+x*n),Hb(x*l-z*n)]};return h}function rc(c,e){var h=Math.cos(c),l=Math.sin(c);return function(n,m,r,q){var v=r*e;if(n!=null){n=Vd(h,n);m=Vd(h,m);if(r>0?n<m:n>m)n+=r*Zc}else{n=c+r*Zc;m=c-0.5*v}var x;for(n=n;r>0?n>m:n<m;n-=v)q.point((x=Rc([h,-l*Math.cos(n),-l*Math.sin(n)]))[0],x[1])}}function Vd(c,e){e=ac(e);e[0]-=c;yd(e);c=xb(-e[1]);return((-e[2]<0?-c:c)+2*Math.PI-$a)%(2*Math.PI)}function gg(c,e,h){var l=K.range(c,e-$a,h).concat(e);return function(n){return l.map(function(m){return[n,
m]})}}function hg(c,e,h){var l=K.range(c,e-$a,h).concat(e);return function(n){return l.map(function(m){return[m,n]})}}function lf(c){return c.source}function mf(c){return c.target}function Ih(c,e,h,l){var n=Math.cos(e),m=Math.sin(e),r=Math.cos(l),q=Math.sin(l),v=n*Math.cos(c),x=n*Math.sin(c),z=r*Math.cos(h),F=r*Math.sin(h),E=2*Math.asin(Math.sqrt(ic(l-e)+n*r*ic(h-c))),S=1/Math.sin(E);h=E?function(U){var T=Math.sin(U*=E)*S,N=Math.sin(E-U)*S;U=N*v+T*z;var Q=N*x+T*F;T=N*m+T*q;return[Math.atan2(Q,U)*
gc,Math.atan2(T,Math.sqrt(U*U+Q*Q))*gc]}:function(){return[c*gc,e*gc]};h.distance=E;return h}function Jh(){function c(n,m){var r=Math.sin(m*=mb);m=Math.cos(m);var q=pb((n*=mb)-e),v=Math.cos(q);nf+=Math.atan2(Math.sqrt((q=m*Math.sin(q))*q+(q=l*r-h*m*v)*q),h*r+l*m*v);e=n;h=r;l=m}var e,h,l;Yd.point=function(n,m){e=n*mb;h=Math.sin(m*=mb);l=Math.cos(m);Yd.point=c};Yd.lineEnd=function(){Yd.point=Yd.lineEnd=ha}}function le(c,e){function h(l,n){var m=Math.cos(l),r=Math.cos(n);m=c(m*r);return[m*r*Math.sin(l),
m*Math.sin(n)]}h.invert=function(l,n){var m=Math.sqrt(l*l+n*n),r=e(m),q=Math.sin(r);r=Math.cos(r);return[Math.atan2(l*q,m*r),Math.asin(m&&n*q/m)]};return h}function ig(c,e){function h(q,v){v=pb(pb(v)-Sc)<$a?0:r/Math.pow(n(v),m);return[v*Math.sin(m*q),r-v*Math.cos(m*q)]}var l=Math.cos(c),n=function(q){return Math.tan(qb/4+q/2)},m=c===e?Math.sin(c):Math.log(l/Math.cos(e))/Math.log(n(e)/n(c)),r=l*Math.pow(n(c),m)/m;if(!m)return Le;h.invert=function(q,v){v=r-v;var x=bb(m)*Math.sqrt(q*q+v*v);return[Math.atan2(q,
v)/m,2*Math.atan(Math.pow(r/x,1/m))-Sc]};return h}function jg(c,e){function h(r,q){q=m-q;return[q*Math.sin(n*r),m-q*Math.cos(n*r)]}var l=Math.cos(c),n=c===e?Math.sin(c):(l-Math.cos(e))/(e-c),m=l/n+c;if(pb(n)<$a)return Fa;h.invert=function(r,q){q=m-q;return[Math.atan2(r,q)/n,m-bb(n)*Math.sqrt(r*r+q*q)]};return h}function Le(c,e){return[c,Math.log(Math.tan(qb/4+e/2))]}function kg(c){var e=Ya(c),h=e.scale,l=e.translate,n=e.clipExtent,m;e.scale=function(){var r=h.apply(e,arguments);return r===e?m?e.clipExtent(null):
e:r};e.translate=function(){var r=l.apply(e,arguments);return r===e?m?e.clipExtent(null):e:r};e.clipExtent=function(r){var q=n.apply(e,arguments);if(q===e){if(m=r==null){var v=qb*h(),x=l();n([[x[0]-v,x[1]-v],[x[0]+v,x[1]+v]])}}else if(m)q=null;return q};return e.clipExtent(null)}function of(c,e){return[Math.log(Math.tan(qb/4+e/2)),-c]}function Zd(c){return c[0]}function me(c){return c[1]}function lg(c){for(var e=c.length,h=[0,1],l=2,n=2;n<e;n++){for(;l>1&&Xb(c[h[l-2]],c[h[l-1]],c[n])<=0;)--l;h[l++]=
n}return h.slice(0,l)}function Kh(c,e){return c[0]-e[0]||c[1]-e[1]}function pf(c,e,h){return(h[0]-e[0])*(c[1]-e[1])<(h[1]-e[1])*(c[0]-e[0])}function mg(c,e,h,l){var n=c[0],m=h[0],r=e[0]-n,q=l[0]-m;c=c[1];h=h[1];e=e[1]-c;l=l[1]-h;m=(q*(c-h)-l*(n-m))/(l*r-q*e);return[n+m*r,c+m*e]}function ng(c){var e=c[0];c=c[c.length-1];return!(e[0]-c[0]||e[1]-c[1])}function Lh(){Me(this);this.edge=this.site=this.circle=null}function og(c){var e=pg.pop()||new Lh;e.site=c;return e}function qf(c){$d(c);ae.remove(c);
pg.push(c);Me(c)}function Mh(c){var e=c.circle,h=e.x,l=e.cy;e={x:h,y:l};var n=c.P,m=c.N,r=[c];qf(c);for(c=n;c.circle&&pb(h-c.circle.x)<$a&&pb(l-c.circle.cy)<$a;){n=c.P;r.unshift(c);qf(c);c=n}r.unshift(c);$d(c);for(n=m;n.circle&&pb(h-n.circle.x)<$a&&pb(l-n.circle.cy)<$a;){m=n.N;r.push(n);qf(n);n=m}r.push(n);$d(n);h=r.length;for(l=1;l<h;++l){n=r[l];c=r[l-1];Ne(n.edge,c.site,n.site,e)}c=r[0];n=r[h-1];n.edge=ne(c.site,n.site,null,e);be(c);be(n)}function Nh(c){for(var e=c.x,h=c.y,l,n,m,r,q=ae._;q;){m=
qg(q,h)-e;if(m>$a)q=q.L;else{r=e-Oh(q,h);if(r>$a){if(!q.R){l=q;break}q=q.R}else{if(m>-$a){l=q.P;n=q}else if(r>-$a){l=q;n=q.N}else l=n=q;break}}}e=og(c);ae.insert(l,e);if(l||n)if(l===n){$d(l);n=og(l.site);ae.insert(e,n);e.edge=n.edge=ne(l.site,e.site);be(l);be(n)}else if(n){$d(l);$d(n);h=l.site;r=h.x;q=h.y;var v=c.x-r,x=c.y-q;m=n.site;var z=m.x-r,F=m.y-q,E=2*(v*F-x*z),S=v*v+x*x,U=z*z+F*F;r={x:(F*S-x*U)/E+r,y:(v*U-z*S)/E+q};Ne(n.edge,h,m,r);e.edge=ne(h,c,null,r);n.edge=ne(c,m,null,r);be(l);be(n)}else e.edge=
ne(l.site,e.site)}function qg(c,e){var h=c.site,l=h.x,n=h.y,m=n-e;if(!m)return l;c=c.P;if(!c)return-Infinity;h=c.site;c=h.x;h=h.y;e=h-e;if(!e)return c;var r=c-l,q=1/m-1/e,v=r/e;if(q)return(-v+Math.sqrt(v*v-2*q*(r*r/(-2*e)-h+e/2+n-m/2)))/q+l;return(l+c)/2}function Oh(c,e){var h=c.N;if(h)return qg(h,e);c=c.site;return c.y===e?c.x:Infinity}function rg(c){this.site=c;this.edges=[]}function Ph(c){var e=c[0][0],h=c[1][0],l=c[0][1];c=c[1][1];for(var n,m,r,q,v=Pd,x=v.length,z,F,E,S,U;x--;)if((z=v[x])&&z.prepare()){E=
z.edges;S=E.length;for(F=0;F<S;){U=E[F].end();r=U.x;q=U.y;m=E[++F%S].start();n=m.x;m=m.y;if(pb(r-n)>$a||pb(q-m)>$a){E.splice(F,0,new Oe(Qh(z.site,U,pb(r-e)<$a&&c-q>$a?{x:e,y:pb(n-e)<$a?m:c}:pb(q-c)<$a&&h-r>$a?{x:pb(m-c)<$a?n:h,y:c}:pb(r-h)<$a&&q-l>$a?{x:h,y:pb(n-h)<$a?m:l}:pb(q-l)<$a&&r-e>$a?{x:pb(m-l)<$a?n:e,y:l}:null),z.site,null));++S}}}}function sg(c,e){return e.angle-c.angle}function Rh(){Me(this);this.x=this.y=this.arc=this.site=this.cy=null}function be(c){var e=c.P,h=c.N;if(e&&h){var l=e.site;
e=c.site;var n=h.site;if(l!==n){h=e.x;var m=e.y,r=l.x-h,q=l.y-m;l=n.x-h;n=n.y-m;var v=2*(r*n-q*l);if(!(v>=-rf)){var x=r*r+q*q,z=l*l+n*n;q=(n*x-q*z)/v;r=(r*z-l*x)/v;n=r+m;m=tg.pop()||new Rh;m.arc=c;m.site=e;m.x=q+h;m.y=n+Math.sqrt(q*q+r*r);m.cy=n;c.circle=m;c=null;for(e=oe._;e;)if(m.y<e.y||m.y===e.y&&m.x<=e.x)if(e.L)e=e.L;else{c=e.P;break}else if(e.R)e=e.R;else{c=e;break}oe.insert(c,m);c||(sf=m)}}}}function $d(c){var e=c.circle;if(e){if(!e.P)sf=e.N;oe.remove(e);tg.push(e);Me(e);c.circle=null}}function Sh(c){for(var e=
ce,h=za(c[0][0],c[0][1],c[1][0],c[1][1]),l=e.length,n;l--;){n=e[l];if(!Th(n,c)||!h(n)||pb(n.a.x-n.b.x)<$a&&pb(n.a.y-n.b.y)<$a){n.a=n.b=null;e.splice(l,1)}}}function Th(c,e){var h=c.b;if(h)return true;var l=c.a;h=e[0][0];var n=e[1][0],m=e[0][1];e=e[1][1];var r=c.l,q=c.r,v=r.x;r=r.y;var x=q.x;q=q.y;var z=(v+x)/2,F=(r+q)/2,E;if(q===r){if(z<h||z>=n)return;if(v>x){if(l){if(l.y>=e)return}else l={x:z,y:m};h={x:z,y:e}}else{if(l){if(l.y<m)return}else l={x:z,y:e};h={x:z,y:m}}}else{E=(v-x)/(q-r);z=F-E*z;if(E<
-1||E>1)if(v>x){if(l){if(l.y>=e)return}else l={x:(m-z)/E,y:m};h={x:(e-z)/E,y:e}}else{if(l){if(l.y<m)return}else l={x:(e-z)/E,y:e};h={x:(m-z)/E,y:m}}else if(r<q){if(l){if(l.x>=n)return}else l={x:h,y:E*h+z};h={x:n,y:E*n+z}}else{if(l){if(l.x<h)return}else l={x:n,y:E*n+z};h={x:h,y:E*h+z}}}c.a=l;c.b=h;return true}function ug(c,e){this.l=c;this.r=e;this.a=this.b=null}function ne(c,e,h,l){var n=new ug(c,e);ce.push(n);h&&Ne(n,c,e,h);l&&Ne(n,e,c,l);Pd[c.i].edges.push(new Oe(n,c,e));Pd[e.i].edges.push(new Oe(n,
e,c));return n}function Qh(c,e,h){c=new ug(c,null);c.a=e;c.b=h;ce.push(c);return c}function Ne(c,e,h,l){if(!c.a&&!c.b){c.a=l;c.l=e;c.r=h}else if(c.l===h)c.b=l;else c.a=l}function Oe(c,e,h){var l=c.a,n=c.b;this.edge=c;this.site=e;this.angle=h?Math.atan2(h.y-e.y,h.x-e.x):c.l===e?Math.atan2(n.x-l.x,l.y-n.y):Math.atan2(l.x-n.x,n.y-l.y)}function tf(){this._=null}function Me(c){c.U=c.C=c.L=c.R=c.P=c.N=null}function pe(c,e){var h=e.R,l=e.U;if(l)if(l.L===e)l.L=h;else l.R=h;else c._=h;h.U=l;e.U=h;e.R=h.L;
if(e.R)e.R.U=e;h.L=e}function qe(c,e){var h=e.L,l=e.U;if(l)if(l.L===e)l.L=h;else l.R=h;else c._=h;h.U=l;e.U=h;e.L=h.R;if(e.L)e.L.U=e;h.R=e}function vg(c){for(;c.L;)c=c.L;return c}function uf(c,e){var h=c.sort(Uh).pop(),l,n,m;ce=[];Pd=new Array(c.length);ae=new tf;for(oe=new tf;;){m=sf;if(h&&(!m||h.y<m.y||h.y===m.y&&h.x<m.x)){if(h.x!==l||h.y!==n){Pd[h.i]=new rg(h);Nh(h);l=h.x;n=h.y}h=c.pop()}else if(m)Mh(m.arc);else break}if(e){Sh(e);Ph(e)}c={cells:Pd,edges:ce};ae=oe=ce=Pd=null;return c}function Uh(c,
e){return e.y-c.y||e.x-c.x}function Vh(c,e,h){return(c.x-h.x)*(e.y-c.y)-(c.x-e.x)*(h.y-c.y)}function Wh(c){return c.x}function Xh(c){return c.y}function wg(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function re(c,e,h,l,n,m){if(!c(e,h,l,n,m)){var r=(h+n)*0.5,q=(l+m)*0.5;e=e.nodes;e[0]&&re(c,e[0],h,l,r,q);e[1]&&re(c,e[1],r,l,n,q);e[2]&&re(c,e[2],h,q,r,m);e[3]&&re(c,e[3],r,q,n,m)}}function vf(c,e){c=K.rgb(c);e=K.rgb(e);var h=c.r,l=c.g,n=c.b,m=e.r-h,r=e.g-l,q=e.b-n;return function(v){return"#"+
Pb(Math.round(h+m*v))+Pb(Math.round(l+r*v))+Pb(Math.round(n+q*v))}}function xg(c,e){var h={},l={},n;for(n in c)if(n in e)h[n]=Qd(c[n],e[n]);else l[n]=c[n];for(n in e)n in c||(l[n]=e[n]);return function(m){for(n in h)l[n]=h[n](m);return l}}function vd(c,e){e-=c=+c;return function(h){return c+e*h}}function yg(c,e){var h,l,n=0,m=0,r=[],q=[],v,x;c+="";e+="";for(l=Pe.lastIndex=0;h=Pe.exec(e);++l){if(h.index)r.push(e.substring(n,m=h.index));q.push({i:r.length,x:h[0]});r.push(null);n=Pe.lastIndex}n<e.length&&
r.push(e.substring(n));l=0;for(v=q.length;(h=Pe.exec(c))&&l<v;++l){x=q[l];if(x.x==h[0]){if(x.i)if(r[x.i+1]==null){r[x.i-1]+=x.x;r.splice(x.i,1);for(h=l+1;h<v;++h)q[h].i--}else{r[x.i-1]+=x.x+r[x.i+1];r.splice(x.i,2);for(h=l+1;h<v;++h)q[h].i-=2}else if(r[x.i+1]==null)r[x.i]=x.x;else{r[x.i]=x.x+r[x.i+1];r.splice(x.i+1,1);for(h=l+1;h<v;++h)q[h].i--}q.splice(l,1);v--;l--}else x.x=vd(parseFloat(h[0]),parseFloat(x.x))}for(;l<v;){x=q.pop();if(r[x.i+1]==null)r[x.i]=x.x;else{r[x.i]=x.x+r[x.i+1];r.splice(x.i+
1,1)}v--}if(r.length===1)return r[0]==null?(x=q[0].x,function(z){return x(z)+""}):function(){return e};return function(z){for(l=0;l<v;++l)r[(x=q[l]).i]=x.x(z);return r.join("")}}function Qd(c,e){for(var h=K.interpolators.length,l;--h>=0&&!(l=K.interpolators[h](c,e)););return l}function Qe(c,e){var h=[],l=[],n=c.length,m=e.length,r=Math.min(c.length,e.length),q;for(q=0;q<r;++q)h.push(Qd(c[q],e[q]));for(;q<n;++q)l[q]=c[q];for(;q<m;++q)l[q]=e[q];return function(v){for(q=0;q<r;++q)l[q]=h[q](v);return l}}
function Yh(c){return function(e){return e<=0?0:e>=1?1:c(e)}}function zg(c){return function(e){return 1-c(1-e)}}function Ag(c){return function(e){return 0.5*(e<0.5?c(2*e):2-c(2-2*e))}}function Zh(c){return c*c}function $h(c){return c*c*c}function ai(c){if(c<=0)return 0;if(c>=1)return 1;var e=c*c,h=e*c;return 4*(c<0.5?h:3*(c-e)+h-0.75)}function bi(c){return function(e){return Math.pow(e,c)}}function ci(c){return 1-Math.cos(c*Sc)}function di(c){return Math.pow(2,10*(c-1))}function ei(c){return 1-Math.sqrt(1-
c*c)}function fi(c,e){var h;if(arguments.length<2)e=0.45;if(arguments.length)h=e/Zc*Math.asin(1/c);else{c=1;h=e/4}return function(l){return 1+c*Math.pow(2,-10*l)*Math.sin((l-h)*Zc/e)}}function gi(c){c||(c=1.70158);return function(e){return e*e*((c+1)*e-c)}}function hi(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+0.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+0.9375:7.5625*(c-=2.625/2.75)*c+0.984375}function ii(c,e){c=K.hcl(c);e=K.hcl(e);var h=c.h,l=c.c,n=c.l,m=e.h-h,r=e.c-l,q=e.l-n;if(isNaN(r)){r=
0;l=isNaN(l)?e.c:l}if(isNaN(m)){m=0;h=isNaN(h)?e.h:h}else if(m>180)m-=360;else if(m<-180)m+=360;return function(v){return $b(h+m*v,l+r*v,n+q*v)+""}}function ji(c,e){c=K.hsl(c);e=K.hsl(e);var h=c.h,l=c.s,n=c.l,m=e.h-h,r=e.s-l,q=e.l-n;if(isNaN(r)){r=0;l=isNaN(l)?e.s:l}if(isNaN(m)){m=0;h=isNaN(h)?e.h:h}else if(m>180)m-=360;else if(m<-180)m+=360;return function(v){return sc(h+m*v,l+r*v,n+q*v)+""}}function ki(c,e){c=K.lab(c);e=K.lab(e);var h=c.l,l=c.a,n=c.b,m=e.l-h,r=e.a-l,q=e.b-n;return function(v){return ec(h+
m*v,l+r*v,n+q*v)+""}}function Bg(c,e){e-=c;return function(h){return Math.round(c+e*h)}}function Cg(c){var e=[c.a,c.b],h=[c.c,c.d],l=Dg(e),n=Eg(e,h),m=Dg(li(h,e,-n))||0;if(e[0]*h[1]<h[0]*e[1]){e[0]*=-1;e[1]*=-1;l*=-1;n*=-1}this.rotate=(l?Math.atan2(e[1],e[0]):Math.atan2(-h[0],h[1]))*gc;this.translate=[c.e,c.f];this.scale=[l,m];this.skew=m?Math.atan2(n,m)*gc:0}function Eg(c,e){return c[0]*e[0]+c[1]*e[1]}function Dg(c){var e=Math.sqrt(Eg(c,c));if(e){c[0]/=e;c[1]/=e}return e}function li(c,e,h){c[0]+=
h*e[0];c[1]+=h*e[1];return c}function Fg(c,e){var h=[],l=[],n,m=K.transform(c),r=K.transform(e);e=m.translate;c=r.translate;var q=m.rotate,v=r.rotate,x=m.skew,z=r.skew;m=m.scale;r=r.scale;if(e[0]!=c[0]||e[1]!=c[1]){h.push("translate(",null,",",null,")");l.push({i:1,x:vd(e[0],c[0])},{i:3,x:vd(e[1],c[1])})}else c[0]||c[1]?h.push("translate("+c+")"):h.push("");if(q!=v){if(q-v>180)v+=360;else if(v-q>180)q+=360;l.push({i:h.push(h.pop()+"rotate(",null,")")-2,x:vd(q,v)})}else v&&h.push(h.pop()+"rotate("+
v+")");if(x!=z)l.push({i:h.push(h.pop()+"skewX(",null,")")-2,x:vd(x,z)});else z&&h.push(h.pop()+"skewX("+z+")");if(m[0]!=r[0]||m[1]!=r[1]){n=h.push(h.pop()+"scale(",null,",",null,")");l.push({i:n-4,x:vd(m[0],r[0])},{i:n-2,x:vd(m[1],r[1])})}else if(r[0]!=1||r[1]!=1)h.push(h.pop()+"scale("+r+")");n=l.length;return function(F){for(var E=-1,S;++E<n;)h[(S=l[E]).i]=S.x(F);return h.join("")}}function mi(c,e){e=e-(c=+c)?1/(e-c):0;return function(h){return(h-c)*e}}function ni(c,e){e=e-(c=+c)?1/(e-c):0;return function(h){return Math.max(0,
Math.min(1,(h-c)*e))}}function oi(c){var e=c.source;c=c.target;for(var h=pi(e,c),l=[e];e!==h;){e=e.parent;l.push(e)}for(e=l.length;c!==h;){l.splice(e,0,c);c=c.parent}return l}function Gg(c){for(var e=[],h=c.parent;h!=null;){e.push(c);c=h;h=h.parent}e.push(c);return e}function pi(c,e){if(c===e)return c;c=Gg(c);e=Gg(e);for(var h=c.pop(),l=e.pop(),n=null;h===l;){n=h;h=c.pop();l=e.pop()}return n}function qi(c){c.fixed|=2}function ri(c){c.fixed&=-7}function si(c){c.fixed|=4;c.px=c.x;c.py=c.y}function ti(c){c.fixed&=
-5}function Hg(c,e,h){var l=0,n=0;c.charge=0;if(!c.leaf)for(var m=c.nodes,r=m.length,q=-1,v;++q<r;){v=m[q];if(v!=null){Hg(v,e,h);c.charge+=v.charge;l+=v.charge*v.cx;n+=v.charge*v.cy}}if(c.point){if(!c.leaf){c.point.x+=Math.random()-0.5;c.point.y+=Math.random()-0.5}e=e*h[c.point.index];c.charge+=c.pointCharge=e;l+=e*c.point.x;n+=e*c.point.y}c.cx=l/c.charge;c.cy=n/c.charge}function se(c,e){K.rebind(c,e,"sort","children","value");c.nodes=c;c.links=ui;return c}function vi(c){return c.children}function wi(c){return c.value}
function xi(c,e){return e.value-c.value}function ui(c){return K.merge(c.map(function(e){return(e.children||[]).map(function(h){return{source:e,target:h}})}))}function yi(c){return c.x}function zi(c){return c.y}function Ai(c,e,h){c.y0=e;c.y=h}function wf(c){return K.range(c.length)}function xf(c){var e=-1;c=c[0].length;for(var h=[];++e<c;)h[e]=0;return h}function Bi(c){for(var e=1,h=0,l=c[0][1],n,m=c.length;e<m;++e)if((n=c[e][1])>l){h=e;l=n}return h}function Ci(c){return c.reduce(Di,0)}function Di(c,
e){return c+e[1]}function Ei(c,e){return Ig(c,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Ig(c,e){var h=-1,l=+c[0];c=(c[1]-l)/e;for(var n=[];++h<=e;)n[h]=c*h+l;return n}function Fi(c){return[K.min(c),K.max(c)]}function Jg(c,e){return c.parent==e.parent?1:2}function yf(c){var e=c.children;return e&&e.length?e[0]:c._tree.thread}function zf(c){var e=c.children,h;return e&&(h=e.length)?e[h-1]:c._tree.thread}function Re(c,e){var h=c.children;if(h&&(n=h.length))for(var l,n,m=-1;++m<n;)if(e(l=Re(h[m],
e),c)>0)c=l;return c}function Gi(c,e){return c.x-e.x}function Hi(c,e){return e.x-c.x}function Ii(c,e){return c.depth-e.depth}function wd(c,e){function h(l,n){var m=l.children;if(m&&(x=m.length))for(var r,q=null,v=-1,x;++v<x;){r=m[v];h(r,q);q=r}e(l,n)}h(c,null)}function Ji(c){var e=0,h=0;c=c.children;for(var l=c.length,n;--l>=0;){n=c[l]._tree;n.prelim+=e;n.mod+=e;e+=n.shift+(h+=n.change)}}function Ki(c,e,h){c=c._tree;e=e._tree;var l=h/(e.number-c.number);c.change+=l;e.change-=l;e.shift+=h;e.prelim+=
h;e.mod+=h}function Li(c,e,h){return c._tree.ancestor.parent==e.parent?c._tree.ancestor:h}function Mi(c,e){return c.value-e.value}function Af(c,e){var h=c._pack_next;c._pack_next=e;e._pack_prev=c;e._pack_next=h;h._pack_prev=e}function Kg(c,e){c._pack_next=e;e._pack_prev=c}function Lg(c,e){var h=e.x-c.x,l=e.y-c.y;c=c.r+e.r;return 0.999*c*c>h*h+l*l}function Mg(c){function e(Q){l=Math.min(Q.x-Q.r,l);n=Math.max(Q.x+Q.r,n);m=Math.min(Q.y-Q.r,m);r=Math.max(Q.y+Q.r,r)}if((h=c.children)&&(S=h.length)){var h,
l=Infinity,n=-Infinity,m=Infinity,r=-Infinity,q,v,x,z,F,E,S;h.forEach(Ni);q=h[0];q.x=-q.r;q.y=0;e(q);if(S>1){v=h[1];v.x=v.r;v.y=0;e(v);if(S>2){x=h[2];Ng(q,v,x);e(x);Af(q,x);q._pack_prev=x;Af(x,v);v=q._pack_next;for(z=3;z<S;z++){Ng(q,v,x=h[z]);var U=0,T=1,N=1;for(F=v._pack_next;F!==v;F=F._pack_next,T++)if(Lg(F,x)){U=1;break}if(U==1)for(E=q._pack_prev;E!==F._pack_prev;E=E._pack_prev,N++)if(Lg(E,x))break;if(U){T<N||T==N&&v.r<q.r?Kg(q,v=F):Kg(q=E,v);z--}else{Af(q,x);v=x;e(x)}}}}q=(l+n)/2;v=(m+r)/2;for(z=
F=0;z<S;z++){x=h[z];x.x-=q;x.y-=v;F=Math.max(F,x.r+Math.sqrt(x.x*x.x+x.y*x.y))}c.r=F;h.forEach(Oi)}}function Ni(c){c._pack_next=c._pack_prev=c}function Oi(c){delete c._pack_next;delete c._pack_prev}function Pg(c,e,h,l){var n=c.children;c.x=e+=l*c.x;c.y=h+=l*c.y;c.r*=l;if(n){c=-1;for(var m=n.length;++c<m;)Pg(n[c],e,h,l)}}function Ng(c,e,h){var l=c.r+h.r,n=e.x-c.x,m=e.y-c.y;if(l&&(n||m)){var r=e.r+h.r,q=n*n+m*m;r*=r;l*=l;e=0.5+(l-r)/(2*q);r=Math.sqrt(Math.max(0,2*r*(l+q)-(l-=q)*l-r*r))/(2*q);h.x=c.x+
e*n+r*m;h.y=c.y+e*m-r*n}else{h.x=c.x+l;h.y=c.y}}function Pi(c){return 1+K.max(c,function(e){return e.y})}function Qi(c){return c.reduce(function(e,h){return e+h.x},0)/c.length}function Qg(c){var e=c.children;return e&&e.length?Qg(e[0]):c}function Rg(c){var e=c.children,h;return e&&(h=e.length)?Rg(e[h-1]):c}function Bf(c){return{x:c.x,y:c.y,dx:c.dx,dy:c.dy}}function Sg(c,e){var h=c.x+e[3],l=c.y+e[0],n=c.dx-e[1]-e[3];c=c.dy-e[0]-e[2];if(n<0){h+=n/2;n=0}if(c<0){l+=c/2;c=0}return{x:h,y:l,dx:n,dy:c}}function de(c){var e=
c[0];c=c[c.length-1];return e<c?[e,c]:[c,e]}function Se(c){return c.rangeExtent?c.rangeExtent():de(c.range())}function Ri(c,e,h,l){var n=h(c[0],c[1]),m=l(e[0],e[1]);return function(r){return m(n(r))}}function Cf(c,e){var h=0,l=c.length-1,n=c[h],m=c[l],r;if(m<n){r=h;h=l;l=r;r=n;n=m;m=r}c[h]=e.floor(n);c[l]=e.ceil(m);return c}function Si(c){return c?{floor:function(e){return Math.floor(e/c)*c},ceil:function(e){return Math.ceil(e/c)*c}}:Ti}function Ui(c,e,h,l){var n=[],m=[],r=0,q=Math.min(c.length,e.length)-
1;if(c[q]<c[0]){c=c.slice().reverse();e=e.slice().reverse()}for(;++r<=q;){n.push(h(c[r-1],c[r]));m.push(l(e[r-1],e[r]))}return function(v){var x=K.bisect(c,v,1,q)-1;return m[x](n[x](v))}}function Tg(c,e,h,l){function n(){var v=Math.min(c.length,e.length)>2?Ui:Ri,x=l?ni:mi;r=v(c,e,x,h);q=v(e,c,x,Qd);return m}function m(v){return r(v)}var r,q;m.invert=function(v){return q(v)};m.domain=function(v){if(!arguments.length)return c;c=v.map(Number);return n()};m.range=function(v){if(!arguments.length)return e;
e=v;return n()};m.rangeRound=function(v){return m.range(v).interpolate(Bg)};m.clamp=function(v){if(!arguments.length)return l;l=v;return n()};m.interpolate=function(v){if(!arguments.length)return h;h=v;return n()};m.ticks=function(v){return Df(c,v)};m.tickFormat=function(v,x){return Ef(c,v,x)};m.nice=function(v){Ug(c,v);return n()};m.copy=function(){return Tg(c,e,h,l)};return n()}function Ff(c,e){return K.rebind(c,e,"range","rangeRound","interpolate","clamp")}function Ug(c,e){return Cf(c,Si(te(c,
e)[2]))}function te(c,e){if(e==null)e=10;c=de(c);var h=c[1]-c[0],l=Math.pow(10,Math.floor(Math.log(h/e)/Math.LN10));e=e/h*l;if(e<=0.15)l*=10;else if(e<=0.35)l*=5;else if(e<=0.75)l*=2;c[0]=Math.ceil(c[0]/l)*l;c[1]=Math.floor(c[1]/l)*l+l*0.5;c[2]=l;return c}function Df(c,e){return K.range.apply(K,te(c,e))}function Ef(c,e,h){var l=te(c,e);return K.format(h?h.replace(bg,function(n,m,r,q,v,x,z,F,E,S){return[m,r,q,v,x,z,F,E||"."+Vi(S,l),S].join("")}):",."+Gf(l[2])+"f")}function Gf(c){return-Math.floor(Math.log(c)/
Math.LN10+0.01)}function Vi(c,e){var h=Gf(e[2]);return c in Wi?Math.abs(h-Gf(Math.max(Math.abs(e[0]),Math.abs(e[1]))))+ +(c!=="e"):h-(c==="%")*2}function Vg(c,e,h,l){function n(q){return(h?Math.log(q<0?0:q):-Math.log(q>0?0:-q))/Math.log(e)}function m(q){return h?Math.pow(e,q):-Math.pow(e,-q)}function r(q){return c(n(q))}r.invert=function(q){return m(c.invert(q))};r.domain=function(q){if(!arguments.length)return l;h=q[0]>=0;c.domain((l=q.map(Number)).map(n));return r};r.base=function(q){if(!arguments.length)return e;
e=+q;c.domain(l.map(n));return r};r.nice=function(){var q=Cf(l.map(n),h?Math:Xi);c.domain(q);l=q.map(m);return r};r.ticks=function(){var q=de(l),v=[],x=q[0];q=q[1];var z=Math.floor(n(x)),F=Math.ceil(n(q)),E=e%1?2:e;if(isFinite(F-z)){if(h){for(;z<F;z++)for(var S=1;S<E;S++)v.push(m(z)*S);v.push(m(z))}else for(v.push(m(z));z++<F;)for(S=E-1;S>0;S--)v.push(m(z)*S);for(z=0;v[z]<x;z++);for(F=v.length;v[F-1]>q;F--);v=v.slice(z,F)}return v};r.tickFormat=function(q,v){if(!arguments.length)return Wg;if(arguments.length<
2)v=Wg;else if(typeof v!=="function")v=K.format(v);var x=Math.max(0.1,q/r.ticks().length),z=h?(F=1.0E-12,Math.ceil):(F=-1.0E-12,Math.floor),F;return function(E){return E/m(z(n(E)+F))<=x?v(E):""}};r.copy=function(){return Vg(c.copy(),e,h,l)};return Ff(r,c)}function Xg(c,e,h){function l(r){return c(n(r))}var n=Te(e),m=Te(1/e);l.invert=function(r){return m(c.invert(r))};l.domain=function(r){if(!arguments.length)return h;c.domain((h=r.map(Number)).map(n));return l};l.ticks=function(r){return Df(h,r)};
l.tickFormat=function(r,q){return Ef(h,r,q)};l.nice=function(r){return l.domain(Ug(h,r))};l.exponent=function(r){if(!arguments.length)return e;n=Te(e=r);m=Te(1/e);c.domain(h.map(n));return l};l.copy=function(){return Xg(c.copy(),e,h)};return Ff(l,c)}function Te(c){return function(e){return e<0?-Math.pow(-e,c):Math.pow(e,c)}}function Yg(c,e){function h(q){return m[((n.get(q)||e.t==="range"&&n.set(q,c.push(q)))-1)%m.length]}function l(q,v){return K.range(c.length).map(function(x){return q+v*x})}var n,
m,r;h.domain=function(q){if(!arguments.length)return c;c=[];n=new g;for(var v=-1,x=q.length,z;++v<x;)n.has(z=q[v])||n.set(z,c.push(z));return h[e.t].apply(h,e.a)};h.range=function(q){if(!arguments.length)return m;m=q;r=0;e={t:"range",a:arguments};return h};h.rangePoints=function(q,v){if(arguments.length<2)v=0;var x=q[0],z=q[1],F=(z-x)/(Math.max(1,c.length-1)+v);m=l(c.length<2?(x+z)/2:x+F*v/2,F);r=0;e={t:"rangePoints",a:arguments};return h};h.rangeBands=function(q,v,x){if(arguments.length<2)v=0;if(arguments.length<
3)x=v;var z=q[1]<q[0],F=q[z-0],E=(q[1-z]-F)/(c.length-v+2*x);m=l(F+E*x,E);z&&m.reverse();r=E*(1-v);e={t:"rangeBands",a:arguments};return h};h.rangeRoundBands=function(q,v,x){if(arguments.length<2)v=0;if(arguments.length<3)x=v;var z=q[1]<q[0],F=q[z-0],E=q[1-z],S=Math.floor((E-F)/(c.length-v+2*x));m=l(F+Math.round((E-F-(c.length-v)*S)/2),S);z&&m.reverse();r=Math.round(S*(1-v));e={t:"rangeRoundBands",a:arguments};return h};h.rangeBand=function(){return r};h.rangeExtent=function(){return de(e.a[0])};
h.copy=function(){return Yg(c,e)};return h.domain(c)}function Zg(c,e){function h(){var m=0,r=e.length;for(n=[];++m<r;)n[m-1]=K.quantile(c,m/r);return l}function l(m){if(!isNaN(m=+m))return e[K.bisect(n,m)]}var n;l.domain=function(m){if(!arguments.length)return c;c=m.filter(function(r){return!isNaN(r)}).sort(K.ascending);return h()};l.range=function(m){if(!arguments.length)return e;e=m;return h()};l.quantiles=function(){return n};l.invertExtent=function(m){m=e.indexOf(m);return m<0?[NaN,NaN]:[m>0?
n[m-1]:c[0],m<n.length?n[m]:c[c.length-1]]};l.copy=function(){return Zg(c,e)};return h()}function $g(c,e,h){function l(q){return h[Math.max(0,Math.min(r,Math.floor(m*(q-c))))]}function n(){m=h.length/(e-c);r=h.length-1;return l}var m,r;l.domain=function(q){if(!arguments.length)return[c,e];c=+q[0];e=+q[q.length-1];return n()};l.range=function(q){if(!arguments.length)return h;h=q;return n()};l.invertExtent=function(q){q=h.indexOf(q);q=q<0?NaN:q/m+c;return[q,q+1/m]};l.copy=function(){return $g(c,e,h)};
return n()}function ah(c,e){function h(l){if(l<=l)return e[K.bisect(c,l)]}h.domain=function(l){if(!arguments.length)return c;c=l;return h};h.range=function(l){if(!arguments.length)return e;e=l;return h};h.invertExtent=function(l){l=e.indexOf(l);return[c[l-1],c[l]]};h.copy=function(){return ah(c,e)};return h}function bh(c){function e(h){return+h}e.invert=e;e.domain=e.range=function(h){if(!arguments.length)return c;c=h.map(e);return e};e.ticks=function(h){return Df(c,h)};e.tickFormat=function(h,l){return Ef(c,
h,l)};e.copy=function(){return bh(c)};return e}function Yi(c){return c.innerRadius}function Zi(c){return c.outerRadius}function ch(c){return c.startAngle}function dh(c){return c.endAngle}function eh(c){function e(v){function x(){z.push("M",m(c(F),q))}for(var z=[],F=[],E=-1,S=v.length,U,T=rb(h),N=rb(l);++E<S;)if(n.call(this,U=v[E],E))F.push([+T.call(this,U,E),+N.call(this,U,E)]);else if(F.length){x();F=[]}F.length&&x();return z.length?z.join(""):null}var h=Zd,l=me,n=Ad,m=$c,r=m.key,q=0.7;e.x=function(v){if(!arguments.length)return h;
h=v;return e};e.y=function(v){if(!arguments.length)return l;l=v;return e};e.defined=function(v){if(!arguments.length)return n;n=v;return e};e.interpolate=function(v){if(!arguments.length)return r;r=typeof v==="function"?(m=v):(m=Hf.get(v)||$c).key;return e};e.tension=function(v){if(!arguments.length)return q;q=v;return e};return e}function $c(c){return c.join("L")}function $i(c){return $c(c)+"Z"}function aj(c){for(var e=0,h=c.length,l=c[0],n=[l[0],",",l[1]];++e<h;)n.push("H",(l[0]+(l=c[e])[0])/2,
"V",l[1]);h>1&&n.push("H",l[0]);return n.join("")}function If(c){for(var e=0,h=c.length,l=c[0],n=[l[0],",",l[1]];++e<h;)n.push("V",(l=c[e])[1],"H",l[0]);return n.join("")}function Jf(c){for(var e=0,h=c.length,l=c[0],n=[l[0],",",l[1]];++e<h;)n.push("H",(l=c[e])[0],"V",l[1]);return n.join("")}function bj(c,e){return c.length<4?$c(c):c[1]+Ue(c.slice(1,c.length-1),Kf(c,e))}function cj(c,e){return c.length<3?$c(c):c[0]+Ue((c.push(c[0]),c),Kf([c[c.length-2]].concat(c,[c[1]]),e))}function dj(c,e){return c.length<
3?$c(c):c[0]+Ue(c,Kf(c,e))}function Ue(c,e){if(e.length<1||c.length!=e.length&&c.length!=e.length+2)return $c(c);var h=c.length!=e.length,l="",n=c[0],m=c[1],r=e[0],q=r,v=1;if(h){l+="Q"+(m[0]-r[0]*2/3)+","+(m[1]-r[1]*2/3)+","+m[0]+","+m[1];n=c[1];v=2}if(e.length>1){q=e[1];m=c[v];v++;l+="C"+(n[0]+r[0])+","+(n[1]+r[1])+","+(m[0]-q[0])+","+(m[1]-q[1])+","+m[0]+","+m[1];for(n=2;n<e.length;n++,v++){m=c[v];q=e[n];l+="S"+(m[0]-q[0])+","+(m[1]-q[1])+","+m[0]+","+m[1]}}if(h){c=c[v];l+="Q"+(m[0]+q[0]*2/3)+","+
(m[1]+q[1]*2/3)+","+c[0]+","+c[1]}return l}function Kf(c,e){var h=[];e=(1-e)/2;for(var l,n=c[0],m=c[1],r=1,q=c.length;++r<q;){l=n;n=m;m=c[r];h.push([e*(m[0]-l[0]),e*(m[1]-l[1])])}return h}function fh(c){if(c.length<3)return $c(c);var e=1,h=c.length,l=c[0],n=l[0],m=l[1],r=[n,n,n,(l=c[1])[0]],q=[m,m,m,l[1]];n=[n,",",m,"L",cd(Hd,r),",",cd(Hd,q)];for(c.push(c[h-1]);++e<=h;){l=c[e];r.shift();r.push(l[0]);q.shift();q.push(l[1]);Lf(n,r,q)}c.pop();n.push("L",l);return n.join("")}function ej(c){if(c.length<
4)return $c(c);for(var e=[],h=-1,l=c.length,n,m=[0],r=[0];++h<3;){n=c[h];m.push(n[0]);r.push(n[1])}e.push(cd(Hd,m)+","+cd(Hd,r));for(--h;++h<l;){n=c[h];m.shift();m.push(n[0]);r.shift();r.push(n[1]);Lf(e,m,r)}return e.join("")}function fj(c){for(var e,h=-1,l=c.length,n=l+4,m,r=[],q=[];++h<4;){m=c[h%l];r.push(m[0]);q.push(m[1])}e=[cd(Hd,r),",",cd(Hd,q)];for(--h;++h<n;){m=c[h%l];r.shift();r.push(m[0]);q.shift();q.push(m[1]);Lf(e,r,q)}return e.join("")}function gj(c,e){var h=c.length-1;if(h)for(var l=
c[0][0],n=c[0][1],m=c[h][0]-l,r=c[h][1]-n,q=-1,v,x;++q<=h;){v=c[q];x=q/h;v[0]=e*v[0]+(1-e)*(l+x*m);v[1]=e*v[1]+(1-e)*(n+x*r)}return fh(c)}function cd(c,e){return c[0]*e[0]+c[1]*e[1]+c[2]*e[2]+c[3]*e[3]}function Lf(c,e,h){c.push("C",cd(gh,e),",",cd(gh,h),",",cd(hh,e),",",cd(hh,h),",",cd(Hd,e),",",cd(Hd,h))}function Mf(c,e){return(e[1]-c[1])/(e[0]-c[0])}function hj(c){for(var e=0,h=c.length-1,l=[],n=c[1],m=l[0]=Mf(c[0],n);++e<h;)l[e]=(m+(m=Mf(n,n=c[e+1])))/2;l[e]=m;return l}function ij(c){for(var e=
[],h,l,n,m,r=hj(c),q=-1,v=c.length-1;++q<v;){h=Mf(c[q],c[q+1]);if(pb(h)<$a)r[q]=r[q+1]=0;else{l=r[q]/h;n=r[q+1]/h;m=l*l+n*n;if(m>9){m=h*3/Math.sqrt(m);r[q]=m*l;r[q+1]=m*n}}}for(q=-1;++q<=v;){m=(c[Math.min(v,q+1)][0]-c[Math.max(0,q-1)][0])/(6*(1+r[q]*r[q]));e.push([m||0,r[q]*m||0])}return e}function jj(c){return c.length<3?$c(c):c[0]+Ue(c,ij(c))}function ih(c){for(var e,h=-1,l=c.length,n,m;++h<l;){e=c[h];n=e[0];m=e[1]+Rd;e[0]=n*Math.cos(m);e[1]=n*Math.sin(m)}return c}function jh(c){function e(E){function S(){U.push("M",
q(c(N),F),z,x(c(T.reverse()),F),"Z")}for(var U=[],T=[],N=[],Q=-1,ba=E.length,M,fa=rb(h),ka=rb(n),da=h===l?function(){return la}:rb(l),pa=n===m?function(){return Ba}:rb(m),la,Ba;++Q<ba;)if(r.call(this,M=E[Q],Q)){T.push([la=+fa.call(this,M,Q),Ba=+ka.call(this,M,Q)]);N.push([+da.call(this,M,Q),+pa.call(this,M,Q)])}else if(T.length){S();T=[];N=[]}T.length&&S();return U.length?U.join(""):null}var h=Zd,l=Zd,n=0,m=me,r=Ad,q=$c,v=q.key,x=q,z="L",F=0.7;e.x=function(E){if(!arguments.length)return l;h=l=E;return e};
e.x0=function(E){if(!arguments.length)return h;h=E;return e};e.x1=function(E){if(!arguments.length)return l;l=E;return e};e.y=function(E){if(!arguments.length)return m;n=m=E;return e};e.y0=function(E){if(!arguments.length)return n;n=E;return e};e.y1=function(E){if(!arguments.length)return m;m=E;return e};e.defined=function(E){if(!arguments.length)return r;r=E;return e};e.interpolate=function(E){if(!arguments.length)return v;v=typeof E==="function"?(q=E):(q=Hf.get(E)||$c).key;x=q.reverse||q;z=q.closed?
"M":"L";return e};e.tension=function(E){if(!arguments.length)return F;F=E;return e};return e}function kj(c){return c.radius}function kh(c){return[c.x,c.y]}function lj(c){return function(){var e=c.apply(this,arguments),h=e[0];e=e[1]+Rd;return[h*Math.cos(e),h*Math.sin(e)]}}function mj(){return 64}function nj(){return"circle"}function lh(c){c=Math.sqrt(c/qb);return"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"Z"}function ue(c,e){ze(c,Cc);c.id=e;return c}function Nf(c,e,h,l){var n=c.id;
return Db(c,typeof h==="function"?function(m,r,q){m.__transition__[n].tween.set(e,l(h.call(m,m.__data__,r,q)))}:(h=l(h),function(m){m.__transition__[n].tween.set(e,h)}))}function oj(c){if(c==null)c="";return function(){this.textContent=c}}function Ve(c,e,h,l){var n=c.__transition__||(c.__transition__={active:0,count:0}),m=n[h];if(!m){var r=l.time;m=n[h]={tween:new g,time:r,ease:l.ease,delay:l.delay,duration:l.duration};++n.count;K.timer(function(q){function v(Q){if(n.active>h)return z();n.active=
h;m.event&&m.event.start.call(c,F,e);m.tween.forEach(function(ba,M){if(M=M.call(c,F,e))N.push(M)});K.timer(function(){T.c=x(Q||1)?Ad:x;return 1},0,r)}function x(Q){if(n.active!==h)return z();Q=Q/U;for(var ba=E(Q),M=N.length;M>0;)N[--M].call(c,ba);if(Q>=1){m.event&&m.event.end.call(c,F,e);return z()}}function z(){if(--n.count)delete n[h];else delete c.__transition__;return 1}var F=c.__data__,E=m.ease,S=m.delay,U=m.duration,T=td,N=[];T.t=S+r;if(S<=q)return v(q-S);T.c=v},0,r)}}function mh(c,e){c.attr("transform",
function(h){return"translate("+e(h)+",0)"})}function nh(c,e){c.attr("transform",function(h){return"translate(0,"+e(h)+")"})}function Of(c){return c.toISOString()}function Pf(c,e,h){function l(m){return c(m)}function n(m,r){var q=(m[1]-m[0])/r,v=K.bisect(We,q);return v==We.length?[e.year,te(m.map(function(x){return x/31536E6}),r)[2]]:!v?[pj,te(m,r)[2]]:e[q/We[v-1]<We[v]/q?v-1:v]}l.invert=function(m){return Sd(c.invert(m))};l.domain=function(m){if(!arguments.length)return c.domain().map(Sd);c.domain(m);
return l};l.nice=function(m,r){function q(z){return!isNaN(z)&&!m.range(z,Sd(+z+1),r).length}var v=l.domain(),x=de(v);if(x=m==null?n(x,10):typeof m==="number"&&n(x,m)){m=x[0];r=x[1]}return l.domain(Cf(v,r>1?{floor:function(z){for(;q(z=m.floor(z));)z=Sd(z-1);return z},ceil:function(z){for(;q(z=m.ceil(z));)z=Sd(+z+1);return z}}:m))};l.ticks=function(m,r){var q=de(l.domain()),v=m==null?n(q,10):typeof m==="number"?n(q,m):!m.range&&[{range:m},r];if(v){m=v[0];r=v[1]}return m.range(q[0],Sd(+q[1]+1),r<1?1:
r)};l.tickFormat=function(){return h};l.copy=function(){return Pf(c.copy(),e,h)};return Ff(l,c)}function Sd(c){return new Date(c)}function qj(c){return JSON.parse(c.responseText)}function rj(c){var e=kd.createRange();e.selectNode(kd.body);return e.createContextualFragment(c.responseText)}var K={version:"3.4.3"};if(!Date.now)Date.now=function(){return+new Date};var oh=[].slice,Bd=function(c){return oh.call(c)},kd=document,Cd=kd.documentElement,Lc=window;try{Bd(Cd.childNodes)}catch(Vj){Bd=function(c){for(var e=
c.length,h=new Array(e);e--;)h[e]=c[e];return h}}try{kd.createElement("div").style.setProperty("opacity",0,"")}catch(Wj){var Vb=Lc.Element.prototype,sj=Vb.setAttribute,tj=Vb.setAttributeNS,ve=Lc.CSSStyleDeclaration.prototype,uj=ve.setProperty;Vb.setAttribute=function(c,e){sj.call(this,c,e+"")};Vb.setAttributeNS=function(c,e,h){tj.call(this,c,e,h+"")};ve.setProperty=function(c,e,h){uj.call(this,c,e+"",h)}}K.ascending=function(c,e){return c<e?-1:c>e?1:c>=e?0:NaN};K.descending=function(c,e){return e<
c?-1:e>c?1:e>=c?0:NaN};K.min=function(c,e){var h=-1,l=c.length,n,m;if(arguments.length===1){for(;++h<l&&!((n=c[h])!=null&&n<=n);)n=undefined;for(;++h<l;)if((m=c[h])!=null&&n>m)n=m}else{for(;++h<l&&!((n=e.call(c,c[h],h))!=null&&n<=n);)n=undefined;for(;++h<l;)if((m=e.call(c,c[h],h))!=null&&n>m)n=m}return n};K.max=function(c,e){var h=-1,l=c.length,n,m;if(arguments.length===1){for(;++h<l&&!((n=c[h])!=null&&n<=n);)n=undefined;for(;++h<l;)if((m=c[h])!=null&&m>n)n=m}else{for(;++h<l&&!((n=e.call(c,c[h],h))!=
null&&n<=n);)n=undefined;for(;++h<l;)if((m=e.call(c,c[h],h))!=null&&m>n)n=m}return n};K.extent=function(c,e){var h=-1,l=c.length,n,m,r;if(arguments.length===1){for(;++h<l&&!((n=r=c[h])!=null&&n<=n);)n=r=undefined;for(;++h<l;)if((m=c[h])!=null){if(n>m)n=m;if(r<m)r=m}}else{for(;++h<l&&!((n=r=e.call(c,c[h],h))!=null&&n<=n);)n=undefined;for(;++h<l;)if((m=e.call(c,c[h],h))!=null){if(n>m)n=m;if(r<m)r=m}}return[n,r]};K.sum=function(c,e){var h=0,l=c.length,n,m=-1;if(arguments.length===1)for(;++m<l;){if(!isNaN(n=
+c[m]))h+=n}else for(;++m<l;)if(!isNaN(n=+e.call(c,c[m],m)))h+=n;return h};K.mean=function(c,e){var h=c.length,l,n=0,m=-1,r=0;if(arguments.length===1)for(;++m<h;){if(b(l=c[m]))n+=(l-n)/++r}else for(;++m<h;)if(b(l=e.call(c,c[m],m)))n+=(l-n)/++r;return r?n:undefined};K.quantile=function(c,e){var h=(c.length-1)*e+1;e=Math.floor(h);var l=+c[e-1];return(h=h-e)?l+h*(c[e]-l):l};K.median=function(c,e){if(arguments.length>1)c=c.map(e);c=c.filter(b);return c.length?K.quantile(c.sort(K.ascending),0.5):undefined};
K.bisector=function(c){return{left:function(e,h,l,n){if(arguments.length<3)l=0;if(arguments.length<4)n=e.length;for(;l<n;){var m=l+n>>>1;if(c.call(e,e[m],m)<h)l=m+1;else n=m}return l},right:function(e,h,l,n){if(arguments.length<3)l=0;if(arguments.length<4)n=e.length;for(;l<n;){var m=l+n>>>1;if(h<c.call(e,e[m],m))n=m;else l=m+1}return l}}};Vb=K.bisector(function(c){return c});K.bisectLeft=Vb.left;K.bisect=K.bisectRight=Vb.right;K.shuffle=function(c){for(var e=c.length,h,l;e;){l=Math.random()*e--|0;
h=c[e];c[e]=c[l];c[l]=h}return c};K.permute=function(c,e){for(var h=e.length,l=new Array(h);h--;)l[h]=c[e[h]];return l};K.pairs=function(c){for(var e=0,h=c.length-1,l=c[0],n=new Array(h<0?0:h);e<h;)n[e]=[l,l=c[++e]];return n};K.zip=function(){if(!(n=arguments.length))return[];for(var c=-1,e=K.min(arguments,a),h=new Array(e);++c<e;)for(var l=-1,n,m=h[c]=new Array(n);++l<n;)m[l]=arguments[l][c];return h};K.transpose=function(c){return K.zip.apply(K,c)};K.keys=function(c){var e=[];for(var h in c)e.push(h);
return e};K.values=function(c){var e=[];for(var h in c)e.push(c[h]);return e};K.entries=function(c){var e=[];for(var h in c)e.push({key:h,value:c[h]});return e};K.merge=function(c){var e=c.length,h;h=-1;for(var l=0,n,m;++h<e;)l+=c[h].length;for(n=new Array(l);--e>=0;){m=c[e];for(h=m.length;--h>=0;)n[--l]=m[h]}return n};var pb=Math.abs;K.range=function(c,e,h){if(arguments.length<3){h=1;if(arguments.length<2){e=c;c=0}}if((e-c)/h===Infinity)throw new Error("infinite range");var l=[],n=d(pb(h)),m=-1,
r;c*=n;e*=n;h*=n;if(h<0)for(;(r=c+h*++m)>e;)l.push(r/n);else for(;(r=c+h*++m)<e;)l.push(r/n);return l};K.map=function(c){var e=new g;if(c instanceof g)c.forEach(function(l,n){e.set(l,n)});else for(var h in c)e.set(h,c[h]);return e};f(g,{has:k,get:function(c){return this[Ld+c]},set:function(c,e){return this[Ld+c]=e},remove:o,keys:s,values:function(){var c=[];this.forEach(function(e,h){c.push(h)});return c},entries:function(){var c=[];this.forEach(function(e,h){c.push({key:e,value:h})});return c},size:A,
empty:G,forEach:function(c){for(var e in this)e.charCodeAt(0)===ye&&c.call(this,e.substring(1),this[e])}});var Ld="\u0000",ye=Ld.charCodeAt(0);K.nest=function(){function c(q,v,x){if(x>=l.length)return r?r.call(h,v):m?v.sort(m):v;for(var z=-1,F=v.length,E=l[x++],S,U,T=new g,N;++z<F;)(N=T.get(S=E(U=v[z])))?N.push(U):T.set(S,[U]);if(q){U=q();v=function(Q,ba){U.set(Q,c(q,ba,x))}}else{U={};v=function(Q,ba){U[Q]=c(q,ba,x)}}T.forEach(v);return U}function e(q,v){if(v>=l.length)return q;var x=[],z=n[v++];
q.forEach(function(F,E){x.push({key:F,values:e(E,v)})});return z?x.sort(function(F,E){return z(F.key,E.key)}):x}var h={},l=[],n=[],m,r;h.map=function(q,v){return c(v,q,0)};h.entries=function(q){return e(c(K.map,q,0),0)};h.key=function(q){l.push(q);return h};h.sortKeys=function(q){n[l.length-1]=q;return h};h.sortValues=function(q){m=q;return h};h.rollup=function(q){r=q;return h};return h};K.set=function(c){var e=new H;if(c)for(var h=0,l=c.length;h<l;++h)e.add(c[h]);return e};f(H,{has:k,add:function(c){this[Ld+
c]=true;return c},remove:function(c){c=Ld+c;return c in this&&delete this[c]},values:s,size:A,empty:G,forEach:function(c){for(var e in this)e.charCodeAt(0)===ye&&c.call(this,e.substring(1))}});K.behavior={};K.rebind=function(c,e){for(var h=1,l=arguments.length,n;++h<l;)c[n=arguments[h]]=V(c,e,e[n]);return c};var Wf=["webkit","ms","moz","Moz","o","O"];K.dispatch=function(){for(var c=new na,e=-1,h=arguments.length;++e<h;)c[arguments[e]]=Da(c);return c};na.prototype.on=function(c,e){var h=c.indexOf("."),
l="";if(h>=0){l=c.substring(h+1);c=c.substring(0,h)}if(c)return arguments.length<2?this[c].on(l):this[c].on(l,e);if(arguments.length===2){if(e==null)for(c in this)this.hasOwnProperty(c)&&this[c].on(l,null);return this}};K.event=null;K.requote=function(c){return c.replace(vj,"\\$&")};var vj=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ze={}.__proto__?function(c,e){c.__proto__=e}:function(c,e){for(var h in e)c[h]=e[h]},ff=function(c,e){return e.querySelector(c)},gf=function(c,e){return e.querySelectorAll(c)},
wj=Cd[ia(Cd,"matchesSelector")],Xf=function(c,e){return wj.call(c,e)};if(typeof Sizzle==="function"){ff=function(c,e){return Sizzle(c,e)[0]||null};gf=function(c,e){return Sizzle.uniqueSort(Sizzle(c,e))};Xf=Sizzle.matchesSelector}K.selection=function(){return ph};var Jb=K.selection.prototype=[];Jb.select=function(c){var e=[],h,l,n,m;c=ca(c);for(var r=-1,q=this.length;++r<q;){e.push(h=[]);h.parentNode=(n=this[r]).parentNode;for(var v=-1,x=n.length;++v<x;)if(m=n[v]){h.push(l=c.call(m,m.__data__,v,r));
if(l&&"__data__"in m)l.__data__=m.__data__}else h.push(null)}return O(e)};Jb.selectAll=function(c){var e=[],h,l;c=xa(c);for(var n=-1,m=this.length;++n<m;)for(var r=this[n],q=-1,v=r.length;++q<v;)if(l=r[q]){e.push(h=Bd(c.call(l,l.__data__,q,n)));h.parentNode=l}return O(e)};var Qf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};K.ns={prefix:Qf,qualify:function(c){var e=
c.indexOf(":"),h=c;if(e>=0){h=c.substring(0,e);c=c.substring(e+1)}return Qf.hasOwnProperty(h)?{space:Qf[h],local:c}:c}};Jb.attr=function(c,e){if(arguments.length<2){if(typeof c==="string"){var h=this.node();c=K.ns.qualify(c);return c.local?h.getAttributeNS(c.space,c.local):h.getAttribute(c)}for(e in c)this.each(Ma(e,c[e]));return this}return this.each(Ma(c,e))};Jb.classed=function(c,e){if(arguments.length<2){if(typeof c==="string"){var h=this.node(),l=(c=ja(c)).length,n=-1;if(e=h.classList)for(;++n<
l;){if(!e.contains(c[n]))return false}else for(e=h.getAttribute("class");++n<l;)if(!va(c[n]).test(e))return false;return true}for(e in c)this.each(Ca(e,c[e]));return this}return this.each(Ca(c,e))};Jb.style=function(c,e,h){var l=arguments.length;if(l<3){if(typeof c!=="string"){if(l<2)e="";for(h in c)this.each(hb(h,c[h],e));return this}if(l<2)return Lc.getComputedStyle(this.node(),null).getPropertyValue(c);h=""}return this.each(hb(c,e,h))};Jb.property=function(c,e){if(arguments.length<2){if(typeof c===
"string")return this.node()[c];for(e in c)this.each(fb(e,c[e]));return this}return this.each(fb(c,e))};Jb.text=function(c){return arguments.length?this.each(typeof c==="function"?function(){var e=c.apply(this,arguments);this.textContent=e==null?"":e}:c==null?function(){this.textContent=""}:function(){this.textContent=c}):this.node().textContent};Jb.html=function(c){return arguments.length?this.each(typeof c==="function"?function(){var e=c.apply(this,arguments);this.innerHTML=e==null?"":e}:c==null?
function(){this.innerHTML=""}:function(){this.innerHTML=c}):this.node().innerHTML};Jb.append=function(c){c=Sb(c);return this.select(function(){return this.appendChild(c.apply(this,arguments))})};Jb.insert=function(c,e){c=Sb(c);e=ca(e);return this.select(function(){return this.insertBefore(c.apply(this,arguments),e.apply(this,arguments)||null)})};Jb.remove=function(){return this.each(function(){var c=this.parentNode;c&&c.removeChild(this)})};Jb.data=function(c,e){function h(z,F){var E,S=z.length,U=
F.length,T=Math.min(S,U),N=new Array(U),Q=new Array(U),ba=new Array(S),M,fa;if(e){T=new g;var ka=new g,da=[],pa;for(E=-1;++E<S;){pa=e.call(M=z[E],M.__data__,E);if(T.has(pa))ba[E]=M;else T.set(pa,M);da.push(pa)}for(E=-1;++E<U;){pa=e.call(F,fa=F[E],E);if(M=T.get(pa)){N[E]=M;M.__data__=fa}else ka.has(pa)||(Q[E]=Jc(fa));ka.set(pa,fa);T.remove(pa)}for(E=-1;++E<S;)if(T.has(da[E]))ba[E]=z[E]}else{for(E=-1;++E<T;){M=z[E];fa=F[E];if(M){M.__data__=fa;N[E]=M}else Q[E]=Jc(fa)}for(;E<U;++E)Q[E]=Jc(F[E]);for(;E<
S;++E)ba[E]=z[E]}Q.update=N;Q.parentNode=N.parentNode=ba.parentNode=z.parentNode;q.push(Q);v.push(N);x.push(ba)}var l=-1,n=this.length,m,r;if(!arguments.length){for(c=new Array(n=(m=this[0]).length);++l<n;)if(r=m[l])c[l]=r.__data__;return c}var q=Wb([]),v=O([]),x=O([]);if(typeof c==="function")for(;++l<n;)h(m=this[l],c.call(m,m.parentNode.__data__,l));else for(;++l<n;)h(m=this[l],c);v.enter=function(){return q};v.exit=function(){return x};return v};Jb.datum=function(c){return arguments.length?this.property("__data__",
c):this.property("__data__")};Jb.filter=function(c){var e=[],h,l,n;if(typeof c!=="function")c=Fc(c);for(var m=0,r=this.length;m<r;m++){e.push(h=[]);h.parentNode=(l=this[m]).parentNode;for(var q=0,v=l.length;q<v;q++)if((n=l[q])&&c.call(n,n.__data__,q,m))h.push(n)}return O(e)};Jb.order=function(){for(var c=-1,e=this.length;++c<e;)for(var h=this[c],l=h.length-1,n=h[l],m;--l>=0;)if(m=h[l]){n&&n!==m.nextSibling&&n.parentNode.insertBefore(m,n);n=m}return this};Jb.sort=function(c){c=Ra.apply(this,arguments);
for(var e=-1,h=this.length;++e<h;)this[e].sort(c);return this.order()};Jb.each=function(c){return Db(this,function(e,h,l){c.call(e,e.__data__,h,l)})};Jb.call=function(c){var e=Bd(arguments);c.apply(e[0]=this,e);return this};Jb.empty=function(){return!this.node()};Jb.node=function(){for(var c=0,e=this.length;c<e;c++)for(var h=this[c],l=0,n=h.length;l<n;l++){var m=h[l];if(m)return m}return null};Jb.size=function(){var c=0;this.each(function(){++c});return c};var sd=[];K.selection.enter=Wb;K.selection.enter.prototype=
sd;sd.append=Jb.append;sd.empty=Jb.empty;sd.node=Jb.node;sd.call=Jb.call;sd.size=Jb.size;sd.select=function(c){for(var e=[],h,l,n,m,r,q=-1,v=this.length;++q<v;){n=(m=this[q]).update;e.push(h=[]);h.parentNode=m.parentNode;for(var x=-1,z=m.length;++x<z;)if(r=m[x]){h.push(n[x]=l=c.call(m.parentNode,r.__data__,x,q));l.__data__=r.__data__}else h.push(null)}return O(e)};sd.insert=function(c,e){if(arguments.length<2)e=u(this);return Jb.insert.call(this,c,e)};Jb.transition=function(){for(var c=Td||++qh,e=
[],h,l,n=Xe||{time:Date.now(),ease:ai,delay:0,duration:250},m=-1,r=this.length;++m<r;){e.push(h=[]);for(var q=this[m],v=-1,x=q.length;++v<x;){if(l=q[v])Ve(l,v,c,n);h.push(l)}}return ue(e,c)};Jb.interrupt=function(){return this.each(Pc)};K.select=function(c){c=[typeof c==="string"?ff(c,kd):c];c.parentNode=Cd;return O([c])};K.selectAll=function(c){c=Bd(typeof c==="string"?gf(c,kd):c);c.parentNode=Cd;return O([c])};var ph=K.select(Cd);Jb.on=function(c,e,h){var l=arguments.length;if(l<3){if(typeof c!==
"string"){if(l<2)e=false;for(h in c)this.each(bd(h,c[h],e));return this}if(l<2)return(l=this.node()["__on"+c])&&l._;h=false}return this.each(bd(c,e,h))};var hf=K.map({mouseenter:"mouseover",mouseleave:"mouseout"});hf.forEach(function(c){"on"+c in kd&&hf.remove(c)});var je="onselectstart"in kd?null:ia(Cd.style,"userSelect"),Gh=0;K.mouse=function(c){return Vc(c,Ka())};var jf=/WebKit/.test(Lc.navigator.userAgent)?-1:0;K.touches=function(c,e){if(arguments.length<2)e=Ka().touches;return e?Bd(e).map(function(h){var l=
Vc(c,h);l.identifier=h.identifier;return l}):[]};K.behavior.drag=function(){function c(){this.on("mousedown.drag",r).on("touchstart.drag",q)}function e(){return K.event.changedTouches[0].identifier}function h(v,x){return K.touches(v).filter(function(z){return z.identifier===x})[0]}function l(v,x,z,F){return function(){function E(){var Ba=x(T,ba),Ua=Ba[0]-fa[0],gb=Ba[1]-fa[1];ka|=Ua|gb;fa=Ba;N({type:"drag",x:Ba[0]+da[0],y:Ba[1]+da[1],dx:Ua,dy:gb})}function S(){pa.on(z+"."+M,null).on(F+"."+M,null);
la(ka&&K.event.target===Q);N({type:"dragend"})}var U=this,T=U.parentNode,N=n.of(U,arguments),Q=K.event.target,ba=v(),M=ba==null?"drag":"drag-"+ba,fa=x(T,ba),ka=0,da,pa=K.select(Lc).on(z+"."+M,E).on(F+"."+M,S),la=wc();if(m){da=m.apply(U,arguments);da=[da.x-fa[0],da.y-fa[1]]}else da=[0,0];N({type:"dragstart"})}}var n=ma(c,"drag","dragstart","dragend"),m=null,r=l(ha,K.mouse,"mousemove","mouseup"),q=l(e,h,"touchmove","touchend");c.origin=function(v){if(!arguments.length)return m;m=v;return c};return K.rebind(c,
n,"on")};var qb=Math.PI,Zc=2*qb,Sc=qb/2,$a=1.0E-6,rf=$a*$a,mb=qb/180,gc=180/qb,Ye=Math.SQRT2,Rf=2;K.interpolateZoom=function(c,e){function h(S){var U=S*E;if(F){S=Gb(z);var T=m/(Rf*x)*(S*Tb(Ye*U+z)-Kb(z));return[l+T*r,n+T*q,m*S/Gb(Ye*U+z)]}return[l+S*r,n+S*q,m*Math.exp(Ye*U)]}var l=c[0],n=c[1],m=c[2];c=e[2];var r=e[0]-l,q=e[1]-n,v=r*r+q*q,x=Math.sqrt(v);e=(c*c-m*m+4*v)/(2*m*Rf*x);v=(c*c-m*m-4*v)/(2*c*Rf*x);var z=Math.log(Math.sqrt(e*e+1)-e),F=Math.log(Math.sqrt(v*v+1)-v)-z,E=(F||Math.log(c/m))/Ye;
h.duration=E*1E3;return h};K.behavior.zoom=function(){function c(ea){ea.on(M,x).on(xj+".zoom",F).on(fa,E).on("dblclick.zoom",S).on(pa,z)}function e(ea){return[(ea[0]-U.x)/U.k,(ea[1]-U.y)/U.k]}function h(ea){return[ea[0]*U.k+U.x,ea[1]*U.k+U.y]}function l(ea){U.k=Math.max(ba[0],Math.min(ba[1],ea))}function n(ea,ta){ta=h(ta);U.x+=ea[0]-ta[0];U.y+=ea[1]-ta[1]}function m(){gb&&gb.domain(Ua.range().map(function(ea){return(ea-U.x)/U.k}).map(Ua.invert));nb&&nb.domain(tb.range().map(function(ea){return(ea-
U.y)/U.k}).map(tb.invert))}function r(ea){ea({type:"zoomstart"})}function q(ea){m();ea({type:"zoom",scale:U.k,translate:[U.x,U.y]})}function v(ea){ea({type:"zoomend"})}function x(){function ea(){jb=1;n(K.mouse(Za),Qb);q(kb)}function ta(){Eb.on(fa,Lc===Za?E:null).on(ka,null);Ec(jb&&K.event.target===Qa);v(kb)}var Za=this,kb=Ba.of(Za,arguments),Qa=K.event.target,jb=0,Eb=K.select(Lc).on(fa,ea).on(ka,ta),Qb=e(K.mouse(Za)),Ec=wc();Pc.call(Za);r(kb)}function z(){function ea(){var zc=K.touches(Qa);Ec=U.k;
zc.forEach(function(nc){if(nc.identifier in Eb)Eb[nc.identifier]=e(nc)});return zc}function ta(){for(var zc=K.event.changedTouches,nc=0,Dc=zc.length;nc<Dc;++nc)Eb[zc[nc].identifier]=null;Dc=ea();nc=Date.now();if(Dc.length===1){if(nc-la<500){zc=Dc[0];Dc=Eb[zc.identifier];l(U.k*2);n(zc,Dc);Ja();q(jb)}la=nc}else if(Dc.length>1){zc=Dc[0];Dc=Dc[1];nc=zc[0]-Dc[0];zc=zc[1]-Dc[1];Qb=nc*nc+zc*zc}}function Za(){for(var zc=K.touches(Qa),nc,Dc,Id,ee,Sf=0,yj=zc.length;Sf<yj;++Sf,ee=null){Id=zc[Sf];if(ee=Eb[Id.identifier]){if(Dc)break;
nc=Id;Dc=ee}}if(ee){var we=(we=Id[0]-nc[0])*we+(we=Id[1]-nc[1])*we;zc=Qb&&Math.sqrt(we/Qb);nc=[(nc[0]+Id[0])/2,(nc[1]+Id[1])/2];Dc=[(Dc[0]+ee[0])/2,(Dc[1]+ee[1])/2];l(zc*Ec)}la=null;n(nc,Dc);q(jb)}function kb(){if(K.event.touches.length){for(var zc=K.event.changedTouches,nc=0,Dc=zc.length;nc<Dc;++nc)delete Eb[zc[nc].identifier];for(var Id in Eb)return void ea()}zj.on(xe,null).on(rh,null);Aj.on(M,x).on(pa,z);Bj();v(jb)}var Qa=this,jb=Ba.of(Qa,arguments),Eb={},Qb=0,Ec,Oc=K.event.changedTouches[0].identifier,
xe="touchmove.zoom-"+Oc,rh="touchend.zoom-"+Oc,zj=K.select(Lc).on(xe,Za).on(rh,kb),Aj=K.select(Qa).on(M,null).on(pa,ta),Bj=wc();Pc.call(Qa);ta();r(jb)}function F(){var ea=Ba.of(this,arguments);if(da)clearTimeout(da);else{Pc.call(this);r(ea)}da=setTimeout(function(){da=null;v(ea)},50);Ja();var ta=N||K.mouse(this);T||(T=e(ta));l(Math.pow(2,Ze()*0.002)*U.k);n(ta,T);q(ea)}function E(){T=null}function S(){var ea=Ba.of(this,arguments),ta=K.mouse(this),Za=e(ta),kb=Math.log(U.k)/Math.LN2;r(ea);l(Math.pow(2,
K.event.shiftKey?Math.ceil(kb)-1:Math.floor(kb)+1));n(ta,Za);q(ea);v(ea)}var U={x:0,y:0,k:1},T,N,Q=[960,500],ba=sh,M="mousedown.zoom",fa="mousemove.zoom",ka="mouseup.zoom",da,pa="touchstart.zoom",la,Ba=ma(c,"zoomstart","zoom","zoomend"),Ua,gb,tb,nb;c.event=function(ea){ea.each(function(){var ta=Ba.of(this,arguments),Za=U;if(Td)K.select(this).transition().each("start.zoom",function(){U=this.__chart__||{x:0,y:0,k:1};r(ta)}).tween("zoom:zoom",function(){var kb=Q[0],Qa=kb/2,jb=Q[1]/2,Eb=K.interpolateZoom([(Qa-
U.x)/U.k,(jb-U.y)/U.k,kb/U.k],[(Qa-Za.x)/Za.k,(jb-Za.y)/Za.k,kb/Za.k]);return function(Qb){Qb=Eb(Qb);var Ec=kb/Qb[2];this.__chart__=U={x:Qa-Qb[0]*Ec,y:jb-Qb[1]*Ec,k:Ec};q(ta)}}).each("end.zoom",function(){v(ta)});else{this.__chart__=U;r(ta);q(ta);v(ta)}})};c.translate=function(ea){if(!arguments.length)return[U.x,U.y];U={x:+ea[0],y:+ea[1],k:U.k};m();return c};c.scale=function(ea){if(!arguments.length)return U.k;U={x:U.x,y:U.y,k:+ea};m();return c};c.scaleExtent=function(ea){if(!arguments.length)return ba;
ba=ea==null?sh:[+ea[0],+ea[1]];return c};c.center=function(ea){if(!arguments.length)return N;N=ea&&[+ea[0],+ea[1]];return c};c.size=function(ea){if(!arguments.length)return Q;Q=ea&&[+ea[0],+ea[1]];return c};c.x=function(ea){if(!arguments.length)return gb;gb=ea;Ua=ea.copy();U={x:0,y:0,k:1};return c};c.y=function(ea){if(!arguments.length)return nb;nb=ea;tb=ea.copy();U={x:0,y:0,k:1};return c};return K.rebind(c,Ba,"on")};var sh=[0,Infinity],Ze,xj="onwheel"in kd?(Ze=function(){return-K.event.deltaY*(K.event.deltaMode?
120:1)},"wheel"):"onmousewheel"in kd?(Ze=function(){return K.event.wheelDelta},"mousewheel"):(Ze=function(){return-K.event.detail},"MozMousePixelScroll");Ac.prototype.toString=function(){return this.rgb()+""};K.hsl=function(c,e,h){return arguments.length===1?c instanceof cc?Bc(c.h,c.s,c.l):Mb(""+c,Ta,Bc):Bc(+c,+e,+h)};Vb=cc.prototype=new Ac;Vb.brighter=function(c){c=Math.pow(0.7,arguments.length?c:1);return Bc(this.h,this.s,this.l/c)};Vb.darker=function(c){c=Math.pow(0.7,arguments.length?c:1);return Bc(this.h,
this.s,c*this.l)};Vb.rgb=function(){return sc(this.h,this.s,this.l)};K.hcl=function(c,e,h){return arguments.length===1?c instanceof xc?dc(c.h,c.c,c.l):c instanceof Lb?Kc(c.l,c.a,c.b):Kc((c=Yb((c=K.rgb(c)).r,c.g,c.b)).l,c.a,c.b):dc(+c,+e,+h)};Vb=xc.prototype=new Ac;Vb.brighter=function(c){return dc(this.h,this.c,Math.min(100,this.l+$e*(arguments.length?c:1)))};Vb.darker=function(c){return dc(this.h,this.c,Math.max(0,this.l-$e*(arguments.length?c:1)))};Vb.rgb=function(){return $b(this.h,this.c,this.l).rgb()};
K.lab=function(c,e,h){return arguments.length===1?c instanceof Lb?Ab(c.l,c.a,c.b):c instanceof xc?$b(c.l,c.c,c.h):Yb((c=K.rgb(c)).r,c.g,c.b):Ab(+c,+e,+h)};var $e=18,Yf=0.95047,Zf=1,$f=1.08883;Vb=Lb.prototype=new Ac;Vb.brighter=function(c){return Ab(Math.min(100,this.l+$e*(arguments.length?c:1)),this.a,this.b)};Vb.darker=function(c){return Ab(Math.max(0,this.l-$e*(arguments.length?c:1)),this.a,this.b)};Vb.rgb=function(){return ec(this.l,this.a,this.b)};K.rgb=function(c,e,h){return arguments.length===
1?c instanceof uc?Ib(c.r,c.g,c.b):Mb(""+c,Ib,sc):Ib(~~c,~~e,~~h)};Vb=uc.prototype=new Ac;Vb.brighter=function(c){c=Math.pow(0.7,arguments.length?c:1);var e=this.r,h=this.g,l=this.b;if(!e&&!h&&!l)return Ib(30,30,30);if(e&&e<30)e=30;if(h&&h<30)h=30;if(l&&l<30)l=30;return Ib(Math.min(255,~~(e/c)),Math.min(255,~~(h/c)),Math.min(255,~~(l/c)))};Vb.darker=function(c){c=Math.pow(0.7,arguments.length?c:1);return Ib(~~(c*this.r),~~(c*this.g),~~(c*this.b))};Vb.hsl=function(){return Ta(this.r,this.g,this.b)};
Vb.toString=function(){return"#"+Pb(this.r)+Pb(this.g)+Pb(this.b)};var Ae=K.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,
darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,
gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,
lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,
orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,
springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ae.forEach(function(c,e){Ae.set(c,Ob(e))});K.functor=rb;K.xhr=Ic(Nb);K.dsv=function(c,e){function h(x,z,F){if(arguments.length<3){F=z;z=null}var E=Bb(x,e,z==null?l:n(z),F);E.row=function(S){return arguments.length?E.response((z=S)==null?l:n(S)):z};return E}function l(x){return h.parse(x.responseText)}
function n(x){return function(z){return h.parse(z.responseText,x)}}function m(x){return x.map(r).join(c)}function r(x){return q.test(x)?'"'+x.replace(/\"/g,'""')+'"':x}var q=new RegExp('["'+c+"\n]"),v=c.charCodeAt(0);h.parse=function(x,z){var F;return h.parseRows(x,function(E,S){if(F)return F(E,S-1);var U=new Function("d","return {"+E.map(function(T,N){return JSON.stringify(T)+": d["+N+"]"}).join(",")+"}");F=z?function(T,N){return z(U(T),N)}:U})};h.parseRows=function(x,z){function F(){if(N>=T)return S;
if(M)return M=false,E;var ka=N;if(x.charCodeAt(ka)===34){for(var da=ka;da++<T;)if(x.charCodeAt(da)===34){if(x.charCodeAt(da+1)!==34)break;++da}N=da+2;var pa=x.charCodeAt(da+1);if(pa===13){M=true;x.charCodeAt(da+2)===10&&++N}else if(pa===10)M=true;return x.substring(ka+1,da).replace(/""/g,'"')}for(;N<T;){pa=x.charCodeAt(N++);da=1;if(pa===10)M=true;else if(pa===13){M=true;if(x.charCodeAt(N)===10){++N;++da}}else if(pa!==v)continue;return x.substring(ka,N-da)}return x.substring(ka)}for(var E={},S={},
U=[],T=x.length,N=0,Q=0,ba,M;(ba=F())!==S;){for(var fa=[];ba!==E&&ba!==S;){fa.push(ba);ba=F()}z&&!(fa=z(fa,Q++))||U.push(fa)}return U};h.format=function(x){if(Array.isArray(x[0]))return h.formatRows(x);var z=new H,F=[];x.forEach(function(E){for(var S in E)z.has(S)||F.push(z.add(S))});return[F.map(r).join(c)].concat(x.map(function(E){return F.map(function(S){return r(E[S])}).join(c)})).join("\n")};h.formatRows=function(x){return x.map(m).join("\n")};return h};K.csv=K.dsv(",","text/csv");K.tsv=K.dsv("\t",
"text/tab-separated-values");var De,Ee,Ce,Be,td,ag=Lc[ia(Lc,"requestAnimationFrame")]||function(c){setTimeout(c,17)};K.timer=function(c,e,h){var l=arguments.length;if(l<2)e=0;if(l<3)h=Date.now();l={c:c,t:h+e,f:false,n:null};if(Ee)Ee.n=l;else De=l;Ee=l;if(!Ce){Be=clearTimeout(Be);Ce=1;ag(fc)}};K.timer.flush=function(){qc();Ub()};K.round=function(c,e){return e?Math.round(c*(e=Math.pow(10,e)))/e:Math.round(c)};var Cj=["y","z","a","f","p","n","\u00b5","m","","k","M","G","T","P","E","Z","Y"].map(ua);K.formatPrefix=
function(c,e){var h=0;if(c){if(c<0)c*=-1;if(e)c=K.round(c,Qc(c,e));h=1+Math.floor(1.0E-12+Math.log(c)/Math.LN10);h=Math.max(-24,Math.min(24,Math.floor((h<=0?h+1:h-1)/3)*3))}return Cj[8+h/3]};var bg=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Hh=K.map({b:function(c){return c.toString(2)},c:function(c){return String.fromCharCode(c)},o:function(c){return c.toString(8)},x:function(c){return c.toString(16)},X:function(c){return c.toString(16).toUpperCase()},g:function(c,e){return c.toPrecision(e)},
e:function(c,e){return c.toExponential(e)},f:function(c,e){return c.toFixed(e)},r:function(c,e){return(c=K.round(c,Qc(c,e))).toFixed(Math.max(0,Math.min(20,Qc(c*(1+1.0E-15),e))))}}),cb=K.time={},Mc=Date;db.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},
getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){xd.setUTCDate.apply(this._,arguments)},setDay:function(){xd.setUTCDay.apply(this._,arguments)},setFullYear:function(){xd.setUTCFullYear.apply(this._,arguments)},setHours:function(){xd.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){xd.setUTCMilliseconds.apply(this._,
arguments)},setMinutes:function(){xd.setUTCMinutes.apply(this._,arguments)},setMonth:function(){xd.setUTCMonth.apply(this._,arguments)},setSeconds:function(){xd.setUTCSeconds.apply(this._,arguments)},setTime:function(){xd.setTime.apply(this._,arguments)}};var xd=Date.prototype;cb.year=ib(function(c){c=cb.day(c);c.setMonth(0,1);return c},function(c,e){c.setFullYear(c.getFullYear()+e)},function(c){return c.getFullYear()});cb.years=cb.year.range;cb.years.utc=cb.year.utc.range;cb.day=ib(function(c){var e=
new Mc(2E3,0);e.setFullYear(c.getFullYear(),c.getMonth(),c.getDate());return e},function(c,e){c.setDate(c.getDate()+e)},function(c){return c.getDate()-1});cb.days=cb.day.range;cb.days.utc=cb.day.utc.range;cb.dayOfYear=function(c){var e=cb.year(c);return Math.floor((c-e-(c.getTimezoneOffset()-e.getTimezoneOffset())*6E4)/864E5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(c,e){e=7-e;var h=cb[c]=ib(function(l){(l=cb.day(l)).setDate(l.getDate()-(l.getDay()+
e)%7);return l},function(l,n){l.setDate(l.getDate()+Math.floor(n)*7)},function(l){var n=cb.year(l).getDay();return Math.floor((cb.dayOfYear(l)+(n+e)%7)/7)-(n!==e)});cb[c+"s"]=h.range;cb[c+"s"].utc=h.utc.range;cb[c+"OfYear"]=function(l){var n=cb.year(l).getDay();return Math.floor((cb.dayOfYear(l)+(n+e)%7)/7)}});cb.week=cb.sunday;cb.weeks=cb.sunday.range;cb.weeks.utc=cb.sunday.utc.range;cb.weekOfYear=cb.sundayOfYear;var cg={"-":"",_:" ","0":"0"},pc=/^\s*\d+/,dg=/^%/;K.locale=function(c){return{numberFormat:Ha(c),
timeFormat:zb(c)}};Vb=K.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});
K.format=Vb.numberFormat;K.geo={};Y.prototype={s:0,t:0,add:function(c){sa(c,this.t,af);sa(af.s,this.s,this);if(this.s)this.t+=af.t;else this.s=af.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var af=new Y;K.geo.stream=function(c,e){c&&th.hasOwnProperty(c.type)?th[c.type](c,e):wa(c,e)};var th={Feature:function(c,e){wa(c.geometry,e)},FeatureCollection:function(c,e){c=c.features;for(var h=-1,l=c.length;++h<l;)wa(c[h].geometry,e)}},eg={Sphere:function(c,e){e.sphere()},Point:function(c,
e){c=c.coordinates;e.point(c[0],c[1],c[2])},MultiPoint:function(c,e){for(var h=c.coordinates,l=-1,n=h.length;++l<n;){c=h[l];e.point(c[0],c[1],c[2])}},LineString:function(c,e){ab(c.coordinates,e,0)},MultiLineString:function(c,e){c=c.coordinates;for(var h=-1,l=c.length;++h<l;)ab(c[h],e,0)},Polygon:function(c,e){lb(c.coordinates,e)},MultiPolygon:function(c,e){c=c.coordinates;for(var h=-1,l=c.length;++h<l;)lb(c[h],e)},GeometryCollection:function(c,e){c=c.geometries;for(var h=-1,l=c.length;++h<l;)wa(c[h],
e)}};K.geo.area=function(c){bf=0;K.geo.stream(c,Yc);return bf};var bf,Md=new Y,Yc={sphere:function(){bf+=4*qb},point:ha,lineStart:ha,lineEnd:ha,polygonStart:function(){Md.reset();Yc.lineStart=Rb},polygonEnd:function(){var c=2*Md;bf+=c<0?4*qb+c:c;Yc.lineStart=Yc.lineEnd=Yc.point=ha}};K.geo.bounds=function(){function c(da,pa){M.push(fa=[z=da,E=da]);if(pa<F)F=pa;if(pa>S)S=pa}function e(da,pa){var la=ac([da*mb,pa*mb]);if(Q){var Ba=md(Q,la);Ba=md([Ba[1],-Ba[0],0],Ba);yd(Ba);Ba=Rc(Ba);var Ua=da-U,gb=Ua>
0?1:-1,tb=Ba[0]*gc*gb;Ua=pb(Ua)>180;if(Ua^(gb*U<tb&&tb<gb*da)){pa=Ba[1]*gc;if(pa>S)S=pa}else if(tb=(tb+360)%360-180,Ua^(gb*U<tb&&tb<gb*da)){pa=-Ba[1]*gc;if(pa<F)F=pa}else{if(pa<F)F=pa;if(pa>S)S=pa}if(Ua)if(da<U){if(q(z,da)>q(z,E))E=da}else{if(q(da,E)>q(z,E))z=da}else if(E>=z){if(da<z)z=da;if(da>E)E=da}else if(da>U){if(q(z,da)>q(z,E))E=da}else if(q(da,E)>q(z,E))z=da}else c(da,pa);Q=la;U=da}function h(){ka.point=e}function l(){fa[0]=z;fa[1]=E;ka.point=c;Q=null}function n(da,pa){if(Q){var la=da-U;ba+=
pb(la)>180?la+(la>0?360:-360):la}else{T=da;N=pa}Yc.point(da,pa);e(da,pa)}function m(){Yc.lineStart()}function r(){n(T,N);Yc.lineEnd();if(pb(ba)>$a)z=-(E=180);fa[0]=z;fa[1]=E;Q=null}function q(da,pa){return(pa-=da)<0?pa+360:pa}function v(da,pa){return da[0]-pa[0]}function x(da,pa){return pa[0]<=pa[1]?pa[0]<=da&&da<=pa[1]:da<pa[0]||pa[1]<da}var z,F,E,S,U,T,N,Q,ba,M,fa,ka={point:c,lineStart:h,lineEnd:l,polygonStart:function(){ka.point=n;ka.lineStart=m;ka.lineEnd=r;ba=0;Yc.polygonStart()},polygonEnd:function(){Yc.polygonEnd();
ka.point=c;ka.lineStart=h;ka.lineEnd=l;if(Md<0){z=-(E=180);F=-(S=90)}else if(ba>$a)S=90;else if(ba<-$a)F=-90;fa[0]=z;fa[1]=E}};return function(da){S=E=-(z=F=Infinity);M=[];K.geo.stream(da,ka);if(da=M.length){M.sort(v);for(var pa=1,la=M[0],Ba,Ua=[la];pa<da;++pa){Ba=M[pa];if(x(Ba[0],la)||x(Ba[1],la)){if(q(la[0],Ba[1])>q(la[0],la[1]))la[1]=Ba[1];if(q(Ba[0],la[1])>q(la[0],la[1]))la[0]=Ba[0]}else Ua.push(la=Ba)}var gb=-Infinity,tb;da=Ua.length-1;pa=0;for(la=Ua[da];pa<=da;la=Ba,++pa){Ba=Ua[pa];if((tb=q(la[1],
Ba[0]))>gb){gb=tb;z=Ba[0];E=la[1]}}}M=fa=null;return z===Infinity||F===Infinity?[[NaN,NaN],[NaN,NaN]]:[[z,F],[E,S]]}}();K.geo.centroid=function(c){ke=Fe=Nd=Od=ud=Dd=Ed=nd=Wd=Xd=Fd=0;K.geo.stream(c,id);c=Wd;var e=Xd,h=Fd,l=c*c+e*e+h*h;if(l<rf){c=Dd;e=Ed;h=nd;if(Fe<$a){c=Nd;e=Od;h=ud}l=c*c+e*e+h*h;if(l<rf)return[NaN,NaN]}return[Math.atan2(e,c)*gc,Hb(h/Math.sqrt(l))*gc]};var ke,Fe,Nd,Od,ud,Dd,Ed,nd,Wd,Xd,Fd,id={sphere:ha,point:he,lineStart:Kd,lineEnd:fe,polygonStart:function(){id.lineStart=Ud},polygonEnd:function(){id.lineStart=
Kd}},fg=w(Ad,W,qa,[-qb,-qb/2]),Ge=1E9;K.geo.clipExtent=function(){var c,e,h,l,n,m,r={stream:function(q){if(n)n.valid=false;n=m(q);n.valid=true;return n},extent:function(q){if(!arguments.length)return[[c,e],[h,l]];m=Sa(c=+q[0][0],e=+q[0][1],h=+q[1][0],l=+q[1][1]);if(n){n.valid=false;n=null}return r}};return r.extent([[0,0],[960,500]])};(K.geo.conicEqualArea=function(){return ob(bc)}).raw=bc;K.geo.albers=function(){return K.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)};
K.geo.albersUsa=function(){function c(x){var z=x[0];x=x[1];n=null;(r(z,x),n)||(q(z,x),n)||v(z,x);return n}var e=K.geo.albers(),h=K.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=K.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),n,m={point:function(x,z){n=[x,z]}},r,q,v;c.invert=function(x){var z=e.scale(),F=e.translate(),E=(x[0]-F[0])/z;z=(x[1]-F[1])/z;return(z>=0.12&&z<0.234&&E>=-0.425&&E<-0.214?h:z>=0.166&&z<0.234&&E>=-0.214&&E<-0.115?l:e).invert(x)};
c.stream=function(x){var z=e.stream(x),F=h.stream(x),E=l.stream(x);return{point:function(S,U){z.point(S,U);F.point(S,U);E.point(S,U)},sphere:function(){z.sphere();F.sphere();E.sphere()},lineStart:function(){z.lineStart();F.lineStart();E.lineStart()},lineEnd:function(){z.lineEnd();F.lineEnd();E.lineEnd()},polygonStart:function(){z.polygonStart();F.polygonStart();E.polygonStart()},polygonEnd:function(){z.polygonEnd();F.polygonEnd();E.polygonEnd()}}};c.precision=function(x){if(!arguments.length)return e.precision();
e.precision(x);h.precision(x);l.precision(x);return c};c.scale=function(x){if(!arguments.length)return e.scale();e.scale(x);h.scale(x*0.35);l.scale(x);return c.translate(e.translate())};c.translate=function(x){if(!arguments.length)return e.translate();var z=e.scale(),F=+x[0],E=+x[1];r=e.translate(x).clipExtent([[F-0.455*z,E-0.238*z],[F+0.455*z,E+0.238*z]]).stream(m).point;q=h.translate([F-0.307*z,E+0.201*z]).clipExtent([[F-0.425*z+$a,E+0.12*z+$a],[F-0.214*z-$a,E+0.234*z-$a]]).stream(m).point;v=l.translate([F-
0.205*z,E+0.212*z]).clipExtent([[F-0.214*z+$a,E+0.166*z+$a],[F-0.115*z-$a,E+0.234*z-$a]]).stream(m).point;return c};return c.scale(1070)};var Tf,kf,Gd={point:ha,lineStart:ha,lineEnd:ha,polygonStart:function(){kf=0;Gd.lineStart=lc},polygonEnd:function(){Gd.lineStart=Gd.lineEnd=Gd.point=ha;Tf+=pb(kf/2)}},He,Je,Ie,Ke,Dj={point:hc,lineStart:ha,lineEnd:ha,polygonStart:ha,polygonEnd:ha},jd={point:Gc,lineStart:Tc,lineEnd:J,polygonStart:function(){jd.lineStart=P},polygonEnd:function(){jd.point=Gc;jd.lineStart=
Tc;jd.lineEnd=J}};K.geo.path=function(){function c(v){if(v){typeof h==="function"&&r.pointRadius(+h.apply(this,arguments));if(!q||!q.valid)q=m(r);K.geo.stream(v,q)}return r.result()}function e(){q=null;return c}var h=4.5,l,n,m,r,q;c.area=function(v){Tf=0;K.geo.stream(v,m(Gd));return Tf};c.centroid=function(v){Nd=Od=ud=Dd=Ed=nd=Wd=Xd=Fd=0;K.geo.stream(v,m(jd));return Fd?[Wd/Fd,Xd/Fd]:nd?[Dd/nd,Ed/nd]:ud?[Nd/ud,Od/ud]:[NaN,NaN]};c.bounds=function(v){Ie=Ke=-(He=Je=Infinity);K.geo.stream(v,m(Dj));return[[He,
Je],[Ie,Ke]]};c.projection=function(v){if(!arguments.length)return l;m=(l=v)?v.stream||Ea(v):Nb;return e()};c.context=function(v){if(!arguments.length)return n;r=(n=v)==null?new fd:new ra(v);typeof h!=="function"&&r.pointRadius(h);return e()};c.pointRadius=function(v){if(!arguments.length)return h;h=typeof v==="function"?v:(r.pointRadius(+v),+v);return c};return c.projection(K.geo.albersUsa()).context(null)};K.geo.transform=function(c){return{stream:function(e){e=new Ia(e);for(var h in c)e[h]=c[h];
return e}}};Ia.prototype={point:function(c,e){this.stream.point(c,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};K.geo.projection=Ya;K.geo.projectionMutator=wb;(K.geo.equirectangular=function(){return Ya(Fa)}).raw=Fa.invert=Fa;K.geo.rotation=function(c){function e(h){h=c(h[0]*mb,h[1]*mb);return h[0]*=gc,h[1]*=gc,h}
c=Oa(c[0]%360*mb,c[1]*mb,c.length>2?c[2]*mb:0);e.invert=function(h){h=c.invert(h[0]*mb,h[1]*mb);return h[0]*=gc,h[1]*=gc,h};return e};Wa.invert=Fa;K.geo.circle=function(){function c(){var m=typeof e==="function"?e.apply(this,arguments):e,r=Oa(-m[0]*mb,-m[1]*mb,0).invert,q=[];n(null,null,1,{point:function(v,x){q.push(v=r(v,x));v[0]*=gc;v[1]*=gc}});return{type:"Polygon",coordinates:[q]}}var e=[0,0],h,l=6,n;c.origin=function(m){if(!arguments.length)return e;e=m;return c};c.angle=function(m){if(!arguments.length)return h;
n=rc((h=+m)*mb,l*mb);return c};c.precision=function(m){if(!arguments.length)return l;n=rc(h*mb,(l=+m)*mb);return c};return c.angle(90)};K.geo.distance=function(c,e){var h=(e[0]-c[0])*mb,l=c[1]*mb;c=e[1]*mb;e=Math.sin(h);h=Math.cos(h);var n=Math.sin(l);l=Math.cos(l);var m=Math.sin(c);c=Math.cos(c);var r;return Math.atan2(Math.sqrt((r=c*e)*r+(r=l*m-n*c*h)*r),n*m+l*c*h)};K.geo.graticule=function(){function c(){return{type:"MultiLineString",coordinates:e()}}function e(){return K.range(Math.ceil(m/E)*
E,n,E).map(N).concat(K.range(Math.ceil(x/S)*S,v,S).map(Q)).concat(K.range(Math.ceil(l/z)*z,h,z).filter(function(M){return pb(M%E)>$a}).map(U)).concat(K.range(Math.ceil(q/F)*F,r,F).filter(function(M){return pb(M%S)>$a}).map(T))}var h,l,n,m,r,q,v,x,z=10,F=z,E=90,S=360,U,T,N,Q,ba=2.5;c.lines=function(){return e().map(function(M){return{type:"LineString",coordinates:M}})};c.outline=function(){return{type:"Polygon",coordinates:[N(m).concat(Q(v).slice(1),N(n).reverse().slice(1),Q(x).reverse().slice(1))]}};
c.extent=function(M){if(!arguments.length)return c.minorExtent();return c.majorExtent(M).minorExtent(M)};c.majorExtent=function(M){if(!arguments.length)return[[m,x],[n,v]];m=+M[0][0];n=+M[1][0];x=+M[0][1];v=+M[1][1];if(m>n){M=m;m=n;n=M}if(x>v){M=x;x=v;v=M}return c.precision(ba)};c.minorExtent=function(M){if(!arguments.length)return[[l,q],[h,r]];l=+M[0][0];h=+M[1][0];q=+M[0][1];r=+M[1][1];if(l>h){M=l;l=h;h=M}if(q>r){M=q;q=r;r=M}return c.precision(ba)};c.step=function(M){if(!arguments.length)return c.minorStep();
return c.majorStep(M).minorStep(M)};c.majorStep=function(M){if(!arguments.length)return[E,S];E=+M[0];S=+M[1];return c};c.minorStep=function(M){if(!arguments.length)return[z,F];z=+M[0];F=+M[1];return c};c.precision=function(M){if(!arguments.length)return ba;ba=+M;U=gg(q,r,90);T=hg(l,h,ba);N=gg(x,v,90);Q=hg(m,n,ba);return c};return c.majorExtent([[-180,-90+$a],[180,90-$a]]).minorExtent([[-180,-80-$a],[180,80+$a]])};K.geo.greatArc=function(){function c(){return{type:"LineString",coordinates:[h||e.apply(this,
arguments),n||l.apply(this,arguments)]}}var e=lf,h,l=mf,n;c.distance=function(){return K.geo.distance(h||e.apply(this,arguments),n||l.apply(this,arguments))};c.source=function(m){if(!arguments.length)return e;e=m;h=typeof m==="function"?null:m;return c};c.target=function(m){if(!arguments.length)return l;l=m;n=typeof m==="function"?null:m;return c};c.precision=function(){return arguments.length?c:0};return c};K.geo.interpolate=function(c,e){return Ih(c[0]*mb,c[1]*mb,e[0]*mb,e[1]*mb)};K.geo.length=
function(c){nf=0;K.geo.stream(c,Yd);return nf};var nf,Yd={sphere:ha,point:ha,lineStart:Jh,lineEnd:ha,polygonStart:ha,polygonEnd:ha},uh=le(function(c){return Math.sqrt(2/(1+c))},function(c){return 2*Math.asin(c/2)});(K.geo.azimuthalEqualArea=function(){return Ya(uh)}).raw=uh;var vh=le(function(c){return(c=Math.acos(c))&&c/Math.sin(c)},Nb);(K.geo.azimuthalEquidistant=function(){return Ya(vh)}).raw=vh;(K.geo.conicConformal=function(){return ob(ig)}).raw=ig;(K.geo.conicEquidistant=function(){return ob(jg)}).raw=
jg;var wh=le(function(c){return 1/c},Math.atan);(K.geo.gnomonic=function(){return Ya(wh)}).raw=wh;Le.invert=function(c,e){return[c,2*Math.atan(Math.exp(e))-Sc]};(K.geo.mercator=function(){return kg(Le)}).raw=Le;var xh=le(function(){return 1},Math.asin);(K.geo.orthographic=function(){return Ya(xh)}).raw=xh;var yh=le(function(c){return 1/(1+c)},function(c){return 2*Math.atan(c)});(K.geo.stereographic=function(){return Ya(yh)}).raw=yh;of.invert=function(c,e){return[-e,2*Math.atan(Math.exp(c))-Sc]};(K.geo.transverseMercator=
function(){var c=kg(of),e=c.center,h=c.rotate;c.center=function(l){return l?e([-l[1],l[0]]):(l=e(),[-l[1],l[0]])};c.rotate=function(l){return l?h([l[0],l[1],l.length>2?l[2]+90:90]):(l=h(),[l[0],l[1],l[2]-90])};return c.rotate([0,0])}).raw=of;K.geom={};K.geom.hull=function(c){function e(n){if(n.length<3)return[];var m=rb(h),r=rb(l),q,v=n.length,x=[],z=[];for(q=0;q<v;q++)x.push([+m.call(this,n[q],q),+r.call(this,n[q],q),q]);x.sort(Kh);for(q=0;q<v;q++)z.push([x[q][0],-x[q][1]]);m=lg(x);z=lg(z);r=z[0]===
m[0];v=z[z.length-1]===m[m.length-1];var F=[];for(q=m.length-1;q>=0;--q)F.push(n[x[m[q]][2]]);for(q=+r;q<z.length-v;++q)F.push(n[x[z[q]][2]]);return F}var h=Zd,l=me;if(arguments.length)return e(c);e.x=function(n){return arguments.length?(h=n,e):h};e.y=function(n){return arguments.length?(l=n,e):l};return e};K.geom.polygon=function(c){ze(c,cf);return c};var cf=K.geom.polygon.prototype=[];cf.area=function(){for(var c=-1,e=this.length,h,l=this[e-1],n=0;++c<e;){h=l;l=this[c];n+=h[1]*l[0]-h[0]*l[1]}return n*
0.5};cf.centroid=function(c){var e=-1,h=this.length,l=0,n=0,m,r=this[h-1],q;for(arguments.length||(c=-1/(6*this.area()));++e<h;){m=r;r=this[e];q=m[0]*r[1]-r[0]*m[1];l+=(m[0]+r[0])*q;n+=(m[1]+r[1])*q}return[l*c,n*c]};cf.clip=function(c){for(var e,h=ng(c),l=-1,n=this.length-ng(this),m,r,q=this[n-1],v,x,z;++l<n;){e=c.slice();c.length=0;v=this[l];x=e[(r=e.length-h)-1];for(m=-1;++m<r;){z=e[m];if(pf(z,q,v)){pf(x,q,v)||c.push(mg(x,z,q,v));c.push(z)}else pf(x,q,v)&&c.push(mg(x,z,q,v));x=z}h&&c.push(c[0]);
q=v}return c};var ce,Pd,ae,pg=[],sf,oe,tg=[];rg.prototype.prepare=function(){for(var c=this.edges,e=c.length,h;e--;){h=c[e].edge;if(!h.b||!h.a)c.splice(e,1)}c.sort(sg);return c.length};Oe.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};tf.prototype={insert:function(c,e){var h,l;if(c){e.P=c;if(e.N=c.N)c.N.P=e;c.N=e;if(c.R){for(c=c.R;c.L;)c=c.L;c.L=e}else c.R=e;h=c}else if(this._){c=vg(this._);
e.P=null;e.N=c;c.P=c.L=e;h=c}else{e.P=e.N=null;this._=e;h=null}e.L=e.R=null;e.U=h;e.C=true;for(c=e;h&&h.C;){e=h.U;if(h===e.L)if((l=e.R)&&l.C){h.C=l.C=false;e.C=true;c=e}else{if(c===h.R){pe(this,h);c=h;h=c.U}h.C=false;e.C=true;qe(this,e)}else if((l=e.L)&&l.C){h.C=l.C=false;e.C=true;c=e}else{if(c===h.L){qe(this,h);c=h;h=c.U}h.C=false;e.C=true;pe(this,e)}h=c.U}this._.C=false},remove:function(c){if(c.N)c.N.P=c.P;if(c.P)c.P.N=c.N;c.N=c.P=null;var e=c.U,h=c.L,l=c.R,n,m;n=h?l?vg(l):h:l;if(e)if(e.L===c)e.L=
n;else e.R=n;else this._=n;if(h&&l){m=n.C;n.C=c.C;n.L=h;h.U=n;if(n!==l){e=n.U;n.U=c.U;c=n.R;e.L=c;n.R=l;l.U=n}else{n.U=e;e=n;c=n.R}}else{m=c.C;c=n}if(c)c.U=e;if(!m)if(c&&c.C)c.C=false;else{do{if(c===this._)break;if(c===e.L){c=e.R;if(c.C){c.C=false;e.C=true;pe(this,e);c=e.R}if(c.L&&c.L.C||c.R&&c.R.C){if(!c.R||!c.R.C){c.L.C=false;c.C=true;qe(this,c);c=e.R}c.C=e.C;e.C=c.R.C=false;pe(this,e);c=this._;break}}else{c=e.L;if(c.C){c.C=false;e.C=true;qe(this,e);c=e.L}if(c.L&&c.L.C||c.R&&c.R.C){if(!c.L||!c.L.C){c.R.C=
false;c.C=true;pe(this,c);c=e.L}c.C=e.C;e.C=c.L.C=false;qe(this,e);c=this._;break}}c.C=true;c=e;e=e.U}while(!c.C);if(c)c.C=false}}};K.geom.voronoi=function(c){function e(v){var x=new Array(v.length),z=q[0][0],F=q[0][1],E=q[1][0],S=q[1][1];uf(h(v),q).cells.forEach(function(U,T){var N=U.edges;U=U.site;(x[T]=N.length?N.map(function(Q){Q=Q.start();return[Q.x,Q.y]}):U.x>=z&&U.x<=E&&U.y>=F&&U.y<=S?[[z,S],[E,S],[E,F],[z,F]]:[]).point=v[T]});return x}function h(v){return v.map(function(x,z){return{x:Math.round(m(x,
z)/$a)*$a,y:Math.round(r(x,z)/$a)*$a,i:z}})}var l=Zd,n=me,m=l,r=n,q=df;if(c)return e(c);e.links=function(v){return uf(h(v)).edges.filter(function(x){return x.l&&x.r}).map(function(x){return{source:v[x.l.i],target:v[x.r.i]}})};e.triangles=function(v){var x=[];uf(h(v)).cells.forEach(function(z,F){var E=z.site;z=z.edges.sort(sg);var S=-1,U=z.length,T,N=z[U-1].edge;for(N=N.l===E?N.r:N.l;++S<U;){T=N;N=z[S].edge;N=N.l===E?N.r:N.l;F<T.i&&F<N.i&&Vh(E,T,N)<0&&x.push([v[F],v[T.i],v[N.i]])}});return x};e.x=
function(v){return arguments.length?(m=rb(l=v),e):l};e.y=function(v){return arguments.length?(r=rb(n=v),e):n};e.clipExtent=function(v){if(!arguments.length)return q===df?null:q;q=v==null?df:v;return e};e.size=function(v){if(!arguments.length)return q===df?null:q&&q[1];return e.clipExtent(v&&[[0,0],v])};return e};var df=[[-1000000,-1000000],[1E6,1E6]];K.geom.delaunay=function(c){return K.geom.voronoi().triangles(c)};K.geom.quadtree=function(c,e,h,l,n){function m(x){function z(Ba,Ua,gb,tb,nb,ea,ta,
Za){if(!(isNaN(gb)||isNaN(tb)))if(Ba.leaf){var kb=Ba.x,Qa=Ba.y;if(kb!=null){if(!(pb(kb-gb)+pb(Qa-tb)<0.01)){var jb=Ba.point;Ba.x=Ba.y=Ba.point=null;F(Ba,jb,kb,Qa,nb,ea,ta,Za)}F(Ba,Ua,gb,tb,nb,ea,ta,Za)}else{Ba.x=gb;Ba.y=tb;Ba.point=Ua}}else F(Ba,Ua,gb,tb,nb,ea,ta,Za)}function F(Ba,Ua,gb,tb,nb,ea,ta,Za){var kb=(nb+ta)*0.5,Qa=(ea+Za)*0.5,jb=gb>=kb,Eb=tb>=Qa,Qb=(Eb<<1)+jb;Ba.leaf=false;Ba=Ba.nodes[Qb]||(Ba.nodes[Qb]=wg());if(jb)nb=kb;else ta=kb;if(Eb)ea=Qa;else Za=Qa;z(Ba,Ua,gb,tb,nb,ea,ta,Za)}var E,
S=rb(r),U=rb(q),T,N,Q,ba,M,fa,ka,da;if(e!=null){M=e;fa=h;ka=l;da=n}else{ka=da=-(M=fa=Infinity);T=[];N=[];ba=x.length;if(v)for(Q=0;Q<ba;++Q){E=x[Q];if(E.x<M)M=E.x;if(E.y<fa)fa=E.y;if(E.x>ka)ka=E.x;if(E.y>da)da=E.y;T.push(E.x);N.push(E.y)}else for(Q=0;Q<ba;++Q){var pa=+S(E=x[Q],Q);E=+U(E,Q);if(pa<M)M=pa;if(E<fa)fa=E;if(pa>ka)ka=pa;if(E>da)da=E;T.push(pa);N.push(E)}}pa=ka-M;E=da-fa;if(pa>E)da=fa+pa;else ka=M+E;var la=wg();la.add=function(Ba){z(la,Ba,+S(Ba,++Q),+U(Ba,Q),M,fa,ka,da)};la.visit=function(Ba){re(Ba,
la,M,fa,ka,da)};Q=-1;if(e==null){for(;++Q<ba;)z(la,x[Q],T[Q],N[Q],M,fa,ka,da);--Q}else x.forEach(la.add);T=N=x=E=null;return la}var r=Zd,q=me,v;if(v=arguments.length){r=Wh;q=Xh;if(v===3){n=h;l=e;h=e=0}return m(c)}m.x=function(x){return arguments.length?(r=x,m):r};m.y=function(x){return arguments.length?(q=x,m):q};m.extent=function(x){if(!arguments.length)return e==null?null:[[e,h],[l,n]];if(x==null)e=h=l=n=null;else{e=+x[0][0];h=+x[0][1];l=+x[1][0];n=+x[1][1]}return m};m.size=function(x){if(!arguments.length)return e==
null?null:[l-e,n-h];if(x==null)e=h=l=n=null;else{e=h=0;l=+x[0];n=+x[1]}return m};return m};K.interpolateRgb=vf;K.interpolateObject=xg;K.interpolateNumber=vd;K.interpolateString=yg;var Pe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;K.interpolate=Qd;K.interpolators=[function(c,e){var h=typeof e;return(h==="string"?Ae.has(e)||/^(#|rgb\(|hsl\()/.test(e)?vf:yg:e instanceof Ac?vf:h==="object"?Array.isArray(e)?Qe:xg:vd)(c,e)}];K.interpolateArray=Qe;var zh=function(){return Nb},Ej=K.map({linear:zh,poly:bi,
quad:function(){return Zh},cubic:function(){return $h},sin:function(){return ci},exp:function(){return di},circle:function(){return ei},elastic:fi,back:gi,bounce:function(){return hi}}),Fj=K.map({"in":Nb,out:zg,"in-out":Ag,"out-in":function(c){return Ag(zg(c))}});K.ease=function(c){var e=c.indexOf("-"),h=e>=0?c.substring(0,e):c;e=e>=0?c.substring(e+1):"in";h=Ej.get(h)||zh;e=Fj.get(e)||Nb;return Yh(e(h.apply(null,oh.call(arguments,1))))};K.interpolateHcl=ii;K.interpolateHsl=ji;K.interpolateLab=ki;
K.interpolateRound=Bg;K.transform=function(c){var e=kd.createElementNS(K.ns.prefix.svg,"g");return(K.transform=function(h){if(h!=null){e.setAttribute("transform",h);var l=e.transform.baseVal.consolidate()}return new Cg(l?l.matrix:Gj)})(c)};Cg.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Gj={a:1,b:0,c:0,d:1,e:0,f:0};K.interpolateTransform=Fg;K.layout={};K.layout.bundle=function(){return function(c){for(var e=
[],h=-1,l=c.length;++h<l;)e.push(oi(c[h]));return e}};K.layout.chord=function(){function c(){var F={},E=[],S=K.range(r),U=[],T,N,Q,ba,M;l=[];n=[];T=0;for(ba=-1;++ba<r;){N=0;for(M=-1;++M<r;)N+=m[ba][M];E.push(N);U.push(K.range(r));T+=N}v&&S.sort(function(Ba,Ua){return v(E[Ba],E[Ua])});x&&U.forEach(function(Ba,Ua){Ba.sort(function(gb,tb){return x(m[Ua][gb],m[Ua][tb])})});T=(Zc-q*r)/T;N=0;for(ba=-1;++ba<r;){Q=N;for(M=-1;++M<r;){var fa=S[ba],ka=U[fa][M],da=m[fa][ka],pa=N,la=N+=da*T;F[fa+"-"+ka]={index:fa,
subindex:ka,startAngle:pa,endAngle:la,value:da}}n[fa]={index:fa,startAngle:Q,endAngle:N,value:(N-Q)/T};N+=q}for(ba=-1;++ba<r;)for(M=ba-1;++M<r;){S=F[ba+"-"+M];U=F[M+"-"+ba];if(S.value||U.value)l.push(S.value<U.value?{source:U,target:S}:{source:S,target:U})}z&&e()}function e(){l.sort(function(F,E){return z((F.source.value+F.target.value)/2,(E.source.value+E.target.value)/2)})}var h={},l,n,m,r,q=0,v,x,z;h.matrix=function(F){if(!arguments.length)return m;r=(m=F)&&m.length;l=n=null;return h};h.padding=
function(F){if(!arguments.length)return q;q=F;l=n=null;return h};h.sortGroups=function(F){if(!arguments.length)return v;v=F;l=n=null;return h};h.sortSubgroups=function(F){if(!arguments.length)return x;x=F;l=null;return h};h.sortChords=function(F){if(!arguments.length)return z;z=F;l&&e();return h};h.chords=function(){l||c();return l};h.groups=function(){n||c();return n};return h};K.layout.force=function(){function c(M){return function(fa,ka,da,pa){if(fa.point!==M){da=fa.cx-M.x;var la=fa.cy-M.y;ka=
pa-ka;pa=da*da+la*la;if(ka*ka/S<pa){if(pa<F){ka=fa.charge/pa;M.px-=da*ka;M.py-=la*ka}return true}if(fa.point&&pa&&pa<F){ka=fa.pointCharge/pa;M.px-=da*ka;M.py-=la*ka}}return!fa.charge}}function e(M){M.px=K.event.x;M.py=K.event.y;h.resume()}var h={},l=K.dispatch("start","tick","end"),n=[1,1],m,r,q=0.9,v=Hj,x=Ij,z=-30,F=Jj,E=0.1,S=0.64,U=[],T=[],N,Q,ba;h.tick=function(){if((r*=0.99)<0.005){l.end({type:"end",alpha:r=0});return true}var M=U.length,fa=T.length,ka,da,pa,la,Ba,Ua,gb;for(ka=0;ka<fa;++ka){da=
T[ka];pa=da.source;la=da.target;Ua=la.x-pa.x;gb=la.y-pa.y;if(Ba=Ua*Ua+gb*gb){Ba=r*Q[ka]*((Ba=Math.sqrt(Ba))-N[ka])/Ba;Ua*=Ba;gb*=Ba;la.x-=Ua*(Ba=pa.weight/(la.weight+pa.weight));la.y-=gb*Ba;pa.x+=Ua*(Ba=1-Ba);pa.y+=gb*Ba}}if(Ba=r*E){Ua=n[0]/2;gb=n[1]/2;ka=-1;if(Ba)for(;++ka<M;){da=U[ka];da.x+=(Ua-da.x)*Ba;da.y+=(gb-da.y)*Ba}}if(z){Hg(fa=K.geom.quadtree(U),r,ba);for(ka=-1;++ka<M;)(da=U[ka]).fixed||fa.visit(c(da))}for(ka=-1;++ka<M;){da=U[ka];if(da.fixed){da.x=da.px;da.y=da.py}else{da.x-=(da.px-(da.px=
da.x))*q;da.y-=(da.py-(da.py=da.y))*q}}l.tick({type:"tick",alpha:r})};h.nodes=function(M){if(!arguments.length)return U;U=M;return h};h.links=function(M){if(!arguments.length)return T;T=M;return h};h.size=function(M){if(!arguments.length)return n;n=M;return h};h.linkDistance=function(M){if(!arguments.length)return v;v=typeof M==="function"?M:+M;return h};h.distance=h.linkDistance;h.linkStrength=function(M){if(!arguments.length)return x;x=typeof M==="function"?M:+M;return h};h.friction=function(M){if(!arguments.length)return q;
q=+M;return h};h.charge=function(M){if(!arguments.length)return z;z=typeof M==="function"?M:+M;return h};h.chargeDistance=function(M){if(!arguments.length)return Math.sqrt(F);F=M*M;return h};h.gravity=function(M){if(!arguments.length)return E;E=+M;return h};h.theta=function(M){if(!arguments.length)return Math.sqrt(S);S=M*M;return h};h.alpha=function(M){if(!arguments.length)return r;M=+M;if(r)r=M>0?M:0;else if(M>0){l.start({type:"start",alpha:r=M});K.timer(h.tick)}return h};h.start=function(){function M(gb,
tb){if(!Ba){Ba=new Array(ka);for(ea=0;ea<ka;++ea)Ba[ea]=[];for(ea=0;ea<ta;++ea){var nb=T[ea];Ba[nb.source.index].push(nb.target);Ba[nb.target.index].push(nb.source)}}nb=Ba[fa];for(var ea=-1,ta=nb.length,Za;++ea<ta;)if(!isNaN(Za=nb[ea][gb]))return Za;return Math.random()*tb}var fa,ka=U.length,da=T.length,pa=n[0],la=n[1],Ba,Ua;for(fa=0;fa<ka;++fa){(Ua=U[fa]).index=fa;Ua.weight=0}for(fa=0;fa<da;++fa){Ua=T[fa];if(typeof Ua.source=="number")Ua.source=U[Ua.source];if(typeof Ua.target=="number")Ua.target=
U[Ua.target];++Ua.source.weight;++Ua.target.weight}for(fa=0;fa<ka;++fa){Ua=U[fa];if(isNaN(Ua.x))Ua.x=M("x",pa);if(isNaN(Ua.y))Ua.y=M("y",la);if(isNaN(Ua.px))Ua.px=Ua.x;if(isNaN(Ua.py))Ua.py=Ua.y}N=[];if(typeof v==="function")for(fa=0;fa<da;++fa)N[fa]=+v.call(this,T[fa],fa);else for(fa=0;fa<da;++fa)N[fa]=v;Q=[];if(typeof x==="function")for(fa=0;fa<da;++fa)Q[fa]=+x.call(this,T[fa],fa);else for(fa=0;fa<da;++fa)Q[fa]=x;ba=[];if(typeof z==="function")for(fa=0;fa<ka;++fa)ba[fa]=+z.call(this,U[fa],fa);else for(fa=
0;fa<ka;++fa)ba[fa]=z;return h.resume()};h.resume=function(){return h.alpha(0.1)};h.stop=function(){return h.alpha(0)};h.drag=function(){m||(m=K.behavior.drag().origin(Nb).on("dragstart.force",qi).on("drag.force",e).on("dragend.force",ri));if(!arguments.length)return m;this.on("mouseover.force",si).on("mouseout.force",ti).call(m)};return K.rebind(h,l,"on")};var Hj=20,Ij=1,Jj=Infinity;K.layout.hierarchy=function(){function c(r,q,v){var x=n.call(h,r,q);r.depth=q;v.push(r);if(x&&(F=x.length)){var z=
-1,F,E=r.children=new Array(F),S=0;q=q+1;for(var U;++z<F;){U=E[z]=c(x[z],q,v);U.parent=r;S+=U.value}l&&E.sort(l);if(m)r.value=S}else{delete r.children;if(m)r.value=+m.call(h,r,q)||0}return r}function e(r,q){var v=r.children,x=0;if(v&&(F=v.length)){var z=-1,F;for(q=q+1;++z<F;)x+=e(v[z],q)}else if(m)x=+m.call(h,r,q)||0;if(m)r.value=x;return x}function h(r){var q=[];c(r,0,q);return q}var l=xi,n=vi,m=wi;h.sort=function(r){if(!arguments.length)return l;l=r;return h};h.children=function(r){if(!arguments.length)return n;
n=r;return h};h.value=function(r){if(!arguments.length)return m;m=r;return h};h.revalue=function(r){e(r,0);return r};return h};K.layout.partition=function(){function c(m,r,q,v){var x=m.children;m.x=r;m.y=m.depth*v;m.dx=q;m.dy=v;if(x&&(F=x.length)){var z=-1,F,E;for(q=m.value?q/m.value:0;++z<F;){c(E=x[z],r,m=E.value*q,v);r+=m}}}function e(m){m=m.children;var r=0;if(m&&(v=m.length))for(var q=-1,v;++q<v;)r=Math.max(r,e(m[q]));return 1+r}function h(m,r){m=l.call(this,m,r);c(m[0],0,n[0],n[1]/e(m[0]));return m}
var l=K.layout.hierarchy(),n=[1,1];h.size=function(m){if(!arguments.length)return n;n=m;return h};return se(h,l)};K.layout.pie=function(){function c(m){var r=m.map(function(F,E){return+e.call(c,F,E)}),q=+(typeof l==="function"?l.apply(this,arguments):l),v=((typeof n==="function"?n.apply(this,arguments):n)-q)/K.sum(r),x=K.range(m.length);if(h!=null)x.sort(h===Ah?function(F,E){return r[E]-r[F]}:function(F,E){return h(m[F],m[E])});var z=[];x.forEach(function(F){var E;z[F]={data:m[F],value:E=r[F],startAngle:q,
endAngle:q+=E*v}});return z}var e=Number,h=Ah,l=0,n=Zc;c.value=function(m){if(!arguments.length)return e;e=m;return c};c.sort=function(m){if(!arguments.length)return h;h=m;return c};c.startAngle=function(m){if(!arguments.length)return l;l=m;return c};c.endAngle=function(m){if(!arguments.length)return n;n=m;return c};return c};var Ah={};K.layout.stack=function(){function c(q,v){var x=q.map(function(N,Q){return e.call(c,N,Q)}),z=x.map(function(N){return N.map(function(Q,ba){return[m.call(c,Q,ba),r.call(c,
Q,ba)]})}),F=h.call(c,z,v);x=K.permute(x,F);z=K.permute(z,F);v=l.call(c,z,v);F=x.length;var E=x[0].length,S,U,T;for(U=0;U<E;++U){n.call(c,x[0][U],T=v[U],z[0][U][1]);for(S=1;S<F;++S)n.call(c,x[S][U],T+=z[S-1][U][1],z[S][U][1])}return q}var e=Nb,h=wf,l=xf,n=Ai,m=yi,r=zi;c.values=function(q){if(!arguments.length)return e;e=q;return c};c.order=function(q){if(!arguments.length)return h;h=typeof q==="function"?q:Kj.get(q)||wf;return c};c.offset=function(q){if(!arguments.length)return l;l=typeof q==="function"?
q:Lj.get(q)||xf;return c};c.x=function(q){if(!arguments.length)return m;m=q;return c};c.y=function(q){if(!arguments.length)return r;r=q;return c};c.out=function(q){if(!arguments.length)return n;n=q;return c};return c};var Kj=K.map({"inside-out":function(c){var e=c.length,h,l=c.map(Bi),n=c.map(Ci),m=K.range(e).sort(function(z,F){return l[z]-l[F]}),r=0,q=0,v=[],x=[];for(c=0;c<e;++c){h=m[c];if(r<q){r+=n[h];v.push(h)}else{q+=n[h];x.push(h)}}return x.reverse().concat(v)},reverse:function(c){return K.range(c.length).reverse()},
"default":wf}),Lj=K.map({silhouette:function(c){var e=c.length,h=c[0].length,l=[],n=0,m,r,q,v=[];for(r=0;r<h;++r){for(q=m=0;m<e;m++)q+=c[m][r][1];if(q>n)n=q;l.push(q)}for(r=0;r<h;++r)v[r]=(n-l[r])/2;return v},wiggle:function(c){var e=c.length,h=c[0],l=h.length,n,m,r,q,v,x,z,F,E,S=[];S[0]=F=E=0;for(m=1;m<l;++m){for(q=n=0;n<e;++n)q+=c[n][m][1];v=n=0;for(z=h[m][0]-h[m-1][0];n<e;++n){r=0;for(x=(c[n][m][1]-c[n][m-1][1])/(2*z);r<n;++r)x+=(c[r][m][1]-c[r][m-1][1])/z;v+=x*c[n][m][1]}S[m]=F-=q?v/q*z:0;if(F<
E)E=F}for(m=0;m<l;++m)S[m]-=E;return S},expand:function(c){var e=c.length,h=c[0].length,l=1/e,n,m,r,q=[];for(m=0;m<h;++m){for(r=n=0;n<e;n++)r+=c[n][m][1];if(r)for(n=0;n<e;n++)c[n][m][1]/=r;else for(n=0;n<e;n++)c[n][m][1]=l}for(m=0;m<h;++m)q[m]=0;return q},zero:xf});K.layout.histogram=function(){function c(m,r){var q=[],v=m.map(h,this),x=l.call(this,v,r),z=n.call(this,x,v,r),F;r=-1;for(var E=v.length,S=z.length-1,U=e?1:1/E;++r<S;){F=q[r]=[];F.dx=z[r+1]-(F.x=z[r]);F.y=0}if(S>0)for(r=-1;++r<E;){F=v[r];
if(F>=x[0]&&F<=x[1]){F=q[K.bisect(z,F,1,S)-1];F.y+=U;F.push(m[r])}}return q}var e=true,h=Number,l=Fi,n=Ei;c.value=function(m){if(!arguments.length)return h;h=m;return c};c.range=function(m){if(!arguments.length)return l;l=rb(m);return c};c.bins=function(m){if(!arguments.length)return n;n=typeof m==="number"?function(r){return Ig(r,m)}:rb(m);return c};c.frequency=function(m){if(!arguments.length)return e;e=!!m;return c};return c};K.layout.tree=function(){function c(m,r){function q(N,Q){var ba=N.children,
M=N._tree;if(ba&&(fa=ba.length)){for(var fa,ka=ba[0],da,pa=ka,la,Ba=-1;++Ba<fa;){la=ba[Ba];q(la,da);pa=x(la,da,pa);da=la}Ji(N);ba=0.5*(ka._tree.prelim+la._tree.prelim);if(Q){M.prelim=Q._tree.prelim+h(N,Q);M.mod=M.prelim-ba}else M.prelim=ba}else if(Q)M.prelim=Q._tree.prelim+h(N,Q)}function v(N,Q){N.x=N._tree.prelim+Q;var ba=N.children;if(ba&&(fa=ba.length)){var M=-1,fa;for(Q+=N._tree.mod;++M<fa;)v(ba[M],Q)}}function x(N,Q,ba){if(Q){var M=N,fa=N;Q=Q;for(var ka=N.parent.children[0],da=M._tree.mod,pa=
fa._tree.mod,la=Q._tree.mod,Ba=ka._tree.mod,Ua;Q=zf(Q),M=yf(M),Q&&M;){ka=yf(ka);fa=zf(fa);fa._tree.ancestor=N;Ua=Q._tree.prelim+la-M._tree.prelim-da+h(Q,M);if(Ua>0){Ki(Li(Q,N,ba),N,Ua);da+=Ua;pa+=Ua}la+=Q._tree.mod;da+=M._tree.mod;Ba+=ka._tree.mod;pa+=fa._tree.mod}if(Q&&!zf(fa)){fa._tree.thread=Q;fa._tree.mod+=la-pa}if(M&&!yf(ka)){ka._tree.thread=M;ka._tree.mod+=da-Ba;ba=N}}return ba}m=e.call(this,m,r);r=m[0];wd(r,function(N,Q){N._tree={ancestor:N,prelim:0,mod:0,change:0,shift:0,number:Q?Q._tree.number+
1:0}});q(r);v(r,-r._tree.prelim);var z=Re(r,Hi),F=Re(r,Gi),E=Re(r,Ii),S=z.x-h(z,F)/2,U=F.x+h(F,z)/2,T=E.depth||1;wd(r,n?function(N){N.x*=l[0];N.y=N.depth*l[1];delete N._tree}:function(N){N.x=(N.x-S)/(U-S)*l[0];N.y=N.depth/T*l[1];delete N._tree});return m}var e=K.layout.hierarchy().sort(null).value(null),h=Jg,l=[1,1],n=false;c.separation=function(m){if(!arguments.length)return h;h=m;return c};c.size=function(m){if(!arguments.length)return n?null:l;n=(l=m)==null;return c};c.nodeSize=function(m){if(!arguments.length)return n?
l:null;n=(l=m)!=null;return c};return se(c,e)};K.layout.pack=function(){function c(m,r){m=e.call(this,m,r);r=m[0];var q=l[0],v=l[1],x=n==null?Math.sqrt:typeof n==="function"?n:function(){return n};r.x=r.y=0;wd(r,function(F){F.r=+x(F.value)});wd(r,Mg);if(h){var z=h*(n?1:Math.max(2*r.r/q,2*r.r/v))/2;wd(r,function(F){F.r+=z});wd(r,Mg);wd(r,function(F){F.r-=z})}Pg(r,q/2,v/2,n?1:1/Math.max(2*r.r/q,2*r.r/v));return m}var e=K.layout.hierarchy().sort(Mi),h=0,l=[1,1],n;c.size=function(m){if(!arguments.length)return l;
l=m;return c};c.radius=function(m){if(!arguments.length)return n;n=m==null||typeof m==="function"?m:+m;return c};c.padding=function(m){if(!arguments.length)return h;h=+m;return c};return se(c,e)};K.layout.cluster=function(){function c(m,r){m=e.call(this,m,r);var q=m[0],v,x=0;wd(q,function(S){var U=S.children;if(U&&U.length){S.x=Qi(U);S.y=Pi(U)}else{S.x=v?(x+=h(S,v)):0;S.y=0;v=S}});r=Qg(q);var z=Rg(q),F=r.x-h(r,z)/2,E=z.x+h(z,r)/2;wd(q,n?function(S){S.x=(S.x-q.x)*l[0];S.y=(q.y-S.y)*l[1]}:function(S){S.x=
(S.x-F)/(E-F)*l[0];S.y=(1-(q.y?S.y/q.y:1))*l[1]});return m}var e=K.layout.hierarchy().sort(null).value(null),h=Jg,l=[1,1],n=false;c.separation=function(m){if(!arguments.length)return h;h=m;return c};c.size=function(m){if(!arguments.length)return n?null:l;n=(l=m)==null;return c};c.nodeSize=function(m){if(!arguments.length)return n?l:null;n=(l=m)!=null;return c};return se(c,e)};K.layout.treemap=function(){function c(T,N){for(var Q=-1,ba=T.length,M,fa;++Q<ba;){fa=(M=T[Q]).value*(N<0?0:N);M.area=isNaN(fa)||
fa<=0?0:fa}}function e(T){var N=T.children;if(N&&N.length){var Q=z(T),ba=[],M=N.slice(),fa=Infinity,ka,da=S==="slice"?Q.dx:S==="dice"?Q.dy:S==="slice-dice"?T.depth&1?Q.dy:Q.dx:Math.min(Q.dx,Q.dy);c(M,Q.dx*Q.dy/T.value);for(ba.area=0;(T=M.length)>0;){ba.push(T=M[T-1]);ba.area+=T.area;if(S!=="squarify"||(ka=l(ba,da))<=fa){M.pop();fa=ka}else{ba.area-=ba.pop().area;n(ba,da,Q,false);da=Math.min(Q.dx,Q.dy);ba.length=ba.area=0;fa=Infinity}}if(ba.length){n(ba,da,Q,true);ba.length=ba.area=0}N.forEach(e)}}
function h(T){var N=T.children;if(N&&N.length){var Q=z(T),ba=N.slice(),M=[];c(ba,Q.dx*Q.dy/T.value);for(M.area=0;T=ba.pop();){M.push(T);M.area+=T.area;if(T.z!=null){n(M,T.z?Q.dx:Q.dy,Q,!ba.length);M.length=M.area=0}}N.forEach(h)}}function l(T,N){for(var Q=T.area,ba,M=0,fa=Infinity,ka=-1,da=T.length;++ka<da;)if(ba=T[ka].area){if(ba<fa)fa=ba;if(ba>M)M=ba}Q*=Q;N*=N;return Q?Math.max(N*M*U/Q,Q/(N*fa*U)):Infinity}function n(T,N,Q,ba){var M=-1,fa=T.length,ka=Q.x,da=Q.y,pa=N?q(T.area/N):0,la;if(N==Q.dx){if(ba||
pa>Q.dy)pa=Q.dy;for(;++M<fa;){la=T[M];la.x=ka;la.y=da;la.dy=pa;ka+=la.dx=Math.min(Q.x+Q.dx-ka,pa?q(la.area/pa):0)}la.z=true;la.dx+=Q.x+Q.dx-ka;Q.y+=pa;Q.dy-=pa}else{if(ba||pa>Q.dx)pa=Q.dx;for(;++M<fa;){la=T[M];la.x=ka;la.y=da;la.dx=pa;da+=la.dy=Math.min(Q.y+Q.dy-da,pa?q(la.area/pa):0)}la.z=false;la.dy+=Q.y+Q.dy-da;Q.x+=pa;Q.dx-=pa}}function m(T){T=E||r(T);var N=T[0];N.x=0;N.y=0;N.dx=v[0];N.dy=v[1];E&&r.revalue(N);c([N],N.dx*N.dy/N.value);(E?h:e)(N);if(F)E=T;return T}var r=K.layout.hierarchy(),q=Math.round,
v=[1,1],x=null,z=Bf,F=false,E,S="squarify",U=0.5*(1+Math.sqrt(5));m.size=function(T){if(!arguments.length)return v;v=T;return m};m.padding=function(T){function N(M){var fa=T.call(m,M,M.depth);return fa==null?Bf(M):Sg(M,typeof fa==="number"?[fa,fa,fa,fa]:fa)}function Q(M){return Sg(M,T)}if(!arguments.length)return x;var ba;z=(x=T)==null?Bf:(ba=typeof T)==="function"?N:ba==="number"?(T=[T,T,T,T],Q):Q;return m};m.round=function(T){if(!arguments.length)return q!=Number;q=T?Math.round:Number;return m};
m.sticky=function(T){if(!arguments.length)return F;F=T;E=null;return m};m.ratio=function(T){if(!arguments.length)return U;U=T;return m};m.mode=function(T){if(!arguments.length)return S;S=T+"";return m};return se(m,r)};K.random={normal:function(c,e){var h=arguments.length;if(h<2)e=1;if(h<1)c=0;return function(){var l,n;do{l=Math.random()*2-1;n=Math.random()*2-1;n=l*l+n*n}while(!n||n>1);return c+e*l*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var c=K.random.normal.apply(K,arguments);return function(){return Math.exp(c())}},
bates:function(c){var e=K.random.irwinHall(c);return function(){return e()/c}},irwinHall:function(c){return function(){for(var e=0,h=0;h<c;h++)e+=Math.random();return e}}};K.scale={};var Ti={floor:Nb,ceil:Nb};K.scale.linear=function(){return Tg([0,1],[0,1],Qd,false)};var Wi={s:1,g:1,p:1,r:1,e:1};K.scale.log=function(){return Vg(K.scale.linear().domain([0,1]),10,true,[1,10])};var Wg=K.format(".0e"),Xi={floor:function(c){return-Math.ceil(-c)},ceil:function(c){return-Math.floor(-c)}};K.scale.pow=function(){return Xg(K.scale.linear(),
1,[0,1])};K.scale.sqrt=function(){return K.scale.pow().exponent(0.5)};K.scale.ordinal=function(){return Yg([],{t:"range",a:[[]]})};K.scale.category10=function(){return K.scale.ordinal().range(Mj)};K.scale.category20=function(){return K.scale.ordinal().range(Nj)};K.scale.category20b=function(){return K.scale.ordinal().range(Oj)};K.scale.category20c=function(){return K.scale.ordinal().range(Pj)};var Mj=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(jc),Nj=
[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(jc),Oj=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(jc),Pj=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,
14342891,6513507,9868950,12434877,14277081].map(jc);K.scale.quantile=function(){return Zg([],[])};K.scale.quantize=function(){return $g(0,1,[0,1])};K.scale.threshold=function(){return ah([0.5],[0,1])};K.scale.identity=function(){return bh([0,1])};K.svg={};K.svg.arc=function(){function c(){var m=e.apply(this,arguments),r=h.apply(this,arguments),q=l.apply(this,arguments)+Rd,v=n.apply(this,arguments)+Rd,x=(v<q&&(x=q,q=v,v=x),v-q),z=x<qb?"0":"1",F=Math.cos(q);q=Math.sin(q);var E=Math.cos(v);v=Math.sin(v);
return x>=Qj?m?"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"M0,"+m+"A"+m+","+m+" 0 1,0 0,"+-m+"A"+m+","+m+" 0 1,0 0,"+m+"Z":"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z":m?"M"+r*F+","+r*q+"A"+r+","+r+" 0 "+z+",1 "+r*E+","+r*v+"L"+m*E+","+m*v+"A"+m+","+m+" 0 "+z+",0 "+m*F+","+m*q+"Z":"M"+r*F+","+r*q+"A"+r+","+r+" 0 "+z+",1 "+r*E+","+r*v+"L0,0Z"}var e=Yi,h=Zi,l=ch,n=dh;c.innerRadius=function(m){if(!arguments.length)return e;e=rb(m);return c};c.outerRadius=function(m){if(!arguments.length)return h;
h=rb(m);return c};c.startAngle=function(m){if(!arguments.length)return l;l=rb(m);return c};c.endAngle=function(m){if(!arguments.length)return n;n=rb(m);return c};c.centroid=function(){var m=(e.apply(this,arguments)+h.apply(this,arguments))/2,r=(l.apply(this,arguments)+n.apply(this,arguments))/2+Rd;return[Math.cos(r)*m,Math.sin(r)*m]};return c};var Rd=-Sc,Qj=Zc-$a;K.svg.line=function(){return eh(Nb)};var Hf=K.map({linear:$c,"linear-closed":$i,step:aj,"step-before":If,"step-after":Jf,basis:fh,"basis-open":ej,
"basis-closed":fj,bundle:gj,cardinal:dj,"cardinal-open":bj,"cardinal-closed":cj,monotone:jj});Hf.forEach(function(c,e){e.key=c;e.closed=/-closed$/.test(c)});var gh=[0,2/3,1/3,0],hh=[0,1/3,2/3,0],Hd=[0,1/6,2/3,1/6];K.svg.line.radial=function(){var c=eh(ih);c.radius=c.x;delete c.x;c.angle=c.y;delete c.y;return c};If.reverse=Jf;Jf.reverse=If;K.svg.area=function(){return jh(Nb)};K.svg.area.radial=function(){var c=jh(ih);c.radius=c.x;delete c.x;c.innerRadius=c.x0;delete c.x0;c.outerRadius=c.x1;delete c.x1;
c.angle=c.y;delete c.y;c.startAngle=c.y0;delete c.y0;c.endAngle=c.y1;delete c.y1;return c};K.svg.chord=function(){function c(z,F){var E=e(this,m,z,F);z=e(this,r,z,F);return"M"+E.p0+l(E.r,E.p1,E.a1-E.a0)+(h(E,z)?n(E.r,E.p1,E.r,E.p0):n(E.r,E.p1,z.r,z.p0)+l(z.r,z.p1,z.a1-z.a0)+n(z.r,z.p1,E.r,E.p0))+"Z"}function e(z,F,E,S){var U=F.call(z,E,S);F=q.call(z,U,S);E=v.call(z,U,S)+Rd;z=x.call(z,U,S)+Rd;return{r:F,a0:E,a1:z,p0:[F*Math.cos(E),F*Math.sin(E)],p1:[F*Math.cos(z),F*Math.sin(z)]}}function h(z,F){return z.a0==
F.a0&&z.a1==F.a1}function l(z,F,E){return"A"+z+","+z+" 0 "+ +(E>qb)+",1 "+F}function n(z,F,E,S){return"Q 0,0 "+S}var m=lf,r=mf,q=kj,v=ch,x=dh;c.radius=function(z){if(!arguments.length)return q;q=rb(z);return c};c.source=function(z){if(!arguments.length)return m;m=rb(z);return c};c.target=function(z){if(!arguments.length)return r;r=rb(z);return c};c.startAngle=function(z){if(!arguments.length)return v;v=rb(z);return c};c.endAngle=function(z){if(!arguments.length)return x;x=rb(z);return c};return c};
K.svg.diagonal=function(){function c(n,m){var r=e.call(this,n,m);n=h.call(this,n,m);m=(r.y+n.y)/2;r=[r,{x:r.x,y:m},{x:n.x,y:m},n];r=r.map(l);return"M"+r[0]+"C"+r[1]+" "+r[2]+" "+r[3]}var e=lf,h=mf,l=kh;c.source=function(n){if(!arguments.length)return e;e=rb(n);return c};c.target=function(n){if(!arguments.length)return h;h=rb(n);return c};c.projection=function(n){if(!arguments.length)return l;l=n;return c};return c};K.svg.diagonal.radial=function(){var c=K.svg.diagonal(),e=kh,h=c.projection;c.projection=
function(l){return arguments.length?h(lj(e=l)):e};return c};K.svg.symbol=function(){function c(l,n){return(Bh.get(e.call(this,l,n))||lh)(h.call(this,l,n))}var e=nj,h=mj;c.type=function(l){if(!arguments.length)return e;e=rb(l);return c};c.size=function(l){if(!arguments.length)return h;h=rb(l);return c};return c};var Bh=K.map({circle:lh,cross:function(c){c=Math.sqrt(c/5)/2;return"M"+-3*c+","+-c+"H"+-c+"V"+-3*c+"H"+c+"V"+-c+"H"+3*c+"V"+c+"H"+c+"V"+3*c+"H"+-c+"V"+c+"H"+-3*c+"Z"},diamond:function(c){c=
Math.sqrt(c/(2*Ch));var e=c*Ch;return"M0,"+-c+"L"+e+",0 0,"+c+" "+-e+",0Z"},square:function(c){c=Math.sqrt(c)/2;return"M"+-c+","+-c+"L"+c+","+-c+" "+c+","+c+" "+-c+","+c+"Z"},"triangle-down":function(c){c=Math.sqrt(c/ef);var e=c*ef/2;return"M0,"+e+"L"+c+","+-e+" "+-c+","+-e+"Z"},"triangle-up":function(c){c=Math.sqrt(c/ef);var e=c*ef/2;return"M0,"+-e+"L"+c+","+e+" "+-c+","+e+"Z"}});K.svg.symbolTypes=Bh.keys();var ef=Math.sqrt(3),Ch=Math.tan(30*mb),Cc=[],qh=0,Td,Xe;Cc.call=Jb.call;Cc.empty=Jb.empty;
Cc.node=Jb.node;Cc.size=Jb.size;K.transition=function(c){return arguments.length?Td?c.transition():c:ph.transition()};K.transition.prototype=Cc;Cc.select=function(c){var e=this.id,h=[],l,n,m;c=ca(c);for(var r=-1,q=this.length;++r<q;){h.push(l=[]);for(var v=this[r],x=-1,z=v.length;++x<z;)if((m=v[x])&&(n=c.call(m,m.__data__,x,r))){if("__data__"in m)n.__data__=m.__data__;Ve(n,x,e,m.__transition__[e]);l.push(n)}else l.push(null)}return ue(h,e)};Cc.selectAll=function(c){var e=this.id,h=[],l,n,m,r;c=xa(c);
for(var q=-1,v=this.length;++q<v;)for(var x=this[q],z=-1,F=x.length;++z<F;)if(l=x[z]){r=l.__transition__[e];n=c.call(l,l.__data__,z,q);h.push(l=[]);for(var E=-1,S=n.length;++E<S;){if(m=n[E])Ve(m,E,e,r);l.push(m)}}return ue(h,e)};Cc.filter=function(c){var e=[],h,l,n;if(typeof c!=="function")c=Fc(c);for(var m=0,r=this.length;m<r;m++){e.push(h=[]);l=this[m];for(var q=0,v=l.length;q<v;q++)if((n=l[q])&&c.call(n,n.__data__,q,m))h.push(n)}return ue(e,this.id)};Cc.tween=function(c,e){var h=this.id;if(arguments.length<
2)return this.node().__transition__[h].tween.get(c);return Db(this,e==null?function(l){l.__transition__[h].tween.remove(c)}:function(l){l.__transition__[h].tween.set(c,e)})};Cc.attr=function(c,e){function h(){this.removeAttribute(q)}function l(){this.removeAttributeNS(q.space,q.local)}function n(v){return v==null?h:(v+="",function(){var x=this.getAttribute(q),z;return x!==v&&(z=r(x,v),function(F){this.setAttribute(q,z(F))})})}function m(v){return v==null?l:(v+="",function(){var x=this.getAttributeNS(q.space,
q.local),z;return x!==v&&(z=r(x,v),function(F){this.setAttributeNS(q.space,q.local,z(F))})})}if(arguments.length<2){for(e in c)this.attr(e,c[e]);return this}var r=c=="transform"?Fg:Qd,q=K.ns.qualify(c);return Nf(this,"attr."+c,e,q.local?m:n)};Cc.attrTween=function(c,e){function h(m,r){var q=e.call(this,m,r,this.getAttribute(n));return q&&function(v){this.setAttribute(n,q(v))}}function l(m,r){var q=e.call(this,m,r,this.getAttributeNS(n.space,n.local));return q&&function(v){this.setAttributeNS(n.space,
n.local,q(v))}}var n=K.ns.qualify(c);return this.tween("attr."+c,n.local?l:h)};Cc.style=function(c,e,h){function l(){this.style.removeProperty(c)}function n(r){return r==null?l:(r+="",function(){var q=Lc.getComputedStyle(this,null).getPropertyValue(c),v;return q!==r&&(v=Qd(q,r),function(x){this.style.setProperty(c,v(x),h)})})}var m=arguments.length;if(m<3){if(typeof c!=="string"){if(m<2)e="";for(h in c)this.style(h,c[h],e);return this}h=""}return Nf(this,"style."+c,e,n)};Cc.styleTween=function(c,
e,h){function l(n,m){var r=e.call(this,n,m,Lc.getComputedStyle(this,null).getPropertyValue(c));return r&&function(q){this.style.setProperty(c,r(q),h)}}if(arguments.length<3)h="";return this.tween("style."+c,l)};Cc.text=function(c){return Nf(this,"text",c,oj)};Cc.remove=function(){return this.each("end.transition",function(){var c;if(this.__transition__.count<2&&(c=this.parentNode))c.removeChild(this)})};Cc.ease=function(c){var e=this.id;if(arguments.length<1)return this.node().__transition__[e].ease;
if(typeof c!=="function")c=K.ease.apply(K,arguments);return Db(this,function(h){h.__transition__[e].ease=c})};Cc.delay=function(c){var e=this.id;return Db(this,typeof c==="function"?function(h,l,n){h.__transition__[e].delay=+c.call(h,h.__data__,l,n)}:(c=+c,function(h){h.__transition__[e].delay=c}))};Cc.duration=function(c){var e=this.id;return Db(this,typeof c==="function"?function(h,l,n){h.__transition__[e].duration=Math.max(1,c.call(h,h.__data__,l,n))}:(c=Math.max(1,c),function(h){h.__transition__[e].duration=
c}))};Cc.each=function(c,e){var h=this.id;if(arguments.length<2){var l=Xe,n=Td;Td=h;Db(this,function(m,r,q){Xe=m.__transition__[h];c.call(m,m.__data__,r,q)});Xe=l;Td=n}else Db(this,function(m){m=m.__transition__[h];(m.event||(m.event=K.dispatch("start","end"))).on(c,e)});return this};Cc.transition=function(){for(var c=this.id,e=++qh,h=[],l,n,m,r,q=0,v=this.length;q<v;q++){h.push(l=[]);n=this[q];for(var x=0,z=n.length;x<z;x++){if(m=n[x]){r=Object.create(m.__transition__[c]);r.delay+=r.duration;Ve(m,
x,e,r)}l.push(m)}}return ue(h,e)};K.svg.axis=function(){function c(x){x.each(function(){var z=K.select(this),F=this.__chart__||e,E=this.__chart__=e.copy(),S=q==null?E.ticks?E.ticks.apply(E,r):E.domain():q,U=v==null?E.tickFormat?E.tickFormat.apply(E,r):Nb:v,T=z.selectAll(".tick").data(S,E);S=T.enter().insert("g",".domain").attr("class","tick").style("opacity",$a);var N=K.transition(T.exit()).style("opacity",$a).remove(),Q=K.transition(T).style("opacity",1),ba,M=Se(E);z=z.selectAll(".domain").data([0]);
z=(z.enter().append("path").attr("class","domain"),K.transition(z));S.append("line");S.append("text");var fa=S.select("line"),ka=Q.select("line");U=T.select("text").text(U);T=S.select("text");var da=Q.select("text");switch(h){case "bottom":ba=mh;fa.attr("y2",l);T.attr("y",Math.max(l,0)+m);ka.attr("x2",0).attr("y2",l);da.attr("x",0).attr("y",Math.max(l,0)+m);U.attr("dy",".71em").style("text-anchor","middle");z.attr("d","M"+M[0]+","+n+"V0H"+M[1]+"V"+n);break;case "top":ba=mh;fa.attr("y2",-l);T.attr("y",
-(Math.max(l,0)+m));ka.attr("x2",0).attr("y2",-l);da.attr("x",0).attr("y",-(Math.max(l,0)+m));U.attr("dy","0em").style("text-anchor","middle");z.attr("d","M"+M[0]+","+-n+"V0H"+M[1]+"V"+-n);break;case "left":ba=nh;fa.attr("x2",-l);T.attr("x",-(Math.max(l,0)+m));ka.attr("x2",-l).attr("y2",0);da.attr("x",-(Math.max(l,0)+m)).attr("y",0);U.attr("dy",".32em").style("text-anchor","end");z.attr("d","M"+-n+","+M[0]+"H0V"+M[1]+"H"+-n);break;case "right":ba=nh;fa.attr("x2",l);T.attr("x",Math.max(l,0)+m);ka.attr("x2",
l).attr("y2",0);da.attr("x",Math.max(l,0)+m).attr("y",0);U.attr("dy",".32em").style("text-anchor","start");z.attr("d","M"+n+","+M[0]+"H0V"+M[1]+"H"+n);break}if(E.rangeBand){var pa=E,la=pa.rangeBand()/2;F=E=function(Ba){return pa(Ba)+la}}else if(F.rangeBand)F=E;else N.call(ba,E);S.call(ba,F);Q.call(ba,E)})}var e=K.scale.linear(),h=Dh,l=6,n=6,m=3,r=[10],q=null,v;c.scale=function(x){if(!arguments.length)return e;e=x;return c};c.orient=function(x){if(!arguments.length)return h;h=x in Rj?x+"":Dh;return c};
c.ticks=function(){if(!arguments.length)return r;r=arguments;return c};c.tickValues=function(x){if(!arguments.length)return q;q=x;return c};c.tickFormat=function(x){if(!arguments.length)return v;v=x;return c};c.tickSize=function(x){var z=arguments.length;if(!z)return l;l=+x;n=+arguments[z-1];return c};c.innerTickSize=function(x){if(!arguments.length)return l;l=+x;return c};c.outerTickSize=function(x){if(!arguments.length)return n;n=+x;return c};c.tickPadding=function(x){if(!arguments.length)return m;
m=+x;return c};c.tickSubdivide=function(){return arguments.length&&c};return c};var Dh="bottom",Rj={top:1,right:1,bottom:1,left:1};K.svg.brush=function(){function c(T){T.each(function(){var N=K.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",n).on("touchstart.brush",n),Q=N.selectAll(".background").data([0]);Q.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");N.selectAll(".extent").data([0]).enter().append("rect").attr("class",
"extent").style("cursor","move");var ba=N.selectAll(".resize").data(U,Nb);ba.exit().remove();ba.enter().append("g").attr("class",function(M){return"resize "+M}).style("cursor",function(M){return Sj[M]}).append("rect").attr("x",function(M){return/[ew]$/.test(M)?-3:null}).attr("y",function(M){return/^[ns]/.test(M)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");ba.style("display",c.empty()?"none":null);N=K.transition(N);Q=K.transition(Q);if(r){ba=Se(r);Q.attr("x",ba[0]).attr("width",
ba[1]-ba[0]);h(N)}if(q){ba=Se(q);Q.attr("y",ba[0]).attr("height",ba[1]-ba[0]);l(N)}e(N)})}function e(T){T.selectAll(".resize").attr("transform",function(N){return"translate("+v[+/e$/.test(N)]+","+x[+/^s/.test(N)]+")"})}function h(T){T.select(".extent").attr("x",v[0]);T.selectAll(".extent,.n>rect,.s>rect").attr("width",v[1]-v[0])}function l(T){T.select(".extent").attr("y",x[0]);T.selectAll(".extent,.e>rect,.w>rect").attr("height",x[1]-x[0])}function n(){function T(){if(K.event.keyCode==32){if(!gb){nb=
null;ea[0]-=v[1];ea[1]-=x[1];gb=2}Ja()}}function N(){if(K.event.keyCode==32&&gb==2){ea[0]+=v[1];ea[1]+=x[1];gb=0;Ja()}}function Q(){var Qa=K.mouse(fa),jb=false;if(ta){Qa[0]+=ta[0];Qa[1]+=ta[1]}if(!gb)if(K.event.altKey){nb||(nb=[(v[0]+v[1])/2,(x[0]+x[1])/2]);ea[0]=v[+(Qa[0]<nb[0])];ea[1]=x[+(Qa[1]<nb[1])]}else nb=null;if(Ba&&ba(Qa,r,0)){h(pa);jb=true}if(Ua&&ba(Qa,q,1)){l(pa);jb=true}if(jb){e(pa);da({type:"brush",mode:gb?"move":"resize"})}}function ba(Qa,jb,Eb){var Qb=Se(jb);jb=Qb[0];var Ec=Qb[1];Qb=
ea[Eb];var Oc=Eb?x:v,xe=Oc[1]-Oc[0];if(gb){jb-=Qb;Ec-=xe+Qb}Qa=(Eb?S:E)?Math.max(jb,Math.min(Ec,Qa[Eb])):Qa[Eb];if(gb)jb=(Qa+=Qb)+xe;else{if(nb)Qb=Math.max(jb,Math.min(Ec,2*nb[Eb]-Qa));if(Qb<Qa){jb=Qa;Qa=Qb}else jb=Qb}if(Oc[0]!=Qa||Oc[1]!=jb){if(Eb)F=null;else z=null;Oc[0]=Qa;Oc[1]=jb;return true}}function M(){Q();pa.style("pointer-events","all").selectAll(".resize").style("display",c.empty()?"none":null);K.select("body").style("cursor",null);Za.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",
null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);tb();da({type:"brushend"})}var fa=this,ka=K.select(K.event.target),da=m.of(fa,arguments),pa=K.select(fa),la=ka.datum(),Ba=!/^(n|s)$/.test(la)&&r,Ua=!/^(e|w)$/.test(la)&&q,gb=ka.classed("extent"),tb=wc(),nb,ea=K.mouse(fa),ta,Za=K.select(Lc).on("keydown.brush",T).on("keyup.brush",N);K.event.changedTouches?Za.on("touchmove.brush",Q).on("touchend.brush",M):Za.on("mousemove.brush",Q).on("mouseup.brush",M);pa.interrupt().selectAll("*").interrupt();
if(gb){ea[0]=v[0]-ea[0];ea[1]=x[0]-ea[1]}else if(la){var kb=+/w$/.test(la);la=+/^n/.test(la);ta=[v[1-kb]-ea[0],x[1-la]-ea[1]];ea[0]=v[kb];ea[1]=x[la]}else if(K.event.altKey)nb=ea.slice();pa.style("pointer-events","none").selectAll(".resize").style("display",null);K.select("body").style("cursor",ka.style("cursor"));da({type:"brushstart"});Q()}var m=ma(c,"brushstart","brush","brushend"),r=null,q=null,v=[0,0],x=[0,0],z,F,E=true,S=true,U=Uf[0];c.event=function(T){T.each(function(){var N=m.of(this,arguments),
Q={x:v,y:x,i:z,j:F},ba=this.__chart__||Q;this.__chart__=Q;if(Td)K.select(this).transition().each("start.brush",function(){z=ba.i;F=ba.j;v=ba.x;x=ba.y;N({type:"brushstart"})}).tween("brush:brush",function(){var M=Qe(v,Q.x),fa=Qe(x,Q.y);z=F=null;return function(ka){v=Q.x=M(ka);x=Q.y=fa(ka);N({type:"brush",mode:"resize"})}}).each("end.brush",function(){z=Q.i;F=Q.j;N({type:"brush",mode:"resize"});N({type:"brushend"})});else{N({type:"brushstart"});N({type:"brush",mode:"resize"});N({type:"brushend"})}})};
c.x=function(T){if(!arguments.length)return r;r=T;U=Uf[!r<<1|!q];return c};c.y=function(T){if(!arguments.length)return q;q=T;U=Uf[!r<<1|!q];return c};c.clamp=function(T){if(!arguments.length)return r&&q?[E,S]:r?E:q?S:null;if(r&&q){E=!!T[0];S=!!T[1]}else if(r)E=!!T;else if(q)S=!!T;return c};c.extent=function(T){var N,Q,ba,M,fa;if(!arguments.length){if(r)if(z){N=z[0];Q=z[1]}else{N=v[0];Q=v[1];if(r.invert){N=r.invert(N);Q=r.invert(Q)}if(Q<N){fa=N;N=Q;Q=fa}}if(q)if(F){ba=F[0];M=F[1]}else{ba=x[0];M=x[1];
if(q.invert){ba=q.invert(ba);M=q.invert(M)}if(M<ba){fa=ba;ba=M;M=fa}}return r&&q?[[N,ba],[Q,M]]:r?[N,Q]:q&&[ba,M]}if(r){N=T[0];Q=T[1];if(q){N=N[0];Q=Q[0]}z=[N,Q];if(r.invert){N=r(N);Q=r(Q)}if(Q<N){fa=N;N=Q;Q=fa}if(N!=v[0]||Q!=v[1])v=[N,Q]}if(q){ba=T[0];M=T[1];if(r){ba=ba[1];M=M[1]}F=[ba,M];if(q.invert){ba=q(ba);M=q(M)}if(M<ba){fa=ba;ba=M;M=fa}if(ba!=x[0]||M!=x[1])x=[ba,M]}return c};c.clear=function(){if(!c.empty()){v=[0,0];x=[0,0];z=F=null}return c};c.empty=function(){return!!r&&v[0]==v[1]||!!q&&
x[0]==x[1]};return K.rebind(c,m,"on")};var Sj={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Uf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];Vb=cb.format=Vb.timeFormat;ve=Vb.utc;var Eh=ve("%Y-%m-%dT%H:%M:%S.%LZ");Vb.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Of:Eh;Of.parse=function(c){c=new Date(c);return isNaN(c)?null:c};Of.toString=Eh.toString;cb.second=ib(function(c){return new Mc(Math.floor(c/
1E3)*1E3)},function(c,e){c.setTime(c.getTime()+Math.floor(e)*1E3)},function(c){return c.getSeconds()});cb.seconds=cb.second.range;cb.seconds.utc=cb.second.utc.range;cb.minute=ib(function(c){return new Mc(Math.floor(c/6E4)*6E4)},function(c,e){c.setTime(c.getTime()+Math.floor(e)*6E4)},function(c){return c.getMinutes()});cb.minutes=cb.minute.range;cb.minutes.utc=cb.minute.utc.range;cb.hour=ib(function(c){var e=c.getTimezoneOffset()/60;return new Mc((Math.floor(c/36E5-e)+e)*36E5)},function(c,e){c.setTime(c.getTime()+
Math.floor(e)*36E5)},function(c){return c.getHours()});cb.hours=cb.hour.range;cb.hours.utc=cb.hour.utc.range;cb.month=ib(function(c){c=cb.day(c);c.setDate(1);return c},function(c,e){c.setMonth(c.getMonth()+e)},function(c){return c.getMonth()});cb.months=cb.month.range;cb.months.utc=cb.month.utc.range;var We=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Vf=[[cb.second,1],[cb.second,5],[cb.second,15],[cb.second,30],[cb.minute,1],[cb.minute,5],[cb.minute,
15],[cb.minute,30],[cb.hour,1],[cb.hour,3],[cb.hour,6],[cb.hour,12],[cb.day,1],[cb.day,2],[cb.week,1],[cb.month,1],[cb.month,3],[cb.year,1]],Tj=Vb.multi([[".%L",function(c){return c.getMilliseconds()}],[":%S",function(c){return c.getSeconds()}],["%I:%M",function(c){return c.getMinutes()}],["%I %p",function(c){return c.getHours()}],["%a %d",function(c){return c.getDay()&&c.getDate()!=1}],["%b %d",function(c){return c.getDate()!=1}],["%B",function(c){return c.getMonth()}],["%Y",Ad]]),pj={range:function(c,
e,h){return K.range(+c,+e,h).map(Sd)},floor:Nb,ceil:Nb};Vf.year=cb.year;cb.scale=function(){return Pf(K.scale.linear(),Vf,Tj)};var Fh=Vf.map(function(c){return[c[0].utc,c[1]]}),Uj=ve.multi([[".%L",function(c){return c.getUTCMilliseconds()}],[":%S",function(c){return c.getUTCSeconds()}],["%I:%M",function(c){return c.getUTCMinutes()}],["%I %p",function(c){return c.getUTCHours()}],["%a %d",function(c){return c.getUTCDay()&&c.getUTCDate()!=1}],["%b %d",function(c){return c.getUTCDate()!=1}],["%B",function(c){return c.getUTCMonth()}],
["%Y",Ad]]);Fh.year=cb.year.utc;cb.scale.utc=function(){return Pf(K.scale.linear(),Fh,Uj)};K.text=Ic(function(c){return c.responseText});K.json=function(c,e){return Bb(c,"application/json",qj,e)};K.html=function(c,e){return Bb(c,"text/html",rj,e)};K.xml=Ic(function(c){return c.responseXML});if(typeof define==="function"&&define.amd)define(K);else if(typeof module==="object"&&module.exports)module.exports=K;else this.d3=K})();steal.loaded("lib/xCharts/d3.js");
steal("jquery/class").then("lib/xCharts/d3.js",function(){$.Class("Chart",{chartOptions:{paddingTop:10,paddingLeft:40},ticksX:{hour:{interval:d3.time.minutes,step:5},day:{interval:d3.time.hours,step:2},month:{interval:d3.time.days,step:2},year:{interval:d3.time.months,step:1}},formats:{hour:d3.time.format.multi([["*%b %d*",function(b){return b.getMinutes()===0&&b.getHours()===0}],["%H:%M",function(){return true}]]),day:d3.time.format.multi([["*%b %d*",function(b){return b.getHours()===0}],["%H:%M",
function(){return true}]]),month:d3.time.format.multi([["*%b*",function(b){return b.getDate()==1}],["%b %d",function(){return true}]]),year:d3.time.format.multi([["*%Y*",function(b){return b.getMonth()==1}],["%B",function(){return true}]])},processAxisTicks:function(b,a){setTimeout(function(){b.find(".axis"+a.toUpperCase()).find(".tick text").attr("class","").filter(function(){if($(this).text().match("^\\*.+\\*$"))return true}).each(function(){var d=$(this).text().replace(/\*/g,"");$(this).empty().html(d).attr("class",
"bold")})},50)}},{_xChart:null,_linkWrapper:null,type:"",stats:"",timeLapse:"",data:null,options:{},init:function(b,a,d,f,g){this._linkWrapper=b;this.type=d;this.stats=f;this.timeLapse=g;this.prepare(a);this._xChart=new xChart(this.type,this.data,this.getChartSelector(),this.options);this.type=="line"&&Chart.processAxisTicks(this._linkWrapper,"x")},getChartSelector:function(){return"#js-figure-"+this.type+"-"+this._linkWrapper.data("link-id")},prepare:function(b){if(this.type=="bar"){this.options.yMin=
0;this.options.tickHintX=30;this.options.tickXInterval=null;this.options.tickXStep=null;this.options.tickFormatX=null;this.options.dataFormatX=function(d){return d}}else{this.options.tickXInterval=Chart.ticksX[this.timeLapse].interval;this.options.tickXStep=Chart.ticksX[this.timeLapse].step;this.options.tickFormatX=Chart.formats[this.timeLapse];this.options.dataFormatX=function(d){return d3.time.format("%Y-%m-%d %H:%M:%S").parse(d)}}this.options.tickFormatY=d3.format("d");$.extend(this.options,Chart.chartOptions);
var a={yScale:"rangedLinear",type:this.type,xScale:this.type=="bar"?"ordinal":"ordinalTime"};a.main=[];a.main.push({data:b});this.data=a},changeTimelapse:function(b,a){this.timeLapse=a;this.prepare(b);this._xChart.setData(this.data);Chart.processAxisTicks(this._linkWrapper,"x")},show:function(){this._linkWrapper.find("figure").hide();this._linkWrapper.find(this.getChartSelector()).show()}})});steal.loaded("app/controllers/history/mylinks/charts/chart.js");
steal("app/popups/secondary-popup.js",function(b){App.SecondaryPopup("App.SilentBase",{ga:{open:function(a){lnEvent(a.mode+" open",a.name)},close:function(a){lnEvent(a.mode+" close",a.name)},tweet:function(a){lnEvent(a.mode+" tweet",a.name)},reply:function(a){lnEvent(a.mode+" reply",a.name)},posted:function(a){lnEvent(a.mode+" posted",a.name)},turnOnAp:function(a){lnEvent(a.mode+" turn on ap",a.name)}}},{mode:null,tweet_limit:140,cookie_life:7,_msgBox:null,init:function(a,d){d=d||{};if(!this.mode&&
d.mode)this.mode=d.mode;this._modes&&this.mode&&b.extend(this,this._modes[this.mode]);this._msgBox=new MessageBox(this.find(".err-msg"))},onShow:function(){App.SilentBase.ga.open(this);hihit(this.mode=="welcome"?3177:3304)},onHide:function(){App.SilentBase.ga.close(this);hihit(this.mode=="welcome"?3179:3306)},textLimitCounter:function(a,d,f){var g=a.val().length;b(d).html(g);if(g>f){d=a.val();a.val(d.substring(0,f)+"...")}},".js-tweet-btn click":function(a,d){d.preventDefault();var f=this;hihit(this.mode==
"welcome"?3178:3305);App.SilentBase.ga.tweet(this);this.sendTweet({tweet:this.find('[name="tweet"]').val(),urlToWrap:this.find('[name="url"]').val(),button:this.find(".js-tweet-btn"),loader:this.find(".std-loading")},function(g){f.tweetCallback(g)})},sendTweet:function(a,d){var f=this,g=a.tweet;if(g&&g.length){var k=f.tweet_limit;if(a.urlToWrap&&g.indexOf(a.urlToWrap)>-1){var o=a.urlToWrap.substr(a.urlToWrap.indexOf("/",8)+1);k+=o.length-6}if(g.length>k)g=truncateByWords(g,k);a.button&&a.button.hide();
a.loader&&a.loader.show();b.post("/ajax/tweet",{status:g,wrap_url:a.urlToWrap},function(s){a.button&&a.button.show();a.loader&&a.loader.hide();if(s.success){App.SilentBase.ga.posted(f);d&&d(s)}else f._msgBox.showAndHide(s.error.message,MessageBox.TYPE_ERROR)})}},tweetCallback:function(){}})});steal.loaded("app/popups/silent-base.js");
steal("jquery/class",function(b){b.Class("MessageBox",{TYPE_ERROR:"errorClass",TYPE_SUCCESS:"successClass",TYPES:["TYPE_ERROR","TYPE_SUCCESS"],defaultOptions:{elmInner:"span",hideDelay:3E3,fadeSpeed:0,onShow:null,onHide:null,errorClass:"",successClass:""}},{opts:null,elmOuter:null,timeoutId:null,msgsQueue:[],init:function(a,d){this.elmOuter=a;this.opts=b.extend({},this.Class.defaultOptions,d||{})},showAndHide:function(a,d,f){this.msgsQueue.push({text:a,type:d,options:f});this.timeoutId||this._showMsg()},
hide:function(){var a=this;if(this.timeoutId){clearTimeout(this.timeoutId);this.timeoutId=null;this._getElmOuter().fadeOut(this.opts.fadeSpeed,function(){for(var d,f=0;f<a.msgsQueue.length;f++){d=a.msgsQueue[f];d=b.extend({},a.opts,d.options||{});typeof d.onHide=="function"&&d.onHide(a.msgsQueue[f].type)}a.msgsQueue=[]})}},_showMsg:function(){var a=this.msgsQueue[0];if(a){var d=this,f=b.extend({},this.opts,a.options||{});this._setText(a.text,f);this._setType(a.type,f);this._getElmOuter().show();typeof f.onShow==
"function"&&f.onShow(a.type);this.timeoutId=setTimeout(function(){d._getElmOuter().fadeOut(f.fadeSpeed,function(){d.timeoutId=null;typeof f.onHide=="function"&&f.onHide(a.type);d.msgsQueue.shift();d.msgsQueue.length&&d._showMsg()})},f.hideDelay)}},_setText:function(a,d){(d.elmInner?this._getElmOuter().find(d.elmInner):this._getElmOuter()).html(a)},_setType:function(a,d){a=d[a]===undefined?a:d[a];for(var f=[],g,k=0;k<this.Class.TYPES.length;k++)(g=d[this.Class[this.constructor.TYPES[k]]])&&f.push(g);
this._getElmOuter().removeClass(f.join(" ")).addClass(a)},_getElmOuter:function(){return b(this.elmOuter)}})});steal.loaded("app/tools/message-box.js");
steal("jquery/controller","app/show/share.js",function(b){App.Show.Share("App.Show.PopupBaseShare",{$popup_type:null,$form:null,$message:null,$caption:null,$shareMessage:".js-share-message",$tw:".js-share-tw-checkbox",$fb:".js-share-fb-checkbox",$messageContainer:"",init:function(a,d){this._super();this.$Message=new Message;this.$Message.setMessageContainer(this.getMessageContainer());this.$form=this.find("form");if(d.restore){a=null;if(d.onRestore)a=d.onRestore;this._restoreForm(this.$form,d.restore,
a)}this._initForm(this.$form)},getMessageContainer:function(){return this.$messageContainer},_restoreForm:function(a,d,f){this.setCaption(d.message).setTw(d.auth.tw).setFb(d.auth.fb);typeof f=="function"&&f.call(this);return this},_checkAuthPermission:function(){return false},_getMessageSelector:function(){return this.$popup_type?"."+this.$popup_type+" "+this.$messageSelector:""},_preInitForm:function(){},_initForm:function(a){this._preInitForm(a);var d=this;a.submit(function(f){f.preventDefault();
if(d._checkAuthPermission())if(!LinkData.isLogged){d.$Message.showAndHide(LNG["popup.siginOrRegisterDot"],Message.TYPE_ERROR);return}d._doSave(a)})},show:function(){Popup.show(this.$popup_type);setTimeout(function(){Popup._centrify()},10);return this},hide:function(){Popup.hide();return this},closePopup:function(){return this.hide()},_doSave:function(a){this._log(a);this.saveCheckboxState(a)},setCaption:function(a){this.$caption=a;this.$form.find(this.$shareMessage).val(a);return this},setTw:function(a){this.$form.find(this.$tw).prop("checked",
a);return this},setFb:function(a){this.$form.find(this.$fb).prop("checked",a);return this},tidyMessage:function(a){return b.trim(window.HELPER.greedyReplace(a,!LNG["show.popup.input.message"]?"":LNG["show.popup.input.message"],""))},_getDataFromForm:function(a){return{message:this.tidyMessage(a.find(this.$shareMessage).val()),auth:{tw:a.find(this.$tw).is(":checked")?1:0,fb:a.find(this.$fb).is(":checked")?1:0}}},hideSpinner:function(){this.$Message.hide()},showSpinner:function(){this.$Message.show(LNG["popup.processing"],
Message.TYPE_SUCCESS)},showMessage:function(a){this.$Message.show(a,Message.TYPE_SUCCESS)},hideMessage:function(){this.hideSpinner()},showError:function(a){this.$Message.show(a,Message.TYPE_ERROR)},hideError:function(){this.hideSpinner()},".popup-signin-tw click":function(a,d){d.preventDefault();this.setPopupValuesToCookie({tw:1});LinkData.isLogged?authWithTw(customAuthRedirect):window.twAuth(customAuthRedirect)},".popup-signin-fb click":function(a,d){d.preventDefault();this.setPopupValuesToCookie({fb:1});
LinkData.isLogged?authWithFb(customAuthRedirect):window.fbAuth(customAuthRedirect)},getPopupValues:function(){var a={},d=this._getDataFromForm(this.$form);a[Popup.getType()]=d;return a},getPopupText:function(){return this.$form.find(this.$shareMessage).val()},setPopupValuesToCookie:function(a){var d=this.getPopupValues();b.extend(d[Popup.getType()].auth,a);d=JSON.stringify(d);this._setPopupPropertiesCookie(d)},_setPopupPropertiesCookie:function(a){b.each([LinkData.shortUrl,LinkData.fullShortPath],
function(d,f){if(f){f=f.substr(0,1)!="/"?"/"+f:f;b.cookie("popup_properties",a,{expires:0,path:f})}})},saveCheckboxState:function(){var a=this.getPopupValues();delete a.message;var d={};if(b.cookie("share_checkboxes"))d=b.cookie("share_checkboxes");b.extend(d,a);b.cookie("share_checkboxes",d,{expires:0,path:"/"})}})});steal.loaded("app/show/popup_base_share.js");
steal("jquery/controller","jquery/dom/cookie","app/tools/common.js","app/models/likes.js",function(b){b.Controller("App.Show.Likes",{defaults:{forceFormMode:false}},{ignoreNeedSignIn:false,disabledLiking:false,init:function(){},animateLikes:function(){if(!this.options.forceFormMode){var a=this.element,d=parseInt(a.css("left"));a.hover(function(){a.stop(true).animate({left:0},400)},function(){a.stop(true).animate({left:d},400)})}},".js-like, .js-dislike click":function(a,d){d.preventDefault();var f=
this,g=a.hasClass("like")||a.hasClass("top-like")||a.hasClass("js-like")?"like":"dislike";if(!f.disabledLiking)if(LinkData.needSignIn&&!this.ignoreNeedSignIn){b.cookie("delayed_action",g);hihit(1957);Popup.show(Popup.TYPE_AUTH,true)}else if(this.onBeforeClick(a,g)!==false){f.disabledLiking=true;a=LinkData.shortUrl;lnEvent("likes",g);(new Theme.Models.Likes({short_link:a,action:g})).save(function(k,o){k.processSuccess(o);f.disabledLiking=false;if(o.success=="true"){f._counter(g);f.onSuccess(g,o)}},
function(){});if(a=Registry.getController("show"))a.showForcePopup=false}},onBeforeClick:function(){},onSuccess:function(){},_counter:function(a){var d=0;a=a=="like";switch(LinkData.curTheme){case Themes.THEME_1:d=a?1961:1962;break;case Themes.THEME_2:d=a?1973:1974;break;case Themes.THEME_3:d=a?1963:1964;break;case Themes.THEME_4:d=a?1983:1984;break;case Themes.THEME_7:d=a?2093:null;break;case Themes.THEME_9:d=a?2214:null;break}d&&hihit(d)}})});steal.loaded("app/show/likes.js");
steal("jquery/model","jquery/model/list",function(){$.Model("Theme.Models.Likes",{defaults:{short_link:null,action:null},findAll:function(){},findOne:function(){},create:"POST /ajax/{action}",update:"POST /ajax/{action}",destroy:function(){}},{processSuccess:function(b){if(b.success=="true"){$(".js-like-value").html(b.data.likes);$(".js-dislike-value").html(b.data.dislikes);Popup.hide()}}})});steal.loaded("app/models/likes.js");
steal("jquery").then(function(b){var a=function(ma){return ma.replace(/^\/\//,"").replace(/[\/\.]/g,"_")},d=b.makeArray,f=1,g=b.View=function(ma,O,ca,xa){if(typeof ca==="function"){xa=ca;ca=undefined}var Ma=A(O);if(Ma.length){var oa=b.Deferred();Ma.push(o(ma,true));b.when.apply(b,Ma).then(function(ja){var Ca=d(arguments),Xa=Ca.pop()[0];if(s(O))O=G(ja);else for(var hb in O)if(s(O[hb]))O[hb]=G(Ca.shift());Ca=Xa(O,ca);oa.resolve(Ca);xa&&xa(Ca)});return oa.promise()}else{var va;Ma=typeof xa==="function";
oa=o(ma,Ma);if(Ma){va=oa;oa.done(function(ja){xa(ja(O,ca))})}else oa.done(function(ja){va=ja(O,ca)});return va}},k=function(ma,O){if(!ma.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+O;},o=function(ma,O){return b.ajax({url:ma,dataType:"view",async:O})},s=function(ma){return ma&&b.isFunction(ma.always)},A=function(ma){var O=[];if(s(ma))return[ma];else for(var ca in ma)s(ma[ca])&&O.push(ma[ca]);return O},G=function(ma){return b.isArray(ma)&&ma.length===3&&ma[1]===
"success"?ma[0]:ma};b.ajaxTransport("view",function(ma,O){var ca=O.url;ma=ca.match(/\.[\w\d]+$/);var xa,Ma,oa,va,ja=function(Xa){Xa=xa.renderer(oa,Xa);if(g.cache)g.cached[oa]=Xa;return{view:Xa}};if(Ma=document.getElementById(ca))ma="."+Ma.type.match(/\/(x\-)?(.+)/)[2];if(!ma){ma=g.ext;ca+=g.ext}oa=a(ca);if(ca.match(/^\/\//)){var Ca=ca.substr(2);ca=typeof steal==="undefined"?(ca="/"+Ca):steal.root.mapJoin(Ca)+""}xa=g.types[ma];return{send:function(Xa,hb){if(g.cached[oa])return hb(200,"success",{view:g.cached[oa]});
else if(Ma)hb(200,"success",ja(Ma.innerHTML));else va=b.ajax({async:O.async,url:ca,dataType:"text",error:function(){k("",ca);hb(404)},success:function(fb){k(fb,ca);hb(200,"success",ja(fb))}})},abort:function(){va&&va.abort()}}});b.extend(g,{hookups:{},hookup:function(ma){var O=++f;g.hookups[O]=ma;return O},cached:{},cache:true,register:function(ma){this.types["."+ma.suffix]=ma;window.steal&&steal.type(ma.suffix+" view js",function(O,ca){var xa=g.types["."+O.type],Ma=a(O.rootSrc+"");O.text=xa.script(Ma,
O.text);ca()})},types:{},ext:".ejs",registerScript:function(ma,O,ca){return"$.View.preload('"+O+"',"+g.types["."+ma].script(O,ca)+");"},preload:function(ma,O){g.cached[ma]=function(ca,xa){return O.call(ca,ca,xa)}}});window.steal&&steal.type("view js",function(ma,O){var ca=g.types["."+ma.type],xa=a(ma.rootSrc+"");ma.text="steal('"+(ca.plugin||"jquery/view/"+ma.type)+"').then(function($){$.View.preload('"+xa+"',"+ma.text+");\n})";O()});var H,V,ia,ha,na,Da,Ja,Ka={val:true,text:true};H=function(ma){var O=
b.fn[ma];b.fn[ma]=function(){var ca=d(arguments),xa,Ma,oa=this;if(s(ca[0])){ca[0].done(function(va){V.call(oa,[va],O)});return this}else if(ia(ca)){if(xa=Da(ca)){Ma=ca[xa];ca[xa]=function(va){V.call(oa,[va],O);Ma.call(oa,va)};g.apply(g,ca);return this}ca=g.apply(g,ca);if(s(ca)){ca.done(function(va){V.call(oa,[va],O)});return this}else ca=[ca]}return Ka[ma]?O.apply(this,ca):V.call(this,ca,O)}};V=function(ma,O){var ca;for(var xa in g.hookups)break;if(xa&&ma[0]&&ha(ma[0])){ca=g.hookups;g.hookups={};
ma[0]=b(ma[0])}O=O.apply(this,ma);ca&&Ja(ma[0],ca);return O};ia=function(ma){var O=typeof ma[1];return typeof ma[0]=="string"&&(O=="object"||O=="function")&&!na(ma[1])};na=function(ma){return ma.nodeType||ma.jquery};ha=function(ma){if(na(ma))return true;else if(typeof ma==="string"){ma=b.trim(ma);return ma.substr(0,1)==="<"&&ma.substr(ma.length-1,1)===">"&&ma.length>=3}else return false};Da=function(ma){return typeof ma[3]==="function"?3:typeof ma[2]==="function"&&2};Ja=function(ma,O){var ca,xa=0,
Ma,oa;ma=ma.filter(function(){return this.nodeType!=3});ma=ma.add("[data-view-id]",ma);for(ca=ma.length;xa<ca;xa++)if(ma[xa].getAttribute&&(Ma=ma[xa].getAttribute("data-view-id"))&&(oa=O[Ma])){oa(ma[xa],Ma);delete O[Ma];ma[xa].removeAttribute("data-view-id")}b.extend(g.hookups,O)};b.fn.hookup=function(){var ma=g.hookups;g.hookups={};Ja(this,ma);return this};b.each(["prepend","append","after","before","text","html","replaceWith","val"],function(ma,O){H(O)})});steal.loaded("jquery/view/view.js");
steal("jquery/view","jquery/lang/string/rsplit").then(function(b){var a=function(ja){eval(ja)},d=b.String.rsplit,f=b.extend,g=b.isArray,k=/\r\n/g,o=/\r/g,s=/\n/g,A=/\n/,G=/\\/g,H=/"/g,V=/'/g,ia=/\t/g,ha=/\{/g,na=/\}/g,Da=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,Ja=function(ja){return ja.replace(G,"\\\\").replace(s,"\\n").replace(H,'\\"').replace(ia,"\\t")},Ka=function(ja){return ja.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(H,"&#34;").replace(V,"&#39;")},ma=b.View,O=function(ja){var Ca=
ja.match(ha);ja=ja.match(na);return(Ca?Ca.length:0)-(ja?ja.length:0)},ca=function(ja){if(this.constructor!=ca){var Ca=new ca(ja);return function(Xa,hb){return Ca.render(Xa,hb)}}if(typeof ja=="function")this.template={fn:ja};else{f(this,ca.options,ja);this.template=va(this.text,this.type,this.name)}};window.jQuery&&(jQuery.EJS=ca);ca.prototype.render=function(ja,Ca){ja=ja||{};this._extra_helpers=Ca;Ca=new ca.Helpers(ja,Ca||{});return this.template.fn.call(ja,ja,Ca)};f(ca,{text:function(ja){if(typeof ja==
"string")return ja;if(ja===null||ja===undefined)return"";var Ca=ja.hookup&&function(Xa,hb){ja.hookup.call(ja,Xa,hb)}||typeof ja=="function"&&ja||g(ja)&&function(Xa,hb){for(var fb=0;fb<ja.length;fb++)ja[fb].hookup?ja[fb].hookup(Xa,hb):ja[fb](Xa,hb)};if(Ca)return"data-view-id='"+ma.hookup(Ca)+"'";return ja.toString?ja.toString():""},clean:function(ja){return typeof ja=="string"?Ka(ja):typeof ja=="number"?ja:ca.text(ja)},options:{type:"<",ext:".ejs"}});var xa=function(ja,Ca,Xa){Ca=d(Ca,A);for(var hb=
0;hb<Ca.length;hb++)Ma(ja,Ca[hb],Xa)},Ma=function(ja,Ca,Xa){ja.lines++;Ca=d(Ca,ja.splitter);for(var hb,fb=0;fb<Ca.length;fb++){hb=Ca[fb];hb!==null&&Xa(hb,ja)}},oa=function(ja,Ca){var Xa={};f(Xa,{left:ja+"%",right:"%"+Ca,dLeft:ja+"%%",dRight:"%%"+Ca,eeLeft:ja+"%==",eLeft:ja+"%=",cmnt:ja+"%#",scan:xa,lines:0});Xa.splitter=new RegExp("("+[Xa.dLeft,Xa.dRight,Xa.eeLeft,Xa.eLeft,Xa.cmnt,Xa.left,Xa.right+"\n",Xa.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")");return Xa},va=function(ja,
Ca,Xa){ja=ja.replace(k,"\n").replace(o,"\n");Ca=Ca||"<";var hb=new ca.Buffer(["var ___v1ew = [];"],[]),fb="",Sb=function(Db){hb.push("___v1ew.push(",'"',Ja(Db),'");')},Jc=null,Fc=function(){fb=""},Ra=[];xa(oa(Ca,Ca==="["?"]":">"),ja||"",function(Db,Wb){if(Jc===null)switch(Db){case "\n":fb+="\n";Sb(fb);hb.cr();Fc();break;case Wb.left:case Wb.eLeft:case Wb.eeLeft:case Wb.cmnt:Jc=Db;fb.length>0&&Sb(fb);Fc();break;case Wb.dLeft:fb+=Wb.left;break;default:fb+=Db;break}else switch(Db){case Wb.right:switch(Jc){case Wb.left:Db=
O(fb);Wb=Ra.length&&Db==-1?Ra.pop():";";Wb==="));"&&hb.push("return ___v1ew.join('')");hb.push(fb,Wb);Db===1&&Ra.push(";");break;case Wb.eLeft:(Db=O(fb))&&Ra.push("));");if(Da.test(fb)){Wb=fb.match(Da);fb="function(__){var "+Wb[1]+"=$(__);"+Wb[2]+"}"}hb.push("___v1ew.push(","jQuery.EJS.clean(",fb,Db?"var ___v1ew = [];":"));");break;case Wb.eeLeft:(Db=O(fb))&&Ra.push("));");hb.push("___v1ew.push(","jQuery.EJS.text(",fb,Db?"var ___v1ew = [];":"));");break}Jc=null;Fc();break;case Wb.dRight:fb+=Wb.right;
break;default:fb+=Db;break}});fb.length>0&&hb.push("___v1ew.push(",'"',Ja(fb)+'");');ja={out:"try { with(_VIEW) { with (_CONTEXT) {"+hb.close()+" return ___v1ew.join('')}}}catch(e){e.lineNumber=null;throw e;}"};a.call(ja,"this.fn = (function(_CONTEXT,_VIEW){"+ja.out+"});\r\n//@ sourceURL="+Xa+".js");return ja};ca.Buffer=function(ja,Ca){this.line=[];this.script=[];this.post=Ca;this.push.apply(this,ja)};ca.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),
"\n");this.line=[]},close:function(){if(this.line.length>0){this.script.push(this.line.join(""));this.line=[]}this.post.length&&this.push.apply(this,this.post);this.script.push(";");return this.script.join("")}};ca.Helpers=function(ja,Ca){this._data=ja;this._extras=Ca;f(this,Ca)};ca.Helpers.prototype={plugin:function(){var ja=b.makeArray(arguments),Ca=ja.shift();return function(Xa){Xa=b(Xa);Xa[Ca].apply(Xa,ja)}},view:function(ja,Ca,Xa){Xa=Xa||this._extras;Ca=Ca||this._data;return ma(ja,Ca,Xa)}};ma.register({suffix:"ejs",
script:function(ja,Ca){return"jQuery.EJS(function(_CONTEXT,_VIEW) { "+(new ca({text:Ca,name:ja})).template.out+" })"},renderer:function(ja,Ca){return ca({text:Ca,name:ja})}})});steal.loaded("jquery/view/ejs/ejs.js");steal("jquery/lang/string",function(b){b.String.rsplit=function(a,d){for(var f=d.exec(a),g=[],k;f!==null;){k=f.index;if(k!==0){g.push(a.substring(0,k));a=a.slice(k)}g.push(f[0]);a=a.slice(f[0].length);f=d.exec(a)}a!==""&&g.push(a);return g}});steal.loaded("jquery/lang/string/rsplit/rsplit.js");
steal("app/popups/secondary-popup.js",function(b){App.SecondaryPopup("App.Index.Popup.Video",{init:function(){steal("lib/youtube.api.min.js").then(function(){PopupSM.get("indexVideo")})}},{_title:"Linkis - Customize links, exchange mentions",_selector:".js-index-video",_addClass:"popup-themes-preview",_width:false,_height:false,player:null,loaded:false,videoId:"",init:function(){},initPlayer:function(){var a=this,d=this.getVideoDimensions();this.player=new YT.Player("youtube-video",{width:d.width,
height:d.height,videoId:this.videoId,events:{onReady:function(){a.loaded=true;PopupSM.isMobile().any||a.play()}}})},getVideoDimensions:function(){var a=b(window).width(),d=b(window).height();return this._width&&this._height?{width:this._width,height:this._height}:{width:Math.round(a*0.8),height:Math.round(d*0.8)}},play:function(){this.player.playVideo()},onShow:function(){this.player?this.play():this.initPlayer()},beforeHide:function(){if(!this.loaded)return false},onHide:function(){this.player.pauseVideo()}})});
steal.loaded("app/popups/index-video-popup.js");if(!window.YT)var YT={loading:0,loaded:0};if(!window.YTConfig)var YTConfig={};(function(){var b=[];YT.ready=function(a){YT.loaded?a():b.push(a)};window.onYTReady=function(){YT.loaded=1;for(var a=0;a<b.length;a++)try{b[a]()}catch(d){}};YT.setConfig=function(a){for(var d in a)a.hasOwnProperty(d)&&(YTConfig[d]=a[d])}})();
(function(){function b(D){D=D.split(".");for(var L=Yb,X;X=D.shift();)if(null!=L[X])L=L[X];else return null;return L}function a(D){var L=typeof D;if("object"==L)if(D){if(D instanceof Array)return"array";if(D instanceof Object)return L;var X=Object.prototype.toString.call(D);if("[object Window]"==X)return"object";if("[object Array]"==X||"number"==typeof D.length&&"undefined"!=typeof D.splice&&"undefined"!=typeof D.propertyIsEnumerable&&!D.propertyIsEnumerable("splice"))return"array";if("[object Function]"==
X||"undefined"!=typeof D.call&&"undefined"!=typeof D.propertyIsEnumerable&&!D.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==L&&"undefined"==typeof D.call)return"object";return L}function d(D){return"string"==typeof D}function f(D){var L=typeof D;return"object"==L&&null!=D||"function"==L}function g(D){return D.call.apply(D.bind,arguments)}function k(D,L){if(!D)throw Error();if(2<arguments.length){var X=Array.prototype.slice.call(arguments,2);return function(){var Pa=
Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(Pa,X);return D.apply(L,Pa)}}return function(){return D.apply(L,arguments)}}function o(){o=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:k;return o.apply(null,arguments)}function s(D,L){D=D.split(".");var X=Yb;D[0]in X||!X.execScript||X.execScript("var "+D[0]);for(var Pa;D.length&&(Pa=D.shift());)D.length||void 0===L?X[Pa]?(X=X[Pa]):(X=X[Pa]={}):(X[Pa]=L)}function A(D,L){function X(){}X.prototype=
L.prototype;D.A=L.prototype;D.prototype=new X;D.U=function(Pa,t){return L.prototype[t].apply(Pa,Array.prototype.slice.call(arguments,2))}}function G(D,L){return D<L?-1:D>L?1:0}function H(D,L){var X;a:{X=D.length;for(var Pa=d(D)?D.split(""):D,t=0;t<X;t++)if(t in Pa&&L.call(void 0,Pa[t],t,D)){X=t;break a}X=-1}return 0>X?null:d(D)?D.charAt(X):D[X]}function V(){return rb.concat.apply(rb,arguments)}function ia(D){var L=D.length;if(0<L){for(var X=Array(L),Pa=0;Pa<L;Pa++)X[Pa]=D[Pa];return X}return[]}function ha(D,
L,X){return 2>=arguments.length?rb.slice.call(D,L):rb.slice.call(D,L,X)}function na(D){var L=yc,X;for(X in L)if(D.call(void 0,L[X],X,L))return X}function Da(){return Yb.navigator?Yb.navigator.userAgent:null}function Ja(){var D=Yb.document;return D?D.documentMode:void 0}function Ka(D){if(!ua[D]){for(var L=0,X=String(Qc).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),Pa=String(D).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),t=Math.max(X.length,Pa.length),C=0;0==L&&C<t;C++){var Y=X[C]||"",sa=Pa[C]||
"",wa=RegExp("(\\d*)(\\D*)","g"),ab=RegExp("(\\d*)(\\D*)","g");do{var lb=wa.exec(Y)||["","",""],Rb=ab.exec(sa)||["","",""];if(0==lb[0].length&&0==Rb[0].length)break;L=G(0==lb[1].length?0:parseInt(lb[1],10),0==Rb[1].length?0:parseInt(Rb[1],10))||G(0==lb[2].length,0==Rb[2].length)||G(lb[2],Rb[2])}while(0==L)}ua[D]=0<=L}}function ma(D){var L,X,Pa,t;L=document;if(L.querySelectorAll&&L.querySelector&&D)return L.querySelectorAll(""+(D?"."+D:""));if(D&&L.getElementsByClassName){var C=L.getElementsByClassName(D);
return C}C=L.getElementsByTagName("*");if(D){t={};for(X=Pa=0;L=C[X];X++){var Y=L.className,sa;if(sa="function"==typeof Y.split)sa=0<=Nb(Y.split(/\s+/),D);sa&&(t[Pa++]=L)}t.length=Pa;return t}return C}function O(D,L){for(var X=0;D;){if(L(D))return D;D=D.parentNode;X++}return null}function ca(D){D=String(D);if(/^\s*$/.test(D)?0:/^[\],:{}\s\u2028\u2029]*$/.test(D.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,
"")))try{return eval("("+D+")")}catch(L){}throw Error("Invalid JSON string: "+D);}function xa(){}function Ma(D,L,X){switch(typeof L){case "string":oa(L,X);break;case "number":X.push(isFinite(L)&&!isNaN(L)?L:"null");break;case "boolean":X.push(L);break;case "undefined":X.push("null");break;case "object":if(null==L){X.push("null");break}if("array"==a(L)){var Pa=L.length;X.push("[");for(var t="",C=0;C<Pa;C++){X.push(t);Ma(D,L[C],X);t=","}X.push("]");break}X.push("{");Pa="";for(t in L)Object.prototype.hasOwnProperty.call(L,
t)&&(C=L[t],"function"!=typeof C&&(X.push(Pa),oa(t,X),X.push(":"),Ma(D,C,X),Pa=","));X.push("}");break;case "function":break;default:throw Error("Unknown type: "+typeof L);}}function oa(D,L){L.push('"',D.replace(eb,function(X){if(X in Ha)return Ha[X];var Pa=X.charCodeAt(0),t="\\u";16>Pa?(t+="000"):256>Pa?(t+="00"):4096>Pa&&(t+="0");return Ha[X]=t+Pa.toString(16)}),'"')}function va(){}function ja(){this.a=[];this.b={}}function Ca(D,L,X,Pa){var t=D.b[L];t||(t=D.b[L]=[]);var C=D.H;D.a[C]=L;D.a[C+1]=
X;D.a[C+2]=Pa;D.H=C+3;t.push(C)}function Xa(D,L,X){var Pa=Xc;if(D=Pa.b[D]){var t=Pa.a;(D=H(D,function(C){return t[C+1]==L&&t[C+2]==X}))&&Pa.F(D)}}function hb(D){if(ib){ib=false;var L=Yb.location;if(L){var X=L.href;if(X&&(X=(X=hb(X)[3]||null)&&decodeURIComponent(X))&&X!=L.hostname)throw ib=true,Error();}}return D.match(db)}function fb(D,L,X){if("array"==a(L))for(var Pa=0;Pa<L.length;Pa++)fb(D,String(L[Pa]),X);else null!=L&&X.push("&",D,""===L?"":"=",encodeURIComponent(String(L)))}function Sb(D){return zb[D]||
(zb[D]=String(D).replace(/\-([a-z])/g,function(L,X){return X.toUpperCase()}))}function Jc(){var D=arguments;if(1<D.length){var L=D[0];Cb[L]=D[1]}else for(L in D=D[0],D)Cb[L]=D[L]}function Fc(D){"function"==a(D)&&(D=Ra(D));return window.setInterval(D,250)}function Ra(D){return D&&window.yterr?function(){try{return D.apply(this,arguments)}catch(L){if(window&&window.yterr){var X=b("yt.www.errors.log");X?X(L,void 0):(X=("ERRORS"in Cb?Cb.ERRORS:void 0)||[],X.push(L),Jc("ERRORS",X))}throw L;}}:D}function Db(D){if(D=
D||window.event){for(var L in D)L in Zb||(this[L]=D[L]);(L=D.target||D.srcElement)&&3==L.nodeType&&(L=L.parentNode);this.target=L;if(L=D.relatedTarget)try{L=L.nodeName&&L}catch(X){L=null}else"mouseover"==this.type?(L=D.fromElement):"mouseout"==this.type&&(L=D.toElement);this.relatedTarget=L;this.clientX=void 0!=D.clientX?D.clientX:D.pageX;this.clientY=void 0!=D.clientY?D.clientY:D.pageY;this.keyCode=D.keyCode?D.keyCode:D.which;this.charCode=D.charCode||("keypress"==this.type?this.keyCode:0);this.altKey=
D.altKey;this.ctrlKey=D.ctrlKey;this.shiftKey=D.shiftKey;"MozMousePixelScroll"==this.type?(this.wheelDeltaX=D.axis==D.HORIZONTAL_AXIS?D.detail:0,this.wheelDeltaY=D.axis==D.HORIZONTAL_AXIS?0:D.detail):window.opera?(this.wheelDeltaX=0,this.wheelDeltaY=D.detail):0==D.wheelDelta%120?"WebkitTransform"in document.documentElement.style?window.chrome&&0==navigator.platform.indexOf("Mac")?(this.wheelDeltaX=D.wheelDeltaX/-30,this.wheelDeltaY=D.wheelDeltaY/-30):(this.wheelDeltaX=D.wheelDeltaX/-1.2,this.wheelDeltaY=
D.wheelDeltaY/-1.2):(this.wheelDeltaX=0,this.wheelDeltaY=D.wheelDelta/-1.6):(this.wheelDeltaX=D.wheelDeltaX/-3,this.wheelDeltaY=D.wheelDeltaY/-3)}}function Wb(D,L,X){return na(function(Pa){return Pa[0]==D&&Pa[1]==L&&Pa[2]==X&&false==Pa[4]})}function u(D,L,X){if(D&&(D.addEventListener||D.attachEvent)){var Pa=Wb(D,L,X);if(!Pa){Pa=++pd.count+"";var t=!("mouseenter"!=L&&"mouseleave"!=L||!D.addEventListener||"onmouseenter"in document),C;C=t?function(Y){Y=new Db(Y);if(!O(Y.relatedTarget,function(sa){return sa==
D}))return Y.currentTarget=D,Y.type=L,X.call(D,Y)}:function(Y){Y=new Db(Y);Y.currentTarget=D;return X.call(D,Y)};C=Ra(C);yc[Pa]=[D,L,X,C,false];D.addEventListener?"mouseenter"==L&&t?D.addEventListener("mouseover",C,false):"mouseleave"==L&&t?D.addEventListener("mouseout",C,false):"mousewheel"==L&&"MozBoxSizing"in document.documentElement.style?D.addEventListener("MozMousePixelScroll",C,false):D.addEventListener(L,C,false):D.attachEvent("on"+L,C)}}}function Pc(D){D&&("string"==typeof D&&(D=[D]),Ic(D,
function(L){if(L in yc){var X=yc[L],Pa=X[0],t=X[1],C=X[3];X=X[4];Pa.removeEventListener?Pa.removeEventListener(t,C,X):Pa.detachEvent&&Pa.detachEvent("on"+t,C);delete yc[L]}}))}function bd(D){var L=[],X;for(X in D)fb(X,D[X],L);L[0]="";return L.join("")}function dd(){Ic(od,function(D){D()})}function ad(D){var L=ia(document.getElementsByTagName("yt:"+D));D="yt-"+D;var X=document;D=X.querySelectorAll&&X.querySelector?X.querySelectorAll("."+D):ma(D);D=ia(D);return V(L,D)}function wc(D,L){return"yt:"==
D.tagName.toLowerCase().substr(0,3)?D.getAttribute(L):D.dataset?D.dataset[Sb(L)]:D.getAttribute("data-"+L)}function Vc(){Xc.I.apply(Xc,arguments)}function bb(D,L){this.b=L;this.o=this.a=null;this.u=this[kc]||(this[kc]=++Hc);this.d=0;this.t=false;this.s=[];this.h=this.g=null;this.D={};L=document;if(L=d(D)?L.getElementById(D):D){if("iframe"!=L.tagName.toLowerCase()){var X=Hb(this,L);this.o=L;(D=L.parentNode)&&D.replaceChild(X,L);L=X}this.a=L;this.a.id||(L=this.a,X=X[kc]||(X[kc]=++Hc),L.id="widget"+
X);gd[this.a.id]=this;if(window.postMessage){this.g=new ja;Kb(this);L=Lb(this.b,"events");for(var Pa in L)L.hasOwnProperty(Pa)&&this.addEventListener(Pa,L[Pa]);for(var t in ld)Xb(this,t)}}}function Xb(D,L){L=L.split(".");if(2!=!L.length){var X=L[1];D.h==L[0]&&Gb(D,X)}}function xb(D,L,X){X=X||[];X=Array.prototype.slice.call(X);L={event:"command",func:L,args:X};D.t?D.B(L):D.s.push(L)}function Hb(D,L){var X=document.createElement("iframe");L=L.attributes;for(var Pa=0,t=L.length;Pa<t;Pa++){var C=L[Pa].value;
null!=C&&""!=C&&"null"!=C&&X.setAttribute(L[Pa].name,C)}X.setAttribute("frameBorder",0);X.setAttribute("allowfullscreen",1);X.setAttribute("title","YouTube "+Lb(D.b,"title"));(L=Lb(D.b,"width"))&&X.setAttribute("width",L);(L=Lb(D.b,"height"))&&X.setAttribute("height",L);var Y=D.q();Y.enablejsapi=window.postMessage?1:0;window.location.host&&(Y.origin=window.location.protocol+"//"+window.location.host);window.location.href&&Ic(["debugjs","debugcss"],function(sa){var wa;wa=window.location.href;var ab=
wa.search(sb),lb;a:{lb=0;for(var Rb=sa.length;0<=(lb=wa.indexOf(sa,lb))&&lb<ab;){var ac=wa.charCodeAt(lb-1);if(38==ac||63==ac)if(ac=wa.charCodeAt(lb+Rb),!ac||61==ac||38==ac||35==ac)break a;lb+=Rb+1}lb=-1}if(0>lb)wa=null;else{Rb=wa.indexOf("&",lb);if(0>Rb||Rb>ab)Rb=ab;lb+=sa.length+1;wa=decodeURIComponent(wa.substr(lb,Rb-lb).replace(/\+/g," "))}null===wa||(Y[sa]=wa)});X.src=Lb(D.b,"host")+D.C()+"?"+bd(Y);return X}function Kb(D){ec(D.b,D,D.u);D.d=Fc(o(D.G,D));u(D.a,"load",o(function(){window.clearInterval(this.d);
this.d=Fc(o(this.G,this))},D))}function Gb(D,L){D.D[L]||(D.D[L]=true,xb(D,"addEventListener",[L]))}function Tb(){}function ic(){}function Ac(){}function Bc(){}function cc(D){this.a=D}function sc(){var D=null;try{D=window.localStorage||null}catch(L){}this.a=D}function dc(){var D=null;try{D=window.sessionStorage||null}catch(L){}this.a=D}function xc(D){return(0==D.search("cue")||0==D.search("load"))&&"loadModule"!=D}function $b(D){return 0==D.search("get")||0==D.search("is")}function Ab(D){this.a=D||
{};this.defaults={};this.defaults.title="";D=document.getElementsByTagName("script")[0];this.defaults.host=("https:"==document.location.protocol||0==D.src.indexOf("https:")?"https:":"http:")+"//www.youtube.com"}function Lb(D,L){D=[D.a,window.YTConfig||{},D.defaults];for(var X=0;X<D.length;X++){var Pa=D[X][L];if(void 0!=Pa)return Pa}return null}function ec(D,L,X){Nc||(Nc={},u(window,"message",o(D.b,D)));Nc[X]=L}function Kc(D){Ab.call(this,D);this.defaults.title="video player";this.defaults.videoId=
"";this.defaults.width=640;this.defaults.height=360}function Aa(D,L){bb.call(this,D,new Kc(L));this.h="player";this.k={};this.i={}}function Wc(D){if("iframe"!=D.tagName.toLowerCase()){var L=wc(D,"videoid");if(L){var X=wc(D,"width"),Pa=wc(D,"height");new Aa(D,{videoId:L,width:X,height:Pa})}}}function tc(D,L){if(f(L))for(var X in L)D.k[X]=L[X]}function Ob(D,L){Ic(L,function(X){this[X]||(xc(X)?(this[X]=function(){this.k={};this.i={};xb(this,X,arguments);return this}):$b(X)?(this[X]=function(){var Pa=
0;0==X.search("get")?(Pa=3):0==X.search("is")&&(Pa=2);return this.k[X.charAt(Pa).toLowerCase()+X.substr(Pa+1)]}):(this[X]=function(){xb(this,X,arguments);return this}))},D)}function jc(D){Ab.call(this,D);this.defaults.title="Thumbnail";this.defaults.videoId="";this.defaults.width=120;this.defaults.height=68}function Ib(D,L){bb.call(this,D,new jc(L));this.h="thumbnail"}function uc(D){if("iframe"!=D.tagName.toLowerCase()){var L=wc(D,"videoid");if(L){L={videoId:L,events:{}};L.width=wc(D,"width");L.height=
wc(D,"height");L.thumbWidth=wc(D,"thumb-width");L.thumbHeight=wc(D,"thumb-height");L.thumbAlign=wc(D,"thumb-align");var X=wc(D,"onclick");X&&(L.events.onClick=X);new Ib(D,L)}}}function Pb(D){Ab.call(this,D);this.defaults.host="https://www.youtube.com";this.defaults.title="upload widget";this.defaults.width=640;this.defaults.height=0.67*Lb(this,"width")}function Mb(D,L){bb.call(this,D,new Pb(L))}var Ta,Yb=this,kc="closure_uid_"+(1E9*Math.random()>>>0),Hc=0;Function.prototype.bind=Function.prototype.bind||
function(D){if(1<arguments.length){var L=Array.prototype.slice.call(arguments,1);L.unshift(this,D);return o.apply(null,L)}return o(this,D)};var rb=Array.prototype,Nb=rb.indexOf?function(D,L,X){return rb.indexOf.call(D,L,X)}:function(D,L,X){X=null==X?0:0>X?Math.max(0,D.length+X):X;if(d(D))return d(L)&&1==L.length?D.indexOf(L,X):-1;for(;X<D.length;X++)if(X in D&&D[X]===L)return X;return-1},Ic=rb.forEach?function(D,L,X){rb.forEach.call(D,L,X)}:function(D,L,X){for(var Pa=D.length,t=d(D)?D.split(""):D,
C=0;C<Pa;C++)C in t&&L.call(X,t[C],C,D)},Bb,vc,fc;fc=vc=Ta=Bb=false;var qc;if(qc=Da()){fc=Yb.navigator;Bb=0==qc.lastIndexOf("Opera",0);Ta=!Bb&&(-1!=qc.indexOf("MSIE")||-1!=qc.indexOf("Trident"));vc=!Bb&&-1!=qc.indexOf("WebKit");fc=!Bb&&!vc&&!Ta&&"Gecko"==fc.product}Ta=Ta;fc=fc;vc=vc;a:{qc="";var Ub;if(Bb&&Yb.opera){Bb=Yb.opera.version;qc="function"==typeof Bb?Bb():Bb}else if(fc?(Ub=/rv\:([^\);]+)(\)|;)/):Ta?(Ub=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/):vc&&(Ub=/WebKit\/(\S+)/),Ub)qc=(Bb=Ub.exec(Da()))?
Bb[1]:"";if(Ta){Bb=Ja();if(Bb>parseFloat(qc)){Bb=String(Bb);break a}}Bb=qc}var Qc=Bb,ua={};Bb=(Bb=Yb.document)&&Ta?Ja()||("CSS1Compat"==Bb.compatMode?parseInt(Qc,10):5):void 0;if(fc||Ta){if(Ub=Ta)Ub=Ta&&9<=Bb;Ub||fc&&Ka("1.9.1")}Ta&&Ka("9");var Ha={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\u000b"},eb=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;va.prototype.g=false;va.prototype.dispose=function(){this.g||
(this.g=true,this.v())};va.prototype.v=function(){if(this.h)for(;this.h.length;)this.h.shift()()};A(ja,va);Ta=ja.prototype;Ta.H=1;Ta.p=0;Ta.F=function(D){if(0!=this.p){this.d||(this.d=[]);this.d.push(D)}else{var L=this.a[D];if(L){if(L=this.b[L]){var X=Nb(L,D);0<=X&&rb.splice.call(L,X,1)}delete this.a[D];delete this.a[D+1];delete this.a[D+2]}}};Ta.I=function(D){var L=this.b[D];if(L){this.p++;for(var X=ha(arguments,1),Pa=0,t=L.length;Pa<t;Pa++){var C=L[Pa];this.a[C+1].apply(this.a[C+2],X)}this.p--;
if(this.d&&0==this.p)for(;L=this.d.pop();)this.F(L);return 0!=Pa}return false};Ta.v=function(){ja.A.v.call(this);delete this.a;delete this.b;delete this.d};var db=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),ib=vc,sb=/#|$/,zb={};Ta=b("yt.dom.getNextId_");if(!Ta){Ta=function(){return++yb};s("yt.dom.getNextId_",Ta);var yb=0}var Cb=window.yt&&window.yt.config_||{};s("yt.config_",Cb);s("yt.tokens_",window.yt&&window.yt.tokens_||
{});s("yt.msgs_",window.yt&&window.yt.msgs_||{});Ta=Db.prototype;Ta.type="";Ta.target=null;Ta.relatedTarget=null;Ta.currentTarget=null;Ta.data=null;Ta.keyCode=0;Ta.charCode=0;Ta.altKey=false;Ta.ctrlKey=false;Ta.shiftKey=false;Ta.clientX=0;Ta.clientY=0;Ta.wheelDeltaX=0;Ta.wheelDeltaY=0;var Zb={stopImmediatePropagation:1,stopPropagation:1,preventMouseEvent:1,preventManipulation:1,preventDefault:1,layerX:1,layerY:1,scale:1,rotation:1},yc=b("yt.events.listeners_")||{};s("yt.events.listeners_",yc);var pd=
b("yt.events.counter_")||{count:0};s("yt.events.counter_",pd);var gd={},od=[],Xc=new ja,ld={};Ta=bb.prototype;Ta.Q=function(D,L){this.a.width=D;this.a.height=L;return this};Ta.P=function(){return this.a};Ta.J=function(D){this.j(D.event,D)};Ta.addEventListener=function(D,L){var X=L;"string"==typeof L&&(X=function(){window[L].apply(window,arguments)});Ca(this.g,D,X);Gb(this,D);return this};Ta.destroy=function(){this.a.id&&(gd[this.a.id]=null);var D=this.g;D&&"function"==typeof D.dispose&&D.dispose();
if(this.o){D=this.a;var L=D.parentNode;L&&L.replaceChild(this.o,D)}else(D=this.a)&&D.parentNode&&D.parentNode.removeChild(D);Nc&&(Nc[this.u]=null);this.b=null;D=this.a;var X;for(X in yc)yc[X][0]==D&&Pc(X);this.o=this.a=null};Ta.q=function(){return{}};Ta.j=function(D,L){if(!this.g.g){L={target:this,data:L};this.g.I(D,L);this.h&&Vc(this.h+"."+D,L)}};Ta.G=function(){this.a&&this.a.contentWindow?this.B({event:"listening"}):window.clearInterval(this.d)};Ta.B=function(D){D.id=this.u;var L=[];Ma(new xa,
D,L);D=L.join("");var X=hb(this.a.src);L=X[1];var Pa=X[2],t=X[3];X=X[4];var C="";L&&(C+=L+":");t&&(C+="//",Pa&&(C+=Pa+"@"),C+=t,X&&(C+=":"+X));this.a.contentWindow.postMessage(D,C)};var zd="StopIteration"in Yb?Yb.StopIteration:Error("StopIteration");Tb.prototype.next=function(){throw zd;};Tb.prototype.b=function(){return this};var qd="corp.google.com googleplex.com youtube.com youtube-nocookie.com prod.google.com sandbox.google.com docs.google.com drive.google.com mail.google.com plus.google.com play.google.com googlevideo.com".split(" "),
rd="";new ic;new ic;Ta=Da();Ta=Ta.toLowerCase();if(-1!=Ta.indexOf("android")&&!Ta.match(/android\D*(\d\.\d)[^\;|\)]*[\;\)]/)){fc={cupcake:1.5,donut:1.6,eclair:2,froyo:2.2,gingerbread:2.3,honeycomb:3,"ice cream sandwich":4,jellybean:4.1};vc=[];Bb=0;var mc;for(mc in fc)vc[Bb++]=mc;Ta.match("("+vc.join("|")+")")}mc=Da();Ta=mc.match(/\((iPad|iPhone|iPod)( Simulator)?;/);if(!Ta||2>Ta.length)mc=void 0;else mc=(mc=mc.match(/\((iPad|iPhone|iPod)( Simulator)?; (U; )?CPU (iPhone )?OS (\d_\d)[_ ]/))&&6==mc.length?
Number(mc[5].replace("_",".")):0;0<=mc&&0<=Da().search("Safari")&&Da().search("Version");mc=b("yt.net.ping.workerUrl_")||null;s("yt.net.ping.workerUrl_",mc);A(Bc,Ac);A(cc,Bc);cc.prototype.isAvailable=function(){if(!this.a)return false;try{return this.a.setItem("__sak","1"),this.a.removeItem("__sak"),true}catch(D){return false}};cc.prototype.b=function(D){var L=0,X=this.a,Pa=new Tb;Pa.next=function(){if(L>=X.length)throw zd;var t;t=X.key(L++);if(D)return t;t=X.getItem(t);if(!d(t))throw"Storage mechanism: Invalid value was encountered";
return t};return Pa};cc.prototype.key=function(D){return this.a.key(D)};A(sc,cc);A(dc,cc);(new sc).isAvailable();(new dc).isAvailable();var Nc=null;Ab.prototype.b=function(D){var L;(L=D.origin==Lb(this,"host"))||((L=D.origin)&&L==rd?(L=true):RegExp("^https?://([a-z0-9-]{1,63}\\.)*("+qd.join("|").replace(/\./g,".")+")(:[0-9]+)?([/?#]|$)","i").test(L)?(rd=L,L=true):(L=false));if(L){var X;try{X=ca(D.data)}catch(Pa){return}if(D=Nc[X.id]){D.t=true;D.t&&(Ic(D.s,D.B,D),D.s.length=0);D.J(X)}}};A(Kc,Ab);A(Aa,
bb);Ta=Aa.prototype;Ta.C=function(){return"/embed/"+Lb(this.b,"videoId")};Ta.q=function(){var D;if(Lb(this.b,"playerVars")){D=Lb(this.b,"playerVars");var L={},X;for(X in D)L[X]=D[X];D=L}else D={};return D};Ta.J=function(D){var L=D.event;D=D.info;switch(L){case "apiInfoDelivery":if(f(D))for(var X in D)this.i[X]=D[X];break;case "infoDelivery":tc(this,D);break;case "initialDelivery":window.clearInterval(this.d);this.k={};this.i={};Ob(this,D.apiInterface);tc(this,D);break;default:this.j(L,D)}};Ta.T=function(){var D=
this.a.cloneNode(false),L=this.k.videoData,X=Lb(this.b,"host");D.src=L&&L.video_id?X+"/embed/"+L.video_id:D.src;L=document.createElement("div");L.appendChild(D);return L.innerHTML};Ta.S=function(D){return this.i.namespaces?D?this.i[D].options||[]:this.i.namespaces||[]:[]};Ta.R=function(D,L){if(this.i.namespaces&&D&&L)return this.i[D][L]};A(jc,Ab);A(Ib,bb);Ib.prototype.C=function(){return"/embed/"+Lb(this.b,"videoId")};Ib.prototype.q=function(){return{player:0,thumb_width:Lb(this.b,"thumbWidth"),thumb_height:Lb(this.b,
"thumbHeight"),thumb_align:Lb(this.b,"thumbAlign")}};Ib.prototype.j=function(D,L){Ib.A.j.call(this,D,L?L.info:void 0)};A(Pb,Ab);A(Mb,bb);Ta=Mb.prototype;Ta.C=function(){return"/upload_embed"};Ta.q=function(){var D={},L=Lb(this.b,"webcamOnly");null!=L&&(D.webcam_only=L);return D};Ta.j=function(D,L){Mb.A.j.call(this,D,L);"onApiReady"==D&&xb(this,"hostWindowReady")};Ta.K=function(){xb(this,"setVideoDescription",arguments)};Ta.M=function(){xb(this,"setVideoKeywords",arguments)};Ta.N=function(){xb(this,
"setVideoPrivacy",arguments)};Ta.L=function(){xb(this,"setVideoDraftPrivacy",arguments)};Ta.O=function(){xb(this,"setVideoTitle",arguments)};s("YT.PlayerState.UNSTARTED",-1);s("YT.PlayerState.ENDED",0);s("YT.PlayerState.PLAYING",1);s("YT.PlayerState.PAUSED",2);s("YT.PlayerState.BUFFERING",3);s("YT.PlayerState.CUED",5);s("YT.UploadWidgetEvent.API_READY","onApiReady");s("YT.UploadWidgetEvent.UPLOAD_SUCCESS","onUploadSuccess");s("YT.UploadWidgetEvent.PROCESSING_COMPLETE","onProcessingComplete");s("YT.UploadWidgetEvent.STATE_CHANGE",
"onStateChange");s("YT.UploadWidgetState.IDLE",0);s("YT.UploadWidgetState.PENDING",1);s("YT.UploadWidgetState.ERROR",2);s("YT.UploadWidgetState.PLAYBACK",3);s("YT.UploadWidgetState.RECORDING",4);s("YT.UploadWidgetState.STOPPED",5);s("YT.get",function(D){return gd[D]});s("YT.scan",dd);s("YT.subscribe",function(D,L,X){Ca(Xc,D,L,X);ld[D]=true;for(var Pa in gd)Xb(gd[Pa],D)});s("YT.unsubscribe",function(D,L,X){Xa(D,L,X)});s("YT.Player",Aa);s("YT.Thumbnail",Ib);s("YT.UploadWidget",Mb);bb.prototype.destroy=
bb.prototype.destroy;bb.prototype.setSize=bb.prototype.Q;bb.prototype.getIframe=bb.prototype.P;bb.prototype.addEventListener=bb.prototype.addEventListener;Aa.prototype.getVideoEmbedCode=Aa.prototype.T;Aa.prototype.getOptions=Aa.prototype.S;Aa.prototype.getOption=Aa.prototype.R;Mb.prototype.setVideoDescription=Mb.prototype.K;Mb.prototype.setVideoKeywords=Mb.prototype.M;Mb.prototype.setVideoPrivacy=Mb.prototype.N;Mb.prototype.setVideoTitle=Mb.prototype.O;Mb.prototype.setVideoDraftPrivacy=Mb.prototype.L;
od.push(function(){var D=ad("player");Ic(D,Wc)});od.push(function(){var D=ad("thumbnail");Ic(D,uc)});YTConfig.parsetags&&"onload"!=YTConfig.parsetags||dd();(mc=b("onYTReady"))&&mc();(mc=b("onYouTubeIframeAPIReady"))&&mc();(mc=b("onYouTubePlayerAPIReady"))&&mc()})();steal.loaded("lib/youtube.api.min.js");
steal("jquery/controller","app/tools/common.js","app/controllers/user/settings/settings-feedback.js",function(b){b.Controller("App.Settings.BaseController",{createUploader:function(a){var d=new plupload.Uploader({runtimes:"html5,flash,html4",flash_swf_url:"js/lib/plupload/Moxie.swf",browse_button:a.browseButtonId,file_data_name:a.fileName,multipart_params:a.params||{},url:a.url,init:{PostInit:function(){},FilesAdded:function(f){f.disableBrowse();this.start()},BeforeUpload:function(f,g){if(a.beforeUpload!==
undefined)return a.beforeUpload(f,g)},FileUploaded:function(f,g,k){f.disableBrowse(false);k=b.parseJSON(k.response);a.fileUploaded(k,f)}}});d.init();return d},saveUserSettings:function(a,d,f,g,k){k=k||"/ajax/save-user-settings";Ga.event(["_trackEvent","Settings ","Personal info update"]);b.post(k,{data:f},function(o){var s=new SettingsMessage,A=d.find(".js-message-container");if(o.success){if(App.UserThemesController!==undefined)App.UserThemesController.needRefresh=true;s.showAndHide(LNG["settings.successMsg"],
SettingsMessage.TYPE_SUCCESS,A);g!==undefined&&g(a,o)}else{d&&d.find(".loading").removeClass("enabled");s.showAndHide(o.error,SettingsMessage.TYPE_ERROR,A)}},"json")}},{feedback:null,init:function(){},toggleUserSetting:function(a,d){var f=a.parent(".on-off"),g=a.hasClass("on-switch")?1:0,k=f.data("param");if(f.hasClass("switched-on")&&g===1||f.hasClass("switched-off")&&g===0)return false;f.removeClass("switched-off switched-on");f.addClass(g===1?"switched-on":"switched-off");this.postSettingValue({name:k,
value:g},a,d)},toggleUserSettingCheckbox:function(a,d){var f=a.parent(".js-checkbox-param"),g=null,k=f.data("param");f=f.data("src");g=k=="is_silent_user"||k=="show_disabled_ch_tw_notify"?a:".js-automation-switcher";if(a.hasClass("checked-switcher")){a.removeClass("checked-switcher");b(g).removeClass("switched-on checked-switcher").addClass("switched-off");g=0}else{a.addClass("checked-switcher");b(g).removeClass("switched-off").addClass("switched-on checked-switcher");g=1}k={name:k,value:g};if(f!=
undefined)k.src=f;this.postSettingValue(k,a,d)},postSettingValue:function(a,d,f){var g=this;if(a.name=="show_AW_popup_theme_6_7")Ga.event(["_trackEvent","Settings ","Show welcoming pop-up ("+(a.value?"ON":"OFF")+")"]);b.post("/ajax/save-settings-value",a,function(k){if(f!==undefined){!a.value&&a.name=="change_tweets"&&g.getFeedbackController().getFeedback(a);f(k,d)}},"json")},getFeedbackController:function(){if(!this.feedback)this.feedback=new SettingsFeedback(".js-went-wrong-popup");return this.feedback},
prepareEditableData:function(a){var d={},f=0,g=false,k=a.find(".js-edit-input, .js-edit-textarea");k.removeClass("input-error");k.each(function(){var o=b(this).data("input"),s=b(this).data("field");o=b("[data-text='"+o+"']");var A=new SettingsMessage;b(this).val(b(this).val().replace(/^\s+|\s+$/g,""));if(b(this).val()===""&&b(this).data("required")==1){A.showAndHide(LNG["messages.emptyValue"],SettingsMessage.TYPE_ERROR,a.find(".js-message-container"),b(this));g=true;return false}if(b(this).data("stringlimit")==
1&&b(this).val().length>b(this).data("maxlength")){b(this).data("maxlength")==30&&A.showAndHide(LNG["messages.maxLength30"],SettingsMessage.TYPE_ERROR,a.find(".js-message-container"),b(this));b(this).data("maxlength")==255&&A.showAndHide(LNG["messages.maxLength255"],SettingsMessage.TYPE_ERROR,a.find(".js-message-container"),b(this));g=true;return false}if(b(this).val()==o.text())f++;else d[s]=b(this).val()});if(g)return false;if(f==k.length){a.find(".js-cancel-edit").click();return false}return d},
removeNonUniqueElements:function(a,d){var f=[];a.each(function(){var g=b(this),k=g.val();if(!k||b.inArray(k,f)!=-1){g.attr("disabled",true);g.slideUp(function(){d!==undefined&&d.call(g);g.parent().remove()})}else f.push(k)})},".js-promo-descr keyup":function(a){b(".js-promo-string-limit").css("display","inline-block");this.textLimitCounter(a,".js-promo-string-limit",120)},".js-personal-descr keyup":function(a){b(".js-personal-string-limit").css("display","inline-block");this.textLimitCounter(a,".js-personal-string-limit",
255)},textLimitCounter:function(a,d,f){a.val();var g=a.val().length;b(d).html(g+"/"+f);if(g>f){d=a.val();a.val(d.substring(0,f))}},".js-enter-input keypress":function(a,d){if(d.which==13){a=a.parent().find(".js-enter-trigger");if(a.length){d.stopPropagation();a.trigger("click");d.preventDefault()}}},".js-edit-editable click":function(a){var d=false,f=new SettingsMessage,g=this.find(".js-editable-item");b.ajax({url:"/ajax/check-is-logged",type:"post",success:function(s){if(s.error){f.showAndHide(s.error,
SettingsMessage.TYPE_ERROR,g.find(".js-message-container"));d=true}},async:false});if(d)return false;if(a.hasClass("disabled"))return false;a=a.closest(".js-editable-item");var k=a.find(".js-editable-input-wrapper"),o=a.find(".js-editable-text-wrapper");a.find(".js-input-text, .js-textarea-text").each(function(){var s=b(this).data("text"),A=b(this).text().replace(/^\s+|\s+$/g,"");b("[data-input='"+s+"']").val(A).removeClass("error")});o.hide();k.show();k.find(".js-edit-input, .js-edit-textarea").first().focus()},
".js-cancel-edit click":function(a){a=a.closest(".js-editable-item");var d=a.find(".js-editable-input-wrapper"),f=a.find(".js-editable-text-wrapper");d.hide();f.show();a.find(".js-message-container").hide()},".on-off a click":function(a){this.toggleUserSetting(a)},".js-checkbox-trigger click":function(a,d){this.toggleUserSettingCheckbox(a,function(){(new SettingsMessage).showAndHide(LNG["settings.successMsg"],SettingsMessage.TYPE_SUCCESS,a.closest(".js-checkbox-param").find(".js-message-container"))});
d.stopImmediatePropagation()},".js-checkbox-label click":function(a,d){a.closest(".js-checkbox-param").find(".js-checkbox-trigger").trigger("click");d.stopImmediatePropagation()}})});steal.loaded("app/controllers/user/settings/base.js");
steal("app/controllers/user/settings/base.js","app/models/promo_settings.js",function(b){App.Settings.BaseController("App.Settings.PromoController",{promoModel:null,message:null,init:function(a,d){this.message=new SettingsMessage;this.promoModel=new Theme.Models.Promo.Settings(d);this.tempPromoModel=new Theme.Models.Promo.Settings(d);this.attachPasteHandler()},"{Theme.Models.Promo.Settings} created":function(){this.message.showAndHide("Default promo saved",Message.TYPE_SUCCESS,".js-promo-save-url-message")},
checkURL:function(a){if(a.length===0)return false;/^(https?|ftp|file):\/?\/?/i.test(a)||(a="http://"+a);return a},attachPasteHandler:function(){var a=this;b(".js-fetch-url").on("paste",function(){setTimeout(function(){a.find(".js-promo-url-submit").trigger("click")},100)})},".js-fetch-url keypress":function(a,d){d.which==13&&this.find(".js-promo-url-submit").trigger("click")},".js-promo-url-submit click":function(a){Ga.event(["_trackEvent","Settings ","Promo add link"]);this.getUrlData(a)},".js-save-promo click":function(){var a=
{title:this.find(".js-edit-input").val(),description:this.find(".js-edit-textarea").val()},d=this.find(".js-buttons"),f=this.find(".js-editable-item .loading"),g=this;d.hide();f.addClass("enabled");this.savePromoModel(a,function(){f.removeClass("enabled");d.show();g.find(".js-cancel-edit").trigger("click")})},".js-remove-promo-settings click":function(a){var d=this.find(".js-editable-item .loading"),f=this.find(".js-editable-item .js-edit-editable"),g=this,k=false;b.ajax({url:"/ajax/check-is-logged",
type:"post",success:function(o){if(o.error){g.message.showAndHide(o.error,SettingsMessage.TYPE_ERROR,g.find(".js-message-container"));k=true}},async:false});if(k)return false;if(a.hasClass("disabled"))return false;b(a,f).addClass("disabled");d.addClass("enabled");Ga.event(["_trackEvent","Settings ","Promo delete link"]);b.get("/ajax/delete-settings-promo",function(o){b(a,f).removeClass("disabled");if(o.success){if(App.UserThemesController!==undefined)App.UserThemesController.needRefresh=true;b(".js-promo-fetch").show();
g.find(".js-editable-item > div").hide()}})},getUrlData:function(a){var d=a.closest(".js-promo-fetch").find(".loading"),f=b(".js-fetch-url"),g=this.checkURL(f.val()),k=this,o=false;b.ajax({url:"/ajax/check-is-logged",type:"post",success:function(s){if(s.error){k.message.showAndHide(s.error,SettingsMessage.TYPE_ERROR,k.find(".js-message-container"),f);o=true}},async:false});if(o)return false;if(g===false){this.message.showAndHide("URL can not be empty",SettingsMessage.TYPE_ERROR,this.find(".js-message-container"),
f);return false}a.hide();d.addClass("enabled");this.tempPromoModel.getUrlData(g,function(s){a.show();d.removeClass("enabled");if(s.error!==undefined){b(".js-fetch-url").focus().addClass("error");k.message.showAndHide(s.error,SettingsMessage.TYPE_ERROR,k.find(".js-message-container"),f)}else k.savePromoModel(s,function(){k.find(".js-cancel-edit").trigger("click");k.find(".js-fetch-url").val("");b(".js-promo-fetch").hide()})})},savePromoModel:function(a,d){var f=this;if(this.promoModel.title==a.title&&
this.promoModel.description==a.description){d!==undefined&&d();return true}b.extend(this.promoModel,this.tempPromoModel);this.promoModel.attr("link_id",null);this.promoModel.attr("title",a.title);this.promoModel.attr("description",a.description);if(a.update!==undefined)this.promoModel.isNew=function(){return false};this.promoModel.save(function(g){if(g.success===true){if(App.UserThemesController!==undefined)App.UserThemesController.needRefresh=true;f.render(f.promoModel)}else{f.message.showAndHide(g.error,
Message.TYPE_ERROR,".js-promo-error-container",".js-fetch-url");b(".js-url").addClass("error")}d!==undefined&&d()})},render:function(){b(".js-promo-image").attr("src",this.promoModel.image);b(".js-promo-title").html(this.promoModel.title);b(".js-promo-description").html(this.promoModel.description)}})});steal.loaded("app/controllers/user/settings/promo_settings.js");
steal("jquery/controller","app/tools/settings-message.js","app/models/promo_settings.js",function(b){App.Settings.BaseController("App.Settings.PollController",{message:new SettingsMessage,_ERROR:SettingsMessage.TYPE_ERROR,_SUCCESS:SettingsMessage.TYPE_SUCCESS,".js-customize-poll click":function(a){a.hide();this.find(".js-poll").show();this.find(".js-edit-editable").click()},".js-save-poll-question click":function(a){var d=a.closest(".js-editable-item"),f=d.find(".js-edit-textarea"),g=d.find(".js-editable-input-wrapper"),
k=d.find(".js-editable-text-wrapper"),o=d.find(".buttons"),s=d.find(".loading");a={};var A=this;a=this.prepareEditableData(d);if(a===false)return false;o.hide();s.addClass("enabled");Ga.event(["_trackEvent","Settings ","Poll edit"]);b.post("/ajax/save-poll-default-settings",{question:a.question,answers:this.getAnswers()},function(G){s.removeClass("enabled");o.show();if(G.success){if(App.UserThemesController!==undefined)App.UserThemesController.needRefresh=true;d.find(".js-input-text").text(f.val());
d.find(".js-remove-poll").show();g.hide();k.show();A.message.showAndHide(LNG["settings.successMsg"],A._SUCCESS,d.find(".js-message-container"))}else A.message.showAndHide(G.error,A._ERROR,d.find(".js-message-container"),f)},"json")},".js-remove-poll click":function(a){var d=a.closest(".js-editable-item"),f=d.find(".loading"),g=this,k=d.find(".js-message-container");f.addClass("enabled");b.post("/ajax/remove-poll-default-settings",{},function(o){f.removeClass("enabled");if(o.success){if(App.UserThemesController!==
undefined)App.UserThemesController.needRefresh=true;g.find(".js-answer-row").not(".mock, .empty").remove();g.find(".js-input-text").text("What do you think about this page?");d.find(".js-remove-poll").hide();g.find(".js-customize-poll").show();g.find(".js-poll").hide()}else g.message.showAndHide(o.error,g._ERROR,d.find(".js-message-container"),k)})},".js-add-answer click":function(a){var d=a.closest(".js-answer-row"),f=d.find(".js-answer-input"),g=d.find(".loading"),k=d.find(".js-message-container"),
o=this;f.val(f.val().replace(/^\s+|\s+$/g,""));if(f.val()===""){this.message.showAndHide(LNG["poll.emptyAnswer"],this._ERROR,k,f);return false}if(f.val().length>255){this.message.showAndHide(LNG["poll.ownAnswer.tooLong"],this._ERROR,k,f);return false}a.hide();g.addClass("enabled");Ga.event(["_trackEvent","Settings ","Poll edit"]);b.post("/ajax/add-default-poll-answer",{answer:f.val()},function(s){g.removeClass("enabled");if(s.success){if(App.UserThemesController!==undefined)App.UserThemesController.needRefresh=
true;o.find(".js-remove-poll").show();d.find(".js-message-container").hide();d.find(".js-answer-input").remove();d.find(".js-add-answer").remove();s=b("<a/>",{"class":"delete-x js-delete-answer",title:LNG["delete"],text:"delete"});d.prepend(s);d.prepend(b("<p/>",{text:f.val()}));d.removeClass("empty").css("background-color","#FFFBD0").animate({backgroundColor:"#fff"},2E3);o.addAnswerRow()}else{a.show();o.message.showAndHide(s.error,o._ERROR,d.find(".js-message-container"),f)}})},".js-delete-answer click":function(a){var d=
a.closest(".js-answer-row"),f=d.find(".loading"),g=this,k=d.find(".js-message-container");a.hide();f.addClass("enabled");var o=this.getAnswerIndex(d);b.post("/ajax/remove-default-poll-answer",{index:o},function(s){f.removeClass("enabled");if(s.success){if(App.UserThemesController!==undefined)App.UserThemesController.needRefresh=true;d.remove()}else{a.show();g.message.showAndHide(s.error,g._ERROR,k)}})},getAnswerIndex:function(a){return b(".poll-answers-holder .js-answer-row").index(a)},getAnswers:function(){var a=
[];this.find(".js-answer-row p").each(function(){a.push(b(this).text())});return a},addAnswerRow:function(){var a=this.find(".js-poll-answers .empty").not(".mock");if(a.length!==0)a.last().find(".js-domain-input").focus();else{a=this.find(".js-poll-answers .mock").clone().removeClass("mock");this.find(".js-poll-answers .mock").before(a);a.find(".js-answer-input").focus()}}})});steal.loaded("app/controllers/user/settings/poll.js");
steal("app/controllers/user/settings/base.js",function(b){App.Settings.BaseController("App.Settings.RSSController",{init:function(){this.message=new SettingsMessage;this.attachPasteHandler()},checkURL:function(a){if(a.length===0)return false;/^(https?|ftp|file):\/?\/?/i.test(a)||(a="http://"+a);return a},attachPasteHandler:function(){var a=this;b(".js-fetch-rss").on("paste",function(){setTimeout(function(){a.find(".js-rss-url-submit").trigger("click")},100)})},".js-fetch-rss keypress":function(a,
d){d.which==13&&this.find(".js-rss-url-submit").trigger("click")},".js-rss-url-submit click":function(a){var d=this.find(".js-fetch-rss"),f=d.val(),g=new SettingsMessage,k=this.find(".js-message-container"),o=this.find(".loading"),s=this;if(f===false){g.showAndHide("URL can not be empty",SettingsMessage.TYPE_ERROR,k,d);return false}a.hide();o.addClass("enabled");b.post("/ajax/get-rss-feed",{url:f},function(A){o.removeClass("enabled");if(A.success){d.val("");s.render(A.data);s.find(".js-cancel-edit").trigger("click");
g.showAndHide(LNG["settings.successMsg"],SettingsMessage.TYPE_SUCCESS,k);hihit(2932)}else{a.show();d.focus();g.showAndHide(A.error,SettingsMessage.TYPE_ERROR,k,d)}},"json")},".js-save-rss click":function(){var a={title:this.find(".js-edit-input").val(),description:this.find(".js-edit-textarea").val()},d=this.find(".js-buttons"),f=this.find(".js-editable-item .loading"),g=new SettingsMessage,k=this.find(".js-message-container"),o=this;d.hide();f.addClass("enabled");b.post("/ajax/save-rss-feed",{data:a},
function(s){f.removeClass("enabled");d.show();if(s.success){o.find(".js-rss-title").text(a.title);o.find(".js-rss-description").text(a.description);o.find(".js-cancel-edit").trigger("click")}else g.showAndHide(s.error,SettingsMessage.TYPE_ERROR,k)})},".js-remove-rss click":function(a){var d=this.find(".js-editable-item .loading"),f=this.find(".js-editable-item .js-edit-editable"),g=new SettingsMessage,k=this.find(".js-message-container"),o=this;if(a.hasClass("disabled"))return false;b(a,f).addClass("disabled");
d.addClass("enabled");b.get("/ajax/delete-rss",function(s){b(a,f).removeClass("disabled");if(s.success){b(".js-rss-fetch").show();o.find(".js-editable-item > div").hide()}else g.showAndHide(s.error,SettingsMessage.TYPE_ERROR,k)})},render:function(a){this.find(".js-rss-title").text(a.feed.title);this.find(".js-rss-description").text(a.feed.description);this.find(".js-rss-feed-data").html(a.items);this.find(".js-rss-fetch").hide();this.find(".js-rss-box").show()}})});steal.loaded("app/controllers/user/settings/rss.js");
steal("jquery/controller","app/tools/settings-message.js","app/popups/secondary-popup.js",function(b){App.SecondaryPopup("App.Settings.Popup.PhotoUpload",{counters:{add_avatar:2638},_ERROR:SettingsMessage.TYPE_ERROR,_SUCCESS:SettingsMessage.TYPE_SUCCESS,showCustomHeader:true,_addClass:"popup-upload-img",init:function(){this.ajaxFormsInit();this.initUploaders()},"{window} keydown":function(a,d){d.keyCode==27&&this.hideJcropPreview()},".js-delete-avatar click":function(a,d){var f=this;d.preventDefault();
if(a.hasClass("disabled"))return false;var g=a.closest(".upload-container").find(".loading");a.addClass("disabled");g.addClass("enabled");b.post("/ajax/remove-custom-avatar",{},function(k){a.removeClass("disabled");g.removeClass("enabled");if(k.success){if(App.UserThemesController!==undefined)App.UserThemesController.needRefresh=true;b(".js-user-avatar").attr("src",k.avatar.big);PopupSM.closeActive()}else(new SettingsMessage).showAndHide(k.error,f._ERROR,a.parent().find(".js-message-container"))},
"json")},initUploaders:function(){var a=this;this._uploaders=[this.createUploader({browseButtonId:"change-avatar-btn",fileName:"avatar",url:"/user/user-avatar-preview",fileUploaded:function(d){var f=b("#change-avatar-btn");f.removeClass("disabled");if(d.success){f=b("#jcrop-preview");var g=f.find(".insider");f.addClass("loading").show();g.empty().append(d.preview);a.rescalePopupPreview();a.cropInit(300,300,100,100,400,400);b(".js-upload-avatar").ajaxForm({success:function(k){a.cropSubmitResponse(k)}})}else(new SettingsMessage).showAndHide(d.error,
a._ERROR,f.parent().find(".js-message-container"))}})]},cropInit:function(a,d,f,g,k,o){var s,A,G,H,V=b("#jcrop-preview .insider").find("#cropbox");G=V.attr("width");H=V.css("height");V.Jcrop({onChange:this.cropSaveCoordinates,onSelect:this.cropSaveCoordinates,aspectRatio:a/d,setSelect:[f,g,k,o],addClass:"jcrop_custom",bgColor:"#333333",bgOpacity:0.5,sideHandles:false,allowSelect:false,allowMove:true,allowResize:true,minSize:[160,160],keySupport:false},function(){s=this;A=s.getBounds();G=A[0];H=A[1]});
return true},rescalePopupPreview:function(){var a=b("#jcrop-preview"),d=this,f=a.find(".insider"),g=f.find(".crop-preview"),k=g.outerHeight(),o=k+60+51,s=b("#jcrop-preview").detach(),A=b("body");s.css({height:A.outerHeight()+"px"});A.append(s);o=Math.max(0,(b(window).height()-o)/3+b(window).scrollTop());f.animate({height:k+60+51+"px",top:o+"px",left:Math.max(0,(b(window).width()-f.outerWidth())/2)+"px"},500,function(){a.removeClass("loading");g.removeClass("hidden")});b(window).resize(function(){d.repositionPopupPreview()});
s.mousedown(function(G){G.target==G.currentTarget&&d.hideJcropPreview()})},repositionPopupPreview:function(){var a=b("#jcrop-preview").find(".insider"),d=a.find(".crop-preview").outerHeight()+60+51+"px";a.css({top:Math.max(0,(b(window).height()-d)/2)+"px",left:Math.max(0,(b(window).width()-a.outerWidth())/2)+"px"})},cropSaveCoordinates:function(a){if(parseInt(a.w,10)>0){b("#CropParams_x").val(a.x);b("#CropParams_y").val(a.y);b("#CropParams_w").val(a.w);b("#CropParams_h").val(a.h);b("#CropParams_x2").val(a.x2);
b("#CropParams_y2").val(a.y2);return true}return false},ajaxFormsInit:function(){var a=this;b("#jcrop-preview").on("click",".js-submit-crop",function(){if(b(this).hasClass("disabled"))return false;b("#jcrop-preview .buttons-holder").addClass("loading");b(this).addClass("disabled");b(this).closest(".crop-preview").find("form").submit()});b("#jcrop-preview").on("click",".js-cancel-crop",function(){a.hideJcropPreview()})},hideJcropPreview:function(){b("#jcrop-preview").animate({opacity:0},500,function(){b(this).hide();
b(this).css("opacity",1)})},cropSubmitResponse:function(a){var d=b("#jcrop-preview"),f=this;d.find(".js-submit-crop").removeClass("disabled");d.find(".buttons-holder").removeClass("loading");d.animate({opacity:0},500,function(){f.hideJcropPreview();if(a.success){if(App.UserThemesController!==undefined)App.UserThemesController.needRefresh=true;b(".js-user-avatar").attr("src",a.avatar.big);f.processAvatarCounter();f.hide()}else(new SettingsMessage).showAndHide(a.error,f._ERROR,".socials .js-message-container")})},
processAvatarCounter:function(){this.counters.add_avatar!==undefined&&hihit(this.counters.add_avatar)},createUploader:function(a){var d=new plupload.Uploader({runtimes:"html5,flash,html4",flash_swf_url:"js/lib/plupload/Moxie.swf",browse_button:a.browseButtonId,file_data_name:a.fileName,url:a.url,init:{PostInit:function(){},FilesAdded:function(f){f.disableBrowse();this.start()},BeforeUpload:function(f,g){if(a.beforeUpload!==undefined)return a.beforeUpload(f,g)},FileUploaded:function(f,g,k){f.disableBrowse(false);
k=b.parseJSON(k.response);a.fileUploaded(k,f)}}});d.init();return d}})});steal.loaded("app/controllers/user/settings/popups/photo-upload.js");
steal("jquery/controller",function(b){b.Controller("SettingsFeedback",{getFeedback:function(a){if(a.src=="settings"){this.element.removeClass("top-arrow").addClass("left-arrow");var d=b(".js-checkbox-label-automation").offset();a=d.top-b(window).scrollTop();d=d.left-b(window).scrollLeft();this.element.css("top",a-78);this.element.css("left",d+160)}else{d=b(".js-automation-switcher-label").offset();a=d.top-b(window).scrollTop();d=d.left-b(window).scrollLeft();this.element.css("top",a+30);this.element.css("left",
d-180)}this.show()},".close-x click":function(){this.close()},close:function(){b(".overlay-blind").hide();this.element.hide();b(".answer-variants").find(".selected").removeClass("selected");b(".self-answer").val("");this.element.removeClass("editing")},show:function(){b(".overlay-blind").show();this.element.show()},".answer-variants li label click":function(a){b(".answer-variants").find(".selected").removeClass("selected");a.parent().addClass("selected");this.element.addClass("editing")},".self-answer input":function(a){var d=
b(".answer-variants").find(".selected");if(a.val().length)this.element.addClass("editing");else!a.val().length&&!d.length&&this.element.removeClass("editing")},".js-send-feedback click":function(){var a={},d=this,f=b(".answer-variants").find(".selected").find(".variant").text(),g=b(".self-answer").val();if(f.length)a.answer=f;if(g.length)a.self_answer=g;if(f||g){hihit(3568);b.post("/ajax/save-feedback",a,function(k){k.success&&d.close()},"json")}}})});steal.loaded("app/controllers/user/settings/settings-feedback.js");
steal("jquery/model","jquery/model/list","jquery/model/validations","app/models/promo.js",function(){Theme.Models.Promo("Theme.Models.Promo.Settings",{create:"POST /ajax/create-settings-promo",update:"POST /ajax/update-promo-data",destroy:"POST /ajax/delete-settings-promo"},{})});steal.loaded("app/models/promo_settings.js");
steal("jquery/model").then(function(b){var a=function(d,f,g){if(!g){g=f;f={}}f=f||{};d=b.makeArray(d);if(!(f.testIf&&!f.testIf.call(this))){var k=this;b.each(d,function(o,s){k.validations[s]||(k.validations[s]=[]);k.validations[s].push(function(){var A=g.call(this,this[s]);return A===undefined?undefined:f.message||A})})}};b.extend(b.Model,{validate:a,validationMessages:{format:"is invalid",inclusion:"is not a valid option (perhaps out of range)",lengthShort:"is too short",lengthLong:"is too long",
presence:"can't be empty",range:"is out of range"},validateFormatOf:function(d,f,g){a.call(this,d,g,function(k){if(typeof k!="undefined"&&k!=""&&String(k).match(f)==null)return this.Class.validationMessages.format})},validateInclusionOf:function(d,f,g){a.call(this,d,g,function(k){if(typeof k!="undefined")if(b.grep(f,function(o){return o==k}).length==0)return this.Class.validationMessages.inclusion})},validateLengthOf:function(d,f,g,k){a.call(this,d,k,function(o){if(typeof o=="undefined"&&f>0||o.length<
f)return this.Class.validationMessages.lengthShort+" (min="+f+")";else if(typeof o!="undefined"&&o.length>g)return this.Class.validationMessages.lengthLong+" (max="+g+")"})},validatePresenceOf:function(d,f){a.call(this,d,f,function(g){if(typeof g=="undefined"||g==""||g===null)return this.Class.validationMessages.presence})},validateRangeOf:function(d,f,g,k){a.call(this,d,k,function(o){if(typeof o!="undefined"&&o<f||o>g)return this.Class.validationMessages.range+" ["+f+","+g+"]"})}})});steal.loaded("jquery/model/validations/validations.js");
steal("jquery/model","jquery/model/list","jquery/model/validations",function(){$.Model("Theme.Models.Promo",{init:function(){},create:"POST /ajax/create-promo-data",update:"POST /ajax/update-promo-data",destroy:"POST /ajax/delete-promo-data"},{setSourceUrl:function(b){b!=null&&$(".js-url").val(b);return b},setDescription:function(b){if(b)return $.strip_tags(b);return b},delete_promo:function(b,a){this.clearAttr();var d=this;$.post("/ajax/delete-promo-data",{use_default:b?1:0,id:this.id,link_id:this.link_id}).done(function(f){if($.isPlainObject(f)){d.attr("id",
f.id);d.attr("description",f.description);d.attr("title",f.title);d.attr("image",f.image);d.attr("source_url",f.source_url)}a&&typeof a=="function"&&a(f,d)})},clearAttr:function(){this.removeAttr("description");this.removeAttr("image");this.removeAttr("title");this.removeAttr("domain")},getUrlData:function(b,a){var d=this;$.get("/ajax/get-meta-data",{source_url:b}).done(function(f){if(!f.error){d.attr("description",f.description);d.attr("title",f.title);d.attr("image",f.image);d.attr("source_url",
f.source_url)}a(f)})}})});steal.loaded("app/models/promo.js");
steal("app/popups/secondary-popup.js",function(b){App.SecondaryPopup("App.Settings.Popup.ThemePreview",{_addClass:"popup-themes-preview",themeId:null,colorScheme:null,title:"",init:function(){var a=this;b("#hidden .js-theme-image").on("load",function(){var d=b(".js-theme-preview"),f=d.find(".loading"),g=b(".popup-holder."+a._addClass),k=this,o=b(this).outerWidth(),s=b(this).outerHeight(),A=Math.max(50,(b(window).height()-s)/2)+"px";g.animate({top:A,marginLeft:-(o/2)},500);d.animate({width:o,height:s},
500,function(){f.removeClass("enabled");b("#image-wrapper").append(b(k).clone());g.addClass("clear")})})},onShow:function(){PopupSM.setHeader(this.title);var a=b(".js-theme-preview").find(".loading"),d=b("#hidden .js-theme-image");b("#image-wrapper").empty();a.addClass("enabled");b.post("/ajax/get-theme-preview",{themeId:this.themeId,colorScheme:this.colorScheme},function(f){if(f.success)d.attr("src")==f.image?d.trigger("load"):d.attr("src",f.image)})},onHide:function(){b(".js-theme-preview").css({width:"200px",
height:"200px"});b(".popup-holder."+this._addClass).removeClass("clear")}})});steal.loaded("app/controllers/user/settings/popups/theme-preview.js");
steal("app/popups/secondary-popup.js",function(b){App.SecondaryPopup("App.Settings.Popup.ThemeChooseColor",{_title:LNG["popups.choose_theme_color.title"],_selector:".js-theme-choose-color",_addClass:"choose-color-theme-popup",themeId:null,selectedSchemeName:null,selectedSchemeKey:null,selectedSchemeSrc:null,triggerElement:null,counters:{11:{change_color_white:2639,change_color_blue:2640,change_color_black:2641,change_color_custom:2642},12:{change_color_white:2650,change_color_blue:2651,change_color_black:2652,
change_color_custom:2653}},setThemeId:function(a){if(a!==this.themeId)this.themeId=a;return this},setTriggerElement:function(a){this.triggerElement=a;return this},init:function(){this.initUploaders()},onShow:function(){this.selectedSchemeSrc=this.selectedSchemeKey=null;this.selectedThemeId=this.themeId;this.find(".js-theme-colors-block").hide();var a=this.find('.js-theme-colors-block[data-theme-id="'+this.selectedThemeId+'"]');a.show();this.selectedSchemeName=a.find(".js-color.active .js-skin").data("color-name")},
onHide:function(){this.triggerElement.html("&nbsp;"+this.selectedSchemeName+"&nbsp;");if(this.selectedSchemeKey&&this.selectedSchemeSrc){var a=this.triggerElement.closest(".js-theme");a.data("color-name",this.selectedSchemeKey);a.find(".theme-thumbnail").attr("src",this.selectedSchemeSrc)}},initUploaders:function(){var a=this;b(".js-custom-bg-trigger").each(function(){var d=b(this).find("a");App.Settings.BaseController.createUploader({browseButtonId:"use-custom-bg-"+d.closest(".js-theme-colors-block").data("theme-id"),
url:"/user/upload-custom-background",fileName:"bg",params:{themeId:d.closest(".js-theme-colors-block").data("theme-id")},beforeUpload:function(){Ga.event(["_trackEvent","Settings ","Themes change color"]);d.addClass("loading")},fileUploaded:function(f){d.removeClass("loading");if(f.success){var g=d.closest(".js-theme-colors-block");g.find(".js-color.active").removeClass("active");g.find(".js-custom .js-holder").append(b("<img />",{"class":"js-skin custom-skin",src:f.background.preview,"data-color-name":LNG["themes.colors.custom"]}));
f=d.closest(".js-color");f.addClass("active");f.find(".js-custom-bg-trigger").hide();f.find(".js-delete-custom-skin").show();a.selectedSchemeName=LNG["themes.colors.custom"];a.processColorSchemeCounter("custom")}else(new SettingsMessage).showAndHide(f.error,SettingsMessage.TYPE_ERROR,d.closest(".js-theme-colors-block").find(".js-message-container"))}})})},".js-skin click":function(a,d){d.preventDefault();d={};var f=a.closest(".js-theme-colors-block"),g=a.closest(".js-color"),k=this;if(g.hasClass("active"))return true;
Ga.event(["_trackEvent","Settings ","Themes change color"]);d.theme=f.data("theme-id");if(a.hasClass("custom-skin"))d.uploaded_background=1;else d.color=a.data("color-value");this.selectedSchemeName=a.data("color-name");this.selectedSchemeSrc=a.attr("src");this.selectedSchemeKey=a.data("color-key");App.Settings.BaseController.saveUserSettings(a,f,d,function(){f.find(".js-color").removeClass("active");g.addClass("active");k.processColorSchemeCounter()},"/ajax/save-user-themes-settings")},".js-delete-custom-skin click":function(a,
d){d.preventDefault();if(a.hasClass("disabled"))return true;a.addClass("disabled loading");var f=a.closest(".js-theme-colors-block");d={uploaded_background:0,theme:f.data("theme-id"),selected_scheme_key:this.selectedSchemeKey?this.selectedSchemeKey:"custom"};var g=a.closest(".js-color"),k=this;App.Settings.BaseController.saveUserSettings(a,f,d,function(o){var s=f.find(".js-color.active");o.removeClass("disabled loading").hide();if(s.hasClass("js-custom")){f.find(".js-color").removeClass("active");
o=f.find(".js-color:first");o.addClass("active");k.selectedSchemeName=o.find(".js-skin").data("color-name");k.selectedSchemeKey=o.find(".js-skin").data("color-key");k.processColorSchemeCounter()}g.find(".js-skin").remove();g.find(".js-custom-bg-trigger").show()},"/ajax/save-user-themes-settings")},processColorSchemeCounter:function(a){a=a||this.selectedSchemeKey||"custom";this.counters[this.themeId]!==undefined&&this.counters[this.themeId]["change_color_"+a]!==undefined&&hihit(this.counters[this.themeId]["change_color_"+
a])}})});steal.loaded("app/controllers/user/themes/popups/theme-choose-color.js");steal("jquery/controller","app/show/likes.js",function(){App.Show.Likes("App.Show.Theme1.Likes",{},{init:function(){this._super();this.animateLikes()}})});steal.loaded("app/show/theme1/likes.js");steal("jquery/controller","app/show/likes.js",function(){App.Show.Likes("App.Show.Theme2.Likes",{},{init:function(){this._super();this.animateLikes()}})});steal.loaded("app/show/theme2/likes.js");
steal("jquery/controller","app/show/likes.js",function(){App.Show.Likes("App.Show.Theme4.Likes",{},{".js-like, .js-dislike click":function(b,a){this._super(b,a);b.addClass("onclick");setTimeout(function(){b.removeClass("onclick")},100)}})});steal.loaded("app/show/theme4/likes.js");
steal("jquery/controller","app/show/poll.js",function(){App.Show.Poll("App.Show.Theme4.Poll",{defaults:{onchange:function(){}}},{isShowed:false,init:function(){this._super();LinkData.delayedActionComplete=="vote"&&Registry.getController("share_answer").setCaption(this._getVotedAnswerString()).show()},show:function(){var b=this.find(".show-poll"),a=this.element.closest(".hider");a.length||(a=this.find(".hider"));a.slideDown(Registry.getController("show").defaultSlideSpeed,function(){b.text(LNG["poll.hidePoll"])});
this.isShowed=true},hide:function(){var b=this.find(".show-poll"),a=this.element.closest(".hider");a.length||(a=this.find(".hider"));a.slideUp(Registry.getController("show").defaultSlideSpeed,function(){b.text(LNG["poll.showPoll"])});this.isShowed=false},toggle:function(){this[this.isShowed?"hide":"show"]()},mouseenter:function(){},mouseleave:function(){},".checkbox click":function(b,a){this.resultMode||this._super(b,a)},".add-answer textarea focus":function(){},".js-show-add-ans click":function(b,
a){a.preventDefault();this.showAddAnswer()},".js-unvote-btn click":function(b,a){a.preventDefault();this.unvote()},".show-voters-btn click":function(){},".votes-quant click":function(b,a){a.preventDefault()},onchange:function(b){if(b.stat)this.find(".votes-num, .js-votes-num").html(b.stat.numVotes||0);this.options.onchange(b)},applyScrolling:function(){var b=this.find(".hider"),a=b.is(":visible");a||b.show();var d=this.find(".options");d.css("visibility","auto");this.scrollApi=d.jScrollPane().data("jsp");
a||b.hide()},_scrollToAnswer:function(){},_getVotedAnswerString:function(){return this.find(".answer-item.checked .answer-text").html()},showAnswerError:function(b,a){var d=new Message;a=this.forceFormMode==true?a.find(".js-poll-answer-msg"):".js-message-container";d.showAndHide(b,Message.TYPE_ERROR,a)}})});steal.loaded("app/show/theme4/poll.js");
(function(b,a){function d(o,s){var A,G,H,V=o.nodeName.toLowerCase();return"area"===V?(A=o.parentNode,G=A.name,!o.href||!G||A.nodeName.toLowerCase()!=="map"?false:(H=b("img[usemap=#"+G+"]")[0],!!H&&f(H))):(/input|select|textarea|button|object/.test(V)?!o.disabled:"a"===V?o.href||s:s)&&f(o)}function f(o){return b.expr.filters.visible(o)&&!b(o).parents().andSelf().filter(function(){return b.css(this,"visibility")==="hidden"}).length}var g=0,k=/^ui-id-\d+$/;b.ui=b.ui||{};if(!b.ui.version){b.extend(b.ui,
{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({_focus:b.fn.focus,focus:function(o,s){return typeof o=="number"?this.each(function(){var A=this;setTimeout(function(){b(A).focus();s&&s.call(A)},o)}):this._focus.apply(this,arguments)},scrollParent:function(){var o;
return b.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?(o=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.css(this,"position"))&&/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0)):(o=this.parents().filter(function(){return/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0)),/fixed/.test(this.css("position"))||!o.length?b(document):
o},zIndex:function(o){if(o!==a)return this.css("zIndex",o);if(this.length){o=b(this[0]);for(var s;o.length&&o[0]!==document;){s=o.css("position");if(s==="absolute"||s==="relative"||s==="fixed"){s=parseInt(o.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}o=o.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++g)})},removeUniqueId:function(){return this.each(function(){k.test(this.id)&&b(this).removeAttr("id")})}});b.extend(b.expr[":"],{data:b.expr.createPseudo?
b.expr.createPseudo(function(o){return function(s){return!!b.data(s,o)}}):function(o,s,A){return!!b.data(o,A[3])},focusable:function(o){return d(o,!isNaN(b.attr(o,"tabindex")))},tabbable:function(o){var s=b.attr(o,"tabindex"),A=isNaN(s);return(A||s>=0)&&d(o,!A)}});b(function(){var o=document.body,s=o.appendChild(s=document.createElement("div"));b.extend(s.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=s.offsetHeight===100;b.support.selectstart="onselectstart"in
s;o.removeChild(s).style.display="none"});b("<a>").outerWidth(1).jquery||b.each(["Width","Height"],function(o,s){function A(ia,ha,na,Da){return b.each(G,function(){ha-=parseFloat(b.css(ia,"padding"+this))||0;na&&(ha-=parseFloat(b.css(ia,"border"+this+"Width"))||0);Da&&(ha-=parseFloat(b.css(ia,"margin"+this))||0)}),ha}var G=s==="Width"?["Left","Right"]:["Top","Bottom"],H=s.toLowerCase(),V={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};
b.fn["inner"+s]=function(ia){return ia===a?V["inner"+s].call(this):this.each(function(){b(this).css(H,A(this,ia)+"px")})};b.fn["outer"+s]=function(ia,ha){return typeof ia!="number"?V["outer"+s].call(this,ia):this.each(function(){b(this).css(H,A(this,ia,true,ha)+"px")})}});b("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(b.fn.removeData=function(o){return function(s){return arguments.length?o.call(this,b.camelCase(s)):o.call(this)}}(b.fn.removeData));(function(){var o=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||
[];b.ui.ie=o.length?true:false;b.ui.ie6=parseFloat(o[1],10)===6})();b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(o){o.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.extend(b.ui,{plugin:{add:function(o,s,A){var G;o=b.ui[o].prototype;for(G in A){o.plugins[G]=o.plugins[G]||[];o.plugins[G].push([s,A[G]])}},call:function(o,s,A){var G=o.plugins[s];if(!(!G||!o.element[0].parentNode||
o.element[0].parentNode.nodeType===11))for(s=0;s<G.length;s++)o.options[G[s][0]]&&G[s][1].apply(o.element,A)}},contains:b.contains,hasScroll:function(o,s){if(b(o).css("overflow")==="hidden")return false;s=s&&s==="left"?"scrollLeft":"scrollTop";var A=false;return o[s]>0?true:(o[s]=1,A=o[s]>0,o[s]=0,A)},isOverAxis:function(o,s,A){return o>s&&o<s+A},isOver:function(o,s,A,G,H,V){return b.ui.isOverAxis(o,A,H)&&b.ui.isOverAxis(s,G,V)}})}})(jQuery);
(function(b,a){var d=0,f=Array.prototype.slice,g=b.cleanData;b.cleanData=function(k){for(var o=0,s;(s=k[o])!=null;o++)try{b(s).triggerHandler("remove")}catch(A){}g(k)};b.widget=function(k,o,s){var A,G,H,V,ia=k.split(".")[0];k=k.split(".")[1];A=ia+"-"+k;s||(s=o,o=b.Widget);b.expr[":"][A.toLowerCase()]=function(ha){return!!b.data(ha,A)};b[ia]=b[ia]||{};G=b[ia][k];H=b[ia][k]=function(ha,na){if(!this._createWidget)return new H(ha,na);arguments.length&&this._createWidget(ha,na)};b.extend(H,G,{version:s.version,
_proto:b.extend({},s),_childConstructors:[]});V=new o;V.options=b.widget.extend({},V.options);b.each(s,function(ha,na){b.isFunction(na)&&(s[ha]=function(){var Da=function(){return o.prototype[ha].apply(this,arguments)},Ja=function(Ka){return o.prototype[ha].apply(this,Ka)};return function(){var Ka=this._super,ma=this._superApply,O;return this._super=Da,this._superApply=Ja,O=na.apply(this,arguments),this._super=Ka,this._superApply=ma,O}}())});H.prototype=b.widget.extend(V,{widgetEventPrefix:G?V.widgetEventPrefix:
k},s,{constructor:H,namespace:ia,widgetName:k,widgetBaseClass:A,widgetFullName:A});G?(b.each(G._childConstructors,function(ha,na){ha=na.prototype;b.widget(ha.namespace+"."+ha.widgetName,H,na._proto)}),delete G._childConstructors):o._childConstructors.push(H);b.widget.bridge(k,H)};b.widget.extend=function(k){for(var o=f.call(arguments,1),s=0,A=o.length,G,H;s<A;s++)for(G in o[s]){H=o[s][G];o[s].hasOwnProperty(G)&&H!==a&&(b.isPlainObject(H)?(k[G]=b.isPlainObject(k[G])?b.widget.extend({},k[G],H):b.widget.extend({},
H)):(k[G]=H))}return k};b.widget.bridge=function(k,o){var s=o.prototype.widgetFullName||k;b.fn[k]=function(A){var G=typeof A=="string",H=f.call(arguments,1),V=this;return A=!G&&H.length?b.widget.extend.apply(null,[A].concat(H)):A,G?this.each(function(){var ia,ha=b.data(this,s);if(!ha)return b.error("cannot call methods on "+k+" prior to initialization; attempted to call method '"+A+"'");if(!b.isFunction(ha[A])||A.charAt(0)==="_")return b.error("no such method '"+A+"' for "+k+" widget instance");ia=
ha[A].apply(ha,H);if(ia!==ha&&ia!==a)return V=ia&&ia.jquery?V.pushStack(ia.get()):ia,false}):this.each(function(){var ia=b.data(this,s);ia?ia.option(A||{})._init():b.data(this,s,new o(A,this))}),V}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(k,o){o=b(o||this.defaultElement||this)[0];this.element=b(o);this.uuid=d++;this.eventNamespace="."+this.widgetName+
this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),k);this.bindings=b();this.hoverable=b();this.focusable=b();o!==this&&(b.data(o,this.widgetName,this),b.data(o,this.widgetFullName,this),this._on(true,this.element,{remove:function(s){s.target===o&&this.destroy()}}),this.document=b(o.style?o.ownerDocument:o.document||o),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},
_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},
_destroy:b.noop,widget:function(){return this.element},option:function(k,o){var s=k,A,G,H;if(arguments.length===0)return b.widget.extend({},this.options);if(typeof k=="string"){s={};A=k.split(".");k=A.shift();if(A.length){G=s[k]=b.widget.extend({},this.options[k]);for(H=0;H<A.length-1;H++){G[A[H]]=G[A[H]]||{};G=G[A[H]]}k=A.pop();if(o===a)return G[k]===a?null:G[k];G[k]=o}else{if(o===a)return this.options[k]===a?null:this.options[k];s[k]=o}}return this._setOptions(s),this},_setOptions:function(k){var o;
for(o in k)this._setOption(o,k[o]);return this},_setOption:function(k,o){return this.options[k]=o,k==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!o).attr("aria-disabled",o),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(k,o,s){var A,G=this;typeof k!="boolean"&&(s=o,o=k,k=
false);s?(o=A=b(o),this.bindings=this.bindings.add(o)):(s=o,o=this.element,A=this.widget());b.each(s,function(H,V){function ia(){if(!(!k&&(G.options.disabled===true||b(this).hasClass("ui-state-disabled"))))return(typeof V=="string"?G[V]:V).apply(G,arguments)}typeof V!="string"&&(ia.guid=V.guid=V.guid||ia.guid||b.guid++);var ha=H.match(/^(\w+)\s*(.*)$/);H=ha[1]+G.eventNamespace;(ha=ha[2])?A.delegate(ha,H,ia):o.bind(H,ia)})},_off:function(k,o){o=(o||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;
k.unbind(o).undelegate(o)},_delay:function(k,o){function s(){return(typeof k=="string"?A[k]:k).apply(A,arguments)}var A=this;return setTimeout(s,o||0)},_hoverable:function(k){this.hoverable=this.hoverable.add(k);this._on(k,{mouseenter:function(o){b(o.currentTarget).addClass("ui-state-hover")},mouseleave:function(o){b(o.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(k){this.focusable=this.focusable.add(k);this._on(k,{focusin:function(o){b(o.currentTarget).addClass("ui-state-focus")},
focusout:function(o){b(o.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(k,o,s){var A,G=this.options[k];s=s||{};o=b.Event(o);o.type=(k===this.widgetEventPrefix?k:this.widgetEventPrefix+k).toLowerCase();o.target=this.element[0];if(k=o.originalEvent)for(A in k)A in o||(o[A]=k[A]);return this.element.trigger(o,s),!(b.isFunction(G)&&G.apply(this.element[0],[o].concat(s))===false||o.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(k,o){b.Widget.prototype["_"+k]=
function(s,A,G){typeof A=="string"&&(A={effect:A});var H,V=A?A===true||typeof A=="number"?o:A.effect||o:k;A=A||{};typeof A=="number"&&(A={duration:A});H=!b.isEmptyObject(A);A.complete=G;A.delay&&s.delay(A.delay);H&&b.effects&&(b.effects.effect[V]||b.uiBackCompat!==false&&b.effects[V])?s[k](A):V!==k&&s[V]?s[V](A.duration,A.easing,G):s.queue(function(ia){b(this)[k]();G&&G.call(s[0]);ia()})}});b.uiBackCompat!==false&&(b.Widget.prototype._getCreateOptions=function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]})})(jQuery);
(function(b){var a=false;b(document).mouseup(function(){a=false});b.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(f){return d._mouseDown(f)}).bind("click."+this.widgetName,function(f){if(true===b.data(f.target,d.widgetName+".preventClickEvent"))return b.removeData(f.target,d.widgetName+".preventClickEvent"),f.stopImmediatePropagation(),false});this.started=
false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!a){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var f=this,g=d.which===1,k=typeof this.options.cancel=="string"&&d.target.nodeName?b(d.target).closest(this.options.cancel).length:false;if(!g||k||!this._mouseCapture(d))return true;
(this.mouseDelayMet=!this.options.delay)||(this._mouseDelayTimer=setTimeout(function(){f.mouseDelayMet=true},this.options.delay));if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=this._mouseStart(d)!==false;if(!this._mouseStarted)return d.preventDefault(),true}return true===b.data(d.target,this.widgetName+".preventClickEvent")&&b.removeData(d.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(o){return f._mouseMove(o)},this._mouseUpDelegate=function(o){return f._mouseUp(o)},
b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),d.preventDefault(),a=true,true}},_mouseMove:function(d){return!b.ui.ie||document.documentMode>=9||d.button?this._mouseStarted?(this._mouseDrag(d),d.preventDefault()):(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,d)!==false,this._mouseStarted?this._mouseDrag(d):this._mouseUp(d)),!this._mouseStarted):this._mouseUp(d)},
_mouseUp:function(d){return b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=false,d.target===this._mouseDownEvent.target&&b.data(d.target,this.widgetName+".preventClickEvent",true),this._mouseStop(d)),false},_mouseDistanceMet:function(d){return Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},
_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(b){b.widget("ui.draggable",b.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(a){var d=this.options;return this.helper||d.disabled||b(a.target).is(".ui-resizable-handle")?
false:(this.handle=this._getHandle(a),this.handle?(b(d.iframeFix===true?"iframe":d.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(b(this).offset()).appendTo("body")}),true):false)},_mouseStart:function(a){var d=this.options;return this.helper=this._createHelper(a),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),
b.ui.ddmanager&&(b.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},b.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(a),
this.originalPageX=a.pageX,this.originalPageY=a.pageY,d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt),d.containment&&this._setContainment(),this._trigger("start",a)===false?(this._clear(),false):(this._cacheHelperProportions(),b.ui.ddmanager&&!d.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,a),this._mouseDrag(a,true),b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,a),true)},_mouseDrag:function(a,d){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");
if(!d){d=this._uiHash();if(this._trigger("drag",a,d)===false)return this._mouseUp({}),false;this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return b.ui.ddmanager&&b.ui.ddmanager.drag(this,a),false},_mouseStop:function(a){var d=false;b.ui.ddmanager&&!this.options.dropBehaviour&&(d=b.ui.ddmanager.drop(this,a));this.dropped&&(d=this.dropped,
this.dropped=false);for(var f=this.element[0],g=false;f&&(f=f.parentNode);)f==document&&(g=true);if(!g&&this.options.helper==="original")return false;if(this.options.revert=="invalid"&&!d||this.options.revert=="valid"&&d||this.options.revert===true||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)){var k=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){k._trigger("stop",a)!==false&&k._clear()})}else this._trigger("stop",
a)!==false&&this._clear();return false},_mouseUp:function(a){return b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,a),b.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(a){var d=!this.options.handle||!b(this.options.handle,this.element).length?true:false;return b(this.options.handle,this.element).find("*").andSelf().each(function(){this==
a.target&&(d=true)}),d},_createHelper:function(a){var d=this.options;a=b.isFunction(d.helper)?b(d.helper.apply(this.element[0],[a])):d.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return a.parents("body").length||a.appendTo(d.appendTo=="parent"?this.element[0].parentNode:d.appendTo),a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute"),a},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" "));b.isArray(a)&&(a={left:+a[0],
top:+a[1]||0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],
this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&b.ui.ie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;a.containment=="parent"&&(a.containment=this.helper[0].parentNode);if(a.containment=="document"||a.containment=="window")this.containment=[a.containment=="document"?0:b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:b(window).scrollLeft())+b(a.containment=="document"?document:
window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:b(window).scrollTop())+(b(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){a=b(a.containment);var d=a[0];if(d){a.offset();var f=b(d).css("overflow")!="hidden";this.containment=[(parseInt(b(d).css("borderLeftWidth"),10)||0)+(parseInt(b(d).css("paddingLeft"),
10)||0),(parseInt(b(d).css("borderTopWidth"),10)||0)+(parseInt(b(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(b(d).css("borderLeftWidth"),10)||0)-(parseInt(b(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(b(d).css("borderTopWidth"),10)||0)-(parseInt(b(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=a}}else a.containment.constructor==Array&&(this.containment=a.containment)},_convertPositionTo:function(a,d){d||(d=this.position);a=a=="absolute"?1:-1;var f=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(f[0].tagName);return{top:d.top+this.offset.relative.top*a+this.offset.parent.top*a-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*
a,left:d.left+this.offset.relative.left*a+this.offset.parent.left*a-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*a}},_generatePosition:function(a){var d=this.options,f=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(f[0].tagName),k=a.pageX,o=a.pageY;if(this.originalPosition){var s;if(this.containment){if(this.relative_container){s=this.relative_container.offset();
s=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]}else s=this.containment;a.pageX-this.offset.click.left<s[0]&&(k=s[0]+this.offset.click.left);a.pageY-this.offset.click.top<s[1]&&(o=s[1]+this.offset.click.top);a.pageX-this.offset.click.left>s[2]&&(k=s[2]+this.offset.click.left);a.pageY-this.offset.click.top>s[3]&&(o=s[3]+this.offset.click.top)}if(d.grid){o=d.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/d.grid[1])*d.grid[1]:
this.originalPageY;o=s?o-this.offset.click.top<s[1]||o-this.offset.click.top>s[3]?o-this.offset.click.top<s[1]?o+d.grid[1]:o-d.grid[1]:o:o;k=d.grid[0]?this.originalPageX+Math.round((k-this.originalPageX)/d.grid[0])*d.grid[0]:this.originalPageX;k=s?k-this.offset.click.left<s[0]||k-this.offset.click.left>s[2]?k-this.offset.click.left<s[0]?k+d.grid[0]:k-d.grid[0]:k:k}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():
g?0:f.scrollTop()),left:k-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(a,d,f){return f=f||this._uiHash(),b.ui.plugin.call(this,a,[d,f]),a=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),
b.Widget.prototype._trigger.call(this,a,d,f)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.ui.plugin.add("draggable","connectToSortable",{start:function(a,d){var f=b(this).data("draggable"),g=f.options,k=b.extend({},d,{item:f.element});f.sortables=[];b(g.connectToSortable).each(function(){var o=b.data(this,"sortable");o&&!o.options.disabled&&(f.sortables.push({instance:o,shouldRevert:o.options.revert}),
o.refreshPositions(),o._trigger("activate",a,k))})},stop:function(a,d){var f=b(this).data("draggable"),g=b.extend({},d,{item:f.element});b.each(f.sortables,function(){this.instance.isOver?(this.instance.isOver=0,f.cancelHelperRemoval=true,this.instance.cancelHelperRemoval=false,this.shouldRevert&&(this.instance.options.revert=true),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,f.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):
(this.instance.cancelHelperRemoval=false,this.instance._trigger("deactivate",a,g))})},drag:function(a,d){var f=b(this).data("draggable"),g=this;b.each(f.sortables,function(){var k=false,o=this;this.instance.positionAbs=f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(k=true,b.each(f.sortables,function(){return this.instance.positionAbs=f.positionAbs,this.instance.helperProportions=
f.helperProportions,this.instance.offset.click=f.offset.click,this!=o&&this.instance._intersectsWith(this.instance.containerCache)&&b.ui.contains(o.instance.element[0],this.instance.element[0])&&(k=false),k}));k?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=b(g).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return d.helper[0]},a.target=
this.instance.currentItem[0],this.instance._mouseCapture(a,true),this.instance._mouseStart(a,true,true),this.instance.offset.click.top=f.offset.click.top,this.instance.offset.click.left=f.offset.click.left,this.instance.offset.parent.left-=f.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=f.offset.parent.top-this.instance.offset.parent.top,f._trigger("toSortable",a),f.dropped=this.instance.element,f.currentItem=f.element,this.instance.fromOutside=f),this.instance.currentItem&&
this.instance._mouseDrag(a)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=true,this.instance.options.revert=false,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,true),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),f._trigger("fromSortable",a),f.dropped=false)})}});b.ui.plugin.add("draggable","cursor",{start:function(){var a=
b("body"),d=b(this).data("draggable").options;a.css("cursor")&&(d._cursor=a.css("cursor"));a.css("cursor",d.cursor)},stop:function(){var a=b(this).data("draggable").options;a._cursor&&b("body").css("cursor",a._cursor)}});b.ui.plugin.add("draggable","opacity",{start:function(a,d){a=b(d.helper);d=b(this).data("draggable").options;a.css("opacity")&&(d._opacity=a.css("opacity"));a.css("opacity",d.opacity)},stop:function(a,d){a=b(this).data("draggable").options;a._opacity&&b(d.helper).css("opacity",a._opacity)}});
b.ui.plugin.add("draggable","scroll",{start:function(){var a=b(this).data("draggable");a.scrollParent[0]!=document&&a.scrollParent[0].tagName!="HTML"&&(a.overflowOffset=a.scrollParent.offset())},drag:function(a){var d=b(this).data("draggable"),f=d.options,g=false;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!f.axis||f.axis!="x")d.overflowOffset.top+d.scrollParent[0].offsetHeight-a.pageY<f.scrollSensitivity?(d.scrollParent[0].scrollTop=g=d.scrollParent[0].scrollTop+f.scrollSpeed):
a.pageY-d.overflowOffset.top<f.scrollSensitivity&&(d.scrollParent[0].scrollTop=g=d.scrollParent[0].scrollTop-f.scrollSpeed);if(!f.axis||f.axis!="y")d.overflowOffset.left+d.scrollParent[0].offsetWidth-a.pageX<f.scrollSensitivity?(d.scrollParent[0].scrollLeft=g=d.scrollParent[0].scrollLeft+f.scrollSpeed):a.pageX-d.overflowOffset.left<f.scrollSensitivity&&(d.scrollParent[0].scrollLeft=g=d.scrollParent[0].scrollLeft-f.scrollSpeed)}else{if(!f.axis||f.axis!="x")a.pageY-b(document).scrollTop()<f.scrollSensitivity?
(g=b(document).scrollTop(b(document).scrollTop()-f.scrollSpeed)):b(window).height()-(a.pageY-b(document).scrollTop())<f.scrollSensitivity&&(g=b(document).scrollTop(b(document).scrollTop()+f.scrollSpeed));if(!f.axis||f.axis!="y")a.pageX-b(document).scrollLeft()<f.scrollSensitivity?(g=b(document).scrollLeft(b(document).scrollLeft()-f.scrollSpeed)):b(window).width()-(a.pageX-b(document).scrollLeft())<f.scrollSensitivity&&(g=b(document).scrollLeft(b(document).scrollLeft()+f.scrollSpeed))}g!==false&&b.ui.ddmanager&&
!f.dropBehaviour&&b.ui.ddmanager.prepareOffsets(d,a)}});b.ui.plugin.add("draggable","snap",{start:function(){var a=b(this).data("draggable"),d=a.options;a.snapElements=[];b(d.snap.constructor!=String?d.snap.items||":data(draggable)":d.snap).each(function(){var f=b(this),g=f.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:f.outerWidth(),height:f.outerHeight(),top:g.top,left:g.left})})},drag:function(a,d){for(var f=b(this).data("draggable"),g=f.options,k=g.snapTolerance,o=d.offset.left,
s=o+f.helperProportions.width,A=d.offset.top,G=A+f.helperProportions.height,H=f.snapElements.length-1;H>=0;H--){var V=f.snapElements[H].left,ia=V+f.snapElements[H].width,ha=f.snapElements[H].top,na=ha+f.snapElements[H].height;if(V-k<o&&o<ia+k&&ha-k<A&&A<na+k||V-k<o&&o<ia+k&&ha-k<G&&G<na+k||V-k<s&&s<ia+k&&ha-k<A&&A<na+k||V-k<s&&s<ia+k&&ha-k<G&&G<na+k){if(g.snapMode!="inner"){var Da=Math.abs(ha-G)<=k,Ja=Math.abs(na-A)<=k,Ka=Math.abs(V-s)<=k,ma=Math.abs(ia-o)<=k;Da&&(d.position.top=f._convertPositionTo("relative",
{top:ha-f.helperProportions.height,left:0}).top-f.margins.top);Ja&&(d.position.top=f._convertPositionTo("relative",{top:na,left:0}).top-f.margins.top);Ka&&(d.position.left=f._convertPositionTo("relative",{top:0,left:V-f.helperProportions.width}).left-f.margins.left);ma&&(d.position.left=f._convertPositionTo("relative",{top:0,left:ia}).left-f.margins.left)}var O=Da||Ja||Ka||ma;if(g.snapMode!="outer"){Da=Math.abs(ha-A)<=k;Ja=Math.abs(na-G)<=k;Ka=Math.abs(V-o)<=k;ma=Math.abs(ia-s)<=k;Da&&(d.position.top=
f._convertPositionTo("relative",{top:ha,left:0}).top-f.margins.top);Ja&&(d.position.top=f._convertPositionTo("relative",{top:na-f.helperProportions.height,left:0}).top-f.margins.top);Ka&&(d.position.left=f._convertPositionTo("relative",{top:0,left:V}).left-f.margins.left);ma&&(d.position.left=f._convertPositionTo("relative",{top:0,left:ia-f.helperProportions.width}).left-f.margins.left)}!f.snapElements[H].snapping&&(Da||Ja||Ka||ma||O)&&f.options.snap.snap&&f.options.snap.snap.call(f.element,a,b.extend(f._uiHash(),
{snapItem:f.snapElements[H].item}));f.snapElements[H].snapping=Da||Ja||Ka||ma||O}else{f.snapElements[H].snapping&&f.options.snap.release&&f.options.snap.release.call(f.element,a,b.extend(f._uiHash(),{snapItem:f.snapElements[H].item}));f.snapElements[H].snapping=false}}}});b.ui.plugin.add("draggable","stack",{start:function(){var a=b(this).data("draggable").options;a=b.makeArray(b(a.stack)).sort(function(f,g){return(parseInt(b(f).css("zIndex"),10)||0)-(parseInt(b(g).css("zIndex"),10)||0)});if(a.length){var d=
parseInt(a[0].style.zIndex)||0;b(a).each(function(f){this.style.zIndex=d+f});this[0].style.zIndex=d+a.length}}});b.ui.plugin.add("draggable","zIndex",{start:function(a,d){a=b(d.helper);d=b(this).data("draggable").options;a.css("zIndex")&&(d._zIndex=a.css("zIndex"));a.css("zIndex",d.zIndex)},stop:function(a,d){a=b(this).data("draggable").options;a._zIndex&&b(d.helper).css("zIndex",a._zIndex)}})})(jQuery);
(function(b){b.widget("ui.resizable",b.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var f=this,g=this.options;this.element.addClass("ui-resizable");b.extend(this,{_aspectRatio:!!g.aspectRatio,aspectRatio:g.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:g.helper||g.ghost||g.animate?g.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(b('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),
this.elementIsWrapper=true,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",
zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=g.handles||(b(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var k=this.handles.split(",");
this.handles={};for(var o=0;o<k.length;o++){var s=b.trim(k[o]),A=b('<div class="ui-resizable-handle '+("ui-resizable-"+s)+'"></div>');A.css({zIndex:g.zIndex});"se"==s&&A.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[s]=".ui-resizable-"+s;this.element.append(A)}}this._renderAxis=function(G){G=G||this.element;for(var H in this.handles){this.handles[H].constructor==String&&(this.handles[H]=b(this.handles[H],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var V=
b(this.handles[H],this.element),ia=0;ia=/sw|ne|nw|se|n|s/.test(H)?V.outerHeight():V.outerWidth();V=["padding",/ne|nw|n/.test(H)?"Top":/se|sw|s/.test(H)?"Bottom":/^e$/.test(H)?"Right":"Left"].join("");G.css(V,ia);this._proportionallyResize()}b(this.handles[H])}};this._renderAxis(this.element);this._handles=b(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!f.resizing){if(this.className)var G=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);f.axis=
G&&G[1]?G[1]:"se"}});g.autoHide&&(this._handles.hide(),b(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(!g.disabled){b(this).removeClass("ui-resizable-autohide");f._handles.show()}}).mouseleave(function(){g.disabled||f.resizing||(b(this).addClass("ui-resizable-autohide"),f._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var f=function(k){b(k).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){f(this.element);var g=this.element;this.originalElement.css({position:g.css("position"),width:g.outerWidth(),height:g.outerHeight(),top:g.css("top"),left:g.css("left")}).insertAfter(g);g.remove()}return this.originalElement.css("resize",this.originalResizeStyle),f(this.originalElement),this},_mouseCapture:function(f){var g=false;for(var k in this.handles)b(this.handles[k])[0]==f.target&&(g=true);return!this.options.disabled&&g},_mouseStart:function(f){var g=this.options,
k=this.element.position(),o=this.element;this.resizing=true;this.documentScroll={top:b(document).scrollTop(),left:b(document).scrollLeft()};(o.is(".ui-draggable")||/absolute/.test(o.css("position")))&&o.css({position:"absolute",top:k.top,left:k.left});this._renderProxy();k=a(this.helper.css("left"));var s=a(this.helper.css("top"));g.containment&&(k+=b(g.containment).scrollLeft()||0,s+=b(g.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:k,top:s};this.size=this._helper?
{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()};this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()};this.originalPosition={left:k,top:s};this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()};this.originalMousePosition={left:f.pageX,top:f.pageY};this.aspectRatio=typeof g.aspectRatio=="number"?g.aspectRatio:this.originalSize.width/this.originalSize.height||1;g=b(".ui-resizable-"+
this.axis).css("cursor");return b("body").css("cursor",g=="auto"?this.axis+"-resize":g),o.addClass("ui-resizable-resizing"),this._propagate("start",f),true},_mouseDrag:function(f){var g=this.helper,k=this.originalMousePosition,o=this._change[this.axis];if(!o)return false;k=o.apply(this,[f,f.pageX-k.left||0,f.pageY-k.top||0]);this._updateVirtualBoundaries(f.shiftKey);if(this._aspectRatio||f.shiftKey)k=this._updateRatio(k,f);return k=this._respectSize(k,f),this._propagate("resize",f),g.css({top:this.position.top+
"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(k),this._trigger("resize",f,this.ui()),false},_mouseStop:function(f){this.resizing=false;var g=this.options,k=this;if(this._helper){var o=this._proportionallyResizeElements,s=o.length&&/textarea/i.test(o[0].nodeName);o=s&&b.ui.hasScroll(o[0],"left")?0:k.sizeDiff.height;s=s?0:k.sizeDiff.width;s={width:k.helper.width()-
s,height:k.helper.height()-o};o=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null;var A=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null;g.animate||this.element.css(b.extend(s,{top:A,left:o}));k.helper.height(k.size.height);k.helper.width(k.size.width);this._helper&&!g.animate&&this._proportionallyResize()}return b("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",f),this._helper&&this.helper.remove(),
false},_updateVirtualBoundaries:function(f){var g=this.options,k,o,s;g={minWidth:d(g.minWidth)?g.minWidth:0,maxWidth:d(g.maxWidth)?g.maxWidth:Infinity,minHeight:d(g.minHeight)?g.minHeight:0,maxHeight:d(g.maxHeight)?g.maxHeight:Infinity};if(this._aspectRatio||f){f=g.minHeight*this.aspectRatio;o=g.minWidth/this.aspectRatio;k=g.maxHeight*this.aspectRatio;s=g.maxWidth/this.aspectRatio;f>g.minWidth&&(g.minWidth=f);o>g.minHeight&&(g.minHeight=o);k<g.maxWidth&&(g.maxWidth=k);s<g.maxHeight&&(g.maxHeight=
s)}this._vBoundaries=g},_updateCache:function(f){this.offset=this.helper.offset();d(f.left)&&(this.position.left=f.left);d(f.top)&&(this.position.top=f.top);d(f.height)&&(this.size.height=f.height);d(f.width)&&(this.size.width=f.width)},_updateRatio:function(f){var g=this.position,k=this.size,o=this.axis;return d(f.height)?(f.width=f.height*this.aspectRatio):d(f.width)&&(f.height=f.width/this.aspectRatio),o=="sw"&&(f.left=g.left+(k.width-f.width),f.top=null),o=="nw"&&(f.top=g.top+(k.height-f.height),
f.left=g.left+(k.width-f.width)),f},_respectSize:function(f){var g=this._vBoundaries,k=this.axis,o=d(f.width)&&g.maxWidth&&g.maxWidth<f.width,s=d(f.height)&&g.maxHeight&&g.maxHeight<f.height,A=d(f.width)&&g.minWidth&&g.minWidth>f.width,G=d(f.height)&&g.minHeight&&g.minHeight>f.height;A&&(f.width=g.minWidth);G&&(f.height=g.minHeight);o&&(f.width=g.maxWidth);s&&(f.height=g.maxHeight);var H=this.originalPosition.left+this.originalSize.width,V=this.position.top+this.size.height,ia=/sw|nw|w/.test(k);k=
/nw|ne|n/.test(k);A&&ia&&(f.left=H-g.minWidth);o&&ia&&(f.left=H-g.maxWidth);G&&k&&(f.top=V-g.minHeight);s&&k&&(f.top=V-g.maxHeight);g=!f.width&&!f.height;return g&&!f.left&&f.top?(f.top=null):g&&!f.top&&f.left&&(f.left=null),f},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var f=this.helper||this.element,g=0;g<this._proportionallyResizeElements.length;g++){var k=this._proportionallyResizeElements[g];if(!this.borderDif){var o=[k.css("borderTopWidth"),k.css("borderRightWidth"),
k.css("borderBottomWidth"),k.css("borderLeftWidth")],s=[k.css("paddingTop"),k.css("paddingRight"),k.css("paddingBottom"),k.css("paddingLeft")];this.borderDif=b.map(o,function(A,G){A=parseInt(A,10)||0;G=parseInt(s[G],10)||0;return A+G})}k.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var f=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||b('<div style="overflow:hidden;"></div>');
var g=b.ui.ie6?1:0,k=b.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+k,height:this.element.outerHeight()+k,position:"absolute",left:this.elementOffset.left-g+"px",top:this.elementOffset.top-g+"px",zIndex:++f.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(f,g){return{width:this.originalSize.width+g}},w:function(f,g){return{left:this.originalPosition.left+g,width:this.originalSize.width-g}},n:function(f,
g,k){return{top:this.originalPosition.top+k,height:this.originalSize.height-k}},s:function(f,g,k){return{height:this.originalSize.height+k}},se:function(f,g,k){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[f,g,k]))},sw:function(f,g,k){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[f,g,k]))},ne:function(f,g,k){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[f,g,k]))},nw:function(f,g,k){return b.extend(this._change.n.apply(this,
arguments),this._change.w.apply(this,[f,g,k]))}},_propagate:function(f,g){b.ui.plugin.call(this,f,[g,this.ui()]);f!="resize"&&this._trigger(f,g,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});b.ui.plugin.add("resizable","alsoResize",{start:function(){var f=b(this).data("resizable").options,g=function(k){b(k).each(function(){var o=
b(this);o.data("resizable-alsoresize",{width:parseInt(o.width(),10),height:parseInt(o.height(),10),left:parseInt(o.css("left"),10),top:parseInt(o.css("top"),10)})})};typeof f.alsoResize=="object"&&!f.alsoResize.parentNode?f.alsoResize.length?(f.alsoResize=f.alsoResize[0],g(f.alsoResize)):b.each(f.alsoResize,function(k){g(k)}):g(f.alsoResize)},resize:function(f,g){f=b(this).data("resizable");var k=f.options,o=f.originalSize,s=f.originalPosition,A={height:f.size.height-o.height||0,width:f.size.width-
o.width||0,top:f.position.top-s.top||0,left:f.position.left-s.left||0},G=function(H,V){b(H).each(function(){var ia=b(this),ha=b(this).data("resizable-alsoresize"),na={},Da=V&&V.length?V:ia.parents(g.originalElement[0]).length?["width","height"]:["width","height","top","left"];b.each(Da,function(Ja,Ka){(Ja=(ha[Ka]||0)+(A[Ka]||0))&&Ja>=0&&(na[Ka]=Ja||null)});ia.css(na)})};typeof k.alsoResize=="object"&&!k.alsoResize.nodeType?b.each(k.alsoResize,function(H,V){G(H,V)}):G(k.alsoResize)},stop:function(){b(this).removeData("resizable-alsoresize")}});
b.ui.plugin.add("resizable","animate",{stop:function(f){var g=b(this).data("resizable"),k=g.options,o=g._proportionallyResizeElements,s=o.length&&/textarea/i.test(o[0].nodeName),A=s&&b.ui.hasScroll(o[0],"left")?0:g.sizeDiff.height;s={width:g.size.width-(s?0:g.sizeDiff.width),height:g.size.height-A};A=parseInt(g.element.css("left"),10)+(g.position.left-g.originalPosition.left)||null;var G=parseInt(g.element.css("top"),10)+(g.position.top-g.originalPosition.top)||null;g.element.animate(b.extend(s,G&&
A?{top:G,left:A}:{}),{duration:k.animateDuration,easing:k.animateEasing,step:function(){var H={width:parseInt(g.element.css("width"),10),height:parseInt(g.element.css("height"),10),top:parseInt(g.element.css("top"),10),left:parseInt(g.element.css("left"),10)};o&&o.length&&b(o[0]).css({width:H.width,height:H.height});g._updateCache(H);g._propagate("resize",f)}})}});b.ui.plugin.add("resizable","containment",{start:function(){var f=b(this).data("resizable"),g=f.element,k=f.options.containment;if(g=k instanceof
b?k.get(0):/parent/.test(k)?g.parent().get(0):k){f.containerElement=b(g);if(/document/.test(k)||k==document){f.containerOffset={left:0,top:0};f.containerPosition={left:0,top:0};f.parentData={element:b(document),left:0,top:0,width:b(document).width(),height:b(document).height()||document.body.parentNode.scrollHeight}}else{var o=b(g),s=[];b(["Top","Right","Left","Bottom"]).each(function(H,V){s[H]=a(o.css("padding"+V))});f.containerOffset=o.offset();f.containerPosition=o.position();f.containerSize={height:o.innerHeight()-
s[3],width:o.innerWidth()-s[1]};k=f.containerOffset;var A=f.containerSize.height,G=f.containerSize.width;G=b.ui.hasScroll(g,"left")?g.scrollWidth:G;A=b.ui.hasScroll(g)?g.scrollHeight:A;f.parentData={element:g,left:k.left,top:k.top,width:G,height:A}}}},resize:function(f){var g=b(this).data("resizable"),k=g.options,o=g.containerOffset,s=g.position;f=g._aspectRatio||f.shiftKey;var A={top:0,left:0},G=g.containerElement;G[0]!=document&&/static/.test(G.css("position"))&&(A=o);s.left<(g._helper?o.left:0)&&
(g.size.width+=g._helper?g.position.left-o.left:g.position.left-A.left,f&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=k.helper?o.left:0);s.top<(g._helper?o.top:0)&&(g.size.height+=g._helper?g.position.top-o.top:g.position.top,f&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?o.top:0);g.offset.left=g.parentData.left+g.position.left;g.offset.top=g.parentData.top+g.position.top;k=Math.abs((g._helper?g.offset.left-A.left:g.offset.left-A.left)+g.sizeDiff.width);o=Math.abs((g._helper?
g.offset.top-A.top:g.offset.top-o.top)+g.sizeDiff.height);s=g.containerElement.get(0)==g.element.parent().get(0);A=/relative|absolute/.test(g.containerElement.css("position"));s&&A&&(k-=g.parentData.left);k+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-k,f&&(g.size.height=g.size.width/g.aspectRatio));o+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-o,f&&(g.size.width=g.size.height*g.aspectRatio))},stop:function(){var f=b(this).data("resizable"),g=f.options,
k=f.containerOffset,o=f.containerPosition,s=f.containerElement,A=b(f.helper),G=A.offset(),H=A.outerWidth()-f.sizeDiff.width;A=A.outerHeight()-f.sizeDiff.height;f._helper&&!g.animate&&/relative/.test(s.css("position"))&&b(this).css({left:G.left-o.left-k.left,width:H,height:A});f._helper&&!g.animate&&/static/.test(s.css("position"))&&b(this).css({left:G.left-o.left-k.left,width:H,height:A})}});b.ui.plugin.add("resizable","ghost",{start:function(){var f=b(this).data("resizable"),g=f.options,k=f.size;
f.ghost=f.originalElement.clone();f.ghost.css({opacity:0.25,display:"block",position:"relative",height:k.height,width:k.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof g.ghost=="string"?g.ghost:"");f.ghost.appendTo(f.helper)},resize:function(){var f=b(this).data("resizable");f.ghost&&f.ghost.css({position:"relative",height:f.size.height,width:f.size.width})},stop:function(){var f=b(this).data("resizable");f.ghost&&f.helper&&f.helper.get(0).removeChild(f.ghost.get(0))}});
b.ui.plugin.add("resizable","grid",{resize:function(){var f=b(this).data("resizable"),g=f.options,k=f.size,o=f.originalSize,s=f.originalPosition,A=f.axis;g.grid=typeof g.grid=="number"?[g.grid,g.grid]:g.grid;var G=Math.round((k.width-o.width)/(g.grid[0]||1))*(g.grid[0]||1);g=Math.round((k.height-o.height)/(g.grid[1]||1))*(g.grid[1]||1);/^(se|s|e)$/.test(A)?(f.size.width=o.width+G,f.size.height=o.height+g):/^(ne)$/.test(A)?(f.size.width=o.width+G,f.size.height=o.height+g,f.position.top=s.top-g):/^(sw)$/.test(A)?
(f.size.width=o.width+G,f.size.height=o.height+g,f.position.left=s.left-G):(f.size.width=o.width+G,f.size.height=o.height+g,f.position.top=s.top-g,f.position.left=s.left-G)}});var a=function(f){return parseInt(f,10)||0},d=function(f){return!isNaN(parseInt(f,10))}})(jQuery);steal.loaded("/js/lib/jquery-ui/jquery-ui-1.9.2.custom.min.js");
steal("jquery/controller","jquery/view","jquery/view/ejs","app/show/theme4/poll.js",function(b){App.Show.Theme4.Poll("App.Show.Theme5.Poll",{defaults:{onchange:function(){}}},{pollData:null,init:function(){this._super();!this.forceFormMode&&pollShowOnStartup&&this.show(Registry.getController("show")._refreshPosition);this.setInnerHtml(pollInitData,true)},".quant-holder mouseenter":function(a){if(parseInt(a.data("votes-cnt"))){var d=a.parents(".option"),f=d.position();a=f.top+34;f=f.left+80;d=d.find(".avatars").html();
if(this.scrollApi)a-=this.scrollApi.getContentPositionY();this.pollVotersModel.setRawContent(d).show(f,a)}},".quant-holder mouseleave":function(){this.pollVotersModel.hide()},show:function(a){var d=this.find(".show-poll"),f=this.element.closest(".hider");f.length||(f=this.find(".hider"));f.slideDown(Registry.getController("show").defaultSlideSpeed,function(){typeof a=="function"&&a.call(Registry.getController("show"));d.text(LNG["poll.hidePoll"])});this.isShowed=true;b(".show-poll").addClass("minus")},
hide:function(){var a=this.find(".show-poll"),d=this.element.closest(".hider");d.length||(d=this.find(".hider"));d.slideUp(Registry.getController("show").defaultSlideSpeed,function(){a.text(LNG["poll.showPoll"])});this.isShowed=false;b(".show-poll").removeClass("minus")},onchange:function(a){this.options.onchange(a)},applyScrolling:function(){var a=this.find(".options");if(a.length){var d=this.element.closest(".hider"),f=d.is(":visible");f||d.show();a.css("overflow","auto");this.scrollApi=a.jScrollPane().data("jsp");
f||d.hide()}},setInnerHtml:function(a,d){this.scrollApi&&this.scrollApi.destroy();this.resultMode=a.resultMode;this.pollData=a;var f=this._getTpl();this.element.find(".inner-html").html(f,a);this.applyScrolling();d||Registry.getController("show").settingsPoll.setInnerHtml(a);this.forceFormMode&&Registry.getController("show").poll.setInnerHtml(a);this.updateStat(a.numVotes)},updateStat:function(a){a=a+" "+(a==1?"vote":"votes");this.find(".js-votes-num").html(a)},showAddAnswer:function(){this._super();
this.find(".options")[0].className="options text-but";this.scrollApi&&this.scrollApi.reinitialise()},hideAddAnswer:function(){this._super();this.find(".options")[0].className="options just-link"},update:function(a){this.find(".js-question-text").text(a.question);this.setInnerHtml(a)},_getTpl:function(){return"/js/app/show/theme5/views/"+(this.resultMode?"poll-voted.ejs":"poll.ejs")},_showUsers:function(){var a=false,d=0,f=0;b(".hider").on("mouseover mouseout",".quant-holder",function(g){if(g.type==
"mouseout"){a=false;b("#avatars").mouseenter(function(){a=true}).mouseleave(function(){a=false})}if(g.type=="mouseover"){g=b(this).parents(".option");var k=g.offset();d=k.top;f=k.left+80;if(g=g.find(".avatars").html()){a=true;b("#avatars").empty().html(g)}}})},_getVotedAnswerString:function(){for(var a=0;a<pollInitData.answers.length;a++)if(pollInitData.answers[a].voted)return pollInitData.answers[a].answer;return""},".add-answer .cancel click":function(a,d){this._super(a,d);this.scrollApi.reinitialise()},
toggle:function(a){this[this.isShowed?"hide":"show"](a)}})});steal.loaded("app/show/theme5/poll.js");
steal("jquery/controller","jquery/view","jquery/view/ejs","app/show/theme5/poll.js",function(b){b.Controller("App.Show.Theme5.SettingsPoll",{defaults:{}},{actions:[],newAnswers:[],scrollApi:null,init:function(){this.setInnerHtml(pollInitData)},".tool click":function(a,d){d.preventDefault();d.stopPropagation();if(a[0].tagName.toLowerCase()=="a"){d=a.attr("rel");var f=a.closest(".option");a=a.closest(".answer-item");var g=a.data("new-answer"),k=a.data("answer-index");a=a.data("answer-id");if(f&&d){switch(d){case "hide":f.addClass("hidden").show().appendTo(".js-options-hidden");
f.find("answer-item").addClass(".another-ans");f.find(".tool.hide").removeClass("hide").addClass("unhide").attr({rel:"unhide",title:"Unhide"}).html("Unhide");this.find(".inactive-ans-toggle").show();break;case "unhide":f.removeClass("hidden").appendTo(".js-options-visible");f.find("answer-item").removeClass(".another-ans");f.find(".tool.unhide").removeClass("unhide").addClass("hide").attr({rel:"hide",title:"hide"}).html("Hide");this.find(".js-options-hidden").children().length||this.find(".inactive-ans-toggle").hide();
break;case "delete":f.remove();g&&delete this.newAnswers[k];this.find(".js-options-hidden").children().length||this.find(".inactive-ans-toggle").hide();break}this._applyScrolling();if(g){if(d=="hide"||d=="unhide")this.newAnswers[k].visible=d=="hide"?0:1}else{if(d=="hide"||d=="unhide"){f=b.inArray(a+"-"+(d=="hide"?"unhide":"hide"),this.actions);if(f>-1){this.actions.splice(f,1);return}}else if(d=="delete"){f=b.inArray(a+"-hide",this.actions);g=b.inArray(a+"-unhide",this.actions);if(f>-1||g>-1){f>-1&&
this.actions.splice(f,1);g>-1&&this.actions.splice(g,1)}}this.actions.push(a+"-"+d)}this.onchange()}}},".js-add-own-answer click":function(a,d){d.preventDefault();this.find(".js-add-own-answer-box").show().find("input").focus()},".js-add-own-answer-box input[name='own-answer'] keypress":function(a,d){if(d.keyCode==13){d.preventDefault();this._addNewAnswer()}},".js-add-own-answer-box input[name='own-answer'] blur":function(){this._addNewAnswer()},".inactive-ans-toggle click":function(){this.find(".js-options-hidden").toggle();
this._applyScrolling()},_addNewAnswer:function(){var a=this.find('input[name="own-answer"]'),d=b.trim(a.val());a.val("");if(d.length){a=this.newAnswers.length;this.newAnswers[a]={answer:d,visible:1};b('<div class="option" />').append(b('<div class="answer-item checkbox" data-new-answer="1" data-answer-index="'+a+'" />').append('<a class="tool delete" href="#" title="Delete" rel="delete">Delete</a>').append('<a class="tool hide" href="#" title="Hide" rel="hide">Hide</a>').append('<p><span class="answer-text">'+
d+"</span></p>")).appendTo(this.find(".js-options-visible"));this._applyScrolling();this.find(".js-add-own-answer-box input").focus()}},setInnerHtml:function(a){this.find(".inner-html").html("/js/app/show/theme5/views/poll-settings.ejs",a);this.find('[name="question"]').val(a.question);this.scrollApi=null;this._applyScrolling()},onshow:function(){this._applyScrolling()},onchange:function(){var a=!this.find(".js-options-visible").children().length&&!this.find(".js-options-hidden").children().length;
this.find(".empty-poll").css("display",a?"block":"none")},injectData:function(a){a.find('[name="poll_actions"]').val(this.getAssembledActions());this._addNewAnswer();for(var d=0;d<this.newAnswers.length;d++)this.newAnswers[d]&&a.append('<input type="hidden" class="new-ans-inp" name="new_answers['+d+'][answer]" value="'+this.newAnswers[d].answer+'" />').append('<input type="hidden" class="new-ans-inp" name="new_answers['+d+'][visible]" value="'+this.newAnswers[d].visible+'" />')},reset:function(a){a.find('[name="poll_actions"]').val("");
a.find(".new-ans-inp").remove();this.actions=[];this.newAnswers=[]},getAssembledActions:function(){return this.actions.join("|")},_applyScrolling:function(){var a=this.find(".options");if(a.length)if(this.scrollApi)this.scrollApi.reinitialise();else this.scrollApi=a.jScrollPane().data("jsp")}})});steal.loaded("app/show/theme5/settings_poll.js");
steal("jquery/controller","app/show/share.js",function(b){App.Show.Share("App.Show.Theme5.Share",{defaults:{},TAB_SHARE:"share",TAB_PUBLISH:"publish"},{$theme_code:"5",$switcherTw:null,$switcherFb:null,$infoBox:null,$shareButton:null,$m_spinner:null,$m_success:null,$m_error:null,$tabTitle:null,$captionTextarea:null,$blockInherit:null,$checkboxInherit:null,caption:null,lastShareCaption:null,lastPublishCaption:null,$curTab:null,init:function(){this.$switcherTw=this.find(".js-share-switch-tw");this.$switcherFb=
this.find(".js-share-switch-fb");this.$shareButton=this.find(".js-share-popup-share-button");this.$m_spinner=b(".js-share-m-spinner");this.$m_success=b(".js-share-m-success");this.$m_error=b(".js-share-m-error");this.$tabTitle=this.find(".js-share-tab-title");this.$captionTextarea=this.find(".js-share-caption-textarea");this.$blockInherit=this.find(".js-share-block-inherit");this.$checkboxInherit=this.find(".js-share-checkbox-inherit");this._super()},".js-share-head-switcher click":function(a,d){d.preventDefault();
this._changeTab(b(a).data("contentview"))},".js-share-checkbox-inherit click":function(a,d){d.preventDefault();this._checkboxIsActive(a)?this._checkboxOff(a):this._checkboxOn(a)},restorePopupProperties:function(a){this.initTabs(a)},_checkTabType:function(a){return a==App.Show.Theme5.Share.TAB_SHARE||a==App.Show.Theme5.Share.TAB_PUBLISH?true:false},_setTab:function(a){if(!this._checkTabType(a))return false;b(".head-switcher a").removeClass("active");b('.head-switcher a[data-contentview="'+a+'"]').addClass("active");
this.$curTab=a},resetTabs:function(){this.lastPublishCaption=this.lastShareCaption=null;this._checkboxOff(this.$checkboxInherit);this._changeTab(App.Show.Theme5.Share.TAB_SHARE)},initTabs:function(a){this.lastPublishCaption=this.lastShareCaption=null;if(!a.type)a.type=App.Show.Theme5.Share.TAB_SHARE;switch(a.type){case App.Show.Theme5.Share.TAB_SHARE:if(a.caption)this.lastShareCaption=a.caption;break;case App.Show.Theme5.Share.TAB_PUBLISH:if(a.caption)this.lastPublishCaption=a.caption;break}a.inherit?
this._checkboxOn(this.$checkboxInherit):this._checkboxOff(this.$checkboxInherit);a.tw&&this.switcherOn(this.$switcherTw);a.fb&&this.switcherOn(this.$switcherFb);this._changeTab(a.type)},_changeTab:function(a){if(!this._checkTabType(a))return false;this._setTab(a);switch(a){case App.Show.Theme5.Share.TAB_SHARE:this._setTab(a);this.$tabTitle.html(LNG["popup.shareCaption"]+":");this.lastPublishCaption=this.lastPublishCaption==null?"":this.$captionTextarea.val();a=this.options.captionModel?this.options.captionModel.attr("caption"):
"";this.$captionTextarea.val(this.lastShareCaption!=null?this.lastShareCaption:a);this._disableBlockInherit();this.setShareButtonText(LNG.share);break;case App.Show.Theme5.Share.TAB_PUBLISH:this._setTab(a);this.$tabTitle.html(LNG["popup.addCaption"]+":");this.lastShareCaption=this.$captionTextarea.val();this.$captionTextarea.val(this.lastPublishCaption!=null?this.lastPublishCaption:"");this._enableBlockInherit();this.setShareButtonText(LNG.publish);break}},setShareButtonText:function(){},_checkboxOn:function(a){a&&
!a.hasClass("js-disabled")&&a.addClass("switch-on")},_checkboxOff:function(a){a&&!a.hasClass("js-disabled")&&a.removeClass("switch-on")},_checkboxIsActive:function(a){if(a)return a.hasClass("switch-on");return false},_disableBlockInherit:function(){this.$blockInherit.addClass("switcher-disabled");this.$checkboxInherit.addClass("js-disabled")},_enableBlockInherit:function(){this.$blockInherit.removeClass("switcher-disabled");this.$checkboxInherit.removeClass("js-disabled")},_checkAuthPermission:function(){return!this.$curTab||
this.$curTab==App.Show.Theme5.Share.TAB_SHARE?false:true},openPopup:function(){var a=b("html").data("controllers")["app_show_theme"+LinkData.curTheme];a&&a.showSharePanel()},closePopup:function(){this.hideAllMessages()},".js-share-popup-share-button click":function(a,d){d.preventDefault();this._super(a,d);this.hideAllMessages();if(this._checkAuthPermission())if(!LinkData.isLogged){this.showError(LNG["popup.siginOrRegisterDot"]);return}this.publishOrShare()},".js-share-switch-tw click":function(a,
d){this._switchTwClickHandler(a,d,this._checkAuthPermission())},".js-share-switch-fb click":function(a,d){this._switchFbClickHandler(a,d,this._checkAuthPermission())},".js-share-login-tw click":function(a,d){this._loginTwClickHandler(a,d)},".js-share-login-fb click":function(a,d){this._loginFbClickHandler(a,d)},".head-switcher click":function(a,d){d.preventDefault()},getInheritParam:function(){return this._checkboxIsActive(this.$checkboxInherit)?1:0},getCaptionParam:function(){var a=this.$captionTextarea.val();
return a==this.$captionTextarea.attr("placeholder")?"":a},getActiveTab:function(){return this.$curTab},getPropertiesToCookie:function(){var a=this._super();a.caption=this.$captionTextarea.val();a.inherit=this.getInheritParam();a.type=this.getActiveTab();a.tw=this.switcherTwIsActive()?1:0;a.fb=this.switcherFbIsActive()?1:0;return a},publishOrShare:function(){var a={tw:this.switcherTwIsActive(),fb:this.switcherFbIsActive()};if(!(a.tw||a.fb)){this.showError(LNG["popup.pleaseSelectSocNet"]);return false}var d=
{"short":LinkData.shortUrl,inherit:this.getInheritParam(),caption:this.getCaptionParam()};if(d.caption.length>119){this.showError(LNG["caption.tooLong"]);return false}if(this.$curTab==App.Show.Theme5.Share.TAB_PUBLISH){hihit(this.getInheritParam()==1?1980:1979);this._publishLink(d,a)}else{hihit(1977);this._shareLink(d.caption,a)}},_getDataFromForm:function(){return{"short":LinkData.shortUrl,inherit:this.getInheritParam(),caption:this.getCaptionParam()}},_hihit:function(){}})});steal.loaded("app/show/theme5/share.js");
steal("jquery/controller","app/show/likes.js",function(){App.Show.Likes("App.Show.Theme5.Likes",{},{".js-like, .js-dislike click":function(b,a){this._super(b,a);b.addClass("onclick");setTimeout(function(){b.removeClass("onclick")},100)}})});steal.loaded("app/show/theme5/likes.js");
steal("jquery/controller","jquery/view","jquery/view/ejs","app/show/theme5/poll.js",function(b){App.Show.Poll("App.Show.Theme7.Poll",{},{pollData:null,addPollMode:false,init:function(){this.addPollMode=b(".js-poll-toggle").hasClass("js-add-poll");this.setInnerHtml(pollInitData,true);!this.addPollMode&&window.pollShowOnStartup&&this.show(true)},mouseenter:function(){},mouseleave:function(){window.cancelScrolling()},".js-hide-poll click":function(a,d){d.preventDefault();this.hide()},".checkbox click":function(a){this.find(".checkbox").removeClass("active-item");
a.addClass("active-item");this.find(".js-vote").removeClass("disabled")},".js-vote click":function(a,d){d.preventDefault();a=this.find(".checkbox.active-item");if(d=a.data("answer-id")){hihit(2285);this.vote(d,true,a)}},".js-cancel-vote click":function(a,d){d.preventDefault();hihit(2286);this.unvote()},".js-edit-poll click":function(a,d){d.preventDefault();this.showAnswersEdit()},".js-add-answer click":function(a,d){d.preventDefault();a=b('<div class="answer-holder">                     <input type="text" name="new_answers[]" value="">                     <a class="delete-answer js-delete-answer" href="#">delete</a>                 </div>            ');
a.appendTo(".js-answer-inputs");this.applyEditFormScrolling();(d=this._getScrollContainer())&&d.data("jsp").scrollTo(0,1E4);a.find("input").focus()},".js-delete-answer click":function(a,d){d.preventDefault();a=a.parent();d=a.data("answer-id");a.remove();this.applyEditFormScrolling();d&&this.find(".js-edit-poll-form .js-hidden-inputs").append('<input type="hidden" name="remove_answers[]" value="'+d+'">');(a=this._getScrollContainer())&&!a.data("jsp").getIsScrollableV()&&b(".jspPane").css("top","0px")},
".js-save-quest click":function(a,d){d.preventDefault();this.find(".js-edit-poll-form").submit()},".js-edit-poll-form submit":function(a,d){d.preventDefault();var f=this;a=a.serializeArray();a.push({name:"shortLink",value:LinkData.shortUrl});b.post("/ajax/save-poll-data",a,function(g){if(g.success){if(f.addPollMode){b(".js-poll-toggle").removeClass("js-add-poll");f.addPollMode=false}f.setEditFormHtml(g.html);f.hideAnswersEdit()}else alert(g.error)},"json")},".js-cancel-quest click":function(a,d){d.preventDefault();
this.hideAnswersEdit()},show:function(a){a||hihit(2283);this.element.show();this.addPollMode?this.showAnswersEdit():this.applyScrolling()},hide:function(){hihit(2284);this.element.hide()},toggleButtonClick:function(){this.element.is(":visible")?this.hide():this.show()},_getScrollContainer:function(){return this.find(".js-edit-poll-form")},applyScrolling:function(){var a=this.find(".options");if(a.length){var d=this.element.is(":visible");d||this.element.show();this.scrollApi=a.jScrollPane().data("jsp");
d||this.element.hide()}},applyEditFormScrolling:function(){var a=this._getScrollContainer();a.data("jsp")&&a.data("jsp").destroy();this._getScrollContainer().jScrollPane()},setInnerHtml:function(a,d){if(typeof a!="object"||a.theme!=LinkData.curTheme)refreshPage();else{!d&&this.scrollApi&&this.scrollApi.destroy();this.resultMode=a.resultMode;this.pollData=a;this.element[a.resultMode?"addClass":"removeClass"]("voted");var f="/js/app/show/theme7/views/"+(this.resultMode?"poll-voted.ejs":"poll.ejs");
this.find(".js-main-panel").html(f,a);d||this.applyScrolling();this.updateStat(a.numVotes)}},setEditFormHtml:function(a){if(a)this.pollData=a;this.find(".js-edit-block").html("/js/app/show/theme7/views/poll-edit.ejs",this.pollData);this.applyEditFormScrolling()},showAnswersEdit:function(){this.find(".js-view-block").hide();this.find(".js-edit-block").show();this.setEditFormHtml()},hideAnswersEdit:function(){this.find(".js-edit-block").empty().hide();this.find(".js-view-block").show();this.setInnerHtml(this.pollData)},
vote:function(a,d,f){var g=this,k=0;switch(LinkData.curTheme){case Themes.THEME_1:k=d?1847:0;break;case Themes.THEME_2:k=d?1971:0;break;case Themes.THEME_3:k=d?1856:0;break;case Themes.THEME_4:k=d?1981:0;break}k&&hihit(k);if(d){f.find(".answer-text").text();d={shortLink:LinkData.shortUrl,answerId:a,answersOrder:this._getAnswersOrder()};Registry.lastVotedAnswerId=a;b.post("/ajax/vote",d,function(o){if(o.success){g.onchange(o);g.setInnerHtml(o.html);g._scrollToAnswer(g.find(".checkbox.checked"))}else alert(o.error)},
"json")}else this.unvote()},updateStat:function(a){this.addPollMode||b(".js-poll-toggle").html(a)}})});steal.loaded("app/show/theme7/poll.js");steal("jquery/controller","app/show/popup.js",function(){App.Show.Popup("App.Show.Popup.FacebookAw",{name:"facebook-aw",_addClass:"popup-autowrap popup-autowrap-tweet2",".js-btn-signin-tw click":function(b,a){this._super(b,a);Cookie.set("t7_fb_popup_autowrap_on",true,{expires:0,path:"/"})}})});steal.loaded("app/show/theme7/popup/facebook-aw.js");
steal("jquery/controller","app/show/theme9/popup/base-other-tweets.js",function(b){App.Show.Popup.BaseOtherTweets("App.Show.Popup.OtherTweets7",{defaults:{format:{singular:"1 other tweet",plural:"@count other tweets"}}},{scrollPane:b(".tweets-list"),init:function(){this.getTotalCount();this.initScroll();this.initCloseHandler()},formatPlural:function(a){return a==1?this.options.format.singular:this.options.format.plural.replace("@count",a)},getTotalCount:function(){var a=[],d=this;a.push({linkId:LinkData.id,
hash:LinkData.linkHash});b.post("/ajax/get-other-tweets-count",{data:a},function(f){var g=LinkData.id;if(f.count[g]!=0){d.find(".js-tweets-count").html(d.formatPlural(f.count[g]));d.find("> div").animate({opacity:1},500);d.loadMoreTweets()}})},setWidthWithScroll:function(){this.find(".jspVerticalBar").length&&this.find(".jspPane").attr("style",function(a,d){return d+" ;width: 280px !important;"})},initCloseHandler:function(){var a=this;b(window).keydown(function(d){d.keyCode==27&&a.closeOtherTweetsBlock()})},
closeOtherTweetsBlock:function(a){a=a||b(".other-tweets");a.addClass("open");this.find(".tweets-list-holder").css("visibility","hidden");window.cancelScrolling()},loadMoreTweets:function(){if(!this.needToLoadMore)return false;var a=this;a.isLoadingTweets=true;b(".js-ot-spinner").show();var d=b(".tweets-list").data("tweets-cnt")+1;b.get("/ajax/load-other-tweets-raw",{curr_tweets_cnt:d,hash:LinkData.linkHash,linkId:LinkData.id,cur_theme:LinkData.curTheme},function(f){if(f.success)a.appendNewTweets(f.tweets);
else a.needToLoadMore=false;a.scrollPane.data("tweets-cnt",f.new_tweets_cnt);if(!f.thereIsMoreTweets)a.needToLoadMore=false;a.setWidthWithScroll();a.isLoadingTweets=false;b(".js-ot-spinner").hide()})},appendNewTweets:function(a){for(var d="",f=0;f<a.length;f++)d+=b.View("linkReplyEJS",a[f]);this.scrollPane.find(".jspPane").append(d);this.scrollPane.css("height",Math.min(260,this.scrollPane.find(".jspPane").innerHeight()));this.scrollPane.data("jsp").reinitialise()}})});steal.loaded("app/show/theme7/popup/other-tweets.js");
steal("jquery/controller","app/show/likes.js",function(){App.Show.Likes("App.Show.Theme7.Likes",{},{ignoreNeedSignIn:true,"{Theme.Models.Likes} created":function(){this.find(".js-like").hasClass("disabled")||this.find(".js-like").addClass("disabled")}})});steal.loaded("app/show/theme7/likes.js");
steal("jquery/controller","app/show/popup.js",function(b){App.Show.Popup("App.Show.Popup.BaseOtherTweets",{isLoadingTweets:false,needToLoadMore:true,initScroll:function(){var a=this;this.find(".scroll-pane").jScrollPane({verticalDragMinHeight:30}).bind("jsp-scroll-y",function(d,f,g,k){k&&!a.isLoadingTweets&&a.needToLoadMore&&a.loadMoreTweets();b(".tweets-list").data("hover")||b(".jspDrag").trigger("mouseup")});this.setWidthWithScroll();this.initContainerHoverHandler()},initContainerHoverHandler:function(){b(".tweets-list").hover(function(){b(this).data("hover",
true)},function(){b(this).data("hover",false)})},loadMoreTweets:function(){var a=this;a.isLoadingTweets=true;b(".js-ot-spinner").show();var d=b(".tweets-list").data("tweets-cnt")+1,f=b(".tweets-list").data("link-hash");b.get("/ajax/load-other-tweets",{curr_tweets_cnt:d,hash:f,cur_link_id:LinkData.id,cur_theme:LinkData.curTheme},function(g){if(g.success){b(".tweets-list .jspPane").append(g.html);b(".scroll-pane").data("jsp").reinitialise();b(".tweets-list").data("tweets-cnt",g.new_tweets_cnt)}else a.needToLoadMore=
false;a.setWidthWithScroll();a.isLoadingTweets=false;b(".js-ot-spinner").hide()})}})});steal.loaded("app/show/theme9/popup/base-other-tweets.js");steal("jquery/controller","app/tools/mobile.js","app/classes/mobile-popups.js",function(b){b.Controller("App.ShowMobile.Controller",{initAllMobileThemes:function(){}},{init:function(){App.ShowMobile.Controller.initAllMobileThemes()}})});steal.loaded("app/show/show_mobile.js");
steal("jquery/class").then(function(){$.Class("Mobile",{_widthMultiplier:1,_isIos:null,_scaling:{deviceScale:null,interval:200,handler:null,repeatTimeoutHandler:null,callbacks:[]},init:function(){(this._isIos=/(iPhone|iPad|iPod)\sOS\s\d/.test(navigator.userAgent||""))||this._checkMultiplier()},_checkMultiplier:function(){var b,a;b=$(window).width()||0;a=screen.width||0;if(b&&a)if(!(Math.round(Math.abs(1-b/a)*100)<15||!window.devicePixelRatio))if(Math.round(Math.abs(1-b/(a*window.devicePixelRatio))*
100)<15)this._widthMultiplier=window.devicePixelRatio},getHeight:function(){var b=screen.height;if(this.isIOS())switch(window.orientation){case 0:b=screen.height;break;case -90:b=screen.width;break;case 90:b=screen.width;break;case 180:b=screen.height;break}else b*=this._widthMultiplier;return b},getWidth:function(){var b=screen.width;if(Mobile.isIOS()){switch(window.orientation){case 0:b=screen.width;break;case -90:b=screen.height;break;case 90:b=screen.height;break;case 180:b=screen.width;break}b*=
Mobile.getRatio()}else b*=this._widthMultiplier;return b},getRatio:function(){return window.devicePixelRatio||1},isIOS:function(){return this._isIos},hideAddressBar:function(){setTimeout(function(){window.scrollTo(0,1)},0)},isLandscape:function(){if(window.orientation&&(window.orientation==90||window.orientation==-90))return true;return false},getScale:function(){var b=$(window).width(),a=window.innerWidth;b=b&&a?b/a:1;return b<1?1:b},triggerScale:function(){this.deviceScale+=1.0E-4},onScale:function(b){var a=
this;this._scaling.callbacks.push(b);if(!this._scaling.handler){var d=function(f){for(var g=0,k=a._scaling.callbacks.length;g<k;g++)a._scaling.callbacks[g](f)};this._scaling.handler=setInterval(function(){var f=a.getScale();if(a.deviceScale&&a.deviceScale!=f){a._scaling.repeatTimeoutHandler&&clearTimeout(a._scaling.repeatTimeoutHandler);d(f);a._scaling.repeatTimeoutHandler=setTimeout(function(){a._scaling.repeatTimeoutHandler=null;d(f)},200)}a.deviceScale=f},this._scaling.interval)}},isElmNeedZoom:function(b){var a=
false,d=window.innerWidth,f=window.innerHeight;if(f&&d){b=Math.min(f/b.outerHeight(),d/b.outerWidth())*0.9;if(b<1)a*=b>0.2?b:0.2}return a}},{})});steal.loaded("app/tools/mobile.js");
steal("jquery/class","app/classes/popup-loader.js","app/show/theme8/popup/aw-mobile.js","app/show/theme8/popup/autopost-mobile.js","app/show/theme8/popup/iframe-fail-mobile.js",function(b){function a(d){return new App.Class.PopupLoader(d)}b.Class("MobilePopups",{loaded:{},popupsMap:{iframeFail:function(){return a(PopupMobile.IframeFail)},autopost:function(){return a(PopupMobile.Autopost)},aw:function(){return a(PopupMobile.Aw)}},get:function(d,f){if(!this.loaded[d]){if(!this.popupsMap[d])throw new Error("Popup '"+
d+"' not found");try{this.loaded[d]=this.popupsMap[d](f)}catch(g){}}return this.loaded[d]}},{})});steal.loaded("app/classes/mobile-popups.js");
steal("app/popups/base-mobile-popup.js","app/tools/mobile.js",function(b){App.BaseMobilePopup("PopupMobile.Aw",{selector:".js-aw3",request:{name:"show/mobile/aw-mobile"}},{name:"AwMobile",onShow:function(){hihit(2199);lnEvent("aw open",this.name);this.scale()},onHide:function(){hihit(2201);lnEvent("aw close",this.name)},".js-btn-signin-tw click":function(a,d){d.preventDefault();lnEvent("aw login",this.name);Cookie.set("t6_autowrap_on",1);Cookie.set("autowrap_from",{popup:this.name,theme:LinkData.curTheme,
aw_counter:2202});hihit(2200);Cookie.set("t6_aw_tw_auth","2");Cookie.set("auth_from_theme",LinkData.parentTheme);window.twAuth()},".js-close click":function(a,d){d.preventDefault();Cookie.unset("t6_autowrap_on");this.hide()},scale:function(){if(this.isDisplayed){var a;a=b("#header").width()/Mobile.getWidth();a=a>1?a:1;a*=Mobile.getRatio();a/=Mobile.getScale();if(Mobile.getRatio()>2&&Mobile.isLandscape())a/=1.3;this._applyZoomToPopup(a);var d=window.innerWidth,f=window.innerHeight;if(f&&d){var g=b(".js-mobile-popup-box");
d=Math.min(f/g.height(),d/g.width())*0.9;if(d<1){a*=d>0.2?d:0.2;this._applyZoomToPopup(a)}}}},_applyZoomToPopup:function(a){if(this.isDisplayed){this.find(".js-illustration-h").hide();this.find(".js-illustration-v").show();if(Mobile.isLandscape()){b(".js-illustration-v").hide();b(".js-illustration-h").show()}b(".js-aw3 .js-close img").width(20*a);b(".js-aw3 h1, .js-aw3 h2").css("font-size",15*a+"px");b(".js-aw3 .js-btn-signin-tw").css("font-size",17*a+"px")}}})});steal.loaded("app/show/theme8/popup/aw-mobile.js");
steal("app/popups/base-mobile-popup.js","app/tools/mobile.js",function(b){App.BaseMobilePopup("PopupMobile.Autopost",{selector:".js-autopost",request:{name:"show/mobile/autopost-mobile"}},{name:"AutopostMobile",mode:"welcome",onShow:function(){lnEvent("autopost-popup open",this.mode+"-mobile");hihit(3193);b("body").addClass("with-ap-popup")},onHide:function(){lnEvent("autopost-popup close",this.mode+"-mobile");hihit(3195);b("body").removeClass("with-ap-popup")},".auto-post-on click":function(a,d){var f=
this;this.autoPostClick=true;d.preventDefault();a.data("orig-text",a.text());a.text(a.data("turn-msg"));lnEvent("autopost-popup click",this.mode+"-mobile");b.post("/ajax/save-settings-value",{name:"is_silent_user",value:1},function(g){a.text(a.data("orig-text"));if(g.success){f._slBob3();hihit(3194)}else alert(g.error)},"json")},_slBob3:function(){var a=this;this.find(".screen-1").hide();this.find(".screen-2").show();setTimeout(function(){a.hide()},5E3)},".js-close click":function(a,d){d.preventDefault();
this.hide()}})});steal.loaded("app/show/theme8/popup/autopost-mobile.js");
steal("app/popups/base-mobile-popup.js","app/tools/mobile.js",function(b){App.BaseMobilePopup("PopupMobile.IframeFail",{selector:".js-popup-iframe-fail-mobile",request:{name:"show/mobile/iframe-fail-mobile"}},{name:"IframeFailMobile",init:function(){},onShow:function(){b("body").addClass("with-ap-popup");lnEvent("iframefail-popup open","mobile");hihit(3569)},onHide:function(){b("body").removeClass("with-ap-popup");lnEvent("iframefail-popup skip","mobile");hihit(3570)},".frame-crash-button click":function(a,
d){lnEvent("iframefail-popup redirect","mobile");hihit(3571);d.preventDefault();window.location=b("#source_site").attr("src").toString()},".frame-crash-link click":function(a,d){d.preventDefault();this.hide()}})});steal.loaded("app/show/theme8/popup/iframe-fail-mobile.js");
steal("jquery/controller",function(b){b.Controller("App.BaseMobilePopup",{popupHtmlBox:".js-popups-html",selector:null,request:null,create:function(a){if(!this.selector)throw new Error("empty selector for popup");return new this(b.isFunction(this.selector)?this.selector(a):this.selector,a)},loadHtml:function(a,d){var f=this,g=b.isFunction(this.request)?this.request(d||{}):this.request;b.get("/ajax/get-popup-html",g,function(k){b(f.popupHtmlBox).append(k);k=f.create(d);a&&a(k)})}},{onHide:null,onShow:null,
isDisplayed:false,init:function(){},show:function(){this.element.show();this.isDisplayed=true;this.onShow&&this.onShow()},hide:function(){this.element.hide();this.isDisplayed=false;this.onHide&&this.onHide()}})});steal.loaded("app/popups/base-mobile-popup.js");steal("jquery/controller","app/show/likes.js",function(){App.Show.Likes("App.Show.Theme9.Likes",{},{ignoreNeedSignIn:true,"{Theme.Models.Likes} created":function(){this.find(".js-like").hasClass("green-like")&&this.find(".js-like").removeClass("green-like")}})});
steal.loaded("app/show/theme9/likes.js");
(function(b,a){function d(o,s){var A;A=o.nodeName.toLowerCase();if("area"===A){s=o.parentNode;A=s.name;if(!o.href||!A||s.nodeName.toLowerCase()!=="map")return false;o=b("img[usemap=#"+A+"]")[0];return!!o&&f(o)}return(/input|select|textarea|button|object/.test(A)?!o.disabled:"a"===A?o.href||s:s)&&f(o)}function f(o){return b.expr.filters.visible(o)&&!b(o).parents().andSelf().filter(function(){return b.css(this,"visibility")==="hidden"}).length}var g=0,k=/^ui-id-\d+$/;b.ui=b.ui||{};if(!b.ui.version){b.extend(b.ui,
{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({_focus:b.fn.focus,focus:function(o,s){return typeof o==="number"?this.each(function(){var A=this;setTimeout(function(){b(A).focus();s&&s.call(A)},o)}):this._focus.apply(this,arguments)},scrollParent:function(){var o;
o=b.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.css(this,"position"))&&/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!o.length?b(document):
o},zIndex:function(o){if(o!==a)return this.css("zIndex",o);if(this.length){o=b(this[0]);for(var s;o.length&&o[0]!==document;){s=o.css("position");if(s==="absolute"||s==="relative"||s==="fixed"){s=parseInt(o.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}o=o.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id)this.id="ui-id-"+ ++g})},removeUniqueId:function(){return this.each(function(){k.test(this.id)&&b(this).removeAttr("id")})}});b.extend(b.expr[":"],{data:b.expr.createPseudo?
b.expr.createPseudo(function(o){return function(s){return!!b.data(s,o)}}):function(o,s,A){return!!b.data(o,A[3])},focusable:function(o){return d(o,!isNaN(b.attr(o,"tabindex")))},tabbable:function(o){var s=b.attr(o,"tabindex"),A=isNaN(s);return(A||s>=0)&&d(o,!A)}});b(function(){var o=document.body,s=o.appendChild(s=document.createElement("div"));b.extend(s.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=s.offsetHeight===100;b.support.selectstart="onselectstart"in
s;o.removeChild(s).style.display="none"});b("<a>").outerWidth(1).jquery||b.each(["Width","Height"],function(o,s){function A(ia,ha,na,Da){b.each(G,function(){ha-=parseFloat(b.css(ia,"padding"+this))||0;if(na)ha-=parseFloat(b.css(ia,"border"+this+"Width"))||0;if(Da)ha-=parseFloat(b.css(ia,"margin"+this))||0});return ha}var G=s==="Width"?["Left","Right"]:["Top","Bottom"],H=s.toLowerCase(),V={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};
b.fn["inner"+s]=function(ia){if(ia===a)return V["inner"+s].call(this);return this.each(function(){b(this).css(H,A(this,ia)+"px")})};b.fn["outer"+s]=function(ia,ha){if(typeof ia!=="number")return V["outer"+s].call(this,ia);return this.each(function(){b(this).css(H,A(this,ia,true,ha)+"px")})}});if(b("<a>").data("a-b","a").removeData("a-b").data("a-b"))b.fn.removeData=function(o){return function(s){return arguments.length?o.call(this,b.camelCase(s)):o.call(this)}}(b.fn.removeData);(function(){var o=
/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];b.ui.ie=o.length?true:false;b.ui.ie6=parseFloat(o[1],10)===6})();b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(o){o.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.extend(b.ui,{plugin:{add:function(o,s,A){var G;o=b.ui[o].prototype;for(G in A){o.plugins[G]=o.plugins[G]||[];o.plugins[G].push([s,A[G]])}},
call:function(o,s,A){var G=o.plugins[s];if(!(!G||!o.element[0].parentNode||o.element[0].parentNode.nodeType===11))for(s=0;s<G.length;s++)o.options[G[s][0]]&&G[s][1].apply(o.element,A)}},contains:b.contains,hasScroll:function(o,s){if(b(o).css("overflow")==="hidden")return false;s=s&&s==="left"?"scrollLeft":"scrollTop";var A=false;if(o[s]>0)return true;o[s]=1;A=o[s]>0;o[s]=0;return A},isOverAxis:function(o,s,A){return o>s&&o<s+A},isOver:function(o,s,A,G,H,V){return b.ui.isOverAxis(o,A,H)&&b.ui.isOverAxis(s,
G,V)}})}})(jQuery);
(function(b,a){var d=0,f=Array.prototype.slice,g=b.cleanData;b.cleanData=function(k){for(var o=0,s;(s=k[o])!=null;o++)try{b(s).triggerHandler("remove")}catch(A){}g(k)};b.widget=function(k,o,s){var A,G,H,V,ia=k.split(".")[0];k=k.split(".")[1];A=ia+"-"+k;if(!s){s=o;o=b.Widget}b.expr[":"][A.toLowerCase()]=function(ha){return!!b.data(ha,A)};b[ia]=b[ia]||{};G=b[ia][k];H=b[ia][k]=function(ha,na){if(!this._createWidget)return new H(ha,na);arguments.length&&this._createWidget(ha,na)};b.extend(H,G,{version:s.version,
_proto:b.extend({},s),_childConstructors:[]});V=new o;V.options=b.widget.extend({},V.options);b.each(s,function(ha,na){if(b.isFunction(na))s[ha]=function(){var Da=function(){return o.prototype[ha].apply(this,arguments)},Ja=function(Ka){return o.prototype[ha].apply(this,Ka)};return function(){var Ka=this._super,ma=this._superApply,O;this._super=Da;this._superApply=Ja;O=na.apply(this,arguments);this._super=Ka;this._superApply=ma;return O}}()});H.prototype=b.widget.extend(V,{widgetEventPrefix:G?V.widgetEventPrefix:
k},s,{constructor:H,namespace:ia,widgetName:k,widgetBaseClass:A,widgetFullName:A});if(G){b.each(G._childConstructors,function(ha,na){ha=na.prototype;b.widget(ha.namespace+"."+ha.widgetName,H,na._proto)});delete G._childConstructors}else o._childConstructors.push(H);b.widget.bridge(k,H)};b.widget.extend=function(k){for(var o=f.call(arguments,1),s=0,A=o.length,G,H;s<A;s++)for(G in o[s]){H=o[s][G];if(o[s].hasOwnProperty(G)&&H!==a)k[G]=b.isPlainObject(H)?b.isPlainObject(k[G])?b.widget.extend({},k[G],
H):b.widget.extend({},H):H}return k};b.widget.bridge=function(k,o){var s=o.prototype.widgetFullName||k;b.fn[k]=function(A){var G=typeof A==="string",H=f.call(arguments,1),V=this;A=!G&&H.length?b.widget.extend.apply(null,[A].concat(H)):A;G?this.each(function(){var ia,ha=b.data(this,s);if(!ha)return b.error("cannot call methods on "+k+" prior to initialization; attempted to call method '"+A+"'");if(!b.isFunction(ha[A])||A.charAt(0)==="_")return b.error("no such method '"+A+"' for "+k+" widget instance");
ia=ha[A].apply(ha,H);if(ia!==ha&&ia!==a){V=ia&&ia.jquery?V.pushStack(ia.get()):ia;return false}}):this.each(function(){var ia=b.data(this,s);ia?ia.option(A||{})._init():b.data(this,s,new o(A,this))});return V}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(k,o){o=b(o||this.defaultElement||this)[0];this.element=b(o);this.uuid=d++;this.eventNamespace=
"."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),k);this.bindings=b();this.hoverable=b();this.focusable=b();if(o!==this){b.data(o,this.widgetName,this);b.data(o,this.widgetFullName,this);this._on(true,this.element,{remove:function(s){s.target===o&&this.destroy()}});this.document=b(o.style?o.ownerDocument:o.document||o);this.window=b(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());
this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},
_destroy:b.noop,widget:function(){return this.element},option:function(k,o){var s=k,A,G,H;if(arguments.length===0)return b.widget.extend({},this.options);if(typeof k==="string"){s={};A=k.split(".");k=A.shift();if(A.length){G=s[k]=b.widget.extend({},this.options[k]);for(H=0;H<A.length-1;H++){G[A[H]]=G[A[H]]||{};G=G[A[H]]}k=A.pop();if(o===a)return G[k]===a?null:G[k];G[k]=o}else{if(o===a)return this.options[k]===a?null:this.options[k];s[k]=o}}this._setOptions(s);return this},_setOptions:function(k){var o;
for(o in k)this._setOption(o,k[o]);return this},_setOption:function(k,o){this.options[k]=o;if(k==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!o).attr("aria-disabled",o);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(k,o,s){var A,G=this;if(typeof k!=="boolean"){s=o;o=
k;k=false}if(s){o=A=b(o);this.bindings=this.bindings.add(o)}else{s=o;o=this.element;A=this.widget()}b.each(s,function(H,V){function ia(){if(!(!k&&(G.options.disabled===true||b(this).hasClass("ui-state-disabled"))))return(typeof V==="string"?G[V]:V).apply(G,arguments)}if(typeof V!=="string")ia.guid=V.guid=V.guid||ia.guid||b.guid++;var ha=H.match(/^(\w+)\s*(.*)$/);H=ha[1]+G.eventNamespace;(ha=ha[2])?A.delegate(ha,H,ia):o.bind(H,ia)})},_off:function(k,o){o=(o||"").split(" ").join(this.eventNamespace+
" ")+this.eventNamespace;k.unbind(o).undelegate(o)},_delay:function(k,o){function s(){return(typeof k==="string"?A[k]:k).apply(A,arguments)}var A=this;return setTimeout(s,o||0)},_hoverable:function(k){this.hoverable=this.hoverable.add(k);this._on(k,{mouseenter:function(o){b(o.currentTarget).addClass("ui-state-hover")},mouseleave:function(o){b(o.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(k){this.focusable=this.focusable.add(k);this._on(k,{focusin:function(o){b(o.currentTarget).addClass("ui-state-focus")},
focusout:function(o){b(o.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(k,o,s){var A,G=this.options[k];s=s||{};o=b.Event(o);o.type=(k===this.widgetEventPrefix?k:this.widgetEventPrefix+k).toLowerCase();o.target=this.element[0];if(k=o.originalEvent)for(A in k)A in o||(o[A]=k[A]);this.element.trigger(o,s);return!(b.isFunction(G)&&G.apply(this.element[0],[o].concat(s))===false||o.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(k,o){b.Widget.prototype["_"+k]=
function(s,A,G){if(typeof A==="string")A={effect:A};var H,V=!A?k:A===true||typeof A==="number"?o:A.effect||o;A=A||{};if(typeof A==="number")A={duration:A};H=!b.isEmptyObject(A);A.complete=G;A.delay&&s.delay(A.delay);if(H&&b.effects&&(b.effects.effect[V]||b.uiBackCompat!==false&&b.effects[V]))s[k](A);else V!==k&&s[V]?s[V](A.duration,A.easing,G):s.queue(function(ia){b(this)[k]();G&&G.call(s[0]);ia()})}});if(b.uiBackCompat!==false)b.Widget.prototype._getCreateOptions=function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]}})(jQuery);
(function(b){var a=false;b(document).mouseup(function(){a=false});b.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(f){return d._mouseDown(f)}).bind("click."+this.widgetName,function(f){if(true===b.data(f.target,d.widgetName+".preventClickEvent")){b.removeData(f.target,d.widgetName+".preventClickEvent");f.stopImmediatePropagation();return false}});this.started=
false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!a){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var f=this,g=d.which===1,k=typeof this.options.cancel==="string"&&d.target.nodeName?b(d.target).closest(this.options.cancel).length:false;if(!g||k||!this._mouseCapture(d))return true;
this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){f.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=this._mouseStart(d)!==false;if(!this._mouseStarted){d.preventDefault();return true}}true===b.data(d.target,this.widgetName+".preventClickEvent")&&b.removeData(d.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(o){return f._mouseMove(o)};this._mouseUpDelegate=
function(o){return f._mouseUp(o)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);d.preventDefault();return a=true}},_mouseMove:function(d){if(b.ui.ie&&!(document.documentMode>=9)&&!d.button)return this._mouseUp(d);if(this._mouseStarted){this._mouseDrag(d);return d.preventDefault()}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,d)!==false)?this._mouseDrag(d):
this._mouseUp(d);return!this._mouseStarted},_mouseUp:function(d){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;d.target===this._mouseDownEvent.target&&b.data(d.target,this.widgetName+".preventClickEvent",true);this._mouseStop(d)}return false},_mouseDistanceMet:function(d){return Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-
d.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function(b){b.widget("ui.draggable",b.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(a){var d=this.options;if(this.helper||d.disabled||b(a.target).is(".ui-resizable-handle"))return false;
this.handle=this._getHandle(a);if(!this.handle)return false;b(d.iframeFix===true?"iframe":d.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(b(this).offset()).appendTo("body")});return true},_mouseStart:function(a){var d=this.options;this.helper=this._createHelper(a);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();
if(b.ui.ddmanager)b.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);
this.originalPageX=a.pageX;this.originalPageY=a.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);d.containment&&this._setContainment();if(this._trigger("start",a)===false){this._clear();return false}this._cacheHelperProportions();b.ui.ddmanager&&!d.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,a);this._mouseDrag(a,true);b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,a);return true},_mouseDrag:function(a,d){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");
if(!d){d=this._uiHash();if(this._trigger("drag",a,d)===false){this._mouseUp({});return false}this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";b.ui.ddmanager&&b.ui.ddmanager.drag(this,a);return false},_mouseStop:function(a){var d=false;if(b.ui.ddmanager&&!this.options.dropBehaviour)d=b.ui.ddmanager.drop(this,a);if(this.dropped){d=this.dropped;
this.dropped=false}for(var f=this.element[0],g=false;f&&(f=f.parentNode);)if(f==document)g=true;if(!g&&this.options.helper==="original")return false;if(this.options.revert=="invalid"&&!d||this.options.revert=="valid"&&d||this.options.revert===true||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)){var k=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){k._trigger("stop",a)!==false&&k._clear()})}else this._trigger("stop",
a)!==false&&this._clear();return false},_mouseUp:function(a){b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,a);return b.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var d=!this.options.handle||!b(this.options.handle,this.element).length?true:false;b(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==
a.target)d=true});return d},_createHelper:function(a){var d=this.options;a=b.isFunction(d.helper)?b(d.helper.apply(this.element[0],[a])):d.helper=="clone"?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo(d.appendTo=="parent"?this.element[0].parentNode:d.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(b.isArray(a))a=
{left:+a[0],top:+a[1]||0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&
b.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&b.ui.ie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();
return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment=="parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[a.containment=="document"?0:b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:b(window).scrollLeft())+
b(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:b(window).scrollTop())+(b(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){a=b(a.containment);var d=a[0];if(d){a.offset();var f=b(d).css("overflow")!="hidden";this.containment=[(parseInt(b(d).css("borderLeftWidth"),
10)||0)+(parseInt(b(d).css("paddingLeft"),10)||0),(parseInt(b(d).css("borderTopWidth"),10)||0)+(parseInt(b(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(b(d).css("borderLeftWidth"),10)||0)-(parseInt(b(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(b(d).css("borderTopWidth"),10)||0)-(parseInt(b(d).css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top-this.margins.bottom];this.relative_container=a}}else if(a.containment.constructor==Array)this.containment=a.containment},_convertPositionTo:function(a,d){if(!d)d=this.position;a=a=="absolute"?1:-1;var f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:d.top+this.offset.relative.top*a+this.offset.parent.top*a-(this.cssPosition=="fixed"?
-this.scrollParent.scrollTop():g?0:f.scrollTop())*a,left:d.left+this.offset.relative.left*a+this.offset.parent.left*a-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*a}},_generatePosition:function(a){var d=this.options,f=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName),k=a.pageX,o=a.pageY;if(this.originalPosition){var s;if(this.containment){if(this.relative_container){s=
this.relative_container.offset();s=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]}else s=this.containment;if(a.pageX-this.offset.click.left<s[0])k=s[0]+this.offset.click.left;if(a.pageY-this.offset.click.top<s[1])o=s[1]+this.offset.click.top;if(a.pageX-this.offset.click.left>s[2])k=s[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>s[3])o=s[3]+this.offset.click.top}if(d.grid){o=d.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/
d.grid[1])*d.grid[1]:this.originalPageY;o=s?!(o-this.offset.click.top<s[1]||o-this.offset.click.top>s[3])?o:!(o-this.offset.click.top<s[1])?o-d.grid[1]:o+d.grid[1]:o;k=d.grid[0]?this.originalPageX+Math.round((k-this.originalPageX)/d.grid[0])*d.grid[0]:this.originalPageX;k=s?!(k-this.offset.click.left<s[0]||k-this.offset.click.left>s[2])?k:!(k-this.offset.click.left<s[0])?k-d.grid[0]:k+d.grid[0]:k}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==
"fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop()),left:k-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(a,d,f){f=f||this._uiHash();b.ui.plugin.call(this,a,[d,f]);if(a=="drag")this.positionAbs=
this._convertPositionTo("absolute");return b.Widget.prototype._trigger.call(this,a,d,f)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.ui.plugin.add("draggable","connectToSortable",{start:function(a,d){var f=b(this).data("draggable"),g=f.options,k=b.extend({},d,{item:f.element});f.sortables=[];b(g.connectToSortable).each(function(){var o=b.data(this,"sortable");if(o&&!o.options.disabled){f.sortables.push({instance:o,
shouldRevert:o.options.revert});o.refreshPositions();o._trigger("activate",a,k)}})},stop:function(a,d){var f=b(this).data("draggable"),g=b.extend({},d,{item:f.element});b.each(f.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;f.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;f.options.helper=="original"&&this.instance.currentItem.css({top:"auto",
left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",a,g)}})},drag:function(a,d){var f=b(this).data("draggable"),g=this;b.each(f.sortables,function(){var k=false,o=this;this.instance.positionAbs=f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){k=true;b.each(f.sortables,function(){this.instance.positionAbs=f.positionAbs;this.instance.helperProportions=
f.helperProportions;this.instance.offset.click=f.offset.click;if(this!=o&&this.instance._intersectsWith(this.instance.containerCache)&&b.ui.contains(o.instance.element[0],this.instance.element[0]))k=false;return k})}if(k){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=b(g).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return d.helper[0]};
a.target=this.instance.currentItem[0];this.instance._mouseCapture(a,true);this.instance._mouseStart(a,true,true);this.instance.offset.click.top=f.offset.click.top;this.instance.offset.click.left=f.offset.click.left;this.instance.offset.parent.left-=f.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=f.offset.parent.top-this.instance.offset.parent.top;f._trigger("toSortable",a);f.dropped=this.instance.element;f.currentItem=f.element;this.instance.fromOutside=f}this.instance.currentItem&&
this.instance._mouseDrag(a)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",a,this.instance._uiHash(this.instance));this.instance._mouseStop(a,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();f._trigger("fromSortable",a);f.dropped=false}})}});b.ui.plugin.add("draggable","cursor",
{start:function(){var a=b("body"),d=b(this).data("draggable").options;if(a.css("cursor"))d._cursor=a.css("cursor");a.css("cursor",d.cursor)},stop:function(){var a=b(this).data("draggable").options;a._cursor&&b("body").css("cursor",a._cursor)}});b.ui.plugin.add("draggable","opacity",{start:function(a,d){a=b(d.helper);d=b(this).data("draggable").options;if(a.css("opacity"))d._opacity=a.css("opacity");a.css("opacity",d.opacity)},stop:function(a,d){a=b(this).data("draggable").options;a._opacity&&b(d.helper).css("opacity",
a._opacity)}});b.ui.plugin.add("draggable","scroll",{start:function(){var a=b(this).data("draggable");if(a.scrollParent[0]!=document&&a.scrollParent[0].tagName!="HTML")a.overflowOffset=a.scrollParent.offset()},drag:function(a){var d=b(this).data("draggable"),f=d.options,g=false;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!f.axis||f.axis!="x")if(d.overflowOffset.top+d.scrollParent[0].offsetHeight-a.pageY<f.scrollSensitivity)d.scrollParent[0].scrollTop=g=d.scrollParent[0].scrollTop+
f.scrollSpeed;else if(a.pageY-d.overflowOffset.top<f.scrollSensitivity)d.scrollParent[0].scrollTop=g=d.scrollParent[0].scrollTop-f.scrollSpeed;if(!f.axis||f.axis!="y")if(d.overflowOffset.left+d.scrollParent[0].offsetWidth-a.pageX<f.scrollSensitivity)d.scrollParent[0].scrollLeft=g=d.scrollParent[0].scrollLeft+f.scrollSpeed;else if(a.pageX-d.overflowOffset.left<f.scrollSensitivity)d.scrollParent[0].scrollLeft=g=d.scrollParent[0].scrollLeft-f.scrollSpeed}else{if(!f.axis||f.axis!="x")if(a.pageY-b(document).scrollTop()<
f.scrollSensitivity)g=b(document).scrollTop(b(document).scrollTop()-f.scrollSpeed);else if(b(window).height()-(a.pageY-b(document).scrollTop())<f.scrollSensitivity)g=b(document).scrollTop(b(document).scrollTop()+f.scrollSpeed);if(!f.axis||f.axis!="y")if(a.pageX-b(document).scrollLeft()<f.scrollSensitivity)g=b(document).scrollLeft(b(document).scrollLeft()-f.scrollSpeed);else if(b(window).width()-(a.pageX-b(document).scrollLeft())<f.scrollSensitivity)g=b(document).scrollLeft(b(document).scrollLeft()+
f.scrollSpeed)}g!==false&&b.ui.ddmanager&&!f.dropBehaviour&&b.ui.ddmanager.prepareOffsets(d,a)}});b.ui.plugin.add("draggable","snap",{start:function(){var a=b(this).data("draggable"),d=a.options;a.snapElements=[];b(d.snap.constructor!=String?d.snap.items||":data(draggable)":d.snap).each(function(){var f=b(this),g=f.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:f.outerWidth(),height:f.outerHeight(),top:g.top,left:g.left})})},drag:function(a,d){for(var f=b(this).data("draggable"),
g=f.options,k=g.snapTolerance,o=d.offset.left,s=o+f.helperProportions.width,A=d.offset.top,G=A+f.helperProportions.height,H=f.snapElements.length-1;H>=0;H--){var V=f.snapElements[H].left,ia=V+f.snapElements[H].width,ha=f.snapElements[H].top,na=ha+f.snapElements[H].height;if(V-k<o&&o<ia+k&&ha-k<A&&A<na+k||V-k<o&&o<ia+k&&ha-k<G&&G<na+k||V-k<s&&s<ia+k&&ha-k<A&&A<na+k||V-k<s&&s<ia+k&&ha-k<G&&G<na+k){if(g.snapMode!="inner"){var Da=Math.abs(ha-G)<=k,Ja=Math.abs(na-A)<=k,Ka=Math.abs(V-s)<=k,ma=Math.abs(ia-
o)<=k;if(Da)d.position.top=f._convertPositionTo("relative",{top:ha-f.helperProportions.height,left:0}).top-f.margins.top;if(Ja)d.position.top=f._convertPositionTo("relative",{top:na,left:0}).top-f.margins.top;if(Ka)d.position.left=f._convertPositionTo("relative",{top:0,left:V-f.helperProportions.width}).left-f.margins.left;if(ma)d.position.left=f._convertPositionTo("relative",{top:0,left:ia}).left-f.margins.left}var O=Da||Ja||Ka||ma;if(g.snapMode!="outer"){Da=Math.abs(ha-A)<=k;Ja=Math.abs(na-G)<=
k;Ka=Math.abs(V-o)<=k;ma=Math.abs(ia-s)<=k;if(Da)d.position.top=f._convertPositionTo("relative",{top:ha,left:0}).top-f.margins.top;if(Ja)d.position.top=f._convertPositionTo("relative",{top:na-f.helperProportions.height,left:0}).top-f.margins.top;if(Ka)d.position.left=f._convertPositionTo("relative",{top:0,left:V}).left-f.margins.left;if(ma)d.position.left=f._convertPositionTo("relative",{top:0,left:ia-f.helperProportions.width}).left-f.margins.left}if(!f.snapElements[H].snapping&&(Da||Ja||Ka||ma||
O))f.options.snap.snap&&f.options.snap.snap.call(f.element,a,b.extend(f._uiHash(),{snapItem:f.snapElements[H].item}));f.snapElements[H].snapping=Da||Ja||Ka||ma||O}else{f.snapElements[H].snapping&&f.options.snap.release&&f.options.snap.release.call(f.element,a,b.extend(f._uiHash(),{snapItem:f.snapElements[H].item}));f.snapElements[H].snapping=false}}}});b.ui.plugin.add("draggable","stack",{start:function(){var a=b(this).data("draggable").options;a=b.makeArray(b(a.stack)).sort(function(f,g){return(parseInt(b(f).css("zIndex"),
10)||0)-(parseInt(b(g).css("zIndex"),10)||0)});if(a.length){var d=parseInt(a[0].style.zIndex)||0;b(a).each(function(f){this.style.zIndex=d+f});this[0].style.zIndex=d+a.length}}});b.ui.plugin.add("draggable","zIndex",{start:function(a,d){a=b(d.helper);d=b(this).data("draggable").options;if(a.css("zIndex"))d._zIndex=a.css("zIndex");a.css("zIndex",d.zIndex)},stop:function(a,d){a=b(this).data("draggable").options;a._zIndex&&b(d.helper).css("zIndex",a._zIndex)}})})(jQuery);
(function(b){b.widget("ui.resizable",b.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,iframeFix:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var f=this,g=this.options;this.element.addClass("ui-resizable");b.extend(this,{_aspectRatio:!!g.aspectRatio,aspectRatio:g.aspectRatio,
originalElement:this.element,_proportionallyResizeElements:[],_helper:g.helper||g.ghost||g.animate?g.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap(b('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",
this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",
zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=g.handles||(!b(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var k=this.handles.split(",");
this.handles={};for(var o=0;o<k.length;o++){var s=b.trim(k[o]),A=b('<div class="ui-resizable-handle '+("ui-resizable-"+s)+'"></div>');A.css({zIndex:g.zIndex});"se"==s&&A.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[s]=".ui-resizable-"+s;this.element.append(A)}}this._renderAxis=function(G){G=G||this.element;for(var H in this.handles){if(this.handles[H].constructor==String)this.handles[H]=b(this.handles[H],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var V=
b(this.handles[H],this.element),ia=0;ia=/sw|ne|nw|se|n|s/.test(H)?V.outerHeight():V.outerWidth();V=["padding",/ne|nw|n/.test(H)?"Top":/se|sw|s/.test(H)?"Bottom":/^e$/.test(H)?"Right":"Left"].join("");G.css(V,ia);this._proportionallyResize()}b(this.handles[H])}};this._renderAxis(this.element);this._handles=b(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!f.resizing){if(this.className)var G=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);f.axis=
G&&G[1]?G[1]:"se"}});if(g.autoHide){this._handles.hide();b(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(!g.disabled){b(this).removeClass("ui-resizable-autohide");f._handles.show()}}).mouseleave(function(){if(!g.disabled)if(!f.resizing){b(this).addClass("ui-resizable-autohide");f._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var f=function(k){b(k).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){f(this.element);var g=this.element;this.originalElement.css({position:g.css("position"),width:g.outerWidth(),height:g.outerHeight(),top:g.css("top"),left:g.css("left")}).insertAfter(g);g.remove()}this.originalElement.css("resize",this.originalResizeStyle);f(this.originalElement);return this},_mouseCapture:function(f){var g=false;for(var k in this.handles)if(b(this.handles[k])[0]==f.target)g=true;return!this.options.disabled&&g},_mouseStart:function(f){var g=this.options,
k=this.element.position(),o=this.element;this.resizing=true;this.documentScroll={top:b(document).scrollTop(),left:b(document).scrollLeft()};if(o.is(".ui-draggable")||/absolute/.test(o.css("position")))o.css({position:"absolute",top:k.top,left:k.left});this._renderProxy();k=a(this.helper.css("left"));var s=a(this.helper.css("top"));if(g.containment){k+=b(g.containment).scrollLeft()||0;s+=b(g.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:k,top:s};this.size=this._helper?
{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()};this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()};this.originalPosition={left:k,top:s};this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()};this.originalMousePosition={left:f.pageX,top:f.pageY};this.aspectRatio=typeof g.aspectRatio=="number"?g.aspectRatio:this.originalSize.width/this.originalSize.height||1;g=b(".ui-resizable-"+
this.axis).css("cursor");b("body").css("cursor",g=="auto"?this.axis+"-resize":g);o.addClass("ui-resizable-resizing");this._propagate("start",f);return true},_mouseDrag:function(f){var g=this.helper,k=this.originalMousePosition,o=this._change[this.axis];if(!o)return false;k=o.apply(this,[f,f.pageX-k.left||0,f.pageY-k.top||0]);this._updateVirtualBoundaries(f.shiftKey);if(this._aspectRatio||f.shiftKey)k=this._updateRatio(k,f);k=this._respectSize(k,f);this._propagate("resize",f);g.css({top:this.position.top+
"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(k);this._trigger("resize",f,this.ui());return false},_mouseStop:function(f){this.resizing=false;var g=this.options,k=this;if(this._helper){var o=this._proportionallyResizeElements,s=o.length&&/textarea/i.test(o[0].nodeName);o=s&&b.ui.hasScroll(o[0],"left")?0:k.sizeDiff.height;s=s?0:k.sizeDiff.width;s={width:k.helper.width()-
s,height:k.helper.height()-o};o=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null;var A=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null;g.animate||this.element.css(b.extend(s,{top:A,left:o}));k.helper.height(k.size.height);k.helper.width(k.size.width);this._helper&&!g.animate&&this._proportionallyResize()}b("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",f);this._helper&&this.helper.remove();
return false},_updateVirtualBoundaries:function(f){var g=this.options,k,o,s;g={minWidth:d(g.minWidth)?g.minWidth:0,maxWidth:d(g.maxWidth)?g.maxWidth:Infinity,minHeight:d(g.minHeight)?g.minHeight:0,maxHeight:d(g.maxHeight)?g.maxHeight:Infinity};if(this._aspectRatio||f){f=g.minHeight*this.aspectRatio;o=g.minWidth/this.aspectRatio;k=g.maxHeight*this.aspectRatio;s=g.maxWidth/this.aspectRatio;if(f>g.minWidth)g.minWidth=f;if(o>g.minHeight)g.minHeight=o;if(k<g.maxWidth)g.maxWidth=k;if(s<g.maxHeight)g.maxHeight=
s}this._vBoundaries=g},_updateCache:function(f){this.offset=this.helper.offset();if(d(f.left))this.position.left=f.left;if(d(f.top))this.position.top=f.top;if(d(f.height))this.size.height=f.height;if(d(f.width))this.size.width=f.width},_updateRatio:function(f){var g=this.position,k=this.size,o=this.axis;if(d(f.height))f.width=f.height*this.aspectRatio;else if(d(f.width))f.height=f.width/this.aspectRatio;if(o=="sw"){f.left=g.left+(k.width-f.width);f.top=null}if(o=="nw"){f.top=g.top+(k.height-f.height);
f.left=g.left+(k.width-f.width)}return f},_respectSize:function(f){var g=this._vBoundaries,k=this.axis,o=d(f.width)&&g.maxWidth&&g.maxWidth<f.width,s=d(f.height)&&g.maxHeight&&g.maxHeight<f.height,A=d(f.width)&&g.minWidth&&g.minWidth>f.width,G=d(f.height)&&g.minHeight&&g.minHeight>f.height;if(A)f.width=g.minWidth;if(G)f.height=g.minHeight;if(o)f.width=g.maxWidth;if(s)f.height=g.maxHeight;var H=this.originalPosition.left+this.originalSize.width,V=this.position.top+this.size.height,ia=/sw|nw|w/.test(k);
k=/nw|ne|n/.test(k);if(A&&ia)f.left=H-g.minWidth;if(o&&ia)f.left=H-g.maxWidth;if(G&&k)f.top=V-g.minHeight;if(s&&k)f.top=V-g.maxHeight;if((g=!f.width&&!f.height)&&!f.left&&f.top)f.top=null;else if(g&&!f.top&&f.left)f.left=null;return f},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var f=this.helper||this.element,g=0;g<this._proportionallyResizeElements.length;g++){var k=this._proportionallyResizeElements[g];if(!this.borderDif){var o=[k.css("borderTopWidth"),k.css("borderRightWidth"),
k.css("borderBottomWidth"),k.css("borderLeftWidth")],s=[k.css("paddingTop"),k.css("paddingRight"),k.css("paddingBottom"),k.css("paddingLeft")];this.borderDif=b.map(o,function(A,G){A=parseInt(A,10)||0;G=parseInt(s[G],10)||0;return A+G})}k.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var f=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||b('<div style="overflow:hidden;"></div>');
var g=b.ui.ie6?1:0,k=b.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+k,height:this.element.outerHeight()+k,position:"absolute",left:this.elementOffset.left-g+"px",top:this.elementOffset.top-g+"px",zIndex:++f.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(f,g){return{width:this.originalSize.width+g}},w:function(f,g){return{left:this.originalPosition.left+g,width:this.originalSize.width-g}},n:function(f,
g,k){return{top:this.originalPosition.top+k,height:this.originalSize.height-k}},s:function(f,g,k){return{height:this.originalSize.height+k}},se:function(f,g,k){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[f,g,k]))},sw:function(f,g,k){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[f,g,k]))},ne:function(f,g,k){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[f,g,k]))},nw:function(f,g,k){return b.extend(this._change.n.apply(this,
arguments),this._change.w.apply(this,[f,g,k]))}},_propagate:function(f,g){b.ui.plugin.call(this,f,[g,this.ui()]);f!="resize"&&this._trigger(f,g,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});b.ui.plugin.add("resizable","alsoResize",{start:function(){var f=b(this).data("resizable").options,g=function(k){b(k).each(function(){var o=
b(this);o.data("resizable-alsoresize",{width:parseInt(o.width(),10),height:parseInt(o.height(),10),left:parseInt(o.css("left"),10),top:parseInt(o.css("top"),10)})})};if(typeof f.alsoResize=="object"&&!f.alsoResize.parentNode)if(f.alsoResize.length){f.alsoResize=f.alsoResize[0];g(f.alsoResize)}else b.each(f.alsoResize,function(k){g(k)});else g(f.alsoResize)},resize:function(f,g){f=b(this).data("resizable");var k=f.options,o=f.originalSize,s=f.originalPosition,A={height:f.size.height-o.height||0,width:f.size.width-
o.width||0,top:f.position.top-s.top||0,left:f.position.left-s.left||0},G=function(H,V){b(H).each(function(){var ia=b(this),ha=b(this).data("resizable-alsoresize"),na={},Da=V&&V.length?V:ia.parents(g.originalElement[0]).length?["width","height"]:["width","height","top","left"];b.each(Da,function(Ja,Ka){if((Ja=(ha[Ka]||0)+(A[Ka]||0))&&Ja>=0)na[Ka]=Ja||null});ia.css(na)})};typeof k.alsoResize=="object"&&!k.alsoResize.nodeType?b.each(k.alsoResize,function(H,V){G(H,V)}):G(k.alsoResize)},stop:function(){b(this).removeData("resizable-alsoresize")}});
b.ui.plugin.add("resizable","animate",{stop:function(f){var g=b(this).data("resizable"),k=g.options,o=g._proportionallyResizeElements,s=o.length&&/textarea/i.test(o[0].nodeName),A=s&&b.ui.hasScroll(o[0],"left")?0:g.sizeDiff.height;s={width:g.size.width-(s?0:g.sizeDiff.width),height:g.size.height-A};A=parseInt(g.element.css("left"),10)+(g.position.left-g.originalPosition.left)||null;var G=parseInt(g.element.css("top"),10)+(g.position.top-g.originalPosition.top)||null;g.element.animate(b.extend(s,G&&
A?{top:G,left:A}:{}),{duration:k.animateDuration,easing:k.animateEasing,step:function(){var H={width:parseInt(g.element.css("width"),10),height:parseInt(g.element.css("height"),10),top:parseInt(g.element.css("top"),10),left:parseInt(g.element.css("left"),10)};o&&o.length&&b(o[0]).css({width:H.width,height:H.height});g._updateCache(H);g._propagate("resize",f)}})}});b.ui.plugin.add("resizable","containment",{start:function(){var f=b(this).data("resizable"),g=f.element,k=f.options.containment;if(g=k instanceof
b?k.get(0):/parent/.test(k)?g.parent().get(0):k){f.containerElement=b(g);if(/document/.test(k)||k==document){f.containerOffset={left:0,top:0};f.containerPosition={left:0,top:0};f.parentData={element:b(document),left:0,top:0,width:b(document).width(),height:b(document).height()||document.body.parentNode.scrollHeight}}else{var o=b(g),s=[];b(["Top","Right","Left","Bottom"]).each(function(H,V){s[H]=a(o.css("padding"+V))});f.containerOffset=o.offset();f.containerPosition=o.position();f.containerSize={height:o.innerHeight()-
s[3],width:o.innerWidth()-s[1]};k=f.containerOffset;var A=f.containerSize.height,G=f.containerSize.width;G=b.ui.hasScroll(g,"left")?g.scrollWidth:G;A=b.ui.hasScroll(g)?g.scrollHeight:A;f.parentData={element:g,left:k.left,top:k.top,width:G,height:A}}}},resize:function(f){var g=b(this).data("resizable"),k=g.options,o=g.containerOffset,s=g.position;f=g._aspectRatio||f.shiftKey;var A={top:0,left:0},G=g.containerElement;if(G[0]!=document&&/static/.test(G.css("position")))A=o;if(s.left<(g._helper?o.left:
0)){g.size.width+=g._helper?g.position.left-o.left:g.position.left-A.left;if(f)g.size.height=g.size.width/g.aspectRatio;g.position.left=k.helper?o.left:0}if(s.top<(g._helper?o.top:0)){g.size.height+=g._helper?g.position.top-o.top:g.position.top;if(f)g.size.width=g.size.height*g.aspectRatio;g.position.top=g._helper?o.top:0}g.offset.left=g.parentData.left+g.position.left;g.offset.top=g.parentData.top+g.position.top;k=Math.abs((g._helper?g.offset.left-A.left:g.offset.left-A.left)+g.sizeDiff.width);o=
Math.abs((g._helper?g.offset.top-A.top:g.offset.top-o.top)+g.sizeDiff.height);s=g.containerElement.get(0)==g.element.parent().get(0);A=/relative|absolute/.test(g.containerElement.css("position"));if(s&&A)k-=g.parentData.left;if(k+g.size.width>=g.parentData.width){g.size.width=g.parentData.width-k;if(f)g.size.height=g.size.width/g.aspectRatio}if(o+g.size.height>=g.parentData.height){g.size.height=g.parentData.height-o;if(f)g.size.width=g.size.height*g.aspectRatio}},stop:function(){var f=b(this).data("resizable"),
g=f.options,k=f.containerOffset,o=f.containerPosition,s=f.containerElement,A=b(f.helper),G=A.offset(),H=A.outerWidth()-f.sizeDiff.width;A=A.outerHeight()-f.sizeDiff.height;f._helper&&!g.animate&&/relative/.test(s.css("position"))&&b(this).css({left:G.left-o.left-k.left,width:H,height:A});f._helper&&!g.animate&&/static/.test(s.css("position"))&&b(this).css({left:G.left-o.left-k.left,width:H,height:A})}});b.ui.plugin.add("resizable","ghost",{start:function(){var f=b(this).data("resizable"),g=f.options,
k=f.size;f.ghost=f.originalElement.clone();f.ghost.css({opacity:0.25,display:"block",position:"relative",height:k.height,width:k.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof g.ghost=="string"?g.ghost:"");f.ghost.appendTo(f.helper)},resize:function(){var f=b(this).data("resizable");f.ghost&&f.ghost.css({position:"relative",height:f.size.height,width:f.size.width})},stop:function(){var f=b(this).data("resizable");f.ghost&&f.helper&&f.helper.get(0).removeChild(f.ghost.get(0))}});
b.ui.plugin.add("resizable","grid",{resize:function(){var f=b(this).data("resizable"),g=f.options,k=f.size,o=f.originalSize,s=f.originalPosition,A=f.axis;g.grid=typeof g.grid=="number"?[g.grid,g.grid]:g.grid;var G=Math.round((k.width-o.width)/(g.grid[0]||1))*(g.grid[0]||1);g=Math.round((k.height-o.height)/(g.grid[1]||1))*(g.grid[1]||1);if(/^(se|s|e)$/.test(A)){f.size.width=o.width+G;f.size.height=o.height+g}else if(/^(ne)$/.test(A)){f.size.width=o.width+G;f.size.height=o.height+g;f.position.top=s.top-
g}else{if(/^(sw)$/.test(A)){f.size.width=o.width+G;f.size.height=o.height+g}else{f.size.width=o.width+G;f.size.height=o.height+g;f.position.top=s.top-g}f.position.left=s.left-G}}});b.ui.plugin.add("resizable","iframeFix",{start:function(){var f=b(this).data("resizable").options;b(f.iframeFix===true?"iframe":f.iframeFix).each(function(){b('<div class="ui-resizable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",
zIndex:1E3}).css(b(this).offset()).appendTo("body")})},stop:function(){b("div.ui-resizable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});var a=function(f){return parseInt(f,10)||0},d=function(f){return!isNaN(parseInt(f,10))}})(jQuery);steal.loaded("/js/lib/jquery-ui/jquery-ui-1.9.2.custom.js");
(function(b){if(typeof define==="function"&&define.amd)define(["jquery"],b);else if(typeof exports==="object")module.exports=b;else b(jQuery)})(function(b){function a(s){var A=s||window.event,G=[].slice.call(arguments,1),H=0,V=0,ia=0,ha=0;ha=0;s=b.event.fix(A);s.type="mousewheel";if(A.wheelDelta)H=A.wheelDelta;if(A.detail)H=A.detail*-1;if(A.deltaY)H=ia=A.deltaY*-1;if(A.deltaX){V=A.deltaX;H=V*-1}if(A.wheelDeltaY!==undefined)ia=A.wheelDeltaY;if(A.wheelDeltaX!==undefined)V=A.wheelDeltaX*-1;ha=Math.abs(H);
if(!g||ha<g)g=ha;ha=Math.max(Math.abs(ia),Math.abs(V));if(!k||ha<k)k=ha;A=H>0?"floor":"ceil";H=Math[A](H/g);V=Math[A](V/k);ia=Math[A](ia/k);G.unshift(s,H,V,ia);return(b.event.dispatch||b.event.handle).apply(this,G)}var d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],f="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],g,k;if(b.event.fixHooks)for(var o=d.length;o;)b.event.fixHooks[d[--o]]=b.event.mouseHooks;b.event.special.mousewheel=
{setup:function(){if(this.addEventListener)for(var s=f.length;s;)this.addEventListener(f[--s],a,false);else this.onmousewheel=a},teardown:function(){if(this.removeEventListener)for(var s=f.length;s;)this.removeEventListener(f[--s],a,false);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(s){return s?this.bind("mousewheel",s):this.trigger("mousewheel")},unmousewheel:function(s){return this.unbind("mousewheel",s)}})});steal.loaded("/js/lib/jquery.mousewheel.js");
steal("jquery/controller","app/show/popup.js","lib/charCount.js","lib/cursor.js",function(b){App.Show.Popup("App.Show.Popup.TweetReply",{defaults:{tweet_max_length:140,container:".tweet_box",editor:"#tweetbody",button:"#posttweet",spinner:"#tweet_loader",$caption:"",tweet_msg:"",$screen_name:""}},{$container:null,$editor:null,$button:null,$spinner:null,$msg:null,init:function(a,d){this._super(a,d);a=this.element;this.$container=this.find(this.options.container);this.$editor=this.find(this.options.editor);
this.$spinner=this.find(this.options.spinner);this.$msg=new Message;var f=this;this.$editor.charCount({css:"symbol-quant",counterBindElem:this.options.button,counterBindPosition:"after",warning:10,onChangeAvailable:function(g){g<f.options.tweet_max_length&&g>=0?b(f.options.button).removeClass("inactive"):b(f.options.button).addClass("inactive")}})},setCaption:function(a){this.options.caption=a;return this},setTweetMsg:function(a){this.options.tweet_msg=a;return this},setScreenName:function(a){this.options.screenName=
a;return this},doOnLinkClick:function(a,d){b(".js-tweet-text").html(this.options.caption);this.show().addClass("popup-reply popup-simple");a=this.options.tweet_msg!=""?this.options.tweet_msg:"@"+this.options.screenName+" ";b("#tweetbody").val(a).setCursorPosition(200);typeof d!="undefined"&&this.processReply()},clearContainer:function(){this.$editor.val("");b(".counter").html(this.options.tweet_max_length)},"#tweetbody focus":function(){return false},"#posttweet click":function(a,d){d.preventDefault();
if(!LinkData.isLogged||LinkData.isFacebookOnlyLogged)Cookie.set("twitter_delayed_action",{action:"reply",msg:this.$editor.val()},{expires:0,path:"/"});if(window.User.isLoggedWithPopup())b(a).hasClass("inactive")||this.processReply()},processReply:function(){var a=this;b.post("/ajax/tweet-reply",{status:this.$editor.val(),id:LinkData.twitterStatusId},function(d){d.success&&a.$msg.showAndHide("Successfully replied!",Message.TYPE_SUCCESS,".js-reply-msg",function(){a.clearContainer();Popup.Manager.hide("tweet-reply")})})}})});
steal.loaded("app/show/theme9/popup/tweet-reply.js");
steal("jquery/controller","app/show/popup.js",function(b){App.Show.Popup("App.Show.Popup.TweetRetweet",{defaults:{$caption:"",$screen_name:""}},{name:"tweet-retweet",msg:null,processing_retweet:false,processing_unretweet:false,init:function(a,d){this._super(a,d);this.msg=new Message},setCaption:function(a){this.options.caption=a;return this},doOnLinkClick:function(a,d){var f=this;if(b(a).attr("data-retweeted")=="1"){if(f.processing_unretweet!==true)if(typeof d=="undefined"){f.processing_unretweet=
true;b.post("/ajax/tweet-unretweet",{id:a.attr("data-id")},function(g){if(g.success){LinkData.isRetweeted=false;a.attr("data-retweeted",0).attr("data-id",LinkData.twitterStatusId).html(LNG["show.theme.9.retweet"]).parent().removeClass("clicked")}f.processing_unretweet=false})}}else{b(".js-tweet-text").html(this.options.caption);this.show().addClass("popup-retweet popup-simple");typeof d!="undefined"&&this.processRetweet(d)}},doOnRtBtnClick:function(){if(!LinkData.isLogged||LinkData.isFacebookOnlyLogged)Cookie.set("twitter_delayed_action",
{action:"retweet",msg:""},{expires:0,path:"/"});var a=window.User.isLoggedWithPopup(true);a?this._setAuthWindowObserver(a):this.processRetweet()},_setAuthWindowObserver:function(a){var d=this,f=setInterval(function(){if(a.closed){clearInterval(f);Popup.Manager.hide(d._name);setTimeout(function(){setTimeout(function(){Cookie.unset("twitter_delayed_action")},500);Popup.Manager._getPopup("tweet-retweet-prompt").enableManualBlock().show()},1E3)}},100)},".js-tweet-retweet-btn-ok click":function(a,d){d.preventDefault();
this.doOnRtBtnClick(a)},processRetweet:function(){var a=b(".js-tweet-retweet-link"),d=this;if(d.processing_retweet!==true){b(".js-tweet-retweet-btn-ok").addClass("clicked");d.processing_retweet=true;b.post("/ajax/tweet-retweet",{id:a.attr("data-id")},function(f){f.success?d.msg.showAndHide("Successfully retweeted!",Message.TYPE_SUCCESS,".js-retweet-msg",function(){hihit(2391);d.processing_retweet=false;b(".js-tweet-retweet-btn-ok").removeClass("clicked");LinkData.isRetweeted=true;a.attr("data-retweeted",
1).attr("data-id",f.id).html(LNG["show.theme.9.retweeted"]).parent().addClass("clicked");Popup.Manager.hide(d._name)}):d.msg.showAndHide(f.error&&f.error.message?f.error.message:"Unable to retweet",Message.TYPE_ERROR,".js-retweet-msg",function(){Popup.Manager.hide(d._name);d.processing_retweet=false;b(".js-tweet-retweet-btn-ok").removeClass("clicked")})})}},".js-tweet-retweet-btn-cancel click":function(a,d){d.preventDefault();Popup.Manager.hide(self._name)}})});steal.loaded("app/show/theme9/popup/tweet-retweet.js");
steal("jquery/controller","app/show/theme9/popup/tweet-retweet.js",function(b){App.Show.Popup.TweetRetweet("App.Show.Popup.TweetRetweetPrompt",{},{_addClass:"popup-retweet-prompt",_manualMode:false,show:function(){this._super();return this},hide:function(){this._super();this._manualMode=false;this.find(".js-block-main").show();this.find(".js-block-manual").hide();return this},getCounters:function(){return{open:this._manualMode?2480:2477,close:this._manualMode?2428:2478}},_centrify:function(){},doOnLinkClick:function(a,
d){var f=this;if(LinkData.isRetweeted){if(f.processing_unretweet!==true)if(typeof d=="undefined"){f.processing_unretweet=true;b.post("/ajax/tweet-unretweet",{id:a.attr("data-id")},function(g){if(g.success){LinkData.isRetweeted=false;a.attr("data-retweeted",0).attr("data-id",LinkData.twitterStatusId).html(LNG["show.theme.9.retweet"]).parent().removeClass("clicked")}f.processing_unretweet=false})}}else this.doOnRtBtnClick()},processRetweet:function(a){var d=b(".js-tweet-retweet-link"),f=this;a&&hihit(2482);
if(LinkData.is_author)this._showError(LNG["show.10.retweet.disabled_for_owner"]);else if(this.processing_retweet!==true){this.processing_retweet=true;b.post("/ajax/tweet-retweet",{id:b(d).attr("data-id")},function(g){if(g.success){LinkData.isRetweeted=true;d.attr("data-retweeted",1).attr("data-id",g.id).html(LNG["show.theme.9.retweeted"]).parent().addClass("clicked")}else g.error&&f._showError(LNG["show.10.retweet.unretweet_error"]);f.processing_retweet=false;Popup.Manager.hide(f._name)})}},enableManualBlock:function(){this._manualMode=
true;this.find(".js-block-main").hide();this.find(".js-block-manual").show();return this},".js-tweet-retweet-btn-ok click":function(a,d){d.preventDefault();if(LinkData.is_author)showAndHide(".js-disabled-for-owner-msg");else{hihit(2479);this.doOnRtBtnClick(a)}},".js-tweet-retweet-btn-cancel click":function(a,d){d.preventDefault();Popup.Manager.hide("tweet-retweet-prompt")},".js-retweet-manually-btn click":function(a,d){d.preventDefault();this.share("RT: "+Registry.getController("show").CaptionModel.attr("caption"));
hihit(2481)},_setAuthWindowObserver:function(a){var d=this,f=setInterval(function(){if(a.closed){clearInterval(f);Popup.Manager.hide(d._name);setTimeout(function(){setTimeout(function(){Cookie.unset("twitter_delayed_action")},500);d.enableManualBlock().show()},1E3)}},100)},_showError:function(a){b(".js-retweet-message-box-holder").css("z-index",999);this.msg.showAndHide(a,Message.TYPE_ERROR,".js-retweet-message-box",3E3,function(){b(".js-retweet-message-box-holder").css("z-index",1)})},_hasCyrilicSymbols:function(a){if(!a)return false;
return a.match(/[\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e\u044f]/i)?true:false},share:function(a){var d=this,f=this._hasCyrilicSymbols(LinkData.baseAliasLink)?LinkData.baseShortAliasLink:LinkData.baseAliasLink;Share.twitter("",Share.getMessageForTwitter(a,false,f,null),"",null,function(){d.hide()})}})});steal.loaded("app/show/theme9/popup/tweet-retweet-prompt.js");
steal("jquery/controller","app/models/promo.js","app/show/theme10/promo.js",function(b){App.Show.Theme10.Promo("App.Show.Theme9.Promo",{_movePromoBlock:function(){},_hihitOnSave:function(){hihit(2483)},_renderToPanel:function(a){this._super(a);b(window).resize()}})});steal.loaded("app/show/theme9/promo.js");
steal("app/popups/secondary-popup.js","lib/jquery.mousewheel.js","lib/jquery.jscrollpane.js",function(b){App.SecondaryPopup("App.MyLinks.Popup.LinkReplies",{defaults:{wrapper:".js-other-tweets-wrapper",format:{singular:"1 other tweet",plural:"@count other tweets"}}},{_addClass:"mylinks-reply-popup",_title:"Replies",scrollPane:b(".js-replies"),hideCloseBtn:false,linkId:null,linkHash:null,isLoadingTweets:false,needToLoadMore:true,tweetsCount:0,firstLoad:true,init:function(){this.appendHandlers();if(false in
window)window.console={log:function(){}}},log:function(a){"console"in window&&console.log(a)},appendHandlers:function(){var a=[],d=b(this.options.wrapper),f=this;d.each(function(){a.push({linkId:b(this).data("link-id"),hash:b(this).data("link-hash")})});b.post("/ajax/get-other-tweets-count",{data:a},function(g){var k;d.each(function(){b(this).animate({opacity:0},700,function(){b(this).removeClass("loading");k=b(this).data("link-id");if(g.count[k]!=0){b(this).append(b("<a/>",{"class":"use-custom js-show-other-tweets",
text:f.formatPlural(g.count[k])}));b(this).animate({opacity:1},500)}})})})},formatPlural:function(a){return a==1?this.options.format.singular:this.options.format.plural.replace("@count",a)},onShow:function(){this.initScroll();this.firstLoad===true&&this.loadMoreTweets()},onHide:function(){},setLinkId:function(a){if(this.linkId!=a){this.linkId=a;this.needToLoadMore=this.firstLoad=true;this.tweetsCount=0;this.emptyTweetsContainer()}return this},setLinkHash:function(a){this.linkHash=a;return this},setTitle:function(a){this._title=
a;return this},initScroll:function(){var a=this;this.scrollPane.jScrollPane({verticalDragMinHeight:30}).bind("jsp-scroll-y",function(d,f,g,k){k&&!a.isLoadingTweets&&a.needToLoadMore&&a.loadMoreTweets()})},loadMoreTweets:function(){var a=this,d=this.find(".js-tweet-spinner");this.isLoadingTweets=true;d.show();b.get("/ajax/load-other-tweets-raw",{curr_tweets_cnt:this.tweetsCount,hash:this.linkHash,linkId:this.linkId},function(f){if(f.success){a.find(".js-replies").show();a.appendNewTweets(f.tweets);
a.tweetsCount=f.new_tweets_cnt;if(!f.thereIsMoreTweets)a.needToLoadMore=false}else a.needToLoadMore=false;a.isLoadingTweets=false;d.hide()})},getJsp:function(){return this.scrollPane.data("jsp")},reinitialise:function(){this.getJsp().reinitialise()},emptyTweetsContainer:function(){this.scrollPane.hide();this.scrollPane.find(".jspPane").empty()},appendNewTweets:function(a){for(var d="",f=0;f<a.length;f++)d+=b.View("linkReplyEJS",a[f]);this.scrollPane.find(".jspPane").append(d);this.scrollPane.css("height",
Math.min(260,this.scrollPane.find(".jspPane").innerHeight()));this.reinitialise();if(this.firstLoad===true){this.firstLoad=false;this._centrify()}}})});steal.loaded("app/controllers/history/mylinks/popups/link-replies.js");
(function(b){b.fn.charCount=function(a){function d(f,g){f=b(f).val().length;f=a.allowed-f;f<=a.warning&&f>=0?b(g).addClass(a.cssWarning):b(g).removeClass(a.cssWarning);f<0?b(g).addClass(a.cssExceeded):b(g).removeClass(a.cssExceeded);b(g).html(a.counterText+f);a.onChangeAvailable&&a.onChangeAvailable(f)}a=b.extend({allowed:140,warning:25,css:"counter",counterElement:"span",cssWarning:"warning",cssExceeded:"exceeded",counterText:"",counterBindElem:this,counterBindPosition:"after",onChangeAvailable:null},
a);this.each(function(){var f=b("<"+a.counterElement+' class="'+a.css+'">'+a.counterText+"</"+a.counterElement+">");a.counterBindPosition=="before"?b(a.counterBindElem).before(f):b(a.counterBindElem).after(f);d(this,f);b(this).keyup(function(){d(this,f)});b(this).change(function(){d(this,f)})})}})(jQuery);steal.loaded("lib/charCount.js");jQuery.fn.getCursorPosition=function(){if(this.lengh==0)return-1;return $(this).getSelectionStart()};
jQuery.fn.setCursorPosition=function(b){if(this.lengh==0)return this;return $(this).setSelection(b,b)};jQuery.fn.getSelection=function(){if(this.lengh==0)return-1;var b=$(this).getSelectionStart(),a=$(this).getSelectionEnd();return this[0].value.substring(b,a)};
jQuery.fn.getSelectionStart=function(){if(this.lengh==0)return-1;input=this[0];var b=input.value.length;if(input.createTextRange){b=document.selection.createRange().duplicate();b.moveEnd("character",input.value.length);b=input.value.lastIndexOf(b.text)}else if(typeof input.selectionStart!="undefined")b=input.selectionStart;return b};
jQuery.fn.getSelectionEnd=function(){if(this.lengh==0)return-1;input=this[0];var b=input.value.length;if(input.createTextRange){b=document.selection.createRange().duplicate();b.moveStart("character",-input.value.length);b=input.value.lastIndexOf(b.text)}else if(typeof input.selectionEnd!="undefined")b=input.selectionEnd;return b};
jQuery.fn.setSelection=function(b,a){if(this.lengh==0)return this;input=this[0];if(input.createTextRange){var d=input.createTextRange();d.collapse(true);d.moveEnd("character",a);d.moveStart("character",b);d.select()}else if(input.setSelectionRange){input.focus();input.setSelectionRange(b,a)}return this};steal.loaded("lib/cursor.js");
steal("jquery/controller","app/models/promo.js",function(b){b.Controller("App.Show.Theme10.Promo",{promoModel:null,message:null,sendPromoFormOnKeyUp:false,i:1,init:function(a,d){this.message=new Message;this.promoModel=new Theme.Models.Promo(d);this.tempPromoModel=new Theme.Models.Promo(d);this.attachPasteHandler()},".js-create click":function(a,d){d.preventDefault();b(".js-step-1").hide();b(".js-step-2").show()},".js-url-form submit":function(a,d){d.preventDefault();var f=this;b(".js-step-2").hide();
b(".js-promo-spinner").show();Ga.event(["_trackEvent","Settings ","Promo add link"]);this.tempPromoModel.getUrlData(this.checkURL(b(".js-url").val()),function(g){b(".js-promo-spinner").hide();if(g.error){b(".js-url").addClass("error");f.message.showAndHide(g.error,Message.TYPE_ERROR,".js-promo-save-url-message",function(){b(".js-url").removeClass("error")})}else f._renderToPopup(f.tempPromoModel)})},".js-url keydown":function(a,d){if((d.ctrlKey||d.metaKey)&&(d.which==86||d.which==1052)||d.shiftKey&&
d.which==45)this.sendPromoFormOnKeyUp=true},".js-url keyup":function(a){if(a.val().length==0){b(".js-step-2").hide();b(".js-promo-url-submit").removeClass("active")}else b(".js-promo-url-submit").addClass("active");if(this.sendPromoFormOnKeyUp){this.sendPromoFormOnKeyUp=false;b(".js-url-form").submit()}},".js-promo-url-submit click":function(a,d){d.preventDefault();if(a.hasClass("active")){this.sendPromoFormOnKeyUp=false;b(".js-url-form").submit()}},".js-save-promo click":function(a,d){d.preventDefault();
this._hihitOnSave();var f=this;this.checkURL(b(".js-url").val());b.extend(this.promoModel,this.tempPromoModel);this.promoModel.attr("link_id",typeof LinkData!="undefined"?LinkData.id:null);this.promoModel.attr("description",b(".js-promo-description").val());this.promoModel.attr("on_top",b("#js-on-top").is(":checked")?1:0);this.promoModel.save(function(){if(this.success){Popup.Manager.hide();f._movePromoBlock(f.promoModel.on_top);f._renderToPanel(f.promoModel)}else{f.message.showAndHide(this.error,
Message.TYPE_ERROR,".js-promo-save-url-message");b(".js-url").addClass("error")}})},_hihitOnSave:function(){hihit(2353)},_hideUrlMeta:function(){b(".js-step-2").hide()},_renderToPanel:function(a){b(".js-reset-promo-box").hide();a.isNew()||b(".js-reset-promo-box").show();var d=b(".js-promo-box");b(".js-promo-title",d).attr("title",a.title).html(a.title);b(".js-promo-title, .js-promo-image-link, .js-promo-domain-link",d).attr("href",a.source_url);b(".js-promo-image-link",d).hide();if(a.image){b(".js-promo-image-link",
d).show();b(".js-promo-image",d).attr("src",a.image)}b(".js-promo-domain").html(a.domain);b(".js-description").html(a.description);b(".js-step-1").hide();b(".js-step-4").show()},_renderToPopup:function(a){a.source_url&&b(".js-promo-url-submit").addClass("active");b(".js-promo-title",this.element).attr("title",a.title).html(a.title);b(".js-promo-title",this.element).attr("href",a.source_url);b(".js-promo-image",this.element).hide();b(".js-step-2 .details",this.element).removeClass("no-image-details");
a.image?b(".js-promo-image",this.element).attr("src",a.image).show():b(".js-step-2 .details",this.element).addClass("no-image-details");b(".js-promo-description",this.element).val(a.description);b(".js-symb-quant span",this.element).html(a.description.length);if(a.on_top==true&&!b("#js-on-top").is(":checked")){b("#js-on-top").click();b("#js-on-top").attr("checked","checked")}b(".js-step-2").show()},".js-url-cancel click":function(a,d){d.preventDefault();b(".js-step-2").hide();b(".js-step-1").show()},
".js-cancel-description click":function(a,d){d.preventDefault();this.promoModel.destroy();b(".js-step-3").hide();b(".js-step-2").show()},".js-edit-description click":function(a,d){d.preventDefault();b(".js-step-4").hide();b(".js-step-3").show()},".js-remove-promo-settings click":function(a,d){d.preventDefault();Ga.event(["_trackEvent","Settings ","Promo delete link"]);this.promoModel.destroy();this._resetPopupElements()},".js-reset-promo-block click":function(a,d){d.preventDefault();this._resetPopupElements()},
_resetPopupElements:function(){b(".js-step-2").hide();b(".js-url").val("").focus();b(".js-promo-url-submit").removeClass("active")},_resetPopup:function(){this.promoModel.clearAttr();this._resetPopupElements()},_movePromoBlock:function(a){a=a==1?".js-before-promo-top":".js-before-promo-bottom";b(".js-promo-box").insertBefore(a)},checkURL:function(a){if(a.length==0)return false;/^(https?|ftp|file):\/?\/?/i.test(a)||(a="http://"+a);return a},attachPasteHandler:function(){b(".js-url").on("paste",function(){setTimeout(function(){b(".js-url-form").submit()},
100)})}})});steal.loaded("app/show/theme10/promo.js");
(function(b){if(typeof define==="function"&&define.amd)define(["jquery"],b);else if(typeof exports==="object")module.exports=b;else b(jQuery)})(function(b){function a(s){var A=s||window.event,G=[].slice.call(arguments,1),H=0,V=0,ia=0,ha=0;ha=0;s=b.event.fix(A);s.type="mousewheel";if(A.wheelDelta)H=A.wheelDelta;if(A.detail)H=A.detail*-1;if(A.deltaY)H=ia=A.deltaY*-1;if(A.deltaX){V=A.deltaX;H=V*-1}if(A.wheelDeltaY!==undefined)ia=A.wheelDeltaY;if(A.wheelDeltaX!==undefined)V=A.wheelDeltaX*-1;ha=Math.abs(H);
if(!g||ha<g)g=ha;ha=Math.max(Math.abs(ia),Math.abs(V));if(!k||ha<k)k=ha;A=H>0?"floor":"ceil";H=Math[A](H/g);V=Math[A](V/k);ia=Math[A](ia/k);G.unshift(s,H,V,ia);return(b.event.dispatch||b.event.handle).apply(this,G)}var d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],f="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],g,k;if(b.event.fixHooks)for(var o=d.length;o;)b.event.fixHooks[d[--o]]=b.event.mouseHooks;b.event.special.mousewheel=
{setup:function(){if(this.addEventListener)for(var s=f.length;s;)this.addEventListener(f[--s],a,false);else this.onmousewheel=a},teardown:function(){if(this.removeEventListener)for(var s=f.length;s;)this.removeEventListener(f[--s],a,false);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(s){return s?this.bind("mousewheel",s):this.trigger("mousewheel")},unmousewheel:function(s){return this.unbind("mousewheel",s)}})});steal.loaded("lib/jquery.mousewheel.js");
steal("jquery/controller","app/show/likes.js",function(b){App.Show.Likes("App.Show.Theme10.Likes",{},{ignoreNeedSignIn:true,onBeforeClick:function(){if(!this.find(".js-like").hasClass("green-like"))return false},onSuccess:function(){b(".js-like-box").find(".js-like").removeClass("green-like");hihit(2341)}})});steal.loaded("app/show/theme10/likes.js");
steal("jquery/controller","app/show/theme9/popup/tweet-retweet.js",function(b){App.Show.Popup.TweetRetweet("App.Show.Popup.TweetRetweet10",{},{name:"tweet-retweet",_manualMode:false,show:function(){this._super();this.addClass("popup-retweet");b(".js-tweet-retweet-link").addClass("retweet-glow");return this},hide:function(){this._super();this._manualMode=false;this.find(".js-block-main").show();this.find(".js-block-manual").hide();b(".js-tweet-retweet-link").removeClass("retweet-glow");return this},
getCounters:function(){return{open:this._manualMode?2446:2424,close:this._manualMode?2447:2425}},_centrify:function(){var a=b(".js-tweet-retweet-link").offset(),d=b(".js-tweet-retweet-link").height(),f=App.Show.Popup.popupWindow.first(),g=a.left-f.width()-19;f.css("left",g<0?0:g);a=a.top-f.height()/2-d;f.css("top",a<0?0:a);return this},doOnLinkClick:function(a,d){var f=this;if(a.attr("data-retweeted")=="1"){if(f.processing_unretweet!==true)if(typeof d=="undefined"){f.processing_unretweet=true;b.post("/ajax/tweet-unretweet",
{id:a.attr("data-id")},function(g){if(g.success){a.attr("data-retweeted",0);a.addClass("active");a.attr("data-id",LinkData.twitterStatusId);a.html(g.retweet_count?g.retweet_count:LNG["show.theme.10.rt"]);a.attr("title",LNG["show.theme.10.retweet"]);hihit(2443)}f.processing_unretweet=false})}}else this.doOnRtBtnClick()},processRetweet:function(a){var d=b(".js-tweet-retweet-link"),f=this;a&&hihit(2427);if(LinkData.is_author)f._showError(LNG["show.10.retweet.disabled_for_owner"]);else if(f.processing_retweet!==
true){f.processing_retweet=true;b.post("/ajax/tweet-retweet",{id:b(d).attr("data-id")},function(g){if(g.success){b(".js-tweet-retweet-link").removeClass("active");b(d).attr("data-retweeted",1);b(d).attr("data-id",g.id);b(d).html(g.retweet_count);b(d).attr("title",LNG["show.theme.10.undo_retweet"]);hihit(2442)}else if(g.error)g.error.code&&g.error.code==1?f._showError(LNG["show.10.retweet.not_logged"],function(){document.location.reload()}):f._showError(LNG["show.10.retweet.unretweet_error"]);f.processing_retweet=
false;Popup.Manager.hide("tweet-retweet10")})}},enableManualBlock:function(){this._manualMode=true;this.find(".js-block-main").hide();this.find(".js-block-manual").show();return this},".js-tweet-retweet-btn-ok click":function(a,d){d.preventDefault();if(LinkData.is_author)showAndHide(".js-disabled-for-owner-msg");else{hihit(2426);this.doOnRtBtnClick(a)}},".js-tweet-retweet-btn-cancel click":function(a,d){d.preventDefault();Popup.Manager.hide("tweet-retweet10")},".js-retweet-manually-btn click":function(a,
d){d.preventDefault();this.share("RT: "+Registry.getController("show").CaptionModel.attr("caption"));hihit(2448)},_setAuthWindowObserver:function(a){var d=this,f=setInterval(function(){if(a.closed){clearInterval(f);Popup.Manager.hide("tweet-retweet10");setTimeout(function(){setTimeout(function(){Cookie.unset("twitter_delayed_action")},500);d.enableManualBlock().show()},1E3)}},100)},"{Popup.Manager} onShow":function(a,d,f){f.getName()=="tweet-retweet10"&&b(".js-tweet-retweet-link").addClass("retweet-glow")},
"{Popup.Manager} onHide":function(a,d,f){f.getName()=="tweet-retweet10"&&b(".js-tweet-retweet-link").removeClass("retweet-glow")},_showError:function(a,d){b(".js-retweet-message-box-holder").css("z-index",999);this.msg.showAndHide(a,Message.TYPE_ERROR,".js-retweet-message-box",3E3,function(){b(".js-retweet-message-box-holder").css("z-index",1);typeof d=="function"&&d()})},_hasCyrilicSymbols:function(a){if(!a)return false;return a.match(/[\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e\u044f]/i)?
true:false},share:function(a){var d=this,f=this._hasCyrilicSymbols(LinkData.baseAliasLink)?LinkData.baseShortAliasLink:LinkData.baseAliasLink;Share.twitter("",Share.getMessageForTwitter(a,false,f,null),"",null,function(){d.hide()})}})});steal.loaded("app/show/theme10/popup/tweet-retweet.js");
steal("jquery/controller","jquery/view/ejs","app/show/theme9/popup/base-other-tweets.js",function(b){App.Show.Popup.BaseOtherTweets("App.Show.Popup.OtherTweets10",{scrollPane:b(".tweets-list"),firstRun:true,init:function(){this.initScroll();this.loadMoreTweets()},initScroll:function(){var a=this;this.scrollPane.jScrollPane({verticalDragMinHeight:30}).bind("jsp-scroll-y",function(d,f,g,k){k&&!a.isLoadingTweets&&a.needToLoadMore&&a.loadMoreTweets()})},loadMoreTweets:function(){var a=this,d=b(".symb-quant"),
f=b(".js-tweet-spinner"),g=a.scrollPane.data("tweets-cnt")+1,k=a.scrollPane.data("link-hash");a.isLoadingTweets=true;d.hide();f.show();b.get("/ajax/load-other-tweets-raw",{curr_tweets_cnt:g,hash:k,linkId:LinkData.id,cur_theme:LinkData.curTheme},function(o){if(a.firstRun){a.firstRun=false;a.element.animate({opacity:0},500,function(){a.element.removeClass("loading")});o.new_tweets_cnt!=0?a.appendNewTweets(o.tweets):a.find(".js-tweet-form").prepend(b("<p/>",{"class":"be-first",text:"Share your thoughts about this page"}));
a.element.animate({opacity:1},400);a.options.owner.updateTweetListContainerHeight()}else o.success&&a.appendNewTweets(o.tweets);a.scrollPane.data("tweets-cnt",o.new_tweets_cnt);if(!o.thereIsMoreTweets)a.needToLoadMore=false;a.isLoadingTweets=false;d.show();f.hide()})},getJsp:function(){return b(".scroll-pane").data("jsp")},reinitialise:function(){this.getJsp().reinitialise()},appendNewTweets:function(a){for(var d="",f=0;f<a.length;f++)d+=b.View("linkReplyEJS",a[f]);this.scrollPane.find(".jspPane .tweets-list-holder").append(d);
this.scrollPane.css("height",Math.min(260,this.scrollPane.find(".jspPane").innerHeight()));this.reinitialise()}})});steal.loaded("app/show/theme10/popup/other-tweets.js");steal("jquery/controller","app/show/popup.js",function(){App.Show.Popup("App.Show.Popup.FacebookAw10",{name:"facebook-aw-10",show:function(){this._super();Cookie.set("t6_show_auth_popup",true,{expires:2,path:"/"})},".js-btn-signin-tw click":function(){Cookie.set("t6_autowrap_on",true,{expires:0,path:"/"})}})});steal.loaded("app/show/theme10/popup/facebook-aw-10.js");
steal("jquery/controller","app/show/popup.js",function(b){App.Show.Popup("App.Show.Popup.Notify",{popup_notify_aw_clicked:false,_addClass:"login-autowrap-new",_addClassSuccess:"popup-notify","#js-try-it-now click":function(a,d){d.preventDefault();var f=this;this.popup_notify_aw_clicked=true;this.hihit(2118);b.get("/ajax/handle-notification-popup",{notification_value:"on",counter:2120},function(g){g.success&&f.enableSuccessMode()})},show:function(a){this._super(a);this.find(".js-content").show();this.find(".js-success").hide()},
hide:function(a){this._super(a);this.popup_notify_aw_clicked||this.hihit(2119)},enableSuccessMode:function(){App.Show.Popup.popupWindow.removeClass(this._addClass).addClass(this._addClassSuccess);this.find(".js-content").hide();this.find(".js-success").show()}})});steal.loaded("app/popups/notify.js");
steal("app/popups/secondary-popup.js",function(){App.SecondaryPopup("App.Show.Infoblock",{selector:".js-infoblock",request:{name:"show/infoblock"}},{name:"Infoblock",_addClass:"infoblock",showCustomHeader:0,_title:"Welcome to <span>Linkis</span>!",onShow:function(){hihit(3596)},onHide:function(){hihit(3597)},".info-details click":function(){hihit(3598)}})});steal.loaded("app/popups/infoblock.js");
(function(b){b.fn.ellipsis=function(a){return a=b.extend({row:1,"char":"..."},a),this.each(function(){var d=b(this),f=d.text(),g=d.height();d.text("a");var k=d.height()*a.row;if(g<=k)d.text(f);else{g=1;for(var o=f.length;g<o;){var s=Math.ceil((g+o)/2);d.text(f.slice(0,s)+a["char"]);d.height()<=k?(g=s):(o=s-1)}d.text(f.slice(0,g)+a["char"])}}),this}})(jQuery);steal.loaded("lib/jquery.ellipsis.js");
steal("jquery/controller","app/show/likes.js","app/models/likes11.js",function(b){App.Show.Likes("App.Show.Theme11.Likes",{defaults:{counters:{like:2656}}},{ignoreNeedSignIn:true,".js-like, .js-dislike click":function(a,d){d.preventDefault();var f=this,g=a.hasClass("like")||a.hasClass("top-like")||a.hasClass("js-like")?"like":"dislike";if(!f.disabledLiking)if(LinkData.needSignIn&&!this.ignoreNeedSignIn){b.cookie("delayed_action",g);hihit(1957);Popup.show(Popup.TYPE_AUTH,true)}else if(this.onBeforeClick(a,
g)!==false){f.disabledLiking=true;a=LinkData.shortUrl;lnEvent("likes",g);(new Theme.Models.Likes11({short_link:a,action:g})).save(function(k,o){k.processSuccess(o);f.disabledLiking=false;if(o.success=="true"){f._counter(g);f.onSuccess(g,o)}},function(){});if(a=Registry.getController("show"))a.showForcePopup=false}},onBeforeClick:function(){if(!this.find(".js-like").hasClass("green-like"))return false},onSuccess:function(){b(".js-like-box").find(".js-like").removeClass("green-like");hihit(this.options.counters.like)}})});
steal.loaded("app/show/theme11/likes.js");
steal("jquery/controller","app/models/promo.js","app/show/theme10/promo.js",function(b){App.Show.Theme10.Promo("App.Show.Theme11.Promo",{_renderToPanel:function(a){b(".js-reset-promo-box").hide();a.isNew()||b(".js-reset-promo-box").show();var d=b(".js-promo-box");b(".js-promo-title",d).attr("title",a.title).html(a.title);b(".js-promo-text-link, .js-promo-image-link",d).attr("href",a.source_url);b(".js-promo-domain").html(a.source_url);b(".js-promo-image",d).hide();if(a.image){b(".js-promo-image",
d).show();b(".js-promo-image",d).attr("src",a.image)}b(".js-promo-text, .js-description").html(a.description);b(".js-reset-promo-wrapper").show();b(".js-step-1").hide();b(".js-step-4").show()},_hihitOnSave:function(){hihit(2664)}})});steal.loaded("app/show/theme11/promo.js");
steal("jquery/controller","lib/jquery.ellipsis.js",function(b){b.Controller("App.Show.Theme11.RSS",{_rssBox:b(".js-rss-content"),_rssName:b(".js-rss-name"),_ellipsisApplied:false,init:function(){var a=this;this.hideOnEsc();a.cutRssTitleText();b(window).resize(function(){a.adjustElements()})},".js-rss-hihint-visit click":function(){hihit(2933)},".js-rss-trigger click":function(a,d){d.preventDefault();this.element.toggleClass("active");if(this.element.hasClass("active")){this._rssBox.show();this.applyEllipsis();
this.adjustContentPosition();this.adjustElements()}else this._rssBox.hide()},adjustContentPosition:function(){var a=this._rssBox.offset();a.left<0&&this._rssBox.offset({top:a.top,left:5})},adjustElements:function(){var a=b(window).height()-b(".js-rss-block").outerHeight(true)-b(".js-rss-content .rss-descr").outerHeight(true)-b(".botttom-panel").outerHeight(true),d=0,f=0,g=b(".js-rss-content a");g.each(function(k){var o=b(this).outerHeight(true);if(d+o>a){f=k;return false}d+=o});g.show();f!==0&&g.slice(f).hide()},
applyEllipsis:function(){if(!this._ellipsisApplied){this._rssBox.find(".rss-descr, .rss-unit p").ellipsis({row:3});this._ellipsisApplied=true}},hideOnEsc:function(){b(document).on("keydown",function(a){if(a.keyCode===27){b(".js-rss-content").hide();b(".rss-big-wrapper").removeClass("active")}})},cutRssTitleText:function(){this._rssName.text().length>60&&this._rssName.text(this._rssName.text().substr(0,57)+"...")}})});steal.loaded("app/show/theme11/rss.js");
steal("jquery/controller","app/show/popup.js",function(){App.Show.Popup("App.Show.Popup.FacebookAw11",{name:"facebook-aw-11",_addClass:"popup-autowrap popup-autowrap-tweet2",show:function(){this._super();Cookie.set("t6_show_auth_popup",true,{expires:2,path:"/"})},".js-btn-signin-tw click":function(){Cookie.set("t6_autowrap_on",true,{expires:0,path:"/"})}})});steal.loaded("app/show/theme11/popup/facebook-aw-11.js");
steal("jquery/model","jquery/model/list","app/models/likes.js",function(){Theme.Models.Likes("Theme.Models.Likes11",{defaults:{short_link:null,action:null},findAll:function(){},findOne:function(){},create:"POST /ajax/{action}",update:"POST /ajax/{action}",destroy:function(){}},{processSuccess:function(b){if(b.success=="true"){$(".js-like-value span").html(b.data.likes);$(".js-dislike-value span").html(b.data.dislikes);Popup.hide()}}})});steal.loaded("app/models/likes11.js");
steal("jquery/controller","app/show/likes.js","app/models/likes11.js","app/show/theme11/likes.js",function(){App.Show.Theme11.Likes("App.Show.Theme12.Likes",{defaults:{counters:{like:2670}}},{})});steal.loaded("app/show/theme12/likes.js");steal("jquery/controller","app/models/promo.js","app/show/theme11/promo.js",function(){App.Show.Theme11.Promo("App.Show.Theme12.Promo",{_hihitOnSave:function(){hihit(2678)}})});steal.loaded("app/show/theme12/promo.js");
steal("jquery/controller","app/show/rss.js",function(){App.Show.RSS("App.Show.Theme12.RSS",{CYCLE:false,ANIMATION_SPEED:300,".js-rss-hihint-visit click":function(){hihit(2934)}})});steal.loaded("app/show/theme12/rss.js");
steal("jquery/controller",function(b){b.Controller("App.Show.RSS",{CYCLE:false,ANIMATE:false,ANIMATION_SPEED:300,_contentHolder:b(".js-rss-block .js-rss-content"),_viewPort:b(".js-rss-block .viewport"),_prevBtn:b(".js-rss-block .js-rss-prev"),_nextBtn:b(".js-rss-block .js-rss-next"),_feedItemClass:".js-feed-item",items:[],currentItem:0,itemsCount:0,totalWidth:0,marginStep:0,init:function(){this.items=this.find(this._feedItemClass);var a=this.items.first().outerWidth(true);this.totalWidth=this.items.length*
a;this._viewPort.css("width",this.totalWidth+"px");this.itemsCount=this.items.length;this.marginStep=a;this._processButtonsClasses();this._adjustHolderHeight();if(this.CYCLE){b(this._prevBtn).addClass("active");b(this._nextBtn).addClass("active")}this._attachEventHandlers()},_attachEventHandlers:function(){var a=this;this._prevBtn.on("click",function(d){d.preventDefault();a.backward()});this._nextBtn.on("click",function(d){d.preventDefault();a.forward()})},_animate:function(a){this.ANIMATE?this._viewPort.animate({"margin-left":-a+
"px"},this.ANIMATION_SPEED):this._viewPort.css("margin-left",-a+"px")},_processStep:function(a){this.currentItem+=a;this._adjustHolderHeight();this._processButtonsClasses();this._animate(this.currentItem*this.marginStep)},forward:function(){if(this.currentItem+1==this.itemsCount)if(this.CYCLE)this.currentItem=-1;else return false;this._processStep(1)},backward:function(){if(this.currentItem===0)if(this.CYCLE)this.currentItem=this.itemsCount;else return false;this._processStep(-1)},_processButtonsClasses:function(){if(this.CYCLE)return false;
b(this._prevBtn).removeClass("active");b(this._nextBtn).removeClass("active");this.currentItem>0&&this._prevBtn.addClass("active");this.currentItem+1<this.itemsCount&&this._nextBtn.addClass("active")},_adjustHolderHeight:function(){this._contentHolder.css("height",b(this.items[this.currentItem]).outerHeight(true)+"px")}})});steal.loaded("app/show/rss.js");steal("jquery/controller","app/show/likes.js",function(){App.Show.Likes("App.Show.Theme13.Likes",{},{ignoreNeedSignIn:true,"{Theme.Models.Likes} created":function(){this.element.addClass("disabled")}})});
steal.loaded("app/show/theme13/likes.js");
steal("jquery/controller","jquery/view","jquery/view/ejs","app/show/poll.js",function(b){App.Show.Poll("App.Show.Theme13.Poll",{},{init:function(){},mouseleave:function(){},mouseenter:function(){},".js-chosen .js-vote click":function(a,d){d.preventDefault();this.unvote(a)},".js-vote click":function(a,d){d.preventDefault();(d=a.data("answer-id"))&&this.vote(d,a)},vote:function(a,d){var f=b(".poll-list");if(f.hasClass("disabled")||f.hasClass("voted")||d.hasClass("disabled"))return false;b(d,f).addClass("disabled");
var g={shortLink:LinkData.shortUrl,answerId:a,answersOrder:this._getAnswersOrder()};Registry.lastVotedAnswerId=a;b.post("/ajax/vote",g,function(k){d.removeClass("disabled");if(k.success){hihit(2712);f.animate({opacity:0},500,function(){b(this).replaceWith(k.html);b(".poll-list").css("opacity",0);b(".poll-list").animate({opacity:1},700)});b(".js-poll .number").html(k.stat.numVotes);b(".twitter-widget .poll").removeClass("empty").html(k.stat.numVotes)}else k.errorCode=="poll.error.noAuth"&&b(".vote-message").show()},
"json")},unvote:function(a){var d=b(".poll-list");if(a.hasClass("disabled")||b(".poll-list").hasClass("disabled"))return false;b(a,".poll-list").addClass("disabled");a={shortLink:LinkData.shortUrl,pollId:b(".poll-list").data("poll-id"),answersOrder:this._getAnswersOrder()};b.post("/ajax/unvote",a,function(f){if(f.success){d.animate({opacity:0},500,function(){b(this).replaceWith(f.html);b(".poll-list").css("opacity",0);b(".poll-list").animate({opacity:1},700)});b(".js-poll .number").html(f.stat.numVotes);
var g=b(".twitter-widget .poll");f.stat.numVotes===0?g.addClass("empty").html(""):g.html(f.stat.numVotes)}},"json")}})});steal.loaded("app/show/theme13/poll.js");
steal("jquery/controller","app/show/theme9/popup/base-other-tweets.js",function(b){App.Show.Popup.BaseOtherTweets("App.Show.Popup.OtherTweets13",{_addClass:"popup-twitter",_counters:{open:2708,close:2709},initScroll:function(){var a=this;b(".tweet-list").scroll(function(){if(this.offsetHeight+this.scrollTop+1>=this.scrollHeight&&!a.isLoadingTweets&&a.needToLoadMore){a.isLoadingTweets=true;a.loadMoreTweets()}})},loadMoreTweets:function(){var a=this,d=b(".js-loading"),f=b(".tweet-list"),g=f.data("tweets-cnt")+
1;f=f.data("link-hash");d.addClass("enabled");b.get("/ajax/load-other-tweets",{curr_tweets_cnt:g,hash:f,cur_link_id:LinkData.id,cur_theme:LinkData.curTheme},function(k){d.removeClass("enabled");a.isLoadingTweets=false;if(k.success===false||k.thereIsMoreTweets===false)a.needToLoadMore=false;if(k.success){b(".tweet-list .js-loading").before(k.html);b(".tweet-list").data("tweets-cnt",k.new_tweets_cnt)}})},show:function(){this._super();this.initScroll();this.addClass(this._addClass);hihit(2708)},hide:function(){this._super();
hihit(2709)}})});steal.loaded("app/show/theme13/popup/other-tweets.js");steal("jquery/controller","app/show/popup.js",function(){App.Show.Popup("App.Show.Popup.Poll",{_addClass:"popup-twitter",_counters:{open:2710,close:2713},show:function(){this._super();this.addClass(this._addClass);hihit(2710)},hide:function(){this._super();hihit(2713)}})});steal.loaded("app/show/theme13/popup/poll.js");
steal("app/popups/secondary-popup.js",function(b){App.SecondaryPopup("App.Show.Aw4",{popupHtmlBox:".js-aw4-box",selector:".js-aw4",request:{name:"show/theme-13/aw4"}},{name:"aw4",show:function(){this.element.show();this.setStatus(true);Popup.Manager.setActive(this);b([Popup.Manager]).trigger(Popup.Manager.EVENT_ON_SHOW,[this]);lnEvent("aw open",this.name);hihit(2715)},hide:function(a){this.element.hide();this.setStatus(false);Popup.Manager.removeActive();b([Popup.Manager]).trigger(Popup.Manager.EVENT_ON_HIDE,
[this,a]);lnEvent("aw close",this.name)},".js-btn-iphone-signin-tw click":function(){lnEvent("aw login",this.name);Cookie.set("t6_autowrap_on",1);Cookie.set("autowrap_from",{theme:LinkData.curTheme,aw_counter:2714});Cookie.set("t6_aw_tw_auth","2");Cookie.set("auth_from_theme",LinkData.parentTheme);window.twAuth()},".js-close click":function(a,d){d.preventDefault();Cookie.set("t6_autowrap_on",null,{expires:0,path:"/"});Popup.Manager.hide(d)}})});steal.loaded("app/show/theme13/popup/aw4.js");
steal("app/controllers/history/mylinks/short_form.js","app/controllers/history/mylinks/charts/charts.js",function(b){b.Controller("App.History.Mylinks.BaseController",{init:function(){this.element.app_history_mylinks_short_form();this.fetchMetadata();this.find(".js-history-holder").app_history_charts()},fetchMetadata:function(){var a=this,d=[],f=this.find('.js-history-holder .js-link-wrapper[data-refetch="1"]');f.each(function(){d.push({url:b(this).data("long-url"),short_url:b(this).data("short-url")})});
(new MetadataFetch(d,{cache:1,onReceive:function(g){for(var k in g)if(g[k].title){var o=f.filter('[data-short-url="'+k+'"]').find(".js-short-url");a.replaceTitle(o,g[k].title)}}})).fetch()},replaceTitle:function(a,d){a.animate({opacity:0},200,function(){a.text(d);a.animate({opacity:1},200)})}})});steal.loaded("app/controllers/history/mylinks/base.js");
steal("app/controllers/short_form.js","jquery/view/ejs","app/tools/metadata-fetch.js",function(b){App.ShortFormController("App.History.Mylinks.ShortFormController",{urlCreateDefaultParams:{mylinksPage:1},lastCreatedLink:null,repliesPopup:null,init:function(){this._super();window.NL_APP_DATA.createdUrlData&&this.processCreateUrlResponse(window.NL_APP_DATA.createdUrlData);this.adjustLinksWidth();this.repliesPopup=PopupSM.get("myLinksReplies",{format:{plural:"@count replies",singular:"1 reply"}})},processCreateUrlResponse:function(a){this.lastCreatedLink&&
a&&a.success&&this.prependUrlToHistory(this.lastCreatedLink);this._super(a)},onUrlCreate:function(a){this.input.myVal("").blur();hihit(2075);this.find(".js-short-link-box").show();var d=this.find(".js-short-link-block"),f=b.View("newItemEJS",a);d.html(f).find(".js-caption-input").focus();this.find(".js-theme-title").data("theme-id",a.theme);this.find(".js-theme-title").text(a.theme_title);this.reinitAddthis(a.full_short_url);this.adjustLinksWidth(d.find(".js-link-change-wrapper"));a.need_refetch&&
setTimeout(function(){b.get("/index/fetch-metadata",{short_url:a.short_url,cache:1},function(g){if(g.success&&g.title&&b.trim(g.title)){a.title=g.title;d.find(".js-short-url").text(g.title)}})},1E3);f=d.find(".js-copy-link");f.data("copy_text_enabled")||this.applyCopyText(f);if(window.LinkData)window.LinkData.theme=a.theme},onCaptionUpdate:function(a){this.reinitAddthis(null,a)},prependUrlToHistory:function(a){if(this.find(".js-empty-history").length){this.find(".js-empty-history").remove();this.find(".js-not-empty-history").show()}a.caption=
this.find(".js-short-link-box .js-link-caption-text").text();a=b.View("historyItemEJS",a);a=b(a).prependTo(".js-history-holder");this.applyCopyText(a.find(".js-copy-link"));this.adjustLinksWidth()},reinitAddthis:function(a,d){var f=this.find(".addthis_toolbox");a!==undefined&&a!==null&&f.attr({"addthis:url":a});d!==undefined&&d!==null&&f.attr({"addthis:title":d});window.addthis&&window.addthis.toolbox(".addthis_toolbox")},".js-edit .js-change-theme click":function(a,d){d.stopImmediatePropagation();
var f=a.closest(".js-link-wrapper"),g=PopupSM.get("changeLinkTheme").setLinkId(f.data("link-id")).setTheme(f.data("theme")).selectTheme(f.data("theme"));g.onHide=function(){f.data("theme",g.activeTheme);f.data("theme-title",g.activeThemeTitle);a.parent().find(".js-theme-title").text(g.activeThemeTitle)};g.show()},".js-edit-link click":function(a,d){d.preventDefault();var f=a.closest(".js-link-wrapper");a=f.find(".js-view");d=f.find(".js-edit").empty();f={id:f.data("link-id"),title:f.find(".js-short-url").text(),
url:f.find(".js-copy-link").data("text"),full_short_url:f.find(".js-short-url").attr("href"),base_alias_url:f.find(".js-short-url").attr("href"),original_url:f.find(".js-long-url").attr("href"),caption:f.find(".js-caption").text(),theme_title:f.data("theme-title")};var g=this.getEditHtml(f);a.hide();d.html(g).show();this.reinitAddthis(f.base_alias_url);this.adjustLinksWidth();d.find(".js-caption-input").focus();a=d.find(".js-copy-link");a.data("copy_text_enabled")||this.applyCopyText(a)},".white-block mouseenter":function(a){a.find(".soc-widgets-holder").css("visibility",
"visible")},".white-block mouseleave":function(a,d){d.relatedTarget&&b(d.relatedTarget).closest(".atm").length>0?b(d.relatedTarget).closest(".atm").one("mouseleave",function(){a.find(".soc-widgets-holder").css("visibility","hidden")}):a.find(".soc-widgets-holder").css("visibility","hidden")},getEditHtml:function(a){var d=this.find(".js-short-link-box").clone().find(".js-short-link-block");a=b.View("editItemEJS",a);d.html(a).find(".js-caption-input").focus();return d.html()},".js-show-other-tweets click":function(a,
d){d.preventDefault();d=a.closest(".js-link-wrapper");this.repliesPopup.setLinkId(d.data("link-id"));this.repliesPopup.setTitle(a.text());this.repliesPopup.setLinkHash(d.data("link-hash"));this.repliesPopup.show()}})});steal.loaded("app/controllers/history/mylinks/short_form.js");
steal("app/tools/copy_text","app/tools/message-box.js","app/tools/secondary-popup-manager.js","app/controllers/history/mylinks/popups/change-theme.js","app/controllers/history/mylinks/popups/link-replies.js",function(b){b.Controller("App.ShortFormController",{defaults:{}},{sendFormOnKeyUp:false,form:null,input:null,linkMsg:null,captionMsg:null,isFormDisabled:false,urlCreateDefaultParams:{},lastCreatedLink:{},init:function(){this.form=this.find(".js-short-form");this.input=this.find(".js-url-inp");
this.initMessageBoxes();this.initAddthis();this.applyCopyTextHandler()},adjustLinksWidth:function(a){a=a||b(".js-link-change-wrapper");a.each(function(){var d=b(this).outerWidth(),f=b(this).find(".js-short-label").outerWidth(true),g=b(this).find(".instead-of").outerWidth(true);d=d-f-g-5;b(this).find(".js-long-url").css("max-width",d+"px");b(this).removeClass("unprocessed")})},initMessageBoxes:function(){var a=this;this.linkMsg=new MessageBox(".js-link-message",{hideDelay:5E3,elmInner:null,onShow:function(d){d==
MessageBox.TYPE_ERROR&&a.form.addClass("sharer-error")},onHide:function(d){d==MessageBox.TYPE_ERROR&&a.form.removeClass("sharer-error")}});this.captionMsg=new MessageBox(".js-caption-message",{elmInner:null})},initAddthis:function(){jQuery.getScript(window.NL_APP_DATA.addThisSrc+window.NL_APP_DATA.addThisId,function(){window.addthis&&window.addthis.init()})},applyCopyTextHandler:function(){var a=this;b(".js-link-wrapper").mouseenter(function(){if(b(this).data("loaded-scripts")===0){a.applyCopyText(b(this).find(".js-copy-link"));
b(this).data("loaded-scripts",1)}})},applyCopyText:function(a){a.app_copy_text({mouseEnter:function(d){d.closest(".js-link-wrapper").find(".zclip").prop("title",d.text())},afterCopy:function(){var d=b(this);d.addClass("copied-link");setTimeout(function(){d.removeClass("copied-link")},2E3)}})},".js-short-form submit":function(a,d){d.preventDefault();var f=this;if(!this.isFormDisabled){a=this.input.myVal();if(a=this.checkURL(a)){d=b("#g-recaptcha-response");if(d.length){var g=d.val();if(!g){this.onFailure("Please enter captcha");
return}}this.ajaxStart();g=b.extend({url:a,g_recaptcha_response:g},this.urlCreateDefaultParams);b.ajax("/url/create",{type:"post",data:g,success:function(k){f.ajaxEnd();f.processCreateUrlResponse(k);window.grecaptcha&&grecaptcha.reset()},error:function(){f.linkMsg.showAndHide(LNG["index.urlCreationError"]);f.ajaxEnd()}})}else this.onFailure("empty_url")}},".js-url-inp keydown":function(a,d){if((d.ctrlKey||d.metaKey)&&(d.which==86||d.which==1052)||d.shiftKey&&d.which==45)this.sendFormOnKeyUp=true},
".js-url-inp focus":function(a){a.addClass("active")},".js-url-inp blur":function(a){a.removeClass("active")},".js-url-inp keyup":function(a,d){if(this.sendFormOnKeyUp){this.sendFormOnKeyUp=false;b.trim(this.input.val()).length&&this.form.submit()}d.keyCode!=13&&this.linkMsg.hide()},".js-short-link-box .js-btn-edit-caption click":function(a,d){d.preventDefault();a.hide();this.find(".js-link-caption-box").hide();this.find(".js-link-caption-form").show();this.find(".js-caption-input").val(this.find(".js-link-caption-text").text())},
".js-short-link-box .js-link-caption-form submit":function(a,d){d.preventDefault();this.saveCaption(a.serialize(),function(f){this.find(".js-link-caption-text").text(f.caption);this.find(".js-caption-input").val(f.caption);this.find(".js-link-caption-box").show();this.find(".js-btn-edit-caption").show();this.find(".js-link-caption-form").hide();this.onCaptionUpdate(f.caption)})},".js-change-theme.new-link click":function(a,d){d.preventDefault();d=a.closest(".theme-shooser").find(".js-theme-title").data("theme-id");
var f=PopupSM.get("changeLinkTheme");this.lastCreatedLink.id&&f.setLinkId(this.lastCreatedLink.id);f.setLinkId(this.lastCreatedLink.id).setTheme(d).selectTheme(d);f.onHide=function(){a.parent().find(".js-theme-title").text(f.activeThemeTitle).data("theme-id",f.activeTheme)};f.show()},".js-edit .js-link-caption-form submit":function(a,d){d.preventDefault();var f=this;this.saveCaption(a.serialize(),function(g){var k=a.closest(".js-link-wrapper");k.find(".js-caption").text(g.caption);k.find(".js-edit").hide();
k.find(".js-view").show();f.adjustLinksWidth(k.find(".js-link-change-wrapper"))})},saveCaption:function(a,d){var f=this;b.post("/url/edit-caption",a,function(g){if(g.success)d&&d.call(f,g);else f.captionMsg.showAndHide(g.error,SettingsMessage.TYPE_ERROR)})},".js-short-link-box .js-link-caption-cancel click":function(a,d){d.preventDefault();this.find(".js-link-caption-form").hide()[0].reset();this.find(".js-link-caption-box").show();this.find(".js-btn-edit-caption").show();this.adjustLinksWidth(a.closest(".js-short-link-box").find(".js-link-change-wrapper"))},
".js-edit .js-link-caption-cancel click":function(a,d){d.stopImmediatePropagation();d.preventDefault();a=a.closest(".js-link-wrapper");a.find(".js-edit").hide();a.find(".js-view").show();this.adjustLinksWidth(a.find(".js-link-change-wrapper"))},".js-caption-input keyup":function(a){this.find(".js-symb-count .current").text(a.val().length)},checkURL:function(a){if(a.length==0)return false;/^(https?|ftp|file):\/?\/?/i.test(a)||(a="http://"+a);return a},ajaxStart:function(){this.isFormDisabled=true;
this.find(".js-link-submit").addClass("with-loader");this.find(".js-link-loader").show()},ajaxEnd:function(){this.isFormDisabled=false;this.find(".js-link-submit").removeClass("with-loader");this.find(".js-link-loader").hide()},processCreateUrlResponse:function(a){if(!a||!a.success)this.onFailure(a?a.error:"error");else{a.title=a.title||a.full_short_url;this.lastCreatedLink=a;this.onUrlCreate(a)}},onUrlCreate:function(){throw new Error("method onUrlCreate is abstract");},onCaptionUpdate:function(){},
onFailure:function(a){this.linkMsg.showAndHide(a=="empty_url"?LNG["index.urlEmpty"]:a,MessageBox.TYPE_ERROR)}})});steal.loaded("app/controllers/short_form.js");
steal("app/popups/secondary-popup.js","lib/jquery.mousewheel.js","lib/jquery.jscrollpane.js",function(b){App.SecondaryPopup("App.Mylinks.Popup.ChangeTheme",{_addClass:"popup-themes",_title:"Themes",_description:"Choose the theme for your processed pages.",hideCloseBtn:false,activeTheme:null,selectedTheme:null,activeThemeTitle:"",linkId:null,loadedImages:false,init:function(){},onShow:function(){this.find(".js-small-themes").jScrollPane();this.selectedTheme=this.activeTheme;this.activeThemeTitle=this.find('.js-small-themes .js-theme[data-theme="'+
this.selectedTheme+'"]').find("h5").text();if(!this.loadedImages){this.loadThemesImages();this.loadedImages=true}},onHide:function(){},setLinkId:function(a){this.linkId=a;return this},selectTheme:function(a){this.selectedTheme=a;this.find(".js-small-themes .js-theme").removeClass("active");this.find('.js-small-themes .js-theme[data-theme="'+this.selectedTheme+'"]').addClass("active");this.find(".js-big-themes .theme-unit").hide().filter('[data-theme="'+this.selectedTheme+'"]').show();return this},
setTheme:function(a){this.activeTheme=a;this.find(".js-small-themes .js-theme").removeClass("activated");this.find('.js-small-themes .js-theme[data-theme="'+this.activeTheme+'"]').addClass("activated");this.find("span.js-active").hide();this.find("a.js-activate").show();a=this.find('.js-big-themes .js-theme[data-theme="'+this.activeTheme+'"]');a.find(".js-active").show();a.find(".js-activate").hide();return this},save:function(){var a=this;if(!this.activeTheme)throw new Error("active-theme not specified");
if(!this.linkId)throw new Error("link-id not specified");b.post("/url/set-link-theme",{id:this.linkId,theme:this.activeTheme},function(d){if(d.success){a.selectedTheme=a.activeTheme;a.activeThemeTitle=a.find('.js-small-themes .js-theme[data-theme="'+a.selectedTheme+'"]').find("h5").text()}})},loadThemesImages:function(){var a=this;b.get("/ajax/get-themes-images",function(d){d.success&&a.find(".js-theme").each(function(){var f=b(this).data("theme");b(this).find(".big-theme-holder").append(b("<img/>",
{src:d.images[f]}))})})},".js-small-themes .js-theme click":function(a){this.selectTheme(a.data("theme"))},".js-activate click":function(a,d){d.preventDefault();d.stopPropagation();this.setTheme(a.closest(".js-theme").data("theme"));this.save()}})});steal.loaded("app/controllers/history/mylinks/popups/change-theme.js");
steal("jquery/class","app/show/popup.js").then(function(){$.Class("Popup.Manager",{_popups:[],_loadedPopups:[],_active:null,EVENT_ON_HIDE:"onHide",EVENT_ON_SHOW:"onShow",init:function(){this._popups=window.Popups||[];var b=this;App.Show.Popup.popupBox.on("click",".popup-close, .js-popup-close",function(a){b.hide(a);return false});$(window).keydown(function(a){a.which==27&&b.isActive()&&b.hide(a)});$(window).resize(function(){b.isActive()&&b.getActive()._centrify()});$(this._popups).each(function(a,
d){$.isArray(d)?$(d).each(function(f,g){b.initPopupClass(g)}):b.initPopupClass(d)})},getClassName:function(b){b=$.String.camelize(b);return $.String.capitalize(b,{})},initPopupClass:function(b){var a=this.getClassName(b.name);if($(b.selector).length>0)$.isFunction(App.Show.Popup[a])?this._loadedPopups.push(new App.Show.Popup[a]($(b.selector),b)):this._loadedPopups.push(new App.Show.Popup($(b.selector),b))},show:function(b){this.hide();try{var a=this._getPopup(b)}catch(d){}if(a){a.show();this.setActive(a)}return this},
addClass:function(b){this.getActive().addClass(b);return this},showRandom:function(b){return this.getRandom(b).show()},getRandom:function(b){b=this._getExists(b);var a=b.length-1;a=Math.floor(Math.random()*(a-0+1))+0;return this._getPopup(b[a])},hide:function(b){$(".js-parent-popup-close").show();b=b||jQuery.Event("click");if(this.getActive()!==null){this.getActive().hide(b);this.removeActive()}return this},setActive:function(b){this._active=b;return this},removeActive:function(){this._active=null;
return this},getActive:function(){return this._active},isActive:function(){return this.getActive()!==null},_getPopup:function(b){var a=null;$(this._loadedPopups).each(function(d,f){if(b==f.getName())a=f});return a},isExist:function(b){if(this._getPopup(b)!==null)return true;return false},_getExists:function(b){var a=[],d=this;$.each(b,function(f,g){d.isExist(g)&&a.push(g)});return a}},{})});steal.loaded("app/tools/popup-manager.js");
