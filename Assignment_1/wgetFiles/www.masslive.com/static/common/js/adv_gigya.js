(function(global){"use strict";if(typeof global.console=="undefined"||typeof global.console.log=="undefined"||typeof global.console.warn=="undefined"||typeof global.console.debug=="undefined"||typeof global.console.info=="undefined"){global.console={log:function(){},info:function(){},debug:function(){},warn:function(){}}}if(!global.Advance)global.Advance={};var ADIGigya=function(){var self=this;if(global.Advance.Gigya){global.Advance.Gigya.debug("Gigya already loaded!");return global.Advance.Gigya}global.Advance.Gigya=this;this.tld=function(){var h=global.location.host.split(".").reverse();return h[0]=="com"?[h[1],h[0]].join("."):"advance.net"}();this.tier=global.advEnvPrefix===""?"prod":"dev";this.fn={};this.uri=global.location.protocol+"//"+global.location.host+global.location.pathname;this.shortenedURLs={};this.settings={page:{},emailTemplate:"$sender$ sent:<br /><br />$userMsg$<br/><br />-----<br /><br />$URL$<br/><br />$title$<br/>$description$",key:_affiliate_settings[this.tld]["keys"][this.tier],socialHandles:_affiliate_settings[this.tld]["socialHandles"]};this._gigyaProtocol="https:";this._blocked=false;this._use_case={};this._promises={};global.jQuery("head").append('<style type="text/css">div.gig-button-container-email { display:none !important; }</style>');Advance.MT.util.attachEventHandler("sessionCreation",function(){self.debug("MT sessionCreation event");if(global.user&&global.user.is_banned===0){self.debug("Making Email share control visible");global.jQuery("head").append('<style type="text/css">div.gig-button-container-email { display:inline-block !important; }</style>')}});this._debug=!!global.location.hash.match(/gigyadebug/);this.debug=function(){if(this._debug){var args=Array.prototype.slice.call(arguments,0);console.log("%cAdvance.Gigya","color: #00CC70",args)}};if(global.m_context!=="hssn_page"){global.gigya=false}global.jQuery("html").one("gigyaReady.adi",function(){self._runQueue()});this._queue=[];this._enqueue=function(opts){this.debug("Queueing task:",opts);this._queue.push(opts)};this._runQueue=function(){for(var i=0;i<this._queue.length;i++){var task=this._queue[i];this.debug("Running queued task:",task);this.fn[task.fn].apply(this,task.params)}this._queue=[]};this.fn.buildGigyaShareBar=function(opts){var self=this;self.debug("fn.buildGigyaShareBar called with opts:",opts);var params=global.jQuery.extend({},opts);if(global.gigya){params.link=params.link?params.link:self.settings.page.link?self.settings.page.link:self.uri;params.shareButtons=function(){var providers=params.shareButtons||["twitter-tweet","facebook-share","googleplus-share","pinterest-pinit","reddit","email"].join(",");var p=[];if(typeof providers==="string"){providers=providers.split(",")}if(typeof providers[0]==="string"){for(var i=0;i<providers.length;i++){p[i]={provider:providers[i]};if(p[i].provider==="twitter-tweet"){if(self.tld!=="syracuse.com"){p[i].via=self.settings.socialHandles.twitter}}p[i].countURL=params.link}}else{p=providers}return p}();this.fn.shortenURL(params.link).then(function(link){params.shortURLs="never";params.link=link;var shareParams=global.jQuery.extend(true,{userAction:params.userAction||self.fn.buildUserAction(params),containerID:params.containerID||params.div,layout:"horizontal",showCounts:"none",iconsOnly:false,emailBody:self.settings.emailTemplate},params);global.gigya.socialize.showShareBarUI(shareParams);self.debug("global.gigya.socialize.showShareBarUI called by fn.buildGigyaShareBar",shareParams)})}else{self.debug("buildGigyaShareBar: gigya not ready, NOT building share bar");self._enqueue({fn:"buildGigyaShareBar",params:[opts]})}}.bind(this);this.fn.showGigyaShareUI=function(opts){var self=this;var params=global.jQuery.extend({},opts);self.debug("fn.showGigyaShareUI",opts);if(global.gigya){var shareParams=global.jQuery.extend(true,{userAction:params.userAction||self.fn.buildUserAction(params),shortURLs:"always",showAlwaysShare:"unchecked",showNeverShare:false,operationMode:global.Modernizr&&global.Modernizr.touch?"simpleShare":"multiSelect",enabledProviders:"twitter,facebook,linkedin,yahoo",userMessagePlaceholder:"Your message...",showTooltips:true,showEmailButton:!global.user||global.user.is_banned==1?false:true,emailBody:self.settings.emailTemplate,deviceType:global.Modernizr&&global.Modernizr.touch?"mobile":"desktop"},params);global.gigya.socialize.showShareUI(shareParams);self.debug("gigya.socialize.showShareUI called by fn.showGigyaShareUI",shareParams)}else{self.debug("showGigyaShareUI: gigya not ready, NOT displaying Share UI");self._enqueue({fn:"showGigyaShareUI",params:[opts]})}}.bind(this);this.fn.buildUserAction=function(opts){opts=opts||{};if(global.gigya){var params=global.jQuery.extend({},this.settings.page,opts);params.link=params.link||this.uri;var ua=new global.gigya.socialize.UserAction;ua.setLinkBack(params.link);ua.addActionLink("Read more...",params.link);if(params.title)ua.setTitle(params.title);if(params.subtitle)ua.setSubtitle(params.subtitle);if(params.userMessage)ua.setUserMessage(params.userMessage);if(params.desc)ua.setDescription(params.desc);if(params.thumbnail){ua.addMediaItem({type:"image",src:params.thumbnail,href:params.link})}self.debug("fn.buildUserAction built UserAction object with:",params);return ua}else{self.debug("Gigya not found, fn.buildUserAction doing nothing");return false}}.bind(this);this.fn.shortenURL=function(link){var self=this;if(this.shortenedURLs[link]){self.debug("fn.shortenURL already resolved that link!");var d=global.jQuery.Deferred();return d.resolve(this.shortenedURLs[link]).promise()}if(self._promises[link]){self.debug("URL shortening is in process!",link);return self._promises[link].promise()}self._promises[link]=global.jQuery.Deferred();self.debug("fn.shortenURL",link);if(!link){self.debug("fn.shortenURL got no link!");var d=global.jQuery.Deferred();return d.resolve(self.uri).promise()}global.gigya.socialize.shortenURL({URL:link,callback:function(resp){if(resp.errorCode===0){self.shortenedURLs[link]=resp.shortURL;self.debug("gigya.socialize.shortenURL returned successfully:",resp);self._promises[link].resolve(resp.shortURL)}else{self.debug("gigya.socialize.shortenURL returned an error:",resp);self._promises[link].resolve(link)}}});return self._promises[link].promise()}.bind(this);this.fn.loadSocialize=function(){var self=this;self._promises.loadSocialize=self._promises.loadSocialize&&self._blocked===true?self._promises.loadSocialize:global.jQuery.Deferred();self.debug("fn.loadSocialize called");if(self._blocked===true){self.debug("Double load of socialize.js attempted");return self._promises.loadSocialize.promise()}if(!global.gigya){self._blocked=true;var gs=document.createElement("script");gs.src=self._gigyaProtocol+"//cdns.gigya.com/js/socialize.js?apiKey="+self.settings.key;gs.type="text/javascript";gs.async="true";gs.onload=gs.onreadystatechange=function(){var gsrs=this.readyState;if(!self._blocked||gsrs&&gsrs!="complete"&&gsrs!="loaded"){return}self._blocked=false;global.jQuery(this).trigger("gigyaReady.adi");self.debug("fn.loadSocialize complete");self._promises.loadSocialize.resolve(true)};var gst=document.getElementsByTagName("script")[0];gst.parentNode.insertBefore(gs,gst)}else{self.debug("Second load of socialize.js intercepted");self._promises.loadSocialize.resolve(false)}return self._promises.loadSocialize.promise()}.bind(this);this._use_case.execute=function(){var self=this;self.debug("_use_case.execute");var _cb=function(){global.jQuery(document).ready(function(){if(global.arcs_page_template==="article"||global.m_context==="hssn_page"&&(m_hssn_type==="player"||m_hssn_type==="game"||m_hssn_type==="school"||m_hssn_type==="team")){return self._use_case.article()}})};if([global.jQuery.fn.jquery.split(".")[0],global.jQuery.fn.jquery.split(".")[1]].join("")>16){global.jQuery("html").on("gigyaReady.adi",_cb)}else{self.debug("_use_case.execute: jQuery is old");global.jQuery(document).delegate("html","gigyaReady.adi",_cb)}}.bind(this);this._use_case._clientWidth=function(){return global.jQuery(window).width()};this._use_case._itemBelowFold=function(item){return item.length>0?item.offset().top>global.jQuery(window).height():false};this._use_case.article=function(){var self=this;self.debug("_use_case.article");if(self._use_case._clientWidth()<600){return}if(typeof global.buildGigyaShareBar!=="undefined")return;if(global.m_context==="blog_entry"&&JSON.stringify(self.settings.page)==="{}")return;if(self._use_case._itemBelowFold(global.jQuery("#social_bottom"))){self.fn.buildGigyaShareBar({div:"social_bottom",layout:"horizontal",showCounts:"right"})}if(self._use_case._clientWidth()>1024){self.fn.buildGigyaShareBar({div:"social_top",layout:"vertical",showCounts:"top"})}else{self.fn.buildGigyaShareBar({div:"social_mobile",layout:"horizontal",showCounts:"right"})}}.bind(this);global.gigyaConf={APIKey:this.settings.key};if(self._use_case._clientWidth()>=600||global.m_context=="team_page"||global.m_context=="topic_page"){this._use_case.execute();this.fn.loadSocialize()}};var _affiliate_settings={"advance.net":{socialHandles:{twitter:"Advance_Digital",facebook:"AdvanceDigitalInc"},keys:{dev:"2_LYvEyXs0b-lKWHC8sKyg6UJsgWe-W6dTtDzrzdoWOVlTo2ZWlj6n-QtxtUlX4-nK",prod:"2_iWsMDu4Cet-wL4cnhYjt8QrF0601c5VNEiF5aUF5UZKgpbv2PLrlUuwZzp9wlxSH"}},"al.com":{socialHandles:{twitter:"aldotcom",facebook:"aldotcom"},keys:{dev:"2_Y6KDvPqzlKvGw4bj7BED9M0bIFGDxnGS3w0uX6kVnmEx7EuWFxHqy8oYimi8s-Vk",prod:"2_iH8IhEn_gwBmnM4mWho_Fv8MUmWJBVQ5WRekpDXJgtW6O-rg_aeBZ4lvrJVwKL8q"}},"cleveland.com":{socialHandles:{twitter:"clevelanddotcom",facebook:"clevelandcom"},keys:{dev:"2_BHzwn7YIaLe9o1MNQWYN1Hib3GddNiXk39-EQaCEvDbSfZae1UaqS_FVzlqW3W4Y",prod:"2_iSv3jf0mvUEgvWUjN8lzJ-ALfc8SEqUr9-XUo10t_9684PgkUcsRVHaH_CrcIQYU"}},"gulflive.com":{socialHandles:{twitter:"gulflive",facebook:"gulflive"},keys:{dev:"2_diFq5nJmhQ7CfYf2bpnDzelp9Sb1c7D2TpO4fozR6uqNZDY52rrSpjr8p30LFU0d",prod:"2_W8dGEFkNXg2ejQ4WnOSkOtGrGzkxYxwpQXI6BPRaPsDRq1vuLxsXWqO_NG6bMFKa"}},"lehighvalleylive.com":{socialHandles:{twitter:"lehighvalley",facebook:"lehighvalleynews"},keys:{dev:"2_RJru-FplNxMURiy_AlvhGxbnCu3l2i-8R0QuF5sthzAMg74A7RLMwR8tsRzOC9mY",prod:"2_hwpnWNpiHx8F0mm6gUbmcI7q50IW0131ieE2k9-TskfOuaCWi0fKfjZSkkjGuDVU"}},"mardigras.com":{socialHandles:{twitter:"nolanews",facebook:"nolanews"},keys:{dev:"2_o-U_dL7ce6kzO6c0NipuejZimfZnObz39dPyhA7d_LjhA_7cx-vKr9FA4xf7W6xe",prod:"2_nroGCDkOaQ_JDxmOGfj4C0E9HV0kFwDwx5LFWIL1GQgPXGyiU6Mxn9mut0FOkTDF"}},"masslive.com":{socialHandles:{twitter:"masslivenews",facebook:"masslive"},keys:{dev:"2_TPOQwAurgNrmovnrr6Q9DjyRNNvsSQTXtu7dL8Tzh9U8kDYh9R2Ar4SKpLQVIX1W",prod:"2_GM0T9AaeYoYO_ZSlmp3IftcvqWS6ILXeQ7yHGbWGEWHiSsGe8w4smelld_IRopCt"}},"mlive.com":{socialHandles:{twitter:"mlive",facebook:"mlive"},keys:{dev:"2_04kW8X_rz7zkdWuSaryz7Jqi3EbXx8IhS7Z7I-6sU5YM47VA-Y_aE-UBoGOgVRPO",prod:"2_kemv3f8ukmqx9RTLINuAAKfnLdC9DzXkqIimlwuGu1NDP4v6j2QlqSA_--84yDcH"}},"nj.com":{socialHandles:{twitter:"njdotcom",facebook:"NJ.com"},keys:{dev:"2_1muNMTLsp0hng23kyQZjo3nyuA4-I5vW1mjswlpITnj_Wv3KIWA4IY8ycPzVeVhX",prod:"2_zRY6653lTf2HXRO7QpNF8g-SWUmQq2fLh8M3ohojfXhjwnQgUPPtAOpWDv047OUa"}},"nola.com":{socialHandles:{twitter:"nolanews",facebook:"nolanews"},keys:{dev:"2_o-U_dL7ce6kzO6c0NipuejZimfZnObz39dPyhA7d_LjhA_7cx-vKr9FA4xf7W6xe",prod:"2_nroGCDkOaQ_JDxmOGfj4C0E9HV0kFwDwx5LFWIL1GQgPXGyiU6Mxn9mut0FOkTDF"}},"oregonlive.com":{socialHandles:{twitter:"oregonian",facebook:"theoregonian"},keys:{dev:"2_XvhD7inKW0rhVg5HO2fLI5hjNd4XXJrXWg4OjKSvQjjqBVCVuKhVshxO2mmggmEU",prod:"2_Tefie9Yy6k1Be6-bnTwHgWAYAaqHgcm8dDlduVYGRKECmiTxQf5TK33uwZIpGURt"}},"pennlive.com":{socialHandles:{twitter:"pennlive",facebook:"pennlive"},keys:{dev:"2_FvScJ8VfjoF0pzjgHQGj4gMd9Qp4tCvxDnlP6tO-L2nynjoFGJ9g3IPS9xNtpmxN",prod:"2_lNg9401bFpb3OdWdeNdJ5Uum5uBwXUtNbSWWCBnGvhxbKnBAG-OHz1Ufr-upS4PE"}},"silive.com":{socialHandles:{twitter:"siadvance",facebook:"statenislandadvance"},keys:{dev:"2_fCGkoQQr95ns4DBsjMsvkdrP5gQLTWkJFUqmBRFQOB5svrs6zpCpowXQLblxPGRb",prod:"2_4ouE6Eb8FxfsbjsSK3AorB6mlSKVz34ynZ1KbycYFXshUJ82fJnITGKLDYTWfDWi"}},"syracuse.com":{socialHandles:{twitter:"syracusedotcom",facebook:"syracusecom"},keys:{dev:"2_oOEx9-TodTJIpsmpKGi9n-wYvLdxgHhVP8nHoX9ks3Hml04SV9OLuMP979CYK0Yy",prod:"2_gE8cpb5OwscbxKgdiTEzydhjYfyz-aRKD-hyvlbaBPQjoa7rfX3kn9hRDT3d5Nh3"}}};new ADIGigya})(window);