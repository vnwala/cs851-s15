TWP=TWP||{};TWP.Onlinegame=TWP.Onlinegame||{};TWP.Onlinegame.loaded=TWP.Onlinegame.loaded||false;jQuery(function(b){if(TWP.Onlinegame.loaded){return}else{TWP.Onlinegame.loaded=true}if(!isMobile()){b(".game-module .game-widgets-container .flash").show()}else{b(".game-module .game-widgets-container .flash").remove();b(".game-module.html5").hide()}var a=30;var d=731;var c=480;b(".games").on("click","a[data-toggle='game-trigger']",function(){var g=this;var e=parseInt(b(this).find(".game-item").attr("iframewidth"));e=(e>0)?e:d;var f=parseInt(b(this).find(".game-item").attr("iframeheight"));f=(f>0)?f:c;var h=b(this).parents(".game-module").width();b(this).parents(".game-module").find(".game-player-container iframe").attr("width",e);if(isIE8()){console.log("IE8!!!!");b(this).parents(".game-module").find(".game-player-container-inner").css("width",e+"px")}b(this).parents(".game-module").find(".game-player-container iframe").attr("height",f);b(this).parents(".game-module").find(".game-player-container").css("margin-left",h+"px");b(this).parents(".game-module").find(".game-player-container img").attr("src",b(this).find(".game-item").attr("screenshot"));b(this).parents(".game-module").find(".game-player-container img").attr("width",e);b(this).parents(".game-module").find(".game-player-container img").css("opacity","1");b(this).parents(".game-module").find(".game-player-container img").show();b(this).parents(".game-module").find(".game-player-container").show();b(this).parents(".game-module").find(".game-player-container").animate({marginLeft:h-e-a},1000,function(){b(g).parents(".game-module").find(".game-player-container iframe").attr("src",b(g).find(".game-item").attr("onlineembeddedgameurl"));b(g).parents(".game-module").find(".game-player-container img").animate({opacity:0},1000,function(){b(g).parents(".game-module").find(".game-player-container img").hide()})})});b(".main-column.game-module").on("click","a[data-toggle='game-trigger']",function(){var g=this;var e=parseInt(b(this).find(".game-item").attr("iframewidth"));e=(e>0)?e:d;var f=parseInt(b(this).find(".game-item").attr("iframeheight"));f=(f>0)?f:c;var i=b(this).parents(".game-module").width();var h=b(this).parents(".game-module").height();console.log("game player width = "+e);console.log("game player height = "+f);b(this).parents(".game-module").find(".game-player-container").css("width",(e+a)+"px");b(this).parents(".game-module").find(".game-player-container iframe").attr("width",e);b(this).parents(".game-module").find(".game-player-container iframe").attr("height",f);b(this).parents(".game-module").find(".game-player-container").css("margin-top",h+"px");b(this).parents(".game-module").find(".game-player-container img").attr("src",b(this).find(".game-item").attr("screenshot"));b(this).parents(".game-module").find(".game-player-container img").attr("width",e);b(this).parents(".game-module").find(".game-player-container img").css("opacity","1");b(this).parents(".game-module").find(".game-player-container img").show();b(this).parents(".game-module").find(".game-player-container").show();b(this).parents(".game-module").find(".game-player-container").animate({marginTop:h-f-a},1000,function(){console.log("anminate is done!");b(g).parents(".game-module").find(".game-player-container iframe").attr("src",b(g).find(".game-item").attr("onlineembeddedgameurl"));b(g).parents(".game-module").find(".game-player-container img").animate({opacity:0},1000,function(){b(g).parents(".game-module").find(".game-player-container img").hide()})})});b(".game-module").on("click",".game-player-container .close-button",function(){b(this).parents(".game-module").find("iframe").attr("src","");b(this).parent().hide();b(this).parents(".game-module").find(".game-player-container").css({left:0})})});function isMobile(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Kindle/i)||navigator.userAgent.match(/Windows Phone/i)){return true}else{return false}}function isIE7(){return $.browser.msie&&$.browser.version.substring(0,1)=="7"}function isIE8(){return $.browser.msie&&$.browser.version.substring(0,1)==="8"}function isIE9(){return $.browser.msie&&$.browser.version.substring(0,1)==="9"};