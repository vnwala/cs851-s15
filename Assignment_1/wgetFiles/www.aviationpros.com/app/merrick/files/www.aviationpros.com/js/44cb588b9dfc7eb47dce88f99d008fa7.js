
/*! start /app/merrick/themes/default/js/easing.js*/
jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});
/*! end /app/merrick/themes/default/js/easing.js*/

/*! start /app/merrick/themes/default/js/nicescroll.js*/
(function(jQuery){var domfocus=false;var mousefocus=false;var zoomactive=false;var tabindexcounter=5000;var ascrailcounter=2000;var globalmaxzindex=0;var $=jQuery;function getScriptPath(){var scripts=document.getElementsByTagName('script');var path=scripts[scripts.length-1].src.split('?')[0];return(path.split('/').length>0)?path.split('/').slice(0,-1).join('/')+'/':'';}
var scriptpath=getScriptPath();var setAnimationFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||false;})();var clearAnimationFrame=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||false;})();var clsMutationObserver=window.MutationObserver||window.WebKitMutationObserver||false;var _globaloptions={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:8*3,touchbehavior:false,hwacceleration:true,usetransition:true,boxzoom:false,dblclickzoom:true,gesturezoom:true,grabcursorenabled:true,autohidemode:true,background:"",iframeautoresize:true,cursorminheight:32,preservenativescrolling:true,railoffset:false,bouncescroll:true,spacebarenabled:true,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:true,horizrailenabled:true,railalign:"right",railvalign:"bottom",enabletranslate3d:true,enablemousewheel:true,enablekeyboard:true,smoothscroll:true,sensitiverail:true,enablemouselockapi:true,cursorfixedheight:false,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:true,enablescrollonselection:true}
var browserdetected=false;var getBrowserDetection=function(){if(browserdetected)return browserdetected;var domtest=document.createElement('DIV');var d={};d.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document;d.isopera=("opera"in window);d.isopera12=(d.isopera&&("getUserMedia"in navigator));d.isie=(("all"in document)&&("attachEvent"in domtest)&&!d.isopera);d.isieold=(d.isie&&!("msInterpolationMode"in domtest.style));d.isie7=d.isie&&!d.isieold&&(!("documentMode"in document)||(document.documentMode==7));d.isie8=d.isie&&("documentMode"in document)&&(document.documentMode==8);d.isie9=d.isie&&("performance"in window)&&(document.documentMode>=9);d.isie10=d.isie&&("performance"in window)&&(document.documentMode>=10);d.isie9mobile=/iemobile.9/i.test(navigator.userAgent);if(d.isie9mobile)d.isie9=false;d.isie7mobile=(!d.isie9mobile&&d.isie7)&&/iemobile/i.test(navigator.userAgent);d.ismozilla=("MozAppearance"in domtest.style);d.iswebkit=("WebkitAppearance"in domtest.style);d.ischrome=("chrome"in window);d.ischrome22=(d.ischrome&&d.haspointerlock);d.ischrome26=(d.ischrome&&("transition"in domtest.style));d.cantouch=("ontouchstart"in document.documentElement)||("ontouchstart"in window);d.hasmstouch=(window.navigator.msPointerEnabled||false);d.ismac=/^mac$/i.test(navigator.platform);d.isios=(d.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform));d.isios4=((d.isios)&&!("seal"in Object));d.isandroid=(/android/i.test(navigator.userAgent));d.trstyle=false;d.hastransform=false;d.hastranslate3d=false;d.transitionstyle=false;d.hastransition=false;d.transitionend=false;var check=['transform','msTransform','webkitTransform','MozTransform','OTransform'];for(var a=0;a<check.length;a++){if(typeof domtest.style[check[a]]!="undefined"){d.trstyle=check[a];break;}}
d.hastransform=(d.trstyle!=false);if(d.hastransform){domtest.style[d.trstyle]="translate3d(1px,2px,3px)";d.hastranslate3d=/translate3d/.test(domtest.style[d.trstyle]);}
d.transitionstyle=false;d.prefixstyle='';d.transitionend=false;var check=['transition','webkitTransition','MozTransition','OTransition','OTransition','msTransition','KhtmlTransition'];var prefix=['','-webkit-','-moz-','-o-','-o','-ms-','-khtml-'];var evs=['transitionend','webkitTransitionEnd','transitionend','otransitionend','oTransitionEnd','msTransitionEnd','KhtmlTransitionEnd'];for(var a=0;a<check.length;a++){if(check[a]in domtest.style){d.transitionstyle=check[a];d.prefixstyle=prefix[a];d.transitionend=evs[a];break;}}
if(d.ischrome26){d.prefixstyle=prefix[1];}
d.hastransition=(d.transitionstyle);function detectCursorGrab(){var lst=['-moz-grab','-webkit-grab','grab'];if((d.ischrome&&!d.ischrome22)||d.isie)lst=[];for(var a=0;a<lst.length;a++){var p=lst[a];domtest.style['cursor']=p;if(domtest.style['cursor']==p)return p;}
return'url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize';}
d.cursorgrabvalue=detectCursorGrab();d.hasmousecapture=("setCapture"in domtest);d.hasMutationObserver=(clsMutationObserver!==false);domtest=null;browserdetected=d;return d;}
var NiceScrollClass=function(myopt,me){var self=this;this.version='3.2.0';this.name='nicescroll';this.me=me;this.opt={doc:$("body"),win:false};$.extend(this.opt,_globaloptions);this.opt.snapbackspeed=80;if(myopt||false){for(var a in self.opt){if(typeof myopt[a]!="undefined")self.opt[a]=myopt[a];}}
this.doc=self.opt.doc;this.iddoc=(this.doc&&this.doc[0])?this.doc[0].id||'':'';this.ispage=/BODY|HTML/.test((self.opt.win)?self.opt.win[0].nodeName:this.doc[0].nodeName);this.haswrapper=(self.opt.win!==false);this.win=self.opt.win||(this.ispage?$(window):this.doc);this.docscroll=(this.ispage&&!this.haswrapper)?$(window):this.win;this.body=$("body");this.viewport=false;this.isfixed=false;this.iframe=false;this.isiframe=((this.doc[0].nodeName=='IFRAME')&&(this.win[0].nodeName=='IFRAME'));this.istextarea=(this.win[0].nodeName=='TEXTAREA');this.forcescreen=false;this.canshowonmouseevent=(self.opt.autohidemode!="scroll");this.onmousedown=false;this.onmouseup=false;this.onmousemove=false;this.onmousewheel=false;this.onkeypress=false;this.ongesturezoom=false;this.onclick=false;this.onscrollstart=false;this.onscrollend=false;this.onscrollcancel=false;this.onzoomin=false;this.onzoomout=false;this.view=false;this.page=false;this.scroll={x:0,y:0};this.scrollratio={x:0,y:0};this.cursorheight=20;this.scrollvaluemax=0;this.scrollrunning=false;this.scrollmom=false;this.observer=false;this.observerremover=false;do{this.id="ascrail"+(ascrailcounter++);}while(document.getElementById(this.id));this.rail=false;this.cursor=false;this.cursorfreezed=false;this.selectiondrag=false;this.zoom=false;this.zoomactive=false;this.hasfocus=false;this.hasmousefocus=false;this.visibility=true;this.locked=false;this.hidden=false;this.cursoractive=true;this.nativescrollingarea=false;this.checkarea=0;this.events=[];this.saved={};this.delaylist={};this.synclist={};this.lastdeltax=0;this.lastdeltay=0;this.detected=getBrowserDetection();var cap=$.extend({},this.detected);this.canhwscroll=(cap.hastransform&&self.opt.hwacceleration);this.ishwscroll=(this.canhwscroll&&self.haswrapper);this.istouchcapable=false;if(cap.cantouch&&cap.ischrome&&!cap.isios&&!cap.isandroid){this.istouchcapable=true;cap.cantouch=false;}
if(cap.cantouch&&cap.ismozilla&&!cap.isios){this.istouchcapable=true;cap.cantouch=false;}
if(!self.opt.enablemouselockapi){cap.hasmousecapture=false;cap.haspointerlock=false;}
this.delayed=function(name,fn,tm,lazy){var dd=self.delaylist[name];var nw=(new Date()).getTime();if(!lazy&&dd&&dd.tt)return false;if(dd&&dd.tt)clearTimeout(dd.tt);if(dd&&dd.last+tm>nw&&!dd.tt){self.delaylist[name]={last:nw+tm,tt:setTimeout(function(){self.delaylist[name].tt=0;fn.call();},tm)}}
else if(!dd||!dd.tt){self.delaylist[name]={last:nw,tt:0}
setTimeout(function(){fn.call();},0);}};this.debounced=function(name,fn,tm){var dd=self.delaylist[name];var nw=(new Date()).getTime();self.delaylist[name]=fn;if(!dd){setTimeout(function(){var fn=self.delaylist[name];self.delaylist[name]=false;fn.call();},tm);}}
this.synched=function(name,fn){function requestSync(){if(self.onsync)return;setAnimationFrame(function(){self.onsync=false;for(name in self.synclist){var fn=self.synclist[name];if(fn)fn.call(self);self.synclist[name]=false;}});self.onsync=true;};self.synclist[name]=fn;requestSync();return name;};this.unsynched=function(name){if(self.synclist[name])self.synclist[name]=false;}
this.css=function(el,pars){for(var n in pars){self.saved.css.push([el,n,el.css(n)]);el.css(n,pars[n]);}};this.scrollTop=function(val){return(typeof val=="undefined")?self.getScrollTop():self.setScrollTop(val);};this.scrollLeft=function(val){return(typeof val=="undefined")?self.getScrollLeft():self.setScrollLeft(val);};BezierClass=function(st,ed,spd,p1,p2,p3,p4){this.st=st;this.ed=ed;this.spd=spd;this.p1=p1||0;this.p2=p2||1;this.p3=p3||0;this.p4=p4||1;this.ts=(new Date()).getTime();this.df=this.ed-this.st;};BezierClass.prototype={B2:function(t){return 3*t*t*(1-t)},B3:function(t){return 3*t*(1-t)*(1-t)},B4:function(t){return(1-t)*(1-t)*(1-t)},getNow:function(){var nw=(new Date()).getTime();var pc=1-((nw-this.ts)/this.spd);var bz=this.B2(pc)+this.B3(pc)+this.B4(pc);return(pc<0)?this.ed:this.st+Math.round(this.df*bz);},update:function(ed,spd){this.st=this.getNow();this.ed=ed;this.spd=spd;this.ts=(new Date()).getTime();this.df=this.ed-this.st;return this;}};if(this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"};if(cap.hastranslate3d&&cap.isios)this.doc.css("-webkit-backface-visibility","hidden");function getMatrixValues(){var tr=self.doc.css(cap.trstyle);if(tr&&(tr.substr(0,6)=="matrix")){return tr.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,'').split(/, +/);}
return false;}
this.getScrollTop=function(last){if(!last){var mtx=getMatrixValues();if(mtx)return(mtx.length==16)?-mtx[13]:-mtx[5];if(self.timerscroll&&self.timerscroll.bz)return self.timerscroll.bz.getNow();}
return self.doc.translate.y;};this.getScrollLeft=function(last){if(!last){var mtx=getMatrixValues();if(mtx)return(mtx.length==16)?-mtx[12]:-mtx[4];if(self.timerscroll&&self.timerscroll.bh)return self.timerscroll.bh.getNow();}
return self.doc.translate.x;};if(document.createEvent){this.notifyScrollEvent=function(el){var e=document.createEvent("UIEvents");e.initUIEvent("scroll",false,true,window,1);el.dispatchEvent(e);};}
else if(document.fireEvent){this.notifyScrollEvent=function(el){var e=document.createEventObject();el.fireEvent("onscroll");e.cancelBubble=true;};}
else{this.notifyScrollEvent=function(el,add){};}
if(cap.hastranslate3d&&self.opt.enabletranslate3d){this.setScrollTop=function(val,silent){self.doc.translate.y=val;self.doc.translate.ty=(val*-1)+"px";self.doc.css(cap.trstyle,"translate3d("+self.doc.translate.tx+","+self.doc.translate.ty+",0px)");if(!silent)self.notifyScrollEvent(self.win[0]);};this.setScrollLeft=function(val,silent){self.doc.translate.x=val;self.doc.translate.tx=(val*-1)+"px";self.doc.css(cap.trstyle,"translate3d("+self.doc.translate.tx+","+self.doc.translate.ty+",0px)");if(!silent)self.notifyScrollEvent(self.win[0]);};}else{this.setScrollTop=function(val,silent){self.doc.translate.y=val;self.doc.translate.ty=(val*-1)+"px";self.doc.css(cap.trstyle,"translate("+self.doc.translate.tx+","+self.doc.translate.ty+")");if(!silent)self.notifyScrollEvent(self.win[0]);};this.setScrollLeft=function(val,silent){self.doc.translate.x=val;self.doc.translate.tx=(val*-1)+"px";self.doc.css(cap.trstyle,"translate("+self.doc.translate.tx+","+self.doc.translate.ty+")");if(!silent)self.notifyScrollEvent(self.win[0]);};}}else{this.getScrollTop=function(){return self.docscroll.scrollTop();};this.setScrollTop=function(val){return self.docscroll.scrollTop(val);};this.getScrollLeft=function(){return self.docscroll.scrollLeft();};this.setScrollLeft=function(val){return self.docscroll.scrollLeft(val);};}
this.getTarget=function(e){if(!e)return false;if(e.target)return e.target;if(e.srcElement)return e.srcElement;return false;};this.hasParent=function(e,id){if(!e)return false;var el=e.target||e.srcElement||e||false;while(el&&el.id!=id){el=el.parentNode||false;}
return(el!==false);};function getZIndex(){var dom=self.win;if("zIndex"in dom)return dom.zIndex();while(dom.length>0){if(dom[0].nodeType==9)return false;var zi=dom.css('zIndex');if(!isNaN(zi)&&zi!=0)return parseInt(zi);dom=dom.parent();}
return false;};var _convertBorderWidth={"thin":1,"medium":3,"thick":5};function getWidthToPixel(dom,prop,chkheight){var wd=dom.css(prop);var px=parseFloat(wd);if(isNaN(px)){px=_convertBorderWidth[wd]||0;var brd=(px==3)?((chkheight)?(self.win.outerHeight()-self.win.innerHeight()):(self.win.outerWidth()-self.win.innerWidth())):1;if(self.isie8&&px)px+=1;return(brd)?px:0;}
return px;};this.getOffset=function(){if(self.isfixed)return{top:parseFloat(self.win.css('top')),left:parseFloat(self.win.css('left'))};if(!self.viewport)return self.win.offset();var ww=self.win.offset();var vp=self.viewport.offset();return{top:ww.top-vp.top+self.viewport.scrollTop(),left:ww.left-vp.left+self.viewport.scrollLeft()};};this.updateScrollBar=function(len){if(self.ishwscroll){self.rail.css({height:self.win.innerHeight()});if(self.railh)self.railh.css({width:self.win.innerWidth()});}else{var wpos=self.getOffset();var pos={top:wpos.top,left:wpos.left};pos.top+=getWidthToPixel(self.win,'border-top-width',true);var brd=(self.win.outerWidth()-self.win.innerWidth())/2;pos.left+=(self.rail.align)?self.win.outerWidth()-getWidthToPixel(self.win,'border-right-width')-self.rail.width:getWidthToPixel(self.win,'border-left-width');var off=self.opt.railoffset;if(off){if(off.top)pos.top+=off.top;if(self.rail.align&&off.left)pos.left+=off.left;}
if(!self.locked)self.rail.css({top:pos.top,left:pos.left,height:(len)?len.h:self.win.innerHeight()});if(self.zoom){self.zoom.css({top:pos.top+1,left:(self.rail.align==1)?pos.left-20:pos.left+self.rail.width+4});}
if(self.railh&&!self.locked){var pos={top:wpos.top,left:wpos.left};var y=(self.railh.align)?pos.top+getWidthToPixel(self.win,'border-top-width',true)+self.win.innerHeight()-self.railh.height:pos.top+getWidthToPixel(self.win,'border-top-width',true);var x=pos.left+getWidthToPixel(self.win,'border-left-width');self.railh.css({top:y,left:x,width:self.railh.width});}}};this.doRailClick=function(e,dbl,hr){var fn,pg,cur,pos;if(self.rail.drag&&self.rail.drag.pt!=1)return;if(self.locked)return;if(self.rail.drag)return;self.cancelScroll();self.cancelEvent(e);if(dbl){fn=(hr)?self.doScrollLeft:self.doScrollTop;cur=(hr)?((e.pageX-self.railh.offset().left-(self.cursorwidth/2))*self.scrollratio.x):((e.pageY-self.rail.offset().top-(self.cursorheight/2))*self.scrollratio.y);fn(cur);}else{fn=(hr)?self.doScrollLeftBy:self.doScrollBy;cur=(hr)?self.scroll.x:self.scroll.y;pos=(hr)?e.pageX-self.railh.offset().left:e.pageY-self.rail.offset().top;pg=(hr)?self.view.w:self.view.h;(cur>=pos)?fn(pg):fn(-pg);}}
self.hasanimationframe=(setAnimationFrame);self.hascancelanimationframe=(clearAnimationFrame);if(!self.hasanimationframe){setAnimationFrame=function(fn){return setTimeout(fn,16)};clearAnimationFrame=clearInterval;}
else if(!self.hascancelanimationframe)clearAnimationFrame=function(){self.cancelAnimationFrame=true};this.init=function(){self.saved.css=[];if(cap.isie7mobile)return true;if(cap.hasmstouch)self.css((self.ispage)?$("html"):self.win,{'-ms-touch-action':'none'});self.zindex="auto";if(!self.ispage&&self.opt.zindex=="auto"){self.zindex=getZIndex();}else{self.zindex=self.opt.zindex;}
if(!self.ispage&&self.zindex){if(self.zindex>globalmaxzindex)globalmaxzindex=self.zindex;}
if(!self.ispage||(!cap.cantouch&&!cap.isieold&&!cap.isie9mobile)){var cont=self.docscroll;if(self.ispage)cont=(self.haswrapper)?self.win:self.doc;if(!cap.isie9mobile)self.css(cont,{'overflow-y':'hidden'});if(self.ispage&&cap.isie7){if(self.doc[0].nodeName=='BODY')self.css($("html"),{'overflow-y':'hidden'});else if(self.doc[0].nodeName=='HTML')self.css($("body"),{'overflow-y':'hidden'});}
if(cap.isios&&!self.ispage&&!self.haswrapper)self.css($("body"),{"-webkit-overflow-scrolling":"touch"});var cursor=$(document.createElement('div'));cursor.css({position:"relative",top:0,"float":"right",width:self.opt.cursorwidth,height:"0px",'background-color':self.opt.cursorcolor,border:self.opt.cursorborder,'background-clip':'padding-box','-webkit-border-radius':self.opt.cursorborderradius,'-moz-border-radius':self.opt.cursorborderradius,'border-radius':self.opt.cursorborderradius});cursor.hborder=parseFloat(cursor.outerHeight()-cursor.innerHeight());self.cursor=cursor;var rail=$(document.createElement('div'));rail.attr('id',self.id);rail.addClass('nicescroll-rails');var v,a,kp=["left","right"];for(var n in kp){a=kp[n];v=self.opt.railpadding[a];(v)?rail.css("padding-"+a,v+"px"):self.opt.railpadding[a]=0;}
rail.append(cursor);rail.width=Math.max(parseFloat(self.opt.cursorwidth),cursor.outerWidth())+self.opt.railpadding['left']+self.opt.railpadding['right'];rail.css({width:rail.width+"px",'zIndex':self.zindex,"background":self.opt.background,cursor:"pointer"});rail.visibility=true;rail.scrollable=true;rail.align=(self.opt.railalign=="left")?0:1;self.rail=rail;self.rail.drag=false;var zoom=false;if(self.opt.boxzoom&&!self.ispage&&!cap.isieold){zoom=document.createElement('div');self.bind(zoom,"click",self.doZoom);self.zoom=$(zoom);self.zoom.css({"cursor":"pointer",'z-index':self.zindex,'backgroundImage':'url('+scriptpath+'zoomico.png)','height':18,'width':18,'backgroundPosition':'0px 0px'});if(self.opt.dblclickzoom)self.bind(self.win,"dblclick",self.doZoom);if(cap.cantouch&&self.opt.gesturezoom){self.ongesturezoom=function(e){if(e.scale>1.5)self.doZoomIn(e);if(e.scale<0.8)self.doZoomOut(e);return self.cancelEvent(e);};self.bind(self.win,"gestureend",self.ongesturezoom);}}
self.railh=false;if(self.opt.horizrailenabled){self.css(cont,{'overflow-x':'hidden'});var cursor=$(document.createElement('div'));cursor.css({position:"relative",top:0,height:self.opt.cursorwidth,width:"0px",'background-color':self.opt.cursorcolor,border:self.opt.cursorborder,'background-clip':'padding-box','-webkit-border-radius':self.opt.cursorborderradius,'-moz-border-radius':self.opt.cursorborderradius,'border-radius':self.opt.cursorborderradius});cursor.wborder=parseFloat(cursor.outerWidth()-cursor.innerWidth());self.cursorh=cursor;var railh=$(document.createElement('div'));railh.attr('id',self.id+'-hr');railh.addClass('nicescroll-rails');railh.height=Math.max(parseFloat(self.opt.cursorwidth),cursor.outerHeight());railh.css({height:railh.height+"px",'zIndex':self.zindex,"background":self.opt.background,cursor:"pointer"});railh.append(cursor);railh.visibility=true;railh.scrollable=true;railh.align=(self.opt.railvalign=="top")?0:1;self.railh=railh;self.railh.drag=false;}
if(self.ispage){rail.css({position:"fixed",top:"0px",height:"100%"});(rail.align)?rail.css({right:"0px"}):rail.css({left:"0px"});self.body.append(rail);if(self.railh){railh.css({position:"fixed",left:"0px",width:"100%"});(railh.align)?railh.css({bottom:"0px"}):railh.css({top:"0px"});self.body.append(railh);}}else{if(self.ishwscroll){if(self.win.css('position')=='static')self.css(self.win,{'position':'relative'});var bd=(self.win[0].nodeName=='HTML')?self.body:self.win;if(self.zoom){self.zoom.css({position:"absolute",top:1,right:0,"margin-right":rail.width+4});bd.append(self.zoom);}
rail.css({position:"absolute",top:0});(rail.align)?rail.css({right:0}):rail.css({left:0});bd.append(rail);if(railh){railh.css({position:"absolute",left:0,bottom:0});(railh.align)?railh.css({bottom:0}):railh.css({top:0});bd.append(railh);}}else{self.isfixed=(self.win.css("position")=="fixed");var rlpos=(self.isfixed)?"fixed":"absolute";if(!self.isfixed)self.viewport=self.getViewport(self.win[0]);if(self.viewport){self.body=self.viewport;if((/relative|absolute/.test(self.viewport.css("position")))==false)self.css(self.viewport,{"position":"relative"});}
rail.css({position:rlpos});if(self.zoom)self.zoom.css({position:rlpos});self.updateScrollBar();self.body.append(rail);if(self.zoom)self.body.append(self.zoom);if(self.railh){railh.css({position:rlpos});self.body.append(railh);}}
if(cap.isios)self.css(self.win,{'-webkit-tap-highlight-color':'rgba(0,0,0,0)','-webkit-touch-callout':'none'});if(cap.isie&&self.opt.disableoutline)self.win.attr("hideFocus","true");if(cap.iswebkit&&self.opt.disableoutline)self.win.css({"outline":"none"});}
if(self.opt.autohidemode===false){self.autohidedom=false;self.rail.css({opacity:self.opt.cursoropacitymax});if(self.railh)self.railh.css({opacity:self.opt.cursoropacitymax});}
else if(self.opt.autohidemode===true){self.autohidedom=$().add(self.rail);if(self.railh)self.autohidedom=self.autohidedom.add(self.railh);}
else if(self.opt.autohidemode=="scroll"){self.autohidedom=$().add(self.rail);if(self.railh)self.autohidedom=self.autohidedom.add(self.railh);}
else if(self.opt.autohidemode=="cursor"){self.autohidedom=$().add(self.cursor);if(self.railh)self.autohidedom=self.autohidedom.add(self.railh.cursor);}
else if(self.opt.autohidemode=="hidden"){self.autohidedom=false;self.hide();self.locked=false;}
if(cap.isie9mobile){self.scrollmom=new ScrollMomentumClass2D(self);self.onmangotouch=function(e){var py=self.getScrollTop();var px=self.getScrollLeft();if((py==self.scrollmom.lastscrolly)&&(px==self.scrollmom.lastscrollx))return true;var dfy=py-self.mangotouch.sy;var dfx=px-self.mangotouch.sx;var df=Math.round(Math.sqrt(Math.pow(dfx,2)+Math.pow(dfy,2)));if(df==0)return;var dry=(dfy<0)?-1:1;var drx=(dfx<0)?-1:1;var tm=+new Date();if(self.mangotouch.lazy)clearTimeout(self.mangotouch.lazy);if(((tm-self.mangotouch.tm)>80)||(self.mangotouch.dry!=dry)||(self.mangotouch.drx!=drx)){self.scrollmom.stop();self.scrollmom.reset(px,py);self.mangotouch.sy=py;self.mangotouch.ly=py;self.mangotouch.sx=px;self.mangotouch.lx=px;self.mangotouch.dry=dry;self.mangotouch.drx=drx;self.mangotouch.tm=tm;}else{self.scrollmom.stop();self.scrollmom.update(self.mangotouch.sx-dfx,self.mangotouch.sy-dfy);var gap=tm-self.mangotouch.tm;self.mangotouch.tm=tm;var ds=Math.max(Math.abs(self.mangotouch.ly-py),Math.abs(self.mangotouch.lx-px));self.mangotouch.ly=py;self.mangotouch.lx=px;if(ds>2){self.mangotouch.lazy=setTimeout(function(){self.mangotouch.lazy=false;self.mangotouch.dry=0;self.mangotouch.drx=0;self.mangotouch.tm=0;self.scrollmom.doMomentum(30);},100);}}}
var top=self.getScrollTop();var lef=self.getScrollLeft();self.mangotouch={sy:top,ly:top,dry:0,sx:lef,lx:lef,drx:0,lazy:false,tm:0};self.bind(self.docscroll,"scroll",self.onmangotouch);}else{if(cap.cantouch||self.istouchcapable||self.opt.touchbehavior||cap.hasmstouch){self.scrollmom=new ScrollMomentumClass2D(self);self.ontouchstart=function(e){if(e.pointerType&&e.pointerType!=2)return false;if(!self.locked){if(cap.hasmstouch){var tg=(e.target)?e.target:false;while(tg){var nc=$(tg).getNiceScroll();if((nc.length>0)&&(nc[0].me==self.me))break;if(nc.length>0)return false;if((tg.nodeName=='DIV')&&(tg.id==self.id))break;tg=(tg.parentNode)?tg.parentNode:false;}}
self.cancelScroll();var tg=self.getTarget(e);if(tg){var skp=(/INPUT/i.test(tg.nodeName))&&(/range/i.test(tg.type));if(skp)return self.stopPropagation(e);}
if(!("clientX"in e)&&("changedTouches"in e)){e.clientX=e.changedTouches[0].clientX;e.clientY=e.changedTouches[0].clientY;}
if(self.forcescreen){var le=e;var e={"original":(e.original)?e.original:e};e.clientX=le.screenX;e.clientY=le.screenY;}
self.rail.drag={x:e.clientX,y:e.clientY,sx:self.scroll.x,sy:self.scroll.y,st:self.getScrollTop(),sl:self.getScrollLeft(),pt:2,dl:false};if(self.ispage||!self.opt.directionlockdeadzone){self.rail.drag.dl="f";}else{var view={w:$(window).width(),h:$(window).height()};var page={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}
var maxh=Math.max(0,page.h-view.h);var maxw=Math.max(0,page.w-view.w);if(!self.rail.scrollable&&self.railh.scrollable)self.rail.drag.ck=(maxh>0)?"v":false;else if(self.rail.scrollable&&!self.railh.scrollable)self.rail.drag.ck=(maxw>0)?"h":false;else self.rail.drag.ck=false;if(!self.rail.drag.ck)self.rail.drag.dl="f";}
if(self.opt.touchbehavior&&self.isiframe&&cap.isie){var wp=self.win.position();self.rail.drag.x+=wp.left;self.rail.drag.y+=wp.top;}
self.hasmoving=false;self.lastmouseup=false;self.scrollmom.reset(e.clientX,e.clientY);if(!cap.cantouch&&!this.istouchcapable&&!cap.hasmstouch){var ip=(tg)?/INPUT|SELECT|TEXTAREA/i.test(tg.nodeName):false;if(!ip){if(!self.ispage&&cap.hasmousecapture)tg.setCapture();return self.cancelEvent(e);}
if(/SUBMIT|CANCEL|BUTTON/i.test($(tg).attr('type'))){pc={"tg":tg,"click":false};self.preventclick=pc;}}}};self.ontouchend=function(e){if(e.pointerType&&e.pointerType!=2)return false;if(self.rail.drag&&(self.rail.drag.pt==2)){self.scrollmom.doMomentum();self.rail.drag=false;if(self.hasmoving){self.hasmoving=false;self.lastmouseup=true;self.hideCursor();if(cap.hasmousecapture)document.releaseCapture();if(!cap.cantouch)return self.cancelEvent(e);}}};var moveneedoffset=(self.opt.touchbehavior&&self.isiframe&&!cap.hasmousecapture);self.ontouchmove=function(e,byiframe){if(e.pointerType&&e.pointerType!=2)return false;if(self.rail.drag&&(self.rail.drag.pt==2)){if(cap.cantouch&&(typeof e.original=="undefined"))return true;self.hasmoving=true;if(self.preventclick&&!self.preventclick.click){self.preventclick.click=self.preventclick.tg.onclick||false;self.preventclick.tg.onclick=self.onpreventclick;}
var ev=$.extend({"original":e},e);e=ev;if(("changedTouches"in e)){e.clientX=e.changedTouches[0].clientX;e.clientY=e.changedTouches[0].clientY;}
if(self.forcescreen){var le=e;var e={"original":(e.original)?e.original:e};e.clientX=le.screenX;e.clientY=le.screenY;}
var ofx=ofy=0;if(moveneedoffset&&!byiframe){var wp=self.win.position();ofx=-wp.left;ofy=-wp.top;}
var fy=e.clientY+ofy;var my=(fy-self.rail.drag.y);var fx=e.clientX+ofx;var mx=(fx-self.rail.drag.x);var ny=self.rail.drag.st-my;if(self.ishwscroll&&self.opt.bouncescroll){if(ny<0){ny=Math.round(ny/2);}
else if(ny>self.page.maxh){ny=self.page.maxh+Math.round((ny-self.page.maxh)/2);}}else{if(ny<0){ny=0;fy=0}
if(ny>self.page.maxh){ny=self.page.maxh;fy=0}}
if(self.railh&&self.railh.scrollable){var nx=self.rail.drag.sl-mx;if(self.ishwscroll&&self.opt.bouncescroll){if(nx<0){nx=Math.round(nx/2);}
else if(nx>self.page.maxw){nx=self.page.maxw+Math.round((nx-self.page.maxw)/2);}}else{if(nx<0){nx=0;fx=0}
if(nx>self.page.maxw){nx=self.page.maxw;fx=0}}}
var grabbed=false;if(self.rail.drag.dl){grabbed=true;if(self.rail.drag.dl=="v")nx=self.rail.drag.sl;else if(self.rail.drag.dl=="h")ny=self.rail.drag.st;}else{var ay=Math.abs(my);var ax=Math.abs(mx);var dz=self.opt.directionlockdeadzone;if(self.rail.drag.ck=="v"){if(ay>dz&&(ax<=(ay*0.3))){self.rail.drag=false;return true;}
else if(ax>dz){self.rail.drag.dl="f";$("body").scrollTop($("body").scrollTop());}}
else if(self.rail.drag.ck=="h"){if(ax>dz&&(ay<=(az*0.3))){self.rail.drag=false;return true;}
else if(ay>dz){self.rail.drag.dl="f";$("body").scrollLeft($("body").scrollLeft());}}}
self.synched("touchmove",function(){if(self.rail.drag&&(self.rail.drag.pt==2)){if(self.prepareTransition)self.prepareTransition(0);if(self.rail.scrollable)self.setScrollTop(ny);self.scrollmom.update(fx,fy);if(self.railh&&self.railh.scrollable){self.setScrollLeft(nx);self.showCursor(ny,nx);}else{self.showCursor(ny);}
if(cap.isie10)document.selection.clear();}});if(cap.ischrome&&self.istouchcapable)grabbed=false;if(grabbed)return self.cancelEvent(e);}};}
if(cap.cantouch||self.opt.touchbehavior){self.onpreventclick=function(e){if(self.preventclick){self.preventclick.tg.onclick=self.preventclick.click;self.preventclick=false;return self.cancelEvent(e);}}
self.onmousedown=self.ontouchstart;self.onmouseup=self.ontouchend;self.onclick=(cap.isios)?false:function(e){if(self.lastmouseup){self.lastmouseup=false;return self.cancelEvent(e);}else{return true;}};self.onmousemove=self.ontouchmove;if(self.opt.grabcursorenabled&&cap.cursorgrabvalue){self.css((self.ispage)?self.doc:self.win,{'cursor':cap.cursorgrabvalue});self.css(self.rail,{'cursor':cap.cursorgrabvalue});}}else{self.onmousedown=function(e,hronly){if(self.rail.drag&&self.rail.drag.pt!=1)return;if(self.locked)return self.cancelEvent(e);self.cancelScroll();self.rail.drag={x:e.clientX,y:e.clientY,sx:self.scroll.x,sy:self.scroll.y,pt:1,hr:(!!hronly)};var tg=self.getTarget(e);if(!self.ispage&&cap.hasmousecapture)tg.setCapture();if(self.isiframe&&!cap.hasmousecapture){self.saved["csspointerevents"]=self.doc.css("pointer-events");self.css(self.doc,{"pointer-events":"none"});}
return self.cancelEvent(e);};self.onmouseup=function(e){if(self.rail.drag){if(cap.hasmousecapture)document.releaseCapture();if(self.isiframe&&!cap.hasmousecapture)self.doc.css("pointer-events",self.saved["csspointerevents"]);if(self.rail.drag.pt!=1)return;self.rail.drag=false;return self.cancelEvent(e);}};self.onmousemove=function(e){if(self.rail.drag){if(self.rail.drag.pt!=1)return;if(cap.ischrome&&e.which==0)return self.onmouseup(e);self.cursorfreezed=true;if(self.rail.drag.hr){self.scroll.x=self.rail.drag.sx+(e.clientX-self.rail.drag.x);if(self.scroll.x<0)self.scroll.x=0;var mw=self.scrollvaluemaxw;if(self.scroll.x>mw)self.scroll.x=mw;}else{self.scroll.y=self.rail.drag.sy+(e.clientY-self.rail.drag.y);if(self.scroll.y<0)self.scroll.y=0;var my=self.scrollvaluemax;if(self.scroll.y>my)self.scroll.y=my;}
self.synched('mousemove',function(){if(self.rail.drag&&(self.rail.drag.pt==1)){self.showCursor();if(self.rail.drag.hr)self.doScrollLeft(Math.round(self.scroll.x*self.scrollratio.x));else self.doScrollTop(Math.round(self.scroll.y*self.scrollratio.y));}});return self.cancelEvent(e);}};function checkSelectionScroll(e){if(!self.selectiondrag)return;if(e){var ww=self.win.outerHeight();var df=(e.pageY-self.selectiondrag.top);if(df>0&&df<ww)df=0;if(df>=ww)df-=ww;self.selectiondrag.df=df;}
if(self.selectiondrag.df==0)return;var rt=-Math.floor(self.selectiondrag.df/6)*2;self.doScrollBy(rt);self.debounced("doselectionscroll",function(){checkSelectionScroll()},50);}
if("getSelection"in document){self.hasTextSelected=function(){return(document.getSelection().rangeCount>0);}}
else if("selection"in document){self.hasTextSelected=function(){return(document.selection.type!="None");}}
else{self.hasTextSelected=function(){return false;}}
self.onselectionstart=function(e){if(self.ispage)return;self.selectiondrag=self.win.offset();}
self.onselectionend=function(e){self.selectiondrag=false;}
self.onselectiondrag=function(e){if(!self.selectiondrag)return;if(self.hasTextSelected())self.debounced("selectionscroll",function(){checkSelectionScroll(e)},250);}}
if(cap.cantouch||self.opt.touchbehavior){self.bind(self.win,"mousedown",self.onmousedown);}
if(cap.hasmstouch){self.css(self.rail,{'-ms-touch-action':'none'});self.css(self.cursor,{'-ms-touch-action':'none'});self.bind(self.win,"MSPointerDown",self.ontouchstart);self.bind(document,"MSPointerUp",self.ontouchend);self.bind(document,"MSPointerMove",self.ontouchmove);self.bind(self.cursor,"MSGestureHold",function(e){e.preventDefault();});self.bind(self.cursor,"contextmenu",function(e){e.preventDefault();});}
if(this.istouchcapable){self.bind(self.win,"touchstart",self.ontouchstart);self.bind(document,"touchend",self.ontouchend);self.bind(document,"touchcancel",self.ontouchend);self.bind(document,"touchmove",self.ontouchmove);}
self.bind(self.cursor,"mousedown",self.onmousedown);self.bind(self.cursor,"mouseup",self.onmouseup);if(self.railh){self.bind(self.cursorh,"mousedown",function(e){self.onmousedown(e,true)});self.bind(self.cursorh,"mouseup",function(e){if(self.rail.drag&&self.rail.drag.pt==2)return;self.rail.drag=false;self.hasmoving=false;self.hideCursor();if(cap.hasmousecapture)document.releaseCapture();return self.cancelEvent(e);});}
self.bind(document,"mouseup",self.onmouseup);if(cap.hasmousecapture)self.bind(self.win,"mouseup",self.onmouseup);self.bind(document,"mousemove",self.onmousemove);if(self.onclick)self.bind(document,"click",self.onclick);if(!cap.cantouch&&!self.opt.touchbehavior){self.jqbind(self.rail,"mouseenter",function(){if(self.canshowonmouseevent)self.showCursor();self.rail.active=true;});self.jqbind(self.rail,"mouseleave",function(){self.rail.active=false;if(!self.rail.drag)self.hideCursor();});if(self.opt.sensitiverail){self.bind(self.rail,"click",function(e){self.doRailClick(e,false,false)});self.bind(self.rail,"dblclick",function(e){self.doRailClick(e,true,false)});self.bind(self.cursor,"click",function(e){self.cancelEvent(e)});self.bind(self.cursor,"dblclick",function(e){self.cancelEvent(e)});}
if(!self.ispage&&self.opt.enablescrollonselection){self.bind(self.win[0],"mousedown",self.onselectionstart);self.bind(document,"mouseup",self.onselectionend);self.bind(document,"mousemove",self.onselectiondrag);}
if(self.railh){self.jqbind(self.railh,"mouseenter",function(){if(self.canshowonmouseevent)self.showCursor();self.rail.active=true;});self.jqbind(self.railh,"mouseleave",function(){self.rail.active=false;if(!self.rail.drag)self.hideCursor();});if(self.opt.sensitiverail){self.bind(self.railh,"click",function(e){self.doRailClick(e,false,true)});self.bind(self.railh,"dblclick",function(e){self.doRailClick(e,true,true)});self.bind(self.cursorh,"click",function(e){self.cancelEvent(e)});self.bind(self.cursorh,"dblclick",function(e){self.cancelEvent(e)});}}
if(self.zoom){self.jqbind(self.zoom,"mouseenter",function(){if(self.canshowonmouseevent)self.showCursor();self.rail.active=true;});self.jqbind(self.zoom,"mouseleave",function(){self.rail.active=false;if(!self.rail.drag)self.hideCursor();});}}
if(self.opt.enablemousewheel){if(!self.isiframe)self.bind((cap.isie&&self.ispage)?document:self.docscroll,"mousewheel",self.onmousewheel);self.bind(self.rail,"mousewheel",self.onmousewheel);if(self.railh)self.bind(self.railh,"mousewheel",self.onmousewheelhr);}
if(!self.ispage&&!cap.cantouch&&!(/HTML|BODY/.test(self.win[0].nodeName))){if(!self.win.attr("tabindex"))self.win.attr({"tabindex":tabindexcounter++});self.jqbind(self.win,"focus",function(e){domfocus=(self.getTarget(e)).id||true;self.hasfocus=true;if(self.canshowonmouseevent)self.noticeCursor();});self.jqbind(self.win,"blur",function(e){domfocus=false;self.hasfocus=false;});self.jqbind(self.win,"mouseenter",function(e){mousefocus=(self.getTarget(e)).id||true;self.hasmousefocus=true;if(self.canshowonmouseevent)self.noticeCursor();});self.jqbind(self.win,"mouseleave",function(){mousefocus=false;self.hasmousefocus=false;});};}
self.onkeypress=function(e){if(self.locked&&self.page.maxh==0)return true;e=(e)?e:window.e;var tg=self.getTarget(e);if(tg&&/INPUT|TEXTAREA|SELECT|OPTION/.test(tg.nodeName)){var tp=tg.getAttribute('type')||tg.type||false;if((!tp)||!(/submit|button|cancel/i.tp))return true;}
if(self.hasfocus||(self.hasmousefocus&&!domfocus)||(self.ispage&&!domfocus&&!mousefocus)){var key=e.keyCode;if(self.locked&&key!=27)return self.cancelEvent(e);var ctrl=e.ctrlKey||false;var shift=e.shiftKey||false;var ret=false;switch(key){case 38:case 63233:self.doScrollBy(24*3);ret=true;break;case 40:case 63235:self.doScrollBy(-24*3);ret=true;break;case 37:case 63232:if(self.railh){(ctrl)?self.doScrollLeft(0):self.doScrollLeftBy(24*3);ret=true;}
break;case 39:case 63234:if(self.railh){(ctrl)?self.doScrollLeft(self.page.maxw):self.doScrollLeftBy(-24*3);ret=true;}
break;case 33:case 63276:self.doScrollBy(self.view.h);ret=true;break;case 34:case 63277:self.doScrollBy(-self.view.h);ret=true;break;case 36:case 63273:(self.railh&&ctrl)?self.doScrollPos(0,0):self.doScrollTo(0);ret=true;break;case 35:case 63275:(self.railh&&ctrl)?self.doScrollPos(self.page.maxw,self.page.maxh):self.doScrollTo(self.page.maxh);ret=true;break;case 32:if(self.opt.spacebarenabled){(shift)?self.doScrollBy(self.view.h):self.doScrollBy(-self.view.h);ret=true;}
break;case 27:if(self.zoomactive){self.doZoom();ret=true;}
break;}
if(ret)return self.cancelEvent(e);}};if(self.opt.enablekeyboard)self.bind(document,(cap.isopera&&!cap.isopera12)?"keypress":"keydown",self.onkeypress);self.bind(window,'resize',self.lazyResize);self.bind(window,'orientationchange',self.lazyResize);self.bind(window,"load",self.lazyResize);if(cap.ischrome&&!self.ispage&&!self.haswrapper){var tmp=self.win.attr("style");var ww=parseFloat(self.win.css("width"))+1;self.win.css('width',ww);self.synched("chromefix",function(){self.win.attr("style",tmp)});}
self.onAttributeChange=function(e){self.lazyResize(250);}
if(!self.ispage&&!self.haswrapper){if(clsMutationObserver!==false){self.observer=new clsMutationObserver(function(mutations){mutations.forEach(self.onAttributeChange);});self.observer.observe(self.win[0],{childList:true,characterData:false,attributes:true,subtree:false});self.observerremover=new clsMutationObserver(function(mutations){mutations.forEach(function(mo){if(mo.removedNodes.length>0){for(var dd in mo.removedNodes){if(mo.removedNodes[dd]==self.win[0])return self.remove();}}});});self.observerremover.observe(self.win[0].parentNode,{childList:true,characterData:false,attributes:false,subtree:false});}else{self.bind(self.win,(cap.isie&&!cap.isie9)?"propertychange":"DOMAttrModified",self.onAttributeChange);if(cap.isie9)self.win[0].attachEvent("onpropertychange",self.onAttributeChange);self.bind(self.win,"DOMNodeRemoved",function(e){if(e.target==self.win[0])self.remove();});}}
if(!self.ispage&&self.opt.boxzoom)self.bind(window,"resize",self.resizeZoom);if(self.istextarea)self.bind(self.win,"mouseup",self.lazyResize);self.lazyResize(30);}
if(this.doc[0].nodeName=='IFRAME'){function oniframeload(e){self.iframexd=false;try{var doc='contentDocument'in this?this.contentDocument:this.contentWindow.document;var a=doc.domain;}catch(e){self.iframexd=true;doc=false};if(self.iframexd){if("console"in window)console.log('NiceScroll error: policy restriced iframe');return true;}
self.forcescreen=true;if(self.isiframe){self.iframe={"doc":$(doc),"html":self.doc.contents().find('html')[0],"body":self.doc.contents().find('body')[0]};self.getContentSize=function(){return{w:Math.max(self.iframe.html.scrollWidth,self.iframe.body.scrollWidth),h:Math.max(self.iframe.html.scrollHeight,self.iframe.body.scrollHeight)}}
self.docscroll=$(self.iframe.body);}
if(!cap.isios&&self.opt.iframeautoresize&&!self.isiframe){self.win.scrollTop(0);self.doc.height("");var hh=Math.max(doc.getElementsByTagName('html')[0].scrollHeight,doc.body.scrollHeight);self.doc.height(hh);}
self.lazyResize(30);if(cap.isie7)self.css($(self.iframe.html),{'overflow-y':'hidden'});self.css($(self.iframe.body),{'overflow-y':'hidden'});if('contentWindow'in this){self.bind(this.contentWindow,"scroll",self.onscroll);}else{self.bind(doc,"scroll",self.onscroll);}
if(self.opt.enablemousewheel){self.bind(doc,"mousewheel",self.onmousewheel);}
if(self.opt.enablekeyboard)self.bind(doc,(cap.isopera)?"keypress":"keydown",self.onkeypress);if(cap.cantouch||self.opt.touchbehavior){self.bind(doc,"mousedown",self.onmousedown);self.bind(doc,"mousemove",function(e){self.onmousemove(e,true)});if(self.opt.grabcursorenabled&&cap.cursorgrabvalue)self.css($(doc.body),{'cursor':cap.cursorgrabvalue});}
self.bind(doc,"mouseup",self.onmouseup);if(self.zoom){if(self.opt.dblclickzoom)self.bind(doc,'dblclick',self.doZoom);if(self.ongesturezoom)self.bind(doc,"gestureend",self.ongesturezoom);}};if(this.doc[0].readyState&&this.doc[0].readyState=="complete"){setTimeout(function(){oniframeload.call(self.doc[0],false)},500);}
self.bind(this.doc,"load",oniframeload);}};this.showCursor=function(py,px){if(self.cursortimeout){clearTimeout(self.cursortimeout);self.cursortimeout=0;}
if(!self.rail)return;if(self.autohidedom){self.autohidedom.stop().css({opacity:self.opt.cursoropacitymax});self.cursoractive=true;}
if((typeof py!="undefined")&&(py!==false)){self.scroll.y=Math.round(py*1/self.scrollratio.y);}
if(typeof px!="undefined"){self.scroll.x=Math.round(px*1/self.scrollratio.x);}
self.cursor.css({height:self.cursorheight,top:self.scroll.y});if(self.cursorh){(!self.rail.align&&self.rail.visibility)?self.cursorh.css({width:self.cursorwidth,left:self.scroll.x+self.rail.width}):self.cursorh.css({width:self.cursorwidth,left:self.scroll.x});self.cursoractive=true;}
if(self.zoom)self.zoom.stop().css({opacity:self.opt.cursoropacitymax});};this.hideCursor=function(tm){if(self.cursortimeout)return;if(!self.rail)return;if(!self.autohidedom)return;self.cursortimeout=setTimeout(function(){if(!self.rail.active||!self.showonmouseevent){self.autohidedom.stop().animate({opacity:self.opt.cursoropacitymin});if(self.zoom)self.zoom.stop().animate({opacity:self.opt.cursoropacitymin});self.cursoractive=false;}
self.cursortimeout=0;},tm||self.opt.hidecursordelay);};this.noticeCursor=function(tm,py,px){self.showCursor(py,px);if(!self.rail.active)self.hideCursor(tm);};this.getContentSize=(self.ispage)?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:(self.haswrapper)?function(){return{w:self.doc.outerWidth()+parseInt(self.win.css('paddingLeft'))+parseInt(self.win.css('paddingRight')),h:self.doc.outerHeight()+parseInt(self.win.css('paddingTop'))+parseInt(self.win.css('paddingBottom'))}}:function(){return{w:self.docscroll[0].scrollWidth,h:self.docscroll[0].scrollHeight}};this.onResize=function(e,page){if(!self.win)return false;if(!self.haswrapper&&!self.ispage){if(self.win.css('display')=='none'){if(self.visibility)self.hideRail().hideRailHr();return false;}else{if(!self.hidden&&!self.visibility)self.showRail().showRailHr();}}
var premaxh=self.page.maxh;var premaxw=self.page.maxw;var preview={h:self.view.h,w:self.view.w};self.view={w:(self.ispage)?self.win.width():parseInt(self.win[0].clientWidth),h:(self.ispage)?self.win.height():parseInt(self.win[0].clientHeight)};self.page=(page)?page:self.getContentSize();self.page.maxh=Math.max(0,self.page.h-self.view.h);self.page.maxw=Math.max(0,self.page.w-self.view.w);if((self.page.maxh==premaxh)&&(self.page.maxw==premaxw)&&(self.view.w==preview.w)){if(!self.ispage){var pos=self.win.offset();if(self.lastposition){var lst=self.lastposition;if((lst.top==pos.top)&&(lst.left==pos.left))return self;}
self.lastposition=pos;}else{return self;}}
if(self.page.maxh==0){self.hideRail();self.scrollvaluemax=0;self.scroll.y=0;self.scrollratio.y=0;self.cursorheight=0;self.setScrollTop(0);self.rail.scrollable=false;}else{self.rail.scrollable=true;}
if(self.page.maxw==0){self.hideRailHr();self.scrollvaluemaxw=0;self.scroll.x=0;self.scrollratio.x=0;self.cursorwidth=0;self.setScrollLeft(0);self.railh.scrollable=false;}else{self.railh.scrollable=true;}
self.locked=(self.page.maxh==0)&&(self.page.maxw==0);if(self.locked){if(!self.ispage)self.updateScrollBar(self.view);return false;}
if(!self.hidden&&!self.visibility){self.showRail().showRailHr();}
else if(!self.hidden&&!self.railh.visibility)self.showRailHr();if(self.istextarea&&self.win.css('resize')&&self.win.css('resize')!='none')self.view.h-=20;self.cursorheight=Math.min(self.view.h,Math.round(self.view.h*(self.view.h/self.page.h)));self.cursorheight=(self.opt.cursorfixedheight)?self.opt.cursorfixedheight:Math.max(self.opt.cursorminheight,self.cursorheight);self.cursorwidth=Math.min(self.view.w,Math.round(self.view.w*(self.view.w/self.page.w)));self.cursorwidth=(self.opt.cursorfixedheight)?self.opt.cursorfixedheight:Math.max(self.opt.cursorminheight,self.cursorwidth);self.scrollvaluemax=self.view.h-self.cursorheight-self.cursor.hborder;if(self.railh){self.railh.width=(self.page.maxh>0)?(self.view.w-self.rail.width):self.view.w;self.scrollvaluemaxw=self.railh.width-self.cursorwidth-self.cursorh.wborder;}
if(!self.ispage)self.updateScrollBar(self.view);self.scrollratio={x:(self.page.maxw/self.scrollvaluemaxw),y:(self.page.maxh/self.scrollvaluemax)};var sy=self.getScrollTop();if(sy>self.page.maxh){self.doScrollTop(self.page.maxh);}else{self.scroll.y=Math.round(self.getScrollTop()*(1/self.scrollratio.y));self.scroll.x=Math.round(self.getScrollLeft()*(1/self.scrollratio.x));if(self.cursoractive)self.noticeCursor();}
if(self.scroll.y&&(self.getScrollTop()==0))self.doScrollTo(Math.floor(self.scroll.y*self.scrollratio.y));return self;};this.resize=self.onResize;this.lazyResize=function(tm){tm=(isNaN(tm))?30:tm;self.delayed('resize',self.resize,tm);return self;}
this._bind=function(el,name,fn,bubble){self.events.push({e:el,n:name,f:fn,b:bubble,q:false});if(el.addEventListener){el.addEventListener(name,fn,bubble||false);}
else if(el.attachEvent){el.attachEvent("on"+name,fn);}
else{el["on"+name]=fn;}};this.jqbind=function(dom,name,fn){self.events.push({e:dom,n:name,f:fn,q:true});$(dom).bind(name,fn);}
this.bind=function(dom,name,fn,bubble){var el=("jquery"in dom)?dom[0]:dom;if(el.addEventListener){if(cap.cantouch&&/mouseup|mousedown|mousemove/.test(name)){var tt=(name=='mousedown')?'touchstart':(name=='mouseup')?'touchend':'touchmove';self._bind(el,tt,function(e){if(e.touches){if(e.touches.length<2){var ev=(e.touches.length)?e.touches[0]:e;ev.original=e;fn.call(this,ev);}}
else if(e.changedTouches){var ev=e.changedTouches[0];ev.original=e;fn.call(this,ev);}},bubble||false);}
self._bind(el,name,fn,bubble||false);if(name=='mousewheel')self._bind(el,"DOMMouseScroll",fn,bubble||false);if(cap.cantouch&&name=="mouseup")self._bind(el,"touchcancel",fn,bubble||false);}
else{self._bind(el,name,function(e){e=e||window.event||false;if(e){if(e.srcElement)e.target=e.srcElement;}
if(!("pageY"in e)){e.pageX=e.clientX+self.getScrollLeft();e.pageY=e.clientY+self.getScrollTop();}
return((fn.call(el,e)===false)||bubble===false)?self.cancelEvent(e):true;});}};this._unbind=function(el,name,fn,bub){if(el.removeEventListener){el.removeEventListener(name,fn,bub);}
else if(el.detachEvent){el.detachEvent('on'+name,fn);}else{el['on'+name]=false;}};this.unbindAll=function(){for(var a=0;a<self.events.length;a++){var r=self.events[a];(r.q)?r.e.unbind(r.n,r.f):self._unbind(r.e,r.n,r.f,r.b);}};this.cancelEvent=function(e){var e=(e.original)?e.original:(e)?e:window.event||false;if(!e)return false;if(e.preventDefault)e.preventDefault();if(e.stopPropagation)e.stopPropagation();if(e.preventManipulation)e.preventManipulation();e.cancelBubble=true;e.cancel=true;e.returnValue=false;return false;};this.stopPropagation=function(e){var e=(e.original)?e.original:(e)?e:window.event||false;if(!e)return false;if(e.stopPropagation)return e.stopPropagation();if(e.cancelBubble)e.cancelBubble=true;return false;}
this.showRail=function(){if((self.page.maxh!=0)&&(self.ispage||self.win.css('display')!='none')){self.visibility=true;self.rail.visibility=true;self.rail.css('display','block');}
return self;};this.showRailHr=function(){if(!self.railh)return self;if((self.page.maxw!=0)&&(self.ispage||self.win.css('display')!='none')){self.railh.visibility=true;self.railh.css('display','block');}
return self;};this.hideRail=function(){self.visibility=false;self.rail.visibility=false;self.rail.css('display','none');return self;};this.hideRailHr=function(){if(!self.railh)return self;self.railh.visibility=false;self.railh.css('display','none');return self;};this.show=function(){self.hidden=false;self.locked=false;return self.showRail().showRailHr();};this.hide=function(){self.hidden=true;self.locked=true;return self.hideRail().hideRailHr();};this.toggle=function(){return(self.hidden)?self.show():self.hide();};this.remove=function(){self.stop();if(self.cursortimeout)clearTimeout(self.cursortimeout);self.doZoomOut();self.unbindAll();if(self.observer!==false)self.observer.disconnect();if(self.observerremover!==false)self.observerremover.disconnect();self.events=[];if(self.cursor){self.cursor.remove();self.cursor=null;}
if(self.cursorh){self.cursorh.remove();self.cursorh=null;}
if(self.rail){self.rail.remove();self.rail=null;}
if(self.railh){self.railh.remove();self.railh=null;}
if(self.zoom){self.zoom.remove();self.zoom=null;}
for(var a=0;a<self.saved.css.length;a++){var d=self.saved.css[a];d[0].css(d[1],(typeof d[2]=="undefined")?'':d[2]);}
self.saved=false;self.me.data('__nicescroll','');self.me=null;self.doc=null;self.docscroll=null;self.win=null;return self;};this.scrollstart=function(fn){this.onscrollstart=fn;return self;}
this.scrollend=function(fn){this.onscrollend=fn;return self;}
this.scrollcancel=function(fn){this.onscrollcancel=fn;return self;}
this.zoomin=function(fn){this.onzoomin=fn;return self;}
this.zoomout=function(fn){this.onzoomout=fn;return self;}
this.isScrollable=function(e){var dom=(e.target)?e.target:e;if(dom.nodeName=='OPTION')return true;while(dom&&(dom.nodeType==1)&&!(/BODY|HTML/.test(dom.nodeName))){var dd=$(dom);var ov=dd.css('overflowY')||dd.css('overflowX')||dd.css('overflow')||'';if(/scroll|auto/.test(ov))return(dom.clientHeight!=dom.scrollHeight);dom=(dom.parentNode)?dom.parentNode:false;}
return false;};this.getViewport=function(me){var dom=(me&&me.parentNode)?me.parentNode:false;while(dom&&(dom.nodeType==1)&&!(/BODY|HTML/.test(dom.nodeName))){var dd=$(dom);var ov=dd.css('overflowY')||dd.css('overflowX')||dd.css('overflow')||'';if((/scroll|auto/.test(ov))&&(dom.clientHeight!=dom.scrollHeight))return dd;if(dd.getNiceScroll().length>0)return dd;dom=(dom.parentNode)?dom.parentNode:false;}
return false;};function execScrollWheel(e,hr,chkscroll){var px=0;var py=0;var rt=1;if("wheelDeltaY"in e){rt=self.opt.mousescrollstep/(16*3);px=Math.floor(e.wheelDeltaX*rt);py=Math.floor(e.wheelDeltaY*rt);if(hr&&(px==0)&&py){px=py;py=0;}}else{var delta=e.detail?e.detail*-1:e.wheelDelta/40;if(delta){(hr)?px=Math.floor(delta*self.opt.mousescrollstep):py=Math.floor(delta*self.opt.mousescrollstep);}}
if(px){if(self.scrollmom){self.scrollmom.stop()}
self.lastdeltax+=px;self.debounced("mousewheelx",function(){var dt=self.lastdeltax;self.lastdeltax=0;if(!self.rail.drag){self.doScrollLeftBy(dt)}},120);}
if(py){if(self.opt.nativeparentscrolling&&chkscroll){if(py<0){if(self.getScrollTop()>=self.page.maxh)return true;}else{if(self.getScrollTop()<=0)return true;}}
if(self.scrollmom){self.scrollmom.stop()}
self.lastdeltay+=py;self.debounced("mousewheely",function(){var dt=self.lastdeltay;self.lastdeltay=0;if(!self.rail.drag){self.doScrollBy(dt)}},120);}
return self.cancelEvent(e);};this.onmousewheel=function(e){if(self.locked)return true;if(self.rail.drag)return self.cancelEvent(e);if(!self.rail.scrollable){if(self.railh&&self.railh.scrollable){return self.onmousewheelhr(e);}else{return true;}}
var nw=+(new Date());var chk=false;if(self.opt.preservenativescrolling&&((self.checkarea+600)<nw)){self.nativescrollingarea=self.isScrollable(e);chk=true;}
self.checkarea=nw;if(self.nativescrollingarea)return true;var ret=execScrollWheel(e,false,chk);if(ret)self.checkarea=0;return ret;};this.onmousewheelhr=function(e){if(self.locked||!self.railh.scrollable)return true;if(self.rail.drag)return self.cancelEvent(e);var nw=+(new Date());var chk=false;if(self.opt.preservenativescrolling&&((self.checkarea+600)<nw)){self.nativescrollingarea=self.isScrollable(e);chk=true;}
self.checkarea=nw;if(self.nativescrollingarea)return true;if(self.locked)return self.cancelEvent(e);return execScrollWheel(e,true,chk);};this.stop=function(){self.cancelScroll();if(self.scrollmon)self.scrollmon.stop();self.cursorfreezed=false;self.scroll.y=Math.round(self.getScrollTop()*(1/self.scrollratio.y));self.noticeCursor();return self;};this.getTransitionSpeed=function(dif){var sp=Math.round(self.opt.scrollspeed*10);var ex=Math.min(sp,Math.round((dif/20)*self.opt.scrollspeed));return(ex>20)?ex:0;}
if(!self.opt.smoothscroll){this.doScrollLeft=function(x,spd){var y=self.getScrollTop();self.doScrollPos(x,y,spd);}
this.doScrollTop=function(y,spd){var x=self.getScrollLeft();self.doScrollPos(x,y,spd);}
this.doScrollPos=function(x,y,spd){var nx=(x>self.page.maxw)?self.page.maxw:x;if(nx<0)nx=0;var ny=(y>self.page.maxh)?self.page.maxh:y;if(ny<0)ny=0;self.synched('scroll',function(){self.setScrollTop(ny);self.setScrollLeft(nx);});}
this.cancelScroll=function(){};}
else if(self.ishwscroll&&cap.hastransition&&self.opt.usetransition){this.prepareTransition=function(dif,istime){var ex=(istime)?((dif>20)?dif:0):self.getTransitionSpeed(dif);var trans=(ex)?cap.prefixstyle+'transform '+ex+'ms ease-out':'';if(!self.lasttransitionstyle||self.lasttransitionstyle!=trans){self.lasttransitionstyle=trans;self.doc.css(cap.transitionstyle,trans);}
return ex;};this.doScrollLeft=function(x,spd){var y=(self.scrollrunning)?self.newscrolly:self.getScrollTop();self.doScrollPos(x,y,spd);}
this.doScrollTop=function(y,spd){var x=(self.scrollrunning)?self.newscrollx:self.getScrollLeft();self.doScrollPos(x,y,spd);}
this.doScrollPos=function(x,y,spd){var py=self.getScrollTop();var px=self.getScrollLeft();if(((self.newscrolly-py)*(y-py)<0)||((self.newscrollx-px)*(x-px)<0))self.cancelScroll();if(self.opt.bouncescroll==false){if(y<0)y=0;else if(y>self.page.maxh)y=self.page.maxh;if(x<0)x=0;else if(x>self.page.maxw)x=self.page.maxw;}
if(self.scrollrunning&&x==self.newscrollx&&y==self.newscrolly)return false;self.newscrolly=y;self.newscrollx=x;self.newscrollspeed=spd||false;if(self.timer)return false;self.timer=setTimeout(function(){var top=self.getScrollTop();var lft=self.getScrollLeft();var dst={};dst.x=x-lft;dst.y=y-top;dst.px=lft;dst.py=top;var dd=Math.round(Math.sqrt(Math.pow(dst.x,2)+Math.pow(dst.y,2)));var df=(self.newscrollspeed)?self.newscrollspeed:dd;var ms=self.prepareTransition(df);if(self.timerscroll&&self.timerscroll.tm)clearInterval(self.timerscroll.tm);if(ms>0){if(!self.scrollrunning&&self.onscrollstart){var info={"type":"scrollstart","current":{"x":lft,"y":top},"request":{"x":x,"y":y},"end":{"x":self.newscrollx,"y":self.newscrolly},"speed":ms};self.onscrollstart.call(self,info);}
if(cap.transitionend){if(!self.scrollendtrapped){self.scrollendtrapped=true;self.bind(self.doc,cap.transitionend,self.onScrollEnd,false);}}else{if(self.scrollendtrapped)clearTimeout(self.scrollendtrapped);self.scrollendtrapped=setTimeout(self.onScrollEnd,ms);}
var py=top;var px=lft;self.timerscroll={bz:new BezierClass(py,self.newscrolly,ms,0,0,0.58,1),bh:new BezierClass(px,self.newscrollx,ms,0,0,0.58,1)};if(!self.cursorfreezed)self.timerscroll.tm=setInterval(function(){self.showCursor(self.getScrollTop(),self.getScrollLeft())},60);}
self.synched("doScroll-set",function(){self.timer=0;if(self.scrollendtrapped)self.scrollrunning=true;self.setScrollTop(self.newscrolly);self.setScrollLeft(self.newscrollx);if(!self.scrollendtrapped)self.onScrollEnd();});},50);};this.cancelScroll=function(){if(!self.scrollendtrapped)return true;var py=self.getScrollTop();var px=self.getScrollLeft();self.scrollrunning=false;if(!cap.transitionend)clearTimeout(cap.transitionend);self.scrollendtrapped=false;self._unbind(self.doc,cap.transitionend,self.onScrollEnd);self.prepareTransition(0);self.setScrollTop(py);if(self.railh)self.setScrollLeft(px);if(self.timerscroll&&self.timerscroll.tm)clearInterval(self.timerscroll.tm);self.timerscroll=false;self.cursorfreezed=false;self.showCursor(py,px);return self;};this.onScrollEnd=function(){if(self.scrollendtrapped)self._unbind(self.doc,cap.transitionend,self.onScrollEnd);self.scrollendtrapped=false;self.prepareTransition(0);if(self.timerscroll&&self.timerscroll.tm)clearInterval(self.timerscroll.tm);self.timerscroll=false;var py=self.getScrollTop();var px=self.getScrollLeft();self.setScrollTop(py);if(self.railh)self.setScrollLeft(px);self.noticeCursor(false,py,px);self.cursorfreezed=false;if(py<0)py=0
else if(py>self.page.maxh)py=self.page.maxh;if(px<0)px=0
else if(px>self.page.maxw)px=self.page.maxw;if((py!=self.newscrolly)||(px!=self.newscrollx))return self.doScrollPos(px,py,self.opt.snapbackspeed);if(self.onscrollend&&self.scrollrunning){var info={"type":"scrollend","current":{"x":px,"y":py},"end":{"x":self.newscrollx,"y":self.newscrolly}};self.onscrollend.call(self,info);}
self.scrollrunning=false;};}else{this.doScrollLeft=function(x){var y=(self.scrollrunning)?self.newscrolly:self.getScrollTop();self.doScrollPos(x,y);}
this.doScrollTop=function(y){var x=(self.scrollrunning)?self.newscrollx:self.getScrollLeft();self.doScrollPos(x,y);}
this.doScrollPos=function(x,y){var y=((typeof y=="undefined")||(y===false))?self.getScrollTop(true):y;if((self.timer)&&(self.newscrolly==y)&&(self.newscrollx==x))return true;if(self.timer)clearAnimationFrame(self.timer);self.timer=0;var py=self.getScrollTop();var px=self.getScrollLeft();if(((self.newscrolly-py)*(y-py)<0)||((self.newscrollx-px)*(x-px)<0))self.cancelScroll();self.newscrolly=y;self.newscrollx=x;if(!self.bouncescroll||!self.rail.visibility){if(self.newscrolly<0){self.newscrolly=0;}
else if(self.newscrolly>self.page.maxh){self.newscrolly=self.page.maxh;}}
if(!self.bouncescroll||!self.railh.visibility){if(self.newscrollx<0){self.newscrollx=0;}
else if(self.newscrollx>self.page.maxw){self.newscrollx=self.page.maxw;}}
self.dst={};self.dst.x=x-px;self.dst.y=y-py;self.dst.px=px;self.dst.py=py;var dst=Math.round(Math.sqrt(Math.pow(self.dst.x,2)+Math.pow(self.dst.y,2)));self.dst.ax=self.dst.x/dst;self.dst.ay=self.dst.y/dst;var pa=0;var pe=dst;if(self.dst.x==0){pa=py;pe=y;self.dst.ay=1;self.dst.py=0;}else if(self.dst.y==0){pa=px;pe=x;self.dst.ax=1;self.dst.px=0;}
var ms=self.getTransitionSpeed(dst);if(ms>0){self.bzscroll=(self.bzscroll)?self.bzscroll.update(pe,ms):new BezierClass(pa,pe,ms,0,1,0,1);}else{self.bzscroll=false;}
if(self.timer)return;if((py==self.page.maxh&&y>=self.page.maxh)||(px==self.page.maxw&&x>=self.page.maxw))self.checkContentSize();var sync=1;function scrolling(){if(self.cancelAnimationFrame)return true;self.scrollrunning=true;sync=1-sync;if(sync)return(self.timer=setAnimationFrame(scrolling)||1);var done=0;var sc=sy=self.getScrollTop();if(self.dst.ay){sc=(self.bzscroll)?self.dst.py+(self.bzscroll.getNow()*self.dst.ay):self.newscrolly;var dr=sc-sy;if((dr<0&&sc<self.newscrolly)||(dr>0&&sc>self.newscrolly))sc=self.newscrolly;self.setScrollTop(sc);if(sc==self.newscrolly)done=1;}else{done=1;}
var scx=sx=self.getScrollLeft();if(self.dst.ax){scx=(self.bzscroll)?self.dst.px+(self.bzscroll.getNow()*self.dst.ax):self.newscrollx;var dr=scx-sx;if((dr<0&&scx<self.newscrollx)||(dr>0&&scx>self.newscrollx))scx=self.newscrollx;self.setScrollLeft(scx);if(scx==self.newscrollx)done+=1;}else{done+=1;}
if(done==2){self.timer=0;self.cursorfreezed=false;self.bzscroll=false;self.scrollrunning=false;if(sc<0)sc=0;else if(sc>self.page.maxh)sc=self.page.maxh;if(scx<0)scx=0;else if(scx>self.page.maxw)scx=self.page.maxw;if((scx!=self.newscrollx)||(sc!=self.newscrolly))self.doScrollPos(scx,sc);else{if(self.onscrollend){var info={"type":"scrollend","current":{"x":sx,"y":sy},"end":{"x":self.newscrollx,"y":self.newscrolly}};self.onscrollend.call(self,info);}}}else{self.timer=setAnimationFrame(scrolling)||1;}};self.cancelAnimationFrame=false;self.timer=1;if(self.onscrollstart&&!self.scrollrunning){var info={"type":"scrollstart","current":{"x":px,"y":py},"request":{"x":x,"y":y},"end":{"x":self.newscrollx,"y":self.newscrolly},"speed":ms};self.onscrollstart.call(self,info);}
scrolling();if((py==self.page.maxh&&y>=py)||(px==self.page.maxw&&x>=px))self.checkContentSize();self.noticeCursor();};this.cancelScroll=function(){if(self.timer)clearAnimationFrame(self.timer);self.timer=0;self.bzscroll=false;self.scrollrunning=false;return self;};}
this.doScrollBy=function(stp,relative){var ny=0;if(relative){ny=Math.floor((self.scroll.y-stp)*self.scrollratio.y)}else{var sy=(self.timer)?self.newscrolly:self.getScrollTop(true);ny=sy-stp;}
if(self.bouncescroll){var haf=Math.round(self.view.h/2);if(ny<-haf)ny=-haf
else if(ny>(self.page.maxh+haf))ny=(self.page.maxh+haf);}
self.cursorfreezed=false;py=self.getScrollTop(true);if(ny<0&&py<=0)return self.noticeCursor();else if(ny>self.page.maxh&&py>=self.page.maxh){self.checkContentSize();return self.noticeCursor();}
self.doScrollTop(ny);};this.doScrollLeftBy=function(stp,relative){var nx=0;if(relative){nx=Math.floor((self.scroll.x-stp)*self.scrollratio.x)}else{var sx=(self.timer)?self.newscrollx:self.getScrollLeft(true);nx=sx-stp;}
if(self.bouncescroll){var haf=Math.round(self.view.w/2);if(nx<-haf)nx=-haf
else if(nx>(self.page.maxw+haf))nx=(self.page.maxw+haf);}
self.cursorfreezed=false;px=self.getScrollLeft(true);if(nx<0&&px<=0)return self.noticeCursor();else if(nx>self.page.maxw&&px>=self.page.maxw)return self.noticeCursor();self.doScrollLeft(nx);};this.doScrollTo=function(pos,relative){var ny=(relative)?Math.round(pos*self.scrollratio.y):pos;if(ny<0)ny=0
else if(ny>self.page.maxh)ny=self.page.maxh;self.cursorfreezed=false;self.doScrollTop(pos);};this.checkContentSize=function(){var pg=self.getContentSize();if((pg.h!=self.page.h)||(pg.w!=self.page.w))self.resize(false,pg);};self.onscroll=function(e){if(self.rail.drag)return;if(!self.cursorfreezed){self.synched('scroll',function(){self.scroll.y=Math.round(self.getScrollTop()*(1/self.scrollratio.y));if(self.railh)self.scroll.x=Math.round(self.getScrollLeft()*(1/self.scrollratio.x));self.noticeCursor();});}};self.bind(self.docscroll,"scroll",self.onscroll);this.doZoomIn=function(e){if(self.zoomactive)return;self.zoomactive=true;self.zoomrestore={style:{}};var lst=['position','top','left','zIndex','backgroundColor','marginTop','marginBottom','marginLeft','marginRight'];var win=self.win[0].style;for(var a in lst){var pp=lst[a];self.zoomrestore.style[pp]=(typeof win[pp]!='undefined')?win[pp]:'';}
self.zoomrestore.style.width=self.win.css('width');self.zoomrestore.style.height=self.win.css('height');self.zoomrestore.padding={w:self.win.outerWidth()-self.win.width(),h:self.win.outerHeight()-self.win.height()};if(cap.isios4){self.zoomrestore.scrollTop=$(window).scrollTop();$(window).scrollTop(0);}
self.win.css({"position":(cap.isios4)?"absolute":"fixed","top":0,"left":0,"z-index":globalmaxzindex+100,"margin":"0px"});var bkg=self.win.css("backgroundColor");if(bkg==""||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(bkg))self.win.css("backgroundColor","#fff");self.rail.css({"z-index":globalmaxzindex+101});self.zoom.css({"z-index":globalmaxzindex+102});self.zoom.css('backgroundPosition','0px -18px');self.resizeZoom();if(self.onzoomin)self.onzoomin.call(self);return self.cancelEvent(e);};this.doZoomOut=function(e){if(!self.zoomactive)return;self.zoomactive=false;self.win.css("margin","");self.win.css(self.zoomrestore.style);if(cap.isios4){$(window).scrollTop(self.zoomrestore.scrollTop);}
self.rail.css({"z-index":self.zindex});self.zoom.css({"z-index":self.zindex});self.zoomrestore=false;self.zoom.css('backgroundPosition','0px 0px');self.onResize();if(self.onzoomout)self.onzoomout.call(self);return self.cancelEvent(e);};this.doZoom=function(e){return(self.zoomactive)?self.doZoomOut(e):self.doZoomIn(e);};this.resizeZoom=function(){if(!self.zoomactive)return;var py=self.getScrollTop();self.win.css({width:$(window).width()-self.zoomrestore.padding.w+"px",height:$(window).height()-self.zoomrestore.padding.h+"px"});self.onResize();self.setScrollTop(Math.min(self.page.maxh,py));};this.init();$.nicescroll.push(this);};var ScrollMomentumClass2D=function(nc){var self=this;this.nc=nc;this.lastx=0;this.lasty=0;this.speedx=0;this.speedy=0;this.lasttime=0;this.steptime=0;this.snapx=false;this.snapy=false;this.demulx=0;this.demuly=0;this.lastscrollx=-1;this.lastscrolly=-1;this.chkx=0;this.chky=0;this.timer=0;this.time=function(){return+new Date();};this.reset=function(px,py){self.stop();var now=self.time();self.steptime=0;self.lasttime=now;self.speedx=0;self.speedy=0;self.lastx=px;self.lasty=py;self.lastscrollx=-1;self.lastscrolly=-1;};this.update=function(px,py){var now=self.time();self.steptime=now-self.lasttime;self.lasttime=now;var dy=py-self.lasty;var dx=px-self.lastx;var sy=self.nc.getScrollTop();var sx=self.nc.getScrollLeft();var newy=sy+dy;var newx=sx+dx;self.snapx=(newx<0)||(newx>self.nc.page.maxw);self.snapy=(newy<0)||(newy>self.nc.page.maxh);self.speedx=dx;self.speedy=dy;self.lastx=px;self.lasty=py;};this.stop=function(){self.nc.unsynched("domomentum2d");if(self.timer)clearTimeout(self.timer);self.timer=0;self.lastscrollx=-1;self.lastscrolly=-1;};this.doSnapy=function(nx,ny){var snap=false;if(ny<0){ny=0;snap=true;}
else if(ny>self.nc.page.maxh){ny=self.nc.page.maxh;snap=true;}
if(nx<0){nx=0;snap=true;}
else if(nx>self.nc.page.maxw){nx=self.nc.page.maxw;snap=true;}
if(snap)self.nc.doScrollPos(nx,ny,self.nc.opt.snapbackspeed);};this.doMomentum=function(gp){var t=self.time();var l=(gp)?t+gp:self.lasttime;var sl=self.nc.getScrollLeft();var st=self.nc.getScrollTop();var pageh=self.nc.page.maxh;var pagew=self.nc.page.maxw;self.speedx=(pagew>0)?Math.min(60,self.speedx):0;self.speedy=(pageh>0)?Math.min(60,self.speedy):0;var chk=l&&(t-l)<=50;if((st<0)||(st>pageh)||(sl<0)||(sl>pagew))chk=false;var sy=(self.speedy&&chk)?self.speedy:false;var sx=(self.speedx&&chk)?self.speedx:false;if(sy||sx){var tm=Math.max(16,self.steptime);if(tm>50){var xm=tm/50;self.speedx*=xm;self.speedy*=xm;tm=50;}
self.demulxy=0;self.lastscrollx=self.nc.getScrollLeft();self.chkx=self.lastscrollx;self.lastscrolly=self.nc.getScrollTop();self.chky=self.lastscrolly;var nx=self.lastscrollx;var ny=self.lastscrolly;var onscroll=function(){var df=((self.time()-t)>600)?0.04:0.02;if(self.speedx){nx=Math.floor(self.lastscrollx-(self.speedx*(1-self.demulxy)));self.lastscrollx=nx;if((nx<0)||(nx>pagew))df=0.10;}
if(self.speedy){ny=Math.floor(self.lastscrolly-(self.speedy*(1-self.demulxy)));self.lastscrolly=ny;if((ny<0)||(ny>pageh))df=0.10;}
self.demulxy=Math.min(1,self.demulxy+df);self.nc.synched("domomentum2d",function(){if(self.speedx){var scx=self.nc.getScrollLeft();if(scx!=self.chkx)self.stop();self.chkx=nx;self.nc.setScrollLeft(nx);}
if(self.speedy){var scy=self.nc.getScrollTop();if(scy!=self.chky)self.stop();self.chky=ny;self.nc.setScrollTop(ny);}
if(!self.timer){self.nc.hideCursor();self.doSnapy(nx,ny);}});if(self.demulxy<1){self.timer=setTimeout(onscroll,tm);}else{self.stop();self.nc.hideCursor();self.doSnapy(nx,ny);}};onscroll();}else{self.doSnapy(self.nc.getScrollLeft(),self.nc.getScrollTop());}}};var _scrollTop=jQuery.fn.scrollTop;jQuery.cssHooks["pageYOffset"]={get:function(elem,computed,extra){var nice=$.data(elem,'__nicescroll')||false;return(nice&&nice.ishwscroll)?nice.getScrollTop():_scrollTop.call(elem);},set:function(elem,value){var nice=$.data(elem,'__nicescroll')||false;(nice&&nice.ishwscroll)?nice.setScrollTop(parseInt(value)):_scrollTop.call(elem,value);return this;}};jQuery.fn.scrollTop=function(value){if(typeof value=="undefined"){var nice=(this[0])?$.data(this[0],'__nicescroll')||false:false;return(nice&&nice.ishwscroll)?nice.getScrollTop():_scrollTop.call(this);}else{return this.each(function(){var nice=$.data(this,'__nicescroll')||false;(nice&&nice.ishwscroll)?nice.setScrollTop(parseInt(value)):_scrollTop.call($(this),value);});}}
var _scrollLeft=jQuery.fn.scrollLeft;$.cssHooks.pageXOffset={get:function(elem,computed,extra){var nice=$.data(elem,'__nicescroll')||false;return(nice&&nice.ishwscroll)?nice.getScrollLeft():_scrollLeft.call(elem);},set:function(elem,value){var nice=$.data(elem,'__nicescroll')||false;(nice&&nice.ishwscroll)?nice.setScrollLeft(parseInt(value)):_scrollLeft.call(elem,value);return this;}};jQuery.fn.scrollLeft=function(value){if(typeof value=="undefined"){var nice=(this[0])?$.data(this[0],'__nicescroll')||false:false;return(nice&&nice.ishwscroll)?nice.getScrollLeft():_scrollLeft.call(this);}else{return this.each(function(){var nice=$.data(this,'__nicescroll')||false;(nice&&nice.ishwscroll)?nice.setScrollLeft(parseInt(value)):_scrollLeft.call($(this),value);});}}
var NiceScrollArray=function(doms){var self=this;this.length=0;this.name="nicescrollarray";this.each=function(fn){for(var a=0;a<self.length;a++)fn.call(self[a]);return self;};this.push=function(nice){self[self.length]=nice;self.length++;};this.eq=function(idx){return self[idx];};if(doms){for(a=0;a<doms.length;a++){var nice=$.data(doms[a],'__nicescroll')||false;if(nice){this[this.length]=nice;this.length++;}};}
return this;};function mplex(el,lst,fn){for(var a=0;a<lst.length;a++)fn(el,lst[a]);};mplex(NiceScrollArray.prototype,['show','hide','toggle','onResize','resize','remove','stop','doScrollPos'],function(e,n){e[n]=function(){var args=arguments;return this.each(function(){this[n].apply(this,args);});};});jQuery.fn.getNiceScroll=function(index){if(typeof index=="undefined"){return new NiceScrollArray(this);}else{var nice=$.data(this[index],'__nicescroll')||false;return nice;}};jQuery.extend(jQuery.expr[':'],{nicescroll:function(a){return($.data(a,'__nicescroll'))?true:false;}});$.fn.niceScroll=function(wrapper,opt){if(typeof opt=="undefined"){if((typeof wrapper=="object")&&!("jquery"in wrapper)){opt=wrapper;wrapper=false;}}
var ret=new NiceScrollArray();if(typeof opt=="undefined")opt={};if(wrapper||false){opt.doc=$(wrapper);opt.win=$(this);}
var docundef=!("doc"in opt);if(!docundef&&!("win"in opt))opt.win=$(this);this.each(function(){var nice=$(this).data('__nicescroll')||false;if(!nice){opt.doc=(docundef)?$(this):opt.doc;nice=new NiceScrollClass(opt,$(this));$(this).data('__nicescroll',nice);}
ret.push(nice);});return(ret.length==1)?ret[0]:ret;};window.NiceScroll={getjQuery:function(){return jQuery}};if(!$.nicescroll){$.nicescroll=new NiceScrollArray();$.nicescroll.options=_globaloptions;}})(jQuery);
/*! end /app/merrick/themes/default/js/nicescroll.js*/

/*! start /app/merrick/themes/default/js/scrollto.js*/
/*
 * jQuery.ScrollTo
 * Copyright (c) 2007-2012 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * Date: 4/09/2012
 *
 * @projectDescription Easy element scrolling using jQuery.
 * http://flesler.blogspot.com/2007/10/jqueryscrollto.html
 * @author Ariel Flesler
 * @version 1.4.3.1
 *
 * @id jQuery.scrollTo
 * @id jQuery.fn.scrollTo
 * @param {String, Number, DOMElement, jQuery, Object} target Where to scroll the matched elements.
 *     The different options for target are:
 *      - A number position (will be applied to all axes).
 *      - A string position ('44', '100px', '+=90', etc ) will be applied to all axes
 *      - A jQuery/DOM element ( logically, child of the element to scroll )
 *      - A string selector, that will be relative to the element to scroll ( 'li:eq(2)', etc )
 *      - A hash { top:x, left:y }, x and y can be any kind of number/string like above.
 *      - A percentage of the container's dimension/s, for example: 50% to go to the middle.
 *      - The string 'max' for go-to-end.
 * @param {Number, Function} duration The OVERALL length of the animation, this argument can be the settings object instead.
 * @param {Object,Function} settings Optional set of settings or the onAfter callback.
 *    @option {String} axis Which axis must be scrolled, use 'x', 'y', 'xy' or 'yx'.
 *    @option {Number, Function} duration The OVERALL length of the animation.
 *    @option {String} easing The easing method for the animation.
 *    @option {Boolean} margin If true, the margin of the target element will be deducted from the final position.
 *    @option {Object, Number} offset Add/deduct from the end position. One number for both axes or { top:x, left:y }.
 *    @option {Object, Number} over Add/deduct the height/width multiplied by 'over', can be { top:x, left:y } when using both axes.
 *    @option {Boolean} queue If true, and both axis are given, the 2nd axis will only be animated after the first one ends.
 *    @option {Function} onAfter Function to be called after the scrolling ends.
 *    @option {Function} onAfterFirst If queuing is activated, this function will be called after the first scrolling ends.
 * @return {jQuery} Returns the same jQuery object, for chaining.
 *
 * @desc Scroll to a fixed position
 * @example $('div').scrollTo( 340 );
 *
 * @desc Scroll relatively to the actual position
 * @example $('div').scrollTo( '+=340px', { axis:'y' } );
 *
 * @desc Scroll using a selector (relative to the scrolled element)
 * @example $('div').scrollTo( 'p.paragraph:eq(2)', 500, { easing:'swing', queue:true, axis:'xy' } );
 *
 * @desc Scroll to a DOM element (same for jQuery object)
 * @example var second_child = document.getElementById('container').firstChild.nextSibling;
 *         $('#container').scrollTo( second_child, { duration:500, axis:'x', onAfter:function(){
 *            alert('scrolled!!');
 *         }});
 *
 * @desc Scroll on both axes, to different values
 * @example $('div').scrollTo( { top: 300, left:'+=200' }, { axis:'xy', offset:-20 } );
 */
;(function($){var $scrollTo=$.scrollTo=function(target,duration,settings){$(window).scrollTo(target,duration,settings);};$scrollTo.defaults={axis:'xy',duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:true};$scrollTo.window=function(scope){return $(window)._scrollable();};$.fn._scrollable=function(){return this.map(function(){var elem=this,isWin=!elem.nodeName||$.inArray(elem.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)
return elem;var doc=(elem.contentWindow||elem).document||elem.ownerDocument||elem;return /webkit/i.test(navigator.userAgent)||doc.compatMode=='BackCompat'?doc.body:doc.documentElement;});};$.fn.scrollTo=function(target,duration,settings){if(typeof duration=='object'){settings=duration;duration=0;}
if(typeof settings=='function')
settings={onAfter:settings};if(target=='max')
target=9e9;settings=$.extend({},$scrollTo.defaults,settings);duration=duration||settings.duration;settings.queue=settings.queue&&settings.axis.length>1;if(settings.queue)
duration/=2;settings.offset=both(settings.offset);settings.over=both(settings.over);return this._scrollable().each(function(){if(target==null)return;var elem=this,$elem=$(elem),targ=target,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break;}
targ=$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)
toff=(targ=$(targ)).offset();}
$.each(settings.axis.split(''),function(i,axis){var Pos=axis=='x'?'Left':'Top',pos=Pos.toLowerCase(),key='scroll'+Pos,old=elem[key],max=$scrollTo.max(elem,axis);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(settings.margin){attr[key]-=parseInt(targ.css('margin'+Pos))||0;attr[key]-=parseInt(targ.css('border'+Pos+'Width'))||0;}
attr[key]+=settings.offset[pos]||0;if(settings.over[pos])
attr[key]+=targ[axis=='x'?'width':'height']()*settings.over[pos];}else{var val=targ[pos];attr[key]=val.slice&&val.slice(-1)=='%'?parseFloat(val)/100*max:val;}
if(settings.limit&&/^\d+$/.test(attr[key]))
attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&settings.queue){if(old!=attr[key])
animate(settings.onAfterFirst);delete attr[key];}});animate(settings.onAfter);function animate(callback){$elem.animate(attr,duration,settings.easing,callback&&function(){callback.call(this,target,settings);});};}).end();};$scrollTo.max=function(elem,axis){var Dim=axis=='x'?'Width':'Height',scroll='scroll'+Dim;if(!$(elem).is('html,body'))
return elem[scroll]-$(elem)[Dim.toLowerCase()]();var size='client'+Dim,html=elem.ownerDocument.documentElement,body=elem.ownerDocument.body;return Math.max(html[scroll],body[scroll])
-Math.min(html[size],body[size]);};function both(val){return typeof val=='object'?val:{top:val,left:val};};})(jQuery);
/*! end /app/merrick/themes/default/js/scrollto.js*/

/*! start /app/merrick/themes/default/js/inview.js*/
$.extend($.expr[':'],{bottomAboveScreen:function(el)
{var
scrollTop=(document.documentElement.scrollTop||document.body.scrollTop),elOffsetTop=$(el).offset().top,elHeight=$(el).height(),windowHeight=(window.innerHeight&&window.innerHeight<$(window).height())?window.innerHeight:$(window).height();return((-Cygnus.view.offsetTop+elOffsetTop+elHeight)+Page.getScreenHeight()<scrollTop);},topBelowScreen:function(el){var debug=$(el).data('debug');var scrollTop=(document.documentElement.scrollTop||document.body.scrollTop),elOffsetTop=$(el).offset().top,winH=(window.innerHeight&&window.innerHeight<$(window).height())?window.innerHeight:$(window).height();return(Cygnus.view.offsetBottom+elOffsetTop>scrollTop+winH+Page.getScreenHeight());},offScreen:function(el){return($(el).is(':bottomAboveScreen')||$(el).is(':topBelowScreen'));},bottomAboveView:function(el){var debug=$(el).data('debug');var scrollTop=(document.documentElement.scrollTop||document.body.scrollTop),elOffsetTop=$(el).offset().top,elH=$(el).height(),winH=(window.innerHeight&&window.innerHeight<$(window).height())?window.innerHeight:$(window).height();return(-Cygnus.view.offsetTop+elOffsetTop+elH<scrollTop);},bottomInView:function(el){return(!$(el).is(':bottomAboveView')&&!$(el).is(':bottomBelowView'));},bottomBelowView:function(el){var debug=$(el).data('debug');var scrollTop=(document.documentElement.scrollTop||document.body.scrollTop),elOffsetTop=$(el).offset().top,elH=$(el).height(),winH=(window.innerHeight&&window.innerHeight<$(window).height())?window.innerHeight:$(window).height();return(Cygnus.view.offsetBottom+elOffsetTop+elH>scrollTop+winH);},topAboveView:function(el){var debug=$(el).data('debug');var scrollTop=(document.documentElement.scrollTop||document.body.scrollTop),elOffsetTop=$(el).offset().top,winH=(window.innerHeight&&window.innerHeight<$(window).height())?window.innerHeight:$(window).height();return(-Cygnus.view.offsetTop+elOffsetTop<scrollTop);},topInView:function(el){return(!$(el).is(':topAboveView')&&!$(el).is(':topBelowView'));},topBelowView:function(el){var debug=$(el).data('debug');var scrollTop=(document.documentElement.scrollTop||document.body.scrollTop),elOffsetTop=$(el).offset().top,winH=(window.innerHeight&&window.innerHeight<$(window).height())?window.innerHeight:$(window).height();return(Cygnus.view.offsetBottom+elOffsetTop>scrollTop+winH);},aboveView:function(el){return($(el).is(':topAboveView')&&$(el).is(':bottomAboveView'));},inView:function(el){return($(el).is(':topInView')&&$(el).is(':bottomInView'));},belowView:function(el){return($(el).is(':topBelowView')&&$(el).is(':topBelowView'));},viewable:function(el){return($(el).is(':topInView')||$(el).is(':bottomInView'));},bottomInViewport:function(el){var debug=$(el).data('debug');var scrollTop=(document.documentElement.scrollTop||document.body.scrollTop),elOffsetTop=$(el).offset().top,elH=$(el).height(),elOffset=0,winH=(window.innerHeight&&window.innerHeight<$(window).height())?window.innerHeight:$(window).height();if($(el).data('offset'))elOffset=parseInt($(el).data('offset'));if(debug)
{console.log($(el).data('offset'),'offset');console.log($(el),'bottomInViewport');console.log(elOffsetTop+' + '+elH+' + '+elOffset+' < '+scrollTop+' + '+winH,'bottomInViewport');console.log(elOffsetTop+elH+elOffset<scrollTop+winH,'bottomInViewport');}
return(elOffsetTop+elH+elOffset<scrollTop+winH);},topInViewport:function(el){var debug=$(el).data('debug');var scrollTop=(document.documentElement.scrollTop||document.body.scrollTop),elOffsetTop=$(el).offset().top,elOffset=0,winH=(window.innerHeight&&window.innerHeight<$(window).height())?window.innerHeight:$(window).height();if($(el).data('offset'))elOffset=-parseInt($(el).data('offset'));if(debug)
{console.log($(el).data('offset'),'offset');console.log($(el),'topInViewport');console.log(elOffsetTop+' + '+elOffset+' < '+scrollTop+' + '+winH,'topInViewport');console.log(elOffsetTop+elOffset<scrollTop+winH&&elOffsetTop+elOffset>scrollTop,'topInViewport');}
return(elOffsetTop+elOffset<scrollTop+winH);},bottomOutViewport:function(el){var debug=$(el).data('debug');var scrollTop=(document.documentElement.scrollTop||document.body.scrollTop),elOffsetTop=$(el).offset().top,elH=$(el).height(),elOffset=0;if($(el).data('offset'))elOffset=parseInt($(el).data('offset'));if(debug)
{console.log($(el).data('offset'),'offset');console.log($(el),'bottomOutViewport');console.log(elOffsetTop+' + '+elH+' + '+elOffset+' < '+scrollTop,'bottomOutViewport');console.log(elOffsetTop+elH+elOffset<scrollTop,'bottomOutViewport');}
return(elOffsetTop+elH+elOffset<scrollTop);},topOutViewport:function(el){var debug=$(el).data('debug');var scrollTop=(document.documentElement.scrollTop||document.body.scrollTop),elOffsetTop=$(el).offset().top,elOffset=0;if($(el).data('offset'))elOffset=-parseInt($(el).data('offset'));if(debug)
{console.log($(el).data('offset'),'offset');console.log($(el),'topOutViewport');console.log(elOffsetTop+' + '+elOffset+' < '+scrollTop,'topOutViewport');console.log(elOffsetTop+elOffset<scrollTop,'topOutViewport');}
return(elOffsetTop+elOffset<scrollTop);}});
/*! end /app/merrick/themes/default/js/inview.js*/

/*! start /app/merrick/themes/default/js/smartscroll.js*/
(function(){var special=$.event.special,uid1='D'+(+new Date()),uid2='D'+(+new Date()+1);special.scrollstart={latency:250,setup:function(){var timer,handler=function(evt){var _self=this,_args=arguments;if(timer){clearTimeout(timer);}else{evt.type='scrollstart';$.event.handle.apply(_self,_args);}
timer=setTimeout(function(){timer=null;evt.type='scrollstop';$.event.handle.apply(_self,_args);},special.scrollstart.latency);};$(this).on('scroll',handler).data(uid1,handler);$(this).on('touchmove',handler).data(uid1,handler);},teardown:function(){$(this).off('scroll',$(this).data(uid1));$(this).off('touchmove',$(this).data(uid1));}};})();
/*! end /app/merrick/themes/default/js/smartscroll.js*/

/*! start /app/merrick/themes/default/js/smartresize.js*/
(function(){var special=$.event.special,uid1='D'+(+new Date()),uid2='D'+(+new Date()+1);special.resizestart={latency:250,setup:function(){var timer,handler=function(evt){var _self=this,_args=arguments;if(timer){clearTimeout(timer);}else{evt.type='resizestart';$.event.handle.apply(_self,_args);}
timer=setTimeout(function(){timer=null;evt.type='resizestop';$.event.handle.apply(_self,_args);},special.resizestart.latency);};$(this).on('resize',handler).data(uid1,handler);$(this).on('orientationchange',handler).data(uid1,handler);},teardown:function(){$(this).off('resize',$(this).data(uid1));$(this).off('orientationchange',handler).data(uid1);}};})();
/*! end /app/merrick/themes/default/js/smartresize.js*/

/*! start /app/merrick/themes/default/js/dotimeout.js*/
/*
 * jQuery doTimeout: Like setTimeout, but better! - v1.0 - 3/3/2010
 * http://benalman.com/projects/jquery-dotimeout-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($){'$:nomunge';var cache={},doTimeout='doTimeout',aps=Array.prototype.slice;$[doTimeout]=function(){return p_doTimeout.apply(window,[0].concat(aps.call(arguments)));};$.fn[doTimeout]=function(){var args=aps.call(arguments),result=p_doTimeout.apply(this,[doTimeout+args[0]].concat(args));return typeof args[0]==='number'||typeof args[1]==='number'?this:result;};function p_doTimeout(jquery_data_key){var that=this,elem,data={},method_base=jquery_data_key?$.fn:$,args=arguments,slice_args=4,id=args[1],delay=args[2],callback=args[3];if(typeof id!=='string'){slice_args--;id=jquery_data_key=0;delay=args[1];callback=args[2];}
if(jquery_data_key){elem=that.eq(0);elem.data(jquery_data_key,data=elem.data(jquery_data_key)||{});}else if(id){data=cache[id]||(cache[id]={});}
data.id&&clearTimeout(data.id);delete data.id;function cleanup(){if(jquery_data_key){elem.removeData(jquery_data_key);}else if(id){delete cache[id];}};function actually_setTimeout(){data.id=setTimeout(function(){data.fn();},delay);};if(callback){data.fn=function(no_polling_loop){if(typeof callback==='string'){callback=method_base[callback];}
callback.apply(that,aps.call(args,slice_args))===true&&!no_polling_loop?actually_setTimeout():cleanup();};actually_setTimeout();}else if(data.fn){delay===undefined?cleanup():data.fn(delay===false);return true;}else{cleanup();}};})(jQuery);
/*! end /app/merrick/themes/default/js/dotimeout.js*/

/*! start /app/merrick/themes/default/js/imagesLoaded.js*/
;(function($){var eventNamespace='waitForImages';$.waitForImages={hasImageProperties:['backgroundImage','listStyleImage','borderImage','borderCornerImage','cursor']};$.expr[':'].uncached=function(obj){if(!$(obj).is('img[src!=""]')){return false;}
var img=new Image();img.src=obj.src;return!img.complete;};$.fn.waitForImages=function(finishedCallback,eachCallback,waitForAll){var allImgsLength=0;var allImgsLoaded=0;if($.isPlainObject(arguments[0])){waitForAll=arguments[0].waitForAll;eachCallback=arguments[0].each;finishedCallback=arguments[0].finished;}
finishedCallback=finishedCallback||$.noop;eachCallback=eachCallback||$.noop;waitForAll=!!waitForAll;if(!$.isFunction(finishedCallback)||!$.isFunction(eachCallback)){throw new TypeError('An invalid callback was supplied.');}
return this.each(function(){var obj=$(this);var allImgs=[];var hasImgProperties=$.waitForImages.hasImageProperties||[];var matchUrl=/url\(\s*(['"]?)(.*?)\1\s*\)/g;if(waitForAll){obj.find('*').addBack().each(function(){var element=$(this);if(element.is('img:uncached')){allImgs.push({src:element.attr('src'),element:element[0]});}
$.each(hasImgProperties,function(i,property){var propertyValue=element.css(property);var match;if(!propertyValue){return true;}
while(match=matchUrl.exec(propertyValue)){allImgs.push({src:match[2],element:element[0]});}});});}else{obj.find('img:uncached').each(function(){allImgs.push({src:this.src,element:this});});}
allImgsLength=allImgs.length;allImgsLoaded=0;if(allImgsLength===0){finishedCallback.call(obj[0]);}
$.each(allImgs,function(i,img){var image=new Image();$(image).on('load.'+eventNamespace+' error.'+eventNamespace,function(event){allImgsLoaded++;eachCallback.call(img.element,allImgsLoaded,allImgsLength,event.type=='load');if(allImgsLoaded==allImgsLength){finishedCallback.call(obj[0]);return false;}});image.src=img.src;});});};}(jQuery));
/*! end /app/merrick/themes/default/js/imagesLoaded.js*/

/*! start /app/merrick/themes/default/js/swiper.js*/
var Swiper=function(selector,params){if(document.body.__defineGetter__){if(HTMLElement){var element=HTMLElement.prototype;if(element.__defineGetter__){element.__defineGetter__("outerHTML",function(){return new XMLSerializer().serializeToString(this);});}}}
if(!window.getComputedStyle){window.getComputedStyle=function(el,pseudo){this.el=el;this.getPropertyValue=function(prop){var re=/(\-([a-z]){1})/g;if(prop==='float')prop='styleFloat';if(re.test(prop)){prop=prop.replace(re,function(){return arguments[2].toUpperCase();});}
return el.currentStyle[prop]?el.currentStyle[prop]:null;}
return this;}}
if(!Array.prototype.indexOf){Array.prototype.indexOf=function(obj,start){for(var i=(start||0),j=this.length;i<j;i++){if(this[i]===obj){return i;}}
return-1;}}
if(!document.querySelectorAll){if(!window.jQuery)return;}
function $$(s){if(document.querySelectorAll)
return document.querySelectorAll(s);else
return jQuery(s);}
if(typeof selector==='undefined')return;if(!(selector.nodeType)){if($$(selector).length===0)return;}
var _this=this;_this.touches={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,diff:0,abs:0};_this.positions={start:0,abs:0,diff:0,current:0};_this.times={start:0,end:0};_this.id=(new Date()).getTime();_this.container=(selector.nodeType)?selector:$$(selector)[0];_this.isTouched=false;_this.isMoved=false;_this.activeIndex=0;_this.activeLoaderIndex=0;_this.activeLoopIndex=0;_this.previousIndex=null;_this.velocity=0;_this.snapGrid=[];_this.slidesGrid=[];_this.imagesToLoad=[];_this.imagesLoaded=0;_this.wrapperLeft=0;_this.wrapperRight=0;_this.wrapperTop=0;_this.wrapperBottom=0;var wrapper,slideSize,wrapperSize,direction,isScrolling,containerSize;var defaults={mode:'horizontal',touchRatio:1,speed:300,freeMode:false,freeModeFluid:false,momentumRatio:1,momentumBounce:true,momentumBounceRatio:1,slidesPerView:1,slidesPerGroup:1,simulateTouch:true,followFinger:true,shortSwipes:true,moveStartThreshold:false,autoplay:false,onlyExternal:false,createPagination:true,pagination:false,paginationElement:'span',paginationClickable:false,paginationAsRange:true,resistance:true,scrollContainer:false,preventLinks:true,noSwiping:false,noSwipingClass:'swiper-no-swiping',initialSlide:0,keyboardControl:false,mousewheelControl:false,useCSS3Transforms:true,loop:false,loopAdditionalSlides:0,calculateHeight:false,updateOnImagesReady:true,releaseFormElements:true,watchActiveIndex:false,visibilityFullFit:false,offsetPxBefore:0,offsetPxAfter:0,offsetSlidesBefore:0,offsetSlidesAfter:0,centeredSlides:false,queueStartCallbacks:false,queueEndCallbacks:false,autoResize:true,resizeReInit:false,DOMAnimation:true,loader:{slides:[],slidesHTMLType:'inner',surroundGroups:1,logic:'reload',loadAllSlides:false},slideElement:'div',slideClass:'swiper-slide',slideActiveClass:'swiper-slide-active',slideVisibleClass:'swiper-slide-visible',wrapperClass:'swiper-wrapper',paginationElementClass:'swiper-pagination-switch',paginationActiveClass:'swiper-active-switch',paginationVisibleClass:'swiper-visible-switch'}
params=params||{};for(var prop in defaults){if(prop in params&&typeof params[prop]==='object'){for(var subProp in defaults[prop]){if(!(subProp in params[prop])){params[prop][subProp]=defaults[prop][subProp];}}}
else if(!(prop in params)){params[prop]=defaults[prop]}}
_this.params=params;if(params.scrollContainer){params.freeMode=true;params.freeModeFluid=true;}
if(params.loop){params.resistance='100%';}
var isH=params.mode==='horizontal';_this.touchEvents={touchStart:_this.support.touch||!params.simulateTouch?'touchstart':(_this.browser.ie10?'MSPointerDown':'mousedown'),touchMove:_this.support.touch||!params.simulateTouch?'touchmove':(_this.browser.ie10?'MSPointerMove':'mousemove'),touchEnd:_this.support.touch||!params.simulateTouch?'touchend':(_this.browser.ie10?'MSPointerUp':'mouseup')};for(var i=_this.container.childNodes.length-1;i>=0;i--){if(_this.container.childNodes[i].className){var _wrapperClasses=_this.container.childNodes[i].className.split(' ')
for(var j=0;j<_wrapperClasses.length;j++){if(_wrapperClasses[j]===params.wrapperClass){wrapper=_this.container.childNodes[i];}};}};_this.wrapper=wrapper;_this._extendSwiperSlide=function(el){el.append=function(){if(params.loop){el.insertAfter(_this.slides.length-_this.loopedSlides);_this.removeLoopedSlides();_this.calcSlides();_this.createLoop();}
else{_this.wrapper.appendChild(el);}
_this.reInit();return el;}
el.prepend=function(){if(params.loop){_this.wrapper.insertBefore(el,_this.slides[_this.loopedSlides]);_this.removeLoopedSlides();_this.calcSlides();_this.createLoop();}
else{_this.wrapper.insertBefore(el,_this.wrapper.firstChild);}
_this.reInit();return el;}
el.insertAfter=function(index){if(typeof index==='undefined')return false;var beforeSlide;if(params.loop){beforeSlide=_this.slides[index+1+_this.loopedSlides];_this.wrapper.insertBefore(el,beforeSlide);_this.removeLoopedSlides();_this.calcSlides();_this.createLoop();}
else{beforeSlide=_this.slides[index+1];_this.wrapper.insertBefore(el,beforeSlide)}
_this.reInit();return el;}
el.clone=function(){return _this._extendSwiperSlide(el.cloneNode(true))}
el.remove=function(){_this.wrapper.removeChild(el);_this.reInit();}
el.html=function(html){if(typeof html==='undefined'){return el.innerHTML;}
else{el.innerHTML=html;return el;}}
el.index=function(){var index;for(var i=_this.slides.length-1;i>=0;i--){if(el===_this.slides[i])index=i;}
return index;}
el.isActive=function(){if(el.index()===_this.activeIndex)return true;else return false;}
if(!el.swiperSlideDataStorage)el.swiperSlideDataStorage={};el.getData=function(name){return el.swiperSlideDataStorage[name];}
el.setData=function(name,value){el.swiperSlideDataStorage[name]=value;return el;}
el.data=function(name,value){if(!value){return el.getAttribute('data-'+name);}
else{el.setAttribute('data-'+name,value);return el;}}
el.getWidth=function(outer){return _this.h.getWidth(el,outer);}
el.getHeight=function(outer){return _this.h.getHeight(el,outer);}
el.getOffset=function(){return _this.h.getOffset(el);}
return el;}
_this.calcSlides=function(forceCalcSlides){var oldNumber=_this.slides?_this.slides.length:false;_this.slides=[];_this.displaySlides=[];for(var i=0;i<_this.wrapper.childNodes.length;i++){if(_this.wrapper.childNodes[i].className){var _className=_this.wrapper.childNodes[i].className;var _slideClasses=_className.split(' ');for(var j=0;j<_slideClasses.length;j++){if(_slideClasses[j]===params.slideClass){_this.slides.push(_this.wrapper.childNodes[i]);}}}}
for(i=_this.slides.length-1;i>=0;i--){_this._extendSwiperSlide(_this.slides[i]);}
if(!oldNumber)return;if(oldNumber!==_this.slides.length||forceCalcSlides){removeSlideEvents();addSlideEvents();_this.updateActiveSlide();if(params.createPagination&&_this.params.pagination)_this.createPagination();_this.callPlugins('numberOfSlidesChanged');}}
_this.createSlide=function(html,slideClassList,el){var slideClassList=slideClassList||_this.params.slideClass;var el=el||params.slideElement;var newSlide=document.createElement(el);newSlide.innerHTML=html||'';newSlide.className=slideClassList;return _this._extendSwiperSlide(newSlide);}
_this.appendSlide=function(html,slideClassList,el){if(!html)return;if(html.nodeType){return _this._extendSwiperSlide(html).append()}
else{return _this.createSlide(html,slideClassList,el).append()}}
_this.prependSlide=function(html,slideClassList,el){if(!html)return;if(html.nodeType){return _this._extendSwiperSlide(html).prepend()}
else{return _this.createSlide(html,slideClassList,el).prepend()}}
_this.insertSlideAfter=function(index,html,slideClassList,el){if(typeof index==='undefined')return false;if(html.nodeType){return _this._extendSwiperSlide(html).insertAfter(index);}
else{return _this.createSlide(html,slideClassList,el).insertAfter(index);}}
_this.removeSlide=function(index){if(_this.slides[index]){if(params.loop){if(!_this.slides[index+_this.loopedSlides])return false;_this.slides[index+_this.loopedSlides].remove();_this.removeLoopedSlides();_this.calcSlides();_this.createLoop();}
else _this.slides[index].remove();return true;}
else return false;}
_this.removeLastSlide=function(){if(_this.slides.length>0){if(params.loop){_this.slides[_this.slides.length-1-_this.loopedSlides].remove();_this.removeLoopedSlides();_this.calcSlides();_this.createLoop();}
else _this.slides[(_this.slides.length-1)].remove();return true;}
else{return false;}}
_this.removeAllSlides=function(){for(var i=_this.slides.length-1;i>=0;i--){_this.slides[i].remove()}}
_this.getSlide=function(index){return _this.slides[index]}
_this.getLastSlide=function(){return _this.slides[_this.slides.length-1]}
_this.getFirstSlide=function(){return _this.slides[0]}
_this.activeSlide=function(){return _this.slides[_this.activeIndex]}
var _plugins=[];for(var plugin in _this.plugins){if(params[plugin]){var p=_this.plugins[plugin](_this,params[plugin]);if(p)_plugins.push(p);}}
_this.callPlugins=function(method,args){if(!args)args={}
for(var i=0;i<_plugins.length;i++){if(method in _plugins[i]){_plugins[i][method](args);}}}
if(_this.browser.ie10&&!params.onlyExternal){if(isH)_this.wrapper.classList.add('swiper-wp8-horizontal');else _this.wrapper.classList.add('swiper-wp8-vertical');}
if(params.freeMode){_this.container.className+=' swiper-free-mode';}
_this.initialized=false;_this.init=function(force,forceCalcSlides){var _width=_this.h.getWidth(_this.container);var _height=_this.h.getHeight(_this.container);if(_width===_this.width&&_height===_this.height&&!force)return;_this.width=_width;_this.height=_height;containerSize=isH?_width:_height;var wrapper=_this.wrapper;if(force){_this.calcSlides(forceCalcSlides);}
if(params.slidesPerView==='auto'){var slidesWidth=0;var slidesHeight=0;if(params.slidesOffset>0){wrapper.style.paddingLeft='';wrapper.style.paddingRight='';wrapper.style.paddingTop='';wrapper.style.paddingBottom='';}
wrapper.style.width='';wrapper.style.height='';if(params.offsetPxBefore>0){if(isH)_this.wrapperLeft=params.offsetPxBefore;else _this.wrapperTop=params.offsetPxBefore;}
if(params.offsetPxAfter>0){if(isH)_this.wrapperRight=params.offsetPxAfter;else _this.wrapperBottom=params.offsetPxAfter;}
if(params.centeredSlides){if(isH){_this.wrapperLeft=(containerSize-this.slides[0].getWidth(true))/2;_this.wrapperRight=(containerSize-_this.slides[_this.slides.length-1].getWidth(true))/2;}
else{_this.wrapperTop=(containerSize-_this.slides[0].getHeight(true))/2;_this.wrapperBottom=(containerSize-_this.slides[_this.slides.length-1].getHeight(true))/2;}}
if(isH){if(_this.wrapperLeft>=0)wrapper.style.paddingLeft=_this.wrapperLeft+'px';if(_this.wrapperRight>=0)wrapper.style.paddingRight=_this.wrapperRight+'px';}
else{if(_this.wrapperTop>=0)wrapper.style.paddingTop=_this.wrapperTop+'px';if(_this.wrapperBottom>=0)wrapper.style.paddingBottom=_this.wrapperBottom+'px';}
var slideLeft=0;var centeredSlideLeft=0;_this.snapGrid=[];_this.slidesGrid=[];var slideMaxHeight=0;for(var i=0;i<_this.slides.length;i++){var slideWidth=_this.slides[i].getWidth(true);var slideHeight=_this.slides[i].getHeight(true);if(params.calculateHeight){slideMaxHeight=Math.max(slideMaxHeight,slideHeight)}
var _slideSize=isH?slideWidth:slideHeight;if(params.centeredSlides){var nextSlideWidth=i===_this.slides.length-1?0:_this.slides[i+1].getWidth(true);var nextSlideHeight=i===_this.slides.length-1?0:_this.slides[i+1].getHeight(true);var nextSlideSize=isH?nextSlideWidth:nextSlideHeight;if(_slideSize>containerSize){for(var j=0;j<=Math.floor(_slideSize/(containerSize+_this.wrapperLeft));j++){if(j===0)_this.snapGrid.push(slideLeft+_this.wrapperLeft);else _this.snapGrid.push(slideLeft+_this.wrapperLeft+containerSize*j);}
_this.slidesGrid.push(slideLeft+_this.wrapperLeft);}
else{_this.snapGrid.push(centeredSlideLeft);_this.slidesGrid.push(centeredSlideLeft);}
centeredSlideLeft+=_slideSize/2+nextSlideSize/2;}
else{if(_slideSize>containerSize){for(var j=0;j<=Math.floor(_slideSize/containerSize);j++){_this.snapGrid.push(slideLeft+containerSize*j);}}
else{_this.snapGrid.push(slideLeft);}
_this.slidesGrid.push(slideLeft);}
slideLeft+=_slideSize;slidesWidth+=slideWidth;slidesHeight+=slideHeight;}
if(params.calculateHeight)_this.height=slideMaxHeight;if(isH){wrapperSize=slidesWidth+_this.wrapperRight+_this.wrapperLeft;wrapper.style.width=(slidesWidth)+'px';wrapper.style.height=(_this.height)+'px';}
else{wrapperSize=slidesHeight+_this.wrapperTop+_this.wrapperBottom;wrapper.style.width=(_this.width)+'px';wrapper.style.height=(slidesHeight)+'px';}}
else if(params.scrollContainer){wrapper.style.width='';wrapper.style.height='';var wrapperWidth=_this.slides[0].getWidth(true);var wrapperHeight=_this.slides[0].getHeight(true);wrapperSize=isH?wrapperWidth:wrapperHeight;wrapper.style.width=wrapperWidth+'px';wrapper.style.height=wrapperHeight+'px';slideSize=isH?wrapperWidth:wrapperHeight;}
else{if(params.calculateHeight){var slideMaxHeight=0;var wrapperHeight=0;if(!isH)_this.container.style.height='';wrapper.style.height='';for(var i=0;i<_this.slides.length;i++){_this.slides[i].style.height='';slideMaxHeight=Math.max(_this.slides[i].getHeight(true),slideMaxHeight);if(!isH)wrapperHeight+=_this.slides[i].getHeight(true);}
var slideHeight=slideMaxHeight;if(isH)var wrapperHeight=slideHeight;containerSize=_this.height=slideHeight;if(!isH)_this.container.style.height=containerSize+'px';}
else{var slideHeight=isH?_this.height:_this.height/params.slidesPerView;var wrapperHeight=isH?_this.height:_this.slides.length*slideHeight;}
var slideWidth=isH?_this.width/params.slidesPerView:_this.width;var wrapperWidth=isH?_this.slides.length*slideWidth:_this.width;slideSize=isH?slideWidth:slideHeight;if(params.offsetSlidesBefore>0){if(isH)_this.wrapperLeft=slideSize*params.offsetSlidesBefore;else _this.wrapperTop=slideSize*params.offsetSlidesBefore;}
if(params.offsetSlidesAfter>0){if(isH)_this.wrapperRight=slideSize*params.offsetSlidesAfter;else _this.wrapperBottom=slideSize*params.offsetSlidesAfter;}
if(params.offsetPxBefore>0){if(isH)_this.wrapperLeft=params.offsetPxBefore;else _this.wrapperTop=params.offsetPxBefore;}
if(params.offsetPxAfter>0){if(isH)_this.wrapperRight=params.offsetPxAfter;else _this.wrapperBottom=params.offsetPxAfter;}
if(params.centeredSlides){if(isH){_this.wrapperLeft=(containerSize-slideSize)/2;_this.wrapperRight=(containerSize-slideSize)/2;}
else{_this.wrapperTop=(containerSize-slideSize)/2;_this.wrapperBottom=(containerSize-slideSize)/2;}}
if(isH){if(_this.wrapperLeft>0)wrapper.style.paddingLeft=_this.wrapperLeft+'px';if(_this.wrapperRight>0)wrapper.style.paddingRight=_this.wrapperRight+'px';}
else{if(_this.wrapperTop>0)wrapper.style.paddingTop=_this.wrapperTop+'px';if(_this.wrapperBottom>0)wrapper.style.paddingBottom=_this.wrapperBottom+'px';}
wrapperSize=isH?wrapperWidth+_this.wrapperRight+_this.wrapperLeft:wrapperHeight+_this.wrapperTop+_this.wrapperBottom;wrapper.style.width=wrapperWidth+'px';wrapper.style.height=wrapperHeight+'px';var slideLeft=0;_this.snapGrid=[];_this.slidesGrid=[];for(var i=0;i<_this.slides.length;i++){_this.snapGrid.push(slideLeft);_this.slidesGrid.push(slideLeft);slideLeft+=slideSize;_this.slides[i].style.width=slideWidth+'px';_this.slides[i].style.height=slideHeight+'px';}}
if(!_this.initialized)_this.callPlugins('onFirstInit');else _this.callPlugins('onInit');_this.initialized=true;}
_this.reInit=function(forceCalcSlides){_this.init(true,forceCalcSlides);}
_this.resizeFix=function(reInit){_this.callPlugins('beforeResizeFix');_this.init(params.resizeReInit||reInit);if(!params.freeMode){if(params.loop)_this.swipeTo(_this.activeLoopIndex,0,false);else _this.swipeTo(_this.activeIndex,0,false);}
else{var pos=isH?_this.getWrapperTranslate('x'):_this.getWrapperTranslate('y');if(pos<-maxWrapperPosition()){var x=isH?-maxWrapperPosition():0;var y=isH?0:-maxWrapperPosition();_this.setWrapperTransition(0);_this.setWrapperTranslate(x,y,0);}}
_this.callPlugins('afterResizeFix');}
function maxWrapperPosition(){var a=(wrapperSize-containerSize);if(params.freeMode){a=wrapperSize-containerSize;}
if(params.slidesPerView>_this.slides.length)a=0;if(a<0)a=0;return a;}
function minWrapperPosition(){var a=0;return a;}
function initEvents(){if(!_this.browser.ie10){if(_this.support.touch){_this.h.addEventListener(_this.wrapper,'touchstart',onTouchStart,false);_this.h.addEventListener(_this.wrapper,'touchmove',onTouchMove,false);_this.h.addEventListener(_this.wrapper,'touchend',onTouchEnd,false);}
if(params.simulateTouch){_this.h.addEventListener(_this.wrapper,'mousedown',onTouchStart,false);_this.h.addEventListener(document,'mousemove',onTouchMove,false);_this.h.addEventListener(document,'mouseup',onTouchEnd,false);}}
else{_this.h.addEventListener(_this.wrapper,_this.touchEvents.touchStart,onTouchStart,false);_this.h.addEventListener(document,_this.touchEvents.touchMove,onTouchMove,false);_this.h.addEventListener(document,_this.touchEvents.touchEnd,onTouchEnd,false);}
if(params.autoResize){_this.h.addEventListener(window,'resize',_this.resizeFix,false);}
addSlideEvents();_this._wheelEvent=false;if(params.mousewheelControl){if(document.onmousewheel!==undefined){_this._wheelEvent="mousewheel";}
try{WheelEvent("wheel");_this._wheelEvent="wheel";}catch(e){}
if(!_this._wheelEvent){_this._wheelEvent="DOMMouseScroll";}
if(_this._wheelEvent){_this.h.addEventListener(_this.container,_this._wheelEvent,handleMousewheel,false);}}
if(params.keyboardControl){_this.h.addEventListener(document,'keydown',handleKeyboardKeys,false);}
if(params.updateOnImagesReady){if(document.querySelectorAll)_this.imagesToLoad=_this.container.querySelectorAll('img');else if(window.jQuery)_this.imagesToLoad=$$(_this.container).find('img');for(var i=0;i<_this.imagesToLoad.length;i++){_loadImage(_this.imagesToLoad[i].getAttribute('src'))}}
function _loadImage(src){var image=new Image();image.onload=function(){_this.imagesLoaded++;if(_this.imagesLoaded==_this.imagesToLoad.length){_this.reInit();if(params.onImagesReady)params.onImagesReady(_this);}}
image.src=src;}}
_this.destroy=function(removeResizeFix){if(!_this.browser.ie10){if(_this.support.touch){_this.h.removeEventListener(_this.wrapper,'touchstart',onTouchStart,false);_this.h.removeEventListener(_this.wrapper,'touchmove',onTouchMove,false);_this.h.removeEventListener(_this.wrapper,'touchend',onTouchEnd,false);}
if(params.simulateTouch){_this.h.removeEventListener(_this.wrapper,'mousedown',onTouchStart,false);_this.h.removeEventListener(document,'mousemove',onTouchMove,false);_this.h.removeEventListener(document,'mouseup',onTouchEnd,false);}}
else{_this.h.removeEventListener(_this.wrapper,_this.touchEvents.touchStart,onTouchStart,false);_this.h.removeEventListener(document,_this.touchEvents.touchMove,onTouchMove,false);_this.h.removeEventListener(document,_this.touchEvents.touchEnd,onTouchEnd,false);}
if(params.autoResize){_this.h.removeEventListener(window,'resize',_this.resizeFix,false);}
removeSlideEvents();if(params.paginationClickable){removePaginationEvents();}
if(params.mousewheelControl&&_this._wheelEvent){_this.h.removeEventListener(_this.container,_this._wheelEvent,handleMousewheel,false);}
if(params.keyboardControl){_this.h.removeEventListener(document,'keydown',handleKeyboardKeys,false);}
if(params.autoplay){_this.stopAutoplay();}
_this.callPlugins('onDestroy');}
function addSlideEvents(){if(params.preventLinks){var links=[];if(document.querySelectorAll){links=_this.container.querySelectorAll('a');}
else if(window.jQuery){links=$$(_this.container).find('a');}
for(var i=0;i<links.length;i++){_this.h.addEventListener(links[i],'click',preventClick,false);}}
if(params.releaseFormElements){var formElements=document.querySelectorAll?_this.container.querySelectorAll('input, textarea, select'):$$(_this.container).find('input, textarea, select');for(var i=0;i<formElements.length;i++){_this.h.addEventListener(formElements[i],_this.touchEvents.touchStart,releaseForms,true);}}
if(params.onSlideClick){for(var i=0;i<_this.slides.length;i++){_this.h.addEventListener(_this.slides[i],'click',slideClick,false);}}
if(params.onSlideTouch){for(var i=0;i<_this.slides.length;i++){_this.h.addEventListener(_this.slides[i],_this.touchEvents.touchStart,slideTouch,false);}}}
function removeSlideEvents(){if(params.onSlideClick){for(var i=0;i<_this.slides.length;i++){_this.h.removeEventListener(_this.slides[i],'click',slideClick,false);}}
if(params.onSlideTouch){for(var i=0;i<_this.slides.length;i++){_this.h.removeEventListener(_this.slides[i],_this.touchEvents.touchStart,slideTouch,false);}}
if(params.releaseFormElements){var formElements=document.querySelectorAll?_this.container.querySelectorAll('input, textarea, select'):$$(_this.container).find('input, textarea, select');for(var i=0;i<formElements.length;i++){_this.h.removeEventListener(formElements[i],_this.touchEvents.touchStart,releaseForms,true);}}
if(params.preventLinks){var links=[];if(document.querySelectorAll){links=_this.container.querySelectorAll('a');}
else if(window.jQuery){links=$$(_this.container).find('a');}
for(var i=0;i<links.length;i++){_this.h.removeEventListener(links[i],'click',preventClick,false);}}}
function handleKeyboardKeys(e){var kc=e.keyCode||e.charCode;if(kc==37||kc==39||kc==38||kc==40){var inView=false;var swiperOffset=_this.h.getOffset(_this.container);var scrollLeft=_this.h.windowScroll().left;var scrollTop=_this.h.windowScroll().top;var windowWidth=_this.h.windowWidth();var windowHeight=_this.h.windowHeight();var swiperCoord=[[swiperOffset.left,swiperOffset.top],[swiperOffset.left+_this.width,swiperOffset.top],[swiperOffset.left,swiperOffset.top+_this.height],[swiperOffset.left+_this.width,swiperOffset.top+_this.height]]
for(var i=0;i<swiperCoord.length;i++){var point=swiperCoord[i];if(point[0]>=scrollLeft&&point[0]<=scrollLeft+windowWidth&&point[1]>=scrollTop&&point[1]<=scrollTop+windowHeight){inView=true;}}
if(!inView)return;}
if(isH){if(kc==37||kc==39){if(e.preventDefault)e.preventDefault();else e.returnValue=false;}
if(kc==39)_this.swipeNext();if(kc==37)_this.swipePrev();}
else{if(kc==38||kc==40){if(e.preventDefault)e.preventDefault();else e.returnValue=false;}
if(kc==40)_this.swipeNext();if(kc==38)_this.swipePrev();}}
function handleMousewheel(e){var we=_this._wheelEvent;var delta;if(e.detail)delta=-e.detail;else if(we=='mousewheel')delta=e.wheelDelta;else if(we=='DOMMouseScroll')delta=-e.detail;else if(we=='wheel'){delta=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY;}
if(!params.freeMode){if(delta<0)_this.swipeNext();else _this.swipePrev();}
else{var currentTransform=isH?_this.getWrapperTranslate('x'):_this.getWrapperTranslate('y');var x,y;if(isH){x=_this.getWrapperTranslate('x')+delta;y=_this.getWrapperTranslate('y');if(x>0)x=0;if(x<-maxWrapperPosition())x=-maxWrapperPosition();}
else{x=_this.getWrapperTranslate('x');y=_this.getWrapperTranslate('y')+delta;if(y>0)y=0;if(y<-maxWrapperPosition())y=-maxWrapperPosition();}
_this.setWrapperTransition(0);_this.setWrapperTranslate(x,y,0);}
if(params.autoplay)_this.stopAutoplay();if(e.preventDefault)e.preventDefault();else e.returnValue=false;return false;}
if(params.grabCursor){_this.container.style.cursor='move';_this.container.style.cursor='grab';_this.container.style.cursor='-moz-grab';_this.container.style.cursor='-webkit-grab';}
_this.allowSlideClick=true;function slideClick(e){if(_this.allowSlideClick){_this.clickedSlide=this;_this.clickedSlideIndex=_this.slides.indexOf(this);params.onSlideClick(_this);}}
function slideTouch(e){_this.clickedSlide=this;_this.clickedSlideIndex=_this.slides.indexOf(this);params.onSlideTouch(_this);}
_this.allowLinks=true;function preventClick(e){if(!_this.allowLinks){if(e.preventDefault)e.preventDefault();else e.returnValue=false;return false;}}
function releaseForms(e){if(e.stopPropagation)e.stopPropagation();else e.returnValue=false;return false;}
var isTouchEvent=false;var allowThresholdMove;var allowMomentumBounce=true;function onTouchStart(event){if(params.preventLinks)_this.allowLinks=true;if(_this.isTouched||params.onlyExternal){return false;}
if(params.noSwiping&&event.target&&event.target.className&&event.target.className.indexOf(params.noSwipingClass)>-1)return false;allowMomentumBounce=false;_this.isTouched=true;isTouchEvent=event.type=='touchstart';if(!isTouchEvent||event.targetTouches.length==1){if(params.loop)_this.fixLoop();_this.callPlugins('onTouchStartBegin');if(!isTouchEvent){if(event.preventDefault)event.preventDefault();else event.returnValue=false;}
var pageX=isTouchEvent?event.targetTouches[0].pageX:(event.pageX||event.clientX);var pageY=isTouchEvent?event.targetTouches[0].pageY:(event.pageY||event.clientY);_this.touches.startX=_this.touches.currentX=pageX;_this.touches.startY=_this.touches.currentY=pageY;_this.touches.start=_this.touches.current=isH?pageX:pageY;_this.setWrapperTransition(0);_this.positions.start=_this.positions.current=isH?_this.getWrapperTranslate('x'):_this.getWrapperTranslate('y');if(isH){_this.setWrapperTranslate(_this.positions.start,0,0);}
else{_this.setWrapperTranslate(0,_this.positions.start,0);}
_this.times.start=(new Date()).getTime();isScrolling=undefined;if(params.moveStartThreshold>0)allowThresholdMove=false;if(params.onTouchStart)params.onTouchStart(_this);_this.callPlugins('onTouchStartEnd');}}
var velocityPrevPosition,velocityPrevTime;function onTouchMove(event){if(!_this.isTouched||params.onlyExternal)return;if(isTouchEvent&&event.type=='mousemove')return;var pageX=isTouchEvent?event.targetTouches[0].pageX:(event.pageX||event.clientX);var pageY=isTouchEvent?event.targetTouches[0].pageY:(event.pageY||event.clientY);if(typeof isScrolling==='undefined'&&isH){isScrolling=!!(isScrolling||Math.abs(pageY-_this.touches.startY)>Math.abs(pageX-_this.touches.startX));}
if(typeof isScrolling==='undefined'&&!isH){isScrolling=!!(isScrolling||Math.abs(pageY-_this.touches.startY)<Math.abs(pageX-_this.touches.startX));}
if(isScrolling){_this.isTouched=false;return}
if(event.assignedToSwiper){_this.isTouched=false;return}
event.assignedToSwiper=true;_this.isMoved=true;if(params.preventLinks){_this.allowLinks=false;}
if(params.onSlideClick){_this.allowSlideClick=false;}
if(params.autoplay){_this.stopAutoplay();}
if(!isTouchEvent||event.touches.length==1){_this.callPlugins('onTouchMoveStart');if(event.preventDefault)event.preventDefault();else event.returnValue=false;_this.touches.current=isH?pageX:pageY;_this.positions.current=(_this.touches.current-_this.touches.start)*params.touchRatio+_this.positions.start;if(_this.positions.current>0&&params.onResistanceBefore){params.onResistanceBefore(_this,_this.positions.current);}
if(_this.positions.current<-maxWrapperPosition()&&params.onResistanceBefore){params.onResistanceAfter(_this,Math.abs(_this.positions.current+maxWrapperPosition()));}
if(params.resistance&&params.resistance!='100%'){if(_this.positions.current>0){var resistance=1-_this.positions.current/containerSize/2;if(resistance<0.5)
_this.positions.current=(containerSize/2);else
_this.positions.current=_this.positions.current*resistance;}
if(_this.positions.current<-maxWrapperPosition()){var diff=(_this.touches.current-_this.touches.start)*params.touchRatio+(maxWrapperPosition()+_this.positions.start);var resistance=(containerSize+diff)/(containerSize);var newPos=_this.positions.current-diff*(1-resistance)/2;var stopPos=-maxWrapperPosition()-containerSize/2;if(newPos<stopPos||resistance<=0)
_this.positions.current=stopPos;else
_this.positions.current=newPos;}}
if(params.resistance&&params.resistance=='100%'){if(_this.positions.current>0&&!(params.freeMode&&!params.freeModeFluid)){_this.positions.current=0;}
if((_this.positions.current)<-maxWrapperPosition()&&!(params.freeMode&&!params.freeModeFluid)){_this.positions.current=-maxWrapperPosition();}}
if(!params.followFinger)return
if(!params.moveStartThreshold){if(isH)_this.setWrapperTranslate(_this.positions.current,0,0);else _this.setWrapperTranslate(0,_this.positions.current,0);}
else{if(Math.abs(_this.touches.current-_this.touches.start)>params.moveStartThreshold||allowThresholdMove){allowThresholdMove=true;if(isH)_this.setWrapperTranslate(_this.positions.current,0,0);else _this.setWrapperTranslate(0,_this.positions.current,0);}
else{_this.positions.current=_this.positions.start;}}
if(params.freeMode||params.watchActiveIndex){_this.updateActiveSlide(_this.positions.current);}
if(params.grabCursor){_this.container.style.cursor='move';_this.container.style.cursor='grabbing';_this.container.style.cursor='-moz-grabbin';_this.container.style.cursor='-webkit-grabbing';}
if(!velocityPrevPosition)velocityPrevPosition=_this.touches.current;if(!velocityPrevTime)velocityPrevTime=(new Date).getTime();_this.velocity=(_this.touches.current-velocityPrevPosition)/((new Date).getTime()-velocityPrevTime)/2;if(Math.abs(_this.touches.current-velocityPrevPosition)<2)_this.velocity=0;velocityPrevPosition=_this.touches.current;velocityPrevTime=(new Date).getTime();_this.callPlugins('onTouchMoveEnd');if(params.onTouchMove)params.onTouchMove(_this);return false;}}
function onTouchEnd(event){if(isScrolling){_this.swipeReset();}
if(params.onlyExternal||!_this.isTouched)return;_this.isTouched=false
if(params.grabCursor){_this.container.style.cursor='move';_this.container.style.cursor='grab';_this.container.style.cursor='-moz-grab';_this.container.style.cursor='-webkit-grab';}
if(!_this.positions.current&&_this.positions.current!==0){_this.positions.current=_this.positions.start}
if(params.followFinger){if(isH)_this.setWrapperTranslate(_this.positions.current,0,0)
else _this.setWrapperTranslate(0,_this.positions.current,0)}
_this.times.end=(new Date()).getTime();_this.touches.diff=_this.touches.current-_this.touches.start
_this.touches.abs=Math.abs(_this.touches.diff)
_this.positions.diff=_this.positions.current-_this.positions.start
_this.positions.abs=Math.abs(_this.positions.diff)
var diff=_this.positions.diff;var diffAbs=_this.positions.abs;var timeDiff=_this.times.end-_this.times.start
if(diffAbs<5&&(timeDiff)<300&&_this.allowLinks==false){if(!params.freeMode&&diffAbs!=0)_this.swipeReset()
if(params.preventLinks){_this.allowLinks=true;}
if(params.onSlideClick){_this.allowSlideClick=true;}}
setTimeout(function(){if(params.preventLinks){_this.allowLinks=true;}
if(params.onSlideClick){_this.allowSlideClick=true;}},100)
if(!_this.isMoved){_this.isMoved=false;if(params.onTouchEnd)params.onTouchEnd(_this)
_this.callPlugins('onTouchEnd');return;}
_this.isMoved=false;var maxPosition=maxWrapperPosition();if(_this.positions.current>0){_this.swipeReset()
if(params.onTouchEnd)params.onTouchEnd(_this)
_this.callPlugins('onTouchEnd');return;}
if(_this.positions.current<-maxPosition){_this.swipeReset()
if(params.onTouchEnd)params.onTouchEnd(_this)
_this.callPlugins('onTouchEnd');return;}
if(params.freeMode){if(params.freeModeFluid){var momentumDuration=1000*params.momentumRatio;var momentumDistance=_this.velocity*momentumDuration;var newPosition=_this.positions.current+momentumDistance
var doBounce=false;var afterBouncePosition;var bounceAmount=Math.abs(_this.velocity)*20*params.momentumBounceRatio;if(newPosition<-maxPosition){if(params.momentumBounce&&_this.support.transitions){if(newPosition+maxPosition<-bounceAmount)newPosition=-maxPosition-bounceAmount;afterBouncePosition=-maxPosition;doBounce=true;allowMomentumBounce=true;}
else newPosition=-maxPosition;}
if(newPosition>0){if(params.momentumBounce&&_this.support.transitions){if(newPosition>bounceAmount)newPosition=bounceAmount;afterBouncePosition=0
doBounce=true;allowMomentumBounce=true;}
else newPosition=0;}
if(_this.velocity!=0)momentumDuration=Math.abs((newPosition-_this.positions.current)/_this.velocity)
if(isH)_this.setWrapperTranslate(newPosition,0,0);else _this.setWrapperTranslate(0,newPosition,0);_this.setWrapperTransition(momentumDuration);if(params.momentumBounce&&doBounce){_this.wrapperTransitionEnd(function(){if(!allowMomentumBounce)return;if(params.onMomentumBounce)params.onMomentumBounce(_this);if(isH)_this.setWrapperTranslate(afterBouncePosition,0,0);else _this.setWrapperTranslate(0,afterBouncePosition,0);_this.setWrapperTransition(300);})}
_this.updateActiveSlide(newPosition)}
if(!params.freeModeFluid||timeDiff>=300)_this.updateActiveSlide(_this.positions.current)
if(params.onTouchEnd)params.onTouchEnd(_this)
_this.callPlugins('onTouchEnd');return;}
direction=diff<0?"toNext":"toPrev"
if(direction=="toNext"&&(timeDiff<=300)){if(diffAbs<30||!params.shortSwipes)_this.swipeReset()
else _this.swipeNext(true);}
if(direction=="toPrev"&&(timeDiff<=300)){if(diffAbs<30||!params.shortSwipes)_this.swipeReset()
else _this.swipePrev(true);}
var targetSlideSize=0;if(params.slidesPerView=='auto'){var currentPosition=Math.abs(isH?_this.getWrapperTranslate('x'):_this.getWrapperTranslate('y'));var slidesOffset=0;var _slideSize;for(var i=0;i<_this.slides.length;i++){_slideSize=isH?_this.slides[i].getWidth(true):_this.slides[i].getHeight(true);slidesOffset+=_slideSize;if(slidesOffset>currentPosition){targetSlideSize=_slideSize;break;}}
if(targetSlideSize>containerSize)targetSlideSize=containerSize;}
else{targetSlideSize=slideSize*params.slidesPerView;}
if(direction=="toNext"&&(timeDiff>300)){if(diffAbs>=targetSlideSize*0.5){_this.swipeNext(true)}
else{_this.swipeReset()}}
if(direction=="toPrev"&&(timeDiff>300)){if(diffAbs>=targetSlideSize*0.5){_this.swipePrev(true);}
else{_this.swipeReset()}}
if(params.onTouchEnd)params.onTouchEnd(_this)
_this.callPlugins('onTouchEnd');}
_this.swipeNext=function(internal){if(!internal&&params.loop)_this.fixLoop();_this.callPlugins('onSwipeNext');var currentPosition=isH?_this.getWrapperTranslate('x'):_this.getWrapperTranslate('y');var newPosition=currentPosition;if(params.slidesPerView=='auto'){for(var i=0;i<_this.snapGrid.length;i++){if(-currentPosition>=_this.snapGrid[i]&&-currentPosition<_this.snapGrid[i+1]){newPosition=-_this.snapGrid[i+1]
break;}}}
else{var groupSize=slideSize*params.slidesPerGroup;newPosition=-(Math.floor(Math.abs(currentPosition)/Math.floor(groupSize))*groupSize+groupSize);}
if(newPosition<-maxWrapperPosition()){newPosition=-maxWrapperPosition()};if(newPosition==currentPosition)return false;swipeToPosition(newPosition,'next');return true}
_this.swipePrev=function(internal){if(!internal&&params.loop)_this.fixLoop();if(!internal&&params.autoplay)_this.stopAutoplay();_this.callPlugins('onSwipePrev');var currentPosition=Math.ceil(isH?_this.getWrapperTranslate('x'):_this.getWrapperTranslate('y'));var newPosition;if(params.slidesPerView=='auto'){newPosition=0;for(var i=1;i<_this.snapGrid.length;i++){if(-currentPosition==_this.snapGrid[i]){newPosition=-_this.snapGrid[i-1]
break;}
if(-currentPosition>_this.snapGrid[i]&&-currentPosition<_this.snapGrid[i+1]){newPosition=-_this.snapGrid[i]
break;}}}
else{var groupSize=slideSize*params.slidesPerGroup;newPosition=-(Math.ceil(-currentPosition/groupSize)-1)*groupSize;}
if(newPosition>0)newPosition=0;if(newPosition==currentPosition)return false;swipeToPosition(newPosition,'prev');return true;}
_this.swipeReset=function(){_this.callPlugins('onSwipeReset');var currentPosition=isH?_this.getWrapperTranslate('x'):_this.getWrapperTranslate('y');var groupSize=slideSize*params.slidesPerGroup;var newPosition;var maxPosition=-maxWrapperPosition();if(params.slidesPerView=='auto'){newPosition=0;for(var i=0;i<_this.snapGrid.length;i++){if(-currentPosition===_this.snapGrid[i])return;if(-currentPosition>=_this.snapGrid[i]&&-currentPosition<_this.snapGrid[i+1]){if(_this.positions.diff>0)newPosition=-_this.snapGrid[i+1]
else newPosition=-_this.snapGrid[i]
break;}}
if(-currentPosition>=_this.snapGrid[_this.snapGrid.length-1])newPosition=-_this.snapGrid[_this.snapGrid.length-1];if(currentPosition<=-maxWrapperPosition())newPosition=-maxWrapperPosition()}
else{newPosition=currentPosition<0?Math.round(currentPosition/groupSize)*groupSize:0}
if(params.scrollContainer){newPosition=currentPosition<0?currentPosition:0;}
if(newPosition<-maxWrapperPosition()){newPosition=-maxWrapperPosition()}
if(params.scrollContainer&&(containerSize>slideSize)){newPosition=0;}
if(newPosition==currentPosition)return false;swipeToPosition(newPosition,'reset');return true;}
_this.swipeTo=function(index,speed,runCallbacks){index=parseInt(index,10);_this.callPlugins('onSwipeTo',{index:index,speed:speed});if(params.loop)index=index+_this.loopedSlides;var currentPosition=isH?_this.getWrapperTranslate('x'):_this.getWrapperTranslate('y');if(index>(_this.slides.length-1))return;if(index<0)return;var newPosition
if(params.slidesPerView=='auto'){newPosition=-_this.slidesGrid[index];}
else{newPosition=-index*slideSize;}
if(newPosition<-maxWrapperPosition()){newPosition=-maxWrapperPosition();};if(newPosition==currentPosition)return false;runCallbacks=runCallbacks===false?false:true;swipeToPosition(newPosition,'to',{index:index,speed:speed,runCallbacks:runCallbacks});return true;}
function swipeToPosition(newPosition,action,toOptions){if(_this.support.transitions||!params.DOMAnimation){if(isH)_this.setWrapperTranslate(newPosition,0,0);else _this.setWrapperTranslate(0,newPosition,0);var speed=(action=='to'&&toOptions.speed>=0)?toOptions.speed:params.speed;_this.setWrapperTransition(speed);}
else{var currentPosition=isH?_this.getWrapperTranslate('x'):_this.getWrapperTranslate('y');var speed=(action=='to'&&toOptions.speed>=0)?toOptions.speed:params.speed;var animationStep=Math.ceil((newPosition-currentPosition)/speed*(1000/60));var direction=currentPosition>newPosition?'toNext':'toPrev';var condition=direction=='toNext'?currentPosition>newPosition:currentPosition<newPosition;if(_this._DOMAnimating)return;anim()}
function anim(){currentPosition+=animationStep;condition=direction=='toNext'?currentPosition>newPosition:currentPosition<newPosition;if(condition){if(isH)_this.setWrapperTranslate(Math.round(currentPosition),0)
else _this.setWrapperTranslate(0,Math.round(currentPosition))
_this._DOMAnimating=true
window.setTimeout(function(){anim()},1000/60)}
else{if(params.onSlideChangeEnd)params.onSlideChangeEnd(_this)
if(isH)_this.setWrapperTranslate(newPosition,0);else _this.setWrapperTranslate(0,newPosition);_this._DOMAnimating=false;}}
_this.updateActiveSlide(newPosition);if(params.onSlideNext&&action=='next'){params.onSlideNext(_this,newPosition)}
if(params.onSlidePrev&&action=='prev'){params.onSlidePrev(_this,newPosition)}
if(params.onSlideReset&&action=='reset'){params.onSlideReset(_this,newPosition)}
if(action=='next'||action=='prev'||(action=='to'&&toOptions.runCallbacks==true))
slideChangeCallbacks()}
_this._queueStartCallbacks=false;_this._queueEndCallbacks=false;function slideChangeCallbacks(){_this.callPlugins('onSlideChangeStart');if(params.onSlideChangeStart){if(params.queueStartCallbacks&&_this.support.transitions){if(_this._queueStartCallbacks)return;_this._queueStartCallbacks=true;params.onSlideChangeStart(_this)
_this.wrapperTransitionEnd(function(){_this._queueStartCallbacks=false;})}
else params.onSlideChangeStart(_this)}
if(params.onSlideChangeEnd){if(_this.support.transitions){if(params.queueEndCallbacks){if(_this._queueEndCallbacks)return;_this._queueEndCallbacks=true;_this.wrapperTransitionEnd(params.onSlideChangeEnd)}
else _this.wrapperTransitionEnd(params.onSlideChangeEnd)}
else{if(!params.DOMAnimation){setTimeout(function(){params.onSlideChangeEnd(_this)},10)}}}}
_this.updateActiveSlide=function(position){if(!_this.initialized)return;if(_this.slides.length==0)return;_this.previousIndex=_this.activeIndex;if(position>0)position=0;if(typeof position=='undefined')position=isH?_this.getWrapperTranslate('x'):_this.getWrapperTranslate('y');if(params.slidesPerView=='auto'){var slidesOffset=0;_this.activeIndex=_this.slidesGrid.indexOf(-position);if(_this.activeIndex<0){for(var i=0;i<_this.slidesGrid.length-1;i++){if(-position>_this.slidesGrid[i]&&-position<_this.slidesGrid[i+1]){break;}}
var leftDistance=Math.abs(_this.slidesGrid[i]+position)
var rightDistance=Math.abs(_this.slidesGrid[i+1]+position)
if(leftDistance<=rightDistance)_this.activeIndex=i;else _this.activeIndex=i+1;}}
else{if(params.visibilityFullFit)_this.activeIndex=Math.ceil(-position/slideSize);else _this.activeIndex=Math.round(-position/slideSize);}
if(_this.activeIndex==_this.slides.length)_this.activeIndex=_this.slides.length-1;if(_this.activeIndex<0)_this.activeIndex=0;if(!_this.slides[_this.activeIndex])return;_this.calcVisibleSlides(position);var activeClassRegexp=new RegExp("\\s*"+params.slideActiveClass);var inViewClassRegexp=new RegExp("\\s*"+params.slideVisibleClass);for(var i=0;i<_this.slides.length;i++){_this.slides[i].className=_this.slides[i].className.replace(activeClassRegexp,'').replace(inViewClassRegexp,'');if(_this.visibleSlides.indexOf(_this.slides[i])>=0){_this.slides[i].className+=' '+params.slideVisibleClass;}}
_this.slides[_this.activeIndex].className+=' '+params.slideActiveClass;if(params.loop){var ls=_this.loopedSlides;_this.activeLoopIndex=_this.activeIndex-ls;if(_this.activeLoopIndex>=_this.slides.length-ls*2){_this.activeLoopIndex=_this.slides.length-ls*2-_this.activeLoopIndex;}
if(_this.activeLoopIndex<0){_this.activeLoopIndex=_this.slides.length-ls*2+_this.activeLoopIndex;}}
else{_this.activeLoopIndex=_this.activeIndex;}
if(params.pagination){_this.updatePagination(position);}}
_this.createPagination=function(firstInit){if(params.paginationClickable&&_this.paginationButtons){removePaginationEvents();}
var paginationHTML="";var numOfSlides=_this.slides.length;var numOfButtons=numOfSlides;if(params.loop)numOfButtons-=_this.loopedSlides*2
for(var i=0;i<numOfButtons;i++){paginationHTML+='<'+params.paginationElement+' class="'+params.paginationElementClass+'"></'+params.paginationElement+'>'}
_this.paginationContainer=params.pagination.nodeType?params.pagination:$$(params.pagination)[0];_this.paginationContainer.innerHTML=paginationHTML;_this.paginationButtons=[]
if(document.querySelectorAll)
_this.paginationButtons=_this.paginationContainer.querySelectorAll('.'+params.paginationElementClass);else if(window.jQuery)
_this.paginationButtons=$$(_this.paginationContainer).find('.'+params.paginationElementClass);if(!firstInit)_this.updatePagination()
_this.callPlugins('onCreatePagination');if(params.paginationClickable){addPaginationEvents();}}
function removePaginationEvents(){var pagers=_this.paginationButtons;for(var i=0;i<pagers.length;i++){_this.h.removeEventListener(pagers[i],'click',paginationClick,false)}}
function addPaginationEvents(){var pagers=_this.paginationButtons;for(var i=0;i<pagers.length;i++){_this.h.addEventListener(pagers[i],'click',paginationClick,false)}}
function paginationClick(e){var index;var target=e.target||e.srcElement;var pagers=_this.paginationButtons;for(var i=0;i<pagers.length;i++){if(target===pagers[i])index=i;}
_this.swipeTo(index)}
_this.updatePagination=function(position){if(_this.slides.length<1)return;if(document.querySelectorAll)
var activePagers=_this.paginationContainer.querySelectorAll('.'+params.paginationActiveClass)
else if(window.jQuery)
var activePagers=$$(_this.paginationContainer).find('.'+params.paginationActiveClass);if(!activePagers)return
var pagers=_this.paginationButtons;for(var i=0;i<pagers.length;i++){pagers[i].className=params.paginationElementClass}
var indexOffset=params.loop?_this.loopedSlides:0;if(params.paginationAsRange){if(!_this.visibleSlides)_this.calcVisibleSlides(position)
var visibleIndexes=[];for(var i=0;i<_this.visibleSlides.length;i++){var visIndex=_this.slides.indexOf(_this.visibleSlides[i])-indexOffset
if(params.loop&&visIndex<0){visIndex=_this.slides.length-_this.loopedSlides*2+visIndex;}
if(params.loop&&visIndex>=_this.slides.length-_this.loopedSlides*2){visIndex=_this.slides.length-_this.loopedSlides*2-visIndex;visIndex=Math.abs(visIndex)}
visibleIndexes.push(visIndex)}
for(i=0;i<visibleIndexes.length;i++){if(pagers[visibleIndexes[i]])pagers[visibleIndexes[i]].className+=' '+params.paginationVisibleClass;}
if(params.loop){pagers[_this.activeLoopIndex].className+=' '+params.paginationActiveClass;}
else{pagers[_this.activeIndex].className+=' '+params.paginationActiveClass;}}
else{if(params.loop){pagers[_this.activeLoopIndex].className+=' '+params.paginationActiveClass+' '+params.paginationVisibleClass;}
else{pagers[_this.activeIndex].className+=' '+params.paginationActiveClass+' '+params.paginationVisibleClass;}}}
_this.calcVisibleSlides=function(position){var visibleSlides=[];var _slideLeft=0,_slideSize=0,_slideRight=0;if(isH&&_this.wrapperLeft>0)position=position+_this.wrapperLeft;if(!isH&&_this.wrapperTop>0)position=position+_this.wrapperTop;for(var i=0;i<_this.slides.length;i++){_slideLeft+=_slideSize;if(params.slidesPerView=='auto')
_slideSize=isH?_this.h.getWidth(_this.slides[i],true):_this.h.getHeight(_this.slides[i],true);else _slideSize=slideSize;_slideRight=_slideLeft+_slideSize;var isVisibile=false;if(params.visibilityFullFit){if(_slideLeft>=-position&&_slideRight<=-position+containerSize)isVisibile=true;if(_slideLeft<=-position&&_slideRight>=-position+containerSize)isVisibile=true;}
else{if(_slideRight>-position&&_slideRight<=((-position+containerSize)))isVisibile=true;if(_slideLeft>=-position&&_slideLeft<((-position+containerSize)))isVisibile=true;if(_slideLeft<-position&&_slideRight>((-position+containerSize)))isVisibile=true;}
if(isVisibile)visibleSlides.push(_this.slides[i])}
if(visibleSlides.length==0)visibleSlides=[_this.slides[_this.activeIndex]]
_this.visibleSlides=visibleSlides;}
var autoPlayInterval=undefined;_this.startAutoplay=function(){if(typeof autoPlayInterval!=='undefined')return false;if(params.autoplay&&!params.loop){autoPlayInterval=setInterval(function(){if(!_this.swipeNext(true))_this.swipeTo(0);},params.autoplay)}
if(params.autoplay&&params.loop){autoPlay=setInterval(function(){_this.swipeNext();},params.autoplay)}
_this.callPlugins('onAutoplayStart');}
_this.stopAutoplay=function(){if(autoPlayInterval)clearInterval(autoPlayInterval);autoPlayInterval=undefined;_this.callPlugins('onAutoplayStop');}
_this.loopCreated=false;_this.removeLoopedSlides=function(){if(_this.loopCreated){for(var i=0;i<_this.slides.length;i++){if(_this.slides[i].getData('looped')===true)_this.wrapper.removeChild(_this.slides[i]);}}}
_this.createLoop=function(){if(_this.slides.length==0)return;_this.loopedSlides=params.slidesPerView+params.loopAdditionalSlides;var slideFirstHTML='';var slideLastHTML='';for(var i=0;i<_this.loopedSlides;i++){slideFirstHTML+=_this.slides[i].outerHTML}
for(i=_this.slides.length-_this.loopedSlides;i<_this.slides.length;i++){slideLastHTML+=_this.slides[i].outerHTML}
wrapper.innerHTML=slideLastHTML+wrapper.innerHTML+slideFirstHTML;_this.loopCreated=true;_this.calcSlides();for(i=0;i<_this.slides.length;i++){if(i<_this.loopedSlides||i>=_this.slides.length-_this.loopedSlides)_this.slides[i].setData('looped',true);}
_this.callPlugins('onCreateLoop');}
_this.fixLoop=function(){if(_this.activeIndex<_this.loopedSlides){var newIndex=_this.slides.length-_this.loopedSlides*3+_this.activeIndex;_this.swipeTo(newIndex,0,false)}
else if(_this.activeIndex>_this.slides.length-params.slidesPerView*2){var newIndex=-_this.slides.length+_this.activeIndex+_this.loopedSlides
_this.swipeTo(newIndex,0,false)}}
_this.loadSlides=function(){var slidesHTML='';_this.activeLoaderIndex=0;var slides=params.loader.slides;var slidesToLoad=params.loader.loadAllSlides?slides.length:params.slidesPerView*(1+params.loader.surroundGroups);for(var i=0;i<slidesToLoad;i++){if(params.loader.slidesHTMLType=='outer')slidesHTML+=slides[i];else{slidesHTML+='<'+params.slideElement+' class="'+params.slideClass+'" data-swiperindex="'+i+'">'+slides[i]+'</'+params.slideElement+'>';}}
_this.wrapper.innerHTML=slidesHTML;_this.calcSlides(true);if(!params.loader.loadAllSlides){_this.wrapperTransitionEnd(_this.reloadSlides,true);}}
_this.reloadSlides=function(){var slides=params.loader.slides;var newActiveIndex=parseInt(_this.activeSlide().data('swiperindex'),10)
if(newActiveIndex<0||newActiveIndex>slides.length-1)return
_this.activeLoaderIndex=newActiveIndex;var firstIndex=Math.max(0,newActiveIndex-params.slidesPerView*params.loader.surroundGroups)
var lastIndex=Math.min(newActiveIndex+params.slidesPerView*(1+params.loader.surroundGroups)-1,slides.length-1)
if(newActiveIndex>0){var newTransform=-slideSize*(newActiveIndex-firstIndex)
if(isH)_this.setWrapperTranslate(newTransform,0,0)
else _this.setWrapperTranslate(0,newTransform,0)
_this.setWrapperTransition(0)}
if(params.loader.logic==='reload'){_this.wrapper.innerHTML='';var slidesHTML='';for(var i=firstIndex;i<=lastIndex;i++){slidesHTML+=params.loader.slidesHTMLType=='outer'?slides[i]:'<'+params.slideElement+' class="'+params.slideClass+'" data-swiperindex="'+i+'">'+slides[i]+'</'+params.slideElement+'>';}
_this.wrapper.innerHTML=slidesHTML;}
else{var minExistIndex=1000;var maxExistIndex=0;for(var i=0;i<_this.slides.length;i++){var index=_this.slides[i].data('swiperindex');if(index<firstIndex||index>lastIndex){_this.wrapper.removeChild(_this.slides[i]);}
else{minExistIndex=Math.min(index,minExistIndex)
maxExistIndex=Math.max(index,maxExistIndex)}}
for(var i=firstIndex;i<=lastIndex;i++){if(i<minExistIndex){var newSlide=document.createElement(params.slideElement);newSlide.className=params.slideClass;newSlide.setAttribute('data-swiperindex',i);newSlide.innerHTML=slides[i];_this.wrapper.insertBefore(newSlide,_this.wrapper.firstChild);}
if(i>maxExistIndex){var newSlide=document.createElement(params.slideElement);newSlide.className=params.slideClass;newSlide.setAttribute('data-swiperindex',i);newSlide.innerHTML=slides[i];_this.wrapper.appendChild(newSlide);}}}
_this.reInit(true);}
function makeSwiper(){_this.calcSlides();if(params.loader.slides.length>0&&_this.slides.length==0){_this.loadSlides();}
if(params.loop){_this.createLoop();}
_this.init();initEvents();if(params.pagination&&params.createPagination){_this.createPagination(true);}
if(params.loop||params.initialSlide>0){_this.swipeTo(params.initialSlide,0,false);}
else{_this.updateActiveSlide(0);}
if(params.autoplay){_this.startAutoplay();}}
makeSwiper();}
Swiper.prototype={plugins:{},wrapperTransitionEnd:function(callback,permanent){var a=this
var el=a.wrapper
var events=['webkitTransitionEnd','transitionend','oTransitionEnd','MSTransitionEnd','msTransitionEnd'];function fireCallBack(){callback(a)
if(a.params.queueEndCallbacks)a._queueEndCallbacks=false
if(!permanent){for(var i=0;i<events.length;i++){el.removeEventListener(events[i],fireCallBack,false)}}}
if(callback){for(var i=0;i<events.length;i++){el.addEventListener(events[i],fireCallBack,false)}}},getWrapperTranslate:function(axis){var el=this.wrapper
var matrix;var curTransform;if(window.WebKitCSSMatrix){var transformMatrix=new WebKitCSSMatrix(window.getComputedStyle(el,null).webkitTransform)
matrix=transformMatrix.toString().split(',');}
else{var transformMatrix=window.getComputedStyle(el,null).MozTransform||window.getComputedStyle(el,null).OTransform||window.getComputedStyle(el,null).MsTransform||window.getComputedStyle(el,null).msTransform||window.getComputedStyle(el,null).transform||window.getComputedStyle(el,null).getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,");matrix=transformMatrix.toString().split(',');}
if(this.params.useCSS3Transforms){if(axis=='x'){if(matrix.length==16)
curTransform=parseFloat(matrix[12])
else if(window.WebKitCSSMatrix)
curTransform=transformMatrix.m41
else
curTransform=parseFloat(matrix[4])}
if(axis=='y'){if(matrix.length==16)
curTransform=parseFloat(matrix[13])
else if(window.WebKitCSSMatrix)
curTransform=transformMatrix.m42
else
curTransform=parseFloat(matrix[5])}}
else{if(axis=='x')curTransform=parseFloat(el.style.left,10)||0
if(axis=='y')curTransform=parseFloat(el.style.top,10)||0}
return curTransform||0;},setWrapperTranslate:function(x,y,z){var es=this.wrapper.style
x=x||0;y=y||0;z=z||0;if(this.params.useCSS3Transforms){if(this.support.transforms3d){es.webkitTransform=es.MsTransform=es.msTransform=es.MozTransform=es.OTransform=es.transform='translate3d('+x+'px, '+y+'px, '+z+'px)'}
else{es.webkitTransform=es.MsTransform=es.msTransform=es.MozTransform=es.OTransform=es.transform='translate('+x+'px, '+y+'px)'
if(!this.support.transforms){es.left=x+'px'
es.top=y+'px'}}}
else{es.left=x+'px';es.top=y+'px';}
this.callPlugins('onSetWrapperTransform',{x:x,y:y,z:z})},setWrapperTransition:function(duration){var es=this.wrapper.style
es.webkitTransitionDuration=es.MsTransitionDuration=es.msTransitionDuration=es.MozTransitionDuration=es.OTransitionDuration=es.transitionDuration=duration/1000+'s';this.callPlugins('onSetWrapperTransition',{duration:duration})},h:{getWidth:function(el,outer){var width=window.getComputedStyle(el,null).getPropertyValue('width')
var returnWidth=parseFloat(width);if(isNaN(returnWidth)||width.indexOf('%')>0){returnWidth=el.offsetWidth-parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-left'))-parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-right'));}
if(outer)returnWidth+=parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-left'))+parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-right'))
return returnWidth;},getHeight:function(el,outer){if(outer)return el.offsetHeight;var height=window.getComputedStyle(el,null).getPropertyValue('height')
var returnHeight=parseFloat(height);if(isNaN(returnHeight)||height.indexOf('%')>0){returnHeight=el.offsetHeight-parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-top'))-parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-bottom'));}
if(outer)returnHeight+=parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-top'))+parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-bottom'))
return returnHeight;},getOffset:function(el){var box=el.getBoundingClientRect();var body=document.body;var clientTop=el.clientTop||body.clientTop||0;var clientLeft=el.clientLeft||body.clientLeft||0;var scrollTop=window.pageYOffset||el.scrollTop;var scrollLeft=window.pageXOffset||el.scrollLeft;if(document.documentElement&&!window.pageYOffset){scrollTop=document.documentElement.scrollTop;scrollLeft=document.documentElement.scrollLeft;}
return{top:box.top+scrollTop-clientTop,left:box.left+scrollLeft-clientLeft};},windowWidth:function(){if(window.innerWidth)return window.innerWidth
else if(document.documentElement&&document.documentElement.clientWidth)return document.documentElement.clientWidth;},windowHeight:function(){if(window.innerHeight)return window.innerHeight
else if(document.documentElement&&document.documentElement.clientHeight)return document.documentElement.clientHeight;},windowScroll:function(){var left=0,top=0;if(typeof pageYOffset!='undefined'){return{left:window.pageXOffset,top:window.pageYOffset}}
else if(document.documentElement){return{left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop}}},addEventListener:function(el,event,listener,useCapture){if(el.addEventListener){el.addEventListener(event,listener,useCapture)}
else if(el.attachEvent){el.attachEvent('on'+event,listener)}},removeEventListener:function(el,event,listener,useCapture){if(el.removeEventListener){el.removeEventListener(event,listener,useCapture)}
else if(el.detachEvent){el.detachEvent('on'+event,listener)}}},setTransform:function(el,transform){var es=el.style
es.webkitTransform=es.MsTransform=es.msTransform=es.MozTransform=es.OTransform=es.transform=transform},setTranslate:function(el,translate){var es=el.style
var pos={x:translate.x||0,y:translate.y||0,z:translate.z||0};var transformString=this.support.transforms3d?'translate3d('+(pos.x)+'px,'+(pos.y)+'px,'+(pos.z)+'px)':'translate('+(pos.x)+'px,'+(pos.y)+'px)';es.webkitTransform=es.MsTransform=es.msTransform=es.MozTransform=es.OTransform=es.transform=transformString;if(!this.support.transforms){es.left=pos.x+'px'
es.top=pos.y+'px'}},setTransition:function(el,duration){var es=el.style
es.webkitTransitionDuration=es.MsTransitionDuration=es.msTransitionDuration=es.MozTransitionDuration=es.OTransitionDuration=es.transitionDuration=duration+'ms';},support:{touch:(window.Modernizr&&Modernizr.touch===true)||(function(){return!!(("ontouchstart"in window)||window.DocumentTouch&&document instanceof DocumentTouch);})(),transforms3d:(window.Modernizr&&Modernizr.csstransforms3d===true)||(function(){var div=document.createElement('div');return("webkitPerspective"in div.style||"MozPerspective"in div.style||"OPerspective"in div.style||"MsPerspective"in div.style||"perspective"in div.style);})(),transforms:(window.Modernizr&&Modernizr.csstransforms===true)||(function(){var div=document.createElement('div').style
return('transform'in div)||('WebkitTransform'in div)||('MozTransform'in div)||('msTransform'in div)||('MsTransform'in div)||('OTransform'in div);})(),transitions:(window.Modernizr&&Modernizr.csstransitions===true)||(function(){var div=document.createElement('div').style
return('transition'in div)||('WebkitTransition'in div)||('MozTransition'in div)||('msTransition'in div)||('MsTransition'in div)||('OTransition'in div);})()},browser:{ie8:(function(){var rv=-1;if(navigator.appName=='Microsoft Internet Explorer'){var ua=navigator.userAgent;var re=new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");if(re.exec(ua)!=null)
rv=parseFloat(RegExp.$1);}
return rv!=-1&&rv<9;})(),ie10:window.navigator.msPointerEnabled}}
if(window.jQuery||window.Zepto){(function($){$.fn.swiper=function(params){var s=new Swiper($(this)[0],params)
$(this).data('swiper',s);return s}})(window.jQuery||window.Zepto)}
/*! end /app/merrick/themes/default/js/swiper.js*/

/*! start /app/merrick/themes/default/js/events.js*/
if(typeof Object.create!=="function"){Object.create=function(o){function F(){}F.prototype=o;return new F();};}
$.fn.exists=function()
{return this.length>0;};(function($){var methods={on:$.fn.on,bind:$.fn.bind};$.each(methods,function(k){$.fn[k]=function(){var args=[].slice.call(arguments),delay=args.pop(),fn=args.pop(),timer;args.push(function(){var self=this,arg=arguments;clearTimeout(timer);timer=setTimeout(function(){fn.apply(self,[].slice.call(arg));},delay);});return methods[k].apply(this,isNaN(delay)?arguments:args);};});}(jQuery));var fbl=false;var info=false;var warn=false;var debug=false;var timer=false;$(document).on('ready',function(event)
{timerStart(event.type,timer);init_ready(event);timerEnd(event.type,timer);})
$(window).on('load',function(event)
{timerStart(event.type,timer);init_load(event);timerEnd(event.type,timer);}).on('resize',function(event)
{init_resize(event);}).on('resizestart',function(event)
{init_resizeStart(event);}).on('resize',function(event)
{init_resizeStop(event);},250).on('scroll',function(event)
{init_scroll(event);}).on('scrollstart',function(event)
{init_scrollStart(event);}).on('scroll',function(event)
{init_scrollStop(event);},250);function init_load(event){};function init_resize(event){};function init_resizeStart(event){};function init_resizeStop(event){};function init_scroll(event){};function init_scrollStart(event){};function init_scrollStop(event){};function fbl(name,details,display)
{if(display)console.log(name,details);};function info(name,details,display)
{if(display)console.info(name,details);};function warn(name,details,display)
{if(display)console.warn(name,details);};function error(name,details)
{console.error(name,details);};function debug(name,details,display)
{if(display)console.debug(name,details);};function clear(display)
{if(display)console.clear();};function groupStart(name,display)
{if(display)console.groupCollapsed(name);};function groupEnd(name,display)
{if(display)console.groupEnd(name);};function timerStart(name,display)
{if(display)console.time(name);};function timerEnd(name,display)
{if(display)console.timeEnd(name);};
/*! end /app/merrick/themes/default/js/events.js*/

/*! start /app/merrick/themes/default/js/advertisement.wallpaper.js*/
$('.wallpaper-ad').on('adLoaded',function(event,params){wallpaper_config=$('#background_ad_unit');wallpaper_resize=function(){var
windowW=$(window).width(),windowH=$(window).height(),containerW=972,sideW=(windowW-containerW)/2;$('#ad_hug').height(windowH);$('#ad_hug_left').width(sideW);$('#ad_hug_right').width(sideW);}
wallpaper_load=function(){var bkgtype=wallpaper_config.hasClass('bg_ad_fixed')?'bg_ad_fixed':'bg_ad_scroll';var bkgad=$('img',wallpaper_config).attr('src')?$('img',wallpaper_config).attr('src'):false;var bkgcolor=$('img',wallpaper_config).attr('data-background')?$('img',wallpaper_config).attr('data-background'):'transparent';var link1=$('a',wallpaper_config).attr('href');var link2=$('a',wallpaper_config).next().attr('href');if(!bkgad||!link1||typeof link1=='undefined')return false;var background=bkgad?bkgcolor+' url('+bkgad+') top center no-repeat':bkgcolor;$('body').css('background',background);if(bkgtype=='bg_ad_scroll')
{$('body').css('background-attachment','scroll');}
else
{$('body').css('background-attachment','fixed');}
wallpaper_resize();$('#ad_hug > div').on('click',function(){var adUnit=$(".wallpaper-ad").data("ad-unit-id");var url=$(this).attr('id')=='ad_hug_left'?link1:link2;if(url==''||typeof url=='undefined')url=link1;if(url==''||typeof url=='undefined')url='#';window.open(url,'_blank');});}
if(wallpaper_config.length){wallpaper_load();}else{window.setTimeout(wallpaper_load,250);}
$(window).on('resize',wallpaper_resize);});
/*! end /app/merrick/themes/default/js/advertisement.wallpaper.js*/

/*! start /app/merrick/themes/default/js/advertisement.page-peel.js*/
$('.page-peel-ad').on('adLoaded',function(event,params){moveTRSmallOut=function(){document.getElementById('peel_small_tr').style.top='-1000px';document.getElementById('peel_big_tr').style.top='50px';$('.page-peel-ad').trigger('hoverOn');}
moveTRBigOut=function(){document.getElementById('peel_small_tr').style.top='50px';document.getElementById('peel_big_tr').style.top='-1000px';$('.page-peel-ad').trigger('hoverOff');}});
/*! end /app/merrick/themes/default/js/advertisement.page-peel.js*/

/*! start /app/merrick/themes/default/js/advertisement.welcome-ad.js*/
$('.welcome-ad').on('adLoaded',function(event,params){$('#ad_hug').addClass('shade');var close=$('<div></div>');close.addClass('welcome-ad-close icon-remove-circle');close.on('click',function(){$('.welcome-ad').removeClass('ad-loaded');$('#ad_hug').delay(800).removeClass('shade');$('.welcome-ad').delay(800).remove();});$(this).append(close);var closeText=$('<span>close advertisement</span>');closeText.addClass('welcome-ad-close-text').on('click',function(){$('.welcome-ad-close').click();});$(this).append(closeText);var welcomeAdTimeout=8000;if($('span[class^=\'time_\']').length>0){var value=$('.welcome-ad span[class^=\'time_\']').attr('class').split('_')[1];var welcomeAdTimeout=parseInt(value)*1000;}
var welcomeAdTimeoutHandle=setTimeout(function(){$('.welcome-ad-close').click();},welcomeAdTimeout);$('.welcome-ad').on('hover',function(){if($('.welcome-ad span.persist-on-hover').length>0){clearTimeout(welcomeAdTimeoutHandle);}});});
/*! end /app/merrick/themes/default/js/advertisement.welcome-ad.js*/

/*! start /app/merrick/themes/default/js/advertisement.take-over.js*/
$('.take-over-ad').on('adLoaded',function(event,params){});
/*! end /app/merrick/themes/default/js/advertisement.take-over.js*/

/*! start /app/merrick/themes/default/js/form.js*/
var timer=false;var profile=false;var Form=(function()
{var
defaults={};function init(options)
{if(profile)console.profile('Form.init');if(timer)timerStart('Form.init',timer);var options=$.extend(defaults,options);initEvents();if(profile)console.profileEnd();if(timer)timerEnd('Form.init',timer);}
function initEvents()
{}
function validateField(params)
{if(profile)console.profile('Form.validateField');if(timer)timerStart('Form.validateField',timer);if(profile)console.profileEnd();if(timer)timerEnd('Form.validateField',timer);}
function validateForm(params)
{if(profile)console.profile('Form.validateForm');if(timer)timerStart('Form.validateForm',timer);if(profile)console.profileEnd();if(timer)timerEnd('Form.validateForm',timer);}
function submit(params)
{if(profile)console.profile('Form.submit');if(timer)timerStart('Form.submit',timer);if(profile)console.profileEnd();if(timer)timerEnd('Form.submit',timer);}
return{init:init}})();Form.init();
/*! end /app/merrick/themes/default/js/form.js*/

/*! start /app/merrick/themes/default/js/user.js*/
var timer=false;var profile=false;sectionContentShareHandler=function(eventObj){var
provider=eventObj.providers,content_id=eventObj.context.data('id'),section_id=eventObj.context.data('section-id'),source='section';Analytics.trackContentShare(content_id,provider,source,section_id);}
var User=(function()
{var
defaults={};function init(options)
{if(profile)console.profile('User.init');if(timer)timerStart('User.init',timer);var options=$.extend(defaults,options);initEvents();if(profile)console.profileEnd();if(timer)timerEnd('User.init',timer);}
function initEvents()
{$(document).on('click','.share',function()
{share($(this).parents('.content-gigya-details'));})
$(document).on('click','.social-login',function()
{social_login(this);})
$(document).on('click','.comments-container',function()
{comments(this);})}
function share(parent)
{var act=new gigya.socialize.UserAction();act.setTitle($(parent).data('title'));act.setLinkBack($(parent).data('full-url'));act.setDescription($(parent).data('description'));act.addActionLink("Read More",$(parent).data('full-url'));act.addMediaItem({type:'image',src:$(parent).data('primary-image'),href:$(parent).data('full-url')});var params={userAction:act,height:60,width:300,onSendDone:sectionContentShareHandler,context:parent,deviceType:'auto',grayedOutScreenOpacity:20,operationMode:'multiSelect'};gigya.socialize.showShareUI(params);}
function social_login(el)
{var el=$(el);var params={enabledProviders:'facebook,twitter,google,linkedin',showWhatsThis:false,showTermsLink:false,headerText:'',height:120,width:300,buttonsStyle:'signInWith',};gigya.socialize.showLoginUI(params);}
function comments(el)
{var el=$(el);var params={};gigya.comments.showCommentsUI();}
return{init:init,share:share,social_login:social_login,comments:comments}})();User.init();
/*! end /app/merrick/themes/default/js/user.js*/

/*! start /app/merrick/themes/default/js/paginate.js*/
$(document).on('click','.pagination-controls',function(){var controlClicked=$(this).data('control');var contentPaginationControls=$(this);var contentContainer=$(this).parents('.single-content');var contentBodyContainer=contentContainer.find('.content-body');var content_id=contentContainer.data('id');var contentPagination=paginationContentDetails(content_id);var currentPage=contentPaginationControls.data('current-page');contentBodyContainer.removeClass('paginated-body').height('auto');contentPaginationControls.addClass('hidden');Page.reloadGrid();$.scrollTo('+=1px',0);return;});$(window).on('load scroll',function(){var commentsBlocks=$('.pagination-controls.clickable').not('.clicked').each(function(){if(($(this).is(':topInViewport')||$(this).is(':bottomInViewport'))&&!$(this).hasClass('inview')){$(this).addClass('inview');var contentContainer=$(this).parents('.single-content');var content_id=contentContainer.data('id');var contentContinueReadingButton=$('.pagination-controls');if(!contentContinueReadingButton.hasClass('gated-content-hidden')){Analytics.trackContentContinueReading(content_id,'Visable');}}});});function paginationGetThresholds(){var thresholds={};thresholds.pageSize=1.25;thresholds.contentViewRatio=2.0;return thresholds;}
function paginationContentDetails(content_id){var contentPagination={};contentPagination.minHeight=500;contentPagination.thresholds=paginationGetThresholds();contentPagination.viewRatio=getContentScrollItemHeight(content_id)/getContentViewHeight();contentPagination.pageHeight=getContentViewHeight()*contentPagination.thresholds.pageSize;contentPagination.pages=Math.floor(getContentBodyHeight(content_id)/contentPagination.pageHeight)+1;return contentPagination;}
function paginationInit(content_id){var contentContainer=$('.single-content[data-id="'+content_id+'"]');if(!contentContainer.hasClass('pagination-processed')){var contentPagination=paginationContentDetails(content_id);if(contentPagination.viewRatio>=contentPagination.thresholds.contentViewRatio){var contentBodyContainer=contentContainer.find('.content-body');if(contentPagination.pageHeight<contentPagination.minHeight&&getContentScrollItemHeight(content_id)>contentPagination.minHeight)contentPagination.pageHeight=contentPagination.minHeight;contentBodyContainer.addClass('paginated-body').height(contentPagination.pageHeight);var contentPaginationControls=contentContainer.find('.pagination-controls');contentPaginationControls.removeClass('hidden');contentPaginationControls.attr('data-current-page','1');}
contentContainer.addClass('pagination-processed');}}
function getContentBodyHeight(content_id){var contentContainerClass='.single-content[data-id="'+content_id+'"]';return $(contentContainerClass+' .content-body').height();}
function getContentScrollItemHeight(content_id){return $('.single-content[data-id="'+content_id+'"]').height();}
function getContentViewHeight(){return Cygnus.display.height;}
/*! end /app/merrick/themes/default/js/paginate.js*/

/*! start /app/merrick/app.js*/
var debug='false';var console=console||{log:function(){}};var fbl=function(t){if(window.console&&console.log)console.log(t);}
function openx_create_ad_request_url(aObj){var parameters=new Array;var adunits=new Array;var host_array=window.location.host.split('.');var url_parts=new Array;for(var i=host_array.length-1;i>=host_array.length-2;i--){url_parts.push(host_array[i]);};var base_url="http://ox-d."+url_parts.reverse().join('.')+'/w/1.0/arj?';$('.openx_ad').each(function(){if($(this).is(':visible')&&!$(this).hasClass('ad_loaded')){if(!$(this).hasClass('ad_loading')){$(this).addClass('ad_loading');}
adunits.push($(this).attr('rel'));}});if(adunits.length>0){parameters.push("auid="+adunits.join(','));$.each(aObj,function(key,value){parameters.push("c."+key+"="+escape(value));});var random_num=Math.floor(Math.random()*9999999999);parameters.push("cb="+random_num);parameters.push("o="+random_num);parameters.push("callback=OX"+random_num);parameters.push("res="+window.screen.width+"x"+window.screen.height+"x"+window.screen.colorDepth);parameters.push(document.charset?"ch="+document.charset:(document.characterSet?"ch="+document.characterSet:""));parameters.push("tz="+(new Date()).getTimezoneOffset());return base_url+parameters.join('&');}else{return false;}}
function openx_ad_load_async(aObj){var request_url=openx_create_ad_request_url(aObj);if(request_url){var regex=new RegExp("[\\?&]callback=([^&#]*)");var callback=regex.exec(request_url)[1];$.ajax({url:request_url,type:'GET',async:true,contentType:'application/json',dataType:'jsonp',jsonpCallback:callback,success:function(json){var ads=json.ads;for(i=0;i<ads.count;i++){var ad=ads.ad[i];$('#openx_adunit_id__'+ad.adunitid).addClass('ad_loaded').removeClass('ad_loading');$('#openx_adunit_id__'+ad.adunitid).html('');writeCapture.write(document.getElementById('openx_adunit_id__'+ad.adunitid),ad.html);}}});}}
function setRmiDirectTracker(cookie,content_id){var referrer=document.referrer;if(referrer==''){setRmiCookie(cookie,'Direct Access|'+content_id);}}
function setRmiLinkTracker(cookie,linkObj){var link_data=linkObj.data();var cookie_value=link_data.buttonLocation+'|'+link_data.buttonText+'|'+link_data.contentId;setRmiCookie(cookie,cookie_value);try{var url=linkObj.attr('href');sendRmiTrackerData('rmi_data','Click');setTimeout('document.location = \"'+url+'\"',100)}catch(e){}{}}
function cloneRmiCookie(source,destination){setRmiCookie(destination,$.cookie(source));}
function setRmiCookie(cookie,value){$.cookie(cookie,value,{path:'/'});}
function completeRmiAction(cookie){setRmiCookie(cookie,'Complete');}
function sendRmiTrackerData(cookie,action){var value=$.cookie(cookie);if(typeof(value)!==undefined){if(!value){value='Empty Cookie';}}else{value='Undefined Cookie';}
if(value!='Complete'){_gaq.push(['_trackEvent','RMI',action,value,undefined,true]);}}
function track_user_actions(json_string){$.ajax({url:'/api/user_action',type:'POST',async:true,cache:false,data:json_string,contentType:'application/json',dataType:'json',processData:false,success:function(response){}});}
function isset_url_param(name){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(window.location.href);if(results==null){return false;}else{return true;}}
function get_url_param(name){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(window.location.href);if(results==null){return"";}else{return results[1];}}
function toggle_all(idarray){$(idarray).each(function(key,item){$('#'+item).toggle();});}
function default_text(input_id){$('#'+input_id).focus(function(o){if($(this).val()==$(this)[0].title){$(this).removeClass('default_text_active');$(this).val('');}}).blur(function(){if($(this).val()==''){$(this).addClass('default_text_active');$(this).val($(this)[0].title);}}).blur();}
function has_default_text(input_id){return $('#'+input_id).hasClass('default_text_active');}
(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}
if(e.type=="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.bind('mouseenter',handleHover).bind('mouseleave',handleHover);};})(jQuery);function hover_form_validate(){$('.form_button_submit').hoverIntent({sensitivity:7,interval:100,over:hoverSubmit,timeout:0,out:hoverOut});function hoverOut(){}
function hoverSubmit(){$('.field_container.required').each(function(){$(this).find(':input').delay(500).blur();});};$('.form_button_submit').click(function(){$(this).addClass('disabled');$('.processing').show();});$('.form_button_submit').hover(function(){if(debug=='true'){fbl($('.invalid').size()+'invalid');}
if(debug=='true'){fbl($('.required').size()+'required');}
if($('.invalid').size()==0||$('.required').size()==0){$('.form_button_submit').removeClass('disabled');}else{$('.form_button_submit').addClass('disabled');}});}
function force_select_blur(){$('select').on({change:function(){$(this).blur().focus();},keypress:function(){$(this).blur().focus();}});}
function form_field_validate(formName,fieldName,formEvent,fieldObj){if(typeof(formEvent)=='undefined')formEvent=formName;var $form=$('#'+formName+'__form'),$field=$('#field_'+fieldName+''),$fieldContainer=$field.parent('.field_container'),$fieldFooter=$fieldContainer.find('.field_footer'),$fieldError=$fieldContainer.find('.field_error');if(typeof(fieldObj['required'])!='undefined'&&fieldObj['required']==true){$field.addClass('required');}else{$field.addClass('optional');}
if(typeof(fieldObj['input_type'])!='undefined'&&fieldObj['input_type']=='checkbox'){if(typeof($field.attr('checked'))=='undefined'){$fieldContainer.removeClass('success');}}
$field.blur(function(){$.post('/reg/'+formEvent+'/validate_field/'+$field.attr('name')+'',$form.serialize(),function(data){if(data.status==false){var error=data.errors[fieldName];if(debug=='true'){fbl(error);}
$fieldContainer.removeClass('success').addClass('invalid required');$fieldError.html(error);$fieldError.animate({height:'auto'}).show();return data;}else{$fieldContainer.removeClass('invalid required');if($field.hasClass('optional')&&$field.val()==''){if($fieldContainer.hasClass('success'))$fieldContainer.removeClass('success');}else{$fieldContainer.addClass('success');}
$fieldError.text(' ').hide();if(data.data.populate!==undefined){for(field in data.data.populate){$('#'+field).val(data.data.populate[field]);$('#'+field).blur();}}}});if($field.attr('name')=='remail'||$field.attr('name')=='pwd'||$field.attr('name')=='rpwd'){if($('#field_email').val()==$('#field_remail').val()&&$('#field_pwd').val()==$('#field_rpwd').val()){$('#field_email').blur();}}});$('#field_display_name').focus(function(){var firstname=$('#field_first_name').val().toString().toLowerCase(),lastname=$('#field_last_name').val().toString().toLowerCase();if(firstname&&lastname&&!this.value){this.value=firstname+"_"+lastname;}});}
function clearInvalid(fieldName,bind){$('#field_'+fieldName+'').bind(''+bind+'',function(){if($('#field_container__'+fieldName+'').hasClass('invalid')){$('#field_container__'+fieldName+'').removeClass('invalid');$(this).next('.field_error').html('').hide();$('.form_button_submit').removeClass('disabled');};});}
function form_dependent_fields(parent,dependent,values,dependentWidth,easing,duration){var $parent=$('#field_'+parent+''),$parentContainer=$parent.parent('.field_container'),$dependent=$('#field_'+dependent+''),$dependentContainer=$dependent.parent('.field_container'),$parentWidth=$('#field_'+parent+'').width(),$parentContainerWidth=$('#field_container__'+parent+'').width(),$dependentContainerWidth=$('#field_container__'+dependent+'').outerWidth(),$values=values.split("|");$valuesCount=$values.length;$parentValue=$parent.find(":selected").val();if($.inArray($parentValue,$values)>=0){$('#field_container__'+dependent+'').show({queue:false,duration:duration-500,easing:''+easing+''})}else{$('#field_container__'+dependent+'').hide(100);$('#field_'+dependent+'').val('');}}
function variable_form_field(){$('#field_container__region_name').removeClass('required').hide();$('#field_region_name').removeClass('required');$('#field_country').on('change',function(){if($(this).val()!='USA'&&$(this).val()!='CAN'){$('#field_container__region_name').addClass('required').show();$('#field_region_name').addClass('required');$('#field_container__region').removeClass('required').hide();$('#field_region').removeClass('required');$('#field_region').val('');}else{$('#field_container__region_name').removeClass('required').hide();$('#field_region_name').removeClass('required');$('#field_container__region').addClass('required').show();$('#field_region').addClass('required');$('#field_region_name').val('');}})}
function block_ui_cancel(){$.unblockUI();}
function merrick_form_submit(form_id){$('#'+form_id).attr('novalidate','novalidate');$('#'+form_id).validator({offset:[-20,-240],messageClass:'merrick_form_error'}).submit(function(e){var form=$(this);var oform=this;if(typeof window[oform.id+'_validated']=='undefined'||window[oform.id+'_validated']==false){e.preventDefault();var action=form.attr('action');var parts=action.split('?');if(parts.length>2){var url=parts[0];parts[0]=null;var params=parts.join('?');url+='?validate=true&'+params;}else if(parts.length==2){var url=parts[0]+'?validate=true&'+parts[1];}else{var url=action+'?validate=true';}
var post_data=form.serializeArray();form.find('.input_select_multi').each(function(){if($(this).val()==null){var multi_empty=new Object();multi_empty['name']=$(this).attr('id');multi_empty['value']='';post_data.push(multi_empty);}});$.ajax({type:'POST',url:url,data:post_data,dataType:'json',success:function(results,textStatus){if(results&&results['status']==1){if(results.data&&results.data.email){for(prop in results.data.email){if(typeof oform[prop]!='undefined'&&typeof oform[prop].value!='undefined'){oform[prop].value=results.data.email[prop];}}}
if($('input[name|="valid"]').length>0){$('input[name|="valid"]').val('true');}
window[oform.id+'_validated']=true;$('.default_form:first').hide();$('.default_form_hidden:first').show();oform.submit();}else{if(results.action&&results.action=='login'){$('.specialhidden').show();}
if(results){if(results.errors['Images']){alert(results.errors['Images']);}
form.find('.input_select_multi').each(function(){if(typeof results['errors'][$(this).attr('id')]!='undefined'){results['errors'][$(this).attr('id')+'[]']=results['errors'][$(this).attr('id')];delete(results['errors'][$(this).attr('id')]);}});form.data('validator').invalidate(results['errors']);$('input.invalid:first').focus();}else{}}},error:function(XMLHttpRequest,textStatus,errorThrown){}});}});}
function hideValid(userFields){if(!data.email){if(window.location.href.indexOf("register")>-1){for(var field in userFields){if(userFields.hasOwnProperty(field)){$('#field_'+field+'').parent('#field_container__'+field+'').hide();}}}
$('#field_container__pwd').remove();$('#field_container__rpwd').remove();if(userFields['email']!=''){$('#field_remail').val(userFields['email']).blur().parent('#field_container__remail').hide();}}}
function getParameterByName(name){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(window.location.search);if(results==null)
return"";else
return decodeURIComponent(results[1].replace(/\+/g," "));}
function toggle_form_submit(form_id){var submit_button=$('#'+form_id+'__submit');if(submit_button.attr('disabled')=='disabled'){submit_button.removeAttr('disabled');$('#'+form_id+' .processing').hide();}else{submit_button.attr('disabled','disabled');$('#'+form_id+' .processing').show();}}
function merrick_form_init(form_id){$('#'+form_id).attr('novalidate','novalidate');$('#'+form_id+' .field_error').hide();$('#'+form_id+' select, #'+form_id+' input[type=checkbox]').on({change:function(){$(this).blur().focus();},keypress:function(){$(this).blur().focus();}});$('#'+form_id).submit(function(e){var form=$(this);var oform=this;e.preventDefault();if(typeof(jQuery.fn.uiLock)!="undefined"){jQuery.fn.uiLock();}
var action=form.attr('action');var parts=action.split('?');if(parts.length>2){var url=parts[0];parts[0]=null;var qs=parts.join('?');}else if(parts.length==2){var url=parts[0];var qs=parts[1];}else{var url=parts[0];var qs='';}
var submit_url=url+'?'+qs;var post_data=form.serializeArray();form.find('.input_select_multi').each(function(){if($(this).val()==null){var multi_empty=new Object();multi_empty['name']=$(this).attr('id');multi_empty['value']='';post_data.push(multi_empty);}});toggle_form_submit(form_id);$.ajax({type:'POST',url:submit_url,dataType:'json',data:post_data,processData:true,success:function(results,textStatus){toggle_form_submit(form_id);if(!results||typeof(results['status'])=='undefined'){return false;}
if(results['status']==1){if(typeof(results['data'])=='undefined')return false;var redirect_url='/'+results.data.redirect_template;if(strpos(redirect_url,'?')==false){redirect_url=redirect_url+'?';}else{redirect_url=redirect_url+'&'}
redirect_url=redirect_url+'referer='+results.data.redirect_user;if(typeof(results.data.send_to)!='undefined'){var send_to=results.data.send_to;if(send_to=='redirect_user'){var redirect_url=results.data.redirect_user;}}
if(typeof(results.data.redirect_qs)!='undefined'){if(strpos(redirect_url,'?')==false){redirect_url=redirect_url+'?';}
for(var i in results.data.redirect_qs){redirect_url=redirect_url+'&'+i+'='+results.data.redirect_qs[i];}}
if(typeof(jQuery.fn.uiLock)!="undefined"){$('#uiLockId div').html('<h1 style="color:green">Success!</h1><p>Your submission was received. This page will now refresh.');setTimeout(function(){window.location.href=redirect_url;},1000);}else{window.location.href=redirect_url;}}else{if(typeof(jQuery.fn.uiLock)!="undefined"){$('#uiLockId div').html('<h1 style="color:red">Error!</h1><p>There was a problem with the information you submitted.</p><p><a href=\'javascript:jQuery.fn.uiUnlock();\'>Click here</a> to return to the form and correct the indicated fields.');}
if(typeof(results['action'])!='undefined'&&results['action']=='login'){$('.specialhidden').show();}
if(results){form.find('.input_select_multi').each(function(){if(typeof results['errors'][$(this).attr('id')]!='undefined'){results['errors'][$(this).attr('id')+'[]']=results['errors'][$(this).attr('id')];delete(results['errors'][$(this).attr('id')]);}});errors=results.errors;var error_count=0;for(var field in errors){error_count++;if(errors.hasOwnProperty(field)){if(field.indexOf('__')!=-1){var $field=$('#'+field+'');var $fieldContainer=$field.parent('.field_container');var $fieldError=$fieldContainer.find('.field_error');var error=results.errors[field];}else{var $field=$('#field_'+field+'');var $fieldContainer=$field.parent('.field_container');var $fieldError=$fieldContainer.find('.field_error');var error=results.errors[field];}
$fieldContainer.removeClass('success').addClass('invalid required');$fieldError.html(error);$fieldError.show();if(error_count==1){$field.focus();}}}
$('.processing').hide();}else{}}},error:function(XMLHttpRequest,textStatus,errorThrown){toggle_form_submit(form_id);return false;}});});}
function strpos(haystack,needle,offset){var i=(haystack+'').indexOf(needle,(offset||0));return i===-1?false:i;}
function redirect_to(url){document.location.replace(url);}
var form_modals={};$(document).ready(function(){if(typeof $('.form_modal[rel]').overlay!='undefined'){$('.form_modal[rel]').overlay({mask:{color:'#000',loadSpeed:200,opacity:0.7},top:'5%',left:'center',closeOnClick:false,onBeforeLoad:function(){var overlay=this.getOverlay();var trigger=this.getTrigger();var block=trigger.attr('data-block');overlay.addClass('modal_'+block);},onLoad:function(){var overlay=this.getOverlay();var trigger=this.getTrigger();var block=trigger.attr('data-block');var controller=(typeof(block)=='undefined'||block=='')?href:block;var params=trigger.attr('data-params');var params_str=(typeof(params)=='undefined'||params=='')?'':'&'+params;var input_params=trigger.attr('data-inputs');if(typeof(input_params)=='undefined'||input_params==''){var input_params_str='';}else{var input_ids=input_params.split(',');var input_values=[];for(i=0;i<input_ids.length;i++){var id=input_ids[i];var input=document.getElementById(id);if(input&&input.value){var name=(typeof input.name=='undefined')?id:input.name;input_values.push(name+'='+input.value);}}
params_str+='&'+input_values.join('&');}
var timestamp=new Date().getTime();var query=(document.location.search=='')?'?block='+controller:document.location.search+'&block='+controller;query=query+params_str+'&t='+timestamp;var url=document.location.protocol+'//'+document.location.hostname+document.location.pathname+query;var wrap=overlay.find('.modal_body');var loading=overlay.find('.loading');wrap.load(url);loading.hide();},onClose:function(){var overlay=this.getOverlay();var trigger=this.getTrigger();var wrap=overlay.find('.modal_body');var loading=overlay.find('.loading');var block=trigger.attr('data-block');wrap.html('');overlay.removeClass('modal_'+block);loading.show();}});$('.image_modal[rel]').overlay({mask:{color:'#000',loadSpeed:200,opacity:0.7},top:'5%',left:'center',closeOnClick:true,onBeforeLoad:function(){},onLoad:function(){var href=this.getTrigger().attr('href');var title=this.getTrigger().parents('li:first');title=title.find('.full:first').html();var wrap=this.getOverlay().find('.modal_body');if(href.indexOf('<')>-1){var player=$('<div class="image_append"></div>');wrap.append(player);player.html(href);}
else{var image=document.createElement('img');image.setAttribute('src',href);image.setAttribute('class','image_append');wrap.append(image);}
if(title!=null){wrap.append($('<p style=\'margin: 20px auto; font-weight: normal; color: #424242; width: 500px;\'>'+title+'</p>'));}
$('.loading').hide();},onClose:function(){var wrap=this.getOverlay().find('.modal_body');wrap.empty();}});$('.form_modal').each(function(index){if(!$(this).hasClass('hidden')){$(this).show();}});}
add_oblink_tracking();$('.outbound_link_tracking').click(function(ev){try{var url=$(this).attr('href');_gaq.push(['_trackEvent','Outbound Links','Click',url,undefined,true]);var win=window.open(url,'_blank');setTimeout(win.focus(),100);ev.preventDefault();}catch(e){}});$('.block_level_tracking a').click(function(e){var container=$(this).parents('.block_level_tracking');var category=container.data('section')+"|"+container.data('block');_gaq.push(['_trackEvent','Block Level Tracking','Click',category,undefined,true]);setTimeout('window.location = \"'+$(this).attr('href')+'\";',100);e.preventDefault();});});function overlay(obj_id){$('#'+obj_id).overlay({mask:{color:'#000',loadSpeed:200,opacity:0.7},top:'5%',left:'center',closeOnClick:false,onBeforeLoad:function(){var overlay=this.getOverlay();var trigger=this.getTrigger();var block=trigger.attr('data-block');overlay.addClass('modal_'+block);},onLoad:function(){var overlay=this.getOverlay();var trigger=this.getTrigger();var block=trigger.attr('data-block');var controller=(typeof(block)=='undefined'||block=='')?href:block;var params=trigger.attr('data-params');var params_str=(typeof(params)=='undefined'||params=='')?'':'&'+params;var input_params=trigger.attr('data-inputs');if(typeof(input_params)=='undefined'||input_params==''){var input_params_str='';}else{var input_ids=input_params.split(',');var input_values=[];for(i=0;i<input_ids.length;i++){var id=input_ids[i];var input=document.getElementById(id);if(input&&input.value){var name=(typeof input.name=='undefined')?id:input.name;input_values.push(name+'='+input.value);}}
params_str+='&'+input_values.join('&');}
var timestamp=new Date().getTime();var query=(document.location.search=='')?'?block='+controller:document.location.search+'&block='+controller;query=query+params_str+'&t='+timestamp;var url=document.location.protocol+'//'+document.location.hostname+document.location.pathname+query;var wrap=overlay.find('.modal_body');var loading=overlay.find('.loading');wrap.load(url);loading.hide();},onClose:function(){var overlay=this.getOverlay();var trigger=this.getTrigger();var wrap=overlay.find('.modal_body');var loading=overlay.find('.loading');var block=trigger.attr('data-block');wrap.html('');overlay.removeClass('modal_'+block);loading.show();}});}
function social_activity_init(){$('#social_activity').height('auto');}
function add_oblink_tracking(){$('a:not(.outbound_link_tracking,.image_modal,.internal_link)').each(function(){if(is_external_link($(this).attr('href'))&&!is_openx_link($(this).attr('href'))){$(this).addClass('outbound_link_tracking');}});}
function is_openx_link(linkloc){var result=false;var ox_regex=new RegExp('^http://ox-.*');var ox_click=new RegExp('^http://[a-zA-Z0-9].*'+location.host+'.*');if(ox_regex.test(linkloc)||ox_click.test(linkloc)){result=true;}
return result;}
function is_external_link(linkloc){var result=false;var domain=(location.host.match(/([^.]+)\.\w{2,3}(?:\.\w{2})?$/)||[])[0];var rel_regex=new RegExp('^http://.*'+domain);if(typeof(linkloc)!='undefined'&&linkloc!=""&&!rel_regex.test(linkloc)){if(linkloc.slice(0,1)!="#"&&linkloc.slice(0,1)!="/"&&linkloc.slice(0,10)!="javascript"){if(linkloc.slice(0,4)=="http"){result=true;}}}
return result;}
function registration_setBGToken(){var url='/reg/bgtoken/set';$.ajax({type:"GET",url:url,cache:false,success:function(response){if(response&&response.form_time){$('#field_form_time').val(response.form_time.value);}}});}
function regwall_test(){if(typeof($.cookie('auth'))=='string'&&typeof($.cookie('token'))=='string'){}else if(typeof($.cookie('ukey'))!=='string'){if($.cookie('t_pv')!=='decline'&&!location.href.match(/register/)){var url='/reg/wall/test_user';var uri=encodeURIComponent(location.href);var ref=encodeURIComponent(document.referrer);url=url+'?uri='+uri+'&referrer='+ref+'&_cb='+parseInt(Math.random()*99999999);$.ajax({type:"GET",url:url,cache:true,success:function(response){if(response.status==true){regwall_display_modal(response);}}});}}}
function track_GA_event(action,type_id){console.log('tracking event: '+action+' '+type_id);_gaq.push(['_trackEvent','Prompt Registration',''+action+'',''+type_id+'']);}
function regwall_display_modal(response){var container=$('.reg-prompt-container');var decline=$('.reg-prompt.decline');if(response.opt=='HARD'){decline.hide();}else{$('a.reg-prompt.decline').bind('click',function(){$.ajax({type:"POST",url:'/reg/wall/decline',success:function(response){$('.reg-prompt-container').slideUp();track_GA_event('Decline',response.type_id);$.cookie("t_pv","decline",{expires:response.expiration,path:'/',domain:response.cookie_domain});}});return false;});}
$('a.reg-prompt.accept').bind('click',function(){track_GA_event('Accept',response.type_id);});container.slideDown();track_GA_event('Impression',response.type_id);}
/*! end /app/merrick/app.js*/

/*! start /app/merrick/themes/default/js/masonry.js*/
/*
 * Masonry PACKAGED v3.1.2
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
(function(t){"use strict";function e(t){if(t){if("string"==typeof n[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,o=0,r=i.length;r>o;o++)if(e=i[o]+t,"string"==typeof n[e])return e}}var i="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;"function"==typeof define&&define.amd?define(function(){return e}):t.getStyleProperty=e})(window),function(t){"use strict";function e(t){var e=parseFloat(t),i=-1===t.indexOf("%")&&!isNaN(e);return i&&e}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,i=s.length;i>e;e++){var n=s[e];t[n]=0}return t}function n(t){function n(t){if("string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var n=r(t);if("none"===n.display)return i();var h={};h.width=t.offsetWidth,h.height=t.offsetHeight;for(var p=h.isBorderBox=!(!a||!n[a]||"border-box"!==n[a]),u=0,f=s.length;f>u;u++){var c=s[u],d=n[c],l=parseFloat(d);h[c]=isNaN(l)?0:l}var m=h.paddingLeft+h.paddingRight,y=h.paddingTop+h.paddingBottom,g=h.marginLeft+h.marginRight,v=h.marginTop+h.marginBottom,_=h.borderLeftWidth+h.borderRightWidth,b=h.borderTopWidth+h.borderBottomWidth,E=p&&o,L=e(n.width);L!==!1&&(h.width=L+(E?0:m+_));var T=e(n.height);return T!==!1&&(h.height=T+(E?0:y+b)),h.innerWidth=h.width-(m+_),h.innerHeight=h.height-(y+b),h.outerWidth=h.width+g,h.outerHeight=h.height+v,h}}var o,a=t("boxSizing");return function(){if(a){var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style[a]="border-box";var i=document.body||document.documentElement;i.appendChild(t);var n=r(t);o=200===e(n.width),i.removeChild(t)}}(),n}var o=document.defaultView,r=o&&o.getComputedStyle?function(t){return o.getComputedStyle(t,null)}:function(t){return t.currentStyle},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define(["get-style-property/get-style-property"],n):t.getSize=n(t.getStyleProperty)}(window),function(t){"use strict";var e=document.documentElement,i=function(){};e.addEventListener?i=function(t,e,i){t.addEventListener(e,i,!1)}:e.attachEvent&&(i=function(e,i,n){e[i+n]=n.handleEvent?function(){var e=t.event;e.target=e.target||e.srcElement,n.handleEvent.call(n,e)}:function(){var i=t.event;i.target=i.target||i.srcElement,n.call(e,i)},e.attachEvent("on"+i,e[i+n])});var n=function(){};e.removeEventListener?n=function(t,e,i){t.removeEventListener(e,i,!1)}:e.detachEvent&&(n=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var o={bind:i,unbind:n};"function"==typeof define&&define.amd?define(o):t.eventie=o}(this),function(t){"use strict";function e(t){"function"==typeof t&&(e.isReady?t():r.push(t))}function i(t){var i="readystatechange"===t.type&&"complete"!==o.readyState;if(!e.isReady&&!i){e.isReady=!0;for(var n=0,s=r.length;s>n;n++){var a=r[n];a()}}}function n(n){return n.bind(o,"DOMContentLoaded",i),n.bind(o,"readystatechange",i),n.bind(t,"load",i),e}var o=t.document,r=[];e.isReady=!1,"function"==typeof define&&define.amd?(e.isReady="function"==typeof requirejs,define(["eventie/eventie"],n)):t.docReady=n(t.eventie)}(this),function(){"use strict";function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype;n.getListeners=function(t){var e,i,n=this._getEvents();if("object"==typeof t){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;t.length>e;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,o=this.getListenersAsObject(t),r="object"==typeof i;for(n in o)o.hasOwnProperty(n)&&-1===e(o[n],i)&&o[n].push(r?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;t.length>e;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,o,r=this.getListenersAsObject(t);for(o in r)r.hasOwnProperty(o)&&(n=e(r[o],i),-1!==n&&r[o].splice(n,1));return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,o,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)r.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(o=e[n])&&("function"==typeof o?r.call(this,n,o):s.call(this,n,o));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if("object"===i)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.emitEvent=function(t,e){var i,n,o,r,s=this.getListenersAsObject(t);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].length;n--;)i=s[o][n],i.once===!0&&this.removeListener(t,i.listener),r=i.listener.apply(this,e||[]),r===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function(){return this._events||(this._events={})},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}.call(this),function(t){"use strict";function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function o(e,i){t.fn[e]=function(o){if("string"==typeof o){for(var s=n.call(arguments,1),a=0,h=this.length;h>a;a++){var p=this[a],u=t.data(p,e);if(u)if(t.isFunction(u[o])&&"_"!==o.charAt(0)){var f=u[o].apply(u,s);if(void 0!==f)return f}else r("no such method '"+o+"' for "+e+" instance");else r("cannot call methods on "+e+" prior to initialization; "+"attempted to call '"+o+"'")}return this}return this.each(function(){var n=t.data(this,e);n?(n.option(o),n._init()):(n=new i(this,o),t.data(this,e,n))})}}if(t){var r="undefined"==typeof console?e:function(t){console.error(t)};t.bridget=function(t,e){i(e),o(t,e)}}}var n=Array.prototype.slice;"function"==typeof define&&define.amd?define(["jquery"],i):i(t.jQuery)}(window),function(t,e){"use strict";function i(t,e){return t[a](e)}function n(t){if(!t.parentNode){var e=document.createDocumentFragment();e.appendChild(t)}}function o(t,e){n(t);for(var i=t.parentNode.querySelectorAll(e),o=0,r=i.length;r>o;o++)if(i[o]===t)return!0;return!1}function r(t,e){return n(t),i(t,e)}var s,a=function(){if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],i=0,n=t.length;n>i;i++){var o=t[i],r=o+"MatchesSelector";if(e[r])return r}}();if(a){var h=document.createElement("div"),p=i(h,"div");s=p?i:r}else s=o;"function"==typeof define&&define.amd?define(function(){return s}):window.matchesSelector=s}(this,Element.prototype),function(t){"use strict";function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){for(var e in t)return!1;return e=null,!0}function n(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function o(t,o,r){function a(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var h=r("transition"),p=r("transform"),u=h&&p,f=!!r("perspective"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[h],d=["transform","transition","transitionDuration","transitionProperty"],l=function(){for(var t={},e=0,i=d.length;i>e;e++){var n=d[e],o=r(n);o&&o!==n&&(t[n]=o)}return t}();e(a.prototype,t.prototype),a.prototype._create=function(){this._transition={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},a.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},a.prototype.getSize=function(){this.size=o(this.element)},a.prototype.css=function(t){var e=this.element.style;for(var i in t){var n=l[i]||i;e[n]=t[i]}},a.prototype.getPosition=function(){var t=s(this.element),e=this.layout.options,i=e.isOriginLeft,n=e.isOriginTop,o=parseInt(t[i?"left":"right"],10),r=parseInt(t[n?"top":"bottom"],10);o=isNaN(o)?0:o,r=isNaN(r)?0:r;var a=this.layout.size;o-=i?a.paddingLeft:a.paddingRight,r-=n?a.paddingTop:a.paddingBottom,this.position.x=o,this.position.y=r},a.prototype.layoutPosition=function(){var t=this.layout.size,e=this.layout.options,i={};e.isOriginLeft?(i.left=this.position.x+t.paddingLeft+"px",i.right=""):(i.right=this.position.x+t.paddingRight+"px",i.left=""),e.isOriginTop?(i.top=this.position.y+t.paddingTop+"px",i.bottom=""):(i.bottom=this.position.y+t.paddingBottom+"px",i.top=""),this.css(i),this.emitEvent("layout",[this])};var m=f?function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"}:function(t,e){return"translate("+t+"px, "+e+"px)"};a.prototype._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=parseInt(t,10),r=parseInt(e,10),s=o===this.position.x&&r===this.position.y;if(this.setPosition(t,e),s&&!this.isTransitioning)return this.layoutPosition(),void 0;var a=t-i,h=e-n,p={},u=this.layout.options;a=u.isOriginLeft?a:-a,h=u.isOriginTop?h:-h,p.transform=m(a,h),this.transition({to:p,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},a.prototype.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},a.prototype.moveTo=u?a.prototype._transitionTo:a.prototype.goTo,a.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},a.prototype._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},a.prototype._transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return this._nonTransition(t),void 0;var e=this._transition;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);var n=this.element.offsetHeight;n=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var y=p&&n(p)+",opacity";a.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:y,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(c,this,!1))},a.prototype.transition=a.prototype[h?"_transition":"_nonTransition"],a.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},a.prototype.onotransitionend=function(t){this.ontransitionend(t)};var g={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};a.prototype.ontransitionend=function(t){if(t.target===this.element){var e=this._transition,n=g[t.propertyName]||t.propertyName;if(delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd){var o=e.onEnd[n];o.call(this),delete e.onEnd[n]}this.emitEvent("transitionEnd",[this])}},a.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(c,this,!1),this.isTransitioning=!1},a.prototype._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var v={transitionProperty:"",transitionDuration:""};return a.prototype.removeTransitionStyles=function(){this.css(v)},a.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},a.prototype.remove=function(){if(!h||!parseFloat(this.layout.options.transitionDuration))return this.removeElem(),void 0;var t=this;this.on("transitionEnd",function(){return t.removeElem(),!0}),this.hide()},a.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options;this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0})},a.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options;this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.css({display:"none"})}}})},a.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},a}var r=document.defaultView,s=r&&r.getComputedStyle?function(t){return r.getComputedStyle(t,null)}:function(t){return t.currentStyle};"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],o):(t.Outlayer={},t.Outlayer.Item=o(t.EventEmitter,t.getSize,t.getStyleProperty))}(window),function(t){"use strict";function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===f.call(t)}function n(t){var e=[];if(i(t))e=t;else if(t&&"number"==typeof t.length)for(var n=0,o=t.length;o>n;n++)e.push(t[n]);else e.push(t);return e}function o(t,e){var i=d(e,t);-1!==i&&e.splice(i,1)}function r(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()}function s(i,s,f,d,l,m){function y(t,i){if("string"==typeof t&&(t=a.querySelector(t)),!t||!c(t))return h&&h.error("Bad "+this.settings.namespace+" element: "+t),void 0;this.element=t,this.options=e({},this.options),this.option(i);var n=++v;this.element.outlayerGUID=n,_[n]=this,this._create(),this.options.isInitLayout&&this.layout()}function g(t,i){t.prototype[i]=e({},y.prototype[i])}var v=0,_={};return y.prototype.settings={namespace:"outlayer",item:m},y.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e(y.prototype,f.prototype),y.prototype.option=function(t){e(this.options,t)},y.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},y.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},y.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.settings.item,n=[],o=0,r=e.length;r>o;o++){var s=e[o],a=new i(s,this);n.push(a)}return n},y.prototype._filterFindItemElements=function(t){t=n(t);for(var e=this.options.itemSelector,i=[],o=0,r=t.length;r>o;o++){var s=t[o];if(c(s))if(e){l(s,e)&&i.push(s);for(var a=s.querySelectorAll(e),h=0,p=a.length;p>h;h++)i.push(a[h])}else i.push(s)}return i},y.prototype.getItemElements=function(){for(var t=[],e=0,i=this.items.length;i>e;e++)t.push(this.items[e].element);return t},y.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},y.prototype._init=y.prototype.layout,y.prototype._resetLayout=function(){this.getSize()},y.prototype.getSize=function(){this.size=d(this.element)},y.prototype._getMeasurement=function(t,e){var i,n=this.options[t];n?("string"==typeof n?i=this.element.querySelector(n):c(n)&&(i=n),this[t]=i?d(i)[e]:n):this[t]=0},y.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},y.prototype._getItemsForLayout=function(t){for(var e=[],i=0,n=t.length;n>i;i++){var o=t[i];o.isIgnored||e.push(o)}return e},y.prototype._layoutItems=function(t,e){if(!t||!t.length)return this.emitEvent("layoutComplete",[this,t]),void 0;this._itemsOn(t,"layout",function(){this.emitEvent("layoutComplete",[this,t])});for(var i=[],n=0,o=t.length;o>n;n++){var r=t[n],s=this._getItemLayoutPosition(r);s.item=r,s.isInstant=e,i.push(s)}this._processLayoutQueue(i)},y.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},y.prototype._processLayoutQueue=function(t){for(var e=0,i=t.length;i>e;e++){var n=t[e];this._positionItem(n.item,n.x,n.y,n.isInstant)}},y.prototype._positionItem=function(t,e,i,n){n?t.goTo(e,i):t.moveTo(e,i)},y.prototype._postLayout=function(){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))},y.prototype._getContainerSize=u,y.prototype._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},y.prototype._itemsOn=function(t,e,i){function n(){return o++,o===r&&i.call(s),!0}for(var o=0,r=t.length,s=this,a=0,h=t.length;h>a;a++){var p=t[a];p.on(e,n)}},y.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},y.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},y.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,i=t.length;i>e;e++){var n=t[e];this.ignore(n)}}},y.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,i=t.length;i>e;e++){var n=t[e];o(n,this.stamps),this.unignore(n)}},y.prototype._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n(t)):void 0},y.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;e>t;t++){var i=this.stamps[t];this._manageStamp(i)}}},y.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},y.prototype._manageStamp=u,y.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,n=d(t),o={left:e.left-i.left-n.marginLeft,top:e.top-i.top-n.marginTop,right:i.right-e.right-n.marginRight,bottom:i.bottom-e.bottom-n.marginBottom};return o},y.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},y.prototype.bindResize=function(){this.isResizeBound||(i.bind(t,"resize",this),this.isResizeBound=!0)},y.prototype.unbindResize=function(){i.unbind(t,"resize",this),this.isResizeBound=!1},y.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},y.prototype.resize=function(){var t=d(this.element),e=this.size&&t;e&&t.innerWidth===this.size.innerWidth||this.layout()},y.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},y.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},y.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},y.prototype.reveal=function(t){if(t&&t.length)for(var e=0,i=t.length;i>e;e++){var n=t[e];n.reveal()}},y.prototype.hide=function(t){if(t&&t.length)for(var e=0,i=t.length;i>e;e++){var n=t[e];n.hide()}},y.prototype.getItem=function(t){for(var e=0,i=this.items.length;i>e;e++){var n=this.items[e];if(n.element===t)return n}},y.prototype.getItems=function(t){if(t&&t.length){for(var e=[],i=0,n=t.length;n>i;i++){var o=t[i],r=this.getItem(o);r&&e.push(r)}return e}},y.prototype.remove=function(t){t=n(t);var e=this.getItems(t);if(e&&e.length){this._itemsOn(e,"remove",function(){this.emitEvent("removeComplete",[this,e])});for(var i=0,r=e.length;r>i;i++){var s=e[i];s.remove(),o(s,this.items)}}},y.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,i=this.items.length;i>e;e++){var n=this.items[e];n.destroy()}this.unbindResize(),delete this.element.outlayerGUID,p&&p.removeData(this.element,this.settings.namespace)},y.data=function(t){var e=t&&t.outlayerGUID;return e&&_[e]},y.create=function(t,i){function n(){y.apply(this,arguments)}return e(n.prototype,y.prototype),g(n,"options"),g(n,"settings"),e(n.prototype.options,i),n.prototype.settings.namespace=t,n.data=y.data,n.Item=function(){m.apply(this,arguments)},n.Item.prototype=new m,n.prototype.settings.item=n.Item,s(function(){for(var e=r(t),i=a.querySelectorAll(".js-"+e),o="data-"+e+"-options",s=0,u=i.length;u>s;s++){var f,c=i[s],d=c.getAttribute(o);try{f=d&&JSON.parse(d)}catch(l){h&&h.error("Error parsing "+o+" on "+c.nodeName.toLowerCase()+(c.id?"#"+c.id:"")+": "+l);continue}var m=new n(c,f);p&&p.data(c,t,m)}}),p&&p.bridget&&p.bridget(t,n),n},y.Item=m,y}var a=t.document,h=t.console,p=t.jQuery,u=function(){},f=Object.prototype.toString,c="object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},d=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1};"function"==typeof define&&define.amd?define(["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],s):t.Outlayer=s(t.eventie,t.docReady,t.EventEmitter,t.getSize,t.matchesSelector,t.Outlayer.Item)}(window),function(t){"use strict";function e(t,e){var n=t.create("masonry");return n.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},n.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},n.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,i=e(t);this.containerWidth=i&&i.innerWidth},n.prototype._getItemLayoutPosition=function(t){t.getSize();var e=Math.ceil(t.size.outerWidth/this.columnWidth);e=Math.min(e,this.cols);for(var n=this._getColGroup(e),o=Math.min.apply(Math,n),r=i(n,o),s={x:this.columnWidth*r,y:o},a=o+t.size.outerHeight,h=this.cols+1-n.length,p=0;h>p;p++)this.colYs[r+p]=a;return s},n.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;i>n;n++){var o=this.colYs.slice(n,n+t);e[n]=Math.max.apply(Math,o)}return e},n.prototype._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),o=this.options.isOriginLeft?n.left:n.right,r=o+i.outerWidth,s=Math.floor(o/this.columnWidth);s=Math.max(0,s);var a=Math.floor(r/this.columnWidth);a=Math.min(this.cols-1,a);for(var h=(this.options.isOriginTop?n.top:n.bottom)+i.outerHeight,p=s;a>=p;p++)this.colYs[p]=Math.max(h,this.colYs[p])},n.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this.options.isFitWidth&&(t.width=this._getContainerFitWidth()),t},n.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.prototype.resize=function(){var t=this.containerWidth;this.getContainerWidth(),t!==this.containerWidth&&this.layout()},n}var i=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++){var o=t[i];if(o===e)return i}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):t.Masonry=e(t.Outlayer,t.getSize)}(window);
/*! end /app/merrick/themes/default/js/masonry.js*/

/*! start app/merrick/themes/beta/js/cygnus.js*/
var Cygnus={};var Carousel={};var globalFallbackHtml='<div class="block text-center"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAAyCAMAAADRCBYYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDNDQ3NkI3RDE3MzQxMUUzODcyOEY4RDIyQTYzMEQ1OSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDNDQ3NkI3RTE3MzQxMUUzODcyOEY4RDIyQTYzMEQ1OSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkM0NDc2QjdCMTczNDExRTM4NzI4RjhEMjJBNjMwRDU5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkM0NDc2QjdDMTczNDExRTM4NzI4RjhEMjJBNjMwRDU5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+RruxjQAAAYBQTFRF9PP0cMbhamhpd3R2RkVF0dHRpNjqm5qa3d3dWFZXjIyMxcXFKJrL/dao/utDWbjaZ7rb//mrstfq6enpq5ROKScnCI3E/bZguuLvSavT+5ow6/j7FxMUqqqq3PH4+vr66fb7srGx/vnsTLTY//jX/v7+TcryO6nSPDg5mtfroqCh8Pn81e31/Pz8uLi49/z9i9Ln/ac8C5TIdr/cDwoL7u7uwufyzOv0Kq3UVazTfcHe+v3+5PT5y94+/vJ6vr29/f7+h4YvG5zMm8zj/ceIy8vLi9f+F4vD9Pv9IBwcH5jJgszkDrNK9/f3VsDeGqXQq9/uf35/5OTkJaHOEJvL/v79BYXAIbnsMaLO4N/f///7sK6vkY+QFpHH/u5bseLw/OPAEZRlPLbZzerSyefxi9WkMLNbicTf//vGwePv2NfX/v/+HJDGFq7uYbpb4/v//urUyvT+EZNM/fv2+8F18fr01tO67OafnuT66vrV09Pf/vBLq+r+sLyWAAAA////Dq+a9AAACXFJREFUeNrsmYtf2lgWx2MI5kULbeZSkPASKQgaEAOo0DFD150ARUUdq6WO9jHtVLrz2vd2995/fc694aW1HT+2W5kOxw8YTu49yf3md05OgCNXtv8+vPsj+UMZd9WJXfLzw7uzP538NDuB9Vv292fPnv38jzszMzN3Tiaw3m/R7148ePC/pRlmJxNY77VnDx48ePGVw2pmKTuB9S6zSj+S7wDWD1980YN1MoH1Lrv78G6kD2vpzp07M0s3Pvw83NHPE9bDh3/5879fPHnyyy9fLf3pBtjf5oj1oeexbn2+sL7/4cmTJz1WN04WW2rx0spIRsGSLJ9hY7HnVb/5PGFV7/7r0Zc37927t9SDNUsMxHcum0ic2ukYRcrqsNMJS31lfSRYldyY3Q2zj2bf3AR78y3T1RwhOzrGgpG83BFFjLEIbIo8xuj0vLLKt/tWPnvQSwXPBaZD49Y6fP8thXXz1tzJyVyXtl1tbJpo/XKTi7ypp3cIMXRdN/pOtdLbmPLX9pht5UcnHa+VL3MtYsFCeUxhfTl369Ej+nmxGE8DAc3Zu2i94wi9TTcydYVoAjZdg9RV+3OajfnjbWrHkdEo0/7bl8rC54HsuMGa/ZLBenNr7lG/aq+ndT0TVcOn5FR83Dl0+nxVbD/OaFFinRpqi+u0HzvFqq3r6cMw1tOng4hqv9I3PRHLMaq1ComUqg6saZZmdslRjgV/JahPNoksLDgZSKxQX1WhctmuOMPKJcu+5g5+tietxYFn0aXr/KGsuzpCvY4Eml87fLqu60iIRxczSMi4EOzgqfo4Qa/LadMMDwMOleVZGDhfeQJTnoZnqkvytUItkSWxpqexm9qGx/j800jCc5ydam6nPJ4ETIl48yVPsHLfC4KcOvB4PPMQ0TpOeRoHzez1wiJzlNabf/4nWuyXknWky27BRKiOkA4FzOJkIJWG7fq6JZp15tfNdpKNhY8mP3JwNTqAFbCZ5aicjlamt1f8TVJaKTzNdyvLX3tL81sNENCaf6u2uRDy+XebgaY/FepWg3u1rSmyvFtO5gubC4HU/u0uOT462A48PWp2r/krmr/Ozs0RFctisb/ctC6rgmkKcSku6NjViteBXkt7XNcFTTR1lNF2+B6hxXYdjSbhqLIKK44lKKytasXKFnwW2a49J92A/zaIJFRLJElzP2FbJObzl2xibQPOrNefzxJreTdHUlsQZyHx0sptJeDemF0rVK8ZlrNEZGL3EJZgCGYd+q3kum7Kbt5EKu07XSY6zZhYgUNtIFNmcNfrsDV67GHNKqRWg2ApH8Dap4Wqkli1yXztFbHXdiO5rJ3b9IQAFq3/Md8BTbHQ3mrFXt0C/cAQgLX3qhwjuUruuLZdsbOV48L2OMBypwFWLw83QFkbAmbKKQpYEGUdKRkwyEY1Y+oZMoRVFGgaitGLlNWIQGeZy4VoGu7TW2AosVoh80evSMy751v2+ZYL/jKkIS1tMa+PtlWhraBtBxMWVdFBrHKc2t/zTQdylfxeEMavrexPjQMsTTBxv1WKQ806FbCL9Q8yFhQo9JiZidfFs7AUHSq/idwXKasWGPYLI7BqJVJN1Hxra2vL96djQ1hMWVurFBZLuVSZ2LH5l0F/IRDK7yXo+Jf3A+MAq+XCJu/oI8rruuswjfkWu92BsgQ9nYl3wh3DiO+MwNJo9oLoeHO0wqtkoKzS27AsBivkXXG6AKDS3HdgBenjTXbPZ4WCcLeksEJWAEZFpldXQts98CEyDrAWw7peD1NRcAbS6wbASu90SfK0bsqGrKcliyTpA3PrDCxONnU5Cg28mRm0r4PHnWatB+tcGkKBt6b3S7QfSK3myJoDy+dfgH4KCrwVY7BsgBVJbcIu+/6enS3Qre59z/NxgEWKsG6kSEVJgbZAbklp3XTtRHd4HRTW1uu8ZiU35HT6tF+zACKXzADh9WSLh65USp5vHaYKmz0L0AJvUVjBEJlvPD0m2YNGvlpa8UMLtdyHtTtfnT9K5axIaoWm4XItW0n585Fq/vWa3Z3yexciU/6EPRawyIZgsm4KalBaIgALGgUekNXj8MHUhbYLQboVRTxQFncIfpq763Xn/9nvs6YafWuS7a+hV4LsW40RO3F0ECLlVMPTaORh7NprB1Zqc9fTSMGdMbLqZWkYXOhmU3S6L9YlOYjmee2NkfGARTZkaDtN0JcsJZOnaSxTOnr6MZQuVaib9AEb9CXW65kuhQVigx6LtVi02UKd5LkHaVL5plKp5Lq5XIVkI0wSObbYCG2WqtVSifnsWJfVLC+plhYo6FAkQkNkQ/QBLFIKZFmhsnOlUvZjsfpwWKRoKC7epcS5JKGw2tE4z7vUFrtZZnhebndaxNoQRcpnRxTXtbCYccq5lBHFeE9RxpW+z4p5Ex/twe+TwIKn6MWWRSgdCssFaKKDqFGOY3sGP3acu5tafcfGlWBVg6nI7wzWkBpVlna1JuRKs2Lz/8/v+j4BrOInPHvLzlm/Y1jmJ4U1/j9YvAeWJCBlAmtiE1gTWOMPC7fpm/ui77zwxwjPIoex8I7ognHB8PGFhSV4My7YY1wKlii9PzyNzGGDOz+pFz2svT38MnGvCRaSPwjWhVPP7X4rEngvjj6M9htxrwlWGKv0zCQZy+xiKhiHCdfGWKbLUQSqC8gjxw/vspO8WKJDJIyxQDMKXuDT4EVHSQIWJPrOszXDIEOho9kY9lkwsIKRm+adirBCn8gRhB6cCB0yhrAMUaDnKCicglgx4dwAQtY0HrPSwhmYJ7zi+N1YY1UFCyrPa5wi9EUCL/ARzMNwjUNhAlGRwoX7ymrLEtdGbExfWWGuzabDhsSuGnGPnMh4KsuApWEDoICEKAi3DDqgp+okCjL4NqZ7mJ9DPJMfVSOzUViqs0QajBoNOUhD+l8Dlzqaho6fRyJdDI8UjQxPZExhkTAagaXRa23QRTmw2pBwAmjC8RO46pozq7eaM+sewOIcUY7AUh1YF00yZJZxBg9pPPawiABvqJeGkGgqNvh+GtKfY6FQKT0/59aY/GCCIriJJtEtWCLHj8IiqM1pEgeKOZuGwoWE3bQi0vSXGEw0SEO1PXaw3BSIe1jg21CVVSCFFAaLo7WEDmL+XjFmsxREi7kIjVoYQ+Fmvt4LgtFpArjdTk9F7xi81u+jYFL/ruDmBIxU9rsSFsnwRGBIWBg3WJMOfmITWBNYE1gTWBNYfwj7VYABAEGGAslCGESFAAAAAElFTkSuQmCC"></div>';Cygnus={browser:$.browser,touch:Modernizr.touch,history:window.history,display:{width:$(window).width(),height:$(window).height()},advertisement:{useAdUnitGroups:false,adUnitGroups:{'COL1':{adUnitGroupId:0,adUnits:['ML','MR','HP']},'COL2':{adUnitGroupId:0,adUnits:['LB','MR','HP']},'COL3':{adUnitGroupId:0,adUnits:['BS','MR','HP','FL']}},frequencies:{sponsor:3},skips:{sponsor:1},sponsorTopicId:3,denyAds:{aliases:['WA','TO'],regEx:['reg\/register','reg\/login','reg\/logout','reg\/newsletter']},fallbackHtml:{'MS':globalFallbackHtml,'ML':globalFallbackHtml,'MR':globalFallbackHtml,'HP':globalFallbackHtml,'LB':globalFallbackHtml,'SL':globalFallbackHtml,'BS':globalFallbackHtml,}},view:{offsetTop:$('.fixed-top').exists()?$('.fixed-top').height()+12:0,offsetBottom:$('.fixed-bottom').exists()?$('.fixed-bottom').height():0,available:$(window).height()},transition:{supported:Modernizr.csstransitions,speed:250,animation:'easeInOutBounce'},columnMin:1,columnMax:3,columns:3,columnWidth:324,pageLimit:6,content:{display:'overlay',pagination:'horizontal',relatedLimit:Math.floor(($(window).height()-$('.header.fixed-top').height()-$('.advertisement.leaderboard').height()-70)/105)},grid:$('.content-grid'),social:{providers:'facebook,twitter,googleplus,linkedin',commentsUI:{useSiteLogin:true,onSiteLoginClicked:onSiteLoginHandler,scope:'both',width:620,showLoginBar:true,}},masonryParams:{itemSelector:'.grid-block',columnWidth:324,isOriginLeft:false},updateViewOffset:function(offsets)
{var offsetPadding=0;if(typeof offsets=='object')
{for(var k in offsets){if(offsets.hasOwnProperty(k)){if(offsets[k]>0)offsetPadding=12;if(k=='top')
{Cygnus.view.offsetTop=offsets[k]+offsetPadding;}
else if(k=='bottom')
{Cygnus.view.offsetBottom=offsets[k]-offsetPadding;}}}
Cygnus.view.available=$(window).height()-Cygnus.view.offsetTop-Cygnus.view.offsetBottom;}}};$(function(){Cygnus.view.available=$(window).height()-Cygnus.view.offsetTop-Cygnus.view.offsetBottom;});$(window).on('resize',function()
{var viewOffsets={top:$('.fixed-top').exists()?$('.fixed-top').height():0,bottom:$('.fixed-bottom').exists()?$('.fixed-bottom').height():0}
Cygnus.display.width=$(window).width();Cygnus.display.height=$(window).height();Cygnus.updateViewOffset(viewOffsets);})
/*! end app/merrick/themes/beta/js/cygnus.js*/

/*! start /app/merrick/lib/audioplayer/audioplayer.js*/
;(function($,window,document,undefined)
{var isTouch='ontouchstart'in window,eStart=isTouch?'touchstart':'mousedown',eMove=isTouch?'touchmove':'mousemove',eEnd=isTouch?'touchend':'mouseup',eCancel=isTouch?'touchcancel':'mouseup',secondsToTime=function(secs)
{var hours=Math.floor(secs/3600),minutes=Math.floor(secs%3600/60),seconds=Math.ceil(secs%3600%60);return(hours==0?'':hours>0&&hours.toString().length<2?'0'+hours+':':hours+':')+(minutes.toString().length<2?'0'+minutes:minutes)+':'+(seconds.toString().length<2?'0'+seconds:seconds);},canPlayType=function(file)
{var audioElement=document.createElement('audio');return!!(audioElement.canPlayType&&audioElement.canPlayType('audio/'+file.split('.').pop().toLowerCase()+';').replace(/no/,''));};$.fn.audioPlayer=function(params)
{var params=$.extend({classPrefix:'audioplayer',strPlay:'Play',strPause:'Pause',strVolume:'Volume',resizeOnFail:'true'},params),cssClass={},cssClassSub={playPause:'playpause',playing:'playing',time:'time',timeCurrent:'time-current',timeDuration:'time-duration',bar:'bar',barLoaded:'bar-loaded',barPlayed:'bar-played',volume:'volume',volumeButton:'volume-button',volumeAdjust:'volume-adjust',noVolume:'novolume',mute:'mute',mini:'mini'};for(var subName in cssClassSub)
cssClass[subName]=params.classPrefix+'-'+cssClassSub[subName];this.each(function()
{if($(this).prop('tagName').toLowerCase()!='audio')
return false;var $this=$(this),audioFile=$this.attr('src'),isAutoPlay=$this.get(0).getAttribute('autoplay'),isAutoPlay=isAutoPlay===''||isAutoPlay==='autoplay'?true:false,isLoop=$this.get(0).getAttribute('loop'),isLoop=isLoop===''||isLoop==='loop'?true:false,isSupport=false;if(typeof audioFile==='undefined')
{$this.find('source').each(function()
{audioFile=$(this).attr('src');if(typeof audioFile!=='undefined'&&canPlayType(audioFile))
{isSupport=true;return false;}});}
else if(canPlayType(audioFile))isSupport=true;if(!isSupport){console.log("The selected audio file is not supported. Audioplayer failed to load.");}
if(!params.resizeOnFail){isSupport=true;}
var thePlayer=$('<div class="'+params.classPrefix+'">'+(isSupport?$('<div>').append($this.eq(0).clone()).html():'<embed src="'+audioFile+'" width="0" height="0" type="audio/x-pn-realaudio-plugin" volume="100" autostart="'+isAutoPlay.toString()+'" loop="'+isLoop.toString()+'" />')+'<div class="'+cssClass.playPause+'" title="'+params.strPlay+'"><a href="#">'+params.strPlay+'</a></div></div>'),theAudio=isSupport?thePlayer.find('audio'):thePlayer.find('embed'),theAudio=theAudio.get(0);if(params.resizeOnFail&&isSupport!=true){thePlayer=$('<div class="'+params.classPrefix+' fallback">'+(isSupport?$('<div>').append($this.eq(0).clone()).html():'<embed src="'+audioFile+'" width="0" height="0" type="audio/x-pn-realaudio-plugin" volume="100" autostart="'+isAutoPlay.toString()+'" loop="'+isLoop.toString()+'" />')+'</div>')}
if(isSupport)
{thePlayer.find('audio').css({'width':0,'height':0,'visibility':'hidden'});thePlayer.append('<div class="'+cssClass.time+' '+cssClass.timeCurrent+'"></div><div class="'+cssClass.bar+'"><div class="'+cssClass.barLoaded+'"></div><div class="'+cssClass.barPlayed+'"></div></div><div class="'+cssClass.time+' '+cssClass.timeDuration+'"></div><div class="'+cssClass.volume+'"><div class="'+cssClass.volumeButton+'" title="'+params.strVolume+'"><a href="#">'+params.strVolume+'</a></div><div class="'+cssClass.volumeAdjust+'"><div><div></div></div></div></div>');var theBar=thePlayer.find('.'+cssClass.bar),barPlayed=thePlayer.find('.'+cssClass.barPlayed),barLoaded=thePlayer.find('.'+cssClass.barLoaded),timeCurrent=thePlayer.find('.'+cssClass.timeCurrent),timeDuration=thePlayer.find('.'+cssClass.timeDuration),volumeButton=thePlayer.find('.'+cssClass.volumeButton),volumeAdjuster=thePlayer.find('.'+cssClass.volumeAdjust+' > div'),volumeDefault=0,adjustCurrentTime=function(e)
{theRealEvent=isTouch?e.originalEvent.touches[0]:e;theAudio.currentTime=Math.round((theAudio.duration*(theRealEvent.pageX-theBar.offset().left))/theBar.width());},adjustVolume=function(e)
{theRealEvent=isTouch?e.originalEvent.touches[0]:e;theAudio.volume=Math.abs((theRealEvent.pageY-(volumeAdjuster.offset().top+volumeAdjuster.height()))/volumeAdjuster.height());},updateLoadBar=setInterval(function()
{if(theAudio.duration&&theAudio.buffered.length){barLoaded.width((theAudio.buffered.end(0)/theAudio.duration)*100+'%');if(theAudio.buffered.end(0)>=theAudio.duration)
clearInterval(updateLoadBar);}},100);var volumeTestDefault=theAudio.volume,volumeTestValue=theAudio.volume=0.111;if(Math.round(theAudio.volume*1000)/1000==volumeTestValue)theAudio.volume=volumeTestDefault;else thePlayer.addClass(cssClass.noVolume);timeDuration.html('&hellip;');timeCurrent.text(secondsToTime(0));theAudio.addEventListener('loadeddata',function()
{timeDuration.text(secondsToTime(theAudio.duration));volumeAdjuster.find('div').height(theAudio.volume*100+'%');volumeDefault=theAudio.volume;});theAudio.addEventListener('timeupdate',function()
{timeCurrent.text(secondsToTime(theAudio.currentTime));barPlayed.width((theAudio.currentTime/theAudio.duration)*100+'%');});theAudio.addEventListener('volumechange',function()
{volumeAdjuster.find('div').height(theAudio.volume*100+'%');if(theAudio.volume>0&&thePlayer.hasClass(cssClass.mute))thePlayer.removeClass(cssClass.mute);if(theAudio.volume<=0&&!thePlayer.hasClass(cssClass.mute))thePlayer.addClass(cssClass.mute);});theAudio.addEventListener('ended',function()
{thePlayer.removeClass(cssClass.playing);});theBar.on(eStart,function(e)
{adjustCurrentTime(e);theBar.on(eMove,function(e){adjustCurrentTime(e);});}).on(eCancel,function()
{theBar.unbind(eMove);});volumeButton.on('click',function()
{if(thePlayer.hasClass(cssClass.mute))
{thePlayer.removeClass(cssClass.mute);theAudio.volume=volumeDefault;}
else
{thePlayer.addClass(cssClass.mute);volumeDefault=theAudio.volume;theAudio.volume=0;}
return false;});volumeAdjuster.on(eStart,function(e)
{adjustVolume(e);volumeAdjuster.on(eMove,function(e){adjustVolume(e);});}).on(eCancel,function()
{volumeAdjuster.unbind(eMove);});}
if(isAutoPlay)thePlayer.addClass(cssClass.playing);thePlayer.find('.'+cssClass.playPause).on('click',function()
{if(thePlayer.hasClass(cssClass.playing))
{$(this).attr('title',params.strPlay).find('a').html(params.strPlay);thePlayer.removeClass(cssClass.playing);isSupport?theAudio.pause():theAudio.Stop();}
else
{$(this).attr('title',params.strPause).find('a').html(params.strPause);thePlayer.addClass(cssClass.playing);isSupport?theAudio.play():theAudio.Play();}
return false;});$this.replaceWith(thePlayer);});return this;};})(jQuery,window,document);
/*! end /app/merrick/lib/audioplayer/audioplayer.js*/

/*! start app/merrick/themes/beta/js/content.js*/
var timer=false;var profile=false;var Content=(function()
{var
defaults={},height;function init(options)
{var options=$.extend(defaults,options);initPlugins();initEvents(options);}
function initPlugins(options)
{}
function initEvents(options)
{Display=new Display();$(window).on('load resize',function(){setSidebarHeight()
variableVideoInit();if($('.single-content').exists())$('.single-content:first').addClass('active');})}
function getAjax(el,params,action)
{$.ajax({url:el.attr('href')+'?action='+action+''}).done(function(response)
{Display.append(el,params,response);Display.activate(el);window.dynamicTriggers=$('.dynamic-trigger');setSidebarHeight();})}
function open($item)
{if(profile)console.profile('Display.open');if(timer)timerStart('Display.open',timer);display=new Display();display.open();if(profile)console.profileEnd();if(timer)timerEnd('Display.open',timer);}
function close($item)
{if(profile)console.profile('Display.close');if(timer)timerStart('Display.close',timer);display=new Display();display.close();if(profile)console.profileEnd();if(timer)timerEnd('Display.close',timer);}
function update($item)
{if(profile)console.profile('Display.update');if(timer)timerStart('Display.update',timer);display=new Display();display.update();if(profile)console.profileEnd();if(timer)timerEnd('Display.update',timer);}
function initCarousel(content_id)
{if(profile)console.profile('initCarousel');if(timer)timerStart('initCarousel',timer);var Carousel=new Swiper('.swiper-container-'+content_id+'',{loop:true,grabCursor:false,paginationClickable:true,calculateHeight:true});$('.carousel-container-'+content_id+'').find('.arrow-left').on('click',function(ev)
{ev.preventDefault()
Carousel.swipePrev()})
$('.carousel-container-'+content_id+'').find('.arrow-right').on('click',function(ev)
{ev.preventDefault()
Carousel.swipeNext()})
if(profile)console.profileEnd();if(timer)timerEnd('initCarousel',timer);}
function setSidebarHeight()
{$('.content-related').each(function(){var params={isContentSidebar:$(this).parent().is('.content-full'),hasParent:$(this).parent().is('.grid-block'),parentHeight:$(this).parent('.grid-block').height(),availableHeight:$(this).parent('.grid-block').height()-$(this).find('.navigation').outerHeight(true)-$(this).find('.sidebar-search').outerHeight(true),hasCategories:$(this).find('.navigation-tertiary').exists(),screenHeight:$(window).height()-$('.fixed-top').height()-$('.fixed-bottom').height()-12,relatedLimit:10}
if(params.parentHeight>params.screenHeight&&params.isContentSidebar)params.shouldStick=true;if(!params.hasParent)
{$(this).css({height:600}).promise().done(function(){Page.reloadGrid();if($(this).find('.navigation-tertiary'))
{if($(this).find('.sidebar .directory .filters'))
{$(this).find('.navigation-tertiary').css({height:$(this).height()-40-$('.sidebar-search').height()-$('.sidebar .directory.toogle .filters').height()})}else
{$(this).find('.navigation-tertiary').css({height:$(this).height()-40-$('.sidebar-search').height()})}
var active=$('.navigation.scroll-y').find('.active').first();if($('.navigation.scroll-y').find('.active').exists())$('.navigation.scroll-y').scrollTo(active);}});return}
else if(((params.relatedLimit*105)+24>(params.screenHeight)||(params.relatedLimit*105)+24>(params.parentHeight))&&!params.hasCategories)
{if(params.screenHeight>params.parentHeight)
{count=Math.floor((params.parentHeight-60)/107);height=count*105+36;}
else
{count=Math.floor((params.screenHeight-60)/107);height=count*105+36;}}
else if($(this).find('.navigation-tertiary').exists())
{if(params.parentHeight>params.screenHeight){height=params.screenHeight-46;}
else
{height=params.parentHeight-24;}}
else
{height=Cygnus.content.relatedLimit*105+36;}
if(params.screenHeight<height)height=height-105;if(height<245)
{height=245;}
$(this).css({height:height,marginBottom:params.screenHeight-height-12}).promise().done(function(){Page.reloadGrid();if($(this).find('.navigation-tertiary'))
{if($(this).find('.sidebar .directory .filters'))
{$(this).find('.navigation-tertiary').css({height:$(this).height()-40-$('.sidebar-search').height()-$('.sidebar .directory.toogle .filters').height()})}else
{$(this).find('.navigation-tertiary').css({height:$(this).height()-40-$('.sidebar-search').height()})}
var active=$('.navigation.scroll-y').find('.active').first();if($('.navigation.scroll-y').find('.active').exists())$('.navigation.scroll-y').scrollTo(active);}});})}
function variableVideoInit()
{var
$allVideos=$(".video-block iframe, .video-block object, .video-block embed"),$fluidEl=$(".video-block figure");$allVideos.each(function(){var ratio=9/16;$(this).attr('data-aspectRatio',ratio).removeAttr('height').removeAttr('width');var newWidth=$('.video-block').width();$(this).width(newWidth).height(newWidth*$(this).attr('data-aspectRatio'));});$(window).on('load, resize',function(){var newWidth=$('.video-block').width();$allVideos.each(function(){var $el=$(this);$el.width(newWidth).height(newWidth*$el.attr('data-aspectRatio'));});});}
function Display(el,params)
{if(this.isDisplayed)return'content is already displayed';}
Display.prototype={activate:function(el,params)
{$('.content-block.active').removeClass('active');el.parents('.content-block').addClass('active');},close:function(el,params)
{console.log('close')
el.parents('.content-full').remove();Page.reloadGrid();},create:function(el,params)
{params.container=$('<section class="grid-block w-6 content-wrapper full content-full" data-offset="59" data-id="'+params.content_id+'"><article class="block w-4 pull-right content-container single-content loading placeholder"></article><aside class="block w-2 pull-left list-wrapper content-related sidebar sidebar-left sticky-top loading placeholder" data-container=".content-wrapper"></aside></section>');var block=params.block;block.before(params.container);block.remove();Page.reloadGrid();$.scrollTo(params.container,Cygnus.transition.speed,{offset:-(Cygnus.view.offsetTop+12),onAfter:function()
{getAjax(el,params,'get_content');}})},update:function(el,params)
{getAjax(el,params,'get_content_body');params.container=el.parents('.content-related').prev('.single-content').parent('.content-full');el.parents('.content-related').prev('.single-content').remove();},open:function(el,params)
{},append:function(el,params,response)
{params.container.find('.placeholder').remove();params.container.prepend(response).promise().done(function()
{Page.reloadGrid();$.scrollTo('.single-content[data-id='+params.content_id+']',Cygnus.transition.speed,{offset:-(Cygnus.view.offsetTop+12),onAfter:function()
{}})});},isDisplayed:function(el,params)
{return $('.single-content[data-id='+params.content_id+']').exists();},isRelated:function(el,params)
{return el.parent('.content-name').hasClass('related');},calcHeight:function(el,params)
{}}
function onCommentsDrawn(eventObj){Page.reloadGrid();setSidebarHeight();}
function showComments(targetElementId){var Related=$('#'+targetElementId);var commentsUIParams=Cygnus.social.commentsUI;commentsUIParams.enabledShareProviders=Cygnus.social.providers;commentsUIParams.categoryID=Related.data('categoryid');commentsUIParams.streamID=Related.data('streamid');commentsUIParams.containerID=Related.attr('id');commentsUIParams.cid=Related.data('cid');commentsUIParams.onLoad=Content.onCommentsDrawn;gigya.comments.showCommentsUI(commentsUIParams);}
return{init:init,open:open,close:close,update:update,initCarousel:initCarousel,setSidebarHeight:setSidebarHeight,showComments:showComments,onCommentsDrawn:onCommentsDrawn}})();Content.init();function pauseVideo(){alert('pause');if((typeof(window.videoPlayers)=='object')){$.each(window.videoPlayers,function(i,player){if(player.source=='brightcove'){pauseBrightcoveVideo(player.instance);}else if(player.source=='youtube'){pauseYouTubeVideo(player.instance);}});}}
function pauseYouTubeVideo(instanceId){window.youTubeVideoPlayers[instanceId].stopVideo();return false;}
function pauseBrightcoveVideo(experienceId){var experience=brightcove.getExperience(experienceId);var videoPlayer=experience.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);videoPlayer.pause(true);return false;}
function initVideoPlayer(videoInitObj){var content_id=videoInitObj.data('content-id');var media_id=videoInitObj.data('media-id');if((typeof(window.videoPlayers)=='undefined')){window.videoPlayers=new Array;}
var player={}
player.container='video-player__'+content_id+'_'+media_id;;player.source=videoInitObj.data('source');player.instance=player.source+'__'+player.container;player.width=videoInitObj.width();player.height=videoInitObj.height();player.media=contentCache[content_id]['media'][media_id];window.videoPlayers.push(player);$('#'+player.container).width(player.width).height(player.height).addClass('loading').prevAll('.rmi').hide();videoInitObj.hide();loadVideoPlayer(player);}
function loadVideoPlayer(player){if(player.source=='brightcove'){loadBrightcoveVideoPlayer(player);}else if(player.source=='youtube'){loadYouTubeVideoPlayer(player);}else if(player.source=='treepodia'){initTreepodiaVideoPlayer(player);}}
function loadYouTubeVideoPlayer(player){if((typeof(window.youTubeVideoPlayers)=='undefined')){window.youTubeVideoPlayers=new Array;}
$('#'+player.container).append('<div id="'+player.instance+'"></div>');window.youTubeVideoPlayers[player.instance]=new YT.Player(player.instance,{height:player.height,width:player.width,videoId:player.media.fields.source_id,events:{'onReady':onYouTubePlayerReady,'onStateChange':onYouTubePlayerStateChange},playerVars:{'wmode':'transparent',}});}
function onYouTubePlayerReady(event){}
function onYouTubePlayerStateChange(event){}
function loadBrightcoveVideoPlayer(player){var params={};params.publisherID="1660628632";params.playerID=player.media.fields.brightcove_player_id;params.videoId=player.media.fields.source_id;params.autoStart="true";params.bgcolor="#FFFFFF";params.width=player.width;params.height=player.height;params.wmode="transparent";params.isVid="true";params.isUI="true";params.dynamicStreaming="true";params.autoStart="false";params.includeAPI="true";var bcPlayer=brightcove.createElement("object");bcPlayer.id=player.instance;var parameter;for(var i in params){parameter=brightcove.createElement("param");parameter.name=i;parameter.value=params[i];bcPlayer.appendChild(parameter);}
var playerContainer=document.getElementById(player.container);brightcove.createExperience(bcPlayer,playerContainer,true);}
if(!Cygnus.touch)
{$(window).on('load scroll resize',function(){Cygnus.updateViewOffset();var stickies=$('.sticky-top');stickies.each(function(){var $this=$(this);var $container=$this.parent($this.data('container'));var scrollTop=(document.documentElement.scrollTop||document.body.scrollTop),elOffsetTop=$container.offset().top,elH=$container.height(),winH=(window.innerHeight&&window.innerHeight<$(window).height())?window.innerHeight:$(window).height();function containerTopAboveViewport(){return(-$('.fixed-top').height()-4+elOffsetTop<scrollTop);};function containerTopBelowViewport(){return($('.fixed-bottom').height()+elOffsetTop>scrollTop+winH);};function containerTopInViewport(){return(!containerTopAboveViewport()&&!containerTopBelowViewport());};function containerBottomAboveViewport(){return(-$('.fixed-top').height()-4+elOffsetTop+elH<scrollTop);};function containerBottomBelowViewport(){return($('.fixed-bottom').height()+elOffsetTop+elH>scrollTop+winH);};function containerBottomInViewport(){return(!containerBottomAboveViewport()&&!containerBottomBelowViewport());};var position=$this.data('position');var top=$this.data('top');if($container.height()<=$(window).height()-$('.fixed-top').height()-$('.fixed-bottom').height())
{$this.data('position','static');$this.removeClass('fixed absolute bottom').css({top:'',bottom:''})
return;}
if(containerBottomInViewport()||containerBottomAboveViewport())
{$this.data('position','absolute');if($this.height()+24>=$container.height())
{$this.removeClass('fixed').addClass('absolute bottom').css({top:'',bottom:''});}
else
{$this.removeClass('fixed').addClass('absolute bottom').css({top:'auto',bottom:0});}}
else
if(containerTopAboveViewport()&&!containerBottomInViewport())
{$this.data('position','fixed');$this.addClass('fixed ').removeClass('absolute bottom').css({top:54})}
else
{$this.data('position','static');$this.removeClass('fixed absolute bottom').css({top:'',bottom:''})}})})}
function registration_setBGToken(){var url='/reg/bgtoken/set';$.ajax({type:"GET",url:url,cache:false,success:function(response){if(response&&response.form_time){$('#field_form_time').val(response.form_time.value);}}});}
$(window).on('scroll',function(){var $triggers=$('.single-content').not('.active');$triggers.each(function(){$trigger=$(this);$next=$trigger.next('.single-content');var topOutViewport=$trigger.is(':topOutViewport');var nextTopOutViewport=$next.is(':topOutViewport');var active=$trigger.data('active');if(topOutViewport&&!nextTopOutViewport&&!active){$('.content.active').removeClass('active');$trigger.addClass('active');$('.list-content[data-id="'+$trigger.data('id')+'"]').addClass('active');var params={id:$trigger.data('id'),title:$trigger.data('title'),url:$trigger.data('url')};if(window.history&&typeof window.history.replaceState=='function'){window.history.replaceState({},$trigger.data('title'),$trigger.data('url'));}}})})
$(window).on('load scroll',function(){var commentsBlocks=$('.comments-container.clickable').not('.clicked').each(function(){if($(this).is(':topInViewport')||$(this).is(':bottomInViewport')){$(this).addClass('clicked').click();}});});
/*! end app/merrick/themes/beta/js/content.js*/

/*! start app/merrick/themes/beta/js/navigation.js*/
var timer=false;var profile=false;var channelWidth=0;var Navigation=(function()
{var
defaults={},url={host:window.location.host,path:window.location.pathname,parts:window.location.pathname.split('/')};function init(options)
{var options=$.extend(defaults,options);if($('.single-content .tag').exists())
{url={host:window.location.host,path:$('.single-content .tag').attr('href'),parts:$('.single-content .tag').attr('href').split('/')}}
initEvents(options);}
function initEvents(options)
{$(function()
{if($('.sidebar .navigation-primary').exists())$('.sidebar .navigation-primary').addClass('navigation-dropdown dropdown clickable').removeClass('navigation-primary')
checkNavBoundaries();setActive();$('.navigation').on('click',function(){if(!$(this).hasClass('dropdown'))return;if($(this).hasClass('open-view'))
{closeMenus();return;}
else
{closeMenus();$(this).addClass('open-view');}});if($('.sidebar.sidebar-left .clickable').exists()){console.log('found sidebar-left');$('.sidebar.sidebar-left .clickable').addClass('sidebar-title').removeClass('navigation-dropdown dropdown clickable')}
if($('.navigation.categories')&&$('.navigation.categories').find('.active')){$('.navigation.categories').find('.active').next('.navigation-quarternary').removeClass('hidden')
$('.navigation.categories').find('.active').parent('.navigation-item').parent('.navigation-quarternary').removeClass('hidden')
$('.navigation.navigation-quarternary.categories').find('.active').parent('.navigation-item').siblings('.navigation-item').removeClass('hidden')
$('.navigation.categories').find('.show-all').removeClass('hidden');}})
$('#tooltip-menu .tooltip-trigger').click(function(e){e.preventDefault();if($(this).hasClass('selected')){Navigation.closeMenus();Page.hideOverlay();}else{Navigation.closeMenus();$(this).addClass('selected').parent().addClass('tooltip-show');$(this).siblings().find('input:first').focus();$('.tooltip-submenu').css({maxHeight:Cygnus.display.height-$('.footer.fixed-top').height()-68})
Page.showOverlay();}});$(window).on('resize',function()
{checkNavBoundaries();})
$('.page-overlay').on('click',function()
{closeMenus();Page.hideOverlay();})
$(window).on('load',function(){var active=$('.navigation.scroll-y').find('.active').last();if($('.navigation.scroll-y').find('.active').parent('.navigation-item').prev('.navigation-item').exists()){$('.navigation.scroll-y').scrollTo(active.parent('.navigation-item').prev('.navigation-item'));}})}
function setActive()
{for(var i=1;i<url.parts.length;i++)
{url.parts[i]='/'+url.parts[i];}
$('.navigation-link').each(function()
{var href=$(this).attr('href');if(href==url.path||$.inArray(href,url.parts)>-1)
{$(this).addClass('active');if($(this).parents('.header').exists())$('.navigation-dropdown .navigation-active').text($(this).text());}})}
function togglePrimaryDropdown(columns){}
function checkNavBoundaries(){if(channelWidth==0){if($('body').hasClass('one-col'))return;var logoW=$('.header .navigation-item.brand-logo-container').width();var tooltipW=$('.header .tooltip-container').width();$('.header .navigation-primary').css({left:logoW+5,right:tooltipW+5})
var navChildren=$('.header .navigation-primary').children('.navigation-item');if(logoW==0){logoW=160;}
var navbarW=logoW+tooltipW+15;for(var x=0;x<navChildren.length;x++){if($(navChildren[x]).hasClass('open-icon'))continue;navbarW+=$(navChildren[x]).width();navbarW+=5;}
channelWidth=navbarW;}
if(channelWidth>=Cygnus.display.width){$('.header .navigation-primary').addClass('navigation-dropdown dropdown clickable').removeClass('navigation-primary');}else{$('.header .navigation-dropdown.dropdown.clickable').removeClass('navigation-dropdown dropdown clickable').addClass('navigation-primary');}}
function closeMenus()
{$('.open-view').removeClass('open-view');$('.tooltip-show').removeClass('tooltip-show');$('.tooltip-trigger').removeClass('selected');$('.mobile-menu .menu-trigger').removeClass('selected');}
return{init:init,togglePrimaryDropdown:togglePrimaryDropdown,checkNavBoundaries:checkNavBoundaries,closeMenus:closeMenus}})();Navigation.init();
/*
 * classie - class helper functions
 * from bonzo https://github.com/ded/bonzo
 * 
 * classie.has( elem, 'my-class' ) -> true/false
 * classie.add( elem, 'my-new-class' )
 * classie.remove( elem, 'my-unwanted-class' )
 * classie.toggle( elem, 'my-class' )
 */
(function(window){'use strict';function classReg(className){return new RegExp("(^|\\s+)"+className+"(\\s+|$)");}
var hasClass,addClass,removeClass;if('classList'in document.documentElement){hasClass=function(elem,c){return elem.classList.contains(c);};addClass=function(elem,c){elem.classList.add(c);};removeClass=function(elem,c){elem.classList.remove(c);};}
else{hasClass=function(elem,c){return classReg(c).test(elem.className);};addClass=function(elem,c){if(!hasClass(elem,c)){elem.className=elem.className+' '+c;}};removeClass=function(elem,c){elem.className=elem.className.replace(classReg(c),' ');};}
function toggleClass(elem,c){var fn=hasClass(elem,c)?removeClass:addClass;fn(elem,c);}
var classie={hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,has:hasClass,add:addClass,remove:removeClass,toggle:toggleClass};if(typeof define==='function'&&define.amd){define(classie);}else{window.classie=classie;}})(window);;(function(window){'use strict';function mobilecheck(){var check=false;(function(a){if(/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true})(navigator.userAgent||navigator.vendor||window.opera);return check;}
function gnMenu(el,options){this.el=el;this._init();}
gnMenu.prototype={_init:function(){this.trigger=this.el.querySelector('a.menu-trigger');this.menu=this.el.querySelector('nav.menu-wrapper');this.isMenuOpen=false;this.eventtype=mobilecheck()?'touchstart':'click';this._initEvents();var self=this;this.bodyClickFn=function(){self._closeMenu();this.removeEventListener(self.eventtype,self.bodyClickFn);};},_initEvents:function(){var self=this;if(!mobilecheck()){this.trigger.addEventListener('mouseover',function(ev){self._openMenu();});this.trigger.addEventListener('mouseout',function(ev){self._closeMenu();});this.menu.addEventListener('mouseover',function(ev){self._openMenu();document.addEventListener(self.eventtype,self.bodyClickFn);});}
this.trigger.addEventListener(this.eventtype,function(ev){ev.stopPropagation();ev.preventDefault();if(self.isMenuOpen){self._closeMenu();document.removeEventListener(self.eventtype,self.bodyClickFn);}
else{self._openMenu();document.addEventListener(self.eventtype,self.bodyClickFn);}});this.menu.addEventListener(this.eventtype,function(ev){ev.stopPropagation();});},_openMenu:function(){if(this.isMenuOpen)return;classie.add(this.trigger,'selected');this.isMenuOpen=true;classie.add(this.menu,'open-all');this._closeIconMenu();},_closeMenu:function(){if(!this.isMenuOpen)return;classie.remove(this.trigger,'selected');this.isMenuOpen=false;classie.remove(this.menu,'open-all');this._closeIconMenu();}}
window.gnMenu=gnMenu;})(window);$(document).on('click','.navigation-item.sub-menu-header',function(e){$('.navigation-item.dropdown .navigation-secondary').toggleClass('show-menu');});$('.mobile-menu > .menu-trigger').click(function(e){if($('.mobile-menu > .menu-wrapper-sub').hasClass('open-all')){Navigation.closeMenus();}else{Navigation.closeMenus();$(this).addClass('selected');$('.mobile-menu > .menu-wrapper-sub').addClass('open-all');}});$('.tooltip-item.monkey .tooltip-trigger').click(function(e){var ajax_active=$.cookie('ajax');if(ajax_active=='true'){document.cookie='ajax=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';$('.monkey a').attr('style','color: #FFF');}else{$.cookie('ajax',true);$('.monkey a').attr('style','color: rgb(118,167,195);');}});$(document).on('click','.sub-menu-trigger',function(e){e.preventDefault();if($(this).hasClass('active')){Page.hideOverlay();$(this).removeClass('sub-menu-open active').find('.icon').toggleClass('icon-caret-right icon-caret-down').parent('.navigation-link').removeClass('active').next('.sub-menu').addClass('hidden');$(this).parents('.scroll-y').scrollTo($(this),500);return;}else{Page.showOverlay();$(this).parents('.scroll-y').scrollTo('0px',500);$(this).addClass('sub-menu-open active').find('.icon').toggleClass('icon-caret-right icon-caret-down').parent('.navigation-link').addClass('active').next('.sub-menu').removeClass('hidden');}});;(function(window){'use strict';var document=window.document,docElem=document.documentElement;function extend(a,b){for(var key in b){if(b.hasOwnProperty(key)){a[key]=b[key];}}
return a;}
function getViewportH(){var client=docElem['clientHeight'],inner=window['innerHeight'];if(client<inner)
return inner;else
return client;}
function getOffset(el){return el.getBoundingClientRect();}
function isMouseLeaveOrEnter(e,handler){if(e.type!='mouseout'&&e.type!='mouseover')return false;var reltg=e.relatedTarget?e.relatedTarget:e.type=='mouseout'?e.toElement:e.fromElement;while(reltg&&reltg!=handler)reltg=reltg.parentNode;return(reltg!=handler);}
function cbpTooltipMenu(el,options){this.el=el;this.options=extend(this.defaults,options);this._init();}
cbpTooltipMenu.prototype={defaults:{delayMenu:100},_init:function(){this.touch=Modernizr.touch;this.menuItems=document.querySelectorAll('#'+this.el.id+' > li');this._initEvents();},_initEvents:function(){var self=this;Array.prototype.slice.call(this.menuItems).forEach(function(el,i){var trigger=el.querySelector('a');if(self.touch){trigger.addEventListener('click',function(ev){self._handleClick(this,ev);});}
else{trigger.addEventListener('click',function(ev){if(this.parentNode.querySelector('ul.tooltip-submenu')){ev.preventDefault();}});el.addEventListener('mouseover',function(ev){if(isMouseLeaveOrEnter(ev,this))self._openMenu(this);});el.addEventListener('mouseout',function(ev){if(isMouseLeaveOrEnter(ev,this))self._closeMenu(this);});}});},_openMenu:function(el){var self=this;clearTimeout(this.omtimeout);this.omtimeout=setTimeout(function(){var submenu=el.querySelector('ul.tooltip-submenu');if(submenu){el.className='tooltip-show';if(self._positionMenu(el)==='top'){el.className+=' tooltip-show-above';}
else{el.className+=' tooltip-show-below';}}},this.touch?0:this.options.delayMenu);},_closeMenu:function(el){clearTimeout(this.omtimeout);var submenu=el.querySelector('ul.tooltip-submenu');if(submenu){el.className=el.className.replace(new RegExp("(^|\\s+)"+"tooltip-show"+"(\\s+|$)"),' ');el.className=el.className.replace(new RegExp("(^|\\s+)"+"tooltip-show-below"+"(\\s+|$)"),' ');el.className=el.className.replace(new RegExp("(^|\\s+)"+"tooltip-show-above"+"(\\s+|$)"),' ');}},_handleClick:function(el,ev){var item=el.parentNode,items=Array.prototype.slice.call(this.menuItems),submenu=item.querySelector('ul.tooltip-submenu')
if(typeof this.current!=='undefined'&&items.indexOf(item)!==this.current){this._closeMenu(this.el.children[this.current]);this.el.children[this.current].querySelector('ul.tooltip-submenu').setAttribute('data-open','false');}
if(submenu){ev.preventDefault();var isOpen=submenu.getAttribute('data-open');if(isOpen==='true'){this._closeMenu(item);submenu.setAttribute('data-open','false');}
else{this._openMenu(item);this.current=items.indexOf(item);submenu.setAttribute('data-open','true');}}},_positionMenu:function(el){var vH=getViewportH(),ot=getOffset(el),spaceUp=ot.top,spaceDown=vH-spaceUp-el.offsetHeight;return(spaceDown<=spaceUp?'top':'bottom');}}
window.cbpTooltipMenu=cbpTooltipMenu;})(window);
/*! end app/merrick/themes/beta/js/navigation.js*/

/*! start app/merrick/themes/beta/js/section.js*/
var timer=false;var profile=false;var Section=(function()
{var
defaults={};function init(options)
{var options=$.extend(defaults,options);initEvents(options);}
function initEvents(options)
{$(window).on("load",function()
{if($('.section-trigger').exists())$('.section-trigger').data('triggered',true);},250)
$(window).on("scroll",checkTrigger);}
function checkTrigger()
{var trigger=$('.section-trigger').is(':topOutViewport');var triggered=$('.section-trigger').data('triggered');if(trigger&&!triggered)
{$('.section-trigger').data('triggered',true);var params={id:$('.section-trigger').data('id'),url:$('.section-trigger').data('url'),title:$('.section-trigger').text()}
if(window.history&&typeof window.history.replaceState=='function'){window.history.replaceState({},$('.section-trigger').text(),$('.section-trigger').data('url'));}}else
if(!trigger&&triggered)
{if($('.section-trigger').parent().prevAll('.content-wrapper').find('.single-content.active').exists())
{$('.section-trigger').data('triggered',false);$trigger=$('.section-trigger').parent().prevAll('.content-wrapper').find('.single-content.active');var params={id:$trigger.data('id'),title:$trigger.data('title'),url:$trigger.data('url')};if(window.history&&typeof window.history.replaceState=='function'){window.history.replaceState({},$trigger.data('title'),$trigger.data('url'));}}
else
{return;}}}
return{init:init}})();Section.init();
/*! end app/merrick/themes/beta/js/section.js*/

/*! start app/merrick/themes/beta/js/functions.js*/
function init_ready(event)
{};function init_load(event)
{};function init_resize(event)
{};function init_resizeStart(event)
{};function init_resizeStop(event)
{};function init_scroll(event)
{};function init_scrollStart(event)
{};function init_scrollStop(event)
{};function init_click(event)
{};
/*! end app/merrick/themes/beta/js/functions.js*/

/*! start app/merrick/themes/beta/js/theme.js*/

/*! end app/merrick/themes/beta/js/theme.js*/

/*! start app/merrick/themes/beta/js/helpers.js*/
function init_resizeStart(event)
{$('body, .grid-wrapper').removeClass('inactive');$('.menu-trigger').removeClass('selected');$('.menu-wrapper').removeClass('open-all');$('body').removeClass('show-left-menu');$('.selected').removeClass('selected')
$('.tooltip-show').removeClass('tooltip-show');};$(function(){window.dynamicTriggers=$('.dynamic-trigger').first();$(window).on('load scroll',function()
{window.dynamicTriggers.each(function(event)
{var $dynamicTrigger=$(this);var inviewport=$dynamicTrigger.is(':topInViewport');if($dynamicTrigger.data('trigger')=='click')return;if(inviewport&&!$dynamicTrigger.data('displayed')&&!$dynamicTrigger.data('loading')){$dynamicTrigger.data('loading',true);if($dynamicTrigger.data('trigger')=='single')$dynamicTrigger.data('displayed',true);ajaxLoad($dynamicTrigger);}
else return;})})},250)
$(function(){$('.dynamic-trigger').on('click',function(){var $trigger=$(this);$(this).addClass('loading').find('.title').text('Loading')
ajaxLoad($trigger)})})
function ajaxLoad($trigger)
{var page=parseInt($trigger.data('page'));var append=$trigger.data('append');var url;if(page){url=$trigger.data('src')+'&page='+page;}
else{url=$trigger.data('src');}
$.ajax({url:url,async:false}).done(function(response)
{var pageContainer=$('<div class="page full page-'+page+'" data-page="'+page+'"></div>').html(response);$trigger.data('page',++page);if(append)
{$('.grid-wrapper').append(response).promise().done(function(){if($trigger.data('trigger')=='single')$trigger.removeClass('loading loading-medium h-10').addClass('block').find('.title').text('Load More');if($trigger.data('trigger')=='click')$trigger.removeClass('loading loading-medium').addClass('block').find('.title').text('Load More');if($trigger.data('trigger')=='replace')$trigger.remove();if($trigger.data('hide'))$trigger.hide();Page.appendItems(response);$trigger.data('loading',false);window.pageTriggers=$('.page-trigger');window.pageBreaks=$('.break-line');window.dynamicTriggers=$('.dynamic-trigger').first();Content.setSidebarHeight();Page.setDetectContext();})}
else
{$trigger.before(response).promise().done(function(){if(!$('.dynamic-trigger').exists())return;if($trigger.data('trigger')=='single')$trigger.removeClass('loading loading-medium h-10').addClass('block').find('.title').text('Load More');if($trigger.data('trigger')=='click')$trigger.removeClass('loading loading-medium').addClass('block').find('.title').text('Load More');if($trigger.data('trigger')=='replace')$trigger.remove();if($trigger.data('hide'))$trigger.hide();Page.appendItems(response);$trigger.data('loading',false);window.pageTriggers=$('.page-trigger');window.pageBreaks=$('.break-line');window.dynamicTriggers=$('.dynamic-trigger').first();Content.setSidebarHeight();Page.setDetectContext();})}})}
$(function()
{$('#location').on('keyup',function(ev){if($(this).val().length<3)return;var searchTerm=$(this).val().replace(' ','');if($(this).val().replace(' ','').match(/^[a-zA-Z]+$/)){var url='http://api.geonames.org/postalCodeSearchJSON?placename_startsWith='+$(this).val()+'&country=CA&country=US&maxRows=20&username=cygnus1233';}else{var url='http://api.geonames.org/postalCodeSearchJSON?postalcode_startsWith='+$(this).val()+'&country=CA&country=US&maxRows=20&username=cygnus1233';}
console.log(url);$.ajax({url:url,dataType:"jsonp",}).done(function(data){$('.ajax-results').html('')
console.log(data);if(data.postalCodes.length>1){$('.ajax-results').prepend('<h2 class="full standard">Select City: </h2> ');}
if(data.postalCodes.length==1&&ev.keyCode==13){$.map(data.postalCodes,function(item){console.log(item);var fancyName=item.placeName+' '+item.adminCode1+', '+item.postalCode;$('.ajax-results').html('');$('#geo').val(item.lat+','+item.lng);$('#location').val(fancyName);getSearchResults()});}else{$.map(data.postalCodes,function(item){var fancyName=item.placeName+' '+item.adminCode1+', '+item.postalCode;$('.ajax-results').append('<span class="button ajax-button full clickable" data-name="'+fancyName+'" data-coords="'+item.lat+','+item.lng+'">'+fancyName+'</span><br > ');});}
Page.reloadGrid();});})
$('.ajax-results').on('click','.ajax-button',function(ev){ev.preventDefault();$('.ajax-results').html('');$('#geo').val($(this).data('coords'));$('#location').val($(this).data('name'));getSearchResults()})
$('#range').on('change',function(){getSearchResults()});$('#term_vocabs').on('change',function(){getSearchResults()});$('#locator-search').on('submit',function(ev){ev.preventDefault();});})
function getSearchResults(){$('.dynamic-trigger').remove();var geo=$('#geo').val();var range=$('#range').val();if($('#term_vocabs').val()){var term_vocabs=$('#term_vocabs').val();}else{var term_vocabs='';}
$('.ajax-content').remove();var locator_type=window.location.pathname.split('/');console.log(locator_type);coords=geo.split(',');var lat=coords[0];var lng=coords[1];console.log(coords);var dealer_url='?action=get_section_body&loc='+lng+','+lat+'&range='+range+'&term_vocabs='+term_vocabs;$.ajax({url:dealer_url}).done(function(response){if(response){$('.grid-wrapper.page-trigger').remove();$('.no-results').remove();$('.grid-wrapper').append(response+'<div data-url="" data-type="trigger" data-trigger="continuous" data-offset="250" data-page="2" data-src="'+dealer_url+'" class="block grid-block full h-10 dynamic-trigger loading loading-medium text-center clickable block body" style="position: absolute; left: 0px; top: 3422px;"><h4 class="title large">Loading</h4></div>');Page.appendItems(response+'<div data-url="" data-type="trigger" data-trigger="continuous" data-offset="250" data-page="2" data-src="'+dealer_url+'" class="block grid-block full h-10 dynamic-trigger loading loading-medium text-center clickable block body" style="position: absolute; left: 0px; top: 3422px;"><h4 class="title large">Loading</h4></div>');count=$('.grid-wrapper').find('article.content-block').length;if(count<25){$('.grid-wrapper .dynamic-trigger').remove();}}else{$('.grid-wrapper').append('<div class="w-4 block grid-block text-center ajax-content">We were unable to retrieve any results based on your search criteria.</div>');Page.reloadGrid();}});}
/*! end app/merrick/themes/beta/js/helpers.js*/
