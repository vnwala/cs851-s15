function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(n){return 10>n?"0"+n:n}function quote(string){return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,partial,mind=gap,value=holder[key];switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),"function"==typeof rep&&(value=rep.call(holder,key,value)),typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;length>i;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep)for(length=rep.length,i=0;length>i;i+=1)"string"==typeof rep[i]&&(k=rep[i],v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(value,replacer,space){var i;if(gap="",indent="","number"==typeof space)for(i=0;space>i;i+=1)indent+=" ";else"string"==typeof space&&(indent=space);if(rep=replacer,replacer&&"function"!=typeof replacer&&("object"!=typeof replacer||"number"!=typeof replacer.length))throw new Error("JSON.stringify");return str("",{"":value})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),/*!
 * Joseph Myer's md5() algorithm wrapped in a self-invoked function to prevent
 * global namespace polution, modified to hash unicode characters as UTF-8.
 *
 * Copyright 1999-2010, Joseph Myers, Paul Johnston, Greg Holt, Will Bond <will@wbond.net>
 * http://www.myersdaily.org/joseph/javascript/md5-text.html
 * http://pajhome.org.uk/crypt/md5
 *
 * Released under the BSD license
 * http://www.opensource.org/licenses/bsd-license
 */
function(){function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936),d=ff(d,a,b,c,k[1],12,-389564586),c=ff(c,d,a,b,k[2],17,606105819),b=ff(b,c,d,a,k[3],22,-1044525330),a=ff(a,b,c,d,k[4],7,-176418897),d=ff(d,a,b,c,k[5],12,1200080426),c=ff(c,d,a,b,k[6],17,-1473231341),b=ff(b,c,d,a,k[7],22,-45705983),a=ff(a,b,c,d,k[8],7,1770035416),d=ff(d,a,b,c,k[9],12,-1958414417),c=ff(c,d,a,b,k[10],17,-42063),b=ff(b,c,d,a,k[11],22,-1990404162),a=ff(a,b,c,d,k[12],7,1804603682),d=ff(d,a,b,c,k[13],12,-40341101),c=ff(c,d,a,b,k[14],17,-1502002290),b=ff(b,c,d,a,k[15],22,1236535329),a=gg(a,b,c,d,k[1],5,-165796510),d=gg(d,a,b,c,k[6],9,-1069501632),c=gg(c,d,a,b,k[11],14,643717713),b=gg(b,c,d,a,k[0],20,-373897302),a=gg(a,b,c,d,k[5],5,-701558691),d=gg(d,a,b,c,k[10],9,38016083),c=gg(c,d,a,b,k[15],14,-660478335),b=gg(b,c,d,a,k[4],20,-405537848),a=gg(a,b,c,d,k[9],5,568446438),d=gg(d,a,b,c,k[14],9,-1019803690),c=gg(c,d,a,b,k[3],14,-187363961),b=gg(b,c,d,a,k[8],20,1163531501),a=gg(a,b,c,d,k[13],5,-1444681467),d=gg(d,a,b,c,k[2],9,-51403784),c=gg(c,d,a,b,k[7],14,1735328473),b=gg(b,c,d,a,k[12],20,-1926607734),a=hh(a,b,c,d,k[5],4,-378558),d=hh(d,a,b,c,k[8],11,-2022574463),c=hh(c,d,a,b,k[11],16,1839030562),b=hh(b,c,d,a,k[14],23,-35309556),a=hh(a,b,c,d,k[1],4,-1530992060),d=hh(d,a,b,c,k[4],11,1272893353),c=hh(c,d,a,b,k[7],16,-155497632),b=hh(b,c,d,a,k[10],23,-1094730640),a=hh(a,b,c,d,k[13],4,681279174),d=hh(d,a,b,c,k[0],11,-358537222),c=hh(c,d,a,b,k[3],16,-722521979),b=hh(b,c,d,a,k[6],23,76029189),a=hh(a,b,c,d,k[9],4,-640364487),d=hh(d,a,b,c,k[12],11,-421815835),c=hh(c,d,a,b,k[15],16,530742520),b=hh(b,c,d,a,k[2],23,-995338651),a=ii(a,b,c,d,k[0],6,-198630844),d=ii(d,a,b,c,k[7],10,1126891415),c=ii(c,d,a,b,k[14],15,-1416354905),b=ii(b,c,d,a,k[5],21,-57434055),a=ii(a,b,c,d,k[12],6,1700485571),d=ii(d,a,b,c,k[3],10,-1894986606),c=ii(c,d,a,b,k[10],15,-1051523),b=ii(b,c,d,a,k[1],21,-2054922799),a=ii(a,b,c,d,k[8],6,1873313359),d=ii(d,a,b,c,k[15],10,-30611744),c=ii(c,d,a,b,k[6],15,-1560198380),b=ii(b,c,d,a,k[13],21,1309151649),a=ii(a,b,c,d,k[4],6,-145523070),d=ii(d,a,b,c,k[11],10,-1120210379),c=ii(c,d,a,b,k[2],15,718787259),b=ii(b,c,d,a,k[9],21,-343485551),x[0]=add32(a,x[0]),x[1]=add32(b,x[1]),x[2]=add32(c,x[2]),x[3]=add32(d,x[3])}function cmn(q,a,b,x,s,t){return a=add32(add32(a,q),add32(x,t)),add32(a<<s|a>>>32-s,b)}function ff(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)}function md51(s){/[\x80-\xFF]/.test(s)&&(s=unescape(encodeURI(s)));var i,n=s.length,state=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=s.length;i+=64)md5cycle(state,md5blk(s.substring(i-64,i)));s=s.substring(i-64);var tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<s.length;i++)tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3);if(tail[i>>2]|=128<<(i%4<<3),i>55)for(md5cycle(state,tail),i=0;16>i;i++)tail[i]=0;return tail[14]=8*n,md5cycle(state,tail),state}function md5blk(s){var i,md5blks=[];for(i=0;64>i;i+=4)md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);return md5blks}function rhex(n){for(var s="",j=0;4>j;j++)s+=hex_chr[15&n>>8*j+4]+hex_chr[15&n>>8*j];return s}function hex(x){for(var i=0;i<x.length;i++)x[i]=rhex(x[i]);return x.join("")}function md5(s){return hex(md51(s))}function add32(a,b){return 4294967295&a+b}function add32(x,y){var lsw=(65535&x)+(65535&y),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|65535&lsw}var hex_chr="0123456789abcdef".split("");"5d41402abc4b2a76b9719d911017c592"!=md5("hello"),"undefined"!=typeof module&&module.exports?module.exports=md5:window.md5=md5}(),function(window,document,undefined){function is(obj,type){return typeof obj===type}function testRunner(){var featureNames,feature,aliasIdx,result,nameIdx,featureName,featureNameSplit;for(var featureIdx in tests){if(featureNames=[],feature=tests[featureIdx],feature.name&&(featureNames.push(feature.name.toLowerCase()),feature.options&&feature.options.aliases&&feature.options.aliases.length))for(aliasIdx=0;aliasIdx<feature.options.aliases.length;aliasIdx++)featureNames.push(feature.options.aliases[aliasIdx].toLowerCase());for(result=is(feature.fn,"function")?feature.fn():feature.fn,nameIdx=0;nameIdx<featureNames.length;nameIdx++)featureName=featureNames[nameIdx],featureNameSplit=featureName.split("."),1===featureNameSplit.length?Modernizr[featureNameSplit[0]]=result:2===featureNameSplit.length&&(!Modernizr[featureNameSplit[0]]||Modernizr[featureNameSplit[0]]instanceof Boolean||(Modernizr[featureNameSplit[0]]=new Boolean(Modernizr[featureNameSplit[0]])),Modernizr[featureNameSplit[0]][featureNameSplit[1]]=result),classes.push((result?"":"no-")+featureNameSplit.join("-"))}}function setClasses(classes){var className=docElement.className,classPrefix=Modernizr._config.classPrefix||"",reJS=new RegExp("(^|\\s)"+classPrefix+"no-js(\\s|$)");className=className.replace(reJS,"$1"+classPrefix+"js$2"),Modernizr._config.enableClasses&&(className+=" "+classPrefix+classes.join(" "+classPrefix),docElement.className=className)}function addTest(feature,test){if("object"==typeof feature)for(var key in feature)hasOwnProp(feature,key)&&addTest(key,feature[key]);else{feature=feature.toLowerCase();var featureNameSplit=feature.split("."),last=Modernizr[featureNameSplit[0]];if(2==featureNameSplit.length&&(last=last[featureNameSplit[1]]),"undefined"!=typeof last)return Modernizr;test="function"==typeof test?test():test,1==featureNameSplit.length?Modernizr[featureNameSplit[0]]=test:2==featureNameSplit.length&&(!Modernizr[featureNameSplit[0]]||Modernizr[featureNameSplit[0]]instanceof Boolean||(Modernizr[featureNameSplit[0]]=new Boolean(Modernizr[featureNameSplit[0]])),Modernizr[featureNameSplit[0]][featureNameSplit[1]]=test),setClasses([(test?"":"no-")+featureNameSplit.join("-")]),Modernizr._trigger(feature,test)}return Modernizr}function fnBind(fn,that){return function(){return fn.apply(that,arguments)}}function contains(str,substr){return!!~(""+str).indexOf(substr)}function getBody(){var body=document.body;return body||(body=createElement("body"),body.fake=!0),body}function injectElementWithStyles(rule,callback,nodes,testnames){var style,ret,node,docOverflow,mod="modernizr",div=createElement("div"),body=getBody();if(parseInt(nodes,10))for(;nodes--;)node=createElement("div"),node.id=testnames?testnames[nodes]:mod+(nodes+1),div.appendChild(node);return style=["&#173;",'<style id="s',mod,'">',rule,"</style>"].join(""),div.id=mod,(body.fake?body:div).innerHTML+=style,body.appendChild(div),body.fake&&(body.style.background="",body.style.overflow="hidden",docOverflow=docElement.style.overflow,docElement.style.overflow="hidden",docElement.appendChild(body)),ret=callback(div,rule),body.fake?(body.parentNode.removeChild(body),docElement.style.overflow=docOverflow,docElement.offsetHeight):div.parentNode.removeChild(div),!!ret}function domToCSS(name){return name.replace(/([A-Z])/g,function(str,m1){return"-"+m1.toLowerCase()}).replace(/^ms-/,"-ms-")}function nativeTestProps(props,value){var i=props.length;if("CSS"in window&&"supports"in window.CSS){for(;i--;)if(window.CSS.supports(domToCSS(props[i]),value))return!0;return!1}if("CSSSupportsRule"in window){for(var conditionText=[];i--;)conditionText.push("("+domToCSS(props[i])+":"+value+")");return conditionText=conditionText.join(" or "),injectElementWithStyles("@supports ("+conditionText+") { #modernizr { position: absolute; } }",function(node){return"absolute"==(window.getComputedStyle?getComputedStyle(node,null):node.currentStyle).position})}return undefined}function cssToDOM(name){return name.replace(/([a-z])-([a-z])/g,function(str,m1,m2){return m1+m2.toUpperCase()}).replace(/^-/,"")}function testProps(props,prefixed,value,skipValueTest){function cleanElems(){afterInit&&(delete mStyle.style,delete mStyle.modElem)}if(skipValueTest=is(skipValueTest,"undefined")?!1:skipValueTest,!is(value,"undefined")){var result=nativeTestProps(props,value);if(!is(result,"undefined"))return result}var afterInit,i,prop,before;mStyle.style||(afterInit=!0,mStyle.modElem=createElement("modernizr"),mStyle.style=mStyle.modElem.style);for(i in props)if(prop=props[i],before=mStyle.style[prop],contains(prop,"-")&&(prop=cssToDOM(prop)),mStyle.style[prop]!==undefined){if(skipValueTest||is(value,"undefined"))return cleanElems(),"pfx"==prefixed?prop:!0;try{mStyle.style[prop]=value}catch(e){}if(mStyle.style[prop]!=before)return cleanElems(),"pfx"==prefixed?prop:!0}return cleanElems(),!1}function testDOMProps(props,obj,elem){var item;for(var i in props)if(props[i]in obj)return elem===!1?props[i]:(item=obj[props[i]],is(item,"function")?fnBind(item,elem||obj):item);return!1}function testPropsAll(prop,prefixed,elem,value,skipValueTest){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+" "+cssomPrefixes.join(ucProp+" ")+ucProp).split(" ");return is(prefixed,"string")||is(prefixed,"undefined")?testProps(props,prefixed,value,skipValueTest):(props=(prop+" "+domPrefixes.join(ucProp+" ")+ucProp).split(" "),testDOMProps(props,prefixed,elem))}function testAllProps(prop,value,skipValueTest){return testPropsAll(prop,undefined,undefined,value,skipValueTest)}var tests=[],ModernizrProto={_version:"v3.0.0pre",_config:{classPrefix:"",enableClasses:!0,usePrefixes:!0},_q:[],on:function(test,cb){var self=this;setTimeout(function(){cb(self[test])},0)},addTest:function(name,fn,options){tests.push({name:name,fn:fn,options:options})},addAsyncTest:function(fn){tests.push({name:null,fn:fn})}},Modernizr=function(){};Modernizr.prototype=ModernizrProto,Modernizr=new Modernizr;var hasOwnProp,classes=[],docElement=document.documentElement;!function(){var _hasOwnProperty={}.hasOwnProperty;hasOwnProp=is(_hasOwnProperty,"undefined")||is(_hasOwnProperty.call,"undefined")?function(object,property){return property in object&&is(object.constructor.prototype[property],"undefined")}:function(object,property){return _hasOwnProperty.call(object,property)}}(),ModernizrProto._l={},ModernizrProto.on=function(test,cb){this._l[test]||(this._l[test]=[]),this._l[test].push(cb),Modernizr.hasOwnProperty(test)&&setTimeout(function(){Modernizr._trigger(test,Modernizr[test])},0)},ModernizrProto._trigger=function(test,res){if(this._l[test]){var cbs=this._l[test];setTimeout(function(){var i,cb;for(i=0;i<cbs.length;i++)cb=cbs[i],cb(res)},0),delete this._l[test]}},Modernizr._q.push(function(){ModernizrProto.addTest=addTest});var prefixes=ModernizrProto._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):[];ModernizrProto._prefixes=prefixes;var atRule=function(prop){var rule,length=prefixes.length,cssrule=window.CSSRule;if(prop=prop.replace(/^@/,""),rule=prop.replace(/-/g,"_").toUpperCase()+"_RULE",rule in cssrule)return"@"+prop;for(var i=0;length>i;i++){var prefix=prefixes[i],thisRule=prefix.toUpperCase()+"_"+rule;if(thisRule in cssrule)return"@-"+prefix.toLowerCase()+"-"+prop}return!1};!function(window,document){function addStyleSheet(ownerDocument,cssText){var p=ownerDocument.createElement("p"),parent=ownerDocument.getElementsByTagName("head")[0]||ownerDocument.documentElement;return p.innerHTML="x<style>"+cssText+"</style>",parent.insertBefore(p.lastChild,parent.firstChild)}function getElements(){var elements=html5.elements;return"string"==typeof elements?elements.split(" "):elements}function getExpandoData(ownerDocument){var data=expandoData[ownerDocument[expando]];return data||(data={},expanID++,ownerDocument[expando]=expanID,expandoData[expanID]=data),data}function createElement(nodeName,ownerDocument,data){if(ownerDocument||(ownerDocument=document),supportsUnknownElements)return ownerDocument.createElement(nodeName);data||(data=getExpandoData(ownerDocument));var node;return node=data.cache[nodeName]?data.cache[nodeName].cloneNode():saveClones.test(nodeName)?(data.cache[nodeName]=data.createElem(nodeName)).cloneNode():data.createElem(nodeName),!node.canHaveChildren||reSkip.test(nodeName)||node.tagUrn?node:data.frag.appendChild(node)}function createDocumentFragment(ownerDocument,data){if(ownerDocument||(ownerDocument=document),supportsUnknownElements)return ownerDocument.createDocumentFragment();data=data||getExpandoData(ownerDocument);for(var clone=data.frag.cloneNode(),i=0,elems=getElements(),l=elems.length;l>i;i++)clone.createElement(elems[i]);return clone}function shivMethods(ownerDocument,data){data.cache||(data.cache={},data.createElem=ownerDocument.createElement,data.createFrag=ownerDocument.createDocumentFragment,data.frag=data.createFrag()),ownerDocument.createElement=function(nodeName){return html5.shivMethods?createElement(nodeName,ownerDocument,data):data.createElem(nodeName)},ownerDocument.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+getElements().join().replace(/[\w\-:]+/g,function(nodeName){return data.createElem(nodeName),data.frag.createElement(nodeName),'c("'+nodeName+'")'})+");return n}")(html5,data.frag)}function shivDocument(ownerDocument){ownerDocument||(ownerDocument=document);var data=getExpandoData(ownerDocument);return!html5.shivCSS||supportsHtml5Styles||data.hasCSS||(data.hasCSS=!!addStyleSheet(ownerDocument,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),supportsUnknownElements||shivMethods(ownerDocument,data),ownerDocument}function addWrappers(ownerDocument){for(var node,nodes=ownerDocument.getElementsByTagName("*"),index=nodes.length,reElements=RegExp("^(?:"+getElements().join("|")+")$","i"),result=[];index--;)node=nodes[index],reElements.test(node.nodeName)&&result.push(node.applyElement(createWrapper(node)));return result}function createWrapper(element){for(var node,nodes=element.attributes,index=nodes.length,wrapper=element.ownerDocument.createElement(shivNamespace+":"+element.nodeName);index--;)node=nodes[index],node.specified&&wrapper.setAttribute(node.nodeName,node.nodeValue);return wrapper.style.cssText=element.style.cssText,wrapper}function shivCssText(cssText){for(var pair,parts=cssText.split("{"),index=parts.length,reElements=RegExp("(^|[\\s,>+~])("+getElements().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),replacement="$1"+shivNamespace+"\\:$2";index--;)pair=parts[index]=parts[index].split("}"),pair[pair.length-1]=pair[pair.length-1].replace(reElements,replacement),parts[index]=pair.join("}");return parts.join("{")}function removeWrappers(wrappers){for(var index=wrappers.length;index--;)wrappers[index].removeNode()}function shivPrint(ownerDocument){function removeSheet(){clearTimeout(data._removeSheetTimer),shivedSheet&&shivedSheet.removeNode(!0),shivedSheet=null}var shivedSheet,wrappers,data=getExpandoData(ownerDocument),namespaces=ownerDocument.namespaces,ownerWindow=ownerDocument.parentWindow;return!supportsShivableSheets||ownerDocument.printShived?ownerDocument:("undefined"==typeof namespaces[shivNamespace]&&namespaces.add(shivNamespace),ownerWindow.attachEvent("onbeforeprint",function(){removeSheet();for(var imports,length,sheet,collection=ownerDocument.styleSheets,cssText=[],index=collection.length,sheets=Array(index);index--;)sheets[index]=collection[index];for(;sheet=sheets.pop();)if(!sheet.disabled&&reMedia.test(sheet.media)){try{imports=sheet.imports,length=imports.length}catch(er){length=0}for(index=0;length>index;index++)sheets.push(imports[index]);try{cssText.push(sheet.cssText)}catch(er){}}cssText=shivCssText(cssText.reverse().join("")),wrappers=addWrappers(ownerDocument),shivedSheet=addStyleSheet(ownerDocument,cssText)}),ownerWindow.attachEvent("onafterprint",function(){removeWrappers(wrappers),clearTimeout(data._removeSheetTimer),data._removeSheetTimer=setTimeout(removeSheet,500)}),ownerDocument.printShived=!0,ownerDocument)}var supportsHtml5Styles,supportsUnknownElements,version="3.7.0",options=window.html5||{},reSkip=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,saveClones=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,expando="_html5shiv",expanID=0,expandoData={};!function(){try{var a=document.createElement("a");a.innerHTML="<xyz></xyz>",supportsHtml5Styles="hidden"in a,supportsUnknownElements=1==a.childNodes.length||function(){document.createElement("a");var frag=document.createDocumentFragment();return"undefined"==typeof frag.cloneNode||"undefined"==typeof frag.createDocumentFragment||"undefined"==typeof frag.createElement}()}catch(e){supportsHtml5Styles=!0,supportsUnknownElements=!0}}();var html5={elements:options.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:version,shivCSS:options.shivCSS!==!1,supportsUnknownElements:supportsUnknownElements,shivMethods:options.shivMethods!==!1,type:"default",shivDocument:shivDocument,createElement:createElement,createDocumentFragment:createDocumentFragment};window.html5=html5,shivDocument(document);var reMedia=/^$|\b(?:all|print)\b/,shivNamespace="html5shiv",supportsShivableSheets=!supportsUnknownElements&&function(){var docEl=document.documentElement;return!("undefined"==typeof document.namespaces||"undefined"==typeof document.parentWindow||"undefined"==typeof docEl.applyElement||"undefined"==typeof docEl.removeNode||"undefined"==typeof window.attachEvent)}();html5.type+=" print",html5.shivPrint=shivPrint,shivPrint(document)}(this,document);var err=function(){},warn=function(){};window.console&&(err=function(){var method=console.error?"error":"log";window.console[method].apply(window.console,Array.prototype.slice.call(arguments))},warn=function(){var method=console.warn?"warn":"log";window.console[method].apply(window.console,Array.prototype.slice.call(arguments))}),ModernizrProto.load=function(){"yepnope"in window?(warn("yepnope.js (aka Modernizr.load) is no longer included as part of Modernizr. yepnope appears to be available on the page, so we’ll use it to handle this call to Modernizr.load, but please update your code to use yepnope directly.\n See http://github.com/Modernizr/Modernizr/issues/1182 for more information."),window.yepnope.apply(window,[].slice.call(arguments,0))):err("yepnope.js (aka Modernizr.load) is no longer included as part of Modernizr. Get it from http://yepnopejs.com. See http://github.com/Modernizr/Modernizr/issues/1182 for more information.")};var omPrefixes="Webkit Moz O ms",cssomPrefixes=ModernizrProto._config.usePrefixes?omPrefixes.split(" "):[];ModernizrProto._cssomPrefixes=cssomPrefixes;var createElement=function(){return document.createElement.apply(document,arguments)},modElem={elem:createElement("modernizr")};Modernizr._q.push(function(){delete modElem.elem});var mStyle={style:modElem.elem.style};Modernizr._q.unshift(function(){delete mStyle.style});var domPrefixes=ModernizrProto._config.usePrefixes?omPrefixes.toLowerCase().split(" "):[];ModernizrProto._domPrefixes=domPrefixes,ModernizrProto.testAllProps=testPropsAll;var prefixed=ModernizrProto.prefixed=function(prop,obj,elem){return 0===prop.indexOf("@")?atRule(prop):(-1!=prop.indexOf("-")&&(prop=cssToDOM(prop)),obj?testPropsAll(prop,obj,elem):testPropsAll(prop,"pfx"))};ModernizrProto.prefixedCSS=function(prop){var prefixedProp=prefixed(prop);return prefixedProp&&domToCSS(prefixedProp)},ModernizrProto.testProp=function(prop,value,useValue){return testProps([prop],undefined,value,useValue)},Modernizr.addTest("adownload",!window.externalHost&&"download"in createElement("a")),Modernizr.addTest("applicationcache","applicationCache"in window),ModernizrProto.testAllProps=testAllProps,Modernizr.addTest("cssanimations",testAllProps("animationName","a",!0)),Modernizr.addTest("backgroundsize",testAllProps("backgroundSize","100%",!0)),Modernizr.addTest("boxsizing",testAllProps("boxSizing","border-box",!0)&&(document.documentMode===undefined||document.documentMode>7)),Modernizr.addTest("flexbox",testAllProps("flexBasis","1px",!0)),Modernizr.addTest("flexboxlegacy",testAllProps("boxDirection","reverse",!0)),Modernizr.addTest("flexboxtweener",testAllProps("flexAlign","end",!0)),Modernizr.addTest("flexwrap",testAllProps("flexWrap","wrap",!0)),Modernizr.addTest("cssgradients",function(){var str1="background-image:",str2="gradient(linear,left top,right bottom,from(#9f9),to(white));",str3="linear-gradient(left top,#9f9, white);",css=str1+prefixes.join(str3+str1).slice(0,-str1.length);Modernizr._config.usePrefixes&&(css+=str1+"-webkit-"+str2);var elem=createElement("div"),style=elem.style;return style.cssText=css,(""+style.backgroundImage).indexOf("gradient")>-1});var testStyles=ModernizrProto.testStyles=injectElementWithStyles;testStyles("#modernizr div {width:100px} #modernizr :last-child{width:200px;display:block}",function(elem){Modernizr.addTest("lastchild",elem.lastChild.offsetWidth>elem.firstChild.offsetWidth)},2),Modernizr.addTest("csspositionsticky",function(){var prop="position:",value="sticky",el=createElement("modernizr"),mStyle=el.style;return mStyle.cssText=prop+prefixes.join(value+";"+prop).slice(0,-prop.length),-1!==mStyle.position.indexOf(value)}),Modernizr.addTest("csspseudoanimations",function(){var result=!1;if(!Modernizr.cssanimations||!window.getComputedStyle)return result;var styles=["@",Modernizr._prefixes.join("keyframes csspseudoanimations { from { font-size: 10px; } }@").replace(/\@$/,""),'#modernizr:before { content:" "; font-size:5px;',Modernizr._prefixes.join("animation:csspseudoanimations 1ms infinite;"),"}"].join("");return Modernizr.testStyles(styles,function(elem){var style=window.getComputedStyle(elem,":before");null!==style&&(result="10px"===style.getPropertyValue("font-size"))}),result}),Modernizr.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&testAllProps("transform","scale(1)",!0)}),Modernizr.addTest("csstransforms3d",function(){var ret=!!testAllProps("perspective","1px",!0),usePrefix=Modernizr._config.usePrefixes;if(ret&&(!usePrefix||"webkitPerspective"in docElement.style)){var mq="@media (transform-3d)";usePrefix&&(mq+=",(-webkit-transform-3d)"),mq+="{#modernizr{left:9px;position:absolute;height:5px;margin:0;padding:0;border:0}}",testStyles(mq,function(elem){ret=9===elem.offsetLeft&&5===elem.offsetHeight})}return ret}),Modernizr.addTest("csstransitions",testAllProps("transition","all",!0));var isEventSupported=function(undefined){function isEventSupportedInner(eventName,element){var isSupported;return eventName?(element&&"string"!=typeof element||(element=createElement(element||"div")),eventName="on"+eventName,isSupported=eventName in element,!isSupported&&needsFallback&&(element.setAttribute||(element=createElement("div")),element.setAttribute&&element.removeAttribute&&(element.setAttribute(eventName,""),isSupported="function"==typeof element[eventName],element[eventName]!==undefined&&(element[eventName]=undefined),element.removeAttribute(eventName))),isSupported):!1}var needsFallback=!("onblur"in document.documentElement);return isEventSupportedInner}(),hasEvent=ModernizrProto.hasEvent=isEventSupported;Modernizr.addTest("hashchange",function(){return hasEvent("hashchange",window)===!1?!1:document.documentMode===undefined||document.documentMode>7}),Modernizr.addTest("history",function(){var ua=navigator.userAgent;return-1===ua.indexOf("Android 2.")&&-1===ua.indexOf("Android 4.0")||-1===ua.indexOf("Mobile Safari")||-1!==ua.indexOf("Chrome")?window.history&&"pushState"in window.history:!1}),Modernizr.addTest("formvalidation",function(){var form=createElement("form");if(!("checkValidity"in form&&"addEventListener"in form))return!1;if("reportValidity"in form)return!0;var input,invalidFired=!1;return Modernizr.formvalidationapi=!0,form.addEventListener("submit",function(e){window.opera||e.preventDefault(),e.stopPropagation()},!1),form.innerHTML='<input name="modTest" required><button></button>',testStyles("#modernizr form{position:absolute;top:-99999em}",function(node){node.appendChild(form),input=form.getElementsByTagName("input")[0],input.addEventListener("invalid",function(e){invalidFired=!0,e.preventDefault(),e.stopPropagation()},!1),Modernizr.formvalidationmessage=!!input.validationMessage,form.getElementsByTagName("button")[0].click()}),invalidFired}),Modernizr.addTest("fullscreen",!(!prefixed("exitFullscreen",document,!1)&&!prefixed("cancelFullScreen",document,!1))),Modernizr.addTest("touch",function(){var bool;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)bool=!0;else{var query=["@media (",prefixes.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");testStyles(query,function(node){bool=9===node.offsetTop})}return bool}),Modernizr.addAsyncTest(function(){function testOver32kb(){var datauriBig=new Image;datauriBig.onerror=function(){addTest("datauri",!0),Modernizr.datauri=new Boolean(!0),Modernizr.datauri.over32kb=!1},datauriBig.onload=function(){addTest("datauri",!0),Modernizr.datauri=new Boolean(!0),Modernizr.datauri.over32kb=1==datauriBig.width&&1==datauriBig.height};for(var base64str="R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";base64str.length<33e3;)base64str="\r\n"+base64str;datauriBig.src="data:image/gif;base64,"+base64str}-1!==navigator.userAgent.indexOf("MSIE 7.")&&setTimeout(function(){addTest("datauri",!1)},10);var datauri=new Image;datauri.onerror=function(){addTest("datauri",!1)},datauri.onload=function(){1==datauri.width&&1==datauri.height?testOver32kb():addTest("datauri",!1)},datauri.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}),Modernizr.addTest("video",function(){var elem=createElement("video"),bool=!1;try{(bool=!!elem.canPlayType)&&(bool=new Boolean(bool),bool.ogg=elem.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),bool.h264=elem.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),bool.webm=elem.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),bool.vp9=elem.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),bool.hls=elem.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch(e){}return bool}),testRunner(),setClasses(classes),delete ModernizrProto.addTest,delete ModernizrProto.addAsyncTest;for(var i=0;i<Modernizr._q.length;i++)Modernizr._q[i]();window.Modernizr=Modernizr}(this,document),function(){var HTML_ESCAPE,HTML_ESCAPE_REGEXP,defaultPlural,__I18n,__slice=[].slice;HTML_ESCAPE={'"':"&quot;","<":"&lt;",">":"&gt;"},HTML_ESCAPE_REGEXP=new RegExp('["<>]',"g"),defaultPlural=function(n){return 1===n?"one":"other"},__I18n=function(){function __I18n(options){var _ref;null==options&&(options={}),this.locale="en_US",this.country="US",this.translations={},this.scope=[],this.formats={},this.configure(options),this.keyErrors=null!=(_ref=options.keyErrors)?_ref:{count:0}}return __I18n.prototype.isInteger=function(n){return 0===n%1},__I18n.prototype.configure=function(_arg){var country,locale,scope,translations,_ref;return _ref=null!=_arg?_arg:{},locale=_ref.locale,country=_ref.country,translations=_ref.translations,scope=_ref.scope,""===scope&&(scope=[]),"string"==typeof scope&&(scope=scope.split(".")),null!=locale&&(this.locale=locale),null!=country&&(this.country=country.toUpperCase()),this.lang=this.locale.replace(/([a-z]{2,3}).*/i,"$1").toLowerCase(),null!=translations&&(this.translations=translations),null!=scope?this.scope=scope:void 0},__I18n.prototype.currentLocale=function(){return this.locale},__I18n.prototype.toJSON=function(scopeOnly){var i,scope,tmp,translations,_i,_ref;if(scopeOnly!==!1){if(scope=this.scope.join("."),translations=this.lookup(scope),this.scope.length>0)for(i=_i=_ref=this.scope.length-1;0>=_ref?0>=_i:_i>=0;i=0>=_ref?++_i:--_i)tmp={},tmp[this.scope[i]]=translations,translations=tmp;return{locale:this.locale,country:this.country,translations:translations,scope:scope}}return{locale:this.locale,country:this.country,translations:this.translations,scope:this.scope.join(".")}},__I18n.prototype.setPluralRule=function(lang,ruleFn){return __I18n.prototype.pluralRules[lang]=ruleFn},__I18n.prototype.lookup=function(scope,options){var keyPath,node,pathEl,_i,_len;for(null==options&&(options={}),null==options.defaultValue&&(options.defaultValue=null),keyPath=this.prepareKey(scope),options.countrySpecific&&keyPath.push(this.country),null!=options.scope&&(keyPath=this.prepareKey(options.scope).concat(keyPath)),node=this.translations,_i=0,_len=keyPath.length;_len>_i&&(pathEl=keyPath[_i],node=node[pathEl],null!=node);_i++);return null!=node?node:options.defaultValue},__I18n.prototype.translate=function(scope,options){var error,node;if(null==options&&(options={}),node=this.lookup(scope,options),null==node)return this.missingTranslation(scope);try{return"object"==typeof node?"number"==typeof options.count?this.pluralize(options.count,scope,options):node:this.interpolate(node,options)}catch(_error){return error=_error,this.missingTranslation(scope)}},__I18n.prototype.toCurrency=function(number,options){var currencyCode,currencyOptions,format,numberOptions;return"object"==typeof options?(currencyCode=options.currencyCode,numberOptions=options):(currencyCode=options,numberOptions={currencyCode:currencyCode}),null==currencyCode?"[missing currency code]":(currencyOptions=this.prepareOptions(options,{unit:this.lookup("number.symbols.currency."+currencyCode),format:this.lookup("number.formats.currency")},{unit:"USD"===currencyCode?"$":currencyCode,format:"¤#,##0.00;(¤#,##0.00)"}),format=this.parseFormat(currencyOptions.format),this.formatNumber(format,number,numberOptions).replace(/¤/g,currencyOptions.unit))},__I18n.prototype.toNumber=function(number,options){var format,formatString,_ref,_ref1;return null==options&&(options={}),formatString=null!=(_ref=null!=(_ref1=options.format)?_ref1:this.lookup("number.formats.decimal"))?_ref:"#,##0.###",format=this.prepareOptions(options,this.parseFormat(formatString)),this.formatNumber(format,number,options)},__I18n.prototype.formatNumber=function(format,number,options){var d,groupMatch,i,negative,offset,pad,symbols,_ref;return null==options&&(options={}),symbols=this.prepareOptions(this.lookup("number.symbols"),{decimal:".",group:","}),pad=function(str,len,c){return str.length<len?new Array(len-str.length+1).join(c):""},negative=0>number,number=Math.abs(Number(number)*format.multiplier),format.precision>=0&&(number=number.toFixed(format.precision)),_ref=number.toString().split("."),i=_ref[0],d=_ref[1],null==d&&(d=""),format.decimalDigits<d.length&&(d=d.replace(/[0]+$/,"")),options.short&&/^0*$/.test(d)?d="":format.decimalDigits>d.length&&(d+=pad(d,format.decimalDigits,"0")),d.length>0&&(d=symbols.decimal+d),i=pad(i,format.integerDigits,"0")+i,format.groupSize1>0&&i.length>format.groupSize1&&(offset=i.length%format.groupSize1||format.groupSize1,groupMatch=new RegExp("\\d{"+format.groupSize1+"}","g"),i=i.substr(0,offset)+i.substr(offset).replace(groupMatch,function(m){return symbols.group+m})),number=negative?format.negativePrefix+i+d+format.negativeSuffix:format.positivePrefix+i+d+format.positiveSuffix,number.replace(/%/g,symbols.percentSign).replace(/‰/g,symbols.perMille)},__I18n.prototype.parseFormat=function(pattern){var decPat,format,m,minusSign,p,pat,patterns,pos,pos2,pos3,_ref;return null!=this.formats[pattern]?this.formats[pattern]:(null==pattern&&(pattern="0"),format={positivePrefix:"",positiveSuffix:"",negativePrefix:"",negativeSuffix:""},patterns=pattern.split(";"),minusSign=null!=(_ref=this.lookup("number.symbols.minusSign"))?_ref:"-",pat=patterns[0],(m=pat.match(/^(.*?)[#,\.0]+(.*?)$/))&&(format.positivePrefix=m[1],format.positiveSuffix=m[2]),patterns.length>1&&(m=patterns[1].match(/^(.*?)[#,\.0]+(.*?)$/))?(format.negativePrefix=m[1],format.negativeSuffix=m[2]):(format.negativePrefix=minusSign+format.positivePrefix,format.negativeSuffix=format.negativeSuffix),format.multiplier=-1!==pat.indexOf("%")?100:-1!==pat.indexOf("‰")?1e3:1,-1!==(pos=pat.indexOf("."))?(decPat=pat.substr(pos),decPat=decPat.replace(/\.([#]+)([0]+)/,".$2$1"),format.decimalDigits=-1!==(pos2=decPat.lastIndexOf("0"))?pos2:0,format.precision=(pos3=decPat.lastIndexOf("#"))>=pos2?pos3:format.decimalDigits,pat=pat.substr(0,pos)):format.decimalDigits=format.precision=0,p=pat.replace(/,/g,""),format.integerDigits=-1!==(pos=p.indexOf("0"))?p.lastIndexOf("0")-pos+1:0,p=pat.replace(/#/g,"0"),-1!==(pos=pat.lastIndexOf(","))?(format.groupSize1=p.lastIndexOf("0")-pos,format.groupSize2=-1!==(pos2=p.substr(0,pos).lastIndexOf(","))?pos-pos2-1:0):format.groupSize1=format.groupSize2=0,this.formats[pattern]=format)
},__I18n.prototype.prepareKey=function(key){return""===key?[]:"."===key[0]?this.scope.concat(key.substr(1).split(".")):key.split(".")},__I18n.prototype.missingTranslation=function(){var key,scopes,_base;return scopes=1<=arguments.length?__slice.call(arguments,0):[],key=this.prepareKey(scopes.join(".")).join("."),++this.keyErrors.count,null==(_base=this.keyErrors).first&&(_base.first=key),"undefined"!=typeof TrackingHub&&null!==TrackingHub&&TrackingHub.add("missing_translation",{key:key}),"[missing "+this.locale+" '"+key+"' translation]"},__I18n.prototype.interpolate=function(message,options){var matches,name,placeholder,regex,value,_i,_len,_ref;if(null==options&&(options={}),message=message.replace(HTML_ESCAPE_REGEXP,function(htmlMatch){return HTML_ESCAPE[htmlMatch]}),matches=message.match(__I18n.PLACEHOLDER),!matches)return message;for(_i=0,_len=matches.length;_len>_i;_i++)placeholder=matches[_i],name=placeholder.replace(__I18n.PLACEHOLDER,"$1"),value=null!=(_ref=options[name])?_ref:"[missing "+placeholder+" value]",regex=new RegExp(placeholder.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),message=message.replace(regex,value);return message},__I18n.prototype.copyWithScope=function(scope){return"string"==typeof scope&&(scope=scope.split(".")),new __I18n({locale:this.locale,country:this.country,translations:this.translations,scope:scope,keyErrors:this.keyErrors})},__I18n.prototype.scoped=function(scope){return new __I18n({locale:this.locale,country:this.country,translations:this.translations,scope:this.prepareKey("."+scope),keyErrors:this.keyErrors})},__I18n.prototype.pluralize=function(count,scope,options){var keys,msg,node,pluralKey,_i,_len;if(null==options&&(options={}),node=this.lookup(scope,options),!node)return this.missingTranslation(scope);for(options.count=count.toString(),msg=null,keys=this.pluralKeys(Number(count)),_i=0,_len=keys.length;_len>_i;_i++)if(pluralKey=keys[_i],null!=node[pluralKey]){msg=this.interpolate(node[pluralKey],options);break}return null!=msg?msg:this.missingTranslation(scope,keys.pop())},__I18n.prototype.pluralKeys=function(count){var baseRule;return baseRule=this.pluralRule()(count),0===count&&"zero"!==baseRule?["zero",baseRule]:[baseRule]},__I18n.prototype.prepareOptions=function(){var k,opts,optsArr,res,v,_i,_len;for(optsArr=1<=arguments.length?__slice.call(arguments,0):[],res={},_i=0,_len=optsArr.length;_len>_i;_i++)if(opts=optsArr[_i],"object"==typeof opts)for(k in opts)v=opts[k],null==res[k]&&(res[k]=v);return res},__I18n.prototype.pluralRule=function(){var _ref;return null!=(_ref=this.pluralRules[this.lang])?_ref:defaultPlural},__I18n.prototype.pluralRules={},__I18n}(),__I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,__I18n.prototype.PLACEHOLDER=__I18n.PLACEHOLDER,__I18n.prototype.t=__I18n.prototype.translate,__I18n.prototype.l=__I18n.prototype.localize,__I18n.prototype.p=__I18n.prototype.pluralize,null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(module.exports=__I18n),"undefined"!=typeof window&&null!==window&&(window.I18n=new __I18n)}.call(this),//     Underscore may be freely distributed under the MIT license.
function(){var root=this,previousUnderscore=root._,breaker={},ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){return obj instanceof _?obj:this instanceof _?(this._wrapped=obj,void 0):new _(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.6.0";var each=_.each=_.forEach=function(obj,iterator,context){if(null==obj)return obj;if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,length=obj.length;length>i;i++)if(iterator.call(context,obj[i],i,obj)===breaker)return}else for(var keys=_.keys(obj),i=0,length=keys.length;length>i;i++)if(iterator.call(context,obj[keys[i]],keys[i],obj)===breaker)return;return obj};_.map=_.collect=function(obj,iterator,context){var results=[];return null==obj?results:nativeMap&&obj.map===nativeMap?obj.map(iterator,context):(each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))}),results)};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduce&&obj.reduce===nativeReduce)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduce(iterator,memo):obj.reduce(iterator);if(each(obj,function(value,index,list){initial?memo=iterator.call(context,memo,value,index,list):(memo=value,initial=!0)}),!initial)throw new TypeError(reduceError);return memo},_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduceRight&&obj.reduceRight===nativeReduceRight)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}if(each(obj,function(value,index,list){index=keys?keys[--length]:--length,initial?memo=iterator.call(context,memo,obj[index],index,list):(memo=obj[index],initial=!0)}),!initial)throw new TypeError(reduceError);return memo},_.find=_.detect=function(obj,predicate,context){var result;return any(obj,function(value,index,list){return predicate.call(context,value,index,list)?(result=value,!0):void 0}),result},_.filter=_.select=function(obj,predicate,context){var results=[];return null==obj?results:nativeFilter&&obj.filter===nativeFilter?obj.filter(predicate,context):(each(obj,function(value,index,list){predicate.call(context,value,index,list)&&results.push(value)}),results)},_.reject=function(obj,predicate,context){return _.filter(obj,function(value,index,list){return!predicate.call(context,value,index,list)},context)},_.every=_.all=function(obj,predicate,context){predicate||(predicate=_.identity);var result=!0;return null==obj?result:nativeEvery&&obj.every===nativeEvery?obj.every(predicate,context):(each(obj,function(value,index,list){return(result=result&&predicate.call(context,value,index,list))?void 0:breaker}),!!result)};var any=_.some=_.any=function(obj,predicate,context){predicate||(predicate=_.identity);var result=!1;return null==obj?result:nativeSome&&obj.some===nativeSome?obj.some(predicate,context):(each(obj,function(value,index,list){return result||(result=predicate.call(context,value,index,list))?breaker:void 0}),!!result)};_.contains=_.include=function(obj,target){return null==obj?!1:nativeIndexOf&&obj.indexOf===nativeIndexOf?-1!=obj.indexOf(target):any(obj,function(value){return value===target})},_.invoke=function(obj,method){var args=slice.call(arguments,2),isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,_.property(key))},_.where=function(obj,attrs){return _.filter(obj,_.matches(attrs))},_.findWhere=function(obj,attrs){return _.find(obj,_.matches(attrs))},_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.max.apply(Math,obj);var result=-1/0,lastComputed=-1/0;return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>lastComputed&&(result=value,lastComputed=computed)}),result},_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.min.apply(Math,obj);var result=1/0,lastComputed=1/0;return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;lastComputed>computed&&(result=value,lastComputed=computed)}),result},_.shuffle=function(obj){var rand,index=0,shuffled=[];return each(obj,function(value){rand=_.random(index++),shuffled[index-1]=shuffled[rand],shuffled[rand]=value}),shuffled},_.sample=function(obj,n,guard){return null==n||guard?(obj.length!==+obj.length&&(obj=_.values(obj)),obj[_.random(obj.length-1)]):_.shuffle(obj).slice(0,Math.max(0,n))};var lookupIterator=function(value){return null==value?_.identity:_.isFunction(value)?value:_.property(value)};_.sortBy=function(obj,iterator,context){return iterator=lookupIterator(iterator),_.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(a>b||void 0===a)return 1;if(b>a||void 0===b)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iterator,context){var result={};return iterator=lookupIterator(iterator),each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)}),result}};_.groupBy=group(function(result,key,value){_.has(result,key)?result[key].push(value):result[key]=[value]}),_.indexBy=group(function(result,key,value){result[key]=value}),_.countBy=group(function(result,key){_.has(result,key)?result[key]++:result[key]=1}),_.sortedIndex=function(array,obj,iterator,context){iterator=lookupIterator(iterator);for(var value=iterator.call(context,obj),low=0,high=array.length;high>low;){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low},_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):obj.length===+obj.length?_.map(obj,_.identity):_.values(obj):[]},_.size=function(obj){return null==obj?0:obj.length===+obj.length?obj.length:_.keys(obj).length},_.first=_.head=_.take=function(array,n,guard){return null==array?void 0:null==n||guard?array[0]:0>n?[]:slice.call(array,0,n)},_.initial=function(array,n,guard){return slice.call(array,0,array.length-(null==n||guard?1:n))},_.last=function(array,n,guard){return null==array?void 0:null==n||guard?array[array.length-1]:slice.call(array,Math.max(array.length-n,0))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){return shallow&&_.every(input,_.isArray)?concat.apply(output,input):(each(input,function(value){_.isArray(value)||_.isArguments(value)?shallow?push.apply(output,value):flatten(value,shallow,output):output.push(value)}),output)};_.flatten=function(array,shallow){return flatten(array,shallow,[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.partition=function(array,predicate){var pass=[],fail=[];return each(array,function(elem){(predicate(elem)?pass:fail).push(elem)}),[pass,fail]},_.uniq=_.unique=function(array,isSorted,iterator,context){_.isFunction(isSorted)&&(context=iterator,iterator=isSorted,isSorted=!1);var initial=iterator?_.map(array,iterator,context):array,results=[],seen=[];return each(initial,function(value,index){(isSorted?index&&seen[seen.length-1]===value:_.contains(seen,value))||(seen.push(value),results.push(array[index]))}),results},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.contains(other,item)})})},_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})},_.zip=function(){for(var length=_.max(_.pluck(arguments,"length").concat(0)),results=new Array(length),i=0;length>i;i++)results[i]=_.pluck(arguments,""+i);return results},_.object=function(list,values){if(null==list)return{};for(var result={},i=0,length=list.length;length>i;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result},_.indexOf=function(array,item,isSorted){if(null==array)return-1;var i=0,length=array.length;if(isSorted){if("number"!=typeof isSorted)return i=_.sortedIndex(array,item),array[i]===item?i:-1;i=0>isSorted?Math.max(0,length+isSorted):isSorted}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;length>i;i++)if(array[i]===item)return i;return-1},_.lastIndexOf=function(array,item,from){if(null==array)return-1;var hasIndex=null!=from;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item);for(var i=hasIndex?from:array.length;i--;)if(array[i]===item)return i;return-1},_.range=function(start,stop,step){arguments.length<=1&&(stop=start||0,start=0),step=arguments[2]||1;for(var length=Math.max(Math.ceil((stop-start)/step),0),idx=0,range=new Array(length);length>idx;)range[idx++]=start,start+=step;return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;return args=slice.call(arguments,2),bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}},_.partial=function(func){var boundArgs=slice.call(arguments,1);return function(){for(var position=0,args=boundArgs.slice(),i=0,length=args.length;length>i;i++)args[i]===_&&(args[i]=arguments[position++]);for(;position<arguments.length;)args.push(arguments[position++]);return func.apply(this,args)}},_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(0===funcs.length)throw new Error("bindAll must be passed function names");return each(funcs,function(f){obj[f]=_.bind(obj[f],obj)}),obj},_.memoize=function(func,hasher){var memo={};return hasher||(hasher=_.identity),function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=options.leading===!1?0:_.now(),timeout=null,result=func.apply(context,args),context=args=null};return function(){var now=_.now();previous||options.leading!==!1||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args),context=args=null):timeout||options.trailing===!1||(timeout=setTimeout(later,remaining)),result}},_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result,later=function(){var last=_.now()-timestamp;wait>last?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args),context=args=null))};return function(){context=this,args=arguments,timestamp=_.now();var callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args),context=args=null),result}},_.once=function(func){var memo,ran=!1;return function(){return ran?memo:(ran=!0,memo=func.apply(this,arguments),func=null,memo)}},_.wrap=function(func,wrapper){return _.partial(wrapper,func)},_.compose=function(){var funcs=arguments;return function(){for(var args=arguments,i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}},_.after=function(times,func){return function(){return--times<1?func.apply(this,arguments):void 0}},_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)_.has(obj,key)&&keys.push(key);return keys},_.values=function(obj){for(var keys=_.keys(obj),length=keys.length,values=new Array(length),i=0;length>i;i++)values[i]=obj[keys[i]];return values},_.pairs=function(obj){for(var keys=_.keys(obj),length=keys.length,pairs=new Array(length),i=0;length>i;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs},_.invert=function(obj){for(var result={},keys=_.keys(obj),i=0,length=keys.length;length>i;i++)result[obj[keys[i]]]=keys[i];return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)obj[prop]=source[prop]}),obj},_.pick=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));return each(keys,function(key){key in obj&&(copy[key]=obj[key])}),copy},_.omit=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj)_.contains(keys,key)||(copy[key]=obj[key]);return copy},_.defaults=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)void 0===obj[prop]&&(obj[prop]=source[prop])}),obj},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj};var eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=aStack.length;length--;)if(aStack[length]==a)return bStack[length]==b;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&"constructor"in a&&"constructor"in b)return!1;aStack.push(a),bStack.push(b);var size=0,result=!0;if("[object Array]"==className){if(size=a.length,result=size==b.length)for(;size--&&(result=eq(a[size],b[size],aStack,bStack)););}else{for(var key in a)if(_.has(a,key)&&(size++,!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack))))break;if(result){for(key in b)if(_.has(b,key)&&!size--)break;result=!size}}return aStack.pop(),bStack.pop(),result};_.isEqual=function(a,b){return eq(a,b,[],[])},_.isEmpty=function(obj){if(null==obj)return!0;if(_.isArray(obj)||_.isString(obj))return 0===obj.length;for(var key in obj)if(_.has(obj,key))return!1;return!0},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"==toString.call(obj)},_.isObject=function(obj){return obj===Object(obj)},each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}}),_.isArguments(arguments)||(_.isArguments=function(obj){return!(!obj||!_.has(obj,"callee"))}),"function"!=typeof/./&&(_.isFunction=function(obj){return"function"==typeof obj}),_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj},_.isBoolean=function(obj){return obj===!0||obj===!1||"[object Boolean]"==toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.constant=function(value){return function(){return value}},_.property=function(key){return function(obj){return obj[key]}},_.matches=function(attrs){return function(obj){if(obj===attrs)return!0;for(var key in attrs)if(attrs[key]!==obj[key])return!1;return!0}},_.times=function(n,iterator,context){for(var accum=Array(Math.max(0,n)),i=0;n>i;i++)accum[i]=iterator.call(context,i);return accum},_.random=function(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))},_.now=Date.now||function(){return(new Date).getTime()};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){return null==string?"":(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}}),_.result=function(object,property){if(null==object)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value},_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]}),escape&&(source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"),interpolate&&(source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"),evaluate&&(source+="';\n"+evaluate+"\n__p+='"),index=offset+match.length,match}),source+="';\n",settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};return template.source="function("+(settings.variable||"obj")+"){\n"+source+"}",template},_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_),each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return method.apply(obj,arguments),"shift"!=name&&"splice"!=name||0!==obj.length||delete obj[0],result.call(this,obj)}}),each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}.call(this),/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */
function(window,undefined){function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);return jQuery.isWindow(obj)?!1:1===obj.nodeType&&length?!0:"array"===type||"function"!==type&&(0===length||"number"==typeof length&&length>0&&length-1 in obj)}function createOptions(options){var object=optionsCache[options]={};return jQuery.each(options.match(core_rnotwhite)||[],function(_,flag){object[flag]=!0}),object}function internalData(elem,name,data,pvt){if(jQuery.acceptData(elem)){var ret,thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||data!==undefined||"string"!=typeof name)return id||(id=isNode?elem[internalKey]=core_deletedIds.pop()||jQuery.guid++:internalKey),cache[id]||(cache[id]=isNode?{}:{toJSON:jQuery.noop}),("object"==typeof name||"function"==typeof name)&&(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),data!==undefined&&(thisCache[jQuery.camelCase(name)]=data),"string"==typeof name?(ret=thisCache[name],null==ret&&(ret=thisCache[jQuery.camelCase(name)])):ret=thisCache,ret}}function internalRemoveData(elem,name,pvt){if(jQuery.acceptData(elem)){var thisCache,i,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){jQuery.isArray(name)?name=name.concat(jQuery.map(name,jQuery.camelCase)):name in thisCache?name=[name]:(name=jQuery.camelCase(name),name=name in thisCache?[name]:name.split(" ")),i=name.length;for(;i--;)delete thisCache[name[i]];if(pvt?!isEmptyDataObject(thisCache):!jQuery.isEmptyObject(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(isNode?jQuery.cleanData([elem],!0):jQuery.support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=null)}}}function dataAttr(elem,key,data){if(data===undefined&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if(data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){var name;for(name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function sibling(cur,dir){do cur=cur[dir];while(cur&&1!==cur.nodeType);return cur}function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(isSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return jQuery.inArray(elem,qualifier)>=0!==not})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(1===content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==jQuery.find.attr(elem,"type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var elem,i=0;null!=(elem=elems[i]);i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle,curData.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type,events[type][i])}curData.data&&(curData.data=jQuery.extend({},curData.data))}}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(1===dest.nodeType){if(nodeName=dest.nodeName.toLowerCase(),!jQuery.support.noCloneEvent&&dest[jQuery.expando]){data=jQuery._data(dest);for(e in data.events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}"script"===nodeName&&dest.text!==src.text?(disableScript(dest).text=src.text,restoreScript(dest)):"object"===nodeName?(dest.parentNode&&(dest.outerHTML=src.outerHTML),jQuery.support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)):"input"===nodeName&&manipulation_rcheckableType.test(src.type)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:("input"===nodeName||"textarea"===nodeName)&&(dest.defaultValue=src.defaultValue)}}function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!==core_strundefined?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!==core_strundefined?context.querySelectorAll(tag||"*"):undefined;if(!found)for(found=[],elems=context.childNodes||context;null!=(elem=elems[i]);i++)!tag||jQuery.nodeName(elem,tag)?found.push(elem):jQuery.merge(found,getAll(elem,tag));return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function fixDefaultChecked(elem){manipulation_rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}function vendorPropName(style,name){if(name in style)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if(name=cssPrefixes[i]+capName,name in style)return name;return origName}function isHidden(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;length>index;index++)elem=elements[index],elem.style&&(values[index]=jQuery._data(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName)))):values[index]||(hidden=isHidden(elem),(display&&"none"!==display||!hidden)&&jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;length>index;index++)elem=elements[index],elem.style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;4>i;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(0>=val||null==val){if(val=curCSS(elem,name,styles),(0>val||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function css_defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||(display=actualDisplay(nodeName,doc),"none"!==display&&display||(iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(doc.documentElement),doc=(iframe[0].contentWindow||iframe[0].contentDocument).document,doc.write("<!doctype html><html><body>"),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");return elem.remove(),display}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(core_rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType[0]?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)src[key]!==undefined&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}function ajaxHandleResponses(s,jqXHR,responses){for(var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),ct===undefined&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}return finalDataType?(finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]):void 0}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(conv=converters[prev+" "+current]||converters["* "+current],!conv)for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){conv===!0?conv=converters[conv2]:converters[conv2]!==!0&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(conv!==!0)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function createFxNow(){return setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function createTween(value,prop,animation){for(var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;length>index;index++)if(tween=collection[index].call(animation,prop,value))return tween}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;length>index;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),1>percent&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;length>index;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(propFilter(props,animation.opts.specialEasing);length>index;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),hooks=jQuery.cssHooks[name],hooks&&"expand"in hooks){value=hooks.expand(value),delete props[name];for(index in value)index in props||(props[index]=value[index],specialEasing[index]=easing)}else specialEasing[name]=easing}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=jQuery._data(elem,"fxshow");opts.queue||(hooks=jQuery._queueHooks(elem,"fx"),null==hooks.unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})})),1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],"inline"===jQuery.css(elem,"display")&&"none"===jQuery.css(elem,"float")&&(jQuery.support.inlineBlockNeedsLayout&&"inline"!==css_defaultDisplay(elem.nodeName)?style.zoom=1:style.display="inline-block")),opts.overflow&&(style.overflow="hidden",jQuery.support.shrinkWrapBlocks||anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(prop in props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show"))continue;orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}if(!jQuery.isEmptyObject(orig)){dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=jQuery._data(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;jQuery._removeData(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(prop in orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function genFx(type,includeWidth){var which,attrs={height:type},i=0;for(includeWidth=includeWidth?1:0;4>i;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType?elem.defaultView||elem.parentWindow:!1}var readyList,rootjQuery,core_strundefined=typeof undefined,location=window.location,document=window.document,docElem=document.documentElement,_jQuery=window.jQuery,_$=window.$,class2type={},core_deletedIds=[],core_version="1.10.2",core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty,core_trim=core_version.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,core_rnotwhite=/\S+/g,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()},completed=function(event){(document.addEventListener||"load"===event.type||"complete"===document.readyState)&&(detach(),jQuery.ready())},detach=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1)):(document.detachEvent("onreadystatechange",completed),window.detachEvent("onload",completed))};jQuery.fn=jQuery.prototype={jquery:core_version,constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem;if(!selector)return this;if("string"==typeof selector){if(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector),!match||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}if(elem=document.getElementById(match[2]),elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?rootjQuery.ready(selector):(selector.selector!==undefined&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))},selector:"",length:0,toArray:function(){return core_slice.call(this)},get:function(num){return null==num?this.toArray():0>num?this[this.length+num]:this[num]},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){return jQuery.ready.promise().done(fn),this},slice:function(){return this.pushStack(core_slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(0>i?len:0);return this.pushStack(j>=0&&len>j?[this[j]]:[])},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),"object"==typeof target||jQuery.isFunction(target)||(target={}),length===i&&(target=this,--i);length>i;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):copy!==undefined&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+(core_version+Math.random()).replace(/\D/g,""),noConflict:function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(wait===!0?!--jQuery.readyWait:!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready);jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0||(readyList.resolveWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready"))}},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return null==obj?String(obj):"object"==typeof obj||"function"==typeof obj?class2type[core_toString.call(obj)]||"object":typeof obj},isPlainObject:function(obj){var key;if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(jQuery.support.ownLast)for(key in obj)return core_hasOwn.call(obj,key);for(key in obj);return key===undefined||core_hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},error:function(msg){throw new Error(msg)},parseHTML:function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))},parseJSON:function(data){return window.JSON&&window.JSON.parse?window.JSON.parse(data):null===data?data:"string"==typeof data&&(data=jQuery.trim(data),data&&rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))?new Function("return "+data)():(jQuery.error("Invalid JSON: "+data),void 0)},parseXML:function(data){var xml,tmp;if(!data||"string"!=typeof data)return null;try{window.DOMParser?(tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")):(xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async="false",xml.loadXML(data))}catch(e){xml=undefined}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml},noop:function(){},globalEval:function(data){data&&jQuery.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;length>i&&(value=callback.apply(obj[i],args),value!==!1);i++);else for(i in obj)if(value=callback.apply(obj[i],args),value===!1)break}else if(isArray)for(;length>i&&(value=callback.call(obj[i],i,obj[i]),value!==!1);i++);else for(i in obj)if(value=callback.call(obj[i],i,obj[i]),value===!1)break;return obj},trim:core_trim&&!core_trim.call("﻿ ")?function(text){return null==text?"":core_trim.call(text)}:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):core_push.call(ret,arr)),ret},inArray:function(elem,arr,i){var len;if(arr){if(core_indexOf)return core_indexOf.call(arr,elem,i);for(len=arr.length,i=i?0>i?Math.max(0,len+i):i:0;len>i;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){var l=second.length,i=first.length,j=0;if("number"==typeof l)for(;l>j;j++)first[i++]=second[j];else for(;second[j]!==undefined;)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;for(inv=!!inv;length>i;i++)retVal=!!callback(elems[i],i),inv!==retVal&&ret.push(elems[i]);return ret},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray)for(;length>i;i++)value=callback(elems[i],i,arg),null!=value&&(ret[ret.length]=value);else for(i in elems)value=callback(elems[i],i,arg),null!=value&&(ret[ret.length]=value);return core_concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;return"string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn)?(args=core_slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(core_slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy):undefined},access:function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key)){chainable=!0;for(i in key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw)}else if(value!==undefined&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;length>i;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date).getTime()},swap:function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret}}),jQuery.ready.promise=function(obj){if(!readyList)if(readyList=jQuery.Deferred(),"complete"===document.readyState)setTimeout(jQuery.ready);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1);else{document.attachEvent("onreadystatechange",completed),window.attachEvent("onload",completed);var top=!1;try{top=null==window.frameElement&&document.documentElement}catch(e){}top&&top.doScroll&&function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}detach(),jQuery.ready()}}()}return readyList.promise(obj)},jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),rootjQuery=jQuery(document),/*!
 * Sizzle CSS Selector Engine v1.10.2
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03
 */
function(window,undefined){function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=context.nodeType)&&9!==nodeType)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType){if(elem=context.getElementById(m),!elem||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&context.parentNode||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){function cache(key,value){return keys.push(key+=" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function setFilters(){}function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){(!matched||(match=rcomma.exec(soFar)))&&(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";len>i;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var data,cache,outerCache,dirkey=dirruns+" "+doneName;if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)if(outerCache=elem[expando]||(elem[expando]={}),(cache=outerCache[dir])&&cache[0]===dirkey){if((data=cache[1])===!0||data===cachedruns)return data===!0}else if(cache=outerCache[dir]=[dirkey],cache[1]=matcher(elem,context,xml)||cachedruns,cache[1]===!0)return!0}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;len>i;i++)(elem=unmatched[i])&&(!filter||filter(elem,context,xml))&&(newUnmatched.push(elem),mapped&&map.push(i));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];len>i;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;len>j&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,j>i&&matcherFromTokens(tokens.slice(i,j)),len>j&&matcherFromTokens(tokens=tokens.slice(j)),len>j&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var matcherCachedRuns=0,bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=null!=expandContext,contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",expandContext&&context.parentNode||context),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1;for(outermost&&(outermostContext=context!==document&&context,cachedruns=matcherCachedRuns);null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique,cachedruns=++matcherCachedRuns)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;len>i;i++)Sizzle(selector,contexts[i],results);return results}function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed&&1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0],!context)return results;selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&context.parentNode||context))){if(tokens.splice(i,1),selector=seed.length&&toSelector(tokens),!selector)return push.apply(results,seed),results;break}}return compile(selector,match)(seed,context,!documentIsHTML,results,rsibling.test(selector)),results}var i,support,cachedruns,Expr,getText,isXML,compile,outermostContext,sortInput,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),hasDuplicate=!1,sortOrder=function(a,b){return a===b?(hasDuplicate=!0,0):0},strundefined=typeof undefined,MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){for(var i=0,len=this.length;len>i;i++)if(this[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:([*^$|!~]?=)"+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rsibling=new RegExp(whitespace+"*[+~]"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:0>high?String.fromCharCode(high+65536):String.fromCharCode(55296|high>>10,56320|1023&high)};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1},support=Sizzle.support={},setDocument=Sizzle.setDocument=function(node){var doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=doc.documentElement,documentIsHTML=!isXML(doc),parent&&parent.attachEvent&&parent!==parent.top&&parent.attachEvent("onbeforeunload",function(){setDocument()}),support.attributes=assert(function(div){return div.className="i",!div.getAttribute("className")}),support.getElementsByTagName=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.getElementsByClassName=assert(function(div){return div.innerHTML="<div class='a'></div><div class='a i'></div>",div.firstChild.className="i",2===div.getElementsByClassName("i").length}),support.getById=assert(function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length}),support.getById?(Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){return typeof context.getElementsByClassName!==strundefined&&documentIsHTML?context.getElementsByClassName(className):void 0},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(doc.querySelectorAll))&&(assert(function(div){div.innerHTML="<select><option selected=''></option></select>",div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked")}),assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("t",""),div.querySelectorAll("[t^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),contains=rnative.test(docElem.contains)||docElem.compareDocumentPosition?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=docElem.compareDocumentPosition?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);return compare?1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||contains(preferredDoc,a)?-1:b===doc||contains(preferredDoc,b)?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0:4&compare?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(a===b)return hasDuplicate=!0,0;if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),!(!support.matchesSelector||!documentIsHTML||rbuggyMatches&&rbuggyMatches.test(expr)||rbuggyQSA&&rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val===undefined?support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null:val},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i];i++)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[5]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]&&match[4]!==undefined?match[2]=match[4]:unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:operator?(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result+" ").indexOf(check)>-1:"|="===operator?result===check||result.slice(0,check.length+1)===check+"-":!1):!0}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(outerCache=parent[expando]||(parent[expando]={}),cache=outerCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return diff-=last,diff===first||0===diff%first&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf.call(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return elemLang=elemLang.toLowerCase(),elemLang===lang||0===elemLang.indexOf(lang+"-");while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===!1},disabled:function(elem){return elem.disabled===!0},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeName>"@"||3===elem.nodeType||4===elem.nodeType)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||attr.toLowerCase()===elem.type)},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[0>argument?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}},Expr.pseudos.nth=Expr.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(group||(group=tokenize(selector)),i=group.length;i--;)cached=matcherFromTokens(group[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=hasDuplicate,setDocument(),support.sortDetached=assert(function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))}),assert(function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){return isXML?void 0:elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){return isXML||"input"!==elem.nodeName.toLowerCase()?void 0:elem.defaultValue}),assert(function(div){return null==div.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){var val;return isXML?void 0:(val=elem.getAttributeNode(name))&&val.specified?val.value:elem[name]===!0?name.toLowerCase():null}),jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains}(window);var optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||createOptions(options):jQuery.extend({},options);var firing,memory,fired,firingLength,firingIndex,firingStart,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===!1&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})}(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;)list.splice(index,1),firing&&(firingLength>=index&&firingLength--,firingIndex>=index&&firingIndex--)}),this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!(!list||!list.length)},empty:function(){return list=[],firingLength=0,this},disable:function(){return list=stack=memory=undefined,this},disabled:function(){return!list},lock:function(){return stack=undefined,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return!list||fired&&!stack||(args=args||[],args=[context,args.slice?args.slice():args],firing?stack.push(args):fire(args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[action+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred
},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=arguments.length>1?core_slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(length>1)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);length>i;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}}),jQuery.support=function(support){var all,a,input,select,fragment,opt,eventName,isSupported,i,div=document.createElement("div");if(div.setAttribute("className","t"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",all=div.getElementsByTagName("*")||[],a=div.getElementsByTagName("a")[0],!a||!a.style||!all.length)return support;select=document.createElement("select"),opt=select.appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],a.style.cssText="top:1px;float:left;opacity:.5",support.getSetAttribute="t"!==div.className,support.leadingWhitespace=3===div.firstChild.nodeType,support.tbody=!div.getElementsByTagName("tbody").length,support.htmlSerialize=!!div.getElementsByTagName("link").length,support.style=/top/.test(a.getAttribute("style")),support.hrefNormalized="/a"===a.getAttribute("href"),support.opacity=/^0.5/.test(a.style.opacity),support.cssFloat=!!a.style.cssFloat,support.checkOn=!!input.value,support.optSelected=opt.selected,support.enctype=!!document.createElement("form").enctype,support.html5Clone="<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,support.inlineBlockNeedsLayout=!1,support.shrinkWrapBlocks=!1,support.pixelPosition=!1,support.deleteExpando=!0,support.noCloneEvent=!0,support.reliableMarginRight=!0,support.boxSizingReliable=!0,input.checked=!0,support.noCloneChecked=input.cloneNode(!0).checked,select.disabled=!0,support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=!1}input=document.createElement("input"),input.setAttribute("value",""),support.input=""===input.getAttribute("value"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value,input.setAttribute("checked","t"),input.setAttribute("name","t"),fragment=document.createDocumentFragment(),fragment.appendChild(input),support.appendChecked=input.checked,support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked,div.attachEvent&&(div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).click());for(i in{submit:!0,change:!0,focusin:!0})div.setAttribute(eventName="on"+i,"t"),support[i+"Bubbles"]=eventName in window||div.attributes[eventName].expando===!1;div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip;for(i in jQuery(support))break;return support.ownLast="0"!==i,jQuery(function(){var container,marginDiv,tds,divReset="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",body=document.getElementsByTagName("body")[0];body&&(container=document.createElement("div"),container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",body.appendChild(container).appendChild(div),div.innerHTML="<table><tr><td></td><td>t</td></tr></table>",tds=div.getElementsByTagName("td"),tds[0].style.cssText="padding:0;margin:0;border:0;display:none",isSupported=0===tds[0].offsetHeight,tds[0].style.display="",tds[1].style.display="none",support.reliableHiddenOffsets=isSupported&&0===tds[0].offsetHeight,div.innerHTML="",div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",jQuery.swap(body,null!=body.style.zoom?{zoom:1}:{},function(){support.boxSizing=4===div.offsetWidth}),window.getComputedStyle&&(support.pixelPosition="1%"!==(window.getComputedStyle(div,null)||{}).top,support.boxSizingReliable="4px"===(window.getComputedStyle(div,null)||{width:"4px"}).width,marginDiv=div.appendChild(document.createElement("div")),marginDiv.style.cssText=div.style.cssText=divReset,marginDiv.style.marginRight=marginDiv.style.width="0",div.style.width="1px",support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)),typeof div.style.zoom!==core_strundefined&&(div.innerHTML="",div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1",support.inlineBlockNeedsLayout=3===div.offsetWidth,div.style.display="block",div.innerHTML="<div></div>",div.firstChild.style.width="5px",support.shrinkWrapBlocks=3!==div.offsetWidth,support.inlineBlockNeedsLayout&&(body.style.zoom=1)),body.removeChild(container),container=div=tds=marginDiv=null)}),all=select=fragment=opt=a=input=null,support}({});var rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(elem){return elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando],!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,!0)},_removeData:function(elem,name){return internalRemoveData(elem,name,!0)},acceptData:function(elem){if(elem.nodeType&&1!==elem.nodeType&&9!==elem.nodeType)return!1;var noData=elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()];return!noData||noData!==!0&&elem.getAttribute("classid")===noData}}),jQuery.fn.extend({data:function(key,value){var attrs,name,data=null,i=0,elem=this[0];if(key===undefined){if(this.length&&(data=jQuery.data(elem),1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs"))){for(attrs=elem.attributes;i<attrs.length;i++)name=attrs[i].name,0===name.indexOf("data-")&&(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name]));jQuery._data(elem,"parsedAttrs",!0)}return data}return"object"==typeof key?this.each(function(){jQuery.data(this,key)}):arguments.length>1?this.each(function(){jQuery.data(this,key,value)}):elem?dataAttr(elem,key,jQuery.data(elem,key)):null},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;return elem?(type=(type||"fx")+"queue",queue=jQuery._data(elem,type),data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]):void 0},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,next,hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue"),jQuery._removeData(elem,key)})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=undefined),type=type||"fx";i--;)tmp=jQuery._data(elements[i],type+"queueHooks"),tmp&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var nodeHook,boolHook,rclass=/[\t\r\n\f]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,getSetInput=jQuery.support.input;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=undefined,delete this[name]}catch(e){}})},addClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed="string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(core_rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");elem.className=jQuery.trim(cur)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed=0===arguments.length||"string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(core_rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>=0;)cur=cur.replace(" "+clazz+" "," ");elem.className=value?jQuery.trim(cur):""}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if("string"===type)for(var className,i=0,self=jQuery(this),classNames=value.match(core_rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else(type===core_strundefined||"boolean"===type)&&(this.className&&jQuery._data(this,"__className__",this.className),this.className=this.className||value===!1?"":jQuery._data(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return!0;return!1},val:function(value){var ret,hooks,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val;1===this.nodeType&&(val=isFunction?value.call(this,i,jQuery(this).val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()],hooks&&"set"in hooks&&hooks.set(this,val,"value")!==undefined||(this.value=val))});if(elem)return hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()],hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined?ret:(ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:elem.text}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||0>index,values=one?null:[],max=one?index+1:options.length,i=0>index?max:one?index:0;max>i;i++)if(option=options[i],!(!option.selected&&i!==index||(jQuery.support.optDisabled?option.disabled:null!==option.getAttribute("disabled"))||option.parentNode.disabled&&jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)option=options[i],(option.selected=jQuery.inArray(jQuery(option).val(),values)>=0)&&(optionSet=!0);return optionSet||(elem.selectedIndex=-1),values}}},attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return typeof elem.getAttribute===core_strundefined?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)),value===undefined?hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:(ret=jQuery.find.attr(elem,name),null==ret?undefined:ret):null!==value?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem.setAttribute(name,value+""),value):(jQuery.removeAttr(elem,name),void 0))},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(core_rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)?getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem[propName]=!1:elem[jQuery.camelCase("default-"+name)]=elem[propName]=!1:jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName)},attrHooks:{type:{set:function(elem,value){if(!jQuery.support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),value!==undefined?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}}}),boolHook={set:function(elem,value,name){return value===!1?jQuery.removeAttr(elem,name):getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name):elem[jQuery.camelCase("default-"+name)]=elem[name]=!0,name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=jQuery.expr.attrHandle[name]||jQuery.find.attr;jQuery.expr.attrHandle[name]=getSetInput&&getSetAttribute||!ruseDefault.test(name)?function(elem,name,isXML){var fn=jQuery.expr.attrHandle[name],ret=isXML?undefined:(jQuery.expr.attrHandle[name]=undefined)!=getter(elem,name,isXML)?name.toLowerCase():null;return jQuery.expr.attrHandle[name]=fn,ret}:function(elem,name,isXML){return isXML?undefined:elem[jQuery.camelCase("default-"+name)]?name.toLowerCase():null}}),getSetInput&&getSetAttribute||(jQuery.attrHooks.value={set:function(elem,value,name){return jQuery.nodeName(elem,"input")?(elem.defaultValue=value,void 0):nodeHook&&nodeHook.set(elem,value,name)}}),getSetAttribute||(nodeHook={set:function(elem,value,name){var ret=elem.getAttributeNode(name);return ret||elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name)),ret.value=value+="","value"===name||value===elem.getAttribute(name)?value:undefined}},jQuery.expr.attrHandle.id=jQuery.expr.attrHandle.name=jQuery.expr.attrHandle.coords=function(elem,name,isXML){var ret;return isXML?undefined:(ret=elem.getAttributeNode(name))&&""!==ret.value?ret.value:null},jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);return ret&&ret.specified?ret.value:undefined},set:nodeHook.set},jQuery.attrHooks.contenteditable={set:function(elem,value,name){nodeHook.set(elem,""===value?!1:value,name)}},jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]={set:function(elem,value){return""===value?(elem.setAttribute(name,"auto"),value):void 0}}})),jQuery.support.hrefNormalized||jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}}),jQuery.support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||undefined},set:function(elem,value){return elem.style.cssText=value+""}}),jQuery.support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this}),jQuery.support.enctype||(jQuery.propFix.enctype="encoding"),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){return jQuery.isArray(value)?elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0:void 0}},jQuery.support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})});var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(elemData){for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return typeof jQuery===core_strundefined||e&&jQuery.event.triggered===e.type?undefined:jQuery.event.dispatch.apply(eventHandle.elem,arguments)},eventHandle.elem=elem),types=(types||"").match(core_rnotwhite)||[""],t=types.length;t--;)tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||(handlers=events[type]=[],handlers.delegateCount=0,special.setup&&special.setup.call(elem,data,namespaces,eventHandle)!==!1||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0);elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(types=(types||"").match(core_rnotwhite)||[""],t=types.length;t--;)if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,handlers=events[type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&special.teardown.call(elem,namespaces,elemData.handle)!==!1||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,jQuery._removeData(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[elem||document],type=core_hasOwn.call(event,"type")?event.type:event,namespaces=core_hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>=0&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event),event.isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=undefined,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||special.trigger.apply(elem,data)!==!1)){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=i>1?bubbleType:special.bindType||type,handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"),handle&&handle.apply(cur,data),handle=ontype&&cur[ontype],handle&&jQuery.acceptData(cur)&&handle.apply&&handle.apply(cur,data)===!1&&event.preventDefault();if(event.type=type,!onlyHandlers&&!event.isDefaultPrevented()&&(!special._default||special._default.apply(eventPath.pop(),data)===!1)&&jQuery.acceptData(elem)&&ontype&&elem[type]&&!jQuery.isWindow(elem)){tmp=elem[ontype],tmp&&(elem[ontype]=null),jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=undefined,tmp&&(elem[ontype]=tmp)}return event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,ret,handleObj,matched,j,handlerQueue=[],args=core_slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if(args[0]=event,event.delegateTarget=this,!special.preDispatch||special.preDispatch.call(this,event)!==!1){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)(!event.namespace_re||event.namespace_re.test(handleObj.namespace))&&(event.handleObj=handleObj,event.data=handleObj.data,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),ret!==undefined&&(event.result=ret)===!1&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var sel,handleObj,matches,i,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!=this;cur=cur.parentNode||this)if(1===cur.nodeType&&(cur.disabled!==!0||"click"!==event.type)){for(matches=[],i=0;delegateCount>i;i++)handleObj=handlers[i],sel=handleObj.selector+" ",matches[sel]===undefined&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)prop=copy[i],event[prop]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey=!!event.metaKey,fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||button===undefined||(event.which=1&button?1:2&button?3:4&button?2:0),event}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===safeActiveElement()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return jQuery.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){event.result!==undefined&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){var name="on"+type;elem.detachEvent&&(typeof elem[name]===core_strundefined&&(elem[name]=null),elem.detachEvent(name,handle))},jQuery.Event=function(src,props){return this instanceof jQuery.Event?(src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||src.returnValue===!1||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0,void 0):new jQuery.Event(src,props)},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return(!related||related!==target&&!jQuery.contains(target,related))&&(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),jQuery.support.submitBubbles||(jQuery.event.special.submit={setup:function(){return jQuery.nodeName(this,"form")?!1:(jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;form&&!jQuery._data(form,"submitBubbles")&&(jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=!0}),jQuery._data(form,"submitBubbles",!0))}),void 0)},postDispatch:function(event){event._submit_bubble&&(delete event._submit_bubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0))},teardown:function(){return jQuery.nodeName(this,"form")?!1:(jQuery.event.remove(this,"._submit"),void 0)}}),jQuery.support.changeBubbles||(jQuery.event.special.change={setup:function(){return rformElems.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(jQuery.event.add(this,"propertychange._change",function(event){"checked"===event.originalEvent.propertyName&&(this._just_changed=!0)}),jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1),jQuery.event.simulate("change",this,event,!0)})),!1):(jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!jQuery._data(elem,"changeBubbles")&&(jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)}),jQuery._data(elem,"changeBubbles",!0))}),void 0)},handle:function(event){var elem=event.target;return this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type?event.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return jQuery.event.remove(this,"._change"),!rformElems.test(this.nodeName)}}),jQuery.support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){0===attaches++&&document.addEventListener(orig,handler,!0)},teardown:function(){0===--attaches&&document.removeEventListener(orig,handler,!0)}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var type,origFn;if("object"==typeof types){"string"!=typeof selector&&(data=data||selector,selector=undefined);
for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=undefined):null==fn&&("string"==typeof selector?(fn=data,data=undefined):(fn=data,data=selector,selector=undefined)),fn===!1)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}return(selector===!1||"function"==typeof selector)&&(fn=selector,selector=undefined),fn===!1&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];return elem?jQuery.event.trigger(type,data,elem,!0):void 0}});var isSimple=/^.[^:#\[\.,]*$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;len>i;i++)if(jQuery.contains(self[i],this))return!0}));for(i=0;len>i;i++)jQuery.find(selector,self[i],ret);return ret=this.pushStack(len>1?jQuery.unique(ret):ret),ret.selector=this.selector?this.selector+" "+selector:selector,ret},has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;len>i;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length},closest:function(selectors,context){for(var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;l>i;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?pos.index(cur)>-1:1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){cur=ret.push(cur);break}return this.pushStack(ret.length>1?jQuery.unique(ret):ret)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){var set="string"==typeof selector?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(jQuery.unique(all))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),this.length>1&&(guaranteedUnique[name]||(ret=jQuery.unique(ret)),rparentsprev.test(name)&&(ret=ret.reverse())),this.pushStack(ret)}}),jQuery.extend({filter:function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(until===undefined||1!==cur.nodeType||!jQuery(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,manipulation_rcheckableType=/^(?:checkbox|radio)$/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,elems=selector?jQuery.filter(selector,this):this,i=0;null!=(elem=elems[i]);i++)keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){for(1===elem.nodeType&&jQuery.cleanData(getAll(elem,!1));elem.firstChild;)elem.removeChild(elem.firstChild);elem.options&&jQuery.nodeName(elem,"select")&&(elem.options.length=0)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null==dataAndEvents?!1:dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):undefined;if(!("string"!=typeof value||rnoInnerhtml.test(value)||!jQuery.support.htmlSerialize&&rnoshimcache.test(value)||!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(value)||wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()])){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;l>i;i++)elem=this[i]||{},1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var args=jQuery.map(this,function(elem){return[elem.nextSibling,elem.parentNode]}),i=0;return this.domManip(arguments,function(elem){var next=args[i++],parent=args[i++];parent&&(next&&next.parentNode!==parent&&(next=this.nextSibling),jQuery(this).remove(),parent.insertBefore(elem,next))},!0),i?this:this.remove()},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,callback,allowIntersection){args=core_concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||!(1>=l||"string"!=typeof value||jQuery.support.checkClone)&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),self.domManip(args,callback,allowIntersection)});if(l&&(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,!allowIntersection&&this),first=fragment.firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(scripts=jQuery.map(getAll(fragment,"script"),disableScript),hasScripts=scripts.length;l>i;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;hasScripts>i;i++)node=scripts[i],rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl(node.src):jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,"")));fragment=first=null}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;last>=i;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),core_push.apply(ret,elems.get());return this.pushStack(ret)}}),jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?clone=elem.cloneNode(!0):(fragmentDiv.innerHTML=elem.outerHTML,fragmentDiv.removeChild(clone=fragmentDiv.firstChild)),!(jQuery.support.noCloneEvent&&jQuery.support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0;null!=(node=srcElements[i]);++i)destElements[i]&&fixCloneNodeIssues(node,destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0;null!=(node=srcElements[i]);i++)cloneCopyEvent(node,destElements[i]);else cloneCopyEvent(elem,clone);return destElements=getAll(clone,"script"),destElements.length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),destElements=srcElements=node=null,clone},buildFragment:function(elems,context,scripts,selection){for(var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;l>i;i++)if(elem=elems[i],elem||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||safe.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)&&nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0])),!jQuery.support.tbody)for(elem="table"!==tag||rtbody.test(elem)?"<table>"!==wrap[1]||rtbody.test(elem)?0:tmp:tmp.firstChild,j=elem&&elem.childNodes.length;j--;)jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length&&elem.removeChild(tbody);for(jQuery.merge(nodes,tmp.childNodes),tmp.textContent="";tmp.firstChild;)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}else nodes.push(context.createTextNode(elem));for(tmp&&safe.removeChild(tmp),jQuery.support.appendChecked||jQuery.grep(getAll(nodes,"input"),fixDefaultChecked),i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(safe.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return tmp=null,safe},cleanData:function(elems,acceptData){for(var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=jQuery.support.deleteExpando,special=jQuery.event.special;null!=(elem=elems[i]);i++)if((acceptData||jQuery.acceptData(elem))&&(id=elem[internalKey],data=id&&cache[id])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);cache[id]&&(delete cache[id],deleteExpando?delete elem[internalKey]:typeof elem.removeAttribute!==core_strundefined?elem.removeAttribute(internalKey):elem[internalKey]=null,core_deletedIds.push(id))}},_evalUrl:function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),jQuery.fn.extend({wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}});var iframe,getStyles,curCSS,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rposition=/^(top|right|bottom|left)$/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([+-])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"];jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){var len,styles,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;len>i;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],value===undefined)return hooks&&"get"in hooks&&(ret=hooks.get(elem,!1,extra))!==undefined?ret:style[name];if(type=typeof value,"string"===type&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),!(null==value||"number"===type&&isNaN(value)||("number"!==type||jQuery.cssNumber[origName]||(value+="px"),jQuery.support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&(value=hooks.set(elem,value,extra))===undefined)))try{style[name]=value}catch(e){}}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),val===undefined&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),extra===!0||jQuery.isNumeric(num)?num||0:val):val}}),window.getComputedStyle?(getStyles=function(elem){return window.getComputedStyle(elem,null)},curCSS=function(elem,name,_computed){var width,minWidth,maxWidth,computed=_computed||getStyles(elem),ret=computed?computed.getPropertyValue(name)||computed[name]:undefined,style=elem.style;return computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),ret}):document.documentElement.currentStyle&&(getStyles=function(elem){return elem.currentStyle},curCSS=function(elem,name,_computed){var left,rs,rsLeft,computed=_computed||getStyles(elem),ret=computed?computed[name]:undefined,style=elem.style;return null==ret&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,rs=elem.runtimeStyle,rsLeft=rs&&rs.left,rsLeft&&(rs.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(rs.left=rsLeft)),""===ret?"auto":ret}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){return computed?0===elem.offsetWidth&&rdisplayswap.test(jQuery.css(elem,"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra):void 0},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),jQuery.support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1,(value>=1||""===value)&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute&&(style.removeAttribute("filter"),""===value||currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery(function(){jQuery.support.reliableMarginRight||(jQuery.cssHooks.marginRight={get:function(elem,computed){return computed?jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"]):void 0}}),!jQuery.support.pixelPosition&&jQuery.fn.position&&jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){return computed?(computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed):void 0}}})}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!jQuery.support.reliableHiddenOffsets&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];4>i;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!manipulation_rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var ajaxLocParts,ajaxLocation,ajax_nonce=jQuery.now(),ajax_rquery=/\?/,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,response,type,self=this,off=url.indexOf(" ");return off>=0&&(selector=url.slice(off,url.length),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=undefined):params&&"object"==typeof params&&(type="POST"),self.length>0&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=undefined,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,isSuccess=status>=200&&300>status||304===status,responses&&(response=ajaxHandleResponses(s,jqXHR,responses)),response=ajaxConvert(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&(modified=jqXHR.getResponseHeader("Last-Modified"),modified&&(jQuery.lastModified[cacheURL]=modified),modified=jqXHR.getResponseHeader("etag"),modified&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,error=response.error,isSuccess=!error)):(error=statusText,(status||!statusText)&&(statusText="error",0>status&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=undefined,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}"object"==typeof url&&(options=url,url=undefined),options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(2>state)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(core_rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;fireGlobals=s.global,fireGlobals&&0===jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(ajax_rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),s.cache===!1&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+ajax_nonce++):cacheURL+(ajax_rquery.test(cacheURL)?"&":"?")+"_="+ajax_nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||2===state))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(2>state))throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=undefined),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text
}}}),jQuery.ajaxPrefilter("script",function(s){s.cache===undefined&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script"),script.async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(undefined,!0)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+ajax_nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==!1&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");return jsonProp||"jsonp"===s.dataTypes[0]?(callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):s.jsonp!==!1&&(s.url+=(ajax_rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=undefined}),"script"):void 0});var xhrCallbacks,xhrSupported,xhrId=0,xhrOnUnloadAbort=window.ActiveXObject&&function(){var key;for(key in xhrCallbacks)xhrCallbacks[key](undefined,!0)};jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR,xhrSupported=jQuery.ajaxSettings.xhr(),jQuery.support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,xhrSupported=jQuery.support.ajax=!!xhrSupported,xhrSupported&&jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username?xhr.open(s.type,s.url,s.async,s.username,s.password):xhr.open(s.type,s.url,s.async),s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];s.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(s.mimeType),s.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(err){}xhr.send(s.hasContent&&s.data||null),callback=function(_,isAbort){var status,responseHeaders,statusText,responses;try{if(callback&&(isAbort||4===xhr.readyState))if(callback=undefined,handle&&(xhr.onreadystatechange=jQuery.noop,xhrOnUnloadAbort&&delete xhrCallbacks[handle]),isAbort)4!==xhr.readyState&&xhr.abort();else{responses={},status=xhr.status,responseHeaders=xhr.getAllResponseHeaders(),"string"==typeof xhr.responseText&&(responses.text=xhr.responseText);try{statusText=xhr.statusText}catch(e){statusText=""}status||!s.isLocal||s.crossDomain?1223===status&&(status=204):status=responses.text?200:404}}catch(firefoxAccessException){isAbort||complete(-1,firefoxAccessException)}responses&&complete(status,statusText,responses,responseHeaders)},s.async?4===xhr.readyState?setTimeout(callback):(handle=++xhrId,xhrOnUnloadAbort&&(xhrCallbacks||(xhrCallbacks={},jQuery(window).unload(xhrOnUnloadAbort)),xhrCallbacks[handle]=callback),xhr.onreadystatechange=callback):callback()},abort:function(){callback&&callback(undefined,!0)}}}});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||"px"!==unit&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3],parts=parts||[],start=+target||1;do scale=scale||".5",start/=scale,jQuery.style(tween.elem,prop,start+unit);while(scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations)}return parts&&(start=tween.start=+start||+target||0,tween.unit=unit,tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]),tween}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.split(" ");for(var prop,index=0,length=props.length;length>index;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.pos=eased=this.options.duration?jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""),result&&"auto"!==result?result:0):tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||jQuery._data(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=undefined),clearQueue&&type!==!1&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));(dequeue||!gotoEnd)&&jQuery.dequeue(this,type)})},finish:function(type){return type!==!1&&(type=type||"fx"),this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;length>index;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,(null==opt.queue||opt.queue===!0)&&(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.timers=[],jQuery.fx=Tween.prototype.init,jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(fxNow=jQuery.now();i<timers.length;i++)timer=timers[i],timer()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(timer){timer()&&jQuery.timers.push(timer)&&jQuery.fx.start()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fx.step={},jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length}),jQuery.fn.offset=function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(doc)return docElem=doc.documentElement,jQuery.contains(docElem,elem)?(typeof elem.getBoundingClientRect!==core_strundefined&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}):box},jQuery.offset={setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");"static"===position&&(elem.style.position="relative");var curTop,curLeft,curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={};calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({position:function(){if(this[0]){var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||docElem;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);return val===undefined?win?prop in win?win[prop]:win.document.documentElement[method]:elem[method]:(win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val,void 0)},method,val,arguments.length,null)}}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(margin===!0||value===!0?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=jQuery:(window.jQuery=window.$=jQuery,"function"==typeof define&&define.amd&&define("jquery",[],function(){return jQuery}))}(window),jQuery.fn.ready=function(ready){return function(unsafe){function safe(){try{return unsafe.apply(this,arguments)}catch(e){var msg="Exception in a jQuery.ready callback: ";if(window.console&&"function"==typeof console.error)console.error(msg,e);else{var err=new Error(msg+e.message);err.original=e,setTimeout(function(){throw err},0)}}}return ready(safe)}}(jQuery.fn.ready);var Cookie={build:function(){for(var parts=Array.prototype.slice.apply(arguments),i=0;i<parts.length;i++)parts[i]||parts.splice(i,1);return parts.join("; ")},secondsFromNow:function(seconds){var d=new Date;return d.setTime(d.getTime()+1e3*seconds),d.toGMTString()},set:function(name,value,seconds,domain){var cookieExpiry=this._getExpiry(seconds),cookieDomain=this._getDomain(domain);"string"==typeof value&&(value=value.replace(/\s/g,"+")),document.cookie=Cookie.build(name+"="+encodeURIComponent(value),cookieExpiry,"path=/",cookieDomain)},get:function(name){var valueMatch=new RegExp("(?:^|;(?:\\s*))"+name+"=([^;]+)").exec(document.cookie),value=valueMatch?valueMatch[1]:null;return null!==value?decodeURIComponent(value).replace(/\+/g," "):null},unset:function(name,domain){Cookie.set(name,"",-1,domain)},_getExpiry:function(seconds){return seconds?"expires="+Cookie.secondsFromNow(seconds):null},_getDomain:function(domain){return domain?"domain="+domain:null}};!function(){!function(){var Evented,__slice=[].slice;Evented=function(mod){var listeners;return listeners={"*":[]},mod.on=function(key,listener){var _ref;return null==(_ref=listeners[key])&&(listeners[key]=[]),listeners[key].push(listener)},mod.off=function(key,listenerToRemove){var listener,safeListeners,_i,_len,_ref;for(safeListeners=[],_ref=listeners[key],_i=0,_len=_ref.length;_len>_i;_i++)listener=_ref[_i],listener!==listenerToRemove&&safeListeners.push(listener);return listeners[key]=safeListeners},mod.emit=function(){var args,key,listener,_i,_j,_len,_len1,_ref,_ref1,_ref2,_results;for(key=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],null==(_ref=listeners[key])&&(listeners[key]=[]),_ref1=listeners[key],_i=0,_len=_ref1.length;_len>_i;_i++)listener=_ref1[_i],listener.apply(null,args);for(_ref2=listeners["*"],_results=[],_j=0,_len1=_ref2.length;_len1>_j;_j++)listener=_ref2[_j],_results.push(listener.apply(null,[key].concat(__slice.call(args))));return _results},mod},"undefined"!=typeof module&&module.exports?module.exports=Evented:this.Evented=Evented}.call(this),function(){var Exception,bind,emit,exceptionKey,global,init,listeners,__slice=[].slice;global=this,Exception=function(name,msg,file,line,column,stack){return null==column&&(column=0),null==stack&&(stack=""),this.name=name,this.message=msg,this.fileName=file,this.lineNumber=line,this.columnNumber=column,this.stack=stack,this.timestamp=new Date,this.host=window.location.host,this.page_url=window.location.href,this.userAgent=window.navigator.userAgent},Exception.prototype=new Error,Exception.prototype.toString=function(){return this.stack},listeners={error:[]},init=function(){var errorCounts,origOnError;return errorCounts={},window&&"undefined"!=typeof window.onerror?(origOnError=window.onerror||!1,window.onerror=function(msg,file,line,column,errorObj){var exception,key,_ref;return null==msg&&(msg=arguments[0]),null==file&&(file=arguments[1]),null==line&&(line=arguments[2]),null==column&&(column=arguments[3]),null==errorObj&&(errorObj=arguments[4]),exception=new Exception("Uncaught Error",msg,file,line,column,null!=errorObj?errorObj.stack:void 0),key=exceptionKey(exception),null==(_ref=errorCounts[key])&&(errorCounts[key]=0),errorCounts[key]+=1,errorCounts[key]<=3&&emit("error",exception),"function"==typeof origOnError?origOnError(msg,file,line,column,errorObj):origOnError}):void 0},exceptionKey=function(e){return""+e.message+"_"+e.fileName+"_"+e.lineNumber+"_"+e.columnNumber},bind=function(eventName,cb){return listeners[eventName].push(cb)},emit=function(){var args,eventName,listener,_i,_len,_ref,_results;for(eventName=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],_ref=listeners[eventName],_results=[],_i=0,_len=_ref.length;_len>_i;_i++)listener=_ref[_i],_results.push(listener.apply(null,args));return _results},global.ErrorCatcher={init:init,on:bind}}.call(this),function(){var Bloodhound,Evented,__slice=[].slice;Evented=this.Evented||require("evented"),this.Bloodhound=Bloodhound=function(){function Bloodhound(atts){var _this=this;null==atts&&(atts={}),this._onEvent=function(){return Bloodhound.prototype._onEvent.apply(_this,arguments)},this.handleErrors=function(){return Bloodhound.prototype.handleErrors.apply(_this,arguments)},Evented(this),this.bind=this.on,this.unbind=this.off,this.trigger=this.emit,this.errorLog={},this.paused=!1,Bloodhound.initViewportSelectors(),this.handleErrors(function(){var updateInterval;return _this.eventListeners={},_this.widgetKey=atts.widgetKey||"bhw",_this.contentKey=atts.contentKey||"bhc",_this.widgetContainer=atts.widgetContainer||$("body"),updateInterval=atts.updateInterval||1e3,_this.on("error",function(){var args;return args=1<=arguments.length?__slice.call(arguments,0):[],Bloodhound.trigger.apply(Bloodhound,["error"].concat(__slice.call(args)))}),_this._initProperties(),Bloodhound.Helpers.nextTick(function(){return _this._initEvents(),_this.updateWidgets()}),Bloodhound.Helpers.eachInterval(updateInterval,function(){return _this.paused?void 0:_this.updateWidgets()}),_this.setPauseHandlers()})}return Evented(Bloodhound),Bloodhound.trigger=Bloodhound.emit,Bloodhound.reset=function(){},Bloodhound.prototype.setPauseHandlers=function(){var keydownTimeout,_this=this;return $("body").on("focus","select",function(){return _this.paused=!0}),$("body").on("blur","select",function(){return _this.paused=!1}),keydownTimeout=null,$("body").on("focus","input",function(){return $("body").on("keydown.bloodhound",function(){var unPause;return _this.paused=!0,keydownTimeout&&clearTimeout(keydownTimeout),unPause=function(){return _this.paused=!1,keydownTimeout=null},keydownTimeout=setTimeout(unPause,1e3)})}),$("body").on("blur","input",function(){return $("body").off("keydown.bloodhound"),keydownTimeout&&clearTimeout(keydownTimeout),keydownTimeout=null,_this.paused=!1})},Bloodhound.prototype.reset=function(){return this._clearPaths(),this._initProperties(),this._initEvents()},Bloodhound.prototype.data=function(){var out,widget;return out={},out.widgets=function(){var _i,_len,_ref,_results;for(_ref=this.widgets,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)widget=_ref[_i],_results.push(widget.data());return _results}.call(this),out},Bloodhound.prototype.updateWidgets=function(){var _this=this;return this.handleErrors(function(){var newWidgets;return newWidgets=_this.widgetFinder.findNew()||[],newWidgets.length>0?(_this.widgets=_this.widgets.concat(newWidgets),_this.emit("impression",newWidgets)):void 0})},Bloodhound.prototype.trackEvent=function(){var args,_ref;return args=1<=arguments.length?__slice.call(arguments,0):[],(_ref=this.events).trackEvent.apply(_ref,args)},Bloodhound.prototype.handleErrors=function(cb){var key,_this=this;try{return cb()}catch(e){if(key=""+e.message+e.fileName,!this.errorLog[key])return Bloodhound.Helpers.nextTick(function(){return _this.emit("error",e)}),this.errorLog[key]=!0}},Bloodhound.prototype._onEvent=function(event){return this.emit("event",event)},Bloodhound.prototype._clearPaths=function(){return $("[data-"+this.widgetKey+"-path]").removeAttr("data-"+this.widgetKey+"-path"),$("[data-"+this.contentKey+"-path]").removeAttr("data-"+this.contentKey+"-path")},Bloodhound.prototype._initProperties=function(){return this.widgets=[],this.widgetTracker=new Bloodhound.WidgetTracker(this,this.widgetKey,this.contentKey),this.widgetFinder=new Bloodhound.WidgetFinder(this.widgetKey,this.contentKey,this.widgetContainer,this,this.widgetTracker),this.events=new Bloodhound.Events({widgetKey:this.widgetKey,contentKey:this.contentKey,container:this.widgetContainer,widgetTracker:this.widgetTracker,bloodhound:this})},Bloodhound.prototype._initEvents=function(){return this.events.listenToAll(),this.events.bind(this._onEvent)},Bloodhound}()}.call(this),function(){var DEFAULT_VIEWPORT_BEHAVIOR;DEFAULT_VIEWPORT_BEHAVIOR=!0,Bloodhound.ElementFinder=function(){function ElementFinder(container,widgetKey,contentKey){var _this=this;this.container=container,this.widgetKey=widgetKey,this.contentKey=contentKey,this.ignoresViewport=function(){return ElementFinder.prototype.ignoresViewport.apply(_this,arguments)}}return ElementFinder.prototype.getNewWidgets=function(){var selector;return selector="[data-"+this.widgetKey+"]:visible:not([data-bhw-path])",this.container.find(selector).filter(this.viewportFilter())},ElementFinder.prototype.getNewContents=function(){var selector;return selector="[data-"+this.widgetKey+"] [data-"+this.contentKey+"]:visible:not([data-bhc-path])",this.container.find(selector).filter(this.viewportFilter())},ElementFinder.prototype.getContentsInElement=function(el){return this.getAllContentsInElement(el).filter(this.viewportFilter())},ElementFinder.prototype.getAllContentsInElement=function(el){var $el,selector;return $el=$(el),selector="[data-"+this.contentKey+"]:visible:not([data-"+this.widgetKey+"])",$el.find(selector)},ElementFinder.prototype.isParentWidget=function(contentEl,element){return this.getParentWidget(contentEl).is($(element))},ElementFinder.prototype.getParentWidget=function(contentEl){return $(contentEl).parents("[data-"+this.widgetKey+"]").eq(0)},ElementFinder.prototype.viewportFilter=function(){var ignoresViewport;return ignoresViewport=this.ignoresViewport,function(){var $el;return $el=$(this),$el.is(":in-viewport")||ignoresViewport($el)}},ElementFinder.prototype.ignoresViewport=function($el){var parents;return $el.is("[data-bh-viewport=respect]")?!1:$el.is("[data-"+this.widgetKey+"][data-bh-viewport=ignore]")?!0:(parents=$el.parents("[data-bhw]"),parents.length>0?this.ignoresViewport(parents.eq(0)):DEFAULT_VIEWPORT_BEHAVIOR)},ElementFinder}()}.call(this),function(){Bloodhound.Events=function(){function Events(_arg){var _this=this;this.widgetKey=_arg.widgetKey,this.contentKey=_arg.contentKey,this.container=_arg.container,this.widgetTracker=_arg.widgetTracker,this.bloodhound=_arg.bloodhound,this._ensurePathsExist=function(){return Events.prototype._ensurePathsExist.apply(_this,arguments)},this.handleEvent=function(){return Events.prototype.handleEvent.apply(_this,arguments)},this.events=[],this.emitters=[],this.eventListeners=[],this._updateLength(),this.selectors={widgets:"[data-"+this.widgetKey+"], [data-"+this.contentKey+"]",forms:"form[data-"+this.widgetKey+"], form[data-"+this.contentKey+"]"},this.stopListening()}return Events.prototype.listenToAll=function(){var doEvent,handleEvent;return handleEvent=this.handleEvent,doEvent=function(e){var el;return el=$(this),handleEvent(e,el)},this.container.delegate(this.selectors.widgets,"click",doEvent),this.container.delegate(this.selectors.forms,"change focusin focusout",doEvent)},Events.prototype.handleEvent=function(e,widgetEl){var content,el,path,widget;return el=$(widgetEl),this._ensurePathsExist(el),(path=el.attr("data-"+this.contentKey+"-path"))&&(content=this.widgetTracker.getWidgetAtPath(path))&&this._onEvent(e,content),(path=el.attr("data-"+this.widgetKey+"-path"))&&(widget=this.widgetTracker.getWidgetAtPath(path))?this._onEvent(e,widget):void 0},Events.prototype.stopListening=function(){return this.container.undelegate(this.selectors.widgets,"click"),this.container.undelegate(this.selectors.forms,"change focusin focusout")},Events.prototype.pushEvent=function(event){return this.events.push(event),this[this.length]=event,this._updateLength()},Events.prototype.trigger=function(event){var func,_i,_len,_ref,_results;for(_ref=this.eventListeners,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)func=_ref[_i],_results.push(func(event));return _results},Events.prototype.bind=function(func){return this.eventListeners.push(func)},Events.prototype.unbind=function(funcToRemove){var func,newListeners,_i,_len,_ref;for(newListeners=[],_ref=this.eventListeners,_i=0,_len=_ref.length;_len>_i;_i++)func=_ref[_i],func!==funcToRemove&&newListeners.push(func);return this.eventListeners=newListeners,this._updateLength()},Events.prototype.trackEvent=function(e){var innermostWidget,selector,target,widgets;return target=$(e.target),selector="[data-"+this.widgetKey+"],[data-"+this.contentKey+"]",target.is(selector)?this.handleEvent(e,target):(widgets=target.parents(selector),(innermostWidget=widgets[0])?this.handleEvent(e,innermostWidget):void 0)},Events.prototype._onEvent=function(e,widget){var element,event,meta,parent,_i,_len,_ref,_ref1,_this=this;if(event=this._lookupEvent(e),!event){for(event={id:Bloodhound.Helpers.randomId(),jQueryEvent:e,type:e.type,widgets:[widget]},_ref=this._parentsFromPath(widget.path),_i=0,_len=_ref.length;_len>_i;_i++)parent=_ref[_i],event.widgets.push(parent);return element=$(e.target),meta={},element&&(meta.element_id=element.attr("id"),meta.element_node=element[0].nodeName.toLowerCase(),element.attr("type")&&(meta.element_type=element.attr("type"))),"change"!==(_ref1=e.type)&&"focusout"!==_ref1||!element.is("input:text, textarea, input:password, select")||(meta.populated=!!element.val()),"change"===e.type&&element.is("input:radio, input:checkbox")&&(meta.checked=element.is(":checked")),_.isEmpty(meta)||(event.meta=meta),this.pushEvent(event),this.trigger(event),Bloodhound.Helpers.nextTick(function(){return _this._removeEvent(event)})}},Events.prototype._lookupEvent=function(e){var event,_i,_len,_ref;for(_ref=this.events,_i=0,_len=_ref.length;_len>_i;_i++)if(event=_ref[_i],event.jQueryEvent.originalEvent===e.originalEvent)return event;return null},Events.prototype._updateLength=function(){return this.length=this.events.length},Events.prototype._removeEvent=function(event){var e,i,_i,_len,_ref;for(_ref=this.events,i=_i=0,_len=_ref.length;_len>_i;i=++_i)if(e=_ref[i],e===event)return this.events.splice(i,1),this._updateLength(),void 0},Events.prototype._parentsFromPath=function(path){var delimiter,newPath,out,parts;return out=[],delimiter=Bloodhound.Helpers.pathDelimiter,parts=path.split(delimiter),parts.pop(),0===parts.length?out:(newPath=parts.join(delimiter),out.push(this.widgetTracker.getWidgetAtPath(newPath)),out=out.concat(this._parentsFromPath(newPath)))},Events.prototype._ensurePathsExist=function($el){return $el.data(""+this.contentKey+"-path")?void 0:this.bloodhound.updateWidgets()},Events}()}.call(this),function(){var S4,counter;counter=0,Bloodhound.Helpers={seed:null,pathDelimiter:"|",randomId:function(){var id;return id=""+this.seed+"-"+(new Date).getTime()+"-"+counter,counter+=1,id},nextTick:function(func){return setTimeout(func)},error:function(message){throw new Error("Bloodhound: "+message)},eachInterval:function(millis,func){return setInterval(func,millis)},reset:function(){return counter=0},pathToElement:function(type,element,widgetKey,contentKey){var $el,$p,content,names,p,parents,path,widget,widgetName,_i,_len;for($el=$(element),parents=$el.parents("[data-"+widgetKey+"]:visible, [data-"+contentKey+"]:visible"),names=[],_i=0,_len=parents.length;_len>_i;_i++)p=parents[_i],$p=$(p),content=$p.attr("data-"+contentKey),widget=$p.attr("data-"+widgetKey),content&&names.unshift(content),widget&&names.unshift(widget);switch(type){case"widget":names.push($el.attr("data-"+widgetKey));break;case"content":widgetName=$el.attr("data-"+widgetKey),widgetName&&names.push(widgetName),names.push($el.attr("data-"+contentKey))}return path=names.join(Bloodhound.Helpers.pathDelimiter)}},S4=function(){var rand;return rand=(0|65536*(1+Math.random())).toString(16)}}.call(this),function(){Bloodhound.initViewportSelectors=function(){/*
             * Viewport - jQuery selectors for finding elements in viewport
             *
             * Copyright (c) 2008-2009 Mika Tuupola
             *
             * Licensed under the MIT license:
             *   http://www.opensource.org/licenses/mit-license.php
             *
             * Project home:
             *  http://www.appelsiini.net/projects/viewport
             *
             */
var $;return $=jQuery,$.inviewport?void 0:($.belowthefold=function(element,settings){var fold;return fold=$(window).height()+$(window).scrollTop(),fold<=$(element).offset().top-settings.threshold},$.abovethetop=function(element,settings){var top;return top=$(window).scrollTop(),top>=$(element).offset().top+$(element).height()-settings.threshold},$.rightofscreen=function(element,settings){var fold;return fold=$(window).width()+$(window).scrollLeft(),fold<=$(element).offset().left-settings.threshold},$.leftofscreen=function(element,settings){var left;return left=$(window).scrollLeft(),left>=$(element).offset().left+$(element).width()-settings.threshold},$.inviewport=function(element,settings){return!($.rightofscreen(element,settings)||$.leftofscreen(element,settings)||$.belowthefold(element,settings)||$.abovethetop(element,settings))},$.extend($.expr[":"],{"below-the-fold":function(a){return $.belowthefold(a,{threshold:0})},"above-the-top":function(a){return $.abovethetop(a,{threshold:0})},"left-of-screen":function(a){return $.leftofscreen(a,{threshold:0})},"right-of-screen":function(a){return $.rightofscreen(a,{threshold:0})},"in-viewport":function(a){return $.inviewport(a,{threshold:0})}}))}}.call(this),function(){var __slice=[].slice;Bloodhound.WidgetContent=function(){function WidgetContent(atts){var mesg,path,_ref;_ref=atts.name.split(":"),this.type=_ref[0],this.name=_ref[1],this.element=atts.element,this.position=atts.position,this.path=atts.path,this.metadata=atts.metadata,this.positionValue=this.getPositionValue(),this.type&&this.name||(path=this.widgetPath(),mesg="Incomplete widget content '"+atts.name+"' for widget '"+path+"'",Bloodhound.Helpers.error(mesg))}return WidgetContent.prototype.setTypePosition=function(int){return this.typePosition=int},WidgetContent.prototype.getPositionValue=function(){var pos;if(pos=$(this.element).offset())return 1e6*pos.top+pos.left},WidgetContent.prototype.widgetPath=function(){var content,delim,widgetPath,_i,_ref;return delim=Bloodhound.Helpers.pathDelimiter,_ref=this.path.split(delim),widgetPath=2<=_ref.length?__slice.call(_ref,0,_i=_ref.length-1):(_i=0,[]),content=_ref[_i++],widgetPath.join(delim)},WidgetContent.prototype.data=function(){var out;return out={type:this.type,name:this.name,position:this.position,typePosition:this.typePosition,height:$(this.element).height(),width:$(this.element).width()},this.metadata&&(out.data=this.metadata),out},WidgetContent}()}.call(this),function(){Bloodhound.WidgetFinder=function(){function WidgetFinder(widgetKey,contentKey,container,bloodhound,widgetTracker){this.widgetKey=widgetKey,this.contentKey=contentKey,this.bloodhound=bloodhound,this.widgetTracker=widgetTracker,this.elFinder=new Bloodhound.ElementFinder(container,this.widgetKey,this.contentKey),this.newWidgetContents=[],this.contentTypeCounts={}}return WidgetFinder.prototype.findNew=function(){var newWidgets;return newWidgets=this._findNewWidgets().concat(this._findNewContentElements()),this._setContentTypePositions(),newWidgets},WidgetFinder.prototype._findNewWidgets=function(){var widgetElements,_this=this;return widgetElements=this.elFinder.getNewWidgets(),this.widgetTracker.mapUntracked(widgetElements,function(i,el){return _this._widgetFromElement(el)})},WidgetFinder.prototype._findNewContentElements=function(){var extraContentElements,_this=this;return extraContentElements=this.elFinder.getNewContents(),this.widgetTracker.mapUntracked(extraContentElements,function(i,el){var $el,parentWidget;return $el=$(el),parentWidget=$el.parents("[data-"+_this.widgetKey+"]")[0],_this._widgetFromElement(parentWidget)})},WidgetFinder.prototype._setContentTypePositions=function(){var content,sorted,_base,_i,_len,_name,_ref;for(sorted=_.sortBy(this.newWidgetContents,function(wc){return wc.positionValue}),_i=0,_len=sorted.length;_len>_i;_i++)content=sorted[_i],null==(_ref=(_base=this.contentTypeCounts)[_name=content.type])&&(_base[_name]=0),content.setTypePosition(this.contentTypeCounts[content.type]),this.contentTypeCounts[content.type]+=1;return this.newWidgetContents=[]},WidgetFinder.prototype._widgetFromElement=function(element){var $el,allContent,content,foundContent,path,widget,_this=this;return $el=$(element),content=[],foundContent=this.elFinder.getContentsInElement(element),allContent=this.elFinder.getAllContentsInElement(element),this.widgetTracker.mapUntracked(foundContent,function(i,contentEl){var position;return _this.elFinder.isParentWidget(contentEl,element)?(position=_this._lookUpContentPosition(contentEl,allContent),content.push(_this._contentFromElement(contentEl,position))):void 0}),$el.is("[data-"+this.contentKey+"]")&&this.bloodhound.handleErrors(function(){return content.push(_this._contentFromElement($el,0))}),path=this.widgetTracker.getWidgetPath(element),widget=new Bloodhound.Widget({element:element,name:$el.data(this.widgetKey),content:content,path:path,metadata:$el.data("bhd")}),this.widgetTracker.registerWidget(widget),widget},WidgetFinder.prototype._contentFromElement=function(element,position){var $el,content,path;$el=$(element),path=this.widgetTracker.getContentPath(element);try{content=new Bloodhound.WidgetContent({element:element,name:$el.data(this.contentKey),position:position,path:path,metadata:$el.data("bhd")})}catch(error){throw this.widgetTracker.handleBadContent($el),error}return this.widgetTracker.registerContent(content),this.newWidgetContents.push(content),content},WidgetFinder.prototype._lookUpContentPosition=function(contentElement,contentElements){var $contentElement,el,prunedContent,type;return $contentElement=$(contentElement),type=this._extractContentType($contentElement),prunedContent=function(){var _i,_len,_results;for(_results=[],_i=0,_len=contentElements.length;_len>_i;_i++)el=contentElements[_i],this._extractContentType($(el))===type&&_results.push(el);return _results}.call(this),$.inArray($contentElement[0],prunedContent)},WidgetFinder.prototype._extractContentType=function($element){return $element.data("bhc").split(":")[0]},WidgetFinder}()}.call(this),function(){var pathToElement;pathToElement=Bloodhound.Helpers.pathToElement,Bloodhound.WidgetTracker=function(){function WidgetTracker(bloodhound,widgetKey,contentKey){this.bloodhound=bloodhound,this.widgetKey=widgetKey,this.contentKey=contentKey,this.trackedObjects={}}return WidgetTracker.prototype.mapUntracked=function(elements,func){var out;return out=[],this.eachUntracked(elements,function(i,el){return out.push(func(i,el))}),out},WidgetTracker.prototype.eachUntracked=function(elements,func){var _this=this;return elements.each(function(i,e){return _this.bloodhound.handleErrors(function(){var $e,path;return $e=$(e),$e.is("[data-"+_this.widgetKey+"]")&&(path=pathToElement("widget",e,_this.widgetKey,_this.contentKey),_this.trackedObjects[path]||func.call(_this,i,e,path)),$e.is("[data-"+_this.contentKey+"]")&&(path=pathToElement("content",e,_this.widgetKey,_this.contentKey),!_this.trackedObjects[path])?func.call(_this,i,e,path):void 0})})},WidgetTracker.prototype.getWidgetPath=function(element){return pathToElement("widget",element,this.widgetKey,this.contentKey)},WidgetTracker.prototype.getContentPath=function(element){return pathToElement("content",element,this.widgetKey,this.contentKey)},WidgetTracker.prototype.handleBadContent=function(element){var $el,badVal;return $el=$(element),badVal=$el.attr("data-"+this.contentKey),$el.removeAttr("data-"+this.contentKey),element.attr("data-"+this.contentKey+"-error",badVal)},WidgetTracker.prototype.registerWidget=function(widget){return this.registerTrackingObject(widget,this.widgetKey)},WidgetTracker.prototype.registerContent=function(content){return this.registerTrackingObject(content,this.contentKey)},WidgetTracker.prototype.registerTrackingObject=function(obj,key){var $el,path;return path=obj.path,$el=$(obj.element),$el.attr("data-"+key+"-path",path),this.trackedObjects[path]=obj},WidgetTracker.prototype.getWidgetAtPath=function(path){return this.trackedObjects[path]},WidgetTracker}()}.call(this),function(){Bloodhound.Widget=function(){function Widget(atts){this.name=atts.name,this.element=atts.element,this.path=atts.path,this.content=atts.content||[],this.metadata=atts.metadata,this.element||Bloodhound.Helpers.error("Widget does not exist for '"+this.name+"'"),this.name||Bloodhound.Helpers.error("Incomplete widget (no name)")}return Widget.prototype.data=function(){var item,out;return out={name:this.name,height:$(this.element).height(),width:$(this.element).width()},this.metadata&&(out.data=this.metadata),this.content.length>0&&(out.content=function(){var _i,_len,_ref,_results;for(_ref=this.content,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)item=_ref[_i],_results.push(item.data());return _results}.call(this)),out},Widget.prototype.value=function(){return $(this.element).val()},Widget}()}.call(this),!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):"undefined"!=typeof window?window.TrackingHub=e():"undefined"!=typeof global?global.TrackingHub=e():"undefined"!=typeof self&&(self.TrackingHub=e())}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){var Beagle,Evented,Visibility,Warehouse,isArray,isObject,jsonSafe,messagesFromJson,postParse,rejectExpired,__slice=[].slice;Evented=this.Evented||require("optimize-evented"),Warehouse=require("./warehouse"),Visibility=require("./visibility"),Beagle=function(){return Evented(this),this.buffer=[],this},Evented(Beagle),Beagle.nextTick=function(func){return setTimeout(func)},Beagle.setInterval=function(func,millis){return setInterval(func,millis)},Beagle.prototype.add=function(name,data){var obj;return null==data&&(data={}),obj={name:name,data:data,timestamp:new Date},this.buffer.push(obj),this.emit("add",obj)},Beagle.prototype.flush=function(){var messages;return"prerender"===Visibility.visibilityState()?[]:(messages=this.buffer,this.buffer=[],messages.length>0&&this.emit("flush",messages),messages)},Beagle.prototype.log=function(){var args;return args=1<=arguments.length?__slice.call(arguments,0):[],this.emit.apply(this,["log"].concat(__slice.call(args))),Beagle.emit.apply(Beagle,["log"].concat(__slice.call(args)))},Beagle.prototype.use=function(middleware){return middleware(this)},Beagle.prototype.trigger=Beagle.prototype.emit,Beagle.Timer=function(millis){var middleware,onBeforeUnload,running;return running=!0,middleware=function(beagle){var func;return func=function(){return running?(beagle.flush(),beagle.log("Flushed by Beagle.Timer("+millis+")")):void 0},Beagle.nextTick(function(){}),Beagle.setInterval(func,millis)},middleware.cancel=function(){return running=!1},middleware.resume=function(){return running=!0},"undefined"!=typeof window&&(onBeforeUnload=function(e){if(middleware.cancel(),e=e||window.event)try{delete e.returnValue}catch(_error){e.returnValue=void 0}return void 0},window.addEventListener?window.addEventListener("beforeunload",onBeforeUnload,!1):window.attachEvent&&window.attachEvent("onbeforeunload",onBeforeUnload)),middleware},Beagle.SizeThreshold=function(threshold){return function(beagle){var dataSize;return dataSize=0,beagle.on("add",function(data){return dataSize+=JSON.stringify(data).length,dataSize>threshold?(beagle.flush(),beagle.log("Flushed by Beagle.SizeThreshold("+threshold+"), size is "+dataSize+".")):void 0}),beagle.on("flush",function(){return dataSize=0})}},Beagle.ExternalLinks=function(delay){return null==delay&&(delay=500),function(beagle){return $("body").delegate("a[href^='http']","click",function(e){var origE,redirect,url;return origE=e.originalEvent,e.isDefaultPrevented()||origE.defaultPrevented||origE.returnValue===!1?void 0:(e.preventDefault(),url=$(e.currentTarget).attr("href"),redirect=function(){return window.location.href=url},setTimeout(redirect,delay),beagle.flush(),beagle.log("Flushed by Beagle.ExternalLinks("+delay+"), redirecting to "+url+"."))})}},Beagle.Persistence=function(store,expiry){var MSGS_KEY,retrievePersisted;return MSGS_KEY="msgs",null==expiry&&(expiry=2592e6),"string"==typeof store&&(store=new Warehouse(store)),retrievePersisted=function(beagle){var json,msgs;return beagle.store=store,null!=store.getAllLocal&&(json=store.getAllLocal(),msgs=messagesFromJson(json,MSGS_KEY),null!=msgs&&(beagle.buffer=beagle.buffer.concat(msgs))),store.getAll(function(err,json){var messages;return err&&beagle.log("Storage error",err),messages=messagesFromJson(json,MSGS_KEY),null!=messages?beagle.buffer=messages:void 0})},function(beagle){return beagle.on("add",function(data){return data._expires=(new Date).getTime()+expiry,store.appendTo(MSGS_KEY,jsonSafe(data),function(err){return delete data._expires,err?(beagle.flush(),beagle.log("Flushed by Beagle.Persistence due to storage error.",err)):void 0})}),beagle.on("flush",function(){return store.unset(MSGS_KEY)}),retrievePersisted(beagle)}},Beagle.Console=function(){return function(beagle){return beagle.on("add",function(message){return console.log("Beagle::add",message)}),beagle.on("flush",function(messages){return console.log("Beagle::flush",messages)}),beagle.on("log",function(){var args;return args=1<=arguments.length?__slice.call(arguments,0):[],console.log.apply(console,["Beagle::log"].concat(__slice.call(args)))})}},messagesFromJson=function(json,MSGS_KEY){return null==json?null:(json=json[MSGS_KEY],null!=json?rejectExpired(postParse(json)):null)},jsonSafe=function(val){var item,k,out,v,_i,_len,_results;if(val instanceof Error)return{name:val.name,stack:val.stack,message:val.message};if(val instanceof Date)return"date-"+val.getTime();if(isObject(val)){out={};for(k in val)v=val[k],out[k]=jsonSafe(v);return out}if(isArray(val)){for(_results=[],_i=0,_len=val.length;_len>_i;_i++)item=val[_i],_results.push(jsonSafe(item));return _results}return val},rejectExpired=function(messages){var currentMessages,m,now,_i,_len;for(now=(new Date).getTime(),currentMessages=[],_i=0,_len=messages.length;_len>_i;_i++)m=messages[_i],m._expires&&m._expires>now&&(delete m._expires,currentMessages.push(m));return currentMessages},isArray=function(arr){return Array.isArray?Array.isArray(arr):"[object Array]"===Object.prototype.toString.call(arr)},isObject=function(obj){return"object"==typeof obj&&!isArray(obj)&&null!==obj},postParse=function(val){var date,item,k,millis,out,v,_i,_len,_results;if("string"==typeof val&&/^date-\d+$/.test(val))return millis=val.substr(5,val.length-5),date=new Date,date.setTime(millis),date;if(isObject(val)){out={};for(k in val)v=val[k],out[k]=postParse(v);return out}if(isArray(val)){for(_results=[],_i=0,_len=val.length;_len>_i;_i++)item=val[_i],_results.push(postParse(item));return _results}return val},"undefined"!=typeof module&&module.exports?module.exports=Beagle:this.Beagle=Beagle},{"./visibility":8,"./warehouse":9,"optimize-evented":12}],2:[function(require,module){var BrowserDetect,parser;parser=require("ua-parser-latest/js/client-parser"),BrowserDetect={init:function(){var browserData;return browserData=BrowserDetect.info(window.navigator.userAgent),this.setAPI(browserData)},setAPI:function(browserData){return this.OS=browserData.OS,this.version=browserData.version,this.browser=browserData.browser,this.device=browserData.device,this.deviceType=browserData.deviceType,browserData},getOSFromFamily:function(family){return family?(family.match(/windows (?!phone)/i)?family="Windows":family.match(/windows phone/i)?family="Windows Phone":family.match(/mac/i)&&(family="Mac"),family||"an unknown OS"):"Other"},getBrowserFromFamily:function(family){return family?(family.match(/silk/i)?family="Amazon Silk":family.match(/blackberry webkit/i)&&(family="BlackBerry WebKit"),family):"Other"},info:function(userAgent){var info;return userAgent?(info=parser.parse(userAgent),{OS:this.getOSFromFamily(info.os.family),browser:this.getBrowserFromFamily(info.ua.family),version:info.ua.major?""+info.ua.major+"."+info.ua.minor:"Other",device:info.device?info.device.family:"Other",deviceType:info.device.type?info.device.type:"Other"}):{OS:"Other",browser:"Other",deviceType:"Other",version:"Other",device:"Other"}}},null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(module.exports=BrowserDetect)},{"ua-parser-latest/js/client-parser":18}],3:[function(require,module){var Warehouse,warehouses;Warehouse=require("./warehouse"),warehouses={},module.exports=function(namespace){return null!=warehouses[namespace]?warehouses[namespace]:warehouses[namespace]=new Warehouse(namespace)}},{"./warehouse":9}],4:[function(require,module){var bothArrays,bothObjects,deepMerge,isArray,isObject,mergeable,neitherArrays,_ref,global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};_ref=global._||require("underscore"),isArray=_ref.isArray,isObject=_ref.isObject,bothArrays=function(obj1,obj2){return isArray(obj1)&&isArray(obj2)},neitherArrays=function(obj1,obj2){return!(isArray(obj1)||isArray(obj2))},bothObjects=function(obj1,obj2){return neitherArrays(obj1,obj2)&&isObject(obj1)&&isObject(obj2)},mergeable=function(obj1,obj2){return bothArrays(obj1,obj2)||bothObjects(obj1,obj2)},module.exports=deepMerge=function(obj1,obj2){var key,mergedObj,val;if(isArray(obj1)&&isArray(obj2))return obj1.concat(obj2);mergedObj={};for(key in obj1)val=obj1[key],mergedObj[key]=val;for(key in obj2)val=obj2[key],mergedObj[key]=null!=mergedObj[key]&&mergeable(mergedObj[key],val)?deepMerge(mergedObj[key],val):val;return mergedObj}},{underscore:10}],5:[function(require,module){var Beagle,CHANNEL_NAME,CONNECTION_FAILED,CONNECTION_PENDING,CONNECTION_SUCCEEDED,Portal,SecureStorageClient,appendIframe,checkCallback,createIframe,getMethodArgs,getOrigin,getStore,merge,methodConfigs,validateCall,_ref,global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},__slice=[].slice;Portal=require("optimize-portal"),Beagle=require("./beagle"),getStore=require("./data-store"),merge=require("./deep-merge"),_ref=require("./secure-storage-method-config"),validateCall=_ref.validateCall,getMethodArgs=_ref.getMethodArgs,methodConfigs=_ref.methodConfigs,CHANNEL_NAME="secure-storage",CONNECTION_FAILED="connectionFailed",CONNECTION_SUCCEEDED="connectionSucceeded",CONNECTION_PENDING="connectionPending",getOrigin=function(url){var a,port;return a=document.createElement("a"),a.href=url,port=""===a.port?"":"443"===a.port&&"https:"===a.protocol?"":"80"===a.port&&"http:"===a.protocol?"":":"+a.port,""+a.protocol+"//"+a.hostname+port},createIframe=function(url){var iframe;return iframe=document.createElement("iframe"),iframe.style.display="none",iframe.src=url,iframe},appendIframe=function(iframe){var body;return body=document.getElementsByTagName("body")[0],body.appendChild(iframe)},checkCallback=function(callback){if(null==callback)throw new Error("No callback found")},SecureStorageClient=function(){function SecureStorageClient(namespace,url,domready){var iframe;if(this.namespace=namespace,null==domready&&(domready=null),!namespace||""===namespace)throw new Error("A valid namespace is required");if(!url||""===url)throw new Error("A valid url is required");this.requestCounter=0,this.connection=CONNECTION_PENDING,this.requestIdSeed=""+(new Date).getTime(),this.messageQueues={},this.callbacks={},this.localStore=getStore(this.namespace),iframe=createIframe(url),null==domready&&(domready=SecureStorageClient.domready||require("domready")),domready(function(_this){return function(){return appendIframe(iframe),_this.portalChannel=Portal(global,iframe.contentWindow,getOrigin(url),new Beagle)(CHANNEL_NAME),_this._listenOnChannel()}}(this))}return SecureStorageClient.prototype.get=function(key,cb){var id,message;return this._isConnectionFailed()?this.localStore.get(key,cb):(id=this._requestId("get"),this._addCallback(id,cb),message={key:key},this._sendMessage("get",id,message))},SecureStorageClient.prototype.getAll=function(cb){var message;return this._isConnectionFailed()?this.localStore.getAll(cb):(message=this._getAllMessage(cb),this._sendMessage("getAll",message.id,message))},SecureStorageClient.prototype.set=function(keyOrObj,value,cb){var id,message;return null==cb&&(cb=null),this._isConnected()?(null===cb&&"function"==typeof value?(cb=value,message={keyOrObj:keyOrObj}):message={keyOrObj:keyOrObj,value:value},null==cb&&(cb=function(){}),id=this._requestId("set"),this._addCallback(id,cb),this._sendMessage("set",id,message)):this.localStore.set(keyOrObj,value,cb)},SecureStorageClient.prototype.setAll=function(data,cb){var id,message;return null==cb&&(cb=function(){}),this._isConnected()?(id=this._requestId("setAll"),this._addCallback(id,cb),message={data:data},this._sendMessage("setAll",id,message)):this.localStore.setAll(data,cb)},SecureStorageClient.prototype.unset=function(key,cb){var id,message;return null==cb&&(cb=function(){}),this._isConnected()?(id=this._requestId("unset"),this._addCallback(id,cb),message={key:key},this._sendMessage("unset",id,message)):this.localStore.unset(key,cb)},SecureStorageClient.prototype.unsetAll=function(cb){var id;return null==cb&&(cb=function(){}),this._isConnected()?(id=this._requestId("unsetAll"),this._addCallback(id,cb),this._sendMessage("unsetAll",id)):this.localStore.unsetAll(cb)},SecureStorageClient.prototype.appendTo=function(key,data,cb){var id,message;return null==cb&&(cb=function(){}),this._isConnected()?(id=this._requestId("appendTo"),this._addCallback(id,cb),message={key:key,data:data},this._sendMessage("appendTo",id,message)):this.localStore.appendTo(key,data,cb)},SecureStorageClient.prototype.getAllLocal=function(){return this.localStore.getAll()},SecureStorageClient.prototype._getAllMessage=function(cb){var id,namespace;return id=this._requestId("getAll"),this._addCallback(id,cb),namespace=this.namespace,{id:id,namespace:namespace}},SecureStorageClient.prototype._requestId=function(type){var id;return null==type&&(type="generic"),id=""+type+"-"+this.requestIdSeed+"-"+(new Date).getTime()+"-"+this.requestCounter,this.requestCounter+=1,id},SecureStorageClient.prototype._addCallback=function(id,callback){if(null!=this.callbacks[id])throw new Error("Callback with that ID exists");return this.callbacks[id]=callback},SecureStorageClient.prototype._removeCallback=function(id){var callback;return null!=this.callbacks[id]?(callback=this.callbacks[id],delete this.callbacks[id],callback):null},SecureStorageClient.prototype._getValidatedCallback=function(methodConfig,message){var callback,err;return err=validateCall(methodConfig,message),callback=this._removeCallback(message.id),checkCallback(callback),err?(callback(err),null):callback},SecureStorageClient.prototype._listenOnChannel=function(){var checkResponse,message,messagesWithResults,messagesWithoutResults,onRequestComplete,onRequestCompleteWithData,_i,_j,_len,_len1;for(checkResponse=function(){var key,keys,message,_i,_len,_results;if(message=arguments[0],keys=2<=arguments.length?__slice.call(arguments,1):[],null==(null!=message?message.id:void 0))throw new Error("Malformed response");for(_results=[],_i=0,_len=keys.length;_len>_i;_i++){if(key=keys[_i],null==message[key])throw new Error("Malformed response, missing "+key);_results.push(void 0)}return _results},onRequestCompleteWithData=function(_this){return function(message){var cb,data,error,id;return checkResponse(message),id=message.id,error=message.error,data=message.data,cb=_this._removeCallback(id),checkCallback(cb),cb(error,data)}}(this),onRequestComplete=function(_this){return function(message){var cb,error,id;return checkResponse(message),id=message.id,error=message.error,cb=_this._removeCallback(id),"function"==typeof cb?cb(error):void 0}}(this),messagesWithResults=["getComplete","getAllComplete"],messagesWithoutResults=["setComplete","setAllComplete","unsetComplete","unsetAllComplete","appendToComplete"],_i=0,_len=messagesWithResults.length;_len>_i;_i++)message=messagesWithResults[_i],this.portalChannel.on(message,onRequestCompleteWithData);for(_j=0,_len1=messagesWithoutResults.length;_len1>_j;_j++)message=messagesWithoutResults[_j],this.portalChannel.on(message,onRequestComplete);return this.portalChannel.on(CONNECTION_FAILED,function(_this){return function(){return _this._onConnectionFailed()}}(this)),this.portalChannel.on(CONNECTION_SUCCEEDED,function(_this){return function(){return _this._onConnectionSucceeded()}}(this))},SecureStorageClient.prototype._isConnected=function(){return this.connection===CONNECTION_SUCCEEDED},SecureStorageClient.prototype._isConnectionFailed=function(){return this.connection===CONNECTION_FAILED},SecureStorageClient.prototype._onConnectionSucceeded=function(){var message;return message=this._getAllMessage(function(_this){return function(err,remoteData){var data,localData;return err?_this._onConnectionFailed():(localData=_this.localStore.getAll(),data=merge(remoteData,localData),_this.connection=CONNECTION_SUCCEEDED,_this.setAll(data,function(err){return err?void 0:_this.localStore.unsetAll()}),_this._processQueues(function(method,callback,methodArgs){if("get"===method)return callback(null,data[methodArgs[0]]);if("getAll"===method)return callback(null,data);throw"Anything besides get* methods should not be buffered"}))}}(this)),this._send("getAll",message)},SecureStorageClient.prototype._onConnectionFailed=function(){return this.connection=CONNECTION_FAILED,this._processQueues(function(_this){return function(method,callback,methodArgs){return methodArgs.push(callback),_this[method].apply(_this,methodArgs)}}(this))},SecureStorageClient.prototype._sendMessage=function(name,id,message){return null==message&&(message={}),null==message.namespace&&(message.namespace=this.namespace),null==message.id&&(message.id=id),this._isConnected()?this._send(name,message):this._addToQueue(name,message)},SecureStorageClient.prototype._send=function(name,message){return this.portalChannel.add(name,message)},SecureStorageClient.prototype._processQueues=function(cb){var callback,message,method,methodArgs,methodConfig,queue,_ref1;_ref1=this.messageQueues;for(method in _ref1)for(queue=_ref1[method];message=queue.shift();){if(methodConfig=methodConfigs[method],callback=this._getValidatedCallback(methodConfig,message),null==callback)return;methodArgs=getMethodArgs(methodConfig,message),cb(method,callback,methodArgs)}},SecureStorageClient.prototype._addToQueue=function(name,item){var queue,queues;return queues=this.messageQueues,null!=item?(null==queues[name]&&(queues[name]=[]),queue=queues[name]):(queue=queues,item=name),queue.push(item)},SecureStorageClient}(),module.exports=SecureStorageClient},{"./beagle":1,"./data-store":3,"./deep-merge":4,"./secure-storage-method-config":6,domready:11,"optimize-portal":13}],6:[function(require,module){var getAllArgNames,getMethodArgs,methodConfigs,validateCall;methodConfigs={get:{method:"get",args:["key"],returnData:!0},getAll:{method:"getAll",returnData:!0},set:{method:"set",args:["keyOrObj"],optArgs:["value"]},setAll:{method:"setAll",args:["data"]},unset:{method:"unset",args:["key"]},unsetAll:{method:"unsetAll"},appendTo:{method:"appendTo",args:["key","data"]}},getAllArgNames=function(methodConfig){var args,optArgs;return args=methodConfig.args,optArgs=methodConfig.optArgs,null!=args&&null!=optArgs?args.concat(optArgs):null!=args?args:[]},getMethodArgs=function(methodConfig,message){var allArgs,argNames,name,_i,_len;for(argNames=getAllArgNames(methodConfig),allArgs=[],_i=0,_len=argNames.length;_len>_i;_i++)name=argNames[_i],allArgs.push(message[name]);return allArgs},validateCall=function(methodConfig,message){var argName,_i,_len,_ref;if(null==(null!=message?message.id:void 0))throw new Error("Malformed request");if(null==message.namespace)return new Error("Malformed request");if(null!=methodConfig.args)for(_ref=methodConfig.args,_i=0,_len=_ref.length;_len>_i;_i++)if(argName=_ref[_i],null==message[argName])return new Error("Malformed request, missing "+argName)},module.exports={methodConfigs:methodConfigs,validateCall:validateCall,getMethodArgs:getMethodArgs}},{}],7:[function(require,module){var Beagle,BrowserDetect,Cookie,Page,SecureStorageClient,Session,TrackingHub,Tracky,Visibility,Warehouse,_,global="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};Cookie=global.Cookie||require("optimize-cookie"),SecureStorageClient=require("./secure-storage-client"),Warehouse=require("./warehouse"),Tracky=require("tracky.js"),_=global._||require("underscore"),BrowserDetect=require("./browser-detect"),Beagle=require("./beagle"),Visibility=require("./visibility"),TrackingHub={_firstInit:!0,Beagle:Beagle,Warehouse:Warehouse,BrowserDetect:BrowserDetect,init:function(config){var secureStorage;if(null==config&&(config={}),!config.seed)throw"TrackingHub must be initialized with a seed value.";return this.counter=0,this.seed=config.seed,this.session=new Session(config.session),this.page=new Page(config.page),this.user=config.user,secureStorage=config.secureStorage||{enabled:!1},this._firstInit&&(Visibility.prerenderSupported()&&"prerender"===Visibility.visibilityState()?this._initVisibilityListener(config):this._initPersistence(config),this.beagle.use(Beagle.Timer(config.flushInterval||3e3)),this._firstInit=!1),this.initTracky(config),this.add("tracking-init")},initTracky:function(config){return Tracky.endpoint=config.endpoint,Tracky.seed=config.seed},beagle:new Beagle,add:function(name,data){var extraData,key,reservedKeys,_i,_len;for(null==data&&(data={}),reservedKeys=["session","page","user"],_i=0,_len=reservedKeys.length;_len>_i;_i++)key=reservedKeys[_i],data.hasOwnProperty(key)&&this.beagle.emit("error",new Error("Key is reserved for tracking: "+key));return extraData={session:this.session.data(),page:this.page.data(),user:this.user},_.extend(data,extraData),this.beagle.add.call(this.beagle,name,data)},track:function(messages){var trackyData;return trackyData=_(messages).map(function(message){var data;return data=_.clone(message.data),data.event_name=message.name,data.event_client_timestamp=new Date(message.timestamp.getTime()),data}),Tracky.log(trackyData)},flush:function(){return this.beagle.flush.apply(this.beagle,arguments)},on:function(){return this.beagle.on.apply(this.beagle,arguments)},off:function(){return this.beagle.off.apply(this.beagle,arguments)},use:function(){return this.beagle.use.apply(this.beagle,arguments)},randomId:function(){var id;return id=""+this.seed+"-"+(new Date).getTime()+"-TH"+this.counter,this.counter+=1,id},_reset:function(){return this._firstInit=!0},_initVisibilityListener:function(config){var onVisibilityChange;return onVisibilityChange=function(_this){return function(){return _this.beagle.flush(),_this._initPersistence(config),"undefined"!=typeof document&&null!==document?document.removeEventListener(Visibility.visibilityChangeEvent(),onVisibilityChange):void 0}}(this),"undefined"!=typeof document&&null!==document?document.addEventListener(Visibility.visibilityChangeEvent(),onVisibilityChange):void 0},_initPersistence:function(config){var client,messageExpiry,_ref;return messageExpiry=config.messageExpiry||864e5,null!=window.postMessage&&null!=(null!=(_ref=config.storage)?_ref.type:void 0)&&"secure"===config.storage.type&&null!=config.storage.url?(client=new SecureStorageClient("tracking-hub",config.storage.url),this.beagle.use(Beagle.Persistence(client,messageExpiry))):this.beagle.use(Beagle.Persistence("tracking-hub",messageExpiry))}},Session=function(){function Session(config){var key,_i,_len,_ref;for(null==config&&(config={}),config=_.clone(config),this.expiry=config.expiry||1800,this.cookieKey=config.cookieKey||"th-session-id",this.cookieDomain=config.cookieDomain,_ref=["expiry","cookieKey","cookieDomain"],_i=0,_len=_ref.length;_len>_i;_i++)key=_ref[_i],delete config[key];
this.metadata=config,this._buildId(),this.warehouse=new Warehouse("sessionStore"),this.prepareSessionStore()}return Session.prototype.prepareSessionStore=function(){return this.id!==this.warehouse.get("sessionId")?this.warehouse.set({data:{},sessionId:this.id}):void 0},Session.prototype.data=function(){var key,out,val,_ref;out={},_ref=this.metadata;for(key in _ref)val=_ref[key],out[key]=val;return out.id=this.id,out},Session.prototype.get=function(key){var sessionStore;return sessionStore=this.warehouse.get("data"),sessionStore?sessionStore[key]:void 0},Session.prototype.set=function(key,data){var sessionStore;return sessionStore=this.warehouse.get("data"),sessionStore[key]=data,this.warehouse.set("data",sessionStore)},Session.prototype.unset=function(key){var sessionStore;return sessionStore=this.warehouse.get("data"),delete sessionStore[key],this.warehouse.set("data",sessionStore)},Session.prototype.save=function(){return Cookie.set(this.cookieKey,this.id,this.expiry,this.cookieDomain)},Session.prototype._buildId=function(){return this.id=this._idFromCookie(),null==this.id&&(this.id=TrackingHub.randomId()),this.save()},Session.prototype._idFromCookie=function(){return Cookie.get(this.cookieKey)},Session}(),Page=function(){function Page(attributes){var key,_i,_len,_ref;for(null==attributes&&(attributes={}),this.id=attributes.id||TrackingHub.randomId(),_ref=["id","widgets"],_i=0,_len=_ref.length;_len>_i;_i++)key=_ref[_i],delete attributes[key];this.metadata=attributes}return Page.prototype.data=function(){var d,key,val,_ref;d={},_ref=this.metadata;for(key in _ref)val=_ref[key],d[key]=val;return d.id=this.id,d},Page}(),"undefined"!=typeof module&&module.exports?module.exports=TrackingHub:this.TrackingHub=TrackingHub},{"./beagle":1,"./browser-detect":2,"./secure-storage-client":5,"./visibility":8,"./warehouse":9,"optimize-cookie":10,"tracky.js":17,underscore:10}],8:[function(require,module){var Visibility;Visibility={prerenderSupported:function(){return this.visibilityChangeEvent()?!0:!1},visibilityChangeEvent:function(){var visibilityChange;return null!=("undefined"!=typeof document&&null!==document?document.hidden:void 0)?visibilityChange="visibilitychange":null!=("undefined"!=typeof document&&null!==document?document.webkitHidden:void 0)&&(visibilityChange="webkitvisibilitychange"),visibilityChange||null},visibilityState:function(){return("undefined"!=typeof document&&null!==document?document.visibilityState:void 0)||("undefined"!=typeof document&&null!==document?document.webkitVisibilityState:void 0)||"visible"}},"undefined"!=typeof module&&module.exports?module.exports=Visibility:this.Visibility=Visibility},{}],9:[function(require,module){var LocalStorageAdapter,MemoryAdapter,Warehouse;Warehouse=function(){function Warehouse(namespace){var e,localStorageEnabled;this.namespace=namespace,localStorageEnabled=function(){try{return localStorage.setItem("warehouse-local-storage-test","true"),localStorage.removeItem("warehouse-local-storage-test"),!0}catch(_error){return e=_error,!1}}(),this.adapter=localStorageEnabled?LocalStorageAdapter:MemoryAdapter}return Warehouse.store={},Warehouse.prototype.get=function(key,cb){var val;return null==cb&&(cb=function(){}),val=this.getAll()[key],cb(null,val),val},Warehouse.prototype.getAll=function(cb){var val;return null==cb&&(cb=function(){}),val=this.adapter.get(this.namespace)||{},cb(null,val),val},Warehouse.prototype.set=function(keyOrObj,val,cb){var allData,e,key,value;if(null==cb&&(cb=null),null===cb&&"function"==typeof val&&(cb=val,val=null),val){key=keyOrObj,allData=this.getAll(),allData[key]=val;try{this.adapter.set(this.namespace,allData)}catch(_error){if(e=_error,cb)return cb(e);throw e}if(cb)return cb()}else{for(key in keyOrObj){value=keyOrObj[key];try{this.set(key,value)}catch(_error){return e=_error,cb(e)}}if(cb)return cb()}},Warehouse.prototype.appendTo=function(key,data,cb){var arr,err;if(null==cb&&(cb=null),arr=this.get(key),null==arr&&(arr=[]),null==(null!=arr?arr.push:void 0)||"function"!=typeof arr.push){if(err=new Error("The item at key "+key+" must support push to use appendTo"),cb)return cb(err);throw err}return arr.push(data),this.set(key,arr,cb)},Warehouse.prototype.setAll=function(data,cb){return null==cb&&(cb=function(){}),this.adapter.set(this.namespace,data),cb()},Warehouse.prototype.unset=function(key,cb){var allData;return null==cb&&(cb=function(){}),allData=this.getAll(),delete allData[key],this.adapter.set(this.namespace,allData),cb()},Warehouse.prototype.unsetAll=function(cb){return null==cb&&(cb=function(){}),this.adapter.unset(this.namespace),cb()},Warehouse}(),LocalStorageAdapter={get:function(key){var e,val;try{if(val=localStorage.getItem(key))return JSON.parse(val)}catch(_error){return e=_error,this.set(key,{}),null}},set:function(key,data){return localStorage.setItem(key,JSON.stringify(data))},unset:function(key){return localStorage.removeItem(key)}},MemoryAdapter={set:function(name,value){return Warehouse.store[name]=value},get:function(name){return Warehouse.store[name]},unset:function(name){return delete Warehouse.store[name]}},"undefined"!=typeof module&&module.exports?module.exports=Warehouse:this.Warehouse=Warehouse},{}],10:[function(){},{}],11:[function(require,module){!function(name,definition){"undefined"!=typeof module?module.exports=definition():"function"==typeof define&&"object"==typeof define.amd?define(definition):this[name]=definition()}("domready",function(ready){function flush(f){for(loaded=1;f=fns.shift();)f()}var fn,fns=[],f=!1,doc=document,testEl=doc.documentElement,hack=testEl.doScroll,domContentLoaded="DOMContentLoaded",addEventListener="addEventListener",onreadystatechange="onreadystatechange",readyState="readyState",loadedRgx=hack?/^loaded|^c/:/^loaded|c/,loaded=loadedRgx.test(doc[readyState]);return doc[addEventListener]&&doc[addEventListener](domContentLoaded,fn=function(){doc.removeEventListener(domContentLoaded,fn,f),flush()},f),hack&&doc.attachEvent(onreadystatechange,fn=function(){/^c/.test(doc[readyState])&&(doc.detachEvent(onreadystatechange,fn),flush())}),ready=hack?function(fn){self!=top?loaded?fn():fns.push(fn):function(){try{testEl.doScroll("left")}catch(e){return setTimeout(function(){ready(fn)},50)}fn()}()}:function(fn){loaded?fn():fns.push(fn)}})},{}],12:[function(require,module){!function(){var Evented,__slice=[].slice;Evented=function(mod){var listeners;return listeners={"*":[]},mod.on=function(key,listener){var _ref;return null==(_ref=listeners[key])&&(listeners[key]=[]),listeners[key].push(listener)},mod.off=function(key,listenerToRemove){var listener,safeListeners,_i,_len,_ref;for(safeListeners=[],_ref=listeners[key],_i=0,_len=_ref.length;_len>_i;_i++)listener=_ref[_i],listener!==listenerToRemove&&safeListeners.push(listener);return listeners[key]=safeListeners},mod.emit=function(){var args,key,listener,_i,_j,_len,_len1,_ref,_ref1,_ref2,_results;for(key=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],null==(_ref=listeners[key])&&(listeners[key]=[]),_ref1=listeners[key],_i=0,_len=_ref1.length;_len>_i;_i++)listener=_ref1[_i],listener.apply(null,args);for(_ref2=listeners["*"],_results=[],_j=0,_len1=_ref2.length;_len1>_j;_j++)listener=_ref2[_j],_results.push(listener.apply(null,[key].concat(__slice.call(args))));return _results},mod},"undefined"!=typeof module&&module.exports?module.exports=Evented:this.Evented=Evented}.call(this)},{}],13:[function(require,module){!function(){var CONNECTION_FAILED,CONNECTION_SUCCEEDED,MAX_ACK_ATTEMPTS,PORTAL_LISTENING,PORTAL_LISTENING_ACK,Portal;PORTAL_LISTENING="portal.listening",PORTAL_LISTENING_ACK="portal.listening.ack",CONNECTION_FAILED="connectionFailed",CONNECTION_SUCCEEDED="connectionSucceeded",MAX_ACK_ATTEMPTS=25,Portal=function(source,target,targetOrigin,pluginQueue){var WaitForReady,ackTargetReady,addListener,emit,listeners,notifyListening,onPostMessage,pastEvents,portal,sendMessage,targetAckAttempts,targetAcked,targetAckedListening,targetReady;return null==targetOrigin&&(targetOrigin="*"),null==pluginQueue&&(pluginQueue=null),listeners={},pastEvents={},targetReady=!1,targetAcked=!1,targetAckAttempts=0,ackTargetReady=function(){return targetReady=!0,sendMessage(PORTAL_LISTENING_ACK),null!=pluginQueue?pluginQueue.flush():void 0},targetAckedListening=function(){var channel,name,_results;targetAcked=!0,_results=[];for(channel in listeners)name=CONNECTION_SUCCEEDED,_results.push(emit({name:name,channel:channel}));return _results},notifyListening=function(){var channel,name,_results;if(!targetAcked){if(targetAckAttempts>=MAX_ACK_ATTEMPTS){_results=[];for(channel in listeners)name=CONNECTION_FAILED,_results.push(emit({name:name,channel:channel}));return _results}return targetAckAttempts+=1,sendMessage(PORTAL_LISTENING),setTimeout(notifyListening,200)}},sendMessage=function(message){var e;try{return target.postMessage(message,targetOrigin)}catch(_error){e=_error}},addListener=function(name,func){return null!=source.addEventListener?source.addEventListener(name,func):null!=source.attachEvent?source.attachEvent("on"+name,func):void 0},WaitForReady=function(){return function(beagle){return beagle.on("add",function(){return targetReady?beagle.flush():void 0})}},null==pluginQueue&&(pluginQueue=new Beagle),pluginQueue.use(WaitForReady()),pluginQueue.on("flush",function(msgs){var msg,_i,_len,_results;for(_results=[],_i=0,_len=msgs.length;_len>_i;_i++)msg=msgs[_i],_results.push(sendMessage(JSON.stringify(msg.data)));return _results}),emit=function(eventData){var channel,data,eventName,func,_base,_base1,_i,_j,_len,_len1,_ref,_ref1,_results;if(channel=eventData.channel,eventName=eventData.name,channel&&eventName){for(data=eventData.data,null==listeners[channel]&&(listeners[channel]={}),null==pastEvents[channel]&&(pastEvents[channel]={}),null==(_base=pastEvents[channel])["*"]&&(_base["*"]=[]),null==(_base1=pastEvents[channel])[eventName]&&(_base1[eventName]=[]),pastEvents[channel]["*"].push(eventData),pastEvents[channel][eventName].push(eventData),_ref=listeners[channel]["*"]||[],_i=0,_len=_ref.length;_len>_i;_i++)func=_ref[_i],func(eventName,data);for(_ref1=listeners[channel][eventName]||[],_results=[],_j=0,_len1=_ref1.length;_len1>_j;_j++)func=_ref1[_j],_results.push(func(data));return _results}},onPostMessage=function(event){var err,eventData;if(event.source===target&&("*"===targetOrigin||targetOrigin===event.origin)){if(event.data===PORTAL_LISTENING)return ackTargetReady(),void 0;if(event.data===PORTAL_LISTENING_ACK)return targetAckedListening(),void 0;try{eventData=JSON.parse(event.data)}catch(_error){return err=_error,void 0}return emit(eventData)}},addListener("message",onPostMessage),notifyListening(),portal=function(channel){return{add:function(eventName,data){return null==data&&(data={}),pluginQueue.add("msg",{channel:channel,name:eventName,data:data})},bind:function(eventName,func){var _base;return null==listeners[channel]&&(listeners[channel]={}),null==(_base=listeners[channel])[eventName]&&(_base[eventName]=[]),listeners[channel][eventName].push(func)},on:function(eventName,func){return this.bind(eventName,func)},replayAndBind:function(eventName,func){var pastEvent,_i,_len,_ref;for(null==pastEvents[channel]&&(pastEvents[channel]={}),_ref=pastEvents[channel][eventName]||[],_i=0,_len=_ref.length;_len>_i;_i++)pastEvent=_ref[_i],"*"===eventName?func(pastEvent.name,pastEvent.data):func(pastEvent.data);return this.bind(eventName,func)}}}},"undefined"!=typeof module&&module.exports?module.exports=Portal:this.Portal=Portal}.call(this)},{}],14:[function(require,module){function noop(){}function isHost(obj){var str={}.toString.call(obj);switch(str){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function getXHR(){if(root.XMLHttpRequest&&("file:"!=root.location.protocol||!root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1}function isObject(obj){return obj===Object(obj)}function serialize(obj){if(!isObject(obj))return obj;var pairs=[];for(var key in obj)null!=obj[key]&&pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(obj[key]));return pairs.join("&")}function parseString(str){for(var parts,pair,obj={},pairs=str.split("&"),i=0,len=pairs.length;len>i;++i)pair=pairs[i],parts=pair.split("="),obj[decodeURIComponent(parts[0])]=decodeURIComponent(parts[1]);return obj}function parseHeader(str){var index,line,field,val,lines=str.split(/\r?\n/),fields={};lines.pop();for(var i=0,len=lines.length;len>i;++i)line=lines[i],index=line.indexOf(":"),field=line.slice(0,index).toLowerCase(),val=trim(line.slice(index+1)),fields[field]=val;return fields}function type(str){return str.split(/ *; */).shift()}function params(str){return reduce(str.split(/ *; */),function(obj,str){var parts=str.split(/ *= */),key=parts.shift(),val=parts.shift();return key&&val&&(obj[key]=val),obj},{})}function Response(req,options){options=options||{},this.req=req,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method?this.xhr.responseText:null,this.setStatusProperties(this.xhr.status),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function Request(method,url){var self=this;Emitter.call(this),this._query=this._query||[],this.method=method,this.url=url,this.header={},this._header={},this.on("end",function(){var err=null,res=null;try{res=new Response(self)}catch(e){err=new Error("Parser is unable to parse the response"),err.parse=!0,err.original=e}self.callback(err,res)})}function request(method,url){return"function"==typeof url?new Request("GET",method).end(url):1==arguments.length?new Request("GET",method):new Request(method,url)}var Emitter=require("emitter"),reduce=require("reduce"),root="undefined"==typeof window?this:window,trim="".trim?function(s){return s.trim()}:function(s){return s.replace(/(^\s*|\s*$)/g,"")};request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},Response.prototype.get=function(field){return this.header[field.toLowerCase()]},Response.prototype.setHeaderProperties=function(){var ct=this.header["content-type"]||"";this.type=type(ct);var obj=params(ct);for(var key in obj)this[key]=obj[key]},Response.prototype.parseBody=function(str){var parse=request.parse[this.type];return parse&&str&&str.length?parse(str):null},Response.prototype.setStatusProperties=function(status){var type=0|status/100;this.status=status,this.statusType=type,this.info=1==type,this.ok=2==type,this.clientError=4==type,this.serverError=5==type,this.error=4==type||5==type?this.toError():!1,this.accepted=202==status,this.noContent=204==status||1223==status,this.badRequest=400==status,this.unauthorized=401==status,this.notAcceptable=406==status,this.notFound=404==status,this.forbidden=403==status},Response.prototype.toError=function(){var req=this.req,method=req.method,url=req.url,msg="cannot "+method+" "+url+" ("+this.status+")",err=new Error(msg);return err.status=this.status,err.method=method,err.url=url,err},request.Response=Response,Emitter(Request.prototype),Request.prototype.use=function(fn){return fn(this),this},Request.prototype.timeout=function(ms){return this._timeout=ms,this},Request.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},Request.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},Request.prototype.set=function(field,val){if(isObject(field)){for(var key in field)this.set(key,field[key]);return this}return this._header[field.toLowerCase()]=val,this.header[field]=val,this},Request.prototype.unset=function(field){return delete this._header[field.toLowerCase()],delete this.header[field],this},Request.prototype.getHeader=function(field){return this._header[field.toLowerCase()]},Request.prototype.type=function(type){return this.set("Content-Type",request.types[type]||type),this},Request.prototype.accept=function(type){return this.set("Accept",request.types[type]||type),this},Request.prototype.auth=function(user,pass){var str=btoa(user+":"+pass);return this.set("Authorization","Basic "+str),this},Request.prototype.query=function(val){return"string"!=typeof val&&(val=serialize(val)),val&&this._query.push(val),this},Request.prototype.field=function(name,val){return this._formData||(this._formData=new FormData),this._formData.append(name,val),this},Request.prototype.attach=function(field,file,filename){return this._formData||(this._formData=new FormData),this._formData.append(field,file,filename),this},Request.prototype.send=function(data){var obj=isObject(data),type=this.getHeader("Content-Type");if(obj&&isObject(this._data))for(var key in data)this._data[key]=data[key];else"string"==typeof data?(type||this.type("form"),type=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==type?this._data?this._data+"&"+data:data:(this._data||"")+data):this._data=data;return obj?(type||this.type("json"),this):this},Request.prototype.callback=function(err,res){var fn=this._callback;return this.clearTimeout(),2==fn.length?fn(err,res):err?this.emit("error",err):(fn(res),void 0)},Request.prototype.crossDomainError=function(){var err=new Error("Origin is not allowed by Access-Control-Allow-Origin");err.crossDomain=!0,this.callback(err)},Request.prototype.timeoutError=function(){var timeout=this._timeout,err=new Error("timeout of "+timeout+"ms exceeded");err.timeout=timeout,this.callback(err)},Request.prototype.withCredentials=function(){return this._withCredentials=!0,this},Request.prototype.end=function(fn){var self=this,xhr=this.xhr=getXHR(),query=this._query.join("&"),timeout=this._timeout,data=this._formData||this._data;if(this._callback=fn||noop,xhr.onreadystatechange=function(){return 4==xhr.readyState?0==xhr.status?self.aborted?self.timeoutError():self.crossDomainError():(self.emit("end"),void 0):void 0},xhr.upload&&(xhr.upload.onprogress=function(e){e.percent=100*(e.loaded/e.total),self.emit("progress",e)}),timeout&&!this._timer&&(this._timer=setTimeout(function(){self.abort()},timeout)),query&&(query=request.serializeObject(query),this.url+=~this.url.indexOf("?")?"&"+query:"?"+query),xhr.open(this.method,this.url,!0),this._withCredentials&&(xhr.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof data&&!isHost(data)){var serialize=request.serialize[this.getHeader("Content-Type")];serialize&&(data=serialize(data))}for(var field in this.header)null!=this.header[field]&&xhr.setRequestHeader(field,this.header[field]);return this.emit("request",this),xhr.send(data),this},request.Request=Request,request.get=function(url,data,fn){var req=request("GET",url);return"function"==typeof data&&(fn=data,data=null),data&&req.query(data),fn&&req.end(fn),req},request.head=function(url,data,fn){var req=request("HEAD",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.del=function(url,fn){var req=request("DELETE",url);return fn&&req.end(fn),req},request.patch=function(url,data,fn){var req=request("PATCH",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.post=function(url,data,fn){var req=request("POST",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.put=function(url,data,fn){var req=request("PUT",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},module.exports=request},{emitter:15,reduce:16}],15:[function(require,module){function Emitter(obj){return obj?mixin(obj):void 0}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks[event]=this._callbacks[event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){self.off(event,on),fn.apply(this,arguments)}var self=this;return this._callbacks=this._callbacks||{},on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks[event],this;for(var cb,i=0;i<callbacks.length;i++)if(cb=callbacks[i],cb===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;len>i;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks[event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],16:[function(require,module){module.exports=function(arr,fn,initial){for(var idx=0,len=arr.length,curr=3==arguments.length?initial:arr[idx++];len>idx;)curr=fn.call(null,curr,arr[idx],++idx,arr);return curr}},{}],17:[function(require,module){function pad(number){var r=String(number);return 1===r.length&&(r="0"+r),r}function encodedSeed(){return Tracky.seed?encodeURI(Tracky.seed):void 0}function fireEvents(data,ls){for(var i=0;i<ls.length;i++){var listener=ls[i];try{listener(data)}catch(e){Tracky.whenDebugging(function(){console.log("Error running listener",listener)})}}}function postRequest(data,synchronous){return void 0===data||data instanceof Array&&0===data.length?(Tracky.whenDebugging(function(){throw"Tracky.log error: No data to send"}),void 0):Tracky.endpoint?(Tracky.whenDebugging(function(){console.log(Tracky.endpoint+" => %s",JSON.stringify(data))}),post(Tracky.endpoint,data,synchronous),fireEvents(data,listeners.log),void 0):(Tracky.whenDebugging(function(){throw"Tracky.log error: No endpoint defined"}),void 0)}function isDifferentOrigin(endpoint){var a=document.createElement("a");return a.href=endpoint,0===a.host.length?!1:window.location.protocol+window.location.host!==a.protocol+a.host}function post(endpoint,data,synchronous){isDifferentOrigin(endpoint)?global.XDomainRequest?postXDomainIE(endpoint,data):synchronous?postRaw(endpoint,data,!0):postRaw(endpoint,data,!1):synchronous?postSync(endpoint,data):postAsync(endpoint,data)}function getXHR(){if(global.XMLHttpRequest&&("file:"!=global.location.protocol||!global.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1}function postRaw(endpoint,data,synchronous){withRetries(2,function(retry){var xhr=getXHR();xhr&&(xhr.open("POST",endpoint,!synchronous),xhr.setRequestHeader("Content-Type","text/plain"),xhr.onreadystatechange=function(){4==xhr.readyState&&200!=xhr.status&&retry()},xhr.send(JSON.stringify(data)))})}function postXDomainIE(endpoint,data){withRetries(2,function(retry){var xdr=new global.XDomainRequest;xdr.onerror=function(){retry()},xdr.open("post",endpoint),xdr.send(JSON.stringify(data))})}function withRetries(retriesLeft,func){var doRetry=function(){retriesLeft>0&&(retriesLeft--,func(doRetry))};return func(doRetry)}function postAsync(endpoint,data){withRetries(2,function(retry){Tracky.superagent.post(endpoint).set("X-Requested-With",null).set("Content-Type","text/plain").send(JSON.stringify(data)).end(function(res){res.error&&retry()})})}function postSync(endpoint,data){withRetries(2,function(retry){$.ajax({type:"POST",url:endpoint,contentType:"text/plain",async:!1,data:JSON.stringify(data),error:function(){retry()}})})}function ensureTrackyRulesForMessage(message){var outMessage=Tracky.merge({},message,!0);if(outMessage.event_id=Tracky.generateUUID(),outMessage.event_name){var originalEventName=outMessage.event_name;outMessage.event_name=outMessage.event_name.toString().toLowerCase(),originalEventName!=outMessage.event_name&&Tracky.whenDebugging(function(){console.warn("Tracky.log: event_name being changed from %s to %s to conform with Tracky spec",originalEventName.toString(),outMessage.event_name)})}return outMessage.event_client_timestamp||(outMessage.event_client_timestamp=Tracky.currentISODateString()),"string"!=typeof outMessage.event_client_timestamp&&(outMessage.event_client_timestamp=formatTimestamp(outMessage.event_client_timestamp)),outMessage}function formatTimestamp(now){return now.getUTCFullYear()+"-"+pad(now.getUTCMonth()+1)+"-"+pad(now.getUTCDate())+"T"+pad(now.getUTCHours())+":"+pad(now.getUTCMinutes())+":"+pad(now.getUTCSeconds())+"."+String((now.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}function doLog(synchronous,args){var dataForRequest,bulkRequest,bulkInputData,trackyifiedData;if(bulkRequest=1===args.length&&args[0]instanceof Array||args.length>1?!0:!1){dataForRequest=[],bulkInputData=1===args.length&&args[0]instanceof Array?args[0]:args;for(var i=0;i<bulkInputData.length;i++)trackyifiedData=ensureTrackyRulesForMessage(bulkInputData[i]),trackyifiedData.event_name&&dataForRequest.push(trackyifiedData);1===dataForRequest.length&&(dataForRequest=dataForRequest[0])}else trackyifiedData=ensureTrackyRulesForMessage(args[0]),trackyifiedData.event_name&&(dataForRequest=trackyifiedData);return postRequest(dataForRequest,synchronous)}var superagent=require("superagent"),global=this,listeners={log:[]},Tracky=function(endpoint){this.endpoint=endpoint,this.listeners={log:[]}};Tracky.superagent=superagent;var S4=function(){return(0|65536*(1+Math.random())).toString(16).substring(1)};Tracky.on=function(name,listener){listeners[name].push(listener)},Tracky.prototype.on=function(name,listener){this.listeners[name].push(listener)},Tracky.prototype.log=function(eventName,data){var requiredData={event_name:eventName.toString().toLowerCase(),event_client_timestamp:Tracky.currentISODateString(),event_id:Tracky.generateUUID()},ajaxData=Tracky.merge({},data||{},!0);ajaxData=Tracky.merge(ajaxData,requiredData);var endpoint=this.endpoint||Tracky.endpoint;return endpoint?(Tracky.whenDebugging(function(){console.log(endpoint+" => %s",JSON.stringify(ajaxData))}),post(endpoint,ajaxData,!1),fireEvents(ajaxData,this.listeners.log.concat(listeners.log)),void 0):(Tracky.whenDebugging(function(){throw"Tracky.log error: No endpoint defined"}),void 0)},Tracky.currentISODateString=function(){var now=new Date;return formatTimestamp(now)},Tracky.whenDebugging=function(callback){Tracky.debug&&callback.call()},Tracky.merge=function(source,data,checkKey){var key,output={};for(key in source)output[key]=source[key];for(key in data)key.match(/^\w+$/)||!checkKey?output[key]=data[key]:Tracky.whenDebugging(function(){console.warn("Tracky.log - Invalid key '"+key+"' ignored")});return output},Tracky.generateUUID=function(){var seed=encodedSeed(),id=S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4();return seed&&(id=id+"-"+seed),id},Tracky.logSync=function(){doLog(!0,arguments)},Tracky.log=function(){doLog(!1,arguments)},module.exports=Tracky},{superagent:14}],18:[function(require,module){var regexes=require("./regexes");require("./lib/results").BackwardsCompatResults;var parsers=require("./make-parsers").makeParsers(regexes);module.exports=parsers},{"./lib/results":22,"./make-parsers":24,"./regexes":25}],19:[function(require,module,exports){function Device(family,deviceType){this.family=family||"Other",this.type=deviceType||"Other"}function parserForRegex(obj){function parser(str){var m=str.match(regexp);if(!m)return null;var family=deviceRep?deviceRep.replace("$1",m[1]):m[1];return new Device(family,deviceType)}var regexp=new RegExp(obj.regex),deviceRep=obj.device_replacement,deviceType=obj.device_type;return parser}exports.Device=Device,Device.prototype.toString=function(){return this.family},exports.makeParser=function(regexes){function parser(str,ua_family,os_family){var obj;if("string"==typeof str)for(var i=0,length=parsers.length;length>i;i++)if(obj=parsers[i](str,ua_family,os_family))return obj;return obj||new Device}for(var parsers=[],i=0,length=regexes.length;length>i;i++)parsers.push(parserForRegex(regexes[i]));return parser}},{}],20:[function(require,module,exports){function startsWithDigit(str){return DIGITS.test(str)}var DIGITS=/^\d/;exports.startsWithDigit=startsWithDigit},{}],21:[function(require,module,exports){function OS(family,major,minor,patch,patchMinor){this.family=family||"Other",this.major=major||null,this.minor=minor||null,this.patch=patch||null,this.patchMinor=patchMinor||null}function _makeParsers(obj){function parser(str){var m=str.match(regexp);if(!m)return null;var family=famRep?famRep.replace("$1",m[1]):m[1],major=majorRep||m[2],minor=minorRep||m[3],patch=patchRep||m[4],patchMinor=patchMinorRep||m[5];return new OS(family,major,minor,patch,patchMinor)}var regexp=new RegExp(obj.regex),famRep=obj.os_replacement,majorRep=obj.os_v1_replacement,minorRep=obj.os_v2_replacement,patchRep=obj.os_v3_replacement,patchMinorRep=obj.os_v4_replacement;return parser}var startsWithDigit=require("./helpers").startsWithDigit;exports.OS=OS,OS.prototype.toVersionString=function(){var output="";return null!=this.major&&(output+=this.major,null!=this.minor&&(output+="."+this.minor,null!=this.patch&&(startsWithDigit(this.patch)&&(output+="."),output+=this.patch,null!=this.patchMinor&&(startsWithDigit(this.patchMinor)&&(output+="."),output+=this.patchMinor)))),output},OS.prototype.toString=function(){var suffix=this.toVersionString();return suffix&&(suffix=" "+suffix),this.family+suffix},exports.makeParser=function(regexes){function parser(str){var obj;if("string"==typeof str)for(var i=0,length=parsers.length;length>i;i++)if(obj=parsers[i](str))return obj;return obj||new OS}var length,i,parsers=[];for(i=0,length=regexes.length;length>i;i++)parsers.push(_makeParsers(regexes[i]));return parser}},{"./helpers":20}],22:[function(require,module,exports){function BackwardsCompatResults(ua_str,ua,os,device){this.string=ua_str,this.userAgent=this.ua=ua,this.os=os,this.device=device;var major=ua.major,minor=ua.minor,patch=ua.patch;this.family=ua.family,this.major=null===major?UNDEF:parseInt(major),this.minor=null===minor?UNDEF:parseInt(minor),this.patch=null===patch?UNDEF:parseInt(patch)}var UNDEF=void 0;exports.BackwardsCompatResults=BackwardsCompatResults,BackwardsCompatResults.prototype.toVersionString=function(){var output="",ua=this.ua;return null!=ua.major&&(output+=ua.major,null!=ua.minor&&(output+="."+ua.minor,null!=ua.patch&&(output+="."+ua.patch))),output},BackwardsCompatResults.prototype.toString=function(){var suffix=this.toVersionString();return suffix&&(suffix=" "+suffix),this.ua.family+suffix},BackwardsCompatResults.prototype.toFullString=function(){return this.toString()+(this.os?"/"+this.os:"")}},{}],23:[function(require,module,exports){function UA(family,major,minor,patch){this.family=family||"Other",this.major=major||null,this.minor=minor||null,this.patch=patch||null}function _makeParsers(obj){function parser(str){var m=str.match(regexp);
if(!m)return null;var family=famRep?famRep.replace("$1",m[1]):m[1],major=majorRep||m[2],minor=minorRep||m[3],patch=patchRep||m[4];return new UA(family,major,minor,patch)}var regexp=new RegExp(obj.regex),famRep=obj.family_replacement,majorRep=obj.v1_replacement,minorRep=obj.v2_replacement,patchRep=obj.v3_replacement;return parser}var OS=(require("./helpers").startsWithDigit,require("./os").OS);exports.UA=UA,UA.prototype.toString=OS.prototype.toString,UA.prototype.toVersionString=OS.prototype.toVersionString,exports.makeParser=function(regexes){function parser(str){var obj;if("string"==typeof str)for(var i=0,length=parsers.length;length>i;i++)if(obj=parsers[i](str))return obj;return obj||new UA}var length,i,parsers=[];for(i=0,length=regexes.length;length>i;i++)parsers.push(_makeParsers(regexes[i]));return parser}},{"./helpers":20,"./os":21}],24:[function(require,module,exports){var Results=require("./lib/results").BackwardsCompatResults;exports.makeParsers=function(regexes){var parsers={},parseUA=require("./lib/ua").makeParser(regexes.user_agent_parsers),parseOS=require("./lib/os").makeParser(regexes.os_parsers),parseDevice=require("./lib/device").makeParser(regexes.device_parsers);return parsers.parseUA=parseUA,parsers.parseOS=parseOS,parsers.parseDevice=parseDevice,parsers.parse=function(str){var ua=parseUA(str),os=parseOS(str),device=parseDevice(str);return new Results(str,ua,os,device)},parsers}},{"./lib/device":19,"./lib/os":21,"./lib/results":22,"./lib/ua":23}],25:[function(require,module){module.exports={user_agent_parsers:[{regex:"(HbbTV)/(\\d+)\\.(\\d+)\\.(\\d+) \\("},{regex:"(Chimera|SeaMonkey|Camino)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)?"},{regex:"(Pale[Mm]oon)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Pale Moon (Firefox Variant)"},{regex:"(Fennec)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)(pre)",family_replacement:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"Mobile.*(Firefox)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?)",family_replacement:"Firefox ($1)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?",family_replacement:"Firefox ($1)"},{regex:"(Firefox).*Tablet browser (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"MicroB"},{regex:"(MozillaDeveloperPreview)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?"},{regex:"(Flock)/(\\d+)\\.(\\d+)(b\\d+?)"},{regex:"(RockMelt)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Navigator)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(Navigator)/(\\d+)\\.(\\d+)([ab]\\d+)",family_replacement:"Netscape"},{regex:"(Netscape6)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+)?",family_replacement:"Netscape"},{regex:"(MyIBrow)/(\\d+)\\.(\\d+)",family_replacement:"My Internet Browser"},{regex:"(Opera Tablet).*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?"},{regex:"(Opera)/.+Opera Mobi.+Version/(\\d+)\\.(\\d+)",family_replacement:"Opera Mobile"},{regex:"(Opera)/(\\d+)\\.(\\d+).+Opera Mobi",family_replacement:"Opera Mobile"},{regex:"Opera Mobi.+(Opera)[/ ](\\d+)\\.(\\d+)",family_replacement:"Opera Mobile"},{regex:"Opera Mobi",family_replacement:"Opera Mobile"},{regex:"(Opera Mini)(?:/att)?/(\\d+)\\.(\\d+)"},{regex:"(Opera)/9.80.*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?"},{regex:"(?:Mobile Safari).*(OPR)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Opera Mobile"},{regex:"(?:Chrome).*(OPR)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Opera"},{regex:"(hpw|web)OS/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"webOS Browser"},{regex:"(luakit)",family_replacement:"LuaKit"},{regex:"(Snowshoe)/(\\d+)\\.(\\d+).(\\d+)"},{regex:"(Lightning)/(\\d+)\\.(\\d+)\\.?((?:[ab]?\\d+[a-z]*)|(?:\\d*))"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?) \\(Swiftfox\\)",family_replacement:"Swiftfox"},{regex:"(Firefox)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)? \\(Swiftfox\\)",family_replacement:"Swiftfox"},{regex:"(rekonq)/(\\d+)\\.(\\d+)\\.?(\\d+)? Safari",family_replacement:"Rekonq"},{regex:"rekonq",family_replacement:"Rekonq"},{regex:"(conkeror|Conkeror)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Conkeror"},{regex:"(konqueror)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Konqueror"},{regex:"(WeTab)-Browser"},{regex:"(Comodo_Dragon)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Comodo Dragon"},{regex:"(YottaaMonitor|BrowserMob|HttpMonitor|YandexBot|Slurp|BingPreview|PagePeeker|ThumbShotsBot|WebThumb|URL2PNG|ZooShot|GomezA|Catchpoint bot|Willow Internet Crawler|Google SketchUp|Read%20Later)"},{regex:"(Symphony) (\\d+).(\\d+)"},{regex:"(Minimo)"},{regex:"(CrMo)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile"},{regex:"(CriOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile iOS"},{regex:"(Chrome)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+) Mobile",family_replacement:"Chrome Mobile"},{regex:"(chromeframe)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Frame"},{regex:"(UCBrowser)[ /](\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"UC Browser"},{regex:"(UC Browser)[ /](\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(UC Browser|UCBrowser|UCWEB)(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"UC Browser"},{regex:"(SLP Browser)/(\\d+)\\.(\\d+)",family_replacement:"Tizen Browser"},{regex:"(SE 2\\.X) MetaSr (\\d+)\\.(\\d+)",family_replacement:"Sogou Explorer"},{regex:"(baidubrowser)[/\\s](\\d+)",family_replacement:"Baidu Browser"},{regex:"(FlyFlow)/(\\d+)\\.(\\d+)",family_replacement:"Baidu Explorer"},{regex:"(MQQBrowser/Mini)(?:(\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?)?",family_replacement:"QQ Browser Mini"},{regex:"(MQQBrowser)(?:/(\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?)?",family_replacement:"QQ Browser Mobile"},{regex:"(QQBrowser)(?:/(\\d+)(?:\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?)?",family_replacement:"QQ Browser"},{regex:"(Pingdom.com_bot_version_)(\\d+)\\.(\\d+)",family_replacement:"PingdomBot"},{regex:"(facebookexternalhit)/(\\d+)\\.(\\d+)",family_replacement:"FacebookBot"},{regex:"(LinkedInBot)/(\\d+)\\.(\\d+)",family_replacement:"LinkedInBot"},{regex:"(Twitterbot)/(\\d+)\\.(\\d+)",family_replacement:"TwitterBot"},{regex:"Google.*/\\+/web/snippet",family_replacement:"GooglePlusBot"},{regex:"(Rackspace Monitoring)/(\\d+)\\.(\\d+)",family_replacement:"RackspaceBot"},{regex:"(PyAMF)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(YaBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Yandex Browser"},{regex:"(Chrome)/(\\d+)\\.(\\d+)\\.(\\d+).* MRCHROME",family_replacement:"Mail.ru Chromium Browser"},{regex:"(AOL) (\\d+)\\.(\\d+); AOLBuild (\\d+)"},{regex:"(AdobeAIR|FireWeb|Jasmine|ANTGalio|Midori|Fresco|Lobo|PaleMoon|Maxthon|Lynx|OmniWeb|Dillo|Camino|Demeter|Fluid|Fennec|Epiphany|Shiira|Sunrise|Flock|Netscape|Lunascape|WebPilot|NetFront|Netfront|Konqueror|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|Opera Mini|iCab|NetNewsWire|ThunderBrowse|Iris|UP\\.Browser|Bunjalloo|Google Earth|Raven for Mac|Openwave)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"MSOffice 12",family_replacement:"Outlook",v1_replacement:"2007"},{regex:"MSOffice 14",family_replacement:"Outlook",v1_replacement:"2010"},{regex:"Microsoft Outlook 15\\.\\d+\\.\\d+",family_replacement:"Outlook",v1_replacement:"2013"},{regex:"(Airmail) (\\d+)\\.(\\d+)(?:\\.(\\d+))?"},{regex:"(Thunderbird)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?)",family_replacement:"Thunderbird"},{regex:"(Chromium|Chrome)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"\\b(Dolphin)(?: |HDCN/|/INT\\-)(\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(bingbot|Bolt|Jasmine|IceCat|Skyfire|Midori|Maxthon|Lynx|Arora|IBrowse|Dillo|Camino|Shiira|Fennec|Phoenix|Chrome|Flock|Netscape|Lunascape|Epiphany|WebPilot|Opera Mini|Opera|NetFront|Netfront|Konqueror|Googlebot|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|iCab|NetNewsWire|Space Bison|Stainless|Orca|Dolfin|BOLT|Minimo|Tizen Browser|Polaris|Abrowser|Planetweb|ICE Browser|mDolphin)/(\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(Chromium|Chrome)/(\\d+)\\.(\\d+)"},{regex:"(IEMobile)[ /](\\d+)\\.(\\d+)",family_replacement:"IE Mobile"},{regex:"(iRider|Crazy Browser|SkipStone|iCab|Lunascape|Sleipnir|Maemo Browser) (\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(iCab|Lunascape|Opera|Android|Jasmine|Polaris) (\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(Kindle)/(\\d+)\\.(\\d+)"},{regex:"(Android) Donut",v1_replacement:"1",v2_replacement:"2"},{regex:"(Android) Eclair",v1_replacement:"2",v2_replacement:"1"},{regex:"(Android) Froyo",v1_replacement:"2",v2_replacement:"2"},{regex:"(Android) Gingerbread",v1_replacement:"2",v2_replacement:"3"},{regex:"(Android) Honeycomb",v1_replacement:"3"},{regex:"(MSIE) (\\d+)\\.(\\d+).*XBLWP7",family_replacement:"IE Large Screen"},{regex:"(Obigo)InternetBrowser"},{regex:"(Obigo)\\-Browser"},{regex:"(Obigo|OBIGO)[^\\d]*(\\d+)(?:.(\\d+))?",family_replacement:"Obigo"},{regex:"(MAXTHON|Maxthon) (\\d+)\\.(\\d+)",family_replacement:"Maxthon"},{regex:"(Maxthon|MyIE2|Uzbl|Shiira)",v1_replacement:"0"},{regex:"PLAYSTATION 3.+WebKit",family_replacement:"NetFront NX"},{regex:"PLAYSTATION 3",family_replacement:"NetFront"},{regex:"(PlayStation Portable)",family_replacement:"NetFront"},{regex:"(PlayStation Vita)",family_replacement:"NetFront NX"},{regex:"AppleWebKit.+ (NX)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"NetFront NX"},{regex:"(Nintendo 3DS)",family_replacement:"NetFront NX"},{regex:"(BrowseX) \\((\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(NCSA_Mosaic)/(\\d+)\\.(\\d+)",family_replacement:"NCSA Mosaic"},{regex:"(POLARIS)/(\\d+)\\.(\\d+)",family_replacement:"Polaris"},{regex:"(Embider)/(\\d+)\\.(\\d+)",family_replacement:"Polaris"},{regex:"(BonEcho)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+)?",family_replacement:"Bon Echo"},{regex:"(CFNetwork)(?:/(\\d+)\\.(\\d+)\\.?(\\d+)?)?",family_replacement:"CFNetwork"},{regex:"(iPod).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari"},{regex:"(iPod).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari"},{regex:"(iPod|iPhone|iPad);.*CPU.*OS (\\d+)(?:_\\d+)?_(\\d+).*Mobile",family_replacement:"Mobile Safari"},{regex:"(iPod|iPhone|iPad)",family_replacement:"Mobile Safari"},{regex:"(AvantGo) (\\d+).(\\d+)"},{regex:"(OneBrowser)/(\\d+).(\\d+)",family_replacement:"ONE Browser"},{regex:"(Avant)",v1_replacement:"1"},{regex:"(QtCarBrowser)",v1_replacement:"1"},{regex:"^(iBrowser/Mini)(\\d+).(\\d+)",family_replacement:"iBrowser Mini"},{regex:"^(iBrowser|iRAPP)/(\\d+).(\\d+)"},{regex:"^(Nokia)",family_replacement:"Nokia Services (WAP) Browser"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)\\.(\\d+)",family_replacement:"Nokia Browser"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"Nokia Browser"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+)",family_replacement:"Nokia Browser"},{regex:"(BrowserNG)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"Nokia Browser"},{regex:"(Series60)/5\\.0",family_replacement:"Nokia Browser",v1_replacement:"7",v2_replacement:"0"},{regex:"(Series60)/(\\d+)\\.(\\d+)",family_replacement:"Nokia OSS Browser"},{regex:"(S40OviBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Ovi Browser"},{regex:"(Nokia)[EN]?(\\d+)"},{regex:"(BB10);",family_replacement:"BlackBerry WebKit"},{regex:"(PlayBook).+RIM Tablet OS (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"BlackBerry WebKit"},{regex:"(Black[bB]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"BlackBerry WebKit"},{regex:"(Black[bB]erry)\\s?(\\d+)",family_replacement:"BlackBerry"},{regex:"(OmniWeb)/v(\\d+)\\.(\\d+)"},{regex:"(Blazer)/(\\d+)\\.(\\d+)",family_replacement:"Palm Blazer"},{regex:"(Pre)/(\\d+)\\.(\\d+)",family_replacement:"Palm Pre"},{regex:"(ELinks)/(\\d+)\\.(\\d+)"},{regex:"(ELinks) \\((\\d+)\\.(\\d+)"},{regex:"(Links) \\((\\d+)\\.(\\d+)"},{regex:"(QtWeb) Internet Browser/(\\d+)\\.(\\d+)"},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",family_replacement:"Amazon Silk"},{regex:"(PhantomJS)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(AppleWebKit)/(\\d+)\\.?(\\d+)?\\+ .* Safari",family_replacement:"WebKit Nightly"},{regex:"(Version)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari/",family_replacement:"Safari"},{regex:"(Safari)/\\d+"},{regex:"(OLPC)/Update(\\d+)\\.(\\d+)"},{regex:"(OLPC)/Update()\\.(\\d+)",v1_replacement:"0"},{regex:"(SEMC\\-Browser)/(\\d+)\\.(\\d+)"},{regex:"(Teleca)",family_replacement:"Teleca Browser"},{regex:"(Phantom)/V(\\d+)\\.(\\d+)",family_replacement:"Phantom Browser"},{regex:"Trident(.*)rv.(\\d+)\\.(\\d+)",family_replacement:"IE"},{regex:"(Espial)/(\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))?"},{regex:"(AppleWebKit)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"AppleMail"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(pre|[ab]\\d+[a-z]*)?"},{regex:"([MS]?IE) (\\d+)\\.(\\d+)",family_replacement:"IE"},{regex:"(python-requests)/(\\d+)\\.(\\d+)",family_replacement:"Python Requests"}],os_parsers:[{regex:"HbbTV/\\d+\\.\\d+\\.\\d+ \\( ;(LG)E ;NetCast 4.0",os_v1_replacement:"2013"},{regex:"HbbTV/\\d+\\.\\d+\\.\\d+ \\( ;(LG)E ;NetCast 3.0",os_v1_replacement:"2012"},{regex:"HbbTV/1.1.1 \\(;;;;;\\) Maple_2011",os_replacement:"Samsung",os_v1_replacement:"2011"},{regex:"HbbTV/\\d+\\.\\d+\\.\\d+ \\(;(Samsung);SmartTV([0-9]{4});.*FXPDEUC",os_v2_replacement:"UE40F7000"},{regex:"HbbTV/\\d+\\.\\d+\\.\\d+ \\(;(Samsung);SmartTV([0-9]{4});.*MST12DEUC",os_v2_replacement:"UE32F4500"},{regex:"HbbTV/1.1.1 \\(; (Philips);.*NETTV/4",os_v1_replacement:"2013"},{regex:"HbbTV/1.1.1 \\(; (Philips);.*NETTV/3",os_v1_replacement:"2012"},{regex:"HbbTV/1.1.1 \\(; (Philips);.*NETTV/2",os_v1_replacement:"2011"},{regex:"HbbTV/\\d+\\.\\d+\\.\\d+.*(firetv)-firefox-plugin (\\d+).(\\d+).(\\d+)",os_replacement:"FireHbbTV"},{regex:"HbbTV/\\d+\\.\\d+\\.\\d+ \\(.*; ?([a-zA-Z]+) ?;.*(201[1-9]).*\\)"},{regex:"(Windows Phone) (?:OS[ /])?(\\d+)\\.(\\d+)"},{regex:"(Android)[ \\-/](\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android) Donut",os_v1_replacement:"1",os_v2_replacement:"2"},{regex:"(Android) Eclair",os_v1_replacement:"2",os_v2_replacement:"1"},{regex:"(Android) Froyo",os_v1_replacement:"2",os_v2_replacement:"2"},{regex:"(Android) Gingerbread",os_v1_replacement:"2",os_v2_replacement:"3"},{regex:"(Android) Honeycomb",os_v1_replacement:"3"},{regex:"^UCWEB.*; (Adr) (\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?;",os_replacement:"Android"},{regex:"^UCWEB.*; (iPad OS|iPh OS) (\\d+)_(\\d+)(?:_(\\d+))?;",os_replacement:"iOS"},{regex:"^UCWEB.*; (wds) (\\d+)\\.(\\d+)(?:\\.(\\d+))?;",os_replacement:"Windows Phone"},{regex:"^(JUC).*; ?U; ?(?:Android)?(\\d+)\\.(\\d+)(?:[\\.\\-]([a-z0-9]+))?",os_replacement:"Android"},{regex:"(Silk-Accelerated=[a-z]{4,5})",os_replacement:"Android"},{regex:"(XBLWP7)",os_replacement:"Windows Phone"},{regex:"(Windows ?Mobile)",os_replacement:"Windows Mobile"},{regex:"(Windows (?:NT 5\\.2|NT 5\\.1))",os_replacement:"Windows XP"},{regex:"(Windows NT 6\\.1)",os_replacement:"Windows 7"},{regex:"(Windows NT 6\\.0)",os_replacement:"Windows Vista"},{regex:"(Win 9x 4\\.90)",os_replacement:"Windows ME"},{regex:"(Windows 98|Windows XP|Windows ME|Windows 95|Windows CE|Windows 7|Windows NT 4\\.0|Windows Vista|Windows 2000|Windows 3.1)"},{regex:"(Windows NT 6\\.2; ARM;)",os_replacement:"Windows RT"},{regex:"(Windows NT 6\\.2)",os_replacement:"Windows 8"},{regex:"(Windows NT 6\\.3; ARM;)",os_replacement:"Windows RT 8.1"},{regex:"(Windows NT 6\\.3)",os_replacement:"Windows 8.1"},{regex:"(Windows NT 5\\.0)",os_replacement:"Windows 2000"},{regex:"(WinNT4.0)",os_replacement:"Windows NT 4.0"},{regex:"(Windows ?CE)",os_replacement:"Windows CE"},{regex:"Win ?(95|98|3.1|NT|ME|2000)",os_replacement:"Windows $1"},{regex:"Win16",os_replacement:"Windows 3.1"},{regex:"Win32",os_replacement:"Windows 95"},{regex:"(Tizen)/(\\d+)\\.(\\d+)"},{regex:"(Mac OS X) (\\d+)[_.](\\d+)(?:[_.](\\d+))?"},{regex:" (Dar)(win)/(9).(\\d+).*\\((?:i386|x86_64|Power Macintosh)\\)",os_replacement:"Mac OS X",os_v1_replacement:"10",os_v2_replacement:"5"},{regex:" (Dar)(win)/(10).(\\d+).*\\((?:i386|x86_64)\\)",os_replacement:"Mac OS X",os_v1_replacement:"10",os_v2_replacement:"6"},{regex:" (Dar)(win)/(11).(\\d+).*\\((?:i386|x86_64)\\)",os_replacement:"Mac OS X",os_v1_replacement:"10",os_v2_replacement:"7"},{regex:" (Dar)(win)/(12).(\\d+).*\\((?:i386|x86_64)\\)",os_replacement:"Mac OS X",os_v1_replacement:"10",os_v2_replacement:"8"},{regex:" (Dar)(win)/(13).(\\d+).*\\((?:i386|x86_64)\\)",os_replacement:"Mac OS X",os_v1_replacement:"10",os_v2_replacement:"9"},{regex:"Mac_PowerPC",os_replacement:"Mac OS"},{regex:"(?:PPC|Intel) (Mac OS X)"},{regex:"(CPU OS|iPhone OS|CPU iPhone) +(\\d+)[_\\.](\\d+)(?:[_\\.](\\d+))?",os_replacement:"iOS"},{regex:"(iPhone|iPad|iPod); Opera",os_replacement:"iOS"},{regex:"(iPhone|iPad|iPod).*Mac OS X.*Version/(\\d+)\\.(\\d+)",os_replacement:"iOS"},{regex:"(AppleTV)/(\\d+)\\.(\\d+)",os_replacement:"ATV OS X"},{regex:"(CFNetwork)/(5)48\\.0\\.3.* Darwin/11\\.0\\.0",os_replacement:"iOS"},{regex:"(CFNetwork)/(5)48\\.(0)\\.4.* Darwin/(1)1\\.0\\.0",os_replacement:"iOS"},{regex:"(CFNetwork)/(5)48\\.(1)\\.4",os_replacement:"iOS"},{regex:"(CFNetwork)/(4)85\\.1(3)\\.9",os_replacement:"iOS"},{regex:"(CFNetwork)/(6)09\\.(1)\\.4",os_replacement:"iOS"},{regex:"(CFNetwork)/(6)(0)9",os_replacement:"iOS"},{regex:"(CFNetwork)/6(7)2\\.(1)\\.13",os_replacement:"iOS"},{regex:"(CFNetwork)/6(7)2\\.(1)\\.(1)4",os_replacement:"iOS"},{regex:"(CF)(Network)/6(7)(2)\\.1\\.15",os_replacement:"iOS",os_v1_replacement:"7",os_v2_replacement:"1"},{regex:"(CFNetwork)/6(7)2\\.(0)\\.(?:2|8)",os_replacement:"iOS"},{regex:"(CFNetwork)/709\\.1",os_replacement:"iOS",os_v1_replacement:"8",os_v2_replacement:"0.b5"},{regex:"CFNetwork/.* Darwin/(9)\\.\\d+",os_replacement:"iOS",os_v1_replacement:"1"},{regex:"CFNetwork/.* Darwin/(10)\\.\\d+",os_replacement:"iOS",os_v1_replacement:"4"},{regex:"CFNetwork/.* Darwin/(11)\\.\\d+",os_replacement:"iOS",os_v1_replacement:"5"},{regex:"CFNetwork/.* Darwin/(13)\\.\\d+",os_replacement:"iOS",os_v1_replacement:"6"},{regex:"CFNetwork/6.* Darwin/(14)\\.\\d+",os_replacement:"iOS",os_v1_replacement:"7"},{regex:"CFNetwork/7.* Darwin/(14)\\.\\d+",os_replacement:"iOS",os_v1_replacement:"8",os_v2_replacement:"0"},{regex:"\\b(iOS[ /]|iPhone(?:/| v|[ _]OS[/,]|; | OS : |\\d,\\d/|\\d,\\d; )|iPad/)(\\d{1,2})[_\\.](\\d{1,2})(?:[_\\.](\\d+))?",os_replacement:"iOS"},{regex:"(CrOS) [a-z0-9_]+ (\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"Chrome OS"},{regex:"([Dd]ebian)",os_replacement:"Debian"},{regex:"(Linux Mint)(?:/(\\d+))?"},{regex:"(Mandriva)(?: Linux)?/(?:[\\d.-]+m[a-z]{2}(\\d+).(\\d))?"},{regex:"(Symbian[Oo][Ss])[/ ](\\d+)\\.(\\d+)",os_replacement:"Symbian OS"},{regex:"(Symbian/3).+NokiaBrowser/7\\.3",os_replacement:"Symbian^3 Anna"},{regex:"(Symbian/3).+NokiaBrowser/7\\.4",os_replacement:"Symbian^3 Belle"},{regex:"(Symbian/3)",os_replacement:"Symbian^3"},{regex:"\\b(Series 60|SymbOS|S60Version|S60V\\d|S60\\b)",os_replacement:"Symbian OS"},{regex:"(MeeGo)"},{regex:"Symbian [Oo][Ss]",os_replacement:"Symbian OS"},{regex:"Series40;",os_replacement:"Nokia Series 40"},{regex:"Series30Plus;",os_replacement:"Nokia Series 30 Plus"},{regex:"(BB10);.+Version/(\\d+)\\.(\\d+)\\.(\\d+)",os_replacement:"BlackBerry OS"},{regex:"(Black[Bb]erry)[0-9a-z]+/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS"},{regex:"(Black[Bb]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS"},{regex:"(RIM Tablet OS) (\\d+)\\.(\\d+)\\.(\\d+)",os_replacement:"BlackBerry Tablet OS"},{regex:"(Play[Bb]ook)",os_replacement:"BlackBerry Tablet OS"},{regex:"(Black[Bb]erry)",os_replacement:"BlackBerry OS"},{regex:"\\((?:Mobile|Tablet);.+Firefox/\\d+\\.\\d+",os_replacement:"Firefox OS"},{regex:"(BREW)[ /](\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(BREW);"},{regex:"(Brew MP|BMP)[ /](\\d+)\\.(\\d+)\\.(\\d+)",os_replacement:"Brew MP"},{regex:"BMP;",os_replacement:"Brew MP"},{regex:"(GoogleTV)(?: (\\d+)\\.(\\d+)(?:\\.(\\d+))?|/[\\da-z]+)"},{regex:"(WebTV)/(\\d+).(\\d+)"},{regex:"(hpw|web)OS/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"webOS"},{regex:"(VRE);"},{regex:"(Fedora|Red Hat|PCLinuxOS|Puppy|Ubuntu|Kindle|Bada|Lubuntu|BackTrack|Slackware|(?:Free|Open|Net|\\b)BSD)[/ ](\\d+)\\.(\\d+)(?:\\.(\\d+)(?:\\.(\\d+))?)?"},{regex:"(Linux)[ /](\\d+)\\.(\\d+)(?:\\.(\\d+))?.*gentoo",os_replacement:"Gentoo"},{regex:"\\((Bada);"},{regex:"(Windows|Android|WeTab|Maemo)"},{regex:"(Ubuntu|Kubuntu|Arch Linux|CentOS|Slackware|Gentoo|openSUSE|SUSE|Red Hat|Fedora|PCLinuxOS|Gentoo|Mageia|(?:Free|Open|Net|\\b)BSD)"},{regex:"(Linux)(?:[ /](\\d+)\\.(\\d+)(?:\\.(\\d+))?)?"},{regex:"SunOS",os_replacement:"Solaris"}],device_parsers:[{regex:"HTC ([A-Z][a-z0-9]+) Build",device_replacement:"HTC $1",device_type:"Mobile"},{regex:"HTC ([A-Z][a-z0-9 ]+) \\d+\\.\\d+\\.\\d+\\.\\d+",device_replacement:"HTC $1",device_type:"Mobile"},{regex:"HTC_Touch_([A-Za-z0-9]+)",device_replacement:"HTC Touch ($1)",device_type:"Mobile"},{regex:"USCCHTC(\\d+)",device_replacement:"HTC $1 (US Cellular)",device_type:"Mobile"},{regex:"Sprint APA(9292)",device_replacement:"HTC $1 (Sprint)",device_type:"Mobile"},{regex:"HTC ([A-Za-z0-9]+ [A-Z])",device_replacement:"HTC $1",device_type:"Mobile"},{regex:"HTC[-_/\\s]([A-Za-z0-9]+)",device_replacement:"HTC $1",device_type:"Mobile"},{regex:"(ADR[A-Za-z0-9]+)",device_replacement:"HTC $1",device_type:"Mobile"},{regex:"(HTC)",device_type:"Mobile"},{regex:"(QtCarBrowser)",device_replacement:"Tesla Model S",device_type:"Tablet"},{regex:"(SamsungSGHi560)",device_replacement:"Samsung SGHi560",device_type:"Mobile"},{regex:"SonyEricsson([A-Za-z0-9]+)/",device_replacement:"Ericsson $1",device_type:"Mobile"},{regex:"PLAYSTATION 3",device_replacement:"PlayStation 3"},{regex:"(PlayStation (:?Portable|Vita))",device_type:"Other"},{regex:"(PlayStation (:?\\d+))",device_type:"Other"},{regex:"(KFOT Build)",device_replacement:"Kindle Fire",device_type:"Tablet"},{regex:"(KFTT Build)",device_replacement:"Kindle Fire HD",device_type:"Tablet"},{regex:"(KFJWI Build)",device_replacement:'Kindle Fire HD 8.9" WiFi',device_type:"Tablet"},{regex:"(KFJWA Build)",device_replacement:'Kindle Fire HD 8.9" 4G',device_type:"Tablet"},{regex:"(KFSOWI Build)",device_replacement:'Kindle Fire HD 7" WiFi',device_type:"Tablet"},{regex:"(KFTHWI Build)",device_replacement:'Kindle Fire HDX 7" WiFi',device_type:"Tablet"},{regex:"(KFTHWA Build)",device_replacement:'Kindle Fire HDX 7" 4G',device_type:"Tablet"},{regex:"(KFAPWI Build)",device_replacement:'Kindle Fire HDX 8.9" WiFi',device_type:"Tablet"},{regex:"(KFAPWA Build)",device_replacement:'Kindle Fire HDX 8.9" 4G',device_type:"Tablet"},{regex:"(Kindle Fire)",device_type:"Tablet"},{regex:"(Kindle)",device_type:"Tablet"},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",device_replacement:"Kindle Fire",device_type:"Tablet"},{regex:"Android[\\- ][\\d]+\\.[\\d]+; [A-Za-z]{2}\\-[A-Za-z]{0,2}; WOWMobile (.+) Build",device_type:"Mobile"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\-update1; [A-Za-z]{2}\\-[A-Za-z]{0,2}; (.+) Build",device_type:"Mobile"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; [A-Za-z]{2}\\-[A-Za-z]{0,2}; (.+) Build",device_type:"Mobile"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+;[A-Za-z]{2}\\-[A-Za-z]{0,2};(.+) Build",device_type:"Mobile"},{regex:"Android[\\- ][\\d]+\\.[\\d]+; [A-Za-z]{2}\\-[A-Za-z]{0,2}; (.+) Build",device_type:"Mobile"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; (.+) Build",device_type:"Mobile"},{regex:"Android[\\- ][\\d]+\\.[\\d]+; (.+) Build",device_type:"Mobile"},{regex:"NokiaN([0-9]+)",device_replacement:"Nokia N$1",device_type:"Mobile"},{regex:"NOKIA([A-Za-z0-9\\v-]+)",device_replacement:"Nokia $1",device_type:"Mobile"},{regex:"Nokia([A-Za-z0-9\\v-]+)",device_replacement:"Nokia $1",device_type:"Mobile"},{regex:"NOKIA ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",device_type:"Mobile"},{regex:"Nokia ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",device_type:"Mobile"},{regex:"Lumia ([A-Za-z0-9\\-]+)",device_replacement:"Lumia $1",device_type:"Mobile"},{regex:"Symbian",device_replacement:"Nokia",device_type:"Mobile"},{regex:"BB10; ([A-Za-z0-9\\- ]+)\\)",device_replacement:"BlackBerry $1",device_type:"Mobile"},{regex:"(PlayBook).+RIM Tablet OS",device_replacement:"BlackBerry Playbook",device_type:"Tablet"},{regex:"Black[Bb]erry ([0-9]+);",device_replacement:"BlackBerry $1",device_type:"Mobile"},{regex:"Black[Bb]erry([0-9]+)",device_replacement:"BlackBerry $1",device_type:"Mobile"},{regex:"Black[Bb]erry;",device_replacement:"BlackBerry",device_type:"Mobile"},{regex:"(Pre)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pre",device_type:"Mobile"},{regex:"(Pixi)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pixi",device_type:"Mobile"},{regex:"(Touch[Pp]ad)/(\\d+)\\.(\\d+)",device_replacement:"HP TouchPad",device_type:"Tablet"},{regex:"HPiPAQ([A-Za-z0-9]+)/(\\d+).(\\d+)",device_replacement:"HP iPAQ $1",device_type:"Mobile"},{regex:"Palm([A-Za-z0-9]+)",device_replacement:"Palm $1",device_type:"Mobile"},{regex:"Treo([A-Za-z0-9]+)",device_replacement:"Palm Treo $1",device_type:"Mobile"},{regex:"webOS.*(P160UNA)/(\\d+).(\\d+)",device_replacement:"HP Veer",device_type:"Mobile"},{regex:"(AppleTV)",device_replacement:"AppleTV",device_type:"Other"},{regex:"AdsBot-Google-Mobile",device_replacement:"Spider",device_type:"Spider"},{regex:"Googlebot-Mobile/(\\d+).(\\d+)",device_replacement:"Spider",device_type:"Spider"},{regex:"Googlebot/\\d+.\\d+",device_replacement:"Spider",device_type:"Spider"},{regex:"NING/(\\d+).(\\d+)",device_replacement:"Spider"},{regex:"MsnBot-Media /(\\d+).(\\d+)",device_replacement:"Spider"},{regex:"(iPad) Simulator;",device_type:"Tablet"},{regex:"(iPad);",device_type:"Tablet"},{regex:"(iPod) touch;",device_type:"Mobile"},{regex:"(iPod);",device_type:"Mobile"},{regex:"(iPhone) Simulator;",device_type:"Mobile"},{regex:"(iPhone);",device_type:"Mobile"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",device_type:"Desktop"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",device_type:"Desktop"},{regex:"ALCATEL-([A-Za-z0-9]+)",device_replacement:"Alcatel $1",device_type:"Mobile"},{regex:"Alcatel-([A-Za-z0-9]+)",device_replacement:"Alcatel $1",device_type:"Mobile"},{regex:"Amoi\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",device_type:"Mobile"},{regex:"AMOI\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",device_type:"Mobile"},{regex:"Asus\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",device_type:"Desktop"},{regex:"ASUS\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",device_type:"Desktop"},{regex:"BIRD\\-([A-Za-z0-9]+)",device_replacement:"Bird $1",device_type:"Mobile"},{regex:"BIRD\\.([A-Za-z0-9]+)",device_replacement:"Bird $1",device_type:"Mobile"},{regex:"BIRD ([A-Za-z0-9]+)",device_replacement:"Bird $1",device_type:"Mobile"},{regex:"Dell ([A-Za-z0-9]+)",device_replacement:"Dell $1",device_type:"Desktop"},{regex:"DoCoMo/2\\.0 ([A-Za-z0-9]+)",device_replacement:"DoCoMo $1",device_type:"Mobile"},{regex:"([A-Za-z0-9]+)_W\\;FOMA",device_replacement:"DoCoMo $1",device_type:"Mobile"},{regex:"([A-Za-z0-9]+)\\;FOMA",device_replacement:"DoCoMo $1",device_type:"Mobile"},{regex:"Huawei([A-Za-z0-9]+)",device_replacement:"Huawei $1",device_type:"Mobile"},{regex:"HUAWEI-([A-Za-z0-9]+)",device_replacement:"Huawei $1",device_type:"Mobile"},{regex:"vodafone([A-Za-z0-9]+)",device_replacement:"Huawei Vodafone $1",device_type:"Mobile"},{regex:"i\\-mate ([A-Za-z0-9]+)",device_replacement:"i-mate $1",device_type:"Mobile"},{regex:"Kyocera\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",device_type:"Mobile"},{regex:"KWC\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",device_type:"Mobile"},{regex:"Lenovo\\-([A-Za-z0-9]+)",device_replacement:"Lenovo $1",device_type:"Desktop"},{regex:"Lenovo_([A-Za-z0-9]+)",device_replacement:"Lenovo $1",device_type:"Desktop"},{regex:"(HbbTV)/[0-9]+\\.[0-9]+\\.[0-9]+",device_type:"Other"},{regex:"LG/([A-Za-z0-9]+)",device_replacement:"LG $1",device_type:"Mobile"},{regex:"LG-LG([A-Za-z0-9]+)",device_replacement:"LG $1",device_type:"Mobile"},{regex:"LGE-LG([A-Za-z0-9]+)",device_replacement:"LG $1",device_type:"Mobile"},{regex:"LGE VX([A-Za-z0-9]+)",device_replacement:"LG $1",device_type:"Mobile"},{regex:"LG ([A-Za-z0-9]+)",device_replacement:"LG $1",device_type:"Mobile"},{regex:"LGE LG\\-AX([A-Za-z0-9]+)",device_replacement:"LG $1",device_type:"Mobile"},{regex:"LG\\-([A-Za-z0-9]+)",device_replacement:"LG $1",device_type:"Mobile"},{regex:"LGE\\-([A-Za-z0-9]+)",device_replacement:"LG $1",device_type:"Mobile"},{regex:"LG([A-Za-z0-9]+)",device_replacement:"LG $1",device_type:"Mobile"},{regex:"(KIN)\\.One (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1",device_type:"Mobile"},{regex:"(KIN)\\.Two (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1",device_type:"Mobile"},{regex:"(Motorola)\\-([A-Za-z0-9]+)",device_type:"Mobile"},{regex:"MOTO\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",device_type:"Mobile"},{regex:"MOT\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",device_type:"Mobile"},{regex:"(Nintendo WiiU)",device_replacement:"Nintendo Wii U",device_type:"Other"},{regex:"Nintendo (DS|3DS|DSi|Wii);",device_replacement:"Nintendo $1",device_type:"Other"},{regex:"Pantech([A-Za-z0-9]+)",device_replacement:"Pantech $1",device_type:"Mobile"},{regex:"Philips([A-Za-z0-9]+)",device_replacement:"Philips $1",device_type:"Desktop"},{regex:"Philips ([A-Za-z0-9]+)",device_replacement:"Philips $1",device_type:"Desktop"},{regex:"SAMSUNG-([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",device_type:"Mobile"},{regex:"SAMSUNG\\; ([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",device_type:"Mobile"},{regex:"Dreamcast",device_replacement:"Sega Dreamcast",device_type:"Other"},{regex:"Softbank/1\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",device_type:"Mobile"},{regex:"Softbank/2\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",device_type:"Mobile"},{regex:"(WebTV)/(\\d+).(\\d+)",device_type:"Other"},{regex:"(bingbot|bot|borg|google(^tv)|yahoo|slurp|msnbot|msrbot|openbot|archiver|netresearch|lycos|scooter|altavista|teoma|gigabot|baiduspider|blitzbot|oegp|charlotte|furlbot|http%20client|polybot|htdig|ichiro|mogimogi|larbin|pompos|scrubby|searchsight|seekbot|semanticdiscovery|silk|snappy|speedy|spider|voila|vortex|voyager|zao|zeal|fast\\-webcrawler|converacrawler|dataparksearch|findlinks|crawler|Netvibes|Sogou Pic Spider|ICC\\-Crawler|Innovazion Crawler|Daumoa|EtaoSpider|A6\\-Indexer|YisouSpider)",device_replacement:"Spider",device_type:"Spider"},{regex:"(XBLWP7)",device_replacement:"Other",device_type:"Mobile"},{regex:"(Windows|Win|Win16|Win32|WinNT4.0)",device_replacement:"Other",device_type:"Desktop"},{regex:"(Mac|Mac OS X|Darwin|Mac_PowerPC|Macintosh)",device_replacement:"Other",device_type:"Desktop"},{regex:"(Opera Tablet)",device_replacement:"Other",device_type:"Tablet"},{regex:"(Opera Mobi|Opera Mobile)",device_replacement:"Other",device_type:"Mobile"},{regex:"(Opera)",device_replacement:"Other",device_type:"Desktop"},{regex:"(hiptop|avantgo|plucker|xiino|blazer|elaine|up.browser|up.link|mmp|smartphone|midp|wap|vodafone|o2|pocket|mobile|pda)",device_replacement:"Generic Smartphone",device_type:"Mobile"},{regex:"^(1207|3gso|4thp|501i|502i|503i|504i|505i|506i|6310|6590|770s|802s|a wa|acer|acs\\-|airn|alav|asus|attw|au\\-m|aur |aus |abac|acoo|aiko|alco|alca|amoi|anex|anny|anyw|aptu|arch|argo|bell|bird|bw\\-n|bw\\-u|beck|benq|bilb|blac|c55/|cdm\\-|chtm|capi|comp|cond|craw|dall|dbte|dc\\-s|dica|ds\\-d|ds12|dait|devi|dmob|doco|dopo|el49|erk0|esl8|ez40|ez60|ez70|ezos|ezze|elai|emul|eric|ezwa|fake|fly\\-|fly_|g\\-mo|g1 u|g560|gf\\-5|grun|gene|go.w|good|grad|hcit|hd\\-m|hd\\-p|hd\\-t|hei\\-|hp i|hpip|hs\\-c|htc |htc\\-|htca|htcg)",device_replacement:"Generic Feature Phone",device_type:"Mobile"},{regex:"^(htcp|htcs|htct|htc_|haie|hita|huaw|hutc|i\\-20|i\\-go|i\\-ma|i230|iac|iac\\-|iac/|ig01|im1k|inno|iris|jata|java|kddi|kgt|kgt/|kpt |kwc\\-|klon|lexi|lg g|lg\\-a|lg\\-b|lg\\-c|lg\\-d|lg\\-f|lg\\-g|lg\\-k|lg\\-l|lg\\-m|lg\\-o|lg\\-p|lg\\-s|lg\\-t|lg\\-u|lg\\-w|lg/k|lg/l|lg/u|lg50|lg54|lge\\-|lge/|lynx|leno|m1\\-w|m3ga|m50/|maui|mc01|mc21|mcca|medi|meri|mio8|mioa|mo01|mo02|mode|modo|mot |mot\\-|mt50|mtp1|mtv |mate|maxo|merc|mits|mobi|motv|mozz|n100|n101|n102|n202|n203|n300|n302|n500|n502|n505|n700|n701|n710|nec\\-|nem\\-|newg|neon)",device_replacement:"Generic Feature Phone",device_type:"Mobile"},{regex:"^(netf|noki|nzph|o2 x|o2\\-x|opwv|owg1|opti|oran|ot\\-s|p800|pand|pg\\-1|pg\\-2|pg\\-3|pg\\-6|pg\\-8|pg\\-c|pg13|phil|pn\\-2|pt\\-g|palm|pana|pire|pock|pose|psio|qa\\-a|qc\\-2|qc\\-3|qc\\-5|qc\\-7|qc07|qc12|qc21|qc32|qc60|qci\\-|qwap|qtek|r380|r600|raks|rim9|rove|s55/|sage|sams|sc01|sch\\-|scp\\-|sdk/|se47|sec\\-|sec0|sec1|semc|sgh\\-|shar|sie\\-|sk\\-0|sl45|slid|smb3|smt5|sp01|sph\\-|spv |spv\\-|sy01|samm|sany|sava|scoo|send|siem|smar|smit|soft|sony|t\\-mo|t218|t250|t600|t610|t618|tcl\\-|tdg\\-|telm|tim\\-|ts70|tsm\\-|tsm3|tsm5|tx\\-9|tagt)",device_replacement:"Generic Feature Phone",device_type:"Mobile"},{regex:"^(talk|teli|topl|tosh|up.b|upg1|utst|v400|v750|veri|vk\\-v|vk40|vk50|vk52|vk53|vm40|vx98|virg|vite|voda|vulc|w3c |w3c\\-|wapj|wapp|wapu|wapm|wig |wapi|wapr|wapv|wapy|wapa|waps|wapt|winc|winw|wonu|x700|xda2|xdag|yas\\-|your|zte\\-|zeto|aste|audi|avan|blaz|brew|brvw|bumb|ccwa|cell|cldc|cmd\\-|dang|eml2|fetc|hipt|http|ibro|idea|ikom|ipaq|jbro|jemu|jigs|keji|kyoc|kyok|libw|m\\-cr|midp|mmef|moto|mwbp|mywa|newt|nok6|o2im|pant|pdxg|play|pluc|port|prox|rozo|sama|seri|smal|symb|treo|upsi|vx52|vx53|vx60|vx61|vx70|vx80|vx81|vx83|vx85|wap\\-|webc|whit|wmlb|xda\\-|xda_)",device_replacement:"Generic Feature Phone",device_type:"Mobile"},{regex:"(Mobile)",device_replacement:"Other",device_type:"Mobile"}]}
},{}]},{},[7])(7)}),function(){var Evented,Finch,debug,func,_,_fn,_fn1,_i,_len,_name,_ref,_ref1,__hasProp={}.hasOwnProperty,__slice=[].slice,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};_=this._||require("underscore"),Evented=this.Evented||require("optimize-evented"),("undefined"!=typeof exports&&null!==exports?exports:this).Finch=Finch=function(){function Finch(adapterOrWindow,config){var e,layerConfig,layerName;config&&(this.isValidConfig(config)||this.finch.emit("error",new Error("Finch: bad configuration",this))),this.adapter=Finch.Utility.isBrowserWindow(adapterOrWindow)?new Finch.Adapters.Browser(adapterOrWindow):adapterOrWindow,this.reset(),this.forcedExperiments={},this.layers=[];for(layerName in config)if(__hasProp.call(config,layerName)){layerConfig=config[layerName];try{this.layers.push(new Finch.Layer(layerName,layerConfig,this))}catch(_error){e=_error,this.finch.emit("error",new Error(""+layerName+" layer: bad configuration"),this)}}debug("initialized"),this.config=config,Evented(this),this.trigger=this.emit}return Finch.prototype.isValidConfig=function(config){return Finch.Utility.isMap(config)},Finch.prototype.run=function(){var layer,_i,_len,_ref;if(null!=this.layers){for(_ref=this.layers,_i=0,_len=_ref.length;_len>_i;_i++)layer=_ref[_i],layer.run();return Finch.Tracking.deliver()}},Finch.prototype.reset=function(){return this.layers=[],this.guards=new Finch.Guards(this)},Finch.prototype.inTreatment=function(options){var experimentName,layer,variantName;if(experimentName=options.experimentName,variantName=options.variantName,this.forcedExperiments[experimentName]){if(!variantName)return!0;if(this.forcedExperiments[experimentName]===variantName)return!0}return layer=this.runningLayerFromExperimentName(experimentName),null==layer?!1:null==variantName?!0:layer.experiment().variantName()===variantName},Finch.prototype.runPreferredExperiments=function(){var layer,_i,_len,_ref,_results;for(_ref=this.layers,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)layer=_ref[_i],_results.push(layer.preferredRun());return _results},Finch.prototype.experiment=function(name,variants){var e,experiment,variantFunc,variantName;if(this.forcedExperiments[name])return this._runForcedExperiment(name,variants);if(this.inTreatment({experimentName:name})){experiment=this.runningExperimentFromExperimentName(name);for(variantName in variants)if(variantFunc=variants[variantName],this.inTreatment({experimentName:name,variantName:variantName}))try{variantFunc()}catch(_error){return e=_error,Finch.Tracking.trackExperimentError(experiment,e),this.emit("error",e,experiment),void 0}return Finch.Tracking.trackExperiment(experiment),this.emit("run",experiment)}},Finch.prototype._runForcedExperiment=function(name,variants){var e,error,experimentForTracking,layerForTracking,variant,variantName;if(variantName=this.forcedExperiments[name],variant=variants[variantName]){layerForTracking=new Finch.Layer("ForcedLayer",{},this);try{experimentForTracking=new Finch.Experiment(name,layerForTracking,{name:name,buckets:"0..999",variants:[variantName]},this)}catch(_error){error=_error,this.finch.emit("error",new Error(""+name+" Experiment: Bad configuration",this))}try{variant()}catch(_error){return e=_error,Finch.Tracking.trackExperimentError(experimentForTracking,e),this.emit("error",e,experimentForTracking),void 0}return Finch.Tracking.trackExperiment(experimentForTracking),this.emit("run",experimentForTracking)}},Finch.prototype.runningLayerFromExperimentName=function(experimentName){return _.detect(this.layers,function(layer){return layer.isCurrentExperiment(experimentName)&&layer.experiment().testMatches()})},Finch.prototype.runningExperimentFromExperimentName=function(experimentName){var _ref;return null!=(_ref=this.runningLayerFromExperimentName(experimentName))?_ref.experiment():void 0},Finch.prototype.forceExperiment=function(experimentName,variantName){return this.forcedExperiments[experimentName]=variantName},Finch.prototype.addGuard=function(guardName,guard,context){return null==context&&(context=null),this.guards.add(guardName,guard,context)},Finch.prototype.getGuard=function(guardName){return this.guards.get(guardName)},Finch.prototype.urlPath=function(){return this.adapter.urlPath()},Finch.prototype.urlSearch=function(){return this.adapter.urlSearch()},Finch.prototype.getCookie=function(){var args,_ref;return args=1<=arguments.length?__slice.call(arguments,0):[],(_ref=this.adapter).getCookie.apply(_ref,args)},Finch.prototype.md5=function(){var args,_ref;return args=1<=arguments.length?__slice.call(arguments,0):[],(_ref=this.adapter).md5.apply(_ref,args)},Finch.prototype.browser=function(){var args,_ref;return args=1<=arguments.length?__slice.call(arguments,0):[],(_ref=this.adapter).browser.apply(_ref,args)},Finch.prototype.pageChannel=function(){var args,_ref;return args=1<=arguments.length?__slice.call(arguments,0):[],(_ref=this.adapter).pageChannel.apply(_ref,args)},Finch.prototype.country=function(){var args,_ref;return args=1<=arguments.length?__slice.call(arguments,0):[],(_ref=this.adapter).country.apply(_ref,args)},Finch.prototype.division=function(){var args,_ref;return args=1<=arguments.length?__slice.call(arguments,0):[],(_ref=this.adapter).division.apply(_ref,args)},Finch.prototype.forcedExperimentSets=function(){return this.adapter.forcedExperimentSets()},Finch}(),Finch._singleton=null,Finch.initialize=function(){var args;return args=1<=arguments.length?__slice.call(arguments,0):[],Finch._singleton=function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Finch,args,function(){}),Finch.layers=Finch._singleton.layers},_ref=Finch.prototype,_fn=function(){var name;return name=_name,Finch[name]=function(){var args;return args=1<=arguments.length?__slice.call(arguments,0):[],Finch._singleton[name].apply(Finch._singleton,args)}};for(_name in _ref)__hasProp.call(_ref,_name)&&(func=_ref[_name],_fn());for(_ref1=["on","off","emit","trigger"],_fn1=function(){var name;return name=_name,Finch[name]=function(){var args;return args=1<=arguments.length?__slice.call(arguments,0):[],Finch._singleton[name].apply(Finch._singleton,args)}},_i=0,_len=_ref1.length;_len>_i;_i++)_name=_ref1[_i],_fn1();Finch.Experiments={},Finch.Experiments.Global={},Finch.Diversions={},Finch.Trackers=[],Finch.Adapters={},Finch.NUMBER_OF_BUCKETS_PER_LAYER=1e3,Finch.VERSION="1.9.0",debug=function(message){return Finch.debug&&null!=("undefined"!=typeof console&&null!==console?console.log:void 0)?console.log("::: finch.js : "+message):void 0},Finch.Adapters.Browser=function(){function Browser(window){this.window=window}return Browser.prototype.urlPath=function(){return this.window.location.pathname},Browser.prototype.urlSearch=function(){return this.window.location.search},Browser.prototype.getCookie=function(key){return Cookie.get(key)},Browser.prototype.md5=function(string){return md5(string)},Browser.prototype.browser=function(){var user,_ref2,_ref3;return user=null!=(_ref2=this.window.OptimizeSuite)?null!=(_ref3=_ref2.TrackingHub)?_ref3.user:void 0:void 0,user?{name:user.browser,version:user.browserVersion}:{name:"UnknownBrowser",version:"0"}},Browser.prototype.pageChannel=function(){var _ref2,_ref3,_ref4,_ref5;return(null!=(_ref2=this.window.OptimizeSuite)?null!=(_ref3=_ref2.TrackingHub)?null!=(_ref4=_ref3.page)?null!=(_ref5=_ref4.metadata)?_ref5.channel:void 0:void 0:void 0:void 0)||null},Browser.prototype.country=function(){var _ref2,_ref3,_ref4,_ref5;return(null!=(_ref2=this.window.OptimizeSuite)?null!=(_ref3=_ref2.TrackingHub)?null!=(_ref4=_ref3.page)?null!=(_ref5=_ref4.metadata)?_ref5.country:void 0:void 0:void 0:void 0)||null},Browser.prototype.division=function(){var _ref2,_ref3,_ref4,_ref5;return(null!=(_ref2=this.window.OptimizeSuite)?null!=(_ref3=_ref2.TrackingHub)?null!=(_ref4=_ref3.page)?null!=(_ref5=_ref4.metadata)?_ref5.division:void 0:void 0:void 0:void 0)||null},Browser.prototype.forcedExperimentSets=function(){var fromQuerystring,matchedSet,out;return null!=this._forcedExperimentSets?this._forcedExperimentSets:(out=this._forcedExperimentSetsFromCookies(),(fromQuerystring=this._forcedExperimentSetFromQuerystring())&&(matchedSet=_(out).detect(function(set){return set.layer===fromQuerystring.layer&&set.experiment===fromQuerystring.experiment}),matchedSet?matchedSet.variant=fromQuerystring.variant:out.unshift(fromQuerystring)),this._forcedExperimentSets=out,this._forcedExperimentSets)},Browser.prototype._cookies=function(){return this.window.document.cookie},Browser.prototype._forcedExperimentSetFromQuerystring=function(){var experimentName,layerName,params,variantName;return params=Finch.Utility.parseQueryString(this.urlSearch()),layerName=params.finch_layer,experimentName=params.finch_experiment,variantName=params.finch_variant,layerName&&experimentName&&variantName?{layer:layerName,experiment:experimentName,variant:variantName}:void 0},Browser.prototype._forcedExperimentSetsFromCookies=function(){var cookie,experiment,key,layer,out,splitCookies,variant;return splitCookies=this._cookies().split(/\s*;\s*/),out=function(){var _j,_len1,_ref2,_ref3,_results;for(_results=[],_j=0,_len1=splitCookies.length;_len1>_j;_j++)cookie=splitCookies[_j],_ref2=cookie.split("="),key=_ref2[0],variant=_ref2[1],key.match(/^.+:.+:Variant$/)?(_ref3=key.split(":"),layer=_ref3[0],experiment=_ref3[1],_results.push({layer:layer,experiment:experiment,variant:variant})):_results.push(void 0);return _results}(),_(out).compact()},Browser}(),Finch.BuiltInGuards=function(){function BuiltInGuards(finch){this.finch=finch,this.excludeLoggedOutUsers=__bind(this.excludeLoggedOutUsers,this),this.inDivision=__bind(this.inDivision,this),this.inCountry=__bind(this.inCountry,this),this.onlyIncludeChannels=__bind(this.onlyIncludeChannels,this),this.excludeChannels=__bind(this.excludeChannels,this),this.onlyIncludeBrowsers=__bind(this.onlyIncludeBrowsers,this),this.excludeBrowsers=__bind(this.excludeBrowsers,this)}return BuiltInGuards.prototype.excludeBrowsers=function(params){var name,version,_ref2,_ref3;return null==params&&(params={}),(null!=(_ref2=params.browsers)?_ref2.length:void 0)?(_ref3=this.finch.browser(),name=_ref3.name,version=_ref3.version,_(params.browsers).all(function(browser){if(browser.name.toLowerCase()!==name.toLowerCase())return!0;switch(browser.comparator){case"equals":return!(parseInt(version,10)===parseInt(browser.version,10));case"lte":return!(parseInt(version,10)<=parseInt(browser.version,10));case"gte":return!(parseInt(version,10)>=parseInt(browser.version,10));default:throw"excludeBrowsers can only handle comparators 'equals', 'gte', 'lte'"}})):!0},BuiltInGuards.prototype.onlyIncludeBrowsers=function(params){var name,version,_ref2,_ref3;return null==params&&(params={}),(null!=(_ref2=params.browsers)?_ref2.length:void 0)?(_ref3=this.finch.browser(),name=_ref3.name,version=_ref3.version,_(params.browsers).detect(function(browser){return browser.name.toLowerCase()===name.toLowerCase()})?_(params.browsers).all(function(browser){if(browser.name.toLowerCase()!==name.toLowerCase())return!0;switch(browser.comparator){case"equals":return parseInt(version,10)===parseInt(browser.version,10);case"lte":return parseInt(version,10)<=parseInt(browser.version,10);case"gte":return parseInt(version,10)>=parseInt(browser.version,10);default:throw"excludeBrowsers can only handle comparators 'equals', 'gte', 'lte'"}}):!1):!1},BuiltInGuards.prototype.excludeChannels=function(params){var channel,_ref2;return null==params&&(params={}),(null!=(_ref2=params.channels)?_ref2.length:void 0)?(channel=this.finch.pageChannel(),channel?_(params.channels).all(function(channelName){return channelName.toLowerCase()!==channel.toLowerCase()}):!0):!0},BuiltInGuards.prototype.onlyIncludeChannels=function(params){var channel,_ref2;return null==params&&(params={}),(null!=(_ref2=params.channels)?_ref2.length:void 0)?(channel=this.finch.pageChannel(),channel?_(params.channels).any(function(channelName){return channelName.toLowerCase()===channel.toLowerCase()}):!1):!1},BuiltInGuards.prototype.inCountry=function(params){var countries,country,_ref2;return null==params&&(params={}),(null!=(_ref2=params.countries)?_ref2.length:void 0)?(countries=function(){var _j,_len1,_ref3,_results;for(_ref3=params.countries,_results=[],_j=0,_len1=_ref3.length;_len1>_j;_j++)country=_ref3[_j],_results.push(country.toLowerCase());return _results}(),country=this.finch.country(),country?-1!==_(countries).indexOf(country.toLowerCase()):!1):!0},BuiltInGuards.prototype.inDivision=function(params){var division,divisions,_ref2;return null==params&&(params={}),(null!=(_ref2=params.divisions)?_ref2.length:void 0)?(divisions=function(){var _j,_len1,_ref3,_results;for(_ref3=params.divisions,_results=[],_j=0,_len1=_ref3.length;_len1>_j;_j++)division=_ref3[_j],_results.push(division.toLowerCase());return _results}(),division=this.finch.division(),division?-1!==_(divisions).indexOf(division.toLowerCase()):!1):!0},BuiltInGuards.prototype.excludeLoggedOutUsers=function(params){return null==params&&(params={}),!!this.finch.getCookie("snickerdoodle")},BuiltInGuards}(),Finch.Diversion=function(){function Diversion(diversionCallback){this.diversionCallback=diversionCallback}return Diversion.prototype.bucket=function(layer){var bucket;if(null==layer)throw"layer is not defined";if(null==this.diversionCallback)throw"no bucketing function defined";if(bucket=this.diversionCallback(layer),null==bucket)return null;if(!this._validBucket(bucket))throw"bucket "+bucket+" out of range";return debug("diversion bucket "+bucket+" for "+(null!=layer?layer.name:void 0)),bucket},Diversion.prototype._validBucket=function(bucket){return bucket>=0&&bucket<=Finch.NUMBER_OF_BUCKETS_PER_LAYER},Diversion}(),Finch.HashCookieDiversion=function(_super){function HashCookieDiversion(){var cookies;cookies=1<=arguments.length?__slice.call(arguments,0):[],this.cookies=cookies,HashCookieDiversion.__super__.constructor.call(this,function(layer){var cookie,cookieName,cookieValue,_j,_len1,_ref2,_ref3,_ref4;if(this.cookies instanceof Array)for(_ref2=this.cookies,_j=0,_len1=_ref2.length;_len1>_j;_j++)cookie=_ref2[_j],("undefined"==typeof cookieValue||null===cookieValue)&&(_ref3=[cookie,layer.finch.getCookie(cookie)],cookieName=_ref3[0],cookieValue=_ref3[1]);else _ref4=[this.cookies,layer.finch.getCookie(this.cookies)],cookieName=_ref4[0],cookieValue=_ref4[1];return null==cookieValue?(debug("no valid cookies"),null):(debug("bucketing with cookie: "+cookieName+"="+cookieValue),this._hash(layer,""+cookieValue+","+layer.name))})}return __extends(HashCookieDiversion,_super),HashCookieDiversion.prototype._hash=function(layer,input){var md5;return md5=layer.finch.md5(input),debug(md5),parseInt(md5.slice(24,32),16)%Finch.NUMBER_OF_BUCKETS_PER_LAYER},HashCookieDiversion}(Finch.Diversion),Finch.Diversions.RandomDiversion=new Finch.Diversion(function(){return Math.floor(Math.random()*Finch.NUMBER_OF_BUCKETS_PER_LAYER)}),Finch.Diversions.CookieDiversion=new Finch.HashCookieDiversion("b"),Finch.Diversions.ConsumerIdDiversion=new Finch.HashCookieDiversion("c"),Finch.Experiment=function(){function Experiment(id,layer,config,finch){var _ref2,_ref3,_ref4;if(this.id=id,this.layer=layer,null==config&&(config={}),this.finch=null!=finch?finch:Finch,!this.isValidConfig(config))throw new Error("bad experiment config");this.name=null!=(_ref2=config.name)?_ref2:"",this.variants=config.variants,this.guards=null!=(_ref3=config.guards)?_ref3:[],this.params=null!=(_ref4=config.params)?_ref4:{},this.buckets=this._parseBucketRange(config.buckets),this.pathPatterns=this._parsePathPatterns(config.path_patterns),debug("loading experiment "+this.name)}return Experiment.prototype.isValidConfig=function(config){return config&&config.variants&&config.buckets&&"string"==typeof config.buckets&&""!==config.buckets&&config.variants.length>0&&_.isArray(config.variants)},Experiment.prototype.run=function(){var _ref2;return this.isDeferred()?(debug("matching experiment "+this.id+" deferred with variant "+this.variantName()),null!=(_ref2=this._deferCallback())?_ref2.call(this):void 0):null!=this.variant()?this.testMatches()?this._execute():debug("GuardFailed on experiment "+this.id):void 0},Experiment.prototype.deferredRun=function(){var variantName;return variantName=this.variantName(),debug("running deferred experiment "+this.id+" with bucket "+variantName),this.testMatches()?this._execute():debug("GuardFailed on experiment "+this.id),Finch.Tracking.deliver()},Experiment.prototype.isPreferred=function(){return!!this.experimentDefinition().runOnInit},Experiment.prototype.needsPreferredTracking=function(){return!!this.experimentDefinition().trackOnInit},Experiment.prototype.isDeferred=function(){return!!this.experimentDefinition().defer},Experiment.prototype.testMatches=function(){return this.pathMatches(this.finch.urlPath())&&this.paramsMatches(this.finch.urlSearch())&&this.guardMatches()},Experiment.prototype.pathMatches=function(path){return null!=path&&0===this.pathPatterns.length?!0:_.any(this.pathPatterns,function(pattern){return pattern.test(path)})},Experiment.prototype.paramsMatches=function(querystring){var queryParams;return queryParams=Finch.Utility.parseQueryString(querystring),_.isEmpty(this.params)?!0:_.all(this.params,function(paramValues,paramName){return null==queryParams[paramName]?!1:_.any(paramValues,function(value){return queryParams[paramName]===value})})},Experiment.prototype.guardMatches=function(){var _this=this;return 0===this.guards.length?!0:_.all(this.guards,function(guard){var e,guardFunc,name,parameters,result,_ref2,_ref3;if(name=guard.name||guard,guardFunc=(null!=(_ref2=_this.experimentDefinition().guards)?_ref2[name]:void 0)||_this.finch.getGuard(name)||(null!=(_ref3=Finch.Experiments.Global.guards)?_ref3[name]:void 0),null==guardFunc)return _this.finch.emit("error",new Error(""+_this.id+" Experiment: "+name+" Guard not defined",_this)),void 0;try{return parameters=guard.parameters||{},result=guardFunc(parameters),result||_this.finch.emit("guarded",_this,name),result}catch(_error){return e=_error,_this.finch.emit("error",e,_this),!1}})},Experiment.prototype.currentVariant=function(bucket){return this.experimentDefinition().variants[this.variantNameForBucket(bucket)]},Experiment.prototype.randomVariant=function(){var variantName;return variantName=this.variants[Math.floor(Math.random()*this.variants.length)],this.experimentDefinition().variants[variantName]},Experiment.prototype.variant=function(){var _ref2;return null!=(_ref2=this.variantCache)?_ref2:this.variantCache=this.experimentDefinition().variants[this.variantName()]},Experiment.prototype.variantName=function(){var _ref2;return null!=(_ref2=this.variantNameCache)?_ref2:this.variantNameCache=this.variantNameForBucket(this.bucket())},Experiment.prototype.variantNameForBucket=function(bucket){return this._forcedVariantName()||this._variantNameByRoundRobin(bucket)},Experiment.prototype._forcedVariantName=function(){var forcedSets,set,_this=this;return forcedSets=this.finch.forcedExperimentSets(),set=_(forcedSets).detect(function(set){return set.layer===_this.layer.name&&set.experiment===_this.name}),set?set.variant:void 0},Experiment.prototype._variantNameByRoundRobin=function(bucket){var variantIndex;return this.buckets.min<=bucket&&bucket<=this.buckets.max?(variantIndex=(bucket-this.buckets.min)%this.variants.length,this.variants[variantIndex]):null},Experiment.prototype.bucket=function(){return this.layer.bucket()},Experiment.prototype.experimentDefinition=function(){var _base,_name1,_ref2;return null!=(_ref2=(_base=Finch.Experiments)[_name1=this.id])?_ref2:_base[_name1]={variants:{}}},Experiment.prototype._execute=function(){var e,variant;try{return variant=this.variant(),null!=variant&&(debug("rendering variant "+this.variantName()),debug(variant),this.isPreferred()&&this.needsPreferredTracking()&&(Finch.Tracking.trackExperiment(this),Finch.Tracking.deliver()),variant()),this.isPreferred()&&this.needsPreferredTracking()||Finch.Tracking.trackExperiment(this),this.finch.emit("run",this)}catch(_error){return e=_error,Finch.Tracking.trackExperimentError(this,e),this.finch.emit("error",e,this)}},Experiment.prototype._deferCallback=function(){return debug("initializing deferred experiment "+this.name),this.experimentDefinition().defer},Experiment.prototype._parseBucketRange=function(range){var buckets;return null==range&&(range="0..999"),buckets=range.split(".."),{min:parseInt(buckets[0],10),max:parseInt(buckets[1],10)}},Experiment.prototype._parsePathPatterns=function(patterns){var patternSource,_j,_len1,_results;if(!(null!=patterns&&patterns.length>0))return[];for(_results=[],_j=0,_len1=patterns.length;_len1>_j;_j++)patternSource=patterns[_j],_results.push(new RegExp("^"+patternSource+"$"));return _results},Experiment}(),Finch.Guards=function(){function Guards(finch){this.customGuards={},this.builtInGuards=new Finch.BuiltInGuards(finch)}return Guards.prototype.add=function(guardName,guard,context){var guardFunc;return null==context&&(context=null),guardFunc=context?function(){return guard.apply(context,arguments)}:guard,this.customGuards[guardName]=guardFunc},Guards.prototype.get=function(name){return this.customGuards[name]||this.builtInGuards[name]},Guards}(),Finch.Layer=function(){function Layer(name,config,finch){var error,exp,experimentConfig,experimentIdentifier,_ref2,_ref3;if(this.name=name,this.finch=null!=finch?finch:Finch,this.preferredRun=__bind(this.preferredRun,this),this.run=__bind(this.run,this),this.bucket=__bind(this.bucket,this),config){if(!this.isValidConfig(config))throw new Error("bad layer config");debug("loading layer "+this.name),this.experiments=[],_ref2=config.experiments;for(experimentIdentifier in _ref2)if(__hasProp.call(_ref2,experimentIdentifier)){experimentConfig=_ref2[experimentIdentifier];try{exp=new Finch.Experiment(experimentIdentifier,this,experimentConfig,this.finch),this.experiments.push(exp)}catch(_error){error=_error,this.finch.emit("error",new Error(""+experimentIdentifier+" Experiment: bad configuration",this))}}null!=config.diversion_type&&(this.diversion=Finch.Diversions[config.diversion_type])}null==(_ref3=this.diversion)&&(this.diversion=Finch.Diversions.RandomDiversion)}return Layer.all=function(){return Finch.layers||[]},Layer.prototype.isValidConfig=function(config){return Finch.Utility.isMap(config)},Layer.prototype.findExperiments=function(selector){var experiment,_j,_len1,_ref2,_results;if(null==selector)return[];for(_ref2=this.experiments,_results=[],_j=0,_len1=_ref2.length;_len1>_j;_j++)experiment=_ref2[_j],selector(experiment)&&_results.push(experiment);return _results},Layer.prototype.experimentsForBucket=function(bucket){return this.findExperiments(function(exp){return exp.buckets.min<=bucket&&bucket<=exp.buckets.max})},Layer.prototype.experiment=function(){return this._getForcedExperiment()||this._getSingleMatchingExperiment()},Layer.prototype.isCurrentExperiment=function(experimentName){var _ref2;return(null!=(_ref2=this.experiment())?_ref2.name:void 0)===experimentName},Layer.prototype.bucket=function(){var _ref2;return null!=(_ref2=this.bucketCache)?_ref2:this.bucketCache=this.diversion.bucket(this)},Layer.prototype.run=function(){var experiment;return experiment=this.experiment(),experiment&&!experiment.isPreferred()?experiment.run():void 0},Layer.prototype.preferredRun=function(){var experiment;return experiment=this.experiment(),experiment&&experiment.isPreferred()?experiment.run():void 0},Layer.prototype._getForcedExperiment=function(){var forcedSets,set,_this=this;return forcedSets=this.finch.forcedExperimentSets(),set=_(forcedSets).detect(function(set){return set.layer===_this.name}),set?_(this.experiments).detect(function(exp){return exp.name===set.experiment}):void 0},Layer.prototype._getSingleMatchingExperiment=function(){var results,_this=this;return null==this.bucket()?null:(results=this.findExperiments(function(exp){var _ref2;return exp.buckets.min<=(_ref2=_this.bucket())&&_ref2<=exp.buckets.max}),1===results.length?results[0]:null)},Layer}(),Finch.ConsoleLoggingTracker={track:function(expSets){return _(expSets).each(function(expSet){var _ref2,_ref3;return console.log("*****************************"),console.log("*** ConsoleLoggingTracker ***"),console.log("*****************************"),console.log("*** layer: "+(null!=(_ref2=expSet.layer)?_ref2.name:void 0)),console.log("*** experiment: "+(null!=(_ref3=expSet.experiment)?_ref3.name:void 0)),console.log("*** variant: "+expSet.variant),null!=expSet.error&&console.log("*** error: "+expSet.error),console.log("*****************************")})}},Finch.PixelTracker={track:function(expSets){var e,experimentSets,trackerData;return Finch.alwaysFirePixel||!_.isEmpty(expSets)?(experimentSets=_.map(expSets,function(expSet){return{layer:expSet.layer.name,experiment:expSet.experiment.id,variant:expSet.variant,error:expSet.error}}),trackerData=Finch.externalData?{experiments:experimentSets,externalData:Finch.externalData}:experimentSets,e=encodeURIComponent(JSON.stringify(trackerData)),this.sendData(e)):void 0},sendData:function(e){var cacheBuster,trackerPath;return cacheBuster=(new Date).getTime(),trackerPath="/analytic/experiment.gif?e="+e+"&src=img&_="+cacheBuster,$("<img />",{"class":"finch-tracking",src:trackerPath,height:1,width:1}).appendTo($("body"))}},Finch.AjaxPixelTracker={track:Finch.PixelTracker.track,sendData:function(e){var trackerPath;return trackerPath="/analytic/experiment.gif?e="+e+"&src=ajax",$.ajax(trackerPath,{cache:!1})}},Finch.Tracking={deliver:function(){var e,tracker,_j,_len1,_ref2;for(_ref2=Finch.Trackers,_j=0,_len1=_ref2.length;_len1>_j;_j++){tracker=_ref2[_j];try{tracker.track(this._translatedExperiments())}catch(_error){e=_error}}return this.flush()},trackExperiment:function(experiment){var _this=this;return this._oncePerExperiment(experiment,function(){return _this.experiments.push(experiment)})},trackExperimentError:function(experiment,error){return this.trackExperiment(experiment),this.experimentErrors[experiment.id]=error},flush:function(){return this.experiments=[],this.experimentErrors={}},reset:function(){return this.flush(),this.trackedExperimentNames=[]},_oncePerExperiment:function(experiment,cb){return this.trackedExperimentNames[experiment.id]?void 0:(cb(),this.trackedExperimentNames[experiment.id]=!0)},_translatedExperiments:function(){var data,error,experiment,_j,_len1,_ref2,_results;for(_ref2=this.experiments,_results=[],_j=0,_len1=_ref2.length;_len1>_j;_j++)experiment=_ref2[_j],data={layer:experiment.layer,experiment:experiment,variant:experiment.variantName()},error=this.experimentErrors[experiment.id],error&&(data.error=error),_results.push(data);return _results}},Finch.Tracking.reset(),Finch.Utility={parseQueryString:function(queryString){var keyPairs,keyVal,params,tuple,_j,_len1,_ref2;for(params={},_ref2=keyPairs=queryString.replace(/\+/g,"%20").split("&"),_j=0,_len1=_ref2.length;_len1>_j;_j++)if(keyVal=_ref2[_j],tuple=/^\??([^=]*)=(.*)/.exec(keyVal))try{params[decodeURIComponent(tuple[1])]=decodeURIComponent(tuple[2])}catch(_error){}return params},isBrowserWindow:function(obj){return null!=obj.location&&null!=obj.document},isMap:function(obj){return _.isObject(obj)&&!_.isFunction(obj)&&!_.isArray(obj)}}}.call(this),function(){var SanityCheck,__slice=[].slice;this.SanityCheck=SanityCheck=function(){function SanityCheck(atts){this.name=atts.name,this.func=atts.func,this.listeners={success:[],failure:[],error:[]}}return SanityCheck.listeners={success:[],failure:[],error:[]},SanityCheck.checks=[],SanityCheck.defaultInterval=1e3,SanityCheck.add=function(name,func){var sc,_this=this;return sc=new SanityCheck({name:name,func:func}),sc.on("success",function(data){return _this.trigger("success",sc,data)}),sc.on("failure",function(data){return _this.trigger("failure",sc,data)}),sc.on("error",function(data){return _this.trigger("error",sc,data)}),this.checks.push(sc),sc},SanityCheck.on=function(name,func){return this.listeners[name].push(func)},SanityCheck.trigger=function(){var args,func,name,_i,_len,_ref,_results;for(name=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],_ref=this.listeners[name]||[],_results=[],_i=0,_len=_ref.length;_len>_i;_i++)func=_ref[_i],_results.push(func.apply(null,args));return _results},SanityCheck.onNextTick=function(func){return setTimeout(func)},SanityCheck.onInterval=function(func,interval){return setInterval(func,interval)},SanityCheck.reset=function(){return this.listeners={success:[],failure:[],error:[]},this.checks=[]},SanityCheck.run=function(){var sc,_i,_len,_ref,_results;for(_ref=this.checks,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)sc=_ref[_i],_results.push(sc.run());return _results},SanityCheck.prototype.on=function(name,func){return this.listeners[name].push(func)},SanityCheck.prototype.trigger=function(){var args,name,_this=this;return name=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],SanityCheck.onNextTick(function(){var func,_i,_len,_ref,_results;for(_ref=_this.listeners[name]||[],_results=[],_i=0,_len=_ref.length;_len>_i;_i++)func=_ref[_i],_results.push(func.apply(null,args));return _results})},SanityCheck.prototype.run=function(){var e;try{return this.func(this)}catch(_error){return e=_error,this.trigger("error",e)}},SanityCheck.prototype.watch=function(selector,interval,cb){var els,finder,_this=this;return cb||(cb=interval,interval=SanityCheck.defaultInterval),els=[],finder=function(){var allEls,e,newEls;try{return allEls=$(selector),newEls=allEls.not(els),els=allEls,newEls.each(function(i,e){var err;try{return cb($(e))}catch(_error){return err=_error,_this.trigger("error",err)}})}catch(_error){return e=_error,_this.trigger("error",e)}},SanityCheck.onInterval(finder,interval)},SanityCheck.prototype.success=function(data){return this.trigger("success",data)},SanityCheck.prototype.fail=function(data){return this.trigger("failure",data)},SanityCheck}()}.call(this),function(){this.Portal=function(target){var WaitForWindowLoad,addListener,listeners,onPostMessage,pastEvents,pluginQueue,portal;return listeners={},pastEvents={},addListener=function(name,func){return null!=target.attachEvent?target.attachEvent("on"+name,func):null!=target.addEventListener?target.addEventListener(name,func,!1):void 0},WaitForWindowLoad=function(){return function(beagle){var onLoad,ready;return ready="complete"===document.readyState,ready||(onLoad=function(){return ready=!0,beagle.flush()},addListener("load",onLoad)),beagle.on("add",function(){return ready?beagle.flush():void 0})}},pluginQueue=new Beagle,pluginQueue.use(WaitForWindowLoad()),pluginQueue.on("flush",function(msgs){var msg,_i,_len,_results;for(_results=[],_i=0,_len=msgs.length;_len>_i;_i++){msg=msgs[_i];try{_results.push(target.postMessage(JSON.stringify(msg.data),"*"))}catch(e){}}return _results}),onPostMessage=function(event){var channel,data,eventData,eventName,func,_base,_base1,_i,_j,_len,_len1,_ref,_ref1,_ref2,_ref3,_ref4,_ref5,_results;try{eventData=JSON.parse(event.data)}catch(err){return}for(channel=eventData.channel,eventName=eventData.name,data=eventData.data,null==(_ref=listeners[channel])&&(listeners[channel]={}),null==(_ref1=pastEvents[channel])&&(pastEvents[channel]={}),null==(_ref2=(_base=pastEvents[channel])["*"])&&(_base["*"]=[]),null==(_ref3=(_base1=pastEvents[channel])[eventName])&&(_base1[eventName]=[]),pastEvents[channel]["*"].push(eventData),pastEvents[channel][eventName].push(eventData),_ref4=listeners[channel]["*"]||[],_i=0,_len=_ref4.length;_len>_i;_i++)func=_ref4[_i],func(eventName,data);for(_ref5=listeners[channel][eventName]||[],_results=[],_j=0,_len1=_ref5.length;_len1>_j;_j++)func=_ref5[_j],_results.push(func(data));
return _results},addListener("message",onPostMessage,!1),portal=function(channel){return{add:function(eventName,data){return null==data&&(data={}),pluginQueue.add("msg",{channel:channel,name:eventName,data:data})},bind:function(eventName,func){var _base,_ref,_ref1;return null==(_ref=listeners[channel])&&(listeners[channel]={}),null==(_ref1=(_base=listeners[channel])[eventName])&&(_base[eventName]=[]),listeners[channel][eventName].push(func)},on:function(eventName,func){return this.bind(eventName,func)},replayAndBind:function(eventName,func){var pastEvent,_i,_len,_ref,_ref1;for(null==(_ref=pastEvents[channel])&&(pastEvents[channel]={}),_ref1=pastEvents[channel][eventName]||[],_i=0,_len=_ref1.length;_len>_i;_i++)pastEvent=_ref1[_i],"*"===eventName?func(pastEvent.name,pastEvent.data):func(pastEvent.data);return this.bind(eventName,func)}}}}}.call(this),function(){var InteractionGoals,add,bind,camelCase,emit,listeners;InteractionGoals={},listeners={"*":[],error:[]},emit=function(name,data){var listener,_i,_j,_len,_len1,_ref,_ref1,_results;for(_ref=listeners["*"],_i=0,_len=_ref.length;_len>_i;_i++)listener=_ref[_i],listener(name,data);for(_ref1=listeners[name]||[],_results=[],_j=0,_len1=_ref1.length;_len1>_j;_j++)listener=_ref1[_j],_results.push(listener(data));return _results},bind=InteractionGoals.on=function(name,fn){return null==listeners[name]&&(listeners[name]=[]),listeners[name].push(fn)},camelCase=function(str){var out,part,parts;for(out="",parts=str.split("-"),out+=parts.shift();part=parts.shift();)out+=part.charAt(0).toUpperCase()+part.slice(1);return out},add=function(type,config){var methodName;return methodName=camelCase(type),InteractionGoals[methodName]=function(_data,TrackingHub){var clickId,data,field,scid,_i,_j,_len,_len1,_ref,_ref1;for(null==_data&&(_data={}),null==TrackingHub&&(TrackingHub=OptimizeSuite.TrackingHub),data={},_ref=config.fields,_i=0,_len=_ref.length;_len>_i;_i++)field=_ref[_i],data[field]=_data[field],null==data[field]&&InteractionGoals.error({message:"Event 'interaction-goal-"+methodName+"' was emitted with bad data. Field '"+field+"' was null."});if(config.optionalFields)for(_ref1=config.optionalFields,_j=0,_len1=_ref1.length;_len1>_j;_j++)field=_ref1[_j],data[field]=_data[field];return data.type=type,data.experiments=TrackingHub.session.get("experiments"),(clickId=_data.clickId||TrackingHub.page.data().parentEventId)&&(data.clickId=clickId),(scid=_data.scid||TrackingHub.user.scid)&&(data.scid=scid),null==config.validate||config.validate(data,type)?emit(type,data):void 0}},add("profile-edit",{fields:["changed","action"],optionalFields:["permalink"]}),add("subscription",{fields:["division","country","channel","consumerId"]}),add("login",{fields:[]}),add("signup",{fields:[]}),add("purchase",{fields:["permalink","value","division","country","channel","activation","quantity","orderId"],optionalFields:["pledgeId","parentOrderId","orderUuid","parentOrderUuid","dealUuid"],validate:function(data){var ONE_YEAR,id,isValid,orderIds,timestamp,warehouse;isValid=!1,warehouse=new OptimizeSuite.Warehouse("interaction-goals"),orderIds=warehouse.get("orderIds")||{};for(id in orderIds)timestamp=orderIds[id],ONE_YEAR=31536e6,new Date-timestamp>ONE_YEAR&&delete orderIds[id];return null!=orderIds[data.orderId]?(InteractionGoals.error({message:"The interaction-goal-purchase message was called with a duplicate order ID: "+data.orderId}),isValid=!1):(orderIds[data.orderId]=(new Date).getTime(),isValid=!0),warehouse.set("orderIds",orderIds),isValid}}),add("error",{fields:["message"]}),bind("*",function(goalName,data){var name;return name="interaction-goal-"+goalName,OptimizeSuite.TrackingHub.add(name,data)}),null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=InteractionGoals:window.InteractionGoals=InteractionGoals}.call(this),function(){var OptimizeSuite,addTrackingHubListeners,bloodhoundPaused,clearLastEventId,cookieDomainFromHost,deepMerge,domReady,ensureBrowserId,ensureSessionId,getCookie,getLastEventId,getLastPageId,getRandomUUID,initBloodhound,initErrorCatcher,initFinch,initInspectors,initReferral,initSanityCheck,initTrackingHub,isIterableObject,secureStorageConfig,secureStorageNeeded,setCookie,setLastEventId,setLastPageId,suppressErrors,unsetCookie,useParentTracking,withConfigDefaults,_ref,_ref1,_ref2,__slice=[].slice;OptimizeSuite=window.OptimizeSuite={},OptimizeSuite.Evented=window.Evented,window.Evented=null,OptimizeSuite.Warehouse=window.Warehouse,window.Warehouse=null,OptimizeSuite.TrackingHub=window.TrackingHub,OptimizeSuite.BrowserDetect=null!=(_ref=OptimizeSuite.TrackingHub)?_ref.BrowserDetect:void 0,OptimizeSuite.Warehouse=null!=(_ref1=OptimizeSuite.TrackingHub)?_ref1.Warehouse:void 0,window.Beagle=null!=(_ref2=OptimizeSuite.TrackingHub)?_ref2.Beagle:void 0,window.Portal&&(OptimizeSuite.Portal=window.Portal(window),window.Portal=null),OptimizeSuite.SanityCheck=window.SanityCheck,window.SanityCheck=null,OptimizeSuite.InteractionGoals=window.InteractionGoals,window.InteractionGoals=null,OptimizeSuite.Bloodhound=window.Bloodhound,suppressErrors=null,domReady=null,bloodhoundPaused=!1,OptimizeSuite.init=function(config){var sessionId;return OptimizeSuite.BrowserDetect.init(),config=this.config=withConfigDefaults(config),sessionId=config.session.id,suppressErrors=config.suppressErrors,domReady=$||domready,config.errorCatcher&&initErrorCatcher(config.page),config.trackingHub&&(initTrackingHub(config,sessionId),addTrackingHubListeners()),config.finch&&initFinch(config.finch),config.sanityCheck&&initSanityCheck(),config.devMode&&initInspectors(),OptimizeSuite.initBloodhound=function(){return initBloodhound(config,sessionId)},OptimizeSuite.treatAsNewPage=function(url,newConfig){var bhReset,expiration,reinit,seed;return null==newConfig&&(newConfig={}),bhReset=function(){var _ref3;return null!=(_ref3=OptimizeSuite.bloodhound)?_ref3.reset():void 0},useParentTracking()?("undefined"!=typeof parent&&null!==parent&&parent.OptimizeSuite.treatAsNewPage(url,newConfig),reinit=function(){return bhReset()}):(config=deepMerge(config,newConfig),(seed=getCookie(config.session.cookieKey))&&(expiration=config.session.expiry,setCookie(config.session.cookieKey,seed,expiration,config.cookieDomain)),reinit=function(){return config.page.parentEventId=getLastEventId(),config.page.parentPageId=getLastPageId(),config.page.url=encodeURIComponent(url),initTrackingHub(config,sessionId),bhReset()}),setTimeout(reinit,0)},OptimizeSuite.BrowserDetect.browser.match(/Safari/)||OptimizeSuite.TrackingHub.flush(),OptimizeSuite.InteractionGoals.on("error",function(error){if(config.devMode)throw new Error(error.message)})},OptimizeSuite.getQueryString=function(){return window.location.search},OptimizeSuite.getReferrer=function(){return window.document.referrer},useParentTracking=function(){var _ref3,_ref4,_ref5;return window.parent!==window&&null!=("undefined"!=typeof window&&null!==window?null!=(_ref3=window.parent)?null!=(_ref4=_ref3.OptimizeSuite)?null!=(_ref5=_ref4.TrackingHub)?_ref5.page:void 0:void 0:void 0:void 0)},setCookie=function(){var args;return args=1<=arguments.length?__slice.call(arguments,0):[],useParentTracking()?void 0:Cookie.set.apply(Cookie,args)},unsetCookie=function(){var args;return args=1<=arguments.length?__slice.call(arguments,0):[],useParentTracking()?void 0:Cookie.unset.apply(Cookie,args)},getCookie=function(){var args;return args=1<=arguments.length?__slice.call(arguments,0):[],Cookie.get.apply(Cookie,args)},OptimizeSuite.getLastEventId=getLastEventId=function(){return getCookie("bh-last-event-id")},clearLastEventId=function(){return unsetCookie("bh-last-event-id")},setLastEventId=function(id){return setCookie("bh-last-event-id",id,15)},getLastPageId=function(){return getCookie("bh-last-page-id")},setLastPageId=function(id){return setCookie("bh-last-page-id",id,1800)},isIterableObject=function(val){return _.isObject(val)&&!_.isArray(val)&&!_.isFunction(val)},deepMerge=function(obj1,obj2){var key,res,val;res={};for(key in obj1)val=obj1[key],res[key]=isIterableObject(val)&&null!=obj2[key]&&isIterableObject(obj2[key])?deepMerge(val,obj2[key]):null!=obj2[key]?obj2[key]:val;if(isIterableObject(obj2))for(key in obj2)val=obj2[key],null==res[key]&&(res[key]=val);return res},cookieDomainFromHost=function(host){return"."+host.split(".").slice(1).join(".")},withConfigDefaults=function(config){var message,out,uuid,_ref3;return out={sanityCheck:!0,errorCatcher:!0,trackingHub:!0,devMode:!1,suppressErrors:!config.devMode,cookieDomain:cookieDomainFromHost(window.location.host),tracking:{interval:3e3,endpoint:"/tracky",secureStorageEnabled:!1,secureStoragePath:"secure_storage"},referralMap:{utm_source:"source",utm_campaign:"campaign",utm_medium:"medium",utm_content:"content",utm_term:"term",a:"a",cid:"cid"},session:{cookieKey:"s",expiry:1800},page:{parentEventId:getLastEventId(),parentPageId:getLastPageId(),url:encodeURIComponent(window.location.href)},user:{userAgent:window.navigator.userAgent,browser:OptimizeSuite.BrowserDetect.browser||"unknown",browserVersion:OptimizeSuite.BrowserDetect.version||"unknown",os:OptimizeSuite.BrowserDetect.OS||"unknown",device:OptimizeSuite.BrowserDetect.device,deviceType:OptimizeSuite.BrowserDetect.deviceType,consumerId:getCookie("c"),loggedIn:!!getCookie("snickerdoodle"),permalink:getCookie("l"),browserId:getCookie("b"),scid:getCookie("scid"),visit:getCookie("visited")},finch:{trackers:null,debug:!1,alwaysFirePixel:!0,config:null},bloodhound:{}},out=deepMerge(out,config),null!=(null!=(_ref3=out.session)?_ref3.cookieDomain:void 0)&&(out.cookieDomain=out.session.cookieDomain,delete out.session.cookieDomain,out.devMode&&(message="replace config.session.cookieDomain with config.cookieDomain in OptimizeSuite.init",OptimizeSuite.log.deprecation(message))),out.page.suiteVersion=OptimizeSuite.version,uuid=ensureSessionId(out),ensureBrowserId(out,uuid),getCookie("optimize-inspectors")&&(out.devMode=!0,out.suppressErrors=!1),out},initSanityCheck=function(){return OptimizeSuite.SanityCheck.on("failure",function(sc,data){return OptimizeSuite.Portal("sanity-check").add(sc.name,data),OptimizeSuite.TrackingHub.add("sanity-check-failure",_.extend({sanityCheck:sc.name},data))})},initFinch=function(config){var finchPortal;return Finch.debug=config.debug,Finch.alwaysFirePixel=config.alwaysFirePixel,config.trackers&&(Finch.Trackers=config.trackers),finchPortal=OptimizeSuite.Portal("finch"),Finch.initialize(window,config.config),Finch.on("guarded",function(experiment,guardName){return finchPortal.add("guarded",{layer:experiment.layer.name,experiment:experiment.name,guard:guardName})}),Finch.on("run",function(experiment){var experimentNames,experiments;if(finchPortal.add("run",{layer:experiment.layer.name,experiment:experiment.name}),experiments=TrackingHub.session.get("experiments")||[],experimentNames=_.pluck(experiments,"experiment"),-1===_.indexOf(experimentNames,experiment.name)){experiments.push({layer:experiment.layer.name,experiment:experiment.name,variant:experiment.variantName()});try{TrackingHub.session.set("experiments",experiments)}catch(e){}return TrackingHub.add("finch-experiment",{layer:experiment.layer.name,experiment:experiment.name,variant:experiment.variantName(),bucket:experiment.bucket()})}}),Finch.on("error",function(err,experiment){if(TrackingHub.add("finch-experiment",{layer:experiment.layer.name,experiment:experiment.name,variant:experiment.variantName(),error:err.message}),!suppressErrors)throw err}),finchPortal.add("loaded",config.config),Finch.runPreferredExperiments(),domReady(function(){return Finch.run()})},initErrorCatcher=function(pageConfig){return ErrorCatcher.init(),ErrorCatcher.on("error",function(e){var errorData;return errorData=_.clone(e),delete errorData.timestamp,delete errorData.userAgent,errorData.page_type=pageConfig.type,errorData.page_url=pageConfig.url,OptimizeSuite.TrackingHub.add("uncaught-error",errorData)})},initReferral=function(_arg){var assignReferralParams,cookieDomain,domainMatches,getQueryValue,hasReferralParam,isReferred,querystring,referral,referralMap,referrer,referrerHost,_ref3,_ref4;return referralMap=_arg.referralMap,cookieDomain=_arg.cookieDomain,referral=void 0,querystring=OptimizeSuite.getQueryString(),referrer=OptimizeSuite.getReferrer(),domainMatches=function(host){var lengthDiff,thisDomain;return thisDomain=cookieDomain.split("."),""===thisDomain[0]&&(thisDomain=thisDomain.slice(1)),host=host.split("."),host.length<thisDomain.length?!1:(lengthDiff=host.length-thisDomain.length,_.isEqual(thisDomain,host.slice(lengthDiff)))},isReferred=function(referrerHost,currentHost){return hasReferralParam()?!0:referrerHost===currentHost?!1:domainMatches(referrerHost)?!1:!0},getQueryValue=function(str,key){var m;return(m=str.match(new RegExp("[?&]"+key+"=([^&]+)","i")))?m[1]:void 0},assignReferralParams=function(){var key,q,val,_results;_results=[];for(key in referralMap)val=referralMap[key],(q=getQueryValue(querystring,key))?(null==referral&&(referral={}),_results.push(referral[val]=q)):_results.push(void 0);return _results},hasReferralParam=function(){var key,val;for(key in referralMap)if(val=referralMap[key],getQueryValue(querystring,key))return!0;return!1},referrer?(referrerHost=referrer.match(/^https?:\/\/([^\/]+)/)[1],isReferred(referrerHost,window.location.host)&&(assignReferralParams(),null==referral&&(referral={}),null==(_ref3=referral.source)&&(referral.source="general"),referral.url=referrer)):(assignReferralParams(),null==referral&&(referral={}),null==(_ref4=referral.source)&&(referral.source="direct")),referral},secureStorageNeeded=function(){return"http:"===window.location.protocol},secureStorageConfig=function(config){return{type:"secure",url:"https://"+window.location.hostname+"/"+config.tracking.secureStoragePath}},initTrackingHub=function(config,sessionId){var hubData;return useParentTracking()?OptimizeSuite.TrackingHub=parent.OptimizeSuite.TrackingHub:(hubData={seed:sessionId,flushInterval:config.tracking.interval,endpoint:config.tracking.endpoint,session:config.session,page:config.page,user:config.user},config.tracking.secureStorageEnabled&&secureStorageNeeded()&&(hubData.storage=secureStorageConfig(config)),hubData.session.referral=initReferral(config),OptimizeSuite.TrackingHub.init(hubData),clearLastEventId(),setLastPageId(OptimizeSuite.TrackingHub.page.id))},addTrackingHubListeners=function(){return useParentTracking()?void 0:(OptimizeSuite.TrackingHub.on("add",function(msg){return OptimizeSuite.Portal("tracking-hub").add("add",msg)}),OptimizeSuite.TrackingHub.on("flush",function(messages){return OptimizeSuite.TrackingHub.track(messages),OptimizeSuite.Portal("tracking-hub").add("flush",messages)}),OptimizeSuite.TrackingHub.on("error",function(error){if(!suppressErrors)throw error}))},initBloodhound=function(config,sessionId){var bloodhound;return OptimizeSuite.Bloodhound.Helpers.seed=sessionId,bloodhound=OptimizeSuite.bloodhound=new OptimizeSuite.Bloodhound(config.bloodhound),bloodhound.on("event",function(event){var d,data,w,_i,_len,_ref3;for(data={type:"event",event:{id:event.id,type:event.type,widgets:[]}},event.meta&&(data.event.meta=event.meta),_ref3=event.widgets,_i=0,_len=_ref3.length;_len>_i;_i++)w=_ref3[_i],d=w.data(),delete d.content,data.event.widgets.push(d);return"click"===event.type&&setLastEventId(event.id),OptimizeSuite.TrackingHub.add("bloodhound",data)}),bloodhound.on("impression",function(widgets){var data,w,_i,_len;for(data={type:"impression",widgets:[]},_i=0,_len=widgets.length;_len>_i;_i++)w=widgets[_i],data.widgets.push(w.data());return OptimizeSuite.TrackingHub.add("bloodhound",data)}),bloodhound.on("error",function(e){var data;return data={type:"error",error:{message:e.message,stack:e.stack}},OptimizeSuite.TrackingHub.add("bloodhound",data),suppressErrors?void 0:setTimeout(function(){throw new Error(e)})})},initInspectors=function(){var inspectorCss,inspectorJs,prefix;return inspectorJs="/optimize-inspectors/optimize-inspectors-client.js",inspectorCss="/optimize-inspectors/optimize-inspectors-client.css",window.document.write("<script src='"+inspectorJs+"' type='text/javascript'></scri"+("pt><link rel='stylesheet' href='"+inspectorCss+"' />")),prefix="/"===window.location.pathname?"":window.location.pathname,inspectorJs=""+prefix+inspectorJs,inspectorCss=""+prefix+inspectorCss,window.document.write('<script>if(typeof OptimizeInspectors === "undefined") { document.write("<scri" + "pt src=\\"'+inspectorJs+'\\" type=\\"text/javascript\\"></scri" + "pt><link rel=\\"stylesheet\\" href=\\"'+inspectorCss+'\\" />"); }</scr'+"ipt>")},ensureSessionId=function(config){var uuid;return uuid=getCookie(config.session.cookieKey),uuid||(uuid=getRandomUUID(),setCookie(config.session.cookieKey,uuid,config.session.expiry,config.cookieDomain)),config.session.id=uuid},ensureBrowserId=function(config,uuid){return getCookie("b")?void 0:(setCookie("b",uuid,31536e4,config.cookieDomain),config.user.browserId=uuid)},getRandomUUID=function(){var seed;return seed=OptimizeSuite.getRandomHash(),""+seed.slice(0,8)+"-"+seed.slice(8,12)+"-"+seed.slice(12,16)+"-"+seed.slice(16,20)+"-"+seed.slice(20)},OptimizeSuite.getRandomHash=function(){var $window,key;return $window=$(window),key=["",window.history.length,window.location.href,(new Date).getTime(),$window.width(),$window.height(),navigator.userAgent,document.cookie,document.referrer].join(""),md5(key)},OptimizeSuite.log={deprecation:function(message){return null!=("undefined"!=typeof console&&null!==console?console.warn:void 0)?console.warn("Deprecation: "+message):void 0}},OptimizeSuite.bloodhoundWait=function(){return bloodhoundPaused=!0},OptimizeSuite.isBloodhoundPaused=function(){return bloodhoundPaused},"undefined"!=typeof module&&module.exports&&(module.exports=OptimizeSuite)}.call(this),!function(a,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define(b):this[a]=b()}("domready",function(a){function m(a){for(l=1;a=b.shift();)a()}var c,b=[],d=!1,e=document,f=e.documentElement,g=f.doScroll,h="DOMContentLoaded",i="addEventListener",j="onreadystatechange",k="readyState",l=/^loade|c/.test(e[k]);return e[i]&&e[i](h,c=function(){e.removeEventListener(h,c,d),m()},d),g&&e.attachEvent(j,c=function(){/^c/.test(e[k])&&(e.detachEvent(j,c),m())}),a=g?function(c){self!=top?l?c():b.push(c):function(){try{f.doScroll("left")}catch(b){return setTimeout(function(){a(c)},50)}c()}()}:function(a){l?a():b.push(a)}}),OptimizeSuite.version="1.31.1"}(),_.mixin({isBlank:function(obj){return _.isString(obj)?!/\S/.test(obj):_.isEmpty(obj)},escapeRegExp:function(str){return null!=str?String(str).replace(/([-.*+?^=!:${}()|[\]\/\\])/g,"\\$1"):""}}),null!=window.Groupon?window.Groupon:window.Groupon={},_.extend(window.Groupon,{Utils:{},Modules:{},setWindowLocationHref:function(href){return window.location.href=href}}),void function(){var setSiteCookies,TEN_YEARS_IN_SECONDS;TEN_YEARS_IN_SECONDS=31536e4,setSiteCookies=function(cookies,seconds){var cookieDomain;return null==seconds&&(seconds=TEN_YEARS_IN_SECONDS),cookieDomain=setSiteCookies.cookieDomain||(setSiteCookies.cookieDomain=$("head").data("domain")),function(accum$){var key,val;for(key in cookies)val=cookies[key],accum$.push("undefined"!=typeof val&&null!=val?Cookie.set(key,val,seconds,cookieDomain):Cookie.unset(key,cookieDomain));return accum$}.call(this,[])},Groupon.Utils.setSiteCookies=setSiteCookies}.call(this),void function(){var DOI_DISMISS_LIFE_IN_SECONDS;DOI_DISMISS_LIFE_IN_SECONDS=21600,window.SubscribeDrawer=function(){function SubscribeDrawer(param$){var instance$;instance$=this,this.onSubscription=function(){return SubscribeDrawer.prototype.onSubscription.apply(instance$,arguments)},null==param$&&(param$="#subscribe-drawer"),this.el=param$,this.$el=$(this.el),this.initialize(),this.$email=this.$el.find("#email_address"),this.appName=$("head").data("app")}return SubscribeDrawer.prototype.initialize=function(){return this.listen()},SubscribeDrawer.prototype.parseResponse=function(data){var cache$,doiTreatment,emailSubscription,responseText;return responseText=data.responseText,cache$=JSON.parse(responseText),emailSubscription=cache$.emailSubscription,doiTreatment=cache$.doiTreatment,{emailSubscription:emailSubscription,doiTreatment:doiTreatment}},SubscribeDrawer.prototype.reloadPage=function(division){switch(this.appName){case"homepage":return window.location="/?post_subscribe=true";case"pull":if(division!==("undefined"!=typeof Groupon&&null!=Groupon&&null!=Groupon.division?Groupon.division.id:void 0))return window.location="/browse/"+division+"?post_subscribe=true"}},SubscribeDrawer.prototype.handleErrors=function(){var $email,left,revert;return $("#subscribe-drawer-spinner").remove(),$email=this.$email.addClass("error"),revert=function(){return $email.removeClass("error"),$("#subscribe-email-error-icon").remove()},$email.after('<span class="icon-close" id="subscribe-email-error-icon">'),left=$email.position().left,$("#subscribe-email-error-icon").css("left",left+this.$email.width()-8),setTimeout(revert,2500)},SubscribeDrawer.prototype.enableForm=function(){return this.$email.removeAttr("disabled")},SubscribeDrawer.prototype.disableForm=function(){return this.$email.attr("disabled","disabled")},SubscribeDrawer.prototype.onSubscription=function(data,textStatus){var cache$,cache$1,consumerId,division,divisionId,doiTreatment,emailAddress,emailSubscription,scid,setCookies;return this.enableForm(),"success"!==textStatus?this.handleErrors(data.status):(setCookies=Groupon.Utils.setSiteCookies,cache$=this.parseResponse(data),emailSubscription=cache$.emailSubscription,doiTreatment=cache$.doiTreatment,cache$1=emailSubscription,emailAddress=cache$1.emailAddress,consumerId=cache$1.consumerId,division=cache$1.division,scid=cache$1.scid,divisionId=null!=division?division.id:void 0,setCookies({c:consumerId,division:divisionId,subscriber_email:emailAddress}),null!=scid&&setCookies({scid:scid}),"hard"===doiTreatment&&(setCookies({subscription_doi_dismissed:!0},DOI_DISMISS_LIFE_IN_SECONDS),setCookies({optin:emailAddress,optin_reminder:emailAddress+"#"+divisionId})),this.$el.hide(),this.reloadPage(divisionId))},SubscribeDrawer.prototype.getQueryParams=function(query){var area_id,cache$,division_id;return query=Groupon.Utils.unparam(query),division_id=query.division_id,division_id&&(cache$=division_id.split(":"),division_id=cache$[0],area_id=cache$[1],_.extend(query,{division_id:division_id,area_id:area_id})),$.param(query)},SubscribeDrawer.prototype.subscribe=function(data){var complete,enableAreaSubscription;return enableAreaSubscription=$("#enableAreaSubscription").val(),"true"===enableAreaSubscription&&(data=this.getQueryParams(data)),complete=this.onSubscription,$.ajax({type:"POST",url:"/layout/proxy/v2/email_subscriptions",data:data,complete:complete})},SubscribeDrawer.prototype.listen=function(){return this.$el.find("button").on("click",function(this$){return function(event){var btn,left;return btn=this$.$el.find("button"),this$.$email.val()&&(left=btn.position().left,btn.after('<i id="subscribe-drawer-spinner">'),$("#subscribe-drawer-spinner").css("left",left+btn.width()+30)),this$.subscribe(this$.$el.find("form").serialize()),this$.disableForm(),event.preventDefault()}}(this)),this.$el.find("#hide_follow").one("click",function(this$){return function(event){return this$.$el.hide(),Cookie.set("close_subscribe_drawer",!0),event.preventDefault()}}(this))},SubscribeDrawer}()}.call(this),function(){function fonts_js(){return["Symbol","Arial","Courier New","Times New Roman","Georgia","Trebuchet MS","Verdana","Impact","Comic Sans MS","Webdings","Tahoma","Microsoft Sans Serif","Wingdings","Arial Black","Lucida Console","Marlett","Lucida Sans Unicode","Courier","Franklin Gothic Medium","Palatino Linotype","Sylfaen","Estrangelo Edessa","Tunga","Mangal","Raavi","Latha","Gautami","Shruti","MV Boli","Calibri","Cambria","Constantia","Candara","Corbel","Consolas","Cambria Math","Segoe UI","MS Mincho","Wingdings 2","Wingdings 3","Vrinda","Kartika","Century Gothic","Arial Narrow","Garamond","Book Antiqua","Bookman Old Style","MS Reference Sans Serif","MS Reference Specialty","Bookshelf Symbol 7","Monotype Corsiva","Meiryo","Arial Unicode MS","Century","Gabriola","Plantagenet Cherokee","Segoe Print","Segoe Script","Meiryo UI","MT Extra","SimSun","Batang","Gulim","MS PMincho","MS PGothic","MS Gothic","Mongolian Baiti","Microsoft Yi Baiti","PMingLiU","Microsoft Himalaya","SimHei","MingLiU","Segoe UI Light","Simplified Arabic","Cordia New","Miriam Fixed","EucrosiaUPC","Simplified Arabic Fixed","Rod","Angsana New","Narkisim","FrankRuehl","JasmineUPC","Dotum","DotumChe","IrisUPC","FreesiaUPC","GulimChe","LilyUPC","DilleniaUPC","Miriam","MS UI Gothic","Traditional Arabic","Levenim MT","David","KodchiangUPC","Iskoola Pota","SimSun-ExtB","BrowalliaUPC","Euphemia","CordiaUPC","Browallia New","AngsanaUPC","Nyala","NSimSun","Kalinga","GungsuhChe","MingLiU_HKSCS-ExtB","MingLiU_HKSCS","MingLiU-ExtB","PMingLiU-ExtB","BatangChe","Gungsuh","Aharoni","Andalus","Gisha","Microsoft Uighur","MoolBoran","DokChampa","DaunPenh","Microsoft Tai Le","Leelawadee","Malgun Gothic","Microsoft JhengHei","Microsoft YaHei","Arabic Typesetting","Segoe UI Semibold","Segoe UI Symbol","Ebrima","Khmer UI","Lao UI","FangSong","Microsoft New Tai Lue","KaiTi","Microsoft PhagsPa","Kokila","DFKai-SB","Sakkal Majalla","Utsaah","Shonar Bangla","Vani","Vijaya","Aparajita","Mistral","Haettenschweiler","MS Outlook","Lucida Sans","Lucida Handwriting","Lucida Bright","Freestyle Script","Juice ITC","Tempus Sans ITC","Kristen ITC","Stencil","Jokerman","Bell MT","Vivaldi","Cooper Black","Bauhaus 93","Harrington","Matura MT Script Capitals","Baskerville Old Face","Playbill","Modern No. 20","Colonna MT","Onyx","Britannic Bold","Bernard MT Condensed","Footlight MT Light","Papyrus","Wide Latin","Brush Script MT","Lucida Calligraphy","Lucida Fax","Centaur","Broadway","Californian FB","Berlin Sans FB Demi","Berlin Sans FB","Algerian","Old English Text MT","High Tower Text","Niagara Solid","Magneto","Poor Richard","Kunstler Script","Harlow Solid Italic","Viner Hand ITC","Informal Roman","Snap ITC","Bodoni MT Poster Compressed","Niagara Engraved","Showcard Gothic","Ravie","Parchment","Vladimir Script","Chiller","Century Schoolbook","Bradley Hand ITC","Franklin Gothic Book","French Script MT","Pristina","Copperplate Gothic Bold","Copperplate Gothic Light","Curlz MT","Edwardian Script ITC","Engravers MT","Rockwell","Rockwell Extra Bold","Perpetua","Arial Rounded MT Bold","Franklin Gothic Demi","Franklin Gothic Heavy","Franklin Gothic Demi Cond","Franklin Gothic Medium Cond","Gill Sans MT","Lucida Sans Typewriter","Felix Titling","Maiandra GD","Eras Light ITC","Goudy Old Style","Calisto MT","OCR A Extended","Blackadder ITC","Eras Demi ITC","Gloucester MT Extra Condensed","Imprint MT Shadow","Gill Sans Ultra Bold","Tw Cen MT","Perpetua Titling MT","Gigi","Agency FB","Script MT Bold","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Elephant","Castellar","Goudy Stout","Eras Medium ITC","Bodoni MT Condensed","Bodoni MT","Bodoni MT Black","Gill Sans Ultra Bold Condensed","Forte","Eras Bold ITC","Rockwell Condensed","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","Rage Italic","Palace Script MT","System","Terminal","Fixedsys","MS Sans Serif","Small Fonts","MS Serif","Modern","Roman","Script","Courier New CE","Times New Roman CE","Times New Roman Greek","Courier New Baltic","Arial CYR","Arial CE","Times New Roman TUR","Courier New Greek","Arial Baltic","Courier New TUR","Times New Roman CYR","Arial Greek","Arial TUR","Times New Roman Baltic","Courier New CYR","Times New Roman Cyr","Courier New Cyr","Arial Cyr","Calibri Light","Myriad Pro","Hobo Std","Trajan Pro","Minion Pro","Giddyup Std","Adobe Caslon Pro","Blackoak Std","Chaparral Pro","OCR A Std","Birch Std","Adobe Garamond Pro","Tekton Pro","Adobe Caslon Pro Bold","Cooper Std Black","Myriad Pro Cond","Adobe Garamond Pro Bold","Kozuka Mincho Pro EL","Myriad Pro Light","Kozuka Mincho Pro B","Kozuka Mincho Pro L","Kozuka Mincho Pro M","Kozuka Gothic Pro B","Kozuka Gothic Pro R","Kozuka Gothic Pro L","Kozuka Gothic Pro M","Kozuka Gothic Pro H","Kozuka Gothic Pro EL","Poplar Std","Kozuka Mincho Pro R","Kozuka Mincho Pro H","Letter Gothic Std","Brush Script Std","Mesquite Std","Stencil Std","Orator Std","Charlemagne Std","Prestige Elite Std","Rosewood Std Regular","Minion Pro Med","Minion Pro SmBd","Lithos Pro Regular","Tekton Pro Ext","Nueva Std Cond","Tekton Pro Cond","Minion Pro Cond","Arabic Transparent","Adobe Ming Std L","Adobe Song Std L","Adobe Fangsong Std R","Adobe Myungjo Std M","Adobe Kaiti Std R","Adobe Heiti Std R","Kozuka Mincho Pr6N H","Kozuka Gothic Pr6N R","Kozuka Gothic Pr6N M","Kozuka Mincho Pr6N EL","Kozuka Mincho Pr6N L","Kozuka Mincho Pr6N R","Kozuka Mincho Pr6N M","Kozuka Gothic Pr6N L","Kozuka Mincho Pr6N B","Kozuka Gothic Pr6N H","Kozuka Gothic Pr6N B","Kozuka Gothic Pr6N EL","Adobe Fan Heiti Std B","Adobe Gothic Std B","Adobe Hebrew","Adobe Arabic","Swis721 BT","Swis721 Lt BT","Swis721 Blk BT","OCR-A BT","OCR-B 10 BT","Eccentric Std","Bell Gothic Std Light","Bell Gothic Std Black","WP CyrillicA","WP CyrillicB","Futura Md BT","Nueva Std","Adobe Devanagari","Myriad Hebrew","Myriad Arabic","Freehand521 BT","Adobe Naskh Medium","Chaparral Pro Light","Swis721 Hv BT","WP Greek Courier","WP Greek Century","DejaVu Sans","WP Greek Helve","WP MultinationalA Roman","WP MultinationalB Courier","WP MultinationalB Roman","DejaVu Sans Mono","WP MultinationalA Helve","WP MultinationalB Helve","WP MultinationalA Courier","DejaVu Serif","OpenSymbol","Swis721 Cn BT","DejaVu Sans Light","Swis721 LtEx BT","Swis721 BlkCn BT","DejaVu Sans Condensed","DejaVu Serif Condensed","WP ArabicScript Sihafa","Arno Pro","WP Arabic Sihafa","WP Hebrew David","Arno Pro Light Display","Arno Pro Display","Arno Pro Smbd Caption","Arno Pro Caption","Arno Pro Subhead","Arno Pro SmText","Arno Pro Smbd Display","Arno Pro Smbd SmText","Arno Pro Smbd","Arno Pro Smbd Subhead","Bickham Script Pro Regular","Bickham Script Pro Semibold","Garamond Premr Pro","Garamond Premr Pro Smbd","Gentium Book Basic","Gentium Basic","GothicI","GothicE","BankGothic Lt BT","BankGothic Md BT","Bickham Script Two","ISOCTEUR","ISOCPEUR","Dutch801 Rm BT","CommercialScript BT","ScriptS","TeamViewer8","Swis721 BlkEx BT","Swis721 BdCnOul BT","Monotxt","GothicG","Swis721 Ex BT","Swis721 LtCn BT","RomanD","Dutch801 XBd BT","Txt","Vineta BT","GreekS","Monospac821 BT","ScriptC","CountryBlueprint","Complex","Swis721 BlkOul BT","GreekC","Simplex","ISOCP2","Technic","ISOCP3","Swis721 BdOul BT","ISOCP","TechnicBold","RomanS","WST_Engl","TechnicLite","RomanT","Romantic","Symeteo","WST_Fren","CityBlueprint","ISOCT2","Symath","ISOCT3","GDT","Syastro","Symap","ISOCT","RomanC","ItalicC","SansSerif","EuroRoman","Symusic","ItalicT","CommercialPi BT","Proxy 1","Proxy 2","WST_Czec","Proxy 6","Proxy 5","Proxy 4","Proxy 3","PanRoman","Italic","Stylus BT","Proxy 9","Proxy 8","WST_Germ","Proxy 7","SuperFrench","UniversalMath1 BT","WST_Ital","WST_Swed","WST_Span","AmdtSymbols","AMGDT","AcadEref","AIGDT","ZWAdobeF","Bickham Script One","Microsoft JhengHei UI","Amadeus","Microsoft YaHei UI","Copyist","Gadugi","Nirmala UI","Segoe UI Semilight","Ariston","Heather Script One","Carolina","Myriad Web Pro","Alexandra Script","Square721 BT","AnastasiaScript","GENISO","Calligraph","Ouverture script","Decor","Helvetica","Annabelle","Clarendon Lt BT","Clarendon Blk BT","Liberation Sans Narrow","Clarendon BT","Ceremonious Two","Eurostile"]}/**
     * jQuery Spotlight
     *
     * Project Page: http://dev7studios.com/portfolio/jquery-spotlight/
     * Copyright (c) 2009 Gilbert Pellegrom, http://www.gilbertpellegrom.co.uk
     * Licensed under the GPL license (http://www.gnu.org/licenses/gpl-3.0.html)
     * Version 1.0 (12/06/2009)
     */
!function($){$.fn.spotlight=function(options){settings=$.extend({},{opacity:.5,speed:400,color:"#333",animate:!0,easing:"",exitEvent:"click",onShow:function(){},onHide:function(){}},options);var preIE9=-1!=navigator.appVersion.indexOf("MSIE 6")||-1!=navigator.appVersion.indexOf("MSIE 7")||-1!=navigator.appVersion.indexOf("MSIE 8"),chrome=-1!=navigator.appVersion.indexOf("Chrome");if(!jQuery.support.opacity&&!preIE9)return!1;if((preIE9||chrome)&&(settings.animate=!1),0==$("#spotlight").size()){$("body").append('<div id="spotlight"></div>');var element=$(this),spotlight=$("#spotlight");spotlight.css({position:"fixed",background:settings.color,opacity:"0",filter:"alpha(opacity=0)",top:"0px",left:"0px",height:"100%",width:"100%","z-index":"9998"});var currentPos=element.css("position");"static"==currentPos?element.css({position:"relative","z-index":"9999"}):element.css("z-index","9999"),settings.animate?spotlight.animate({opacity:settings.opacity},settings.speed,settings.easing,function(){settings.onShow.call(this)}):(spotlight.css("opacity",settings.opacity),preIE9&&spotlight.css("filter","alpha(opacity="+100*settings.opacity+")"),settings.onShow.call(this)),spotlight.on(settings.exitEvent,function(){settings.animate?spotlight.animate({opacity:0},settings.speed,settings.easing,function(){"static"==currentPos&&element.css("position","static"),element.css("z-index","1"),$(this).remove(),settings.onHide.call(this)}):(spotlight.css("opacity","0"),"static"==currentPos&&element.css("position","static"),element.css("z-index","1"),$(this).remove(),settings.onHide.call(this))}),this.hideSpotlight=function(){spotlight.trigger(settings.exitEvent)}}return this}}(jQuery);/**
     * JavaScript code to detect available availability of a
     * particular font in a browser using JavaScript and CSS.
     *
     * Author : Lalit Patel
     * Website: http://www.lalit.org/lab/javascript-css-font-detect/
     * License: Apache Software License 2.0
     *          http://www.apache.org/licenses/LICENSE-2.0
     * Version: 0.15 (21 Sep 2009)
     *          Changed comparision font to default from sans-default-default,
     *          as in FF3.0 font of child element didn't fallback
     *          to parent element if the font is missing.
     * Version: 0.2 (04 Mar 2012)
     *          Comparing font against all the 3 generic font families ie,
     *          'monospace', 'sans-serif' and 'sans'. If it doesn't match all 3
     *          then that font is 100% not available in the system
     * Version: 0.3 (24 Mar 2012)
     *          Replaced sans with serif in the list of baseFonts
     */
var Detector=function(numBaseFonts){function detect(font){var detected=!1;for(var index in baseFonts){s.style.fontFamily=font+","+baseFonts[index],h.appendChild(s);var matched=s.offsetWidth!=defaultWidth[baseFonts[index]]||s.offsetHeight!=defaultHeight[baseFonts[index]];h.removeChild(s),detected=detected||matched}return detected}numBaseFonts="undefined"!=typeof numBaseFonts?numBaseFonts:3;var baseFonts=["monospace","sans-serif","serif"];numBaseFonts>0&&4>numBaseFonts&&(baseFonts=baseFonts.slice(0,numBaseFonts));var testString="mmmmmmmmmmlli",testSize="72px",h=document.getElementsByTagName("body")[0],s=document.createElement("span");s.style.fontSize=testSize,s.innerHTML=testString;var defaultWidth={},defaultHeight={};for(var index in baseFonts)s.style.fontFamily=baseFonts[index],h.appendChild(s),defaultWidth[baseFonts[index]]=s.offsetWidth,defaultHeight[baseFonts[index]]=s.offsetHeight,h.removeChild(s);this.detect=detect};!function(name,context,definition){"undefined"!=typeof module&&module.exports?module.exports=definition():"function"==typeof define&&define.amd?define(definition):context[name]=definition()}("Fingerprint",this,function(){"use strict";var Fingerprint=function(options){var nativeForEach,nativeMap;nativeForEach=Array.prototype.forEach,nativeMap=Array.prototype.map,this.each=function(obj,iterator,context){if(null!==obj)if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,l=obj.length;l>i;i++)if(iterator.call(context,obj[i],i,obj)==={})return}else for(var key in obj)if(obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj)==={})return},this.map=function(obj,iterator,context){var results=[];return null==obj?results:nativeMap&&obj.map===nativeMap?obj.map(iterator,context):(this.each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)}),results)},"object"==typeof options?(this.hasher=options.hasher,this.screen_resolution=options.screen_resolution,this.canvas=options.canvas,this.ie_activex=options.ie_activex,this.css_fonts=options.css_fonts):"function"==typeof options&&(this.hasher=options)};return Fingerprint.prototype={get:function(){var keys=[];if(keys.push(navigator.userAgent),keys.push(navigator.language),keys.push(screen.colorDepth),this.screen_resolution){var resolution=this.getScreenResolution();"undefined"!=typeof resolution&&keys.push(this.getScreenResolution().join("x"))}return keys.push((new Date).getTimezoneOffset()),keys.push(this.hasSessionStorage()),keys.push(this.hasLocalStorage()),keys.push(!!window.indexedDB),document.body?keys.push(typeof document.body.addBehavior):keys.push("undefined"),keys.push(typeof window.openDatabase),keys.push(navigator.cpuClass),keys.push(navigator.platform),keys.push(navigator.doNotTrack),keys.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&keys.push(this.getCanvasFingerprint()),this.css_fonts&&keys.push(this.getCSSFontDetection(this.css_fonts)),this.hasher?this.hasher(keys.join("###"),31):this.murmurhash3_32_gc(keys.join("###"),31)},murmurhash3_32_gc:function(key,seed){var remainder,bytes,h1,h1b,c1,c2,k1,i;for(remainder=3&key.length,bytes=key.length-remainder,h1=seed,c1=3432918353,c2=461845907,i=0;bytes>i;)k1=255&key.charCodeAt(i)|(255&key.charCodeAt(++i))<<8|(255&key.charCodeAt(++i))<<16|(255&key.charCodeAt(++i))<<24,++i,k1=4294967295&(65535&k1)*c1+((65535&(k1>>>16)*c1)<<16),k1=k1<<15|k1>>>17,k1=4294967295&(65535&k1)*c2+((65535&(k1>>>16)*c2)<<16),h1^=k1,h1=h1<<13|h1>>>19,h1b=4294967295&5*(65535&h1)+((65535&5*(h1>>>16))<<16),h1=(65535&h1b)+27492+((65535&(h1b>>>16)+58964)<<16);switch(k1=0,remainder){case 3:k1^=(255&key.charCodeAt(i+2))<<16;case 2:k1^=(255&key.charCodeAt(i+1))<<8;case 1:k1^=255&key.charCodeAt(i),k1=4294967295&(65535&k1)*c1+((65535&(k1>>>16)*c1)<<16),k1=k1<<15|k1>>>17,k1=4294967295&(65535&k1)*c2+((65535&(k1>>>16)*c2)<<16),h1^=k1}return h1^=key.length,h1^=h1>>>16,h1=4294967295&2246822507*(65535&h1)+((65535&2246822507*(h1>>>16))<<16),h1^=h1>>>13,h1=4294967295&3266489909*(65535&h1)+((65535&3266489909*(h1>>>16))<<16),h1^=h1>>>16,h1>>>0},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},isCanvasSupported:function(){var elem=document.createElement("canvas");return!(!elem.getContext||!elem.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName?!0:"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?!0:!1},getPluginsString:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,function(p){var mimeTypes=this.map(p,function(mt){return[mt.type,mt.suffixes].join("~")}).join(",");return[p.name,p.description,mimeTypes].join("::")},this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject){var ieActiveXHandler=new IEActiveXHandler;return ieActiveXHandler.detect()}return""},getScreenResolution:function(){return[screen.height,screen.width]},getCanvasFingerprint:function(){var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),txt="http://valve.github.io";return ctx.textBaseline="top",ctx.font="14px 'Arial'",ctx.textBaseline="alphabetic",ctx.fillStyle="#f60",ctx.fillRect(125,1,62,20),ctx.fillStyle="#069",ctx.fillText(txt,2,15),ctx.fillStyle="rgba(102, 204, 0, 0.7)",ctx.fillText(txt,4,17),canvas.toDataURL()},getCSSFontDetection:function(numBaseFonts){var detector=new Detector(numBaseFonts),fontList=new fonts_js;return this.map(fontList,function(fontName){return detector.detect(fontName)?fontName:""}).join(";")}},Fingerprint}),void function(){function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}var SubscriptionsUI;SubscriptionsUI=function(){function SubscriptionsUI(){var now;if(now=new Date,constructionTime=now.getTime(),subscriptionsUI_defaultVariants="undefined"!=typeof subscriptionsUI_country&&null!=subscriptionsUI_country&&"US"===subscriptionsUI_country?{common:"subscription_fullScreen_9",serp:"subscription_modalDialog_8_showClose_showSocial",seo:"subscription_modalDialog_8_showContinue_showSocial","homepage-seo":"subscription_fullScreen_9_showContinue","homepage-sem":"subscription_fullScreen_9","sem-rtc":"subscription_modalDialog_8_showClose","user-init":"subscription_modalDialog_8_showClose_showSocial","non-modal":"subscription_banner_0","expired-deal":"subscription_modalDialog_8_showClose"}:{common:"subscription_modalDialog_4",serp:"subscription_modalDialog_4",seo:"subscription_modalDialog_4","homepage-seo":"subscription_modalDialog_4","homepage-sem":"subscription_modalDialog_4","sem-rtc":"subscription_modalDialog_4_showClose","user-init":"subscription_modalDialog_4_showClose","non-modal":"subscription_banner_0","expired-deal":"subscription_banner_0"},this.version="2.4.1",isIE8=-1!==navigator.appVersion.indexOf("MSIE 8"),null!=("undefined"!=typeof Groupon&&null!=Groupon&&null!=Groupon.division?Groupon.division.id:void 0)?currentDivision=Groupon.division.id:null!=Cookie.get("division")&&(currentDivision=Cookie.get("division")),appName=this._get_app_name(),SubscriptionsUI._should_show_doi())return SubscriptionsUI._get_doi_modal_and_show("#333"),void 0;if(window._useSDS)return now=new Date,"undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite&&null!=OptimizeSuite.TrackingHub&&"function"==typeof OptimizeSuite.TrackingHub.add&&OptimizeSuite.TrackingHub.add("subscriptionUIdelegated",{goalType:"subscription",_useSDS:window._useSDS,totalLatency:now.getTime()-constructionTime}),void 0;if(this._setup_variant_map(),this._intializeSEMParams(),isSubForced=window.location.href.indexOf("subs_force=")>-1,isSubForced&&null!=("undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite?OptimizeSuite.TrackingHub:void 0)&&OptimizeSuite.TrackingHub.add("subscriptionUIForced",{goalType:"subscription"}),ajaxCallCount++,!(ajaxCallCount>1)){if(appName=this._get_app_name(),this._should_not_show_subsUI())return noSubscriptionsUI=!0,void 0;overrideVariant=this._get_subs_variant(),null==overrideVariant&&(appExperimentNames=this._get_experiment_names()),$("#global-container").hide()}}var ajaxCallCount,alt_focus_input_id,appExperimentNames,appName,CITY_GUIDE_PAGE_TYPES,COMMON_EXPERIMENT,COMMON_INTL_EXPERIMENT,COMMON_MOBILE_DISPLAY_EXPERIMENT,constructionTime,container_id,currentDivision,dlg_id,DOI_DISMISS_LIFE_IN_SECONDS,experimentType,EXPIRED_DEAL_EXPERIMENT,EXPIRED_DEAL_INTL_EXPERIMENT,expiredDealVariantMap,focus_input_id,FP_EXPERIMENT,hideModal,HP_SEM_EXPERIMENT,HP_SEM_INTL_EXPERIMENT,HP_SEO_EXPERIMENT,HP_SEO_INTL_EXPERIMENT,isIE8,isSubForced,isTTT,isTXN_TPS,loadCompleteTime,loadStartTime,MAX_VISITS_TO_SHOW,MIN_VISITS_TO_SHOW,modalShown,modalVariantMap,needToShowMainContent,NON_MODAL_EXPANDED_VIEWS,NON_MODAL_EXPERIMENT,non_modal_id,NON_MODAL_INTL_EXPERIMENT,nonModalVariantMap,noSubscriptionsUI,ONE_HOUR_IN_SECONDS,overrideVariant,SEM_RTC_EXPERIMENT,SEM_RTC_INTL_EXPERIMENT,SEO_EXPERIMENT,SEO_INTL_EXPERIMENT,SEO_MOBILE_DISPLAY_EXPERIMENT,SERP_REFERER_EXPERIMENT,SERP_REFERER_INTL_EXPERIMENT,SERP_REFERERS,subscriptionsUI_commonDivisionExperimentOverrides,subscriptionsUI_defaultVariants,subscriptionsUI_semHomepageDivisionExperimentOverrides,subscriptionsUI_seoDivisionExperimentOverrides,subscriptionsUI_seoHomepageDivisionExperimentOverrides,subscriptionsUI_serpDivisionExperimentOverrides,TEN_YEARS_IN_SECONDS,TWENTYFOUR_HOURS_LIFE_IN_SECONDS,USER_AGENTS,USER_INITIATED_EXPERIMENT,USER_INITIATED_INTL_EXPERIMENT,userInitiatedVariantMap,variantRun;return container_id="#email_zip",dlg_id="#sub_dlg",non_modal_id="#sub_non_modal",focus_input_id="#email_id",alt_focus_input_id="#email",TEN_YEARS_IN_SECONDS=31536e4,DOI_DISMISS_LIFE_IN_SECONDS=3600,TWENTYFOUR_HOURS_LIFE_IN_SECONDS=86400,ONE_HOUR_IN_SECONDS=3600,MIN_VISITS_TO_SHOW=3,MAX_VISITS_TO_SHOW=2,NON_MODAL_EXPANDED_VIEWS=2,COMMON_EXPERIMENT="subscription-flow-common-experiment",SERP_REFERER_EXPERIMENT="subscription-flow-serp-experiment",NON_MODAL_EXPERIMENT="subscription-flow-banner-experiment",SEO_EXPERIMENT="itier-seo-pages-subscription-experiment",HP_SEO_EXPERIMENT="subscription-seo-homepage-experiment",HP_SEM_EXPERIMENT="subscription-sem-homepage-experiment",USER_INITIATED_EXPERIMENT="subscription_flow_user_init_experiment",EXPIRED_DEAL_EXPERIMENT="subscription-flow-expired-deal-experiment",COMMON_INTL_EXPERIMENT="subscription-flow-common-experiment-intl",SERP_REFERER_INTL_EXPERIMENT="subscription-flow-serp-experiment-intl",NON_MODAL_INTL_EXPERIMENT="subscription-flow-banner-experiment-intl",SEO_INTL_EXPERIMENT="itier-seo-pages-subscription-experiment-intl",HP_SEO_INTL_EXPERIMENT="subscription-seo-homepage-experiment-intl",HP_SEM_INTL_EXPERIMENT="subscription-sem-homepage-experiment-intl",USER_INITIATED_INTL_EXPERIMENT="subscription-flow-user-init-experiment-intl",EXPIRED_DEAL_INTL_EXPERIMENT="subscription-flow-expired-deal-experiment-intl",SEM_RTC_EXPERIMENT="subscription-flow-rtc-experiment",SEM_RTC_INTL_EXPERIMENT="subscription-flow-rtc-experiment-intl",COMMON_MOBILE_DISPLAY_EXPERIMENT="subscription-flow-mobile-show-experiment",SEO_MOBILE_DISPLAY_EXPERIMENT="subscription-flow-mobile-seo-show-experiment",FP_EXPERIMENT="subscription-fp-experiment",CITY_GUIDE_PAGE_TYPES=["city_guide/articles","city_guide/vertical_home_page"],needToShowMainContent=!0,overrideVariant=null,modalVariantMap=null,nonModalVariantMap=null,expiredDealVariantMap=null,userInitiatedVariantMap=null,appExperimentNames=null,ajaxCallCount=0,noSubscriptionsUI=!1,modalShown=!1,variantRun=!1,appName=null,hideModal=!0,currentDivision="chicago",isSubForced=!1,isIE8=!1,isTXN_TPS=!1,isTTT=!1,experimentType="",subscriptionsUI_defaultVariants=[],constructionTime=0,loadStartTime=0,loadCompleteTime=0,subscriptionsUI_commonDivisionExperimentOverrides={atlanta:"subscription-flow-common-division-override-experiment",buffalo:"subscription-flow-common-division-override-experiment",detroit:"subscription-flow-common-division-override-experiment","minneapolis-stpaul":"subscription-flow-common-division-override-experiment",nashville:"subscription-flow-common-division-override-experiment","san-francisco":"subscription-flow-common-division-override-experiment",columbus:"subscription-flow-common-division-override-experiment",denver:"subscription-flow-common-division-override-experiment","grand-rapids":"subscription-flow-common-division-override-experiment",houston:"subscription-flow-common-division-override-experiment","orange-county":"subscription-flow-common-division-override-experiment",phoenix:"subscription-flow-common-division-override-experiment",portland:"subscription-flow-common-division-override-experiment",providence:"subscription-flow-common-division-override-experiment",rochester:"subscription-flow-common-division-override-experiment",seattle:"subscription-flow-common-division-override-experiment","tampa-bay-area":"subscription-flow-common-division-override-experiment"},subscriptionsUI_serpDivisionExperimentOverrides={atlanta:"subscription-flow-serp-division-override-experiment",buffalo:"subscription-flow-serp-division-override-experiment",detroit:"subscription-flow-serp-division-override-experiment","minneapolis-stpaul":"subscription-flow-serp-division-override-experiment",nashville:"subscription-flow-serp-division-override-experiment","san-francisco":"subscription-flow-serp-division-override-experiment",columbus:"subscription-flow-serp-division-override-experiment",denver:"subscription-flow-serp-division-override-experiment","grand-rapids":"subscription-flow-serp-division-override-experiment",houston:"subscription-flow-serp-division-override-experiment","orange-county":"subscription-flow-serp-division-override-experiment",phoenix:"subscription-flow-serp-division-override-experiment",portland:"subscription-flow-serp-division-override-experiment",providence:"subscription-flow-serp-division-override-experiment",rochester:"subscription-flow-serp-division-override-experiment",seattle:"subscription-flow-serp-division-override-experiment","tampa-bay-area":"subscription-flow-serp-division-override-experiment"},subscriptionsUI_seoDivisionExperimentOverrides={atlanta:"subscription-flow-seo-division-override-experiment",buffalo:"subscription-flow-seo-division-override-experiment",detroit:"subscription-flow-seo-division-override-experiment","minneapolis-stpaul":"subscription-flow-seo-division-override-experiment",nashville:"subscription-flow-seo-division-override-experiment","san-francisco":"subscription-flow-seo-division-override-experiment",columbus:"subscription-flow-seo-division-override-experiment",denver:"subscription-flow-seo-division-override-experiment","grand-rapids":"subscription-flow-seo-division-override-experiment",houston:"subscription-flow-seo-division-override-experiment","orange-county":"subscription-flow-seo-division-override-experiment",phoenix:"subscription-flow-seo-division-override-experiment",portland:"subscription-flow-seo-division-override-experiment",providence:"subscription-flow-seo-division-override-experiment",rochester:"subscription-flow-seo-division-override-experiment",seattle:"subscription-flow-seo-division-override-experiment","tampa-bay-area":"subscription-flow-seo-division-override-experiment"},subscriptionsUI_seoHomepageDivisionExperimentOverrides={atlanta:"subscription-flow-seo-homepage-division-override-experiment",buffalo:"subscription-flow-seo-homepage-division-override-experiment",detroit:"subscription-flow-seo-homepage-division-override-experiment","minneapolis-stpaul":"subscription-flow-seo-homepage-division-override-experiment",nashville:"subscription-flow-seo-homepage-division-override-experiment","san-francisco":"subscription-flow-seo-homepage-division-override-experiment",columbus:"subscription-flow-seo-homepage-division-override-experiment",denver:"subscription-flow-seo-homepage-division-override-experiment","grand-rapids":"subscription-flow-seo-homepage-division-override-experiment",houston:"subscription-flow-seo-homepage-division-override-experiment","orange-county":"subscription-flow-seo-homepage-division-override-experiment",phoenix:"subscription-flow-seo-homepage-division-override-experiment",portland:"subscription-flow-seo-homepage-division-override-experiment",providence:"subscription-flow-seo-homepage-division-override-experiment",rochester:"subscription-flow-seo-homepage-division-override-experiment",seattle:"subscription-flow-seo-homepage-division-override-experiment","tampa-bay-area":"subscription-flow-seo-homepage-division-override-experiment"},subscriptionsUI_semHomepageDivisionExperimentOverrides={atlanta:"subscription-flow-sem-homepage-division-override-experiment",buffalo:"subscription-flow-sem-homepage-division-override-experiment",detroit:"subscription-flow-sem-homepage-division-override-experiment","minneapolis-stpaul":"subscription-flow-sem-homepage-division-override-experiment",nashville:"subscription-flow-sem-homepage-division-override-experiment","san-francisco":"subscription-flow-sem-homepage-division-override-experiment",columbus:"subscription-flow-sem-homepage-division-override-experiment",denver:"subscription-flow-sem-homepage-division-override-experiment","grand-rapids":"subscription-flow-sem-homepage-division-override-experiment",houston:"subscription-flow-sem-homepage-division-override-experiment","orange-county":"subscription-flow-sem-homepage-division-override-experiment",phoenix:"subscription-flow-sem-homepage-division-override-experiment",portland:"subscription-flow-sem-homepage-division-override-experiment",providence:"subscription-flow-sem-homepage-division-override-experiment",rochester:"subscription-flow-sem-homepage-division-override-experiment",seattle:"subscription-flow-sem-homepage-division-override-experiment","tampa-bay-area":"subscription-flow-sem-homepage-division-override-experiment"},USER_AGENTS=["googlebot","bingbot","ask jeeves","yahoo! slurp","seoagent","AdsBot-Google","AdsBot-Google-Mobile","psbot","gosospider","sogou","google web preview","google wireless transcoder","mediapartners-google","baidu","gigabot","googlebot-image","libwww-perl","lwp-trivial","msnbot","siteuptime","slurp","teoma","uptakebot","voyager","wordpress","yahooseeker","zibb","zyborg","wget","curl"],SERP_REFERERS={google:"q","search.yahoo":"p",bing:"q","search.aol":"userQuery",altavista:"q",feedster:"q","search.lycos":"query",alltheweb:"q"},SubscriptionsUI._should_show_doi=function(){return!("user_sessions"===appName||"itier/subscription_center"===appName||"sub_center"===appName||Cookie.get("subscription_doi_dismissed")||!Cookie.get("optin")&&!Cookie.get("optin_reminder"))},SubscriptionsUI.prototype._get_app_name=function(){var tmpAppName;return tmpAppName=SubscriptionsUI._get_page_info().app,appName=null!=tmpAppName?tmpAppName.toLowerCase():null},SubscriptionsUI.prototype._is_common_traffic=function(){var isCommonAppName;return isCommonAppName=in$(appName,["homepage","pull","goods","raf_app","getaways_itier","getaways_browse","occasions_itier"]),isCommonAppName&&!SubscriptionsUI._isSERPReferrer()},SubscriptionsUI.prototype._should_use_fp=function(){var useFp;return!this._is_common_traffic()||isSubForced||null!=("undefined"!=typeof TrackingHub&&null!=TrackingHub&&null!=TrackingHub.user?TrackingHub.user.deviceType:void 0)&&"desktop"!==TrackingHub.user.deviceType.toLowerCase()?!1:(useFp=!1,"undefined"!=typeof Finch&&null!=Finch&&"function"==typeof Finch.experiment&&Finch.experiment(FP_EXPERIMENT,{useDecision:function(){return useFp=!0},ignoreDecision:function(){return useFp=!1}}),useFp)},SubscriptionsUI.prototype._should_not_show_subsUI=function(){return isSubForced?!1:this._user_has_sub_cookie()||SubscriptionsUI._isBot()||this._skip_subscription_ui()||this._is_email_click_traffic()?!0:Cookie.get("hide_sub_modal")&&this._should_hide_subscribe_drawer()?!0:"user_sessions"===appName?!0:!1},SubscriptionsUI.prototype._get_subs_variant=function(){var results;return results=new RegExp("[\\?&]subs_variant=([^&#]*)").exec(window.location.href),null!=results&&null!=results[1]?(null!=("undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite?OptimizeSuite.TrackingHub:void 0)&&OptimizeSuite.TrackingHub.add("subscriptionUIOverridden",{goalType:"subscription",variant:results[1]}),results[1]):void 0},SubscriptionsUI.prototype._get_experiment_names=function(){var results;return results=new RegExp("[\\?&]subs_experiment=([^&#]*)").exec(window.location.href),null!=results&&null!=results[1]?(null!=("undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite?OptimizeSuite.TrackingHub:void 0)&&OptimizeSuite.TrackingHub.add("subscriptionExperimentOverridden",{goalType:"subscription",experiment:results[1]}),[results[1]]):Cookie.get("hide_sub_modal")?(experimentType="non-modal",[NON_MODAL_EXPERIMENT,NON_MODAL_INTL_EXPERIMENT]):this._is_skipping_traffic()||isTXN_TPS?(Cookie.set("hide_sub_modal",1,TWENTYFOUR_HOURS_LIFE_IN_SECONDS),experimentType="non-modal",[NON_MODAL_EXPERIMENT,NON_MODAL_INTL_EXPERIMENT]):isTTT?SubscriptionsUI._isSERPReferrer()&&in$(appName,["homepage","pull","goods","deal","raf_app","seo-platform-itier","getaways_itier","gsm-ita","occasions_itier","getaways_browse"])?(experimentType="sem-rtc",[SEM_RTC_EXPERIMENT,SEM_RTC_INTL_EXPERIMENT]):(Cookie.set("hide_sub_modal",1,TWENTYFOUR_HOURS_LIFE_IN_SECONDS),experimentType="non-modal",[NON_MODAL_EXPERIMENT,NON_MODAL_INTL_EXPERIMENT]):"seo-platform-itier"===appName||"gsm-ita"===appName?(experimentType="seo",null!=subscriptionsUI_seoDivisionExperimentOverrides[currentDivision]?[subscriptionsUI_seoDivisionExperimentOverrides[currentDivision]]:[SEO_EXPERIMENT,SEO_INTL_EXPERIMENT]):"deal"===appName?$("body").hasClass("deal_expired")||$("body").hasClass("deal_sold_out")||$("body").hasClass("deal_not_yet")?(experimentType="expired-deal",[EXPIRED_DEAL_EXPERIMENT,EXPIRED_DEAL_INTL_EXPERIMENT]):(experimentType="non-modal",[NON_MODAL_EXPERIMENT,NON_MODAL_INTL_EXPERIMENT]):"homepage"===appName?this._get_homepage_exp_name():in$(appName,["pull","goods","raf_app","getaways_itier","getaways_browse","occasions_itier"])?SubscriptionsUI._isSERPReferrer()?(experimentType="serp",null!=subscriptionsUI_serpDivisionExperimentOverrides[currentDivision]?[subscriptionsUI_serpDivisionExperimentOverrides[currentDivision]]:[SERP_REFERER_EXPERIMENT,SERP_REFERER_INTL_EXPERIMENT]):(experimentType="common",null!=subscriptionsUI_commonDivisionExperimentOverrides[currentDivision]?[subscriptionsUI_commonDivisionExperimentOverrides[currentDivision]]:[COMMON_EXPERIMENT,COMMON_INTL_EXPERIMENT]):this._should_hide_subscribe_drawer()?null:(experimentType="non-modal",[NON_MODAL_EXPERIMENT,NON_MODAL_INTL_EXPERIMENT])},SubscriptionsUI.prototype._get_homepage_exp_name=function(){return SubscriptionsUI._isSERPReferrer()?this._is_SEM_inbound_traffic()?(experimentType="homepage-sem",null!=subscriptionsUI_semHomepageDivisionExperimentOverrides[currentDivision]?[subscriptionsUI_semHomepageDivisionExperimentOverrides[currentDivision]]:[HP_SEM_EXPERIMENT,HP_SEM_INTL_EXPERIMENT]):(experimentType="homepage-seo",null!=subscriptionsUI_seoHomepageDivisionExperimentOverrides[currentDivision]?[subscriptionsUI_seoHomepageDivisionExperimentOverrides[currentDivision]]:[HP_SEO_EXPERIMENT,HP_SEO_INTL_EXPERIMENT]):(experimentType="common",null!=subscriptionsUI_commonDivisionExperimentOverrides[currentDivision]?[subscriptionsUI_commonDivisionExperimentOverrides[currentDivision]]:[COMMON_EXPERIMENT,COMMON_INTL_EXPERIMENT])},SubscriptionsUI.prototype._is_SEM_inbound_traffic=function(){var entries,thirdEntry,utm_campaign;return utm_campaign=new RegExp("[\\?&]utm_campaign=([^&#]*)").exec(window.location.href),null!=utm_campaign&&null!=utm_campaign[1]&&(entries=utm_campaign[1].split("_"),thirdEntry=null!=entries[2]?entries[2].toLowerCase():void 0,"sea"===thirdEntry)?!0:!1},SubscriptionsUI.prototype._is_mobile_skipping_traffic=function(){var mobileHideModal;return"mobile"!==("undefined"!=typeof TrackingHub&&null!=TrackingHub&&null!=TrackingHub.user&&null!=TrackingHub.user.deviceType?TrackingHub.user.deviceType.toLowerCase():void 0)?!1:(mobileHideModal=!1,"seo-platform-itier"===appName||"gsm-ita"===appName?Finch.experiment(SEO_MOBILE_DISPLAY_EXPERIMENT,{hideForMobile:function(){return mobileHideModal=!0},showForMobile:function(){return mobileHideModal=!1}}):Finch.experiment(COMMON_MOBILE_DISPLAY_EXPERIMENT,{hideForMobile:function(){return mobileHideModal=!0},showForMobile:function(){return mobileHideModal=!1}}),mobileHideModal)},SubscriptionsUI.prototype._is_skipping_traffic=function(){var countryDomain,currentPageType,seoSkippingTraffic,urlSkippingTraffic;return currentPageType="undefined"!=typeof TrackingHub&&null!=TrackingHub&&null!=TrackingHub.page&&null!=TrackingHub.page.metadata?TrackingHub.page.metadata.type:void 0,seoSkippingTraffic=("seo-platform-itier"===appName||"gsm-ita"===appName)&&in$(currentPageType,CITY_GUIDE_PAGE_TYPES),countryDomain=$("head").data("domain")||"",urlSkippingTraffic=new RegExp("("+countryDomain+")(/local(/.*)?/(things-to-do$|lists$|lists/[^/]+|restaurants$|city-guide/[^/]+|massage$)|/biz/.*|/articles/[^/]+|/hotels$|/hotels/[^/]+)").test(window.location.href),seoSkippingTraffic||urlSkippingTraffic||this._is_mobile_skipping_traffic()},SubscriptionsUI.prototype._skip_subscription_ui=function(){return new RegExp("[\\?&]z=skip").test(window.location.href)?!0:void 0},SubscriptionsUI.prototype._is_email_click_traffic=function(){var utm_medium;return utm_medium=new RegExp("[\\?&]utm_medium=([^&#]*)").exec(window.location.href),null!=utm_medium&&null!=utm_medium[1]&&"email"===utm_medium[1].toLowerCase()||"email"===Cookie.get("_tpmed")?!0:!1},SubscriptionsUI.prototype._intializeSEMParams=function(){var curURLString,entries,sixthEntry,utm_campaign,utm_medium;return curURLString=window.location.href,utm_medium=new RegExp("[\\?&]utm_medium=([^&#]*)").exec(curURLString),null!=utm_medium&&null!=utm_medium[1]?(utm_campaign=new RegExp("[\\?&]utm_campaign=([^&#]*)").exec(curURLString),null!=utm_campaign&&null!=utm_campaign[1]?(entries=utm_campaign[1].split("_"),sixthEntry=null!=entries[5]?entries[5].toLowerCase():void 0,isTXN_TPS="cpc"===utm_medium[1].toLowerCase()&&("txn"===sixthEntry||"tps"===sixthEntry),isTTT="cpc"===utm_medium[1].toLowerCase()&&"ttt"===sixthEntry):void 0):void 0},SubscriptionsUI.prototype._should_hide_subscribe_drawer=function(){var no_drawer;return no_drawer=Cookie.get("close_subscribe_drawer")||Cookie.get("hide_sub_banner"),no_drawer?!0:"undefined"!=typeof subscriptionsUI_hideSubscribeDrawer&&null!=subscriptionsUI_hideSubscribeDrawer&&subscriptionsUI_hideSubscribeDrawer?"pull"===appName||"gsm-ita"===appName?!1:!0:void 0},SubscriptionsUI._isBot=function(){var userAgent,userAgentHeader;if(userAgentHeader=navigator.userAgent)for(var i$=0,length$=USER_AGENTS.length;length$>i$;++i$)if(userAgent=USER_AGENTS[i$],SubscriptionsUI._isSubStr(userAgentHeader,userAgent))return!0;return!1},SubscriptionsUI._isSubStr=function(string,subStr){return string.toUpperCase().indexOf(subStr.toUpperCase())>-1},SubscriptionsUI._isSERPReferrer=function(){var queryParam,referer,serp_referer;if(document.referrer){referer=document.referrer;for(serp_referer in SERP_REFERERS)if(queryParam=SERP_REFERERS[serp_referer],referer.indexOf(serp_referer)>-1)return!0}return!1},SubscriptionsUI.track=function(){var f,hashDuration,hashStart,now,trackStart;return f=Cookie.get("f"),null==f&&(now=new Date,hashStart=now.getTime(),f=new Fingerprint({hasher:md5,canvas:!0,screen_resolution:!0}).get(),now=new Date,hashDuration=now.getTime()-hashStart,Cookie.set("f",f,ONE_HOUR_IN_SECONDS)),now=new Date,trackStart=now.getTime(),$.ajax({url:"/app/subscriptions/track",cache:!1,timeout:1e3,success:function(data){var latency;return now=new Date,latency=now.getTime()-trackStart,"undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite&&null!=OptimizeSuite.TrackingHub&&OptimizeSuite.TrackingHub.add("subscriptionTrackCall",{goalType:"subscription",callResult:"success",finishedBeforeSDS:null!=window._useSDS?window._useSDS:!1,data:data,latency:latency,hashDuration:hashDuration,f:f,b:Cookie.get("b"),c:Cookie.get("c")}),window.SubscriptionsUI.fpHide="0"===data},error:function(jqXHR,errorStatus){var latency;return now=new Date,latency=now.getTime()-trackStart,"undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite&&null!=OptimizeSuite.TrackingHub?OptimizeSuite.TrackingHub.add("subscriptionTrackCall",{goalType:"subscription",callResult:"error",finishedBeforeSDS:null!=window._useSDS?window._useSDS:!1,errorStatus:errorStatus,latency:latency,hashDuration:hashDuration,f:f,b:Cookie.get("b"),c:Cookie.get("c")}):void 0},complete:function(){return null!=window.SubscriptionsUI._fp_timer_fn&&null!=window.SubscriptionsUI._fp_timer_id?(clearTimeout(window.SubscriptionsUI._fp_timer_id),window.SubscriptionsUI._fp_timer_fn()):void 0}})},SubscriptionsUI.increment_visited_cookie=function(){var visited;return visited=parseInt(Cookie.get("subscription_visited")),isNaN(visited)?visited=1:++visited,Cookie.set("subscription_visited",visited,TEN_YEARS_IN_SECONDS)},SubscriptionsUI.increment_non_modal_view_cookie=function(){var views;return views=parseInt(Cookie.get("subscription_non_modal_views")),isNaN(views)?views=1:++views,Cookie.set("subscription_non_modal_views",views,TEN_YEARS_IN_SECONDS)},SubscriptionsUI._dismiss_subscribe_modal=function(container){return container.hide(),container.hideSpotlight&&container.hideSpotlight()},SubscriptionsUI.prototype.show_success_notification=function(){return SubscriptionsUI._show_success_notification()},SubscriptionsUI._show_success_notification=function(){return $("#email_subscription_subanner").show(),$("#notice_banner").show()},SubscriptionsUI._gtm_subscribe_event=function(){return"undefined"!=typeof dataLayer&&null!=dataLayer?dataLayer.push({event:"subscription"}):void 0},SubscriptionsUI._gtm_subscribe_landing_event=function(subsave){if(subsave){if("undefined"!=typeof dataLayer&&null!=dataLayer)return dataLayer.push({event:"subscription/save"})}else if("undefined"!=typeof dataLayer&&null!=dataLayer)return dataLayer.push({event:"subscription/landing"})},SubscriptionsUI._show_subscribe_drawer=function(){var divisionDropdown;return Cookie.get("close_subscribe_drawer")?void 0:(divisionDropdown=$("#subscribe-division"),"false"===divisionDropdown.attr("data-options_decoded")&&(divisionDropdown.attr({"data-options_decoded":"true"}),$("#subscribe-division > option").each(function(){var decodedName;return decodedName=$(this).text().split("").reverse().join(""),$(this).text(decodedName)})),$("#subscribe-drawer").show())},SubscriptionsUI._get_page_info=function(){var page_info;return page_info={},null!=$("head").attr("data-app")&&$("head").attr("data-app").length>0?page_info.app=encodeURIComponent($("head").attr("data-app")):null!=("undefined"!=typeof Optimize&&null!=Optimize&&null!=Optimize.suiteData?Optimize.suiteData.app:void 0)&&("undefined"!=typeof Optimize&&null!=Optimize&&null!=Optimize.suiteData?Optimize.suiteData.app.length:void 0)>0&&(page_info.app=encodeURIComponent(Optimize.suiteData.app)),page_info},SubscriptionsUI._get_language_override=function(){var data,results;return data={},results=new RegExp("[\\?&]lang=([^&#]*)").exec(window.location.href),null!=results&&null!=results[1]&&(data.lang=results[1]),data},SubscriptionsUI._hide_sub_modal=function(container,hideModalIndicator){return hideModalIndicator===!0&&(container.hide(),$("#global-container").show()),$(document.body).trigger("runTruncateHtml"),null!=("undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite?OptimizeSuite.TrackingHub:void 0)?OptimizeSuite.TrackingHub.add("subscriptionUIHidden",{goalType:"subscription",uiType:"full-screen"}):void 0},SubscriptionsUI.prototype._get_full_screen_and_show=function(treatment,ui_options){var jqxhr,now,separator,this$,url;return url="/app/subscriptions/local_zip_modal",null!=treatment&&"1"!=treatment+""&&(url+="_"+treatment),separator="?",ui_options=$.extend({},ui_options,SubscriptionsUI._get_page_info(),SubscriptionsUI._get_language_override()),null!=ui_options&&$.each(ui_options,function(setting,value){return url+=separator+encodeURIComponent(setting)+"="+encodeURIComponent(value),separator="&"
}),modalShown=!0,now=new Date,loadStartTime=now.getTime(),jqxhr=$.ajax({url:url,error:function(){return $(document.documentElement).css({"background-color":"#ffffff"}),$("#global-container").show(),modalShown=!1,SubscriptionsUI._show_subscribe_drawer()},success:(this$=this,function(data){var decisivelyHide,successFn;return now=new Date,loadCompleteTime=now.getTime(),successFn=function(){var $container;return $container=$('<div id="two_step_div" />'),$container.css({display:"none",position:"fixed",top:"0",left:"0",bottom:"0",right:"0"}),$container.html(data),$(document.documentElement).css({"background-color":"#ffffff"}),$(document.body).append($container),$("#two_step_div").show(),SubscriptionsUI._gtm_subscribe_landing_event(1===ui_options.subSave),now=new Date,null!=("undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite?OptimizeSuite.TrackingHub:void 0)&&OptimizeSuite.TrackingHub.add("subscriptionUIShown",{goalType:"subscription",uiType:"full-screen",subSave:1===ui_options.subSave,loadingLatency:now.getTime()-loadStartTime,totalLatency:now.getTime()-constructionTime}),window._subsUIshown={uiType:"full-screen",time:now.getTime()},$("#js-zip-modal-step").on("dismissConditionally",function(){return"pull"!==appName&&"homepage"!==appName?SubscriptionsUI._hide_sub_modal($container,!0):void 0}),$("#js-zip-modal-step").on("dismiss",function(){return SubscriptionsUI._hide_sub_modal($container,!0)}),$("#js-zip-modal-step").on("success",function(){return("pull"===appName||"homepage"===appName)&&SubscriptionsUI._hide_sub_modal($container,hideModal),null==window._subscriptionSuccessCallback&&(SubscriptionsUI._show_success_notification(),SubscriptionsUI._gtm_subscribe_event()),SubscriptionsUI._should_show_doi()?SubscriptionsUI._get_doi_modal_and_show("#333"):void 0}),$("#js-zip-modal-step").on("close",function(){return Cookie.set("hide_sub_modal",1),$container.hide(),$("#global-container").show(),$(document.body).trigger("runTruncateHtml"),null!=("undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite?OptimizeSuite.TrackingHub:void 0)?OptimizeSuite.TrackingHub.add("subscriptionUIHidden",{goalType:"subscription",uiType:"full-screen"}):void 0})},this$._should_use_fp()&&(decisivelyHide=window.SubscriptionsUI.fpHide,now=new Date,"undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite&&null!=OptimizeSuite.TrackingHub&&OptimizeSuite.TrackingHub.add("subscriptionFpHide",{goalType:"subscription",fpHide:null!=decisivelyHide?decisivelyHide:"timedOut",uiType:"full-screen",loadingLatency:loadCompleteTime-loadStartTime,totalLatency:now.getTime()-constructionTime}),decisivelyHide)?($(document.documentElement).css({"background-color":"#ffffff"}),$("#global-container").show(),modalShown=!1,SubscriptionsUI._show_subscribe_drawer(),Cookie.set("hide_sub_modal",1),void 0):isIE8?$(document).ready(successFn):successFn()})})},SubscriptionsUI.prototype._get_subscribe_modal_and_show=function(treatment,ui_options,overlayColor){var jqxhr,now,separator,this$,url;return url="/app/subscriptions/email_zip",null!=treatment&&"1"!=treatment+""&&(url+="_"+treatment),separator="?",ui_options=$.extend({},ui_options,SubscriptionsUI._get_page_info(),SubscriptionsUI._get_language_override()),null!=ui_options&&$.each(ui_options,function(setting,value){return url+=separator+encodeURIComponent(setting)+"="+encodeURIComponent(value),separator="&"}),modalShown=!0,now=new Date,loadStartTime=now.getTime(),jqxhr=$.get(url,(this$=this,function(data){var $container,decisivelyHide;return now=new Date,loadCompleteTime=now.getTime(),this$._should_use_fp()&&(decisivelyHide=window.SubscriptionsUI.fpHide,now=new Date,"undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite&&null!=OptimizeSuite.TrackingHub&&OptimizeSuite.TrackingHub.add("subscriptionFpHide",{goalType:"subscription",fpHide:null!=decisivelyHide?decisivelyHide:"timedOut",uiType:"modal-dialog",loadingLatency:loadCompleteTime-loadStartTime,totalLatency:now.getTime()-constructionTime}),decisivelyHide)?(modalShown=!1,SubscriptionsUI._show_subscribe_drawer(),Cookie.set("hide_sub_modal",1),void 0):($container=$("#subscribe_modal_container"),0===(null!=$container?$container.length:void 0)&&($container=$('<div id="subscribe_modal_container" />'),$(document.body).append($container)),$container.css({display:"none",position:"fixed","z-index":"9999"}),$container.html(data),setTimeout(function(){var dlg_height,dlg_width,left,top;return dlg_width=$container.width(),dlg_height=$container.height(),left=($(window).width()-dlg_width)/2,top=($(window).height()-dlg_height)/2,overlayColor=null!=overlayColor?overlayColor:"#eee",$container.css({top:top,left:left}),$container.show(),$container.spotlight({opacity:.7,color:overlayColor,exitEvent:"none"}),$(focus_input_id).length>0?$(focus_input_id).focus():$(alt_focus_input_id).length>0&&$(alt_focus_input_id).focus(),SubscriptionsUI._gtm_subscribe_landing_event(1===ui_options.subSave),now=new Date,null!=("undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite?OptimizeSuite.TrackingHub:void 0)&&OptimizeSuite.TrackingHub.add("subscriptionUIShown",{goalType:"subscription",uiType:"modal-dialog",subSave:1===ui_options.subSave,loadingLatency:loadCompleteTime-loadStartTime,totalLatency:now.getTime()-constructionTime}),window._subsUIshown={uiType:"modal-dialog",time:now.getTime()},$(dlg_id).on("dismiss",function(){return SubscriptionsUI._dismiss_subscribe_modal($container),null!=("undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite?OptimizeSuite.TrackingHub:void 0)?OptimizeSuite.TrackingHub.add("subscriptionUIHidden",{goalType:"subscription",uiType:"modal-dialog"}):void 0}),$(dlg_id).on("fail",function(){return SubscriptionsUI._dismiss_subscribe_modal($container)}),$(dlg_id).on("success",function(){return SubscriptionsUI._dismiss_subscribe_modal($container),null==window._subscriptionSuccessCallback&&(SubscriptionsUI._show_success_notification(),SubscriptionsUI._gtm_subscribe_event()),SubscriptionsUI._should_show_doi()?SubscriptionsUI._get_doi_modal_and_show("#333"):void 0}),$(dlg_id).on("close",function(){return SubscriptionsUI._dismiss_subscribe_modal($container),Cookie.set("hide_sub_modal",1),null!=("undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite?OptimizeSuite.TrackingHub:void 0)?OptimizeSuite.TrackingHub.add("subscriptionUIHidden",{goalType:"subscription",uiType:"modal-dialog"}):void 0})},500))}))},SubscriptionsUI._get_doi_modal_and_show=function(overlayColor){var jqxhr,now,url;return url="/app/subscriptions/doi",now=new Date,loadStartTime=now.getTime(),jqxhr=$.get(url,function(data){var $container;return now=new Date,loadCompleteTime=now.getTime(),$container=$('<div id="subscribe_doi_modal_container" />'),$container.css({display:"none",position:"fixed","z-index":"9999"}),$container.html(data),$(document.body).append($container),$("#no_doi").length>0?void 0:setTimeout(function(){var dlg_height,dlg_width,left,top;return dlg_width=$container.width(),dlg_height=$container.height(),left=($(window).width()-dlg_width)/2,top=($(window).height()-dlg_height)/2,overlayColor=null!=overlayColor?overlayColor:"#eee",$container.css({top:top,left:left}),$container.show(),$container.spotlight({opacity:.7,color:overlayColor,exitEvent:"none"}),now=new Date,null!=("undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite?OptimizeSuite.TrackingHub:void 0)&&OptimizeSuite.TrackingHub.add("subscriptionDOIDialogShown",{goalType:"subscription",uiType:"modal-dialog",loadingLatency:loadCompleteTime-loadStartTime,totalLatency:now.getTime()-constructionTime}),$("#doi_dlg").on("dismiss",function(){return SubscriptionsUI._dismiss_subscribe_modal($container),Cookie.set("subscription_doi_dismissed",!0,DOI_DISMISS_LIFE_IN_SECONDS),null!=("undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite?OptimizeSuite.TrackingHub:void 0)?OptimizeSuite.TrackingHub.add("subscriptionDOIDialogHidden",{goalType:"subscription",uiType:"modal-dialog"}):void 0})},500)})},SubscriptionsUI.prototype._get_subscribe_non_modal_and_show=function(treatment,ui_options){var jqxhr,now,separator,url,views;return ui_options=$.extend({},ui_options,{showExpandCollapse:1}),views=parseInt(Cookie.get("subscription_non_modal_views")),views>=NON_MODAL_EXPANDED_VIEWS&&(ui_options=$.extend({},ui_options,{collapsed:1})),url="/app/subscriptions/non_modal",null!=treatment&&(url+="_"+treatment),separator="?",ui_options=$.extend({},ui_options,SubscriptionsUI._get_page_info(),SubscriptionsUI._get_language_override()),null!=ui_options&&$.each(ui_options,function(setting,value){return url+=separator+encodeURIComponent(setting)+"="+encodeURIComponent(value),separator="&"}),now=new Date,loadStartTime=now.getTime(),jqxhr=$.get(url,function(data){var $container;return $container=$('<div id="subscription-non-modal-container" />'),$container.css({display:"none"}),1===treatment&&$(".header-v2").after($container),null!=$container&&($container.html(data),SubscriptionsUI.increment_non_modal_view_cookie()),SubscriptionsUI._gtm_subscribe_landing_event(1===ui_options.subSave),now=new Date,null!=("undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite?OptimizeSuite.TrackingHub:void 0)&&OptimizeSuite.TrackingHub.add("subscriptionNonModalUIShown",{goalType:"subscription",uiType:"non-modal",subSave:1===ui_options.subSave,loadingLatency:now.getTime()-loadStartTime,totalLatency:now.getTime()-constructionTime}),$(non_modal_id).on("dismiss",function(){return $container.hide(),null!=("undefined"!=typeof OptimizeSuite&&null!=OptimizeSuite?OptimizeSuite.TrackingHub:void 0)?OptimizeSuite.TrackingHub.add("subscriptionNonModalUIHidden",{goalType:"subscription",uiType:"non-modal"}):void 0}),$(non_modal_id).on("fail",function(){return $container.hide()}),$(non_modal_id).on("success",function(){return $container.hide(),null==window._subscriptionSuccessCallback&&(SubscriptionsUI._show_success_notification(),SubscriptionsUI._gtm_subscribe_event()),SubscriptionsUI._should_show_doi()?SubscriptionsUI._get_doi_modal_and_show("#333"):void 0}),setTimeout(function(){return $container.show()},500)})},SubscriptionsUI.prototype._user_has_sub_cookie=function(){var c,cookies,legacy_international_cookie;legacy_international_cookie=("undefined"!=typeof I18n&&null!=I18n?I18n.country.toLowerCase():void 0)+"_nl_subscribed",cookies=["subscriber_email","scid","l","user_id","c","snickerdoodle","macaroon",legacy_international_cookie];for(var i$=0,length$=cookies.length;length$>i$;++i$)if(c=cookies[i$],Cookie.get(c))return!0;return!1},SubscriptionsUI.prototype._user_has_hide_sub_cookie=function(){var c,cookies;cookies=["hide_sub_banner","hide_sub_modal","close_subscribe_drawer"];for(var i$=0,length$=cookies.length;length$>i$;++i$)if(c=cookies[i$],Cookie.get(c))return!0;return!1},SubscriptionsUI.prototype._show_subscribe_modal=function(treatment,ui_options,overlayColor,deferred){return $("#global-container").show(),this._should_show_subscription_modal_ui_for_user()&&this._should_show_subscription_ui_this_visit(deferred)?this._get_subscribe_modal_and_show(treatment,ui_options,overlayColor):void 0},SubscriptionsUI.prototype._show_subscribe_non_modal=function(treatment,ui_options){var now;return $("#global-container").show(),this._should_show_subscription_ui_for_user()?1===treatment?this._get_subscribe_non_modal_and_show(treatment,ui_options):(now=new Date,window._subsUIshown={uiType:"banner",time:now.getTime()},SubscriptionsUI._show_subscribe_drawer()):void 0},SubscriptionsUI.prototype._show_full_screen=function(treatment,ui_options,deferred){return this._should_show_subscription_modal_ui_for_user()&&this._should_show_subscription_ui_this_visit(deferred)?this._get_full_screen_and_show(treatment,ui_options):$("#global-container").show()},SubscriptionsUI.prototype._should_show_subscription_modal_ui_for_user=function(){return!this._user_has_sub_cookie()&&!this._user_has_hide_sub_cookie()||isSubForced},SubscriptionsUI.prototype._should_show_subscription_ui_for_user=function(){return!this._user_has_sub_cookie()||isSubForced},SubscriptionsUI.prototype._should_show_subscription_ui_this_visit=function(deferred){var visitedCookie;return isSubForced?!0:(visitedCookie=Cookie.get("subscription_visited"),null!=visitedCookie?deferred===!0?parseInt(visitedCookie)>=MIN_VISITS_TO_SHOW:parseInt(visitedCookie)<=MAX_VISITS_TO_SHOW:!deferred)},SubscriptionsUI.prototype._set_app_callback=function(){return"pull"===appName?window._subscriptionSuccessCallback=this._pull_callBack:"homepage"===appName?window._subscriptionSuccessCallback=this._homepage_callBack:void 0},SubscriptionsUI.prototype._pull_callBack=function(divisionId){return currentDivision===divisionId||SubscriptionsUI._should_show_doi()?(SubscriptionsUI._gtm_subscribe_event(),SubscriptionsUI._show_success_notification()):(hideModal=!1,window.location="/browse/"+divisionId+"?post_subscribe=true")},SubscriptionsUI.prototype._homepage_callBack=function(){return SubscriptionsUI._should_show_doi()?(SubscriptionsUI._gtm_subscribe_event(),SubscriptionsUI._show_success_notification()):(hideModal=!1,window.location="?post_subscribe=true")},SubscriptionsUI.prototype.show_subscription_ui=function(config){var cache$,callback,overlayColor,treatment,type,ui_options;if(!window._useSDS){if(cache$=config,type=cache$.type,treatment=cache$.treatment,ui_options=cache$.ui_options,overlayColor=cache$.overlayColor,callback=cache$.callback,!(this._should_show_subscription_ui_for_user()||this._should_show_subscription_non_modal_ui_for_user&&"non-modal"===type))return $("#global-container").show();if(window._subscriptionSuccessCallback=callback,null!=overrideVariant){if(null!=modalVariantMap[overrideVariant]?modalVariantMap[overrideVariant]():null!=nonModalVariantMap[overrideVariant]?nonModalVariantMap[overrideVariant]():null!=expiredDealVariantMap[overrideVariant]?expiredDealVariantMap[overrideVariant]():$("#global-container").show(),needToShowMainContent)return $("#global-container").show()}else switch(type){case"non-modal":return this._show_subscribe_non_modal(treatment,ui_options);case"modal-dialog":return this._show_subscribe_modal(treatment,ui_options,overlayColor);case"full-screen":return this._show_full_screen(treatment,ui_options);case"banner":return this._show_subscribe_non_modal(0,ui_options);default:return $("#global-container").show()}}},SubscriptionsUI.prototype.show_user_initiated_modal_dialog=function(){return window._useSDS?void 0:(this._set_app_callback(),experimentType="user-init",variantRun=!1,Finch.experiment(USER_INITIATED_EXPERIMENT,userInitiatedVariantMap),Finch.experiment(USER_INITIATED_INTL_EXPERIMENT,userInitiatedVariantMap),variantRun||null==subscriptionsUI_defaultVariants[experimentType]||null==modalVariantMap[subscriptionsUI_defaultVariants[experimentType]]?void 0:modalVariantMap[subscriptionsUI_defaultVariants[experimentType]]())},SubscriptionsUI.prototype.show_default_subscription_ui=function(callback){return noSubscriptionsUI||window._useSDS?void 0:null!=appExperimentNames&&0!==appExperimentNames.length||null!=overrideVariant?"non-modal"===experimentType?(this._set_app_callback(),this._run_subscription_non_modal_experiment_internal(appExperimentNames)):"expired-deal"===experimentType?(this._set_app_callback(),this.run_subscription_experiment(appExperimentNames,callback,expiredDealVariantMap)):(this._set_app_callback(),this.run_subscription_experiment(appExperimentNames,callback)):$("#global-container").show()},SubscriptionsUI.prototype.run_subscription_experiment=function(experiment,callback,variantMap){return ajaxCallCount>1||window._useSDS?void 0:null!=experiment||null!=overrideVariant?this._run_subscription_experiment_internal(experiment,callback,variantMap):this._show_subscribe_non_modal(0,{})},SubscriptionsUI.prototype._run_subscription_experiment_internal=function(experiments,callback,variantMap){var allExperiments,exp;if("undefined"==typeof variantMap&&(variantMap=modalVariantMap),noSubscriptionsUI)return $("#global-container").show();if(null==window._subscriptionSuccessCallback&&(window._subscriptionSuccessCallback=callback),null!=overrideVariant){if(null!=modalVariantMap[overrideVariant]?modalVariantMap[overrideVariant]():null!=nonModalVariantMap[overrideVariant]?nonModalVariantMap[overrideVariant]():null!=expiredDealVariantMap[overrideVariant]?expiredDealVariantMap[overrideVariant]():$("#global-container").show(),needToShowMainContent)return $("#global-container").show()}else{allExperiments=[].concat(experiments),variantRun=!1;for(var i$=0,length$=allExperiments.length;length$>i$;++i$)exp=allExperiments[i$],Finch.experiment(exp,variantMap);if(variantRun||null==subscriptionsUI_defaultVariants[experimentType]||null!=modalVariantMap[subscriptionsUI_defaultVariants[experimentType]]&&modalVariantMap[subscriptionsUI_defaultVariants[experimentType]](),needToShowMainContent&&$("#global-container").show(),!modalShown)return this._run_subscription_non_modal_experiment_internal([NON_MODAL_EXPERIMENT,NON_MODAL_INTL_EXPERIMENT])}},SubscriptionsUI.prototype._run_subscription_non_modal_experiment_internal=function(experiments){var allExperiments,exp;if($("#global-container").show(),!noSubscriptionsUI){allExperiments=[].concat(experiments),variantRun=!1;for(var i$=0,length$=allExperiments.length;length$>i$;++i$)exp=allExperiments[i$],Finch.experiment(exp,nonModalVariantMap);if(!variantRun&&null!=subscriptionsUI_defaultVariants["non-modal"]&&null!=nonModalVariantMap[subscriptionsUI_defaultVariants["non-modal"]])return nonModalVariantMap[subscriptionsUI_defaultVariants["non-modal"]]()}},SubscriptionsUI.prototype._setup_variant_map=function(){var this$,this$1,this$10,this$100,this$101,this$102,this$103,this$104,this$105,this$106,this$107,this$108,this$109,this$11,this$110,this$111,this$112,this$113,this$114,this$115,this$116,this$117,this$118,this$119,this$12,this$120,this$121,this$122,this$123,this$124,this$125,this$126,this$127,this$128,this$13,this$14,this$15,this$16,this$17,this$18,this$19,this$2,this$20,this$21,this$22,this$23,this$24,this$25,this$26,this$27,this$28,this$29,this$3,this$30,this$31,this$32,this$33,this$34,this$35,this$36,this$37,this$38,this$39,this$4,this$40,this$41,this$42,this$43,this$44,this$45,this$46,this$47,this$48,this$49,this$5,this$50,this$51,this$52,this$53,this$54,this$55,this$56,this$57,this$58,this$59,this$6,this$60,this$61,this$62,this$63,this$64,this$65,this$66,this$67,this$68,this$69,this$7,this$70,this$71,this$72,this$73,this$74,this$75,this$76,this$77,this$78,this$79,this$8,this$80,this$81,this$82,this$83,this$84,this$85,this$86,this$87,this$88,this$89,this$9,this$90,this$91,this$92,this$93,this$94,this$95,this$96,this$97,this$98,this$99;return modalVariantMap={none:function(){return variantRun=!0},subscription_modalDialog_3:(this$=this,function(){return variantRun=!0,this$._show_subscribe_modal(3,null,"#333")}),subscription_modalDialog_3_showClose:(this$1=this,function(){return variantRun=!0,this$1._show_subscribe_modal(3,{showCloseImg:1},"#333")}),subscription_modalDialog_3_showNoThanks:(this$2=this,function(){return variantRun=!0,this$2._show_subscribe_modal(3,{showNoThanks:1},"#333")}),subscription_modalDialog_3_showContinue:(this$3=this,function(){return variantRun=!0,this$3._show_subscribe_modal(3,{showContinue:1},"#333")}),subscription_modalDialog_3_showSocial:(this$4=this,function(){return variantRun=!0,this$4._show_subscribe_modal(3,{showSocialButtons:1},"#333")}),subscription_modalDialog_3_showClose_showNoThanks:(this$5=this,function(){return variantRun=!0,this$5._show_subscribe_modal(3,{showCloseImg:1,showNoThanks:1},"#333")}),subscription_modalDialog_3_showClose_showContinue:(this$6=this,function(){return variantRun=!0,this$6._show_subscribe_modal(3,{showCloseImg:1,showContinue:1},"#333")}),subscription_modalDialog_3_showClose_showSocial:(this$7=this,function(){return variantRun=!0,this$7._show_subscribe_modal(3,{showCloseImg:1,showSocialButtons:1},"#333")}),subscription_modalDialog_3_showNoThanks_showContinue:(this$8=this,function(){return variantRun=!0,this$8._show_subscribe_modal(3,{showNoThanks:1,showContinue:1},"#333")}),subscription_modalDialog_3_showNoThanks_showSocial:(this$9=this,function(){return variantRun=!0,this$9._show_subscribe_modal(3,{showNoThanks:1,showSocialButtons:1},"#333")}),subscription_modalDialog_3_showContinue_showSocial:(this$10=this,function(){return variantRun=!0,this$10._show_subscribe_modal(3,{showContinue:1,showSocialButtons:1},"#333")}),subscription_modalDialog_3_showClose_showNoThanks_showContinue:(this$11=this,function(){return variantRun=!0,this$11._show_subscribe_modal(3,{showCloseImg:1,showNoThanks:1,showContinue:1},"#333")}),subscription_modalDialog_3_showClose_showNoThanks_showSocial:(this$12=this,function(){return variantRun=!0,this$12._show_subscribe_modal(3,{showCloseImg:1,showNoThanks:1,showSocialButtons:1},"#333")}),subscription_modalDialog_3_showClose_showContinue_showSocial:(this$13=this,function(){return variantRun=!0,this$13._show_subscribe_modal(3,{showCloseImg:1,showContinue:1,showSocialButtons:1},"#333")}),subscription_modalDialog_3_showNoThanks_showContinue_showSocial:(this$14=this,function(){return variantRun=!0,this$14._show_subscribe_modal(3,{showNoThanks:1,showContinue:1,showSocialButtons:1},"#333")}),subscription_modalDialog_3_showClose_showNoThanks_showContinue_showSocial:(this$15=this,function(){return variantRun=!0,this$15._show_subscribe_modal(3,{showCloseImg:1,showNoThanks:1,showContinue:1,showSocialButtons:1},"#333")}),subscription_modalDialog_4:(this$16=this,function(){return variantRun=!0,this$16._show_subscribe_modal(4,null,"#333")}),subscription_modalDialog_4_showClose:(this$17=this,function(){return variantRun=!0,this$17._show_subscribe_modal(4,{showCloseImg:1},"#333")}),subscription_modalDialog_7:(this$18=this,function(){return variantRun=!0,this$18._show_subscribe_modal(7,null,"#333")}),subscription_modalDialog_7_showClose:(this$19=this,function(){return variantRun=!0,this$19._show_subscribe_modal(7,{showCloseImg:1},"#333")}),subscription_modalDialog_7_showNoThanks:(this$20=this,function(){return variantRun=!0,this$20._show_subscribe_modal(7,{showNoThanks:1},"#333")}),subscription_modalDialog_7_showContinue:(this$21=this,function(){return variantRun=!0,this$21._show_subscribe_modal(7,{showContinue:1},"#333")}),subscription_modalDialog_7_showSocial:(this$22=this,function(){return variantRun=!0,this$22._show_subscribe_modal(7,{showSocialButtons:1},"#333")}),subscription_modalDialog_7_showClose_showNoThanks:(this$23=this,function(){return variantRun=!0,this$23._show_subscribe_modal(7,{showCloseImg:1,showNoThanks:1},"#333")}),subscription_modalDialog_7_showClose_showContinue:(this$24=this,function(){return variantRun=!0,this$24._show_subscribe_modal(7,{showCloseImg:1,showContinue:1},"#333")}),subscription_modalDialog_7_showClose_showSocial:(this$25=this,function(){return variantRun=!0,this$25._show_subscribe_modal(7,{showCloseImg:1,showSocialButtons:1},"#333")}),subscription_modalDialog_7_showNoThanks_showContinue:(this$26=this,function(){return variantRun=!0,this$26._show_subscribe_modal(7,{showNoThanks:1,showContinue:1},"#333")}),subscription_modalDialog_7_showNoThanks_showSocial:(this$27=this,function(){return variantRun=!0,this$27._show_subscribe_modal(7,{showNoThanks:1,showSocialButtons:1},"#333")}),subscription_modalDialog_7_showContinue_showSocial:(this$28=this,function(){return variantRun=!0,this$28._show_subscribe_modal(7,{showContinue:1,showSocialButtons:1},"#333")}),subscription_modalDialog_7_showClose_showNoThanks_showContinue:(this$29=this,function(){return variantRun=!0,this$29._show_subscribe_modal(7,{showCloseImg:1,showNoThanks:1,showContinue:1},"#333")}),subscription_modalDialog_7_showClose_showNoThanks_showSocial:(this$30=this,function(){return variantRun=!0,this$30._show_subscribe_modal(7,{showCloseImg:1,showNoThanks:1,showSocialButtons:1},"#333")}),subscription_modalDialog_7_showClose_showContinue_showSocial:(this$31=this,function(){return variantRun=!0,this$31._show_subscribe_modal(7,{showCloseImg:1,showContinue:1,showSocialButtons:1},"#333")}),subscription_modalDialog_7_showNoThanks_showContinue_showSocial:(this$32=this,function(){return variantRun=!0,this$32._show_subscribe_modal(7,{showNoThanks:1,showContinue:1,showSocialButtons:1},"#333")}),subscription_modalDialog_7_showClose_showNoThanks_showContinue_showSocial:(this$33=this,function(){return variantRun=!0,this$33._show_subscribe_modal(7,{showCloseImg:1,showNoThanks:1,showContinue:1,showSocialButtons:1},"#333")}),subscription_modalDialog_7_subSave:(this$34=this,function(){return variantRun=!0,this$34._show_subscribe_modal(7,{subSave:1},"#333")}),subscription_modalDialog_7_subSave_showClose:(this$35=this,function(){return variantRun=!0,this$35._show_subscribe_modal(7,{showCloseImg:1,subSave:1},"#333")}),subscription_modalDialog_7_subSave_showNoThanks:(this$36=this,function(){return variantRun=!0,this$36._show_subscribe_modal(7,{showNoThanks:1,subSave:1},"#333")}),subscription_modalDialog_7_subSave_showContinue:(this$37=this,function(){return variantRun=!0,this$37._show_subscribe_modal(7,{showContinue:1,subSave:1},"#333")}),subscription_modalDialog_7_subSave_showSocial:(this$38=this,function(){return variantRun=!0,this$38._show_subscribe_modal(7,{showSocialButtons:1,subSave:1},"#333")}),subscription_modalDialog_7_subSave_showClose_showNoThanks:(this$39=this,function(){return variantRun=!0,this$39._show_subscribe_modal(7,{showCloseImg:1,showNoThanks:1,subSave:1},"#333")}),subscription_modalDialog_7_subSave_showClose_showContinue:(this$40=this,function(){return variantRun=!0,this$40._show_subscribe_modal(7,{showCloseImg:1,showContinue:1,subSave:1},"#333")}),subscription_modalDialog_7_subSave_showClose_showSocial:(this$41=this,function(){return variantRun=!0,this$41._show_subscribe_modal(7,{showCloseImg:1,showSocialButtons:1,subSave:1},"#333")}),subscription_modalDialog_7_subSave_showNoThanks_showContinue:(this$42=this,function(){return variantRun=!0,this$42._show_subscribe_modal(7,{showNoThanks:1,showContinue:1,subSave:1},"#333")}),subscription_modalDialog_7_subSave_showNoThanks_showSocial:(this$43=this,function(){return variantRun=!0,this$43._show_subscribe_modal(7,{showNoThanks:1,showSocialButtons:1,subSave:1},"#333")}),subscription_modalDialog_7_subSave_showContinue_showSocial:(this$44=this,function(){return variantRun=!0,this$44._show_subscribe_modal(7,{showContinue:1,showSocialButtons:1,subSave:1},"#333")}),subscription_modalDialog_7_subSave_showClose_showNoThanks_showContinue:(this$45=this,function(){return variantRun=!0,this$45._show_subscribe_modal(7,{showCloseImg:1,showNoThanks:1,showContinue:1,subSave:1},"#333")}),subscription_modalDialog_7_subSave_showClose_showNoThanks_showSocial:(this$46=this,function(){return variantRun=!0,this$46._show_subscribe_modal(7,{showCloseImg:1,showNoThanks:1,showSocialButtons:1,subSave:1},"#333")}),subscription_modalDialog_7_subSave_showClose_showContinue_showSocial:(this$47=this,function(){return variantRun=!0,this$47._show_subscribe_modal(7,{showCloseImg:1,showContinue:1,showSocialButtons:1,subSave:1},"#333")}),subscription_modalDialog_7_subSave_showNoThanks_showContinue_showSocial:(this$48=this,function(){return variantRun=!0,this$48._show_subscribe_modal(7,{showNoThanks:1,showContinue:1,showSocialButtons:1,subSave:1},"#333")}),subscription_modalDialog_7_subSave_showClose_showNoThanks_showContinue_showSocial:(this$49=this,function(){return variantRun=!0,this$49._show_subscribe_modal(7,{showCloseImg:1,showNoThanks:1,showContinue:1,showSocialButtons:1,subSave:1},"#333")}),subscription_modalDialog_8:(this$50=this,function(){return variantRun=!0,this$50._show_subscribe_modal(8,null,"#333")}),subscription_modalDialog_8_showClose:(this$51=this,function(){return variantRun=!0,this$51._show_subscribe_modal(8,{showCloseImg:1},"#333")}),subscription_modalDialog_8_showNoThanks:(this$52=this,function(){return variantRun=!0,this$52._show_subscribe_modal(8,{showNoThanks:1},"#333")}),subscription_modalDialog_8_showContinue:(this$53=this,function(){return variantRun=!0,this$53._show_subscribe_modal(8,{showContinue:1},"#333")}),subscription_modalDialog_8_showSocial:(this$54=this,function(){return variantRun=!0,this$54._show_subscribe_modal(8,{showSocialButtons:1},"#333")}),subscription_modalDialog_8_showClose_showNoThanks:(this$55=this,function(){return variantRun=!0,this$55._show_subscribe_modal(8,{showCloseImg:1,showNoThanks:1},"#333")}),subscription_modalDialog_8_showClose_showContinue:(this$56=this,function(){return variantRun=!0,this$56._show_subscribe_modal(8,{showCloseImg:1,showContinue:1},"#333")}),subscription_modalDialog_8_showClose_showSocial:(this$57=this,function(){return variantRun=!0,this$57._show_subscribe_modal(8,{showCloseImg:1,showSocialButtons:1},"#333")}),subscription_modalDialog_8_showNoThanks_showContinue:(this$58=this,function(){return variantRun=!0,this$58._show_subscribe_modal(8,{showNoThanks:1,showContinue:1},"#333")}),subscription_modalDialog_8_showNoThanks_showSocial:(this$59=this,function(){return variantRun=!0,this$59._show_subscribe_modal(8,{showNoThanks:1,showSocialButtons:1},"#333")}),subscription_modalDialog_8_showContinue_showSocial:(this$60=this,function(){return variantRun=!0,this$60._show_subscribe_modal(8,{showContinue:1,showSocialButtons:1},"#333")}),subscription_modalDialog_8_showClose_showNoThanks_showContinue:(this$61=this,function(){return variantRun=!0,this$61._show_subscribe_modal(8,{showCloseImg:1,showNoThanks:1,showContinue:1},"#333")}),subscription_modalDialog_8_showClose_showNoThanks_showSocial:(this$62=this,function(){return variantRun=!0,this$62._show_subscribe_modal(8,{showCloseImg:1,showNoThanks:1,showSocialButtons:1},"#333")}),subscription_modalDialog_8_showClose_showContinue_showSocial:(this$63=this,function(){return variantRun=!0,this$63._show_subscribe_modal(8,{showCloseImg:1,showContinue:1,showSocialButtons:1},"#333")}),subscription_modalDialog_8_showNoThanks_showContinue_showSocial:(this$64=this,function(){return variantRun=!0,this$64._show_subscribe_modal(8,{showNoThanks:1,showContinue:1,showSocialButtons:1},"#333")}),subscription_modalDialog_8_showClose_showNoThanks_showContinue_showSocial:(this$65=this,function(){return variantRun=!0,this$65._show_subscribe_modal(8,{showCloseImg:1,showNoThanks:1,showContinue:1,showSocialButtons:1},"#333")}),subscription_fullScreen_2:(this$66=this,function(){return variantRun=!0,needToShowMainContent=!1,this$66._show_full_screen(2,{})}),subscription_fullScreen_2_showContinue:(this$67=this,function(){return variantRun=!0,needToShowMainContent=!1,this$67._show_full_screen(2,{showContinue:1})}),subscription_fullScreen_2_showSkip:(this$68=this,function(){return variantRun=!0,needToShowMainContent=!1,this$68._show_full_screen(2,{showCloseFooter:1})}),subscription_fullScreen_2_subSave:(this$69=this,function(){return variantRun=!0,needToShowMainContent=!1,this$69._show_full_screen(2,{subSave:1})}),subscription_fullScreen_2_subSave_showContinue:(this$70=this,function(){return variantRun=!0,needToShowMainContent=!1,this$70._show_full_screen(2,{showContinue:1,subSave:1})}),subscription_fullScreen_2_subSave_showSkip:(this$71=this,function(){return variantRun=!0,needToShowMainContent=!1,this$71._show_full_screen(2,{showCloseFooter:1,subSave:1})}),subscription_fullScreen_2_showDivisionDropdown:(this$72=this,function(){return variantRun=!0,needToShowMainContent=!1,this$72._show_full_screen(2,{showDivisionDropdown:1})}),subscription_fullScreen_2_showContinue_showDivisionDropdown:(this$73=this,function(){return variantRun=!0,needToShowMainContent=!1,this$73._show_full_screen(2,{showContinue:1,showDivisionDropdown:1})}),subscription_fullScreen_2_showSkip_showDivisionDropdown:(this$74=this,function(){return variantRun=!0,needToShowMainContent=!1,this$74._show_full_screen(2,{showCloseFooter:1,showDivisionDropdown:1})}),subscription_fullScreen_2_subSave_showDivisionDropdown:(this$75=this,function(){return variantRun=!0,needToShowMainContent=!1,this$75._show_full_screen(2,{subSave:1,showDivisionDropdown:1})}),subscription_fullScreen_2_subSave_showContinue_showDivisionDropdown:(this$76=this,function(){return variantRun=!0,needToShowMainContent=!1,this$76._show_full_screen(2,{showContinue:1,subSave:1,showDivisionDropdown:1})
}),subscription_fullScreen_2_subSave_showSkip_showDivisionDropdown:(this$77=this,function(){return variantRun=!0,needToShowMainContent=!1,this$77._show_full_screen(2,{showCloseFooter:1,subSave:1,showDivisionDropdown:1})}),subscription_fullScreen_3:(this$78=this,function(){return variantRun=!0,needToShowMainContent=!1,this$78._show_full_screen(3,{})}),subscription_fullScreen_3_showContinue:(this$79=this,function(){return variantRun=!0,needToShowMainContent=!1,this$79._show_full_screen(3,{showContinue:1})}),subscription_fullScreen_4:(this$80=this,function(){return variantRun=!0,needToShowMainContent=!1,this$80._show_full_screen(4,{})}),subscription_fullScreen_4_showContinue:(this$81=this,function(){return variantRun=!0,needToShowMainContent=!1,this$81._show_full_screen(6,{showContinue:1})}),subscription_fullScreen_5:(this$82=this,function(){return variantRun=!0,needToShowMainContent=!1,this$82._show_full_screen(5,{})}),subscription_fullScreen_5_showContinue:(this$83=this,function(){return variantRun=!0,needToShowMainContent=!1,this$83._show_full_screen(5,{showContinue:1})}),subscription_fullScreen_5_showDivisionDropdown:(this$84=this,function(){return variantRun=!0,needToShowMainContent=!1,this$84._show_full_screen(5,{showDivisionDropdown:1})}),subscription_fullScreen_5_showContinue_showDivisionDropdown:(this$85=this,function(){return variantRun=!0,needToShowMainContent=!1,this$85._show_full_screen(5,{showContinue:1,showDivisionDropdown:1})}),subscription_fullScreen_6:(this$86=this,function(){return variantRun=!0,needToShowMainContent=!1,this$86._show_full_screen(6,{})}),subscription_fullScreen_6_showContinue:(this$87=this,function(){return variantRun=!0,needToShowMainContent=!1,this$87._show_full_screen(6,{showContinue:1})}),subscription_fullScreen_7:(this$88=this,function(){return variantRun=!0,needToShowMainContent=!1,this$88._show_full_screen(7,{})}),subscription_fullScreen_7_showContinue:(this$89=this,function(){return variantRun=!0,needToShowMainContent=!1,this$89._show_full_screen(7,{showContinue:1})}),subscription_fullScreen_8:(this$90=this,function(){return variantRun=!0,needToShowMainContent=!1,this$90._show_full_screen(8,{})}),subscription_fullScreen_8_showContinue:(this$91=this,function(){return variantRun=!0,needToShowMainContent=!1,this$91._show_full_screen(8,{showContinue:1})}),subscription_fullScreen_8_showDivisionImg:(this$92=this,function(){return variantRun=!0,needToShowMainContent=!1,this$92._show_full_screen(8,{showDivisionImg:1})}),subscription_fullScreen_8_showContinue_showDivisionImg:(this$93=this,function(){return variantRun=!0,needToShowMainContent=!1,this$93._show_full_screen(8,{showContinue:1,showDivisionImg:1})}),subscription_fullScreen_9:(this$94=this,function(){return variantRun=!0,needToShowMainContent=!1,this$94._show_full_screen(9,{})}),subscription_fullScreen_9_showContinue:(this$95=this,function(){return variantRun=!0,needToShowMainContent=!1,this$95._show_full_screen(9,{showContinue:1})}),subscription_fullScreen_9_showDivisionImg:(this$96=this,function(){return variantRun=!0,needToShowMainContent=!1,this$96._show_full_screen(9,{showDivisionImg:1})}),subscription_fullScreen_9_showContinue_showDivisionImg:(this$97=this,function(){return variantRun=!0,needToShowMainContent=!1,this$97._show_full_screen(9,{showContinue:1,showDivisionImg:1})}),subscription_fullScreen_10:(this$98=this,function(){return variantRun=!0,needToShowMainContent=!1,this$98._show_full_screen(10,{})}),subscription_fullScreen_10_showContinue:(this$99=this,function(){return variantRun=!0,needToShowMainContent=!1,this$99._show_full_screen(10,{showContinue:1})}),subscription_fullScreen_10_showBackgroundImg:(this$100=this,function(){return variantRun=!0,needToShowMainContent=!1,this$100._show_full_screen(10,{showBackgroundImg:1})}),subscription_fullScreen_10_showContinue_showBackgroundImg:(this$101=this,function(){return variantRun=!0,needToShowMainContent=!1,this$101._show_full_screen(10,{showContinue:1,showBackgroundImg:1})}),subscription_fullScreen_10_showDivisionImg:(this$102=this,function(){return variantRun=!0,needToShowMainContent=!1,this$102._show_full_screen(10,{showDivisionImg:1})}),subscription_fullScreen_10_showContinue_showDivisionImg:(this$103=this,function(){return variantRun=!0,needToShowMainContent=!1,this$103._show_full_screen(10,{showContinue:1,showDivisionImg:1})})},nonModalVariantMap={none:function(){return variantRun=!0},subscription_banner_0:(this$104=this,function(){return variantRun=!0,this$104._show_subscribe_non_modal(0,{})}),subscription_banner_1:(this$105=this,function(){return variantRun=!0,this$105._show_subscribe_non_modal(1,{})}),subscription_banner_1_showSocial:(this$106=this,function(){return variantRun=!0,this$106._show_subscribe_non_modal(1,{showSocialButtons:1})}),subscription_banner_1_subSave:(this$107=this,function(){return variantRun=!0,this$107._show_subscribe_non_modal(1,{subSave:1})}),subscription_banner_1_subSave_showSocial:(this$108=this,function(){return variantRun=!0,this$108._show_subscribe_non_modal(1,{showSocialButtons:1,subSave:1})})},expiredDealVariantMap={none:function(){return variantRun=!0},subscription_banner_0:(this$109=this,function(){return variantRun=!0,this$109._show_subscribe_non_modal(0,{})}),subscription_banner_1_expiredDeal:(this$110=this,function(){return variantRun=!0,this$110._show_subscribe_non_modal(1,{showExpiredDealLanguage:1})}),subscription_banner_1_expiredDeal_showSocial:(this$111=this,function(){return variantRun=!0,this$111._show_subscribe_non_modal(1,{showExpiredDealLanguage:1,showSocialButtons:1})}),subscription_modalDialog_8_showClose:(this$112=this,function(){return variantRun=!0,this$112._show_subscribe_modal(8,{showCloseImg:1},"#333")}),subscription_modalDialog_8_showClose_showSocial:(this$113=this,function(){return variantRun=!0,this$113._show_subscribe_modal(8,{showCloseImg:1,showSocialButtons:1},"#333")}),subscription_modalDialog_8_expiredDeal_showClose:(this$114=this,function(){return variantRun=!0,this$114._show_subscribe_modal(8,{showExpiredDealLanguage:1,showCloseImg:1},"#333")}),subscription_modalDialog_8_expiredDeal_showClose_showSocial:(this$115=this,function(){return variantRun=!0,this$115._show_subscribe_modal(8,{showExpiredDealLanguage:1,showCloseImg:1,showSocialButtons:1},"#333")}),subscription_modalDialog_8_showContinue:(this$116=this,function(){return variantRun=!0,this$116._show_subscribe_modal(8,{showContinue:1},"#333")}),subscription_modalDialog_8_showContinue_showSocial:(this$117=this,function(){return variantRun=!0,this$117._show_subscribe_modal(8,{showContinue:1,showSocialButtons:1},"#333")}),subscription_modalDialog_9_expiredDeal_showClose:(this$118=this,function(){return variantRun=!0,this$118._show_subscribe_modal(9,{showExpiredDealLanguage:1,showCloseImg:1},"#333")}),subscription_modalDialog_9_expiredDeal_showClose_showSocial:(this$119=this,function(){return variantRun=!0,this$119._show_subscribe_modal(9,{showExpiredDealLanguage:1,showCloseImg:1,showSocialButtons:1},"#333")})},userInitiatedVariantMap={subscription_modalDialog_3_showClose:(this$120=this,function(){return variantRun=!0,$("#subscription-non-modal-container").remove(),this$120._get_subscribe_modal_and_show(1,{showCloseImg:1},"#333")}),subscription_modalDialog_3_showClose_showSocial:(this$121=this,function(){return variantRun=!0,$("#subscription-non-modal-container").remove(),this$121._get_subscribe_modal_and_show(1,{showCloseImg:1,showSocialButtons:1},"#333")}),subscription_modalDialog_4_showClose:(this$122=this,function(){return variantRun=!0,$("#subscription-non-modal-container").remove(),this$122._get_subscribe_modal_and_show(4,{showCloseImg:1},"#333")}),subscription_modalDialog_5_showClose:(this$123=this,function(){return variantRun=!0,$("#subscription-non-modal-container").remove(),this$123._get_subscribe_modal_and_show(5,{showCloseImg:1},"#333")}),subscription_modalDialog_5_showClose_showSocial:(this$124=this,function(){return variantRun=!0,$("#subscription-non-modal-container").remove(),this$124._get_subscribe_modal_and_show(5,{showCloseImg:1,showSocialButtons:1},"#333")}),subscription_modalDialog_7_showClose:(this$125=this,function(){return variantRun=!0,$("#subscription-non-modal-container").remove(),this$125._get_subscribe_modal_and_show(7,{showCloseImg:1},"#333")}),subscription_modalDialog_7_showClose_showSocial:(this$126=this,function(){return variantRun=!0,$("#subscription-non-modal-container").remove(),this$126._get_subscribe_modal_and_show(7,{showCloseImg:1,showSocialButtons:1},"#333")}),subscription_modalDialog_8_showClose:(this$127=this,function(){return variantRun=!0,$("#subscription-non-modal-container").remove(),this$127._show_subscribe_modal(8,{showCloseImg:1},"#333")}),subscription_modalDialog_8_showClose_showSocial:(this$128=this,function(){return variantRun=!0,$("#subscription-non-modal-container").remove(),this$128._show_subscribe_modal(8,{showCloseImg:1,showSocialButtons:1},"#333")})}},SubscriptionsUI}(),window.SubscriptionsUI=SubscriptionsUI,window.SubscriptionsUI.increment_visited_cookie(),window.SubscriptionsUI.track()}.call(this)}(),/*
 *	jQuery dotdotdot 1.6.16
 *
 *	Copyright (c) Fred Heusschen
 *	www.frebsite.nl
 *
 *	Plugin website:
 *	dotdotdot.frebsite.nl
 *
 *	Dual licensed under the MIT and GPL licenses.
 *	http://en.wikipedia.org/wiki/MIT_License
 *	http://en.wikipedia.org/wiki/GNU_General_Public_License
 */
function($,undef){function children($elem,o,after){var $elements=$elem.children(),isTruncated=!1;$elem.empty();for(var a=0,l=$elements.length;l>a;a++){var $e=$elements.eq(a);if($elem.append($e),after&&$elem.append(after),test($elem,o)){$e.remove(),isTruncated=!0;break}after&&after.detach()}return isTruncated}function ellipsis($elem,$d,$i,o,after){var isTruncated=!1,notx="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",noty="script, .dotdotdot-keep";return $elem.contents().detach().each(function(){var e=this,$e=$(e);if("undefined"==typeof e||3==e.nodeType&&0==$.trim(e.data).length)return!0;if($e.is(noty))$elem.append($e);else{if(isTruncated)return!0;$elem.append($e),after&&$elem[$elem.is(notx)?"after":"append"](after),test($i,o)&&(isTruncated=3==e.nodeType?ellipsisElement($e,$d,$i,o,after):ellipsis($e,$d,$i,o,after),isTruncated||($e.detach(),isTruncated=!0)),isTruncated||after&&after.detach()}}),isTruncated}function ellipsisElement($e,$d,$i,o,after){var e=$e[0];if(!e)return!1;var txt=getTextContent(e),space=-1!==txt.indexOf(" ")?" ":"　",separator="letter"==o.wrap?"":space,textArr=txt.split(separator),position=-1,midPos=-1,startPos=0,endPos=textArr.length-1;for(o.fallbackToLetter&&0==startPos&&0==endPos&&(separator="",textArr=txt.split(separator),endPos=textArr.length-1);endPos>=startPos&&(0!=startPos||0!=endPos);){var m=Math.floor((startPos+endPos)/2);if(m==midPos)break;midPos=m,setTextContent(e,textArr.slice(0,midPos+1).join(separator)+o.ellipsis),test($i,o)?(endPos=midPos,o.fallbackToLetter&&0==startPos&&0==endPos&&(separator="",textArr=textArr[0].split(separator),position=-1,midPos=-1,startPos=0,endPos=textArr.length-1)):(position=midPos,startPos=midPos)}if(-1==position||1==textArr.length&&0==textArr[0].length){var $w=$e.parent();$e.detach();var afterLength=after&&after.closest($w).length?after.length:0;$w.contents().length>afterLength?e=findLastTextNode($w.contents().eq(-1-afterLength),$d):(e=findLastTextNode($w,$d,!0),afterLength||$w.detach()),e&&(txt=addEllipsis(getTextContent(e),o),setTextContent(e,txt),afterLength&&after&&$(e).parent().append(after))}else txt=addEllipsis(textArr.slice(0,position+1).join(separator),o),setTextContent(e,txt);return!0}function test($i,o){return $i.innerHeight()>o.maxHeight}function addEllipsis(txt,o){for(;$.inArray(txt.slice(-1),o.lastCharacter.remove)>-1;)txt=txt.slice(0,-1);return $.inArray(txt.slice(-1),o.lastCharacter.noEllipsis)<0&&(txt+=o.ellipsis),txt}function getSizes($d){return{width:$d.innerWidth(),height:$d.innerHeight()}}function setTextContent(e,content){e.innerText?e.innerText=content:e.nodeValue?e.nodeValue=content:e.textContent&&(e.textContent=content)}function getTextContent(e){return e.innerText?e.innerText:e.nodeValue?e.nodeValue:e.textContent?e.textContent:""}function getPrevNode(n){do n=n.previousSibling;while(n&&1!==n.nodeType&&3!==n.nodeType);return n}function findLastTextNode($el,$top,excludeCurrent){var p,e=$el&&$el[0];if(e){if(!excludeCurrent){if(3===e.nodeType)return e;if($.trim($el.text()))return findLastTextNode($el.contents().last(),$top)}for(p=getPrevNode(e);!p;){if($el=$el.parent(),$el.is($top)||!$el.length)return!1;p=getPrevNode($el[0])}if(p)return findLastTextNode($(p),$top)}return!1}function getElement(e,$i){return e?"string"==typeof e?(e=$(e,$i),e.length?e:!1):e.jquery?e:!1:!1}function getTrueInnerHeight($el){for(var h=$el.innerHeight(),a=["paddingTop","paddingBottom"],z=0,l=a.length;l>z;z++){var m=parseInt($el.css(a[z]),10);isNaN(m)&&(m=0),h-=m}return h}if(!$.fn.dotdotdot){$.fn.dotdotdot=function(o){if(0==this.length)return $.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){$(this).dotdotdot(o)});var $dot=this;$dot.data("dotdotdot")&&$dot.trigger("destroy.dot"),$dot.data("dotdotdot-style",$dot.attr("style")||""),$dot.css("word-wrap","break-word"),"nowrap"===$dot.css("white-space")&&$dot.css("white-space","normal"),$dot.bind_events=function(){return $dot.bind("update.dot",function(e,c){e.preventDefault(),e.stopPropagation(),opts.maxHeight="number"==typeof opts.height?opts.height:getTrueInnerHeight($dot),opts.maxHeight+=opts.tolerance,"undefined"!=typeof c&&(("string"==typeof c||c instanceof HTMLElement)&&(c=$("<div />").append(c).contents()),c instanceof $&&(orgContent=c)),$inr=$dot.wrapInner('<div class="dotdotdot" />').children(),$inr.contents().detach().end().append(orgContent.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var after=!1,trunc=!1;return conf.afterElement&&(after=conf.afterElement.clone(!0),after.show(),conf.afterElement.detach()),test($inr,opts)&&(trunc="children"==opts.wrap?children($inr,opts,after):ellipsis($inr,$dot,$inr,opts,after)),$inr.replaceWith($inr.contents()),$inr=null,$.isFunction(opts.callback)&&opts.callback.call($dot[0],trunc,orgContent),conf.isTruncated=trunc,trunc}).bind("isTruncated.dot",function(e,fn){return e.preventDefault(),e.stopPropagation(),"function"==typeof fn&&fn.call($dot[0],conf.isTruncated),conf.isTruncated}).bind("originalContent.dot",function(e,fn){return e.preventDefault(),e.stopPropagation(),"function"==typeof fn&&fn.call($dot[0],orgContent),orgContent}).bind("destroy.dot",function(e){e.preventDefault(),e.stopPropagation(),$dot.unwatch().unbind_events().contents().detach().end().append(orgContent).attr("style",$dot.data("dotdotdot-style")||"").data("dotdotdot",!1)}),$dot},$dot.unbind_events=function(){return $dot.unbind(".dot"),$dot},$dot.watch=function(){if($dot.unwatch(),"window"==opts.watch){var $window=$(window),_wWidth=$window.width(),_wHeight=$window.height();$window.bind("resize.dot"+conf.dotId,function(){_wWidth==$window.width()&&_wHeight==$window.height()&&opts.windowResizeFix||(_wWidth=$window.width(),_wHeight=$window.height(),watchInt&&clearInterval(watchInt),watchInt=setTimeout(function(){$dot.trigger("update.dot")},100))})}else watchOrg=getSizes($dot),watchInt=setInterval(function(){if($dot.is(":visible")){var watchNew=getSizes($dot);(watchOrg.width!=watchNew.width||watchOrg.height!=watchNew.height)&&($dot.trigger("update.dot"),watchOrg=watchNew)}},500);return $dot},$dot.unwatch=function(){return $(window).unbind("resize.dot"+conf.dotId),watchInt&&clearInterval(watchInt),$dot};var orgContent=$dot.contents(),opts=$.extend(!0,{},$.fn.dotdotdot.defaults,o),conf={},watchOrg={},watchInt=null,$inr=null;return opts.lastCharacter.remove instanceof Array||(opts.lastCharacter.remove=$.fn.dotdotdot.defaultArrays.lastCharacter.remove),opts.lastCharacter.noEllipsis instanceof Array||(opts.lastCharacter.noEllipsis=$.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),conf.afterElement=getElement(opts.after,$dot),conf.isTruncated=!1,conf.dotId=dotId++,$dot.data("dotdotdot",!0).bind_events().trigger("update.dot"),opts.watch&&$dot.watch(),$dot},$.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},$.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},$.fn.dotdotdot.debug=function(){};var dotId=1,_orgHtml=$.fn.html;$.fn.html=function(str){return str!=undef&&!$.isFunction(str)&&this.data("dotdotdot")?this.trigger("update",[str]):_orgHtml.apply(this,arguments)};var _orgText=$.fn.text;$.fn.text=function(str){return str!=undef&&!$.isFunction(str)&&this.data("dotdotdot")?(str=$("<div />").text(str).html(),this.trigger("update",[str])):_orgText.apply(this,arguments)}}}(jQuery),void function(){var boundTabEvent;null!=window.GIG?window.GIG:window.GIG={},boundTabEvent=!1,GIG.init=function(el){return $(document).ready(function(){var $el;return null!=el&&($el=$(el)),null!=$el||($el=$(document.body)),GIG.Modal.init($el),GIG.Tabs.init($el),GIG.Tooltip.init($el),$el.find("dl.accordion dt:not(.open)").addClass("closed"),$el.find("dl.accordion dt").click(function(){return $(this).toggleClass("open").toggleClass("closed")})}),$(window).load(function(){var $el;return null!=el&&($el=$(el)),null!=$el||($el=$(document.body)),GIG.Utils.truncateElements($el),$(".tab-content").length&&!boundTabEvent?($(document.body).on("tab-open",function(event,data){var $tabContent;return $tabContent=$("#"+data.id),$tabContent.is(":visible")&&$tabContent.find(".should-truncate").length?GIG.Utils.truncateElements($tabContent):void 0}),boundTabEvent=!0):void 0})},GIG.init()}.call(this),void function(){var callOnCloseCallbacks,closeOnBackgroundClick,onCloseCallbacks,onDataModalIdClick,randomModalId;null!=window.GIG?window.GIG:window.GIG={},closeOnBackgroundClick=function(e){return e.target===this&&$(this).data("closeonbgclick")!==!1?GIG.Modal.close(e):void 0},randomModalId=function(){var time,value;return time=(new Date).getTime(),value=Math.floor(1e9*Math.random()+1),""+time+"-"+value},onCloseCallbacks=[],callOnCloseCallbacks=function(modalId){var adjust,cb,index,indexesToRemove;indexesToRemove=[];for(var i$=0,length$=onCloseCallbacks.length;length$>i$;++i$)cb=onCloseCallbacks[i$],index=i$,(null===cb.modalId||cb.modalId===modalId)&&cb.callback(modalId),cb.once&&indexesToRemove.push(index);adjust=0;for(var i$1=0,length$1=indexesToRemove.length;length$1>i$1;++i$1)index=indexesToRemove[i$1],onCloseCallbacks.splice(index-adjust,1),adjust+=1},onDataModalIdClick=function(e){return null!=e&&e.preventDefault(),GIG.Modal.open({id:$(this).data("modal-id")})},GIG.Modal={init:function($body){var $modal,error,scrollWindow;if(null!=$body||($body=$(document.body)),this.reloadBindings($body,!1),""!==window.location.hash){try{$modal=$(".modal"+window.location.hash)}catch(e$){error=e$}(null!=$modal?$modal.length:void 0)>0&&(this.open({el:$modal}),scrollWindow=function(){return window.scrollTo(0,0)},setTimeout(scrollWindow,10))}return $body.on("keyup.modal",function(this$){return function(e){var cache$;if(27===e.which)return(null!=(cache$=this$.currentOpenModal())?cache$.data("closeonesckey"):void 0)!==!1?this$.close(e):void 0}}(this))},close:function(e){var cache$,modalId;return null!=e&&e.preventDefault(),modalId=null!=(cache$=GIG.Modal.currentOpenModal())?cache$.attr("id"):void 0,$(".show-modal").removeClass("show-modal"),$(".modal-open").removeClass("modal-open"),$(".close-modal").off("click",GIG.Modal.close),$(".modal").off("click",closeOnBackgroundClick),null!=modalId?callOnCloseCallbacks(modalId):void 0},open:function(options){var $body,$el,id,modalEvent;return this.close(),$body=$(document.body),$el=options.el?$(options.el):$("#"+options.id),$el.addClass("show-modal"),$body.addClass("modal-open"),$el.find(".close-modal").click(this.close),$el.click(closeOnBackgroundClick),modalEvent="modal-open",id=(null!=options?options.id:void 0)||$el.attr("id"),null!=id?($body.trigger(modalEvent,{id:id}),$body.trigger(""+modalEvent+":"+id)):$body.trigger(modalEvent)},create:function(modalHtml,options){var $modalHtml,$wrapper,id;return null==options&&(options={}),$modalHtml=$(modalHtml),$modalHtml.hasClass("modal")?$modalHtml.attr("id")||$modalHtml.attr("id",randomModalId()):($wrapper=$('<div id="modal-'+randomModalId()+'" class="modal"><div class="modal-body"></div></div>'),$wrapper.find(".modal-body").html($modalHtml),$modalHtml=$wrapper),null!=options.closeOnBgClick&&$modalHtml.data("closeonbgclick",options.closeOnBgClick),null!=options.closeOnEscKey&&$modalHtml.data("closeonesckey",options.closeOnEscKey),$(document.body).append($modalHtml),this.open({el:$modalHtml}),id=$modalHtml.attr("id"),(null==options.destroyOnClose||options.destroyOnClose===!0)&&this.onClose(this.destroy,id,!0),"function"==typeof options.onClose&&this.onClose(options.onClose,id,!0),id},currentOpenModal:function(){return $(".modal.show-modal")},destroy:function(modalId){var $modal;return $modal=null!=modalId?$("#"+modalId):this.currentOpenModal(),(null==modalId||$("#"+modalId+".show-modal").length>0)&&this.close(),$modal.remove()},onClose:function(callback,modalId,once){return null==modalId&&(modalId=null),null==once&&(once=!1),onCloseCallbacks.push({callback:callback,modalId:modalId,once:once})},reloadBindings:function(el,unbindFirst){var $el,$elements;return null==el&&(el=document.body),null==unbindFirst&&(unbindFirst=!0),$el=$(el),$elements=$el.find("[data-modal-id]"),unbindFirst&&$elements.off(onDataModalIdClick),$elements.click(onDataModalIdClick)}}}.call(this),null!=window.GIG?window.GIG:window.GIG={},GIG.Tabs={init:function($body){var activeTabs,selectors,tabTrigger;null!=$body||($body=$(document.body)),this.reloadBindings($body,!0),this.helpers.activateTabContent(".tab-contents .active"),activeTabs=$(this.helpers.tabTriggersSelector(".active"));for(var i$=0,length$=activeTabs.length;length$>i$;++i$)tabTrigger=activeTabs[i$],this.helpers.highlightTab(tabTrigger),this.helpers.activateTabContent("#"+$(tabTrigger).data("tab-id"));return""!==window.location.hash?(selectors=window.location.hash.slice(1).split(","),function(accum$){for(var selector,i$1=0,length$1=selectors.length;length$1>i$1;++i$1)selector=selectors[i$1],accum$.push(""!==selector?function(){var $hashTabs,error,tabContent;try{return $hashTabs=$(this.helpers.tabTriggersSelector("[data-tab-id='"+selector+"']")),this.helpers.highlightTab($hashTabs),tabContent=".tab-content#"+selector,this.helpers.activateTabContent(tabContent),this.helpers.openParentTabs(tabContent)}catch(e$){return error=e$,null}}.call(this):void 0);return accum$}.call(this,[])):void 0},helpers:{tabTriggersSelector:function(selector){return null==selector&&(selector="[data-tab-id]"),".tabs "+selector+", .pills "+selector},activateTabContent:function(el){var $adjacentTabs,$body,$newTabContent,id;return null==el?!1:($newTabContent=$(el),id=$newTabContent.attr("id"),$body=$(document.body),$newTabContent.addClass("active"),$newTabContent.show(),$body.trigger("tab-open",{id:id}),$body.trigger("tab-open:"+id),$adjacentTabs=$newTabContent.siblings(".tab-content"),$adjacentTabs.removeClass("active"),$adjacentTabs.hide())},highlightTab:function(el){var $newTab;return null==el?!1:($newTab=$(el),$newTab.addClass("active"),$newTab.siblings().removeClass("active"))},openParentTabs:function(el){var $thisTab,$unopenedParents;return null==el?!1:($thisTab=$(el),$unopenedParents=$thisTab.parents(".tab-content").not(".active"),function(accum$){for(var parent,i$=0,length$=$unopenedParents.length;length$>i$;++i$)parent=$unopenedParents[i$],accum$.push(function(){var error;try{return this.activateTabContent(parent),this.highlightTab(this.tabTriggersSelector("[data-tab-id='"+$(parent).attr("id")+"']"))}catch(e$){return error=e$,null}}.call(this));return accum$}.call(this,[]))},tab:function(e){var $this,error,selector,tabId;if(null!=e&&e.preventDefault(),$this=$(this),tabId=$this.data("tab-id"),null==tabId||$this.hasClass("active"))return null;selector="#"+tabId,$this.data("push-state")&&null!=window.history&&"function"==typeof window.history.pushState&&window.history.pushState(null,null,selector),GIG.Tabs.helpers.highlightTab($this);try{return GIG.Tabs.helpers.activateTabContent(selector),GIG.Tabs.helpers.openParentTabs(selector)}catch(e$){return error=e$,null}}},reloadBindings:function(el,unbindFirst){var $el,$elements;return null==el&&(el=document.body),null==unbindFirst&&(unbindFirst=!0),$el=$(el),$elements=$el.find(this.helpers.tabTriggersSelector()),unbindFirst&&$elements.off("click",this.helpers.tab),$elements.on("click",this.helpers.tab)}},void function(){function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}var POSITION_CLASSES;null!=window.GIG?window.GIG:window.GIG={},POSITION_CLASSES=[".position-bottom",".position-left",".position-right",".position-top"],GIG.Tooltip={tooltips:{},init:function($body){return null!=$body||($body=$(document.body)),this.reloadBindings($body,!0),$body.on("modal-open",function(){var $positionedTooltips;return $positionedTooltips=$(".tooltip").filter(POSITION_CLASSES.join(", ")),$.each($positionedTooltips,function(i,tooltip){return GIG.Tooltip.close(tooltip)})})},helpers:{calculatePositioning:function(target,tooltip){var $body,$target,$tooltip,animationOptions,bodyWidth,cache$,indicatorStyleOptions,offset,originalPositionType,positionType,potentialOffset,targetHeight,targetWidth,tooltipHeight,tooltipStyleOptions,tooltipWidth;switch($target=$(target),$tooltip=$(tooltip),$body=$(document.body),bodyWidth=$body.width(),targetHeight=$target.outerHeight(),targetWidth=$target.outerWidth(),tooltipHeight=$tooltip.outerHeight(),tooltipWidth=$tooltip.outerWidth(),offset=$target.offset(),cache$=$target.attr("data-position"),originalPositionType=null!=cache$?cache$:$target.parent(".tooltip-trigger").attr("data-position"),positionType=this.determinePositionType(originalPositionType,offset,$target,$tooltip,$body),animationOptions={opacity:"1"},tooltipStyleOptions={left:"auto",right:"auto","z-index":""},$target.parents(".modal").length&&(tooltipStyleOptions["z-index"]=1001),positionType){case"bottom":tooltipStyleOptions.top=offset.top+targetHeight-10,animationOptions.top="+=10";break;case"left":tooltipStyleOptions.left=offset.left-tooltipWidth+10,animationOptions.left="-=10";break;case"right":tooltipStyleOptions.left=offset.left+targetWidth-10,animationOptions.left="+=10";break;default:tooltipStyleOptions.top=offset.top-tooltipHeight+10,animationOptions.top="-=10"}return"left"===positionType||"right"===positionType?(tooltipStyleOptions.top=offset.top-tooltipHeight/2+10,indicatorStyleOptions={left:"",right:"",top:tooltipHeight/2-6}):(potentialOffset=offset.left-tooltipWidth/2+targetWidth/2,20>=potentialOffset?(tooltipStyleOptions.left=20,indicatorStyleOptions=this.positionIndicator(!0,offset,targetWidth,bodyWidth)):potentialOffset+tooltipWidth>=bodyWidth-20?(tooltipStyleOptions.right=20,indicatorStyleOptions=this.positionIndicator(!1,offset,targetWidth,bodyWidth)):(tooltipStyleOptions.left=potentialOffset,indicatorStyleOptions={left:tooltipWidth/2-6,top:""})),{animationOptions:animationOptions,indicatorStyleOptions:indicatorStyleOptions,positionType:positionType,tooltipStyleOptions:tooltipStyleOptions}},determinePositionType:function(positionType,offset,target,tooltip,body){var $body,$target,$tooltip;if($tooltip=$(tooltip),$target=$(target),$body=$(body),"left"===positionType||"right"===positionType){if(($body.hasClass("rtl")||"rtl"===$body.attr("dir"))&&(positionType="left"===positionType?"right":"left"),"left"===positionType){if(!(offset.left>=$tooltip.outerWidth()+20))return"top"}else if(!(offset.left+$target.outerWidth()+$tooltip.outerWidth()<=$body.outerWidth()-20))return"top";return positionType}return"bottom"===positionType||"top"===positionType?positionType:"top"},positionIndicator:function(left,offset,targetWidth,bodyWidth){var offsetBy;return offsetBy=left?{left:offset.left+targetWidth/2-26,right:"",top:""}:{left:"",right:bodyWidth-(offset.left+targetWidth/2)-26,top:""}},stopAnimations:function(tooltip){var $tooltip,tooltipId;return $tooltip=$(tooltip),tooltipId=$tooltip.attr("id"),$tooltip.stop(!0),null!=(null!=GIG.Tooltip.tooltips[tooltipId]?GIG.Tooltip.tooltips[tooltipId].timer:void 0)?clearTimeout(GIG.Tooltip.tooltips[tooltipId].timer):void 0},tooltip:function(e){var $target,$tooltip,$trigger,positionClass,positionInfo,tooltip,tooltipId,triggerEvent;if($trigger=$(this),tooltipId=$trigger.attr("data-tooltip-id"),(null!=GIG.Tooltip.tooltips[tooltipId]?GIG.Tooltip.tooltips[tooltipId].shownOnTrigger:void 0)!==$trigger[0]){null!=e&&e.preventDefault(),$tooltip=$("#"+tooltipId),$target=$trigger.find(".tooltip-target"),$target.length||($target=$trigger),triggerEvent=$trigger.attr("data-trigger-event"),tooltip=null!=GIG.Tooltip.tooltips[tooltipId]?GIG.Tooltip.tooltips[tooltipId]:GIG.Tooltip.tooltips[tooltipId]={},tooltip.shownOnTrigger=$trigger[0],null!=tooltip.boundTriggers?tooltip.boundTriggers:tooltip.boundTriggers=[],GIG.Tooltip.helpers.stopAnimations($tooltip),tooltip.animationSpeed="true"===$trigger.attr("data-dont-animate")?0:200,null!=triggerEvent&&$tooltip.addClass("tooltip-click"),positionInfo=GIG.Tooltip.helpers.calculatePositioning($target,$tooltip),$tooltip.css(positionInfo.tooltipStyleOptions),null!=positionInfo.indicatorStyleOptions&&$tooltip.find(".indicator").css(positionInfo.indicatorStyleOptions);for(var i$=0,length$=POSITION_CLASSES.length;length$>i$;++i$)positionClass=POSITION_CLASSES[i$],$tooltip.removeClass(positionClass.slice(1));return $tooltip.addClass("position-"+positionInfo.positionType),$tooltip.css("display","block"),$tooltip.animate(positionInfo.animationOptions,tooltip.animationSpeed,function(){var $closers,hideTooltip;return $tooltip.addClass("tooltip-open"),hideTooltip=function(){return tooltip.shownOnTrigger?void 0:GIG.Tooltip.close($tooltip)},in$($trigger[0],tooltip.boundTriggers)||(null!=tooltip.timer&&clearTimeout(tooltip.timer),tooltip.timer=null,null!=triggerEvent?$tooltip.children(".tooltip-close").length>0||$tooltip.append('<a class="tooltip-close icon-x"></a>'):($trigger.on("mouseleave",function(){return clearTimeout(tooltip.timer),tooltip.shownOnTrigger=!1,tooltip.timer=setTimeout(hideTooltip,tooltip.animationSpeed)}),tooltip.boundTriggers.push($trigger[0]))),tooltip.boundTooltip||($closers=$tooltip.children(".tooltip-close"),$closers.unbind("click"),$closers.on("click",function(){return tooltip.shownOnTrigger=!1,hideTooltip()}),null!=triggerEvent)?void 0:($tooltip.on("mouseleave",function(){return tooltip.shownOnTrigger=!1,hideTooltip()}),$tooltip.on("mouseover",function(){return tooltip.shownOnTrigger?void 0:(GIG.Tooltip.helpers.stopAnimations($tooltip),$tooltip.css("opacity","1"))}),tooltip.boundTooltip=!0)})}},unbindSpecialTriggers:function(elements){return null==elements&&(elements=[]),function(accum$){for(var $el,el,trigger,i$=0,length$=elements.length;length$>i$;++i$)el=elements[i$],$el=$(el),trigger=$el.attr("data-trigger-event"),$el.off(trigger,GIG.Tooltip.helpers.tooltip),accum$.push($el.off("mouseover",GIG.Tooltip.helpers.tooltip));return accum$}.call(this,[])}},close:function(el){var $tooltip,postAnimate,tooltip,tooltipId;return $tooltip=$(el),$tooltip.hasClass("tooltip")?(tooltipId=$tooltip.attr("id"),tooltip=null!=GIG.Tooltip.tooltips[tooltipId]?GIG.Tooltip.tooltips[tooltipId]:GIG.Tooltip.tooltips[tooltipId]={animationSpeed:200},tooltip.shownOnTrigger=!1,GIG.Tooltip.helpers.stopAnimations($tooltip),postAnimate=function(){return $tooltip.removeClass("tooltip-open"),tooltip.shownOnTrigger?void 0:$tooltip.hide()},$tooltip.animate({opacity:0},tooltip.animationSpeed,postAnimate)):null},reloadBindings:function(el,unbindFirst){var $elements,$normalTriggers,$specialTriggers,touchSupported;return null==el&&(el=document.body),null==unbindFirst&&(unbindFirst=!0),$elements=$(el).find(".tooltip-trigger"),touchSupported=Modernizr.touch,touchSupported&&$elements.filter(":not([data-trigger-event])").attr("data-trigger-event","click"),$specialTriggers=$elements.filter("[data-trigger-event]"),$normalTriggers=$elements.not($specialTriggers),unbindFirst&&($normalTriggers.off("mouseover",this.helpers.tooltip),this.helpers.unbindSpecialTriggers($specialTriggers)),$normalTriggers.on("mouseover",this.helpers.tooltip),$.each($specialTriggers,function(i,trigger){var $trigger,e;if($trigger=$(trigger),!$trigger.find(".tooltip-trigger").length){!touchSupported||$trigger.hasClass("icon-question")||$trigger.hasClass("icon-info")||$trigger.find(".tooltip-target").length||$trigger.append("&nbsp;<span class='tooltip-target icon-question'></div>");try{return $trigger.on($trigger.attr("data-trigger-event")||"click",GIG.Tooltip.helpers.tooltip)}catch(e$){return e=e$,$trigger.on("mouseover",GIG.Tooltip.helpers.tooltip)}}})}}}.call(this),void function(){var isBoolean,truncateElements;isBoolean=function(value){return"boolean"==typeof value},truncateElements=function(el,options){var $truncateElements,truncateThis;return null==el&&(el=document.body),null==options&&(options={}),$truncateElements=$(el).find(".should-truncate"),$truncateElements.length>0?(options={ellipsis:options.ellipsis||"... ",wrap:options.wrap||"word",fallbackToLetter:isBoolean(options.fallbackToLetter)?options.fallbackToLetter:!0,watch:isBoolean(options.watch)?options.watch:!1,tolerance:options.tolerance||0},truncateThis=function(element){return setTimeout(function(){return $(element).dotdotdot(options)},0)},function(accum$){for(var element,i$=0,length$=$truncateElements.length;length$>i$;++i$)element=$truncateElements[i$],accum$.push(truncateThis(element));return accum$}.call(this,[])):void 0},null!=window.GIG?window.GIG:window.GIG={},null!=window.GIG.Utils?window.GIG.Utils:window.GIG.Utils={},window.GIG.Utils.truncateElements=truncateElements}.call(this),void function(){var DivisionSelector;DivisionSelector=function(){function DivisionSelector(param$){this.el=param$,this.$el=$(this.el),this.initialize()}return DivisionSelector.prototype.initialize=function(){return this.moduleDrawer=this.$el.find(".module"),this.moduleControl=this.$el.find(".module-control"),this.subscribeDrawer=$("#subscribe-drawer"),this.subscribeToggle=this.$el.find(".email-link"),this.attachToggleListener(),this.attachHideListener()},DivisionSelector.prototype.attachToggleListener=function(){return this.moduleControl.on("click.toggleDrawer",function(this$){return function(){return this$.moduleDrawer.slideToggle()}}(this)),this.subscribeToggle.on("click.toggleSubscribeDrawer",function(this$){return function(){return this$.subscribeDrawer.slideToggle()}}(this))},DivisionSelector.prototype.attachHideListener=function(){return this.$el.find(".hide-link").on("click.hideLink",function(this$){return function(){return this$.moduleDrawer.slideUp()}}(this))},DivisionSelector.prototype.attachEmailListener=function(){return this.$el.find(".email-link").on("click.emailLink",function(){return $("#email-address").focus()})},DivisionSelector}(),window.DivisionSelector=DivisionSelector}.call(this),void function(){function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}var DeprecatedDivisionSelector;DeprecatedDivisionSelector=function(super$){function DeprecatedDivisionSelector(param$){this.el=param$,this.$el=$(this.el),this.initialize(),this.initializeDeprecatedSelector()}return extends$(DeprecatedDivisionSelector,super$),DeprecatedDivisionSelector.prototype.initializeDeprecatedSelector=function(){return this.stateChooser=this.$el.find("#state_chooser"),this.divisionList=this.$el.find("#division_list_new"),this.attachStateChooserListener()},DeprecatedDivisionSelector.prototype.attachStateChooserListener=function(){return this.stateChooser.on("click.chooseState","li:not(.selected)",function(this$){return function(e){var divisionToggles,stateToggles,target;return target=$(e.target),stateToggles=target.add(this$.stateChooser.find("li.selected")),divisionToggles=this$.divisionList.find(".current").add(this$.divisionList.find("ul."+target.attr("id"))),stateToggles.toggleClass("selected"),divisionToggles.toggleClass("current")}}(this))},DeprecatedDivisionSelector}(DivisionSelector),window.DeprecatedDivisionSelector=DeprecatedDivisionSelector}.call(this),void function(){var CookieBanner;CookieBanner=function(){function CookieBanner(param$){this.el=param$,this.$el=$(this.el),this.initialize()}return CookieBanner.prototype.initialize=function(){return this.delay=300,Cookie.get("acknowledge_cookies")?void 0:(this.$el.fadeIn(this.delay),this.attachHideListener())},CookieBanner.prototype.attachHideListener=function(){var acknowledgeLink;return acknowledgeLink=this.$el.find("#ls-accept-cookies"),acknowledgeLink.one("click.cookie-banner-action",function(this$){return function(e){return e.preventDefault(),Groupon.Utils.setSiteCookies({acknowledge_cookies:!0}),this$.$el.fadeOut(this$.delay)}}(this))},CookieBanner}(),window.CookieBanner=CookieBanner}.call(this),//     Backbone may be freely distributed under the MIT license.
function(){var Backbone,root=this,previousBackbone=root.Backbone,array=[],push=array.push,slice=array.slice,splice=array.splice;Backbone="undefined"!=typeof exports?exports:root.Backbone={},Backbone.VERSION="1.0.0";var _=root._;_||"undefined"==typeof require||(_=require("underscore")),Backbone.$=root.jQuery||root.Zepto||root.ender||root.$,Backbone.noConflict=function(){return root.Backbone=previousBackbone,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var Events=Backbone.Events={on:function(name,callback,context){if(!eventsApi(this,"on",name,[callback,context])||!callback)return this;this._events||(this._events={});var events=this._events[name]||(this._events[name]=[]);return events.push({callback:callback,context:context,ctx:context||this}),this},once:function(name,callback,context){if(!eventsApi(this,"once",name,[callback,context])||!callback)return this;var self=this,once=_.once(function(){self.off(name,once),callback.apply(this,arguments)});return once._callback=callback,this.on(name,once,context)},off:function(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,"off",name,[callback,context]))return this;if(!name&&!callback&&!context)return this._events={},this;for(names=name?[name]:_.keys(this._events),i=0,l=names.length;l>i;i++)if(name=names[i],events=this._events[name]){if(this._events[name]=retain=[],callback||context)for(j=0,k=events.length;k>j;j++)ev=events[j],(callback&&callback!==ev.callback&&callback!==ev.callback._callback||context&&context!==ev.context)&&retain.push(ev);retain.length||delete this._events[name]}return this},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,"trigger",name,args))return this;var events=this._events[name],allEvents=this._events.all;return events&&triggerEvents(events,args),allEvents&&triggerEvents(allEvents,arguments),this},stopListening:function(obj,name,callback){var listeners=this._listeners;if(!listeners)return this;var deleteListener=!name&&!callback;"object"==typeof name&&(callback=this),obj&&((listeners={})[obj._listenerId]=obj);for(var id in listeners)listeners[id].off(name,callback,this),deleteListener&&delete this._listeners[id];return this}},eventSplitter=/\s+/,eventsApi=function(obj,action,name,rest){if(!name)return!0;if("object"==typeof name){for(var key in name)obj[action].apply(obj,[key,name[key]].concat(rest));return!1}if(eventSplitter.test(name)){for(var names=name.split(eventSplitter),i=0,l=names.length;l>i;i++)obj[action].apply(obj,[names[i]].concat(rest));return!1}return!0},triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx);return;case 1:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:for(;++i<l;)(ev=events[i]).callback.apply(ev.ctx,args)}},listenMethods={listenTo:"on",listenToOnce:"once"};_.each(listenMethods,function(implementation,method){Events[method]=function(obj,name,callback){var listeners=this._listeners||(this._listeners={}),id=obj._listenerId||(obj._listenerId=_.uniqueId("l"));return listeners[id]=obj,"object"==typeof name&&(callback=this),obj[implementation](name,callback,this),this}}),Events.bind=Events.on,Events.unbind=Events.off,_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var defaults,attrs=attributes||{};options||(options={}),this.cid=_.uniqueId("c"),this.attributes={},_.extend(this,_.pick(options,modelOptions)),options.parse&&(attrs=this.parse(attrs,options)||{}),(defaults=_.result(this,"defaults"))&&(attrs=_.defaults({},attrs,defaults)),this.set(attrs,options),this.changed={},this.initialize.apply(this,arguments)},modelOptions=["url","urlRoot","collection"];_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return null!=this.get(attr)},set:function(key,val,options){var attr,attrs,unset,changes,silent,changing,prev,current;if(null==key)return this;if("object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options||(options={}),!this._validate(attrs,options))return!1;unset=options.unset,silent=options.silent,changes=[],changing=this._changing,this._changing=!0,changing||(this._previousAttributes=_.clone(this.attributes),this.changed={}),current=this.attributes,prev=this._previousAttributes,this.idAttribute in attrs&&(this.id=attrs[this.idAttribute]);for(attr in attrs)val=attrs[attr],_.isEqual(current[attr],val)||changes.push(attr),_.isEqual(prev[attr],val)?delete this.changed[attr]:this.changed[attr]=val,unset?delete current[attr]:current[attr]=val;if(!silent){changes.length&&(this._pending=!0);for(var i=0,l=changes.length;l>i;i++)this.trigger("change:"+changes[i],this,current[changes[i]],options)}if(changing)return this;if(!silent)for(;this._pending;)this._pending=!1,this.trigger("change",this,options);return this._pending=!1,this._changing=!1,this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:!0}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:!0}))},hasChanged:function(attr){return null==attr?!_.isEmpty(this.changed):_.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):!1;var val,changed=!1,old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff)_.isEqual(old[attr],val=diff[attr])||((changed||(changed={}))[attr]=val);return changed},previous:function(attr){return null!=attr&&this._previousAttributes?this._previousAttributes[attr]:null},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){options=options?_.clone(options):{},void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){return model.set(model.parse(resp,options),options)?(success&&success(model,resp,options),model.trigger("sync",model,resp,options),void 0):!1},wrapError(this,options),this.sync("read",this,options)},save:function(key,val,options){var attrs,method,xhr,attributes=this.attributes;if(null==key||"object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,!(!attrs||options&&options.wait||this.set(attrs,options)))return!1;if(options=_.extend({validate:!0},options),!this._validate(attrs,options))return!1;attrs&&options.wait&&(this.attributes=_.extend({},attributes,attrs)),void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){model.attributes=attributes;var serverAttrs=model.parse(resp,options);return options.wait&&(serverAttrs=_.extend(attrs||{},serverAttrs)),_.isObject(serverAttrs)&&!model.set(serverAttrs,options)?!1:(success&&success(model,resp,options),model.trigger("sync",model,resp,options),void 0)},wrapError(this,options),method=this.isNew()?"create":options.patch?"patch":"update","patch"===method&&(options.attrs=attrs),xhr=this.sync(method,this,options),attrs&&options.wait&&(this.attributes=attributes),xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,destroy=function(){model.trigger("destroy",model,model.collection,options)};if(options.success=function(resp){(options.wait||model.isNew())&&destroy(),success&&success(model,resp,options),model.isNew()||model.trigger("sync",model,resp,options)},this.isNew())return options.success(),!1;wrapError(this,options);var xhr=this.sync("delete",this,options);return options.wait||destroy(),xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();return this.isNew()?base:base+("/"===base.charAt(base.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(resp){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(options){return this._validate({},_.extend(options||{},{validate:!0}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;return error?(this.trigger("invalid",this,error,_.extend(options||{},{validationError:error})),!1):!0}});var modelMethods=["keys","values","pairs","invert","pick","omit"];_.each(modelMethods,function(method){Model.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.attributes),_[method].apply(_,args)}});var Collection=Backbone.Collection=function(models,options){options||(options={}),options.url&&(this.url=options.url),options.model&&(this.model=options.model),void 0!==options.comparator&&(this.comparator=options.comparator),this._reset(),this.initialize.apply(this,arguments),models&&this.reset(models,_.extend({silent:!0},options))},setOptions={add:!0,remove:!0,merge:!0},addOptions={add:!0,merge:!1,remove:!1};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.defaults(options||{},addOptions))},remove:function(models,options){models=_.isArray(models)?models.slice():[models],options||(options={});var i,l,index,model;for(i=0,l=models.length;l>i;i++)model=this.get(models[i]),model&&(delete this._byId[model.id],delete this._byId[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,options.silent||(options.index=index,model.trigger("remove",model,this,options)),this._removeReference(model));return this},set:function(models,options){options=_.defaults(options||{},setOptions),options.parse&&(models=this.parse(models,options)),_.isArray(models)||(models=models?[models]:[]);var i,l,model,existing,sort,at=options.at,sortable=this.comparator&&null==at&&options.sort!==!1,sortAttr=_.isString(this.comparator)?this.comparator:null,toAdd=[],toRemove=[],modelMap={};for(i=0,l=models.length;l>i;i++)(model=this._prepareModel(models[i],options))&&((existing=this.get(model))?(options.remove&&(modelMap[existing.cid]=!0),options.merge&&(existing.set(model.attributes,options),sortable&&!sort&&existing.hasChanged(sortAttr)&&(sort=!0))):options.add&&(toAdd.push(model),model.on("all",this._onModelEvent,this),this._byId[model.cid]=model,null!=model.id&&(this._byId[model.id]=model)));if(options.remove){for(i=0,l=this.length;l>i;++i)modelMap[(model=this.models[i]).cid]||toRemove.push(model);toRemove.length&&this.remove(toRemove,options)}if(toAdd.length&&(sortable&&(sort=!0),this.length+=toAdd.length,null!=at?splice.apply(this.models,[at,0].concat(toAdd)):push.apply(this.models,toAdd)),sort&&this.sort({silent:!0}),options.silent)return this;for(i=0,l=toAdd.length;l>i;i++)(model=toAdd[i]).trigger("add",model,this,options);return sort&&this.trigger("sort",this,options),this},reset:function(models,options){options||(options={});for(var i=0,l=this.models.length;l>i;i++)this._removeReference(this.models[i]);return options.previousModels=this.models,this._reset(),this.add(models,_.extend({silent:!0},options)),options.silent||this.trigger("reset",this,options),this},push:function(model,options){return model=this._prepareModel(model,options),this.add(model,_.extend({at:this.length},options)),model},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return model=this._prepareModel(model,options),this.add(model,_.extend({at:0},options)),model},shift:function(options){var model=this.at(0);return this.remove(model,options),model},slice:function(begin,end){return this.models.slice(begin,end)},get:function(obj){return null==obj?void 0:this._byId[null!=obj.id?obj.id:obj.cid||obj]},at:function(index){return this.models[index]},where:function(attrs,first){return _.isEmpty(attrs)?first?void 0:[]:this[first?"find":"filter"](function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},findWhere:function(attrs){return this.where(attrs,!0)},sort:function(options){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return options||(options={}),_.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(_.bind(this.comparator,this)),options.silent||this.trigger("sort",this,options),this},sortedIndex:function(model,value,context){value||(value=this.comparator);var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _.sortedIndex(this.models,model,iterator,context)},pluck:function(attr){return _.invoke(this.models,"get",attr)},fetch:function(options){options=options?_.clone(options):{},void 0===options.parse&&(options.parse=!0);var success=options.success,collection=this;return options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options),success&&success(collection,resp,options),collection.trigger("sync",collection,resp,options)},wrapError(this,options),this.sync("read",this,options)},create:function(model,options){if(options=options?_.clone(options):{},!(model=this._prepareModel(model,options)))return!1;options.wait||this.add(model,options);var collection=this,success=options.success;return options.success=function(resp){options.wait&&collection.add(model,options),success&&success(model,resp,options)},model.save(null,options),model},parse:function(resp){return resp},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(attrs,options){if(attrs instanceof Model)return attrs.collection||(attrs.collection=this),attrs;options||(options={}),options.collection=this;var model=new this.model(attrs,options);return model._validate(attrs,options)?model:(this.trigger("invalid",this,attrs,options),!1)},_removeReference:function(model){this===model.collection&&delete model.collection,model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){("add"!==event&&"remove"!==event||collection===this)&&("destroy"===event&&this.remove(model,options),model&&event==="change:"+model.idAttribute&&(delete this._byId[model.previous(model.idAttribute)],null!=model.id&&(this._byId[model.id]=model)),this.trigger.apply(this,arguments))}});var methods=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];_.each(methods,function(method){Collection.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.models),_[method].apply(_,args)}});var attributeMethods=["groupBy","countBy","sortBy"];_.each(attributeMethods,function(method){Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _[method](this.models,iterator,context)}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),this._configure(options||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(element,delegate){return this.$el&&this.undelegateEvents(),this.$el=element instanceof Backbone.$?element:Backbone.$(element),this.el=this.$el[0],delegate!==!1&&this.delegateEvents(),this},delegateEvents:function(events){if(!events&&!(events=_.result(this,"events")))return this;this.undelegateEvents();for(var key in events){var method=events[key];if(_.isFunction(method)||(method=this[events[key]]),method){var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,""===selector?this.$el.on(eventName,method):this.$el.on(eventName,selector,method)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(options){this.options&&(options=_.extend({},_.result(this,"options"),options)),_.extend(this,_.pick(options,viewOptions)),this.options=options},_ensureElement:function(){if(this.el)this.setElement(_.result(this,"el"),!1);else{var attrs=_.extend({},_.result(this,"attributes"));this.id&&(attrs.id=_.result(this,"id")),this.className&&(attrs["class"]=_.result(this,"className"));var $el=Backbone.$("<"+_.result(this,"tagName")+">").attr(attrs);this.setElement($el,!1)}}}),Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(options.url||(params.url=_.result(model,"url")||urlError()),null!=options.data||!model||"create"!==method&&"update"!==method&&"patch"!==method||(params.contentType="application/json",params.data=JSON.stringify(options.attrs||model.toJSON(options))),options.emulateJSON&&(params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{}),options.emulateHTTP&&("PUT"===type||"DELETE"===type||"PATCH"===type)){params.type="POST",options.emulateJSON&&(params.data._method=type);var beforeSend=options.beforeSend;options.beforeSend=function(xhr){return xhr.setRequestHeader("X-HTTP-Method-Override",type),beforeSend?beforeSend.apply(this,arguments):void 0}}"GET"===params.type||options.emulateJSON||(params.processData=!1),"PATCH"!==params.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(params.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var xhr=options.xhr=Backbone.ajax(_.extend(params,options));return model.trigger("request",model,xhr,options),xhr};var methodMap={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){options||(options={}),options.routes&&(this.routes=options.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},optionalParam=/\((.*?)\)/g,namedParam=/(\(\?)?:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){_.isRegExp(route)||(route=this._routeToRegExp(route)),_.isFunction(name)&&(callback=name,name=""),callback||(callback=this[name]);var router=this;return Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);callback&&callback.apply(router,args),router.trigger.apply(router,["route:"+name].concat(args)),router.trigger("route",name,args),Backbone.history.trigger("route",router,name,args)}),this},navigate:function(fragment,options){return Backbone.history.navigate(fragment,options),this},_bindRoutes:function(){if(this.routes){this.routes=_.result(this,"routes");for(var route,routes=_.keys(this.routes);null!=(route=routes.pop());)this.route(route,this.routes[route])}},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/]+)"}).replace(splatParam,"(.*?)"),new RegExp("^"+route+"$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param){return param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){this.handlers=[],_.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},routeStripper=/^[#\/]|\s+$/g,rootStripper=/^\/+|\/+$/g,isExplorer=/msie [\w.]+/,trailingSlash=/\/$/;History.started=!1,_.extend(History.prototype,Events,{interval:50,getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(null==fragment)if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=this.location.pathname;var root=this.root.replace(trailingSlash,"");fragment.indexOf(root)||(fragment=fragment.substr(root.length))}else fragment=this.getHash();return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({},{root:"/"},this.options,options),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||7>=docMode);this.root=("/"+this.root+"/").replace(rootStripper,"/"),oldIE&&this._wantsHashChange&&(this.iframe=Backbone.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(fragment)),this._hasPushState?Backbone.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!oldIE?Backbone.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=fragment;var loc=this.location,atRoot=loc.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!atRoot?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&atRoot&&loc.hash&&(this.fragment=this.getHash().replace(routeStripper,""),this.history.replaceState({},document.title,this.root+this.fragment+loc.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(){var current=this.getFragment();return current===this.fragment&&this.iframe&&(current=this.getFragment(this.getHash(this.iframe))),current===this.fragment?!1:(this.iframe&&this.navigate(current),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(fragmentOverride){var fragment=this.fragment=this.getFragment(fragmentOverride),matched=_.any(this.handlers,function(handler){return handler.route.test(fragment)?(handler.callback(fragment),!0):void 0});return matched},navigate:function(fragment,options){if(!History.started)return!1;if(options&&options!==!0||(options={trigger:options}),fragment=this.getFragment(fragment||""),this.fragment!==fragment){this.fragment=fragment;var url=this.root+fragment;if(this._hasPushState)this.history[options.replace?"replaceState":"pushState"]({},document.title,url);else{if(!this._wantsHashChange)return this.location.assign(url);this._updateHash(this.location,fragment,options.replace),this.iframe&&fragment!==this.getFragment(this.getHash(this.iframe))&&(options.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,fragment,options.replace))}options.trigger&&this.loadUrl(fragment)}},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else location.hash="#"+fragment}}),Backbone.history=new History;var extend=function(protoProps,staticProps){var child,parent=this;child=protoProps&&_.has(protoProps,"constructor")?protoProps.constructor:function(){return parent.apply(this,arguments)},_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};return Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,protoProps&&_.extend(child.prototype,protoProps),child.__super__=parent.prototype,child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified')},wrapError=function(model,options){var error=options.error;options.error=function(resp){error&&error(model,resp,options),model.trigger("error",model,resp,options)}}}.call(this),Groupon.Utils.unparam=function(str){var data,keyPairs,keyVal,tuple;if(null==str&&(str=location.search),"string"!=typeof str)throw new TypeError("unparam needs a string, but got "+JSON.stringify(str));data={},keyPairs=str.replace(/\+/g,"%20").split("&");for(var i$=0,length$=keyPairs.length;length$>i$;++i$)if(keyVal=keyPairs[i$],tuple=/^\??([^=]*)=(.*)/.exec(keyVal))try{data[decodeURIComponent(tuple[1])]=decodeURIComponent(tuple[2])}catch(e$){}return data},void function(){var defaultPromptEnabled,inputEmpty,PlaceholderField,setPlaceholder;PlaceholderField=jQuery.fn.PlaceholderField=function(){return PlaceholderField.hasNativePlaceholderSupport()?this:this.each(function(){return PlaceholderField.initPlaceholder($(this))})},PlaceholderField.hasNativePlaceholderSupport=function(){return _.all([document.createElement("input"),document.createElement("textarea")],function(elem){return null!=elem.placeholder})},inputEmpty=function($input){return/^\s*$/.test($input.val())},PlaceholderField.initPlaceholder=function($input){var focusin,focusout;return focusin=function(){return defaultPromptEnabled($input)?$input.val("").removeClass("prompting"):void 0},(focusout=function(){return inputEmpty($input)?setPlaceholder($input):void 0})(),$input.on({focusin:focusin,focusout:focusout})},setPlaceholder=function($input){var cache$;return $input.addClass("prompting"),$input.val((cache$=$input.attr("placeholder"),null!=cache$?cache$:$input.attr("title")))},defaultPromptEnabled=function($input){var placeholder,sansWhitespace;return sansWhitespace=function(val){return val.replace(/\s/g,"")},placeholder=$input.attr("placeholder")||$input.attr("title")||"",sansWhitespace($input.val())===sansWhitespace(placeholder)}}.call(this),void function(){var ns,SearchBar;SearchBar=Groupon.Modules.SearchBar={};for(var cache$=["Autocomplete","Common"],i$=0,length$=cache$.length;length$>i$;++i$)ns=cache$[i$],SearchBar[ns]={}}.call(this),function(){if(!jQuery.support.cors&&jQuery.ajaxTransport&&window.XDomainRequest){var httpRegEx=/^https?:\/\//i,getOrPostRegEx=/^get|post$/i,sameSchemeRegEx=new RegExp("^"+location.protocol,"i"),htmlRegEx=/text\/html/i,jsonRegEx=/\/json/i,xmlRegEx=/\/xml/i;jQuery.ajaxTransport("text html xml json",function(options,userOptions){if(options.crossDomain&&options.async&&getOrPostRegEx.test(options.type)&&httpRegEx.test(options.url)&&sameSchemeRegEx.test(options.url)){var xdr=null,userType=(userOptions.dataType||"").toLowerCase();return{send:function(headers,complete){xdr=new XDomainRequest,/^\d+$/.test(userOptions.timeout)&&(xdr.timeout=userOptions.timeout),xdr.ontimeout=function(){complete(500,"timeout")},xdr.onload=function(){var allResponseHeaders="Content-Length: "+xdr.responseText.length+"\r\nContent-Type: "+xdr.contentType,status={code:200,message:"success"},responses={text:xdr.responseText};try{if("html"===userType||htmlRegEx.test(xdr.contentType))responses.html=xdr.responseText;else if("json"===userType||"text"!==userType&&jsonRegEx.test(xdr.contentType))try{responses.json=jQuery.parseJSON(xdr.responseText)}catch(e){status.code=500,status.message="parseerror"}else if("xml"===userType||"text"!==userType&&xmlRegEx.test(xdr.contentType)){var doc=new ActiveXObject("Microsoft.XMLDOM");doc.async=!1;try{doc.loadXML(xdr.responseText)}catch(e){doc=void 0}if(!doc||!doc.documentElement||doc.getElementsByTagName("parsererror").length)throw status.code=500,status.message="parseerror","Invalid XML: "+xdr.responseText;responses.xml=doc}}catch(parseMessage){throw parseMessage}finally{complete(status.code,status.message,responses,allResponseHeaders)}},xdr.onprogress=function(){},xdr.onerror=function(){complete(500,"error",{text:xdr.responseText})};var postData="";userOptions.data&&(postData="string"===jQuery.type(userOptions.data)?userOptions.data:jQuery.param(userOptions.data)),xdr.open(options.type,options.url),xdr.send(postData)},abort:function(){xdr&&xdr.abort()}}}})}}(),void function(){var SearchBar;SearchBar=Groupon.Modules.SearchBar,SearchBar.Common.GoogleGeocode={getLatLng:function(options){var cache$,error,query,success;return null==options&&(options={}),cache$=options,query=cache$.query,success=cache$.success,error=cache$.error,Groupon.GoogleMaps.newestQuery=query,Groupon.GoogleMaps.abortLoad(),Groupon.GoogleMaps.onLoad=function(){var country,requestOptions;return country=options.country,requestOptions={address:query},"US"!==country&&(requestOptions.componentRestrictions={country:country}),(new Groupon.GoogleMaps.Geocoder).geocode(requestOptions,function(results,status){return query===Groupon.GoogleMaps.newestQuery?success({results:results,status:status}):void 0})},Groupon.GoogleMaps.load(error)},abort:function(){return Groupon.GoogleMaps.abortLoad()}},Groupon.GoogleMaps={load:function(cbError){return null!=Groupon.GoogleMaps.Geocoder?this.onLoad():this._xhr=$.ajax({dataType:"script",url:this.getScriptUrl(),error:cbError})},mapsLoaded:function(){return Groupon.GoogleMaps.Geocoder=window.google.maps.Geocoder,this.onLoad()},encodedChannel:function(){return encodeURIComponent([window.location.host,"main","modules/searchbar/google_geocode","dynamic-js"].join("--"))},getScriptUrl:function(){var head;return head=document.head||document.getElementsByTagName("head")[0],SearchBar.GOOGLE_GEO_URL+"?"+$.param({sensor:!1,callback:"Groupon.GoogleMaps.mapsLoaded",v:3,channel:this.encodedChannel(),region:head.getAttribute("data-country")||"US",language:head.getAttribute("data-language")||"en"})},abortLoad:function(){return null!=this._xhr?this._xhr.abort():void 0}}}.call(this),void function(){var callback,CLOSEST_DIV_URL;CLOSEST_DIV_URL="/layout/get_location_sort?callback=?",Groupon.Modules.SearchBar.Common.ClosestDivision={getClosestDivision:function(options){var cache$,error,lang,lat,lng,loc,locale,success;return null==options&&(options={}),cache$=options,loc=cache$.loc,lat=cache$.lat,lng=cache$.lng,success=cache$.success,error=cache$.error,lang="undefined"!=typeof I18n&&null!=I18n?I18n.lang:void 0,locale="undefined"!=typeof I18n&&null!=I18n?I18n.locale:void 0,null!=this._xhr&&this._xhr.abort(),this._xhr=$.getJSON(CLOSEST_DIV_URL,{loc:loc,lat:lat,lng:lng,lang:lang,locale:locale},success),this._xhr.fail(error)},abort:function(){return null!=this._xhr?this._xhr.abort():void 0}},callback=function(data){return data}}.call(this),void function(){function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}var cache$,ClosestDivision,GoogleGeocode;cache$=Groupon.Modules.SearchBar.Common,ClosestDivision=cache$.ClosestDivision,GoogleGeocode=cache$.GoogleGeocode,Groupon.Modules.SearchBar.Common.Geocoder=function(){function Geocoder(){var instance$;instance$=this,this._googleGeocodeSuccessHandler=function(){return Geocoder.prototype._googleGeocodeSuccessHandler.apply(instance$,arguments)}}return Geocoder.prototype.geocode=function(options){var locationQuery;return null==options&&(options={}),null!=(locationQuery=options.locationQuery)?(GoogleGeocode.abort(),ClosestDivision.abort(),GoogleGeocode.getLatLng({query:locationQuery,country:options.country,error:_.partial(this._googleGeocodeErrorHandler,options),success:_.partial(this._googleGeocodeSuccessHandler,options)})):void 0
},Geocoder.prototype._googleGeocodeSuccessHandler=function(options,googleGeocodeData){var cache$1,country,data,error,geocoderError,geocoderStatus,geocoderSuccess,geolocationData,googleGeocodeResult,keywordQuery,locationQuery,relevantTypes,results,success;return cache$1=options,locationQuery=cache$1.locationQuery,keywordQuery=cache$1.keywordQuery,geocoderSuccess=cache$1.geocoderSuccess,geocoderError=cache$1.geocoderError,country=cache$1.country,"OK"!==(null!=googleGeocodeData?googleGeocodeData.status:void 0)?(geocoderStatus="ZERO_RESULTS"===(null!=googleGeocodeData?googleGeocodeData.status:void 0)?"BAD_LOCATION":"UNAVAILABLE",geocoderError({locationQuery:locationQuery,geocoderStatus:geocoderStatus})):(results=googleGeocodeData.results,"US"===country&&(results=_.filter(results,function(param$){var address_components;return address_components=param$.address_components,_.some(address_components,function(param$1){var short_name;return short_name=param$1.short_name,"US"===short_name||"CA"===short_name})})),relevantTypes=function(result){return _.some(result.types,function(type){return in$(type,["street_address","locality","sublocality","country","political","postal_code"])})},(googleGeocodeResult=_.find(results,relevantTypes))?(geolocationData={geocodeData:{fullAddress:googleGeocodeResult.formatted_address,friendlyName:googleGeocodeResult.formatted_address,lat:googleGeocodeResult.geometry.location.lat(),lng:googleGeocodeResult.geometry.location.lng()},locationQuery:locationQuery},data={keywordQuery:keywordQuery,geolocationData:geolocationData,geocoderSuccess:geocoderSuccess,geocoderError:geocoderError},error=_.partial(this._closestDivisionErrorHandler,data),success=_.partial(this._closestDivisionSuccessHandler,data),this._closestDivisionQuery({loc:locationQuery,geocodeData:geolocationData.geocodeData,error:error,success:success})):geocoderError({locationQuery:locationQuery,geocoderStatus:"BAD_LOCATION"}))},Geocoder.prototype._googleGeocodeErrorHandler=function(options,_,status){var geocoderError;return geocoderError=options.geocoderError,"abort"===status?geocoderError({geocoderStatus:"ABORT"}):geocoderError({locationQuery:options.locationQuery,geocoderStatus:"UNAVAILABLE"})},Geocoder.prototype._closestDivisionQuery=function(options){var cache$1,cache$2,error,geocodeData,lat,lng,loc,success;return null==options&&(options={}),cache$1=options,loc=cache$1.loc,geocodeData=cache$1.geocodeData,success=cache$1.success,error=cache$1.error,null!=geocodeData?(cache$2=geocodeData,lat=cache$2.lat,lng=cache$2.lng,ClosestDivision.getClosestDivision({loc:loc,lat:lat,lng:lng,success:success,error:error})):void 0},Geocoder.prototype._closestDivisionSuccessHandler=function(options,response){var cache$1,geocodeData,geocoderError,geocoderSuccess,geolocationData,keywordQuery,location,locationQuery,parsedLocation;return cache$1=options,keywordQuery=cache$1.keywordQuery,geolocationData=cache$1.geolocationData,geocoderSuccess=cache$1.geocoderSuccess,geocoderError=cache$1.geocoderError,locationQuery=geolocationData.locationQuery,geocodeData=geolocationData.geocodeData,"ok"!==(null!=response?response.status:void 0)?geocoderError({locationQuery:locationQuery,data:geocodeData,geocoderStatus:"BAD_LOCATION"}):(location=function(){var e;try{return response.location}catch(e$){return e=e$,null}}.call(this),null===location?geocoderError({locationQuery:locationQuery,data:geocodeData,geocoderStatus:"BAD_LOCATION"}):(parsedLocation=_.extend({},geocodeData,{lat:location.lat,lng:location.lng,closestDivision:location.closest_division}),geocoderSuccess({locationQuery:locationQuery,parsedLocation:parsedLocation,keywordQuery:keywordQuery})))},Geocoder.prototype._closestDivisionErrorHandler=function(options,xhr,status){var cache$1,data,error,geocoderError,geolocationData,locationQuery;return cache$1=options,geolocationData=cache$1.geolocationData,geocoderError=cache$1.geocoderError,"abort"===status?error={geocoderStatus:"ABORT"}:(locationQuery=geolocationData.locationQuery,data=geolocationData.geocodeData,error={locationQuery:locationQuery,data:data,geocoderStatus:"UNAVAILABLE"}),geocoderError(error)},Geocoder}()}.call(this),void function(){function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}var DOWN_ARROW,ENTER,ESCAPE,LEFT_ARROW,RIGHT_ARROW,TAB,UP_ARROW;TAB=9,ENTER=13,ESCAPE=27,DOWN_ARROW=40,RIGHT_ARROW=39,UP_ARROW=38,LEFT_ARROW=37,Groupon.Modules.SearchBar.Common.Keypress={isValidCharKeyPress:function(e){return null==e.which?!1:this.isCharKeyPress(e)?this.isValidKeyPress(e.which)?!0:!1:!1},isCharKeyPress:function(e){return"number"==typeof e.which&&e.which>0?!e.ctrlKey&&!e.metaKey&&!e.altKey:!1},isValidKeyPress:function(key){return!in$(key,[TAB,ENTER,ESCAPE,UP_ARROW,DOWN_ARROW,LEFT_ARROW,RIGHT_ARROW])},isTabKey:function(key){return key===TAB},isEnterKey:function(key){return key===ENTER},isEscapeKey:function(key){return key===ESCAPE},isUpArrowKey:function(key){return key===UP_ARROW},isDownArrowKey:function(key){return key===DOWN_ARROW}}}.call(this),void function(){var Division,getFullAddressFromSearchLocCookie,getLatLngFromSearchLocCookie,getLocationFromUrl,getSearchLocCookie,isSearchLocCookieFromCurrentDivision,Utils;Utils=Groupon.Utils,Division=function(currentDivision){return{get:function(){return currentDivision},set:function(division){return currentDivision=division}}}(null),Groupon.Modules.SearchBar.Common.Location={setDivision:Division.set,getDivision:Division.get,setSearchLocCookie:function(data){return Cookie.set("search_loc",escape(JSON.stringify(data)))},trackEvent:function(eventName,payload){var defaults;return null==payload&&(payload={}),defaults={b:Cookie.get("b"),pageId:location.pathname},payload=_.extend({},payload,defaults),OptimizeSuite.TrackingHub.add("location-bar-"+eventName,payload)},getInitialLocation:function(){var cache$,cache$1,cache$2,location;return cache$=getLocationFromUrl(),location=null!=cache$?cache$:(cache$1=getFullAddressFromSearchLocCookie(),null!=cache$1?cache$1:(cache$2=this.userFriendlyLocation(),null!=cache$2?cache$2:"")),location.replace(/, USA$/,"")},getInitialLocationLatLng:function(){var cache$,cache$1,cache$2,division,queryParams,searchLoc;return cache$=Utils.unparam(),queryParams=null!=cache$?cache$:{},cache$1=getLatLngFromSearchLocCookie(),searchLoc=null!=cache$1?cache$1:{},cache$2=Division.get(),division=null!=cache$2?cache$2:{},{lat:null!=queryParams.lat?queryParams.lat:null!=searchLoc.lat?searchLoc.lat:division.lat,lng:null!=queryParams.lng?queryParams.lng:null!=searchLoc.lng?searchLoc.lng:division.lng}},userFriendlyLocation:function(division){var abbreviation,name;return null==division&&(division=Division.get()),null==division?"":(name=division.name,abbreviation=null!=division.state?division.state.abbreviation:void 0,null!=abbreviation?""+name+", "+abbreviation:name)}},getLocationFromUrl=function(){return Utils.unparam().address},getLatLngFromSearchLocCookie=function(){var cache$,search_loc;return cache$=getSearchLocCookie(),search_loc=null!=cache$?cache$:{},isSearchLocCookieFromCurrentDivision(search_loc)?{lat:search_loc.lat,lng:search_loc.lng}:void 0},getFullAddressFromSearchLocCookie=function(){var cache$,search_loc;return cache$=getSearchLocCookie(),search_loc=null!=cache$?cache$:{},isSearchLocCookieFromCurrentDivision(search_loc)?search_loc.fullAddress:void 0},isSearchLocCookieFromCurrentDivision=function(search_loc){var cache$,cookieDivision,currentDivision;return cookieDivision=null!=search_loc?search_loc.closestDivision:void 0,currentDivision=null!=(cache$=Division.get())?cache$.id:void 0,cookieDivision===currentDivision},getSearchLocCookie=function(){var e,search_loc;search_loc={};try{search_loc=JSON.parse(decodeURIComponent(Cookie.get("search_loc")))}catch(e$){e=e$;try{search_loc=decodeURIComponent(JSON.parse(Cookie.get("search_loc")))}catch(e$1){e=e$1}}return search_loc}}.call(this),void function(){function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}var I18N_ERROR_AVAILABILITY,I18N_ERROR_BAD_LOCATION,I18N_ERROR_GENERIC,Location;Location=Groupon.Modules.SearchBar.Common.Location,I18N_ERROR_GENERIC="generic",I18N_ERROR_BAD_LOCATION="bad_location",I18N_ERROR_AVAILABILITY="availability",Groupon.Modules.SearchBar.LocationError=function(super$){function LocationError(){var instance$;return instance$=this,this.removeError=function(){return LocationError.prototype.removeError.apply(instance$,arguments)},this.displayError=function(){return LocationError.prototype.displayError.apply(instance$,arguments)},externalCtor$.apply(this,arguments)}var externalCtor$;return extends$(LocationError,super$),externalCtor$=Backbone.View,LocationError.prototype.initialize=function(){return this.$el=$("#location").parent()},LocationError.prototype.errorTemplate=function(query,message){return query=_.escape(query),message=_.escape(message),"<div data-bhw='SearchBarError' class='error-dialog'>\n  <span data-bhc='location-not-found:"+query+"'>"+message+"</span>\n</div>"},LocationError.prototype.displayError=function(message,query){var $errorDialog;return $(window).trigger("click"),message||(message=this.translateError(I18N_ERROR_GENERIC)),$errorDialog=$(this.errorTemplate(query,message)),this.$el.append($errorDialog),$(window).one("click",function(){return $errorDialog.remove()})},LocationError.prototype.removeError=function(){return this.$el.find(".error-dialog").remove()},LocationError.prototype.displayBadLocationError=function(query){var message;return message=this.translateError(I18N_ERROR_BAD_LOCATION),this.displayError(message,query)},LocationError.prototype.displayAvailabilityError=function(query){var message;return message=this.translateError(I18N_ERROR_AVAILABILITY),this.displayError(message,query)},LocationError.prototype.translateError=function(key){return this.$el.attr("data-error-"+key)},LocationError}(Backbone.View)}.call(this),void function(){function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}var Keypress;Keypress=Groupon.Modules.SearchBar.Common.Keypress,Groupon.Modules.SearchBar.LocationBar=function(super$){function LocationBar(){var instance$;return instance$=this,this._updateAutocomplete=function(){return LocationBar.prototype._updateAutocomplete.apply(instance$,arguments)},this.onKeyup=function(){return LocationBar.prototype.onKeyup.apply(instance$,arguments)},this.onKeydown=function(){return LocationBar.prototype.onKeydown.apply(instance$,arguments)},externalCtor$.apply(this,arguments)}var externalCtor$;return extends$(LocationBar,super$),externalCtor$=Backbone.View,LocationBar.prototype.initialize=function(){return this.$input=this.$("#location").bind({keydown:this.onKeydown,keyup:this.onKeyup}),this.$input.PlaceholderField(),this.errorView=new Groupon.Modules.SearchBar.LocationError},LocationBar.prototype.val=function(value,options){var currentVal,silent;return null==options&&(options={}),silent=options.silent,null==value?(currentVal=this.$input.val(),_.isBlank(currentVal)?null:$.trim(currentVal)):(this.$input.val(value).removeClass("prompting"),silent?void 0:this.trigger("change",value))},LocationBar.prototype.onKeydown=function(e){this.errorView.removeError(),Keypress.isEnterKey(e.which)&&(this.trigger("submit",e),null!=this.dropdown&&this.dropdown.hide())},LocationBar.prototype.onKeyup=function(){_.isBlank(this.val())&&this.trigger("empty")},LocationBar.prototype.displayBadLocationError=function(query){return null!=this.dropdown&&this.dropdown.hide(),this.errorView.displayBadLocationError(query)},LocationBar.prototype.displayAvailabilityError=function(query){return null!=this.dropdown&&this.dropdown.hide(),this.errorView.displayAvailabilityError(query)},LocationBar.prototype.enableAutocomplete=function(){return this.dropdown=new Groupon.Modules.SearchBar.Autocomplete.View({context:"locations"}),this.$input.unbind("keydown",this.onKeydown),this.$input.bind({keyup:this._updateAutocomplete,keydown:function(e){Keypress.isEnterKey(e.keyCode)&&e.preventDefault()}}),this.on("empty",function(this$){return function(){return this$.dropdown.hide()}}(this)),this.dropdown.on({"item:selected":function(this$){return function(location){return this$.val(location,{silent:!0})}}(this),submit:function(this$){return function(e){return this$.trigger("submit",e)}}(this)}),this.$el.append(this.dropdown.el)},LocationBar.prototype._updateAutocomplete=function(e){var value;this.dropdown.onKeydown(e),Keypress.isValidKeyPress(e.which)&&(value=this.val(),_.isBlank(value)?this.dropdown.hide():this.dropdown.updateAutocomplete(value))},LocationBar}(Backbone.View)}.call(this),void function(){function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}var Keypress;Keypress=Groupon.Modules.SearchBar.Common.Keypress,Groupon.Modules.SearchBar.KeywordBar=function(super$){function KeywordBar(){var instance$;return instance$=this,this._updateAutocomplete=function(){return KeywordBar.prototype._updateAutocomplete.apply(instance$,arguments)},this.onKeyup=function(){return KeywordBar.prototype.onKeyup.apply(instance$,arguments)},this.onKeydown=function(){return KeywordBar.prototype.onKeydown.apply(instance$,arguments)},externalCtor$.apply(this,arguments)}var externalCtor$;return extends$(KeywordBar,super$),externalCtor$=Backbone.View,KeywordBar.prototype.initialize=function(){return this.$input=this.$("#search"),this.$input.bind("keydown",this.onKeydown),this.$input.bind("keyup",this.onKeyup),this.$input.PlaceholderField(),this.placeholder=this.$input.attr("placeholder")},KeywordBar.prototype.val=function(value){var currentVal;return null!=value?(this.$input.val(value),this.$input.removeClass("prompting")):(currentVal=this.$input.val(),_.isBlank(currentVal)||currentVal===this.placeholder?null:$.trim(currentVal))},KeywordBar.prototype.onKeydown=function(e){Keypress.isEnterKey(e.which)&&this.trigger("submit",e)},KeywordBar.prototype.onKeyup=function(){_.isBlank(this.val())&&this.trigger("empty")},KeywordBar.prototype._updateAutocomplete=function(e){var value;return this.dropdown.onKeydown(e),Keypress.isValidKeyPress(e.which)?(value=this.$input.val(),_.isBlank(value)?this.dropdown.hide():this.dropdown.updateAutocomplete(value)):void 0},KeywordBar}(Backbone.View)}.call(this),void function(){function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}function isOwn$(o,p){return{}.hasOwnProperty.call(o,p)}function extends$(child,parent){function ctor(){this.constructor=child}for(var key in parent)isOwn$(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child}var Location;Location=Groupon.Modules.SearchBar.Common.Location,Groupon.Modules.SearchBarView=function(super$){function SearchBarView(){var instance$;return instance$=this,this._enableLocationBar=function(){return SearchBarView.prototype._enableLocationBar.apply(instance$,arguments)},this._enableKeywordBar=function(){return SearchBarView.prototype._enableKeywordBar.apply(instance$,arguments)},this._geocoderErrorHandler=function(){return SearchBarView.prototype._geocoderErrorHandler.apply(instance$,arguments)},this.onFormSubmit=function(){return SearchBarView.prototype.onFormSubmit.apply(instance$,arguments)},externalCtor$.apply(this,arguments)}var experimentsEnabled,externalCtor$,findSearchOverridesLink,getFormattedQueryString,getLocalUrl,getLocationForSearch,getLocationOverrideUrl,getSearchOverrideUrl,getSearchUrl,redirectTo,submit;return extends$(SearchBarView,super$),externalCtor$=Backbone.View,SearchBarView.prototype.initialize=function(){var cache$,head;return this.$location=$("#location"),this.$el.submit(this.onFormSubmit),head=document.head||document.getElementsByTagName("head")[0],this.country=head.getAttribute("data-country")||"US",this.geocoder=new Groupon.Modules.SearchBar.Common.Geocoder,cache$=this.options,this.freeTextSearchEnabled=cache$.freeTextSearchEnabled,cache$},SearchBarView.prototype.render=function(){return this._enableLocationBar({initialLocation:this.options.initialLocation,initialLocationLatLng:this.options.initialLocationLatLng}),null!=this.freeTextSearchEnabled?this._enableKeywordBar({initialKeyword:this.options.initialKeyword}):void 0},SearchBarView.prototype.onFormSubmit=function(e){var cache$,data,dealSearch,lat,lng,locationInputData,locationMatch,locData,locSearch;return e.preventDefault(),this.$location.off("focusin change focusout").addClass("search-hide-selection"),$(".primary-nav-tab").off("mouseenter"),dealSearch=null!=this.keywordBar?this.keywordBar.val():void 0,locSearch=this.locationBar.val(),null!=dealSearch||null!=locSearch?null==locSearch?submit({dealSearch:encodeURIComponent(dealSearch||"")}):(locationMatch=$("#ls-typeahead-location .typeahead-match"),locationMatch.length?(locationInputData={manuallocation:!1,typeaheadused:!0},cache$=locationMatch.data(),lat=cache$.lat,lng=cache$.lng,data={lat:lat,lng:lng}):(locData=this.$location.data(),locationInputData=_.pick(locData,"manuallocation","typeaheadused","division"),data=_.pick(locData,"lat","lng")),_.extend(data,{query:_.isBlank(dealSearch)?void 0:dealSearch,address:locSearch}),locationInputData.manuallocation?this._geoCodeWithGMaps(data):locationInputData.typeaheadused?null!=locationInputData.division?redirectTo(locationInputData.division,data):this._geoCodeWithDivision(data):redirectTo(null!=Groupon.division?Groupon.division.id:void 0,data)):void 0},SearchBarView.prototype._geoCodeWithDivision=function(options){var address,cache$,CLOSEST_DIV_URL,lang,lat,lng,locale;return null==options&&(options={}),CLOSEST_DIV_URL="/layout/get_location_sort?callback=?",cache$=options,address=cache$.address,lat=cache$.lat,lng=cache$.lng,lang="undefined"!=typeof I18n&&null!=I18n?I18n.lang:void 0,locale="undefined"!=typeof I18n&&null!=I18n?I18n.locale:void 0,null!=this._xhr&&this._xhr.abort(),this._xhr=$.getJSON(CLOSEST_DIV_URL,{loc:address,lat:lat,lng:lng,lang:lang,locale:locale},function(response){var cache$1,closest_division,full_address;return"ok"!==(null!=response?response.status:void 0)?closest_division=null!=Groupon.division?Groupon.division.id:void 0:(cache$1=response.location,closest_division=cache$1.closest_division,full_address=cache$1.full_address,lat=cache$1.lat,lng=cache$1.lng,Location.setSearchLocCookie({fullAddress:full_address,friendlyName:full_address,lat:lat,lng:lng,closestDivision:closest_division})),closest_division?redirectTo(closest_division,options):void 0})},SearchBarView.prototype._geoCodeWithGMaps=function(options){var address,cache$,query;return null==options&&(options={}),cache$=options,address=cache$.address,query=cache$.query,this.geocoder.geocode({locationQuery:address,country:this.country,keywordQuery:query,geocoderSuccess:this._geocoderSuccessHandler,geocoderError:this._geocoderErrorHandler})},SearchBarView.prototype._geocoderSuccessHandler=function(param$){var cache$,keywordQuery,locationQuery,parsedLocation,query;return cache$=param$,locationQuery=cache$.locationQuery,parsedLocation=cache$.parsedLocation,keywordQuery=cache$.keywordQuery,query=keywordQuery,Location.setSearchLocCookie(parsedLocation),Location.trackEvent("geocode-search-success",{query:query,locationQuery:locationQuery,parsedLocation:parsedLocation}),submit({location:parsedLocation,query:query})},SearchBarView.prototype._geocoderErrorHandler=function(param$){var cache$,data,geocoderStatus,locationQuery;return cache$=param$,locationQuery=cache$.locationQuery,data=cache$.data,geocoderStatus=cache$.geocoderStatus,"ABORT"!==geocoderStatus?("BAD_LOCATION"===geocoderStatus?this.locationBar.displayBadLocationError(locationQuery):"UNAVAILABLE"===geocoderStatus&&this.locationBar.displayAvailabilityError(locationQuery),Location.trackEvent("geocode-search-error",{locationQuery:locationQuery,data:data})):void 0},SearchBarView.prototype._enableKeywordBar=function(options){return null==options&&(options={}),this.$el.addClass("free-text-search-enabled"),this.keywordBar=new Groupon.Modules.SearchBar.KeywordBar({el:this.$("#search").parent().parent()}),_.isBlank(options.initialKeyword)||this.keywordBar.val(options.initialKeyword,{silent:!0}),this.keywordBar.on("submit",this.onFormSubmit)},SearchBarView.prototype._enableLocationBar=function(options){var cache$,initialLocation,initialLocationLatLng;return null==options&&(options={}),this.locationBar=new Groupon.Modules.SearchBar.LocationBar({el:this.$location.parent().parent()}),cache$=options,initialLocationLatLng=cache$.initialLocationLatLng,initialLocation=cache$.initialLocation,this.$location.data({manuallocation:!1,city:null!=Groupon.division?Groupon.division.name:void 0,lat:null!=initialLocationLatLng?initialLocationLatLng.lat:void 0,lng:null!=initialLocationLatLng?initialLocationLatLng.lng:void 0}),_.isBlank(initialLocation)||this.$location.val(initialLocation),this.locationBar.on("submit",this.onFormSubmit)},experimentsEnabled=function(experiments){var experimentName,variantName;for(experimentName in experiments)if(variantName=experiments[experimentName],!("undefined"!=typeof Finch&&null!=Finch?Finch.inTreatment({experimentName:experimentName,variantName:variantName}):void 0))return!1;return!0},findSearchOverridesLink=function(dealSearch,currentDivision){var cache$,cache$1,divisions,experiments,guards,link,terms;if(null!=Groupon.Modules.SearchBar.SearchOverrides){dealSearch=$.trim(null!=dealSearch?dealSearch.toLowerCase():void 0);for(var i$=0,length$=Groupon.Modules.SearchBar.SearchOverrides.length;length$>i$;++i$)if(cache$=Groupon.Modules.SearchBar.SearchOverrides[i$],link=cache$.link,terms=cache$.terms,guards=cache$.guards,in$(dealSearch,terms)){if(!guards)return link;if(cache$1=guards,experiments=cache$1.experiments,divisions=cache$1.divisions,experiments&&!experimentsEnabled(experiments))return;if(null==divisions)return link;if(in$(currentDivision,divisions))return link}}return null},getSearchOverrideUrl=function(divisionId,attributes){var address,cache$,key,lat,lng,query,url,val;if(cache$=attributes,address=cache$.address,lat=cache$.lat,lng=cache$.lng,query=cache$.query,url=findSearchOverridesLink(query,divisionId),null!=url){"/travel"===url&&(url+="?lat={lat}&lng={lng}&query={query}&address={address}");for(key in{address:address,lat:lat,lng:lng,query:query})val={address:address,lat:lat,lng:lng,query:query}[key],url=url.replace("{"+key+"}",val);return url.replace(/\s/g,"+")}},getLocationOverrideUrl=function(attributes){var address,cache$,link,locations,query;if(address=attributes.address,null!=(null!=Groupon.Modules.LocationBar?Groupon.Modules.LocationBar.LocationOverrides:void 0))for(var i$=0,length$=Groupon.Modules.LocationBar.LocationOverrides.length;length$>i$;++i$)if(cache$=Groupon.Modules.LocationBar.LocationOverrides[i$],link=cache$.link,locations=cache$.locations,in$(address,locations))return query=getFormattedQueryString(attributes),""+link+"?"+query;return null},submit=function(param$){var cache$,location,newDivision,query,searchAttributes;return null==param$&&(param$={}),cache$=param$,location=cache$.location,query=cache$.query,null!=location||(location=getLocationForSearch()),location?(newDivision=location.closestDivision,searchAttributes={lat:location.lat,lng:location.lng,address:location.fullAddress,query:query},redirectTo(newDivision,searchAttributes)):void 0},redirectTo=function(divisionId,attributes){var newUrl;return Groupon.Utils.setSiteCookies({division:divisionId}),newUrl=getLocationOverrideUrl(attributes)||getSearchOverrideUrl(divisionId,attributes)||getSearchUrl(divisionId,attributes),Groupon.setWindowLocationHref(newUrl)},getLocalUrl=function(divisionId,params){var query;return params.context="local",query=getFormattedQueryString(params),"/browse/"+divisionId+"?"+query},getSearchUrl=function(divisionId,params){var query;return query=getFormattedQueryString(params),"/browse/"+divisionId+"?"+query},getFormattedQueryString=function(params){var head,pieces;return head=document.head||document.getElementsByTagName("head")[0],params.locale=head.getAttribute("data-locale"),pieces=function(accum$){var key,value;for(key in params)value=params[key],accum$.push(value?""+key+"="+encodeURIComponent(value):void 0);return accum$}.call(this,[]),_.compact(pieces).join("&").replace(/\s|%20/g,"+")},getLocationForSearch=function(){var division;return(division=Location.getDivision())?{lat:division.lat,lng:division.lng,fullAddress:Location.userFriendlyLocation(division),closestDivision:division.id}:void 0},SearchBarView}(Backbone.View)}.call(this),void function(){var Location,SearchBar;SearchBar=Groupon.Modules.SearchBar,Location=SearchBar.Common.Location,SearchBar.init=function(options){return SearchBar.GOOGLE_GEO_URL=options.google_geo_url,Location.setDivision(options.division),$(function(){var $search,$searchBar,responsiveLayout,searchBar;return $searchBar=$("form#search-bar"),$searchBar.length&&$searchBar.is(":visible")&&(searchBar=new Groupon.Modules.SearchBarView({el:$searchBar,initialKeyword:Groupon.Utils.unparam().query,initialLocation:Location.getInitialLocation(),initialLocationLatLng:Location.getInitialLocationLatLng(),freeTextSearchEnabled:!0,autocompleteEnabled:!0}),searchBar.render(),responsiveLayout=$("body").is(".responsive-funnel,.ls-responsive"),$search=$("#search"),(responsiveLayout||$search.data("focus"))&&($search.parent().addClass("active-search"),!$searchBar.data("nosearchbarfocus")))?$search.focus():void 0})}}.call(this),Groupon.Utils.externalObjectLoader=function(url,onloadScript,id){var doc,dom,error,iframe,where;null==id&&(id="js-iframe-async"),iframe=document.createElement("iframe"),iframe.src="javascript:false",iframe.title="",iframe.role="presentation",(iframe.frameElement||iframe).style.css="width: 0;height: 0;border: 0",iframe.frameBorder=0,where=document.getElementsByTagName("script"),where=where[where.length-1],where.parentNode.insertBefore(iframe,where);try{doc=iframe.contentWindow.document}catch(e$){error=e$,dom=document.domain,iframe.src="javascript: var d = document.open();d.domain='"+dom+"';void(0);",doc=iframe.contentWindow.document}return doc.open()._load3po=function(){var js,scriptInit;return null!=dom&&(this.domain=dom),scriptInit=this.createElement("script"),scriptInit.type="text/javascript",scriptInit.innerHTML="Groupon = window.parent.Groupon;$ = window.parent.$",this.body.appendChild(scriptInit),js=this.createElement("script"),js.type="text/javascript",js.id=id,js.src=url,null!=onloadScript&&(js.onload=onloadScript),this.body.appendChild(js)},doc.write('<body onload="document._load3po();">'),doc.close()},Groupon.Utils.externalObjectLoaderOnready=function(fn){return"function"==typeof fn?$(document).ready(fn):void 0},function($,window,document,undefined){var $window=$(window);$.fn.lazyload=function(options){function getFold(){var fold={};if(settings.container===undefined||settings.container===window)fold={belowFold:$window.height()+$window.scrollTop(),rightFold:$window.width()+$window.scrollLeft(),aboveFold:$window.scrollTop(),leftFold:$window.scrollLeft()};else{var $container=$(settings.container),containerOffset=$container.offset();fold={belowFold:containerOffset.top+$container.height(),rightFold:containerOffset.left+$container.width(),aboveFold:containerOffset.top,leftFold:containerOffset.left}}return fold}function update(){var fold,scrollPosition,scrollMax,index,startElement,$element,tempElements,tempLength,percentScrolled=0;if(tempElements=settings.skip_invisible?elements.filter(":visible"):elements,0!==tempElements.length){for(tempLength=tempElements.length,fold=getFold(),settings.container===undefined||settings.container===window?(scrollPosition=window.scrollY?window.scrollY:document.body.scrollTop,scrollMax=document.body.scrollHeight):"hidden"==$(settings.container).css("overflow-x")?(scrollPosition=$(settings.container).scrollTop(),scrollMax=settings.container[0].scrollHeight):(scrollPosition=$(settings.container).scrollLeft(),scrollMax=settings.container[0].scrollWidth),scrollPosition||scrollMax||(percentScrolled=scrollPosition/scrollMax),startElement=Math.floor(tempElements.length*percentScrolled),index=startElement-1;index>=0&&($element=tempElements.eq([index]),!(aboveTheTop(fold.aboveFold,$element)||leftOfBegin(fold.leftFold,$element)||belowTheFold(fold.belowFold,$element)||rightOfFold(fold.rightFold,$element)));)$element.trigger("appear"),index--;for(index=startElement;tempLength>index;){if($element=tempElements.eq([index]),belowTheFold(fold.belowFold,$element)||rightOfFold(fold.rightFold,$element)){if(aboveTheTop(fold.aboveFold,$element)||leftOfBegin(fold.leftFold,$element))continue;break}$element.trigger("appear"),index++}}}function imgLoaded(self,imgInfo){var url=imgInfo.url;return"IMG"===self.nodeName?(self.src=url,imgInfo.url2xUsed&&imgInfo.setImageDimensions&&(self.onload=function(){var imgDimensions=getRetinaImageDimensions(this);imgDimensions.width>0&&(this.width=imgDimensions.width),imgDimensions.height>0&&(this.height=imgDimensions.height)})):self.style.backgroundImage="url('"+url+"')",self.loaded=!0,null}function getRetinaImageDimensions(img){var dimensions={};return dimensions=""!=img.style.width||""!=img.style.height?{width:0,height:0}:{width:Math.round(img.width/2),height:Math.round(img.height/2)}}var $container,elements=this,resizeTimer=null,settings={threshold:0,failure_limit:0,event:"scroll",container:window,data_url:"data-original",data_url_2x:"data-original-2x",data_url_2x_alias:"data-original_2x",data_set_2x_dimensions:"data-set-image2x-dimensions",isRetina:window.devicePixelRatio&&window.devicePixelRatio>1,skip_invisible:!0,handle_webkit_error:!1,placeholder:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="},cachedImage=document.createElement("img");options&&$.extend(settings,options);var belowTheFold=function(fold,$element){return fold<=$element.offset().top-settings.threshold},rightOfFold=function(fold,$element){return fold<=$element.offset().left-settings.threshold},aboveTheTop=function(fold,$element){var elementTop=$element.offset().top;return fold<elementTop+settings.threshold?!1:fold>=elementTop+settings.threshold+$element.height()},leftOfBegin=function(fold,$element){var elementLeft=$element.offset().left;return fold<elementLeft+settings.threshold?!1:fold>=elementLeft+settings.threshold+$element.width()};return settings.handle_webkit_error&&!settings.skip_invisible&&(settings.handle_webkit_error=null),Array.prototype.indexOf||(Array.prototype.indexOf=function(val){return jQuery.inArray(val,this)}),$container=settings.container===undefined||settings.container===window?$window:$(settings.container),0===settings.event.indexOf("scroll")&&$container.bind(settings.event,function(){return update()}),this.each(function(){var self=this,$self=$(self);self.loaded=!1,""===self.src&&"IMG"===self.nodeName&&(self.src=settings.placeholder),$self.one("appear",function(){if(!this.loaded){var imgInfo={url:self.getAttribute(settings.data_url),url2xUsed:!1,setImageDimensions:!1},url2x=self.getAttribute(settings.data_url_2x)||self.getAttribute(settings.data_url_2x_alias),setImageDimensions=self.getAttribute(settings.data_set_2x_dimensions),img=cachedImage.cloneNode(!1);settings.isRetina&&url2x!=undefined&&(imgInfo.url=url2x,imgInfo.url2xUsed=!0,imgInfo.setImageDimensions="true"==setImageDimensions),img.onload=imgLoaded(self,imgInfo),img.src=imgInfo.url
}}),0!==settings.event.indexOf("scroll")&&$self.bind(settings.event,function(){self.loaded||$self.trigger("appear")})}),$window.bind("resize",function(){resizeTimer&&clearTimeout(resizeTimer),resizeTimer=setTimeout(update,100)}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&$window.bind("pageshow",function(event){event.originalEvent&&event.originalEvent.persisted&&elements.each(function(){$(this).trigger("appear")})}),$(document).ready(function(){settings.handle_webkit_error&&/webkit/gi.test(navigator.appVersion)?($window.scrollTop($window.scrollTop()+1),update(),$window.scrollTop($window.scrollTop()-1)):update()}),this}}(jQuery,window,document),Groupon.Utils.lazyLoadImages=function(){return $(".ls-lazy").lazyload,$(".lazy-load").lazyload({threshold:200})},null==window.Groupon&&(window.Groupon={}),null!=Groupon.Performance?Groupon.Performance:Groupon.Performance={},Groupon.Performance.pageReady=function(){return"function"==typeof BOOMR.page_ready?BOOMR.page_ready():BOOMR.t_done=(new Date).getTime()},void function(){var LanguageSelector;LanguageSelector=function(){function LanguageSelector(param$){this.el=param$,this.$el=$(this.el),this.initialize()}return LanguageSelector.prototype.initialize=function(){return this.attachClickListener()},LanguageSelector.prototype.attachClickListener=function(){return this.$el.find(".lang-list-item").on("click.selectLang",function(e){var language;return e.preventDefault(),language=$(this).data("locale"),Groupon.Utils.setSiteCookies({user_locale:null}),Groupon.Utils.setSiteCookies({user_locale:language}),Groupon.setWindowLocationHref("/")})},LanguageSelector}(),window.LanguageSelector=LanguageSelector}.call(this),Groupon.Modules.SearchBar.Common.normalizeQuery=function(s){var character,charMap,dst,regexp,replacements,src;null==s&&(s=""),charMap=window.Groupon.charMapping||{},replacements={},regexp="";for(dst in charMap){src=charMap[dst],regexp+=src;for(var i$=0,length$=src.length;length$>i$;++i$)character=src[i$],replacements[character]=dst}return regexp=new RegExp("["+_.escapeRegExp(regexp)+"]","g"),s=s.replace(regexp,function(c){return replacements[c]}),s.toLowerCase()},void function(){var cache$,cache$1,ClosestDivision,isDownArrowKey,isEnterKey,isTabKey,isUpArrowKey,normalizeQuery;cache$=Groupon.Modules.SearchBar.Common.Keypress,isTabKey=cache$.isTabKey,isEnterKey=cache$.isEnterKey,isUpArrowKey=cache$.isUpArrowKey,isDownArrowKey=cache$.isDownArrowKey,cache$1=Groupon.Modules.SearchBar.Common,ClosestDivision=cache$1.ClosestDivision,normalizeQuery=cache$1.normalizeQuery,window.GIG.Typeahead=function(){function Typeahead(opts){this.opts=opts,this.$el=opts.el,this.lat="undefined"!=typeof Groupon&&null!=Groupon&&null!=Groupon.division?Groupon.division.lat:void 0,this.lng="undefined"!=typeof Groupon&&null!=Groupon&&null!=Groupon.division?Groupon.division.lng:void 0,this.locale="undefined"!=typeof I18n&&null!=I18n?I18n.locale:void 0,this.query="",this.searchQuery=!1,this.address=!1,this.$el.length&&(this.initialize(),this.bind())}return Typeahead.prototype.initialize=function(){var id,name,widget;return id=this.$el.attr("id"),name=this.$el.data("log"),widget=""+name+"SearchBarAutoComplete",this.typeaheadResponse="."+id+".typeahead-response",this.typeaheadContainer="<div class='"+id+" typeahead-response'\nid='ls-typeahead-"+id+"'\ndata-bhw='"+widget+"'\naria-live='polite'\naria-hidden='true'>",this.$el.after(this.typeaheadContainer),this.oldAddress=$("#location").val()},Typeahead.prototype.get=function(){var consumerId,data;return this.query.length>0?(consumerId=Cookie.get("snickerdoodle"),data={limit:10,lat:this.lat,lng:this.lng,query:this.query,locale:this.locale},null!=consumerId&&(data.consumer_id=consumerId),$.ajax({url:this.opts.endpoint,contentType:"application/json; charset=utf-8",dataType:"jsonp",type:"get",data:data,cache:!1,success:function(this$){return function(results){var list,name;for(name in results)if(list=results[name],/AutocompleteResults$/.test(name))return this$.fill(list,this$.query),void 0}}(this),error:function(this$){return function(){return this$.reset()}}(this)})):this.reset()},Typeahead.prototype.fill=function(results,query){var $a,$ul,$widget,cache$2,data,division,label,lat,lng,n,normalizedQuery,result,value;if(this.reset(),results.length){$ul=$('<ul role="list" />').attr("data-bhc","UserTyped:"+this.query),normalizedQuery=normalizeQuery(query);for(var i$=0,length$=results.length;length$>i$;++i$)result=results[i$],n=i$,cache$2=result,lat=cache$2.lat,lng=cache$2.lng,label=cache$2.label,value=cache$2.value,division=cache$2.division,data={value:value},lat&&lng&&_.extend(data,{lat:lat,lng:lng,division:division}),$a=$ul.append('<li role="listitem"><a tabindex="1"></a></li>').find("a:last"),$a.html(label).attr("data-bhc","result-"+(n+1)+":"+value).data(data),normalizedQuery===normalizeQuery(value)&&($a.addClass("typeahead-match").addClass("typeahead-match-hightlight"),$ul.data("hasmatch",!0));$widget=$(this.typeaheadResponse).show(),this.toggleAriaHidden($widget),$widget.append($ul)}},Typeahead.prototype.reset=function(){return $(this.typeaheadResponse).hide().empty()},Typeahead.prototype.updateValueAndLatLng=function($cur){var cache$2,data,division,lat,lng,value;return data=$cur.data(),cache$2=data,value=cache$2.value,lat=cache$2.lat,lng=cache$2.lng,division=cache$2.division,data={lat:lat,lng:lng,division:division,manuallocation:!1,typeaheadused:!0},this.$el.val(value).data(data)},Typeahead.prototype.selectAndFill=function(e){var $cur,$widget,cache$2,lat,lng;return $cur=$(e.currentTarget),cache$2=this.updateValueAndLatLng($cur),lat=cache$2.lat,lng=cache$2.lng,this.address=$("#location").val(),$widget=$(this.typeaheadResponse).hide(),$widget.is(".location")&&(this.lat=lat,this.lng=lng),$("#search-bar").focus().submit()},Typeahead.prototype.selectAndTab=function(e){return this.updateValueAndLatLng($(e.currentTarget)),$(this.typeaheadResponse).hide(),$("#location").focus()},Typeahead.prototype.submit=function(){var endpoint,qs;return this.searchQuery=$("#search").val(),this.address||(this.address=$("#location").val()),endpoint=this.address.split(",")[0].toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-"),this.searchQuery?(qs=$.param({query:this.searchQuery,lat:this.lat,lng:this.lng,address:this.address}),window.location="/browse/"+(endpoint||"chicago")+"?"+qs):$("#search").focus()},Typeahead.prototype.toggleAriaHidden=function(selector){var ariaHidden;return ariaHidden=selector.attr("aria-hidden"),ariaHidden="true"===ariaHidden?"false":"true",selector.attr("aria-hidden",ariaHidden)},Typeahead.prototype.bind=function(){var onCompletionResult;return $("body").on("click",function(){return $(".typeahead-response").hide().attr("aria-hidden","true")}),this.$el.on({focus:function(this$){return function(){return this$.reset(),this$.$el.select()}}(this),keydown:function(this$){return function(e){return isTabKey(e.which)&&this$.reset(),isDownArrowKey(e.which)&&$(this$.typeaheadResponse).is(":visible")?($(this$.typeaheadResponse).find("li a").eq(0).focus(),e.preventDefault()):void 0}}(this),keyup:function(this$){return function(e){var new_query;return this$.query!==(new_query=$(e.currentTarget).val())?(this$.query=new_query,this$.get()):void 0}}(this)}),onCompletionResult=function(this$){return function(eventHandlers){return $(this$.typeaheadResponse).on(eventHandlers,"a")}}(this),onCompletionResult({click:function(this$){return function(e){return this$.selectAndFill(e)}}(this),keydown:function(this$){return function(e){var $results,$widget,key;return e.preventDefault(),$widget=$(this$.typeaheadResponse),$results=$widget.find("li a"),isEnterKey(key=e.which)?this$.selectAndFill(e):isTabKey(key)&&$widget.is(".search")?this$.selectAndTab(e):isUpArrowKey(key)?$results.eq($results.index(e.currentTarget)-1).focus():isDownArrowKey(key)?$results.eq($results.index(e.currentTarget)+1).focus():this$.$el.focus()}}(this)})},Typeahead}()}.call(this),window.GIG.PNPrimaryNav=function(){function PNPrimaryNav(param$){var instance$;instance$=this,this.calcNavWidth=function(){return PNPrimaryNav.prototype.calcNavWidth.apply(instance$,arguments)},this.setTabsDivider=function(){return PNPrimaryNav.prototype.setTabsDivider.apply(instance$,arguments)},this.setRailSlide=function(){return PNPrimaryNav.prototype.setRailSlide.apply(instance$,arguments)},this.openSubnav=function(){return PNPrimaryNav.prototype.openSubnav.apply(instance$,arguments)},this.$primaryNav=param$,this.initialize(),this.bind()}return PNPrimaryNav.prototype.initialize=function(){return this.primaryTab="primary-nav-tab",this.$primaryTabs=this.$primaryNav.find(".primary-nav-tab"),this.primaryTabsDivider='<li class="p-nav-divider">|</li>',this.$primaryNav.find("li:not(li:last)").after(this.primaryTabsDivider),this.globalContainerIsVisible=$("#global-container").is(":visible"),this.setTabsDivider(),this.$localBreakoutLinks=$(".breakout-link"),this.$localSubNavV2Titles=$('.ls-column-title[class$="-icon"]'),this.$subnavs=$(".subnav-flyout"),this.localHeightCalculated=!1,this.flyoutDelay=0,this.timeoutID=0,this.$railSlide=$("#ls-rail-slide")},PNPrimaryNav.prototype.bind=function(){var cancelTimer,closeSubnav,startsTimer;return $(".no-flexbox, .no-flexboxlegacy").length&&($(window).on("load resize",function(this$){return function(){return this$.calcNavWidth()}}(this)),this.globalContainerIsVisible||$(document.body).on("runTruncateHtml",function(this$){return function(){return this$.calcNavWidth()}}(this))),this.$primaryTabs.hover(function(e){return $(e.currentTarget).toggleClass("hover")}),closeSubnav=function(this$){return function(){return $(".primary-nav:hover").length?void 0:(this$.closeSubnav(),window.clearTimeout(this$.timeoutID),this$.$railSlide.hide())}}(this),startsTimer=function(this$){return function(){return this$.hovTimeout=setTimeout(closeSubnav,50)}}(this),cancelTimer=function(this$){return function(){return clearTimeout(this$.hovTimeout)}}(this),this.$primaryNav.on({mouseenter:cancelTimer,mouseleave:startsTimer}),this.$subnavs.on({mouseenter:cancelTimer,mouseleave:startsTimer}),this.$subnavs.find("a").on("click",closeSubnav),this.$primaryTabs.on("mouseenter",function(this$){return function(e){var $flyout,$tab;return window.clearTimeout(this$.timeoutID),this$.flyoutDelay=$(".subnav-flyout").is(":visible")?0:300,this$.closeSubnav(),$tab=$(e.currentTarget),$flyout=$("#subnav-"+$tab.attr("id")),$flyout.length?($(".typeahead-response").hide(),0!==this$.flyoutDelay?this$.timeoutID=setTimeout(function(this$1){return function(){return this$1.openSubnav($tab,$flyout)}}(this$),this$.flyoutDelay):this$.openSubnav($tab,$flyout)):this$.$railSlide.hide()}}(this)),this.$localBreakoutLinks.hover(function(this$){return function(e){var categoryToAnimate;return categoryToAnimate=e.currentTarget.className.split(" ")[1],this$.$localSubNavV2Titles.find($(".ls-"+categoryToAnimate+"-icon").toggleClass("animate"))}}(this))},PNPrimaryNav.prototype.openSubnav=function($tab,$flyout){var $firstWidget,height;return $tab.find("a").eq(0).addClass("active"),this.setRailSlide($tab.find("a").eq(0)),$flyout.show(),$flyout.find(".ls-lazy").lazyload(),!this.localHeightCalculated&&$flyout.hasClass("subnav-local-breakout")&&(this.equalizeHeight($(".subnav-local-breakout .subnav-categories-inner")),this.localHeightCalculated=!0),$flyout.hasClass("flyout-v1")?($firstWidget=$flyout.find(".subnav-megamind-widget:visible").eq(0),height=420*($firstWidget.width()/440),this.equalizeHeight($flyout.find(".column:visible"),height)):void 0},PNPrimaryNav.prototype.equalizeHeight=function($selector,maxHeight){return null==maxHeight&&(maxHeight=0),$selector.css("height","").each(function(){return maxHeight=Math.max(maxHeight,$(this).height())}),$selector.height(maxHeight)},PNPrimaryNav.prototype.setRailSlide=function($link){var center,left;return $link.length?(left=$link.position().left,center=left+$link.width()/2,this.$railSlide.show().css("left",center)):void 0},PNPrimaryNav.prototype.closeSubnav=function(){return this.$subnavs.hide(),this.$primaryTabs.find("a").removeClass("active")},PNPrimaryNav.prototype.closeVisibleSubnav=function(){return $(".subnav-flyout:visible").hide(),this.$primaryTabs.find("a.active").removeClass("active")},PNPrimaryNav.prototype.setTabsDivider=function(){var $navObjects,numTabs;return numTabs=this.$primaryNav.find("li:not(.p-nav-divider)").length,numTabs.length<=4?(this.$primaryNav.find("li:first").before(this.primaryTabsDivider),this.$primaryNav.find("li:last").after(this.primaryTabsDivider)):$navObjects=this.$primaryTabs.find("a").add(this.$primaryNav.find(".p-nav-divider"))},PNPrimaryNav.prototype.calcNavWidth=function(){var $navObjects,contentWidth,gapWidth,navWidth;return navWidth=$(".primary-nav").width(),$navObjects=this.$primaryTabs.find("a"),contentWidth=_.reduce($navObjects,function(width,el){return width+$(el).outerWidth()},0),contentWidth+=8*$navObjects.length,gapWidth=(navWidth-contentWidth)/(this.$primaryTabs.length-1),this.$primaryTabs.first().width(this.$primaryTabs.first().find("a").outerWidth()+Math.floor(gapWidth/2)),this.$primaryTabs.last().width(this.$primaryTabs.last().find("a").outerWidth()+Math.floor(gapWidth/2)).addClass("last"),$.each(this.$primaryTabs.not(":first").not(":last"),function(idx,el){var tabWidth;return tabWidth=_.reduce($(el).find("a"),function(width,el){return width+$(el).outerWidth()},0),$(el).width(tabWidth+Math.floor(gapWidth))})},PNPrimaryNav}(),window.GIG.PNResponsiveMenu=function(){function PNResponsiveMenu(){var instance$;instance$=this,this.getVisibility=function(){return PNResponsiveMenu.prototype.getVisibility.apply(instance$,arguments)},this.closeSubnav=function(){return PNResponsiveMenu.prototype.closeSubnav.apply(instance$,arguments)},this.bind=function(){return PNResponsiveMenu.prototype.bind.apply(instance$,arguments)},this.alterDOM=function(){return PNResponsiveMenu.prototype.alterDOM.apply(instance$,arguments)},this.constructSubNavFlyouts=function(){return PNResponsiveMenu.prototype.constructSubNavFlyouts.apply(instance$,arguments)},this.constructLegalMenu=function(){return PNResponsiveMenu.prototype.constructLegalMenu.apply(instance$,arguments)},this.constructLanguageMenu=function(){return PNResponsiveMenu.prototype.constructLanguageMenu.apply(instance$,arguments)},this.constructHelpMenu=function(){return PNResponsiveMenu.prototype.constructHelpMenu.apply(instance$,arguments)},this.constructUserMenu=function(){return PNResponsiveMenu.prototype.constructUserMenu.apply(instance$,arguments)},this.constructUserNavigation=function(){return PNResponsiveMenu.prototype.constructUserNavigation.apply(instance$,arguments)},this.constructPrimaryNavigation=function(){return PNResponsiveMenu.prototype.constructPrimaryNavigation.apply(instance$,arguments)},this.initialize=function(){return PNResponsiveMenu.prototype.initialize.apply(instance$,arguments)},this.initialize(),this.constructPrimaryNavigation(),this.constructUserNavigation(),this.constructUserMenu(),this.constructHelpMenu(),this.constructLanguageMenu(),this.constructLegalMenu(),this.constructSubNavFlyouts(),this.dedupIDs(),this.alterDOM(),this.bind()}return PNResponsiveMenu.prototype.initialize=function(){return this.$menu=$("#ls-resp-menu"),this.$categories=this.$menu.find("#ls-resp-divider-categories"),this.$general=this.$menu.find("#ls-resp-divider-user"),this.$legal=this.$menu.find("#ls-resp-divider-legal"),this.$returnSpan=$(".ls-resp-menu-return").clone(),this.$header=$(".header"),this.$headerRow=$("#ls-header-top-row"),this.$overlay=$("#ls-resp-overlay"),this.$searchBar=$("#ls-search-bar-wrapper"),this.$responsiveMenuWrapper=$("#ls-resp-menu-wrapper")},PNResponsiveMenu.prototype.constructPrimaryNavigation=function(){var $primaryNav;return $primaryNav=$("#ls-primary-nav li:not(li.p-nav-divider)").clone().removeClass().addClass("ls-resp-menu-item").attr("role","menuitem").removeAttr("style").each(function(){return this.id="subnav-"+this.id+"-menu"}),$primaryNav.find(".icon-home").removeClass(),$primaryNav.find(".responsive-hide").removeClass(),$primaryNav.find(".breakout-link").remove(),this.$categories.after($primaryNav)},PNResponsiveMenu.prototype.constructUserNavigation=function(){var $userName,$userNavTemp;return $userNavTemp=$(".user-menu-action").clone().wrap('<li class="ls-resp-menu-item"></li>').parent(),($userName=$(".user-menu-action.user-name")).length&&$userNavTemp.find(".user-name").removeClass().addClass("ls-resp-menu-item-user icon-user").text($userName.attr("data-user-name")).parent().attr("id","subnav-usermenu-menu"),$userNavTemp.find(".user-menu-action").removeClass(),this.$general.after($userNavTemp)},PNResponsiveMenu.prototype.constructUserMenu=function(){var $signOut,$signOutTemp,$userMenu;return $("#ls-my-stuff").length?($userMenu=$("#ls-my-stuff").clone().attr({"class":"ls-resp-submenu ls-resp-subnav-flyout hide",id:"ls-resp-subnav-usermenu",role:"menu","aria-hidden":!0}),$signOutTemp=$userMenu.find("#sign-out").clone().removeClass(),$signOut=$('<li class="ls-resp-menu-item" />').html($signOutTemp),this.$legal.before($signOut),$userMenu.find("#sign-out").remove(),$userMenu.find("a").addClass("ls-resp-menu-item"),this.$returnSpan.clone().prependTo($userMenu),this.$menu.after($userMenu)):void 0},PNResponsiveMenu.prototype.constructHelpMenu=function(){var $userHelp,$userNavTemp;return $userHelp=$(".user-help").clone(),$userHelp.length?($userHelp.removeClass(),$userNavTemp=$('<li class="ls-resp-menu-item" />').html($userHelp),this.$general.after($userNavTemp)):void 0},PNResponsiveMenu.prototype.constructLanguageMenu=function(){var $langMenu,$userNavTemp;return $(".lang-menu").length?($userNavTemp=$("#ls-resp-lang-select").attr("id","subnav-langmenu-menu"),this.$general.after($userNavTemp),$langMenu=$("#ls-lang-list").clone().attr({id:"ls-resp-subnav-langmenu","class":"ls-resp-submenu ls-resp-subnav-flyout hide",role:"menu","aria-hidden":!0}),$langMenu.find("a").addClass("ls-resp-menu-item"),this.$returnSpan.clone().prependTo($langMenu),this.$menu.after($langMenu)):void 0},PNResponsiveMenu.prototype.constructLegalMenu=function(){var $copyrightLinks;return $copyrightLinks=$(".footer-copyright-links a"),$copyrightLinks.length?this.$legal.append($copyrightLinks.clone()):void 0},PNResponsiveMenu.prototype.constructSubNavFlyouts=function(){var $subNavs;return $subNavs=$(".subnav-flyout").clone().attr({"aria-hidden":"true",role:"menu","class":"ls-resp-subnav-flyout hide"}).removeAttr("style"),$subNavs.find(".subnav-megamind-widget").remove(),$subNavs.find(".subnav-link").addClass("ls-resp-menu-item").unwrap().unwrap(),this.$returnSpan.clone().prependTo($subNavs),this.$menu.after($subNavs),$("#ls-resp-menu-wrapper > .ls-resp-menu-return").remove()},PNResponsiveMenu.prototype.dedupIDs=function(){return this.$responsiveMenuWrapper.find("*[id]").each(function(){return this.id.match(/ls-resp-/)?void 0:this.id="ls-resp-"+this.id})},PNResponsiveMenu.prototype.alterDOM=function(){var childId,id,menuItem,subnavIds;this.$menuTrigger=$("#ls-resp-menu-trigger"),this.$headerRow.append(this.$menuTrigger),this.$searchTrigger=$("#ls-resp-search-trigger"),this.$headerRow.append(this.$searchTrigger),$("#ls-lite-header").length&&this.$searchTrigger.hide(),$("#global-container").prepend(this.$overlay),$("body").prepend(this.$responsiveMenuWrapper),this.$subnavs=this.$responsiveMenuWrapper.find(".ls-resp-subnav-flyout"),this.$menuitems=this.$menu.find(".ls-resp-menu-item[id]"),this.menuWithSubnavIDs=[],subnavIds=this.getAttributes(this.$subnavs,"id");for(var i$=0,length$=this.$menuitems.length;length$>i$;++i$)menuItem=this.$menuitems[i$],id=menuItem.id,childId=id.replace(/(.*)-menu$/,"$1"),in$(childId,subnavIds)&&($(menuItem).attr("data-child",childId).attr("aria-own",childId),this.menuWithSubnavIDs.push(id));return function(accum$){for(var $localBreakoutHeadings,$parent,$subnav,$subnavHeadline,i,parentDescription,i$1=0,length$1=this.menuWithSubnavIDs.length;length$1>i$1;++i$1)i=this.menuWithSubnavIDs[i$1],$parent=$("#"+i).addClass("icon-arrow-right-large").attr("aria-haspopup","true"),$subnav=$("#"+i.replace(/(.*)-menu$/,"$1")),$localBreakoutHeadings=$subnav.find(".ls-column-title"),accum$.push($localBreakoutHeadings.length?$localBreakoutHeadings.each(function(){return $(this).replaceWith($('<span class="ls-resp-menu-selected">').text($(this).text()))}):(parentDescription=$parent.has("a").length?$parent.find("a").text():$parent.text(),$subnavHeadline=$('<span class="ls-resp-menu-selected" />').text(parentDescription.trim()),$subnav.find("a").eq(0).before($subnavHeadline)));return accum$}.call(this,[])},PNResponsiveMenu.prototype.bind=function(){var $menus,hide,show;return this.$searchTrigger.on("click",function(this$){return function(e){return e.preventDefault(),this$.$searchBar.toggleClass("search-bar-show"),$("#search").focus(),this$.$overlay.toggle(),$(".typeahead-response").hide().attr("aria-hidden","true")}}(this)),this.$menuTrigger.on("click",function(this$){return function(e){var searchVisible;return e.preventDefault(),searchVisible=this$.getVisibility().searchVisible,searchVisible&&this$.$searchTrigger.trigger("click"),this$.$responsiveMenuWrapper.toggle(),this$.toggleAriaHidden(this$.$responsiveMenuWrapper),$("body").toggleClass("show-responsive-menu"),this$.$overlay.toggle()}}(this)),this.$overlay.on("click",function(this$){return function(e){var cache$,menuVisible,searchVisible;return e.preventDefault(),cache$=this$.getVisibility(),searchVisible=cache$.searchVisible,menuVisible=cache$.menuVisible,menuVisible&&this$.$menuTrigger.trigger("click"),searchVisible?this$.$searchTrigger.trigger("click"):void 0}}(this)),show=this.responsiveCustomShow.bind(this),hide=this.responsiveCustomHide.bind(this),$(".ls-resp-menu-return").on("click",function(){return hide($(this).parent()),show("#ls-resp-menu")}),$menus=$(this.menuWithSubnavIDs.map(function(s){return"#"+s}).join(",")),$menus.on({click:function(this$){return function(e){var $flyout,$tab,tabTarget;return this$.closeSubnav(),$tab=$(e.currentTarget),tabTarget=$tab.attr("data-child"),$flyout=$("#"+tabTarget),$flyout.length?($(".typeahead-response").hide(),this$.responsiveCustomHide("#ls-resp-menu"),this$.responsiveCustomShow("#"+tabTarget),this$.toggleAriaHidden($("#"+tabTarget))):void 0}}(this),touchleave:function(this$){return function(){return this$.closeSubnav()}}(this)})},PNResponsiveMenu.prototype.toggleAriaHidden=function(selector){var ariaHidden;return ariaHidden=selector.attr("aria-hidden"),ariaHidden="true"===ariaHidden?"false":"true",selector.attr("aria-hidden",ariaHidden)},PNResponsiveMenu.prototype.closeSubnav=function(){return this.$subnavs.removeClass("responsive-show-500")},PNResponsiveMenu.prototype.getAttributes=function(elements,attribute){var attributeArray,el;attributeArray=[];for(var i$=0,length$=elements.length;length$>i$;++i$)el=elements[i$],attributeArray.push($(el).attr(attribute));return attributeArray},PNResponsiveMenu.prototype.getVisibility=function(){return{searchVisible:this.$searchBar.is(":visible"),menuVisible:this.$responsiveMenuWrapper.is(":visible")}},PNResponsiveMenu.prototype.responsiveCustomHide=function(selector){return $(selector).removeClass("responsive-show-500").addClass("responsive-hide-500")},PNResponsiveMenu.prototype.responsiveCustomShow=function(selector){return $(selector).addClass("responsive-show-500").removeClass("responsive-hide-500")},PNResponsiveMenu}(),window.GIG.SubtleLocation=function(){function SubtleLocation(opts){var instance$;instance$=this,this.removeLocationLink=function(){return SubtleLocation.prototype.removeLocationLink.apply(instance$,arguments)},this.$el=opts.el,this.$el.length&&(this.initialize(),this.bind())}return SubtleLocation.prototype.initialize=function(){var initialLocation;return initialLocation=Groupon.Modules.SearchBar.Common.Location.getInitialLocation()||(null!=Groupon.division?Groupon.division.name:void 0),null!=initialLocation?($(".ls-location-as-link .location-search input").attr("placeholder",initialLocation),(null!=initialLocation?initialLocation.length:void 0)>18&&(initialLocation=initialLocation.substring(0,18).replace(/\s$/,"")+"…"),this.$el.text(initialLocation)):this.$el.remove()},SubtleLocation.prototype.bind=function(){return this.$el.one("click",function(this$){return function(){return this$.triggerAnimation()}}(this)),this.$el.on(this.getTransitionEventName(),function(this$){return function(){return this$.removeLocationLink()}}(this))},SubtleLocation.prototype.triggerAnimation=function(){return $(".lt-ie10 .ls-subtle-location").css("display","none"),$("#location").prop("disabled",!1),$(".ls-subtle-location, .location-search, #location").addClass("subtle-animate"),$(".ls-location-as-link").addClass("subtle-location-visible"),$(".location-search").addClass("active-search"),$("#location").focus(function(){this.selectionStart=this.selectionEnd=0}),$("#location").focus()},SubtleLocation.prototype.removeLocationLink=function(){return this.$el.remove()},SubtleLocation.prototype.getTransitionEventName=function(){var el,t,transitionEvent,transitions;el=document.createElement("fakeelement"),transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions)if(void 0!==el.style[t]){transitionEvent=transitions[t];break}return transitionEvent||""},SubtleLocation}(),window.GIG.PNHeaderV2=function(){function PNHeaderV2(param$){this.el=param$,this.$el=$(this.el),this.$searchInputs=this.$el.find("input"),this.$search=this.$el.find("#search"),this.$location=this.$el.find("#location"),this.$primaryNav=this.$el.find(".primary-nav"),this.$subtleLocation=this.$el.find(".ls-subtle-location"),this.initialize(),this.modifyDOM(),this.bind()}return PNHeaderV2.prototype.initialize=function(){return $("#ls-lite-header").length||(new window.GIG.Typeahead({el:this.$search,endpoint:null!=Groupon.endpoints?Groupon.endpoints.deals:void 0}),new window.GIG.Typeahead({el:this.$location,endpoint:null!=Groupon.endpoints?Groupon.endpoints.locations:void 0}),new window.GIG.PNPrimaryNav(this.$primaryNav),new window.GIG.SubtleLocation({el:this.$subtleLocation})),$("body").is(".responsive-funnel, .ls-responsive")?(new window.GIG.PNResponsiveMenu,new LanguageSelector("#ls-resp-subnav-langmenu")):void 0},PNHeaderV2.prototype.modifyDOM=function(){return $('.user-menu-action[data-bhw*="Sign"], #sign-out').each(function(){var ref;return ref=/\?/.test(this.href)?"&":"?",ref+="return_to="+encodeURIComponent(location.href),this.href+=ref})},PNHeaderV2.prototype.bind=function(){return this.$searchInputs.parent("label").on("click",function(e){var $target;return e.bubbles=!1,$target=$(e.currentTarget),$target.hasClass("active-search")?void 0:($(".ls-searchbar-deal, .ls-searchbar-location, .search-box").removeClass("active-search"),$target.addClass("active-search"))}),this.$searchInputs.on({focusin:function(e){return $(e.currentTarget).parent().hasClass("active-search")?void 0:($(".ls-searchbar-deal, .ls-searchbar-location, .search-box").removeClass("active-search"),$(e.currentTarget).parent("label").addClass("active-search"))},focusout:function(this$){return function(e){return $(e.currentTarget).parent("label").removeClass("active-search"),this$.focusCheck()}}(this)}),Modernizr.touch&&$(".user-menu .user-name").on("click touchstart",function(e){return e.preventDefault(),$(".user-menu #my-stuff").toggle()}),this.$location.on({focusin:function(this$){return function(){return this$.storeLocation(),$(".ls-location-as-link").length>0?void 0:(this$.$location.val(""),this$.$location.PlaceholderField())}}(this),focusout:function(this$){return function(){return this$.storeLocation(),this$.$location.val(this$.$location.data("previous-value")),$(".ls-location-as-link").length>0?$("#location").attr("placeholder",this$.$location.val()):void 0}}(this),change:function(this$){return function(){return this$.$location.data({manuallocation:!0})}}(this),keypress:function(this$){return function(){return this$.$location.data("manuallocation")!==!0?this$.$location.trigger("change"):void 0}}(this)})},PNHeaderV2.prototype.storeLocation=function(){var currentVal;return currentVal=this.$location.val(),_.isBlank(currentVal)?void 0:this.$location.data("previous-value",currentVal)},PNHeaderV2.prototype.focusCheck=function(){var $locLabel,$searchLabel;return $searchLabel=this.$search.parent("label"),$locLabel=this.$location.parent("label"),$searchLabel.is(".active-search")||$locLabel.is(".active-search")||$(".alternative-search").length>0?void 0:$searchLabel.addClass("active-search")},PNHeaderV2}(),void function(){function in$(member,list){for(var i=0,length=list.length;length>i;++i)if(i in list&&list[i]===member)return!0;return!1}var InAppMessage;InAppMessage=function(){function InAppMessage(param$){this.el=param$,this.$el=$(this.el),this.initialize()}return InAppMessage.prototype.initialize=function(){return this.attachDismissListener(),this.showMessages()},InAppMessage.prototype.getMessageId=function(){var cache$,cache$1,id,message_id,prefix;return id=null!=(cache$=this.$el.find('[id^="message-"]'))?cache$.attr("id"):void 0,id?(cache$1=id.split("-"),prefix=cache$1[0],message_id=cache$1[1]):void 0},InAppMessage.prototype.getBlockedMessageIds=function(){var value;return value=Cookie.get("msg_hide"),value?value.split(","):[]},InAppMessage.prototype.setBlockedMessageIds=function(blocked){var value;return blocked.length>20&&blocked.shift(),value=blocked.join(","),Cookie.set("msg_hide",value)},InAppMessage.prototype.showMessages=function(){var blocked,message_id;return message_id=this.getMessageId(),message_id&&message_id>0&&(blocked=this.getBlockedMessageIds(),!in$(message_id,blocked))?this.$el.show():void 0},InAppMessage.prototype.blockMessage=function(message_id){var blocked;return blocked=this.getBlockedMessageIds(),in$(message_id,blocked)?void 0:(blocked.push(message_id),this.setBlockedMessageIds(blocked))},InAppMessage.prototype.attachDismissListener=function(){return this.$el.find(".hide-link").bind("click",function(this$){return function(event){var message_id;return event.preventDefault(),this$.$el.hide(),message_id=this$.getMessageId(),message_id&&message_id>0?this$.blockMessage(message_id):void 0}}(this))},InAppMessage}(),window.InAppMessage=InAppMessage}.call(this);/*
 *  Copyright 2011 Twitter, Inc.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
var Hogan={};!function(Hogan,useArrayBuffer){function coerceToString(val){return String(null===val||void 0===val?"":val)}function hoganEscape(str){return str=coerceToString(str),hChars.test(str)?str.replace(rAmp,"&amp;").replace(rLt,"&lt;").replace(rGt,"&gt;").replace(rApos,"&#39;").replace(rQuot,"&quot;"):str}Hogan.Template=function(renderFunc,text,compiler,options){this.r=renderFunc||this.r,this.c=compiler,this.options=options,this.text=text||"",this.buf=useArrayBuffer?[]:""},Hogan.Template.prototype={r:function(){return""},v:hoganEscape,t:coerceToString,render:function(context,partials,indent){return this.ri([context],partials||{},indent)},ri:function(context,partials,indent){return this.r(context,partials,indent)},rp:function(name,context,partials,indent){var partial=partials[name];return partial?(this.c&&"string"==typeof partial&&(partial=this.c.compile(partial,this.options)),partial.ri(context,partials,indent)):""},rs:function(context,partials,section){var tail=context[context.length-1];if(!isArray(tail))return section(context,partials,this),void 0;for(var i=0;i<tail.length;i++)context.push(tail[i]),section(context,partials,this),context.pop()},s:function(val,ctx,partials,inverted,start,end,tags){var pass;return isArray(val)&&0===val.length?!1:("function"==typeof val&&(val=this.ls(val,ctx,partials,inverted,start,end,tags)),pass=""===val||!!val,!inverted&&pass&&ctx&&ctx.push("object"==typeof val?val:ctx[ctx.length-1]),pass)},d:function(key,ctx,partials,returnFound){var names=key.split("."),val=this.f(names[0],ctx,partials,returnFound),cx=null;if("."===key&&isArray(ctx[ctx.length-2]))return ctx[ctx.length-1];for(var i=1;i<names.length;i++)val&&"object"==typeof val&&names[i]in val?(cx=val,val=val[names[i]]):val="";return returnFound&&!val?!1:(returnFound||"function"!=typeof val||(ctx.push(cx),val=this.lv(val,ctx,partials),ctx.pop()),val)},f:function(key,ctx,partials,returnFound){for(var val=!1,v=null,found=!1,i=ctx.length-1;i>=0;i--)if(v=ctx[i],v&&"object"==typeof v&&key in v){val=v[key],found=!0;break}return found?(returnFound||"function"!=typeof val||(val=this.lv(val,ctx,partials)),val):returnFound?!1:""},ho:function(val,cx,partials,text,tags){var compiler=this.c,options=this.options;options.delimiters=tags;var text=val.call(cx,text);return text=null==text?String(text):text.toString(),this.b(compiler.compile(text,options).render(cx,partials)),!1},b:useArrayBuffer?function(s){this.buf.push(s)}:function(s){this.buf+=s},fl:useArrayBuffer?function(){var r=this.buf.join("");return this.buf=[],r}:function(){var r=this.buf;return this.buf="",r},ls:function(val,ctx,partials,inverted,start,end,tags){var cx=ctx[ctx.length-1],t=null;if(!inverted&&this.c&&val.length>0)return this.ho(val,cx,partials,this.text.substring(start,end),tags);if(t=val.call(cx),"function"==typeof t){if(inverted)return!0;if(this.c)return this.ho(t,cx,partials,this.text.substring(start,end),tags)}return t},lv:function(val,ctx,partials){var cx=ctx[ctx.length-1],result=val.call(cx);return"function"==typeof result&&(result=coerceToString(result.call(cx)),this.c&&~result.indexOf("{{"))?this.c.compile(result,this.options).render(cx,partials):coerceToString(result)}};var rAmp=/&/g,rLt=/</g,rGt=/>/g,rApos=/\'/g,rQuot=/\"/g,hChars=/[&<>\"\']/,isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}}("undefined"!=typeof exports?exports:Hogan),function(Hogan){function cleanTripleStache(token){"}"===token.n.substr(token.n.length-1)&&(token.n=token.n.substring(0,token.n.length-1))}function trim(s){return s.trim?s.trim():s.replace(/^\s*|\s*$/g,"")}function tagChange(tag,text,index){if(text.charAt(index)!=tag.charAt(0))return!1;for(var i=1,l=tag.length;l>i;i++)if(text.charAt(index+i)!=tag.charAt(i))return!1;return!0}function buildTree(tokens,kind,stack,customTags){for(var instructions=[],opener=null,token=null;tokens.length>0;)if(token=tokens.shift(),"#"==token.tag||"^"==token.tag||isOpener(token,customTags))stack.push(token),token.nodes=buildTree(tokens,token.tag,stack,customTags),instructions.push(token);else{if("/"==token.tag){if(0===stack.length)throw new Error("Closing tag without opener: /"+token.n);if(opener=stack.pop(),token.n!=opener.n&&!isCloser(token.n,opener.n,customTags))throw new Error("Nesting error: "+opener.n+" vs. "+token.n);return opener.end=token.i,instructions}instructions.push(token)}if(stack.length>0)throw new Error("missing closing tag: "+stack.pop().n);return instructions}function isOpener(token,tags){for(var i=0,l=tags.length;l>i;i++)if(tags[i].o==token.n)return token.tag="#",!0}function isCloser(close,open,tags){for(var i=0,l=tags.length;l>i;i++)if(tags[i].c==close&&tags[i].o==open)return!0}function esc(s){return s.replace(rSlash,"\\\\").replace(rQuot,'\\"').replace(rNewline,"\\n").replace(rCr,"\\r")}function chooseMethod(s){return~s.indexOf(".")?"d":"f"}function walk(tree){for(var code="",i=0,l=tree.length;l>i;i++){var tag=tree[i].tag;"#"==tag?code+=section(tree[i].nodes,tree[i].n,chooseMethod(tree[i].n),tree[i].i,tree[i].end,tree[i].otag+" "+tree[i].ctag):"^"==tag?code+=invertedSection(tree[i].nodes,tree[i].n,chooseMethod(tree[i].n)):"<"==tag||">"==tag?code+=partial(tree[i]):"{"==tag||"&"==tag?code+=tripleStache(tree[i].n,chooseMethod(tree[i].n)):"\n"==tag?code+=text('"\\n"'+(tree.length-1==i?"":" + i")):"_v"==tag?code+=variable(tree[i].n,chooseMethod(tree[i].n)):void 0===tag&&(code+=text('"'+esc(tree[i])+'"'))}return code}function section(nodes,id,method,start,end,tags){return"if(_.s(_."+method+'("'+esc(id)+'",c,p,1),'+"c,p,0,"+start+","+end+',"'+tags+'")){'+"_.rs(c,p,"+"function(c,p,_){"+walk(nodes)+"});c.pop();}"}function invertedSection(nodes,id,method){return"if(!_.s(_."+method+'("'+esc(id)+'",c,p,1),c,p,1,0,0,"")){'+walk(nodes)+"};"}function partial(tok){return'_.b(_.rp("'+esc(tok.n)+'",c,p,"'+(tok.indent||"")+'"));'}function tripleStache(id,method){return"_.b(_.t(_."+method+'("'+esc(id)+'",c,p,0)));'}function variable(id,method){return"_.b(_.v(_."+method+'("'+esc(id)+'",c,p,0)));'}function text(id){return"_.b("+id+");"}var rIsWhitespace=/\S/,rQuot=/\"/g,rNewline=/\n/g,rCr=/\r/g,rSlash=/\\/g,tagTypes={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};Hogan.scan=function(text,delimiters){function addBuf(){buf.length>0&&(tokens.push(new String(buf)),buf="")}function lineIsWhitespace(){for(var isAllWhitespace=!0,j=lineStart;j<tokens.length;j++)if(isAllWhitespace=tokens[j].tag&&tagTypes[tokens[j].tag]<tagTypes._v||!tokens[j].tag&&null===tokens[j].match(rIsWhitespace),!isAllWhitespace)return!1;return isAllWhitespace}function filterLine(haveSeenTag,noNewLine){if(addBuf(),haveSeenTag&&lineIsWhitespace())for(var next,j=lineStart;j<tokens.length;j++)tokens[j].tag||((next=tokens[j+1])&&">"==next.tag&&(next.indent=tokens[j].toString()),tokens.splice(j,1));else noNewLine||tokens.push({tag:"\n"});seenTag=!1,lineStart=tokens.length}function changeDelimiters(text,index){var close="="+ctag,closeIndex=text.indexOf(close,index),delimiters=trim(text.substring(text.indexOf("=",index)+1,closeIndex)).split(" ");return otag=delimiters[0],ctag=delimiters[1],closeIndex+close.length-1}var len=text.length,IN_TEXT=0,IN_TAG_TYPE=1,IN_TAG=2,state=IN_TEXT,tagType=null,tag=null,buf="",tokens=[],seenTag=!1,i=0,lineStart=0,otag="{{",ctag="}}";for(delimiters&&(delimiters=delimiters.split(" "),otag=delimiters[0],ctag=delimiters[1]),i=0;len>i;i++)state==IN_TEXT?tagChange(otag,text,i)?(--i,addBuf(),state=IN_TAG_TYPE):"\n"==text.charAt(i)?filterLine(seenTag):buf+=text.charAt(i):state==IN_TAG_TYPE?(i+=otag.length-1,tag=tagTypes[text.charAt(i+1)],tagType=tag?text.charAt(i+1):"_v","="==tagType?(i=changeDelimiters(text,i),state=IN_TEXT):(tag&&i++,state=IN_TAG),seenTag=i):tagChange(ctag,text,i)?(tokens.push({tag:tagType,n:trim(buf),otag:otag,ctag:ctag,i:"/"==tagType?seenTag-ctag.length:i+otag.length}),buf="",i+=ctag.length-1,state=IN_TEXT,"{"==tagType&&("}}"==ctag?i++:cleanTripleStache(tokens[tokens.length-1]))):buf+=text.charAt(i);return filterLine(seenTag,!0),tokens},Hogan.generate=function(tree,text,options){var code='var _=this;_.b(i=i||"");'+walk(tree)+"return _.fl();";return options.asString?"function(c,p,i){"+code+";}":new Hogan.Template(new Function("c","p","i",code),text,Hogan,options)},Hogan.parse=function(tokens,text,options){return options=options||{},buildTree(tokens,"",[],options.sectionTags||[])},Hogan.cache={},Hogan.compile=function(text,options){options=options||{};var key=text+"||"+!!options.asString,t=this.cache[key];return t?t:(t=this.generate(this.parse(this.scan(text,options.delimiters),text,options),text,options),this.cache[key]=t)}}("undefined"!=typeof exports?exports:Hogan),function(g,H,T){g.Cart||(g.Cart={}),g.Cart.Templates={cart_widget_templates_cart_items:new T(function(c,p,i){var _=this;return _.b(i=i||""),_.b('<div class="cart-flyout cart-container" data-bhw="ShoppingCart" '),_.s(_.d("response.uuid",c,p,1),c,p,0,82,123,"{{ }}")&&(_.rs(c,p,function(c,p,_){_.b(' data-bhd=\'{"uuid":"'),_.b(_.v(_.d("response.uuid",c,p,0))),_.b("\"}' ")}),c.pop()),_.b(">"),_.b("\n"+i),_.b('  <div class="cart-header">'),_.b("\n"+i),_.b('    <div class="cart-cell cart-desc"><span class="cart-desc-title">'),_.b(_.v(_.d("translations.cart.desc",c,p,0))),_.b('</span><span class="cart-desc-qty">('),_.b(_.v(_.d("response.quantity",c,p,0))),_.b(")</span></div>"),_.b("\n"+i),_.b('    <div class="cart-cell cart-quantity">'),_.b(_.v(_.d("translations.cart.quantity",c,p,0))),_.b("</div>"),_.b("\n"+i),_.b('    <div class="cart-cell cart-price">'),_.b(_.v(_.d("translations.cart.price",c,p,0))),_.b("</div>"),_.b("\n"+i),_.b("  </div>"),_.b("\n"+i),_.b('  <div class="cart-item-list">'),_.b("\n"+i),_.s(_.d("response.items",c,p,1),c,p,0,549,1117,"{{ }}")&&(_.rs(c,p,function(c,p,_){_.b('      <div class="cart-item" data-uuid="'),_.b(_.v(_.f("option_uuid",c,p,0))),_.b('" data-bhc="deal_option:'),_.b(_.v(_.f("deal_permalink",c,p,0))),_.b("+"),_.b(_.v(_.f("option_uuid",c,p,0))),_.b('" data-bhd=\'{"deal_uuid":"'),_.b(_.v(_.f("deal_uuid",c,p,0))),_.b('", "deal_permalink":"'),_.b(_.v(_.f("deal_permalink",c,p,0))),_.b('", "option_uuid":"'),_.b(_.v(_.f("option_uuid",c,p,0))),_.b('", "option_quantity":"'),_.b(_.v(_.f("quantity",c,p,0))),_.b("\"}'>"),_.b("\n"+i),_.b('        <div class="cart-cell cart-desc">'),_.b("\n"+i),_.b('          <div class="cart-img"><img src="'),_.b(_.v(_.f("url",c,p,0))),_.b('"></div>'),_.b("\n"+i),_.b('          <div class="cart-title">'),_.b(_.v(_.f("title",c,p,0))),_.b("</div>"),_.b("\n"+i),_.b("        </div>"),_.b("\n"+i),_.b('        <div class="cart-cell cart-quantity">'),_.b(_.v(_.f("quantity",c,p,0))),_.b("</div>"),_.b("\n"+i),_.b('        <div class="cart-cell cart-price">'),_.b(_.v(_.f("price",c,p,0))),_.b("</div>"),_.b("\n"+i),_.b("      </div>"),_.b("\n")}),c.pop()),_.b("  </div>"),_.b("\n"+i),_.b('  <div class="cart-footer">'),_.b("\n"+i),_.b('    <div class="cart-subtotal">'),_.b("\n"+i),_.b('      <div class="subtotal-text">'),_.b("\n"+i),_.b("        "),_.b(_.v(_.d("translations.cart.subtotal",c,p,0))),_.b(":<b>"),_.b(_.v(_.d("response.subtotal",c,p,0))),_.b("</b>"),_.b("\n"+i),_.b("      </div>"),_.b("\n"+i),_.b("    </div>"),_.b("\n"+i),_.b('    <div class="cart-links">'),_.b("\n"+i),_.b('      <a href="/cart" class="btn-buy btn-small" data-bhw="ViewCart">'),_.b("\n"+i),_.b("        "),_.b(_.v(_.d("translations.cart.view_cart",c,p,0))),_.b("\n"+i),_.b("      </a>"),_.b("\n"+i),_.b("    </div>"),_.b("\n"+i),_.b("  </div>"),_.b("\n"+i),_.b("</div>"),_.b("\n"),_.fl()},'<div class="cart-flyout cart-container" data-bhw="ShoppingCart" {{#response.uuid}} data-bhd=\'{"uuid":"{{response.uuid}}"}\' {{/response.uuid}}>\n  <div class="cart-header">\n    <div class="cart-cell cart-desc"><span class="cart-desc-title">{{translations.cart.desc}}</span><span class="cart-desc-qty">({{response.quantity}})</span></div>\n    <div class="cart-cell cart-quantity">{{translations.cart.quantity}}</div>\n    <div class="cart-cell cart-price">{{translations.cart.price}}</div>\n  </div>\n  <div class="cart-item-list">\n    {{#response.items}}\n      <div class="cart-item" data-uuid="{{option_uuid}}" data-bhc="deal_option:{{deal_permalink}}+{{option_uuid}}" data-bhd=\'{"deal_uuid":"{{deal_uuid}}", "deal_permalink":"{{deal_permalink}}", "option_uuid":"{{option_uuid}}", "option_quantity":"{{quantity}}"}\'>\n        <div class="cart-cell cart-desc">\n          <div class="cart-img"><img src="{{url}}"></div>\n          <div class="cart-title">{{title}}</div>\n        </div>\n        <div class="cart-cell cart-quantity">{{quantity}}</div>\n        <div class="cart-cell cart-price">{{price}}</div>\n      </div>\n    {{/response.items}}\n  </div>\n  <div class="cart-footer">\n    <div class="cart-subtotal">\n      <div class="subtotal-text">\n        {{translations.cart.subtotal}}:<b>{{response.subtotal}}</b>\n      </div>\n    </div>\n    <div class="cart-links">\n      <a href="/cart" class="btn-buy btn-small" data-bhw="ViewCart">\n        {{translations.cart.view_cart}}\n      </a>\n    </div>\n  </div>\n</div>\n',H,{}),cart_widget_templates_cart_empty:new T(function(c,p,i){var _=this;return _.b(i=i||""),_.b('<div id="ls-header-cart-body" class="cart-flyout cart-empty-container" data-bhw="ShoppingCart" '),_.s(_.d("response.uuid",c,p,1),c,p,0,113,154,"{{ }}")&&(_.rs(c,p,function(c,p,_){_.b(' data-bhd=\'{"uuid":"'),_.b(_.v(_.d("response.uuid",c,p,0))),_.b("\"}' ")}),c.pop()),_.b(">"),_.b("\n"+i),_.b('  <div class="cart-empty-body">'),_.b("\n"+i),_.b('    <div class="cart-empty-header">'),_.b(_.v(_.d("translations.cart.empty_cart",c,p,0))),_.b("</div>"),_.b("\n"+i),_.b('    <p class="cart-empty-content">'),_.b(_.v(_.d("translations.cart.empty_text",c,p,0))),_.b(' <a href="/goods">'),_.b(_.v(_.d("translations.cart.groupon_goods",c,p,0))),_.b("</a>.</p>"),_.b("\n"+i),_.b("  </div>"),_.b("\n"+i),_.b("</div>"),_.b("\n"),_.fl()},'<div id="ls-header-cart-body" class="cart-flyout cart-empty-container" data-bhw="ShoppingCart" {{#response.uuid}} data-bhd=\'{"uuid":"{{response.uuid}}"}\' {{/response.uuid}}>\n  <div class="cart-empty-body">\n    <div class="cart-empty-header">{{translations.cart.empty_cart}}</div>\n    <p class="cart-empty-content">{{translations.cart.empty_text}} <a href="/goods">{{translations.cart.groupon_goods}}</a>.</p>\n  </div>\n</div>\n',H,{})}}(this,Hogan,Hogan.Template),void function(){var cache$,CartEmpty,CartItems,CartWidget;cache$=Cart.Templates,CartItems=cache$.cart_widget_templates_cart_items,CartEmpty=cache$.cart_widget_templates_cart_empty,CartWidget=function(){function CartWidget(param$){var instance$;instance$=this,this.onComplete=function(){return CartWidget.prototype.onComplete.apply(instance$,arguments)},this.el=param$,this.$el=$(this.el),this.$el.length?this.fetch():this.$el.css("display","none")}return CartWidget.prototype.fetch=function(){var complete,data;return complete=this.onComplete,data={consumerId:Cookie.get("snickerdoodle")?Cookie.get("snickerdoodle"):void 0},$.ajax({type:"GET",url:"/cart/widget",data:data,complete:complete})},CartWidget.prototype.onComplete=function(data,textStatus){var cache$1,hasCart,hasError,response,responseText,translations;return responseText=data.responseText,translations=Groupon.CartTranslations,"success"!==textStatus||(response=jQuery.parseJSON(responseText),cache$1=response,hasError=cache$1.hasError,hasCart=cache$1.hasCart,hasError)?void 0:hasCart?this.showCart({response:response,translations:translations}):this.showEmptyCart({translations:translations})},CartWidget.prototype.showCart=function(data){var goodsCount;return goodsCount=data.response.quantity_value,this.$el.find(".icon-goods").html($('<span class="cart-count" />').text(goodsCount)),this.$el.append(CartItems.render(data))},CartWidget.prototype.showEmptyCart=function(data){return this.$el.append(CartEmpty.render(data))},CartWidget}(),window.CartWidget=CartWidget}.call(this),window.GIG.StickyHeader=function(){function StickyHeader(){var instance$;instance$=this,this.handlePrimaryNav=function(){return StickyHeader.prototype.handlePrimaryNav.apply(instance$,arguments)},this.handleStickyHeader=function(){return StickyHeader.prototype.handleStickyHeader.apply(instance$,arguments)},this.requestTick=function(){return StickyHeader.prototype.requestTick.apply(instance$,arguments)},this.recalcHeaderOffset=function(){return StickyHeader.prototype.recalcHeaderOffset.apply(instance$,arguments)},this.$body=$("body"),this.headerWrapper=$(".header-v2")[0],this.$personalizeBar=$("#personalize_wizard_call_to_action"),this.$subscribeDrawer=this.getPresentSubscribeDrawer(),this.primaryNavRow=document.getElementById("ls-primary-nav-row"),this.stickyClass="ls-sticky-header",this.fadeoutClass="animateFadeOut",this.iHeaderOffset=1,this.iLastY=0,this.iScrollY=window.scrollY||window.pageYOffset,this.bActivateTabsAnimation=!1,this.bHasStickyClass=!1,this.bAnimationFinished=!1,this.iFrameID=-1,this.iStickyFrameID=-1,this.initialize(),this.bind()}return StickyHeader.prototype.getPresentSubscribeDrawer=function(){var $drawer;return($drawer=$("#subscribe-drawer")).is(":visible")?$drawer:$drawer=$("subscribe_banner_container")},StickyHeader.prototype.recalcHeaderOffset=function(){return this.iHeaderOffset=1,this.$personalizeBar.length&&(this.iHeaderOffset+=this.$personalizeBar.height(),this.$body.prepend(this.$personalizeBar)),this.$subscribeDrawer.length?this.iHeaderOffset+=this.$subscribeDrawer.height():void 0},StickyHeader.prototype.initialize=function(){return this.recalcHeaderOffset()},StickyHeader.prototype.bind=function(){return this.primaryNavRow.addEventListener(this.getTransitionEventName(),function(this$){return function(){return this$.bAnimationFinished=!0,this$.iFrameID=0,this$.iLastY=window.scrollY||window.pageYOffset}}(this)),this.$subscribeDrawer.length&&(window.onresize=function(this$){return function(){return this$.iHeaderOffset=1+this$.$subscribeDrawer.height()}}(this)),this.$subscribeDrawer.find("#hide_follow, #hide_banner").one("click",function(this$){return function(){return this$.$subscribeDrawer.remove(),this$.iHeaderOffset=1,window.onresize=null}}(this)),this.$personalizeBar.find(".close").one("click",function(this$){return function(){return this$.$personalizeBar.remove(),this$.iHeaderOffset=1}}(this)),window.addEventListener("scroll",function(this$){return function(){return this$.iScrollY=window.scrollY||window.pageYOffset,this$.requestTick()}}(this))},StickyHeader.prototype.requestTick=function(){return this.iStickyFrameID=window.requestAnimationFrame(this.handleStickyHeader),0===this.iFrameID&&this.bHasStickyClass?this.iFrameID=window.requestAnimationFrame(this.handlePrimaryNav):void 0},StickyHeader.prototype.handleStickyHeader=function(){var condition;return condition=this.iScrollY>this.iHeaderOffset,condition&&!this.bHasStickyClass?(this.bAnimationFinished=!1,this.headerWrapper.classList.add(this.stickyClass),this.headerWrapper.classList.add(this.fadeoutClass),this.bHasStickyClass=!0):this.bHasStickyClass&&!condition?(this.bAnimationFinished=!1,this.headerWrapper.classList.remove(this.stickyClass),this.headerWrapper.classList.remove(this.fadeoutClass),this.bHasStickyClass=!1):void 0},StickyHeader.prototype.handlePrimaryNav=function(){var bTabsAreVisible;return window.cancelAnimationFrame(this.iStickyFrameID),bTabsAreVisible=!!this.primaryNavRow.offsetHeight,this.iLastY<this.iScrollY&&bTabsAreVisible?(this.bAnimationFinished=!1,this.headerWrapper.classList.add(this.fadeoutClass)):this.iLastY>this.iScrollY&&!bTabsAreVisible?(this.bAnimationFinished=!1,this.headerWrapper.classList.remove(this.fadeoutClass)):(this.iFrameID=0,this.iLastY=this.iScrollY)},StickyHeader.prototype.getTransitionEventName=function(){var el,t,transitionEvent,transitions;el=document.createElement("fakeelement"),transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions)if(void 0!==el.style[t]){transitionEvent=transitions[t];break}return transitionEvent||""},StickyHeader}(),void function(){var config,Optimize;Optimize=window.Optimize,config=Optimize.suiteData.config,config.finch={config:Optimize.finchConfig},OptimizeSuite.init(Optimize.config=config),$(document).ready(function(){return Groupon.Utils.lazyLoadImages(),$(".header-v2").length&&(new window.GIG.PNHeaderV2(".header-v2"),new CartWidget(".cart-widget"),new LanguageSelector("#ls-lang-list")),document.getElementById("ls-cookie-banner")&&new CookieBanner("#ls-cookie-banner"),$("body").removeClass("no-js"),OptimizeSuite.initBloodhound(),new SubscribeDrawer("#subscribe-drawer"),new DivisionSelector(".sub-header:not(.deprecated)"),new DeprecatedDivisionSelector(".sub-header.deprecated"),new InAppMessage("#in-app-messages"),$('.getaways-tab-flyout [data-bhc$="ga-search"]').click(function(){return Cookie.unset("flyOut_shown",".groupon.com"),Cookie.unset("flyOut_shown")})}),$(window).load(function(){var enableStickyHeader;return enableStickyHeader=$(".ls-showStickyHeader").length&&!$(".lt-ie10, #ls-lite-header, .blacklabel, .touch").length,enableStickyHeader?new window.GIG.StickyHeader:void 0})}.call(this);