




/*
     FILE ARCHIVED ON 11:05:10 Jun 6, 2013 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 6:18:58 Feb 10, 2015.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
(function(){function o(a,c){var b;this.wrapper=typeof a=="object"?a:document.getElementById(a);this.wrapper.style.overflow="hidden";this.scroller=this.wrapper.children[0];this.scroller.style.cssText+="-webkit-transition-property:-webkit-transform;-webkit-transform-origin:0 0;-webkit-transform:"+j+"0,0"+k;this.scroller.style.cssText+="-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;";this.options={hScroll:!0,vScroll:!0,bounce:i,bounceLock:!1,momentum:i,
lockDirection:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:t,fadeScrollbar:s&&i||!g,hideScrollbar:s||!g,scrollbarClass:"",onScrollStart:null,onScrollEnd:null};for(b in c)this.options[b]=c[b];this.options.hScrollbar=this.options.hScroll&&this.options.hScrollbar;this.options.vScrollbar=this.options.vScroll&&this.options.vScrollbar;this.refresh();this._bind(p,window);this._bind(q)}o.prototype={x:0,y:0,handleEvent:function(a){switch(a.type){case q:this._start(a);break;case l:this._move(a);break;case m:case n:this._end(a);
break;case "webkitTransitionEnd":this._transitionEnd(a);break;case p:this._resize()}},_scrollbar:function(a){var c=document,b;if(this[a+"Scrollbar"]){if(!this[a+"ScrollbarWrapper"]){b=c.createElement("div");this.options.scrollbarClass?b.className=this.options.scrollbarClass+a.toUpperCase():b.style.cssText="position:absolute;z-index:100;"+(a=="h"?"height:7px;bottom:1px;left:2px;right:7px":"width:7px;bottom:7px;top:2px;right:1px");b.style.cssText+="pointer-events:none;-webkit-transition-property:opacity;-webkit-transition-duration:"+
(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1");this.wrapper.appendChild(b);this[a+"ScrollbarWrapper"]=b;b=c.createElement("div");if(!this.options.scrollbarClass)b.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-webkit-background-clip:padding-box;-webkit-box-sizing:border-box;"+(a=="h"?"height:100%;-webkit-border-radius:4px 3px;":"width:100%;-webkit-border-radius:3px 4px;");b.style.cssText+=
"pointer-events:none;-webkit-transition-property:-webkit-transform;-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;-webkit-transform:"+j+"0,0"+k;this[a+"ScrollbarWrapper"].appendChild(b);this[a+"ScrollbarIndicator"]=b}a=="h"?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=h.max(h.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",
this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=h.max(h.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY);
this._indicatorPos(a,!0)}else if(this[a+"ScrollbarWrapper"])this[a+"ScrollbarIndicator"].style.webkitTransform="",this[a+"ScrollbarWrapper"].parentNode.removeChild(this[a+"ScrollbarWrapper"]),this[a+"ScrollbarWrapper"]=null,this[a+"ScrollbarIndicator"]=null},_resize:function(){var a=this;setTimeout(function(){a.refresh()},0)},_pos:function(a,c){this.x=this.hScroll?a:0;this.y=this.vScroll?c:0;this.scroller.style.webkitTransform=j+this.x+"px,"+this.y+"px"+k;this._indicatorPos("h");this._indicatorPos("v")},
_indicatorPos:function(a,c){var b=a=="h"?this.x:this.y;if(this[a+"Scrollbar"])b*=this[a+"ScrollbarProp"],b<0?(b=this.options.fixedScrollbar?0:b+b*3,this[a+"ScrollbarIndicatorSize"]+b<9&&(b=-this[a+"ScrollbarIndicatorSize"]+8)):b>this[a+"ScrollbarMaxScroll"]&&(b=this.options.fixedScrollbar?this[a+"ScrollbarMaxScroll"]:b+(b-this[a+"ScrollbarMaxScroll"])*3,this[a+"ScrollbarIndicatorSize"]+this[a+"ScrollbarMaxScroll"]-b<9&&(b=this[a+"ScrollbarIndicatorSize"]+this[a+"ScrollbarMaxScroll"]-8)),this[a+"ScrollbarWrapper"].style.webkitTransitionDelay=
"0",this[a+"ScrollbarWrapper"].style.opacity=c&&this.options.hideScrollbar?"0":"1",this[a+"ScrollbarIndicator"].style.webkitTransform=j+(a=="h"?b+"px,0":"0,"+b+"px")+k},_transitionTime:function(a){a+="ms";this.scroller.style.webkitTransitionDuration=a;if(this.hScrollbar)this.hScrollbarIndicator.style.webkitTransitionDuration=a;if(this.vScrollbar)this.vScrollbarIndicator.style.webkitTransitionDuration=a},_start:function(a){var c=g?a.changedTouches[0]:a,b;this.moved=!1;a.preventDefault();this.moved=
!1;this.returnTime=this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this._transitionTime(0);if(this.options.momentum&&(b=new WebKitCSSMatrix(window.getComputedStyle(this.scroller,null).webkitTransform),b.m41!=this.x||b.m42!=this.y))this._unbind("webkitTransitionEnd"),this._pos(b.m41,b.m42);this.scroller.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)";if(this.hScrollbar)this.hScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)";
if(this.vScrollbar)this.vScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)";this.startX=this.x;this.startY=this.y;this.pointX=c.pageX;this.pointY=c.pageY;this.startTime=a.timeStamp;this.options.onScrollStart&&this.options.onScrollStart.call(this);this._bind(l);this._bind(m);this._bind(n)},_move:function(a){if(!(g&&a.touches.length>1)){var c=g?a.changedTouches[0]:a,b=c.pageX-this.pointX,d=c.pageY-this.pointY,e=this.x+b,f=this.y+d;a.preventDefault();this.pointX=
c.pageX;this.pointY=c.pageY;if(e>0||e<this.maxScrollX)e=this.options.bounce?this.x+b/2.4:e>=0||this.maxScrollX>=0?0:this.maxScrollX;if(f>0||f<this.maxScrollY)f=this.options.bounce?this.y+d/2.4:f>=0||this.maxScrollY>=0?0:this.maxScrollY;if(this.absDistX<4&&this.absDistY<4)this.distX+=b,this.distY+=d,this.absDistX=h.abs(this.distX),this.absDistY=h.abs(this.distY);else{if(this.options.lockDirection)if(this.absDistX>this.absDistY+3)f=this.y,d=0;else if(this.absDistY>this.absDistX+3)e=this.x,b=0;this.moved=
!0;this._pos(e,f);this.dirX=b>0?-1:b<0?1:0;this.dirY=d>0?-1:d<0?1:0;if(a.timeStamp-this.startTime>300)this.startTime=a.timeStamp,this.startX=this.x,this.startY=this.y}}},_end:function(a){if(!(g&&a.touches.length!=0)){var c=g?a.changedTouches[0]:a,b,d,e={dist:0,time:0},f={dist:0,time:0},r=a.timeStamp-this.startTime;b=this.x;d=this.y;this._unbind(l);this._unbind(m);this._unbind(n);if(this.moved){if(r<300&&this.options.momentum){e=b?this._momentum(b-this.startX,r,-this.x,this.scrollerW-this.wrapperW+
this.x,this.options.bounce?this.wrapperW:0):e;f=d?this._momentum(d-this.startY,r,-this.y,this.maxScrollY<0?this.scrollerH-this.wrapperH+this.y:0,this.options.bounce?this.wrapperH:0):f;b=this.x+e.dist;d=this.y+f.dist;if(this.x>0&&b>0||this.x<this.maxScrollX&&b<this.maxScrollX)e={dist:0,time:0};if(this.y>0&&d>0||this.y<this.maxScrollY&&d<this.maxScrollY)f={dist:0,time:0}}e.dist||f.dist?(a=h.max(h.max(e.time,f.time),10),this.scrollTo(b,d,a)):this._resetPos(200)}else{if(g){this.doubleTapTimer=null;for(b=
c.target;b.nodeType!=1;)b=b.parentNode;d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,a.view,1,c.screenX,c.screenY,c.clientX,c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);d._fake=!0;b.dispatchEvent(d)}this._resetPos()}}},_resetPos:function(a){var c=this.x,b=this.y;if(this.x>=0)c=0;else if(this.x<this.maxScrollX)c=this.maxScrollX;if(this.y>=0||this.maxScrollY>0)b=0;else if(this.y<this.maxScrollY)b=this.maxScrollY;if(c==this.x&&b==this.y){if(this.moved)this.options.onScrollEnd&&
this.options.onScrollEnd.call(this),this.moved=!1;if(this.hScrollbar&&this.options.hideScrollbar)this.hScrollbarWrapper.style.webkitTransitionDelay="300ms",this.hScrollbarWrapper.style.opacity="0";if(this.vScrollbar&&this.options.hideScrollbar)this.vScrollbarWrapper.style.webkitTransitionDelay="300ms",this.vScrollbarWrapper.style.opacity="0"}else{if(a){this.scroller.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)";if(this.hScrollbar)this.hScrollbarIndicator.style.webkitTransitionTimingFunction=
"cubic-bezier(0.33,0.0,0.33,1)";if(this.vScrollbar)this.vScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)"}this.scrollTo(c,b,a||0)}},_transitionEnd:function(a){a&&a.stopPropagation();this._unbind("webkitTransitionEnd");this._resetPos(this.returnTime);this.returnTime=0},_momentum:function(a,c,b,d,e){var c=h.abs(a)/c,f=c*c/0.0012,g=0,g=0;if(a>0&&f>b)g=e/(6/(f/c*6.0E-4)),b+=g,this.returnTime=800/e*g+100,c=c*b/f,f=b;else if(a<0&&f>d)g=e/(6/(f/c*6.0E-4)),d+=g,this.returnTime=
800/e*g+100,c=c*d/f,f=d;f*=a<0?-1:1;return{dist:f,time:h.round(c/6.0E-4)}},_offset:function(a,c){var b=-a.offsetLeft,d=-a.offsetTop;if(!c)return{x:b,y:d};for(;a=a.offsetParent;)b-=a.offsetLeft,d-=a.offsetTop;return{x:b,y:d}},_bind:function(a,c){(c||this.scroller).addEventListener(a,this,!1)},_unbind:function(a,c){(c||this.scroller).removeEventListener(a,this,!1)},destroy:function(){this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this.scroller.style.webkitTransform="";
this._unbind("webkitTransitionEnd");this._unbind(p);this._unbind(q);this._unbind(l);this._unbind(m);this._unbind(n)},refresh:function(){this.wrapperW=this.wrapper.clientWidth;this.wrapperH=this.wrapper.clientHeight;this.scrollerW=this.scroller.offsetWidth;this.scrollerH=this.scroller.offsetHeight;this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH;this.dirY=this.dirX=0;this._transitionTime(0);this.hScroll=this.options.hScroll&&this.maxScrollX<0;this.vScroll=this.options.vScroll&&
(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;this._scrollbar("h");this._scrollbar("v");this._resetPos()},scrollTo:function(a,c,b,d){var e=this;d&&(a=e.x-a,c=e.y-c);b=!b||h.round(e.x)==h.round(a)&&h.round(e.y)==h.round(c)?0:b;e.moved=!0;b&&e._bind("webkitTransitionEnd");e._transitionTime(b);e._pos(a,c);b||setTimeout(function(){e._transitionEnd()},
0)},scrollToElement:function(a,c){var b;if(a=a.nodeType?a:this.scroller.querySelector(a))b=this._offset(a),b.x=b.x>0?0:b.x<this.maxScrollX?this.maxScrollX:b.x,b.y=b.y>0?0:b.y<this.maxScrollY?this.maxScrollY:b.y,c=c===void 0?h.max(h.abs(b.x)*2,h.abs(b.y)*2):c,this.scrollTo(b.x,b.y,c)}};var i="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,g="ontouchstart"in window,s=/iphone|ipad/gi.test(navigator.appVersion),t=/android/gi.test(navigator.appVersion),p="onorientationchange"in window?"orientationchange":
"resize",q=g?"touchstart":"mousedown",l=g?"touchmove":"mousemove",m=g?"touchend":"mouseup",n=g?"touchcancel":"mouseup",j="translate"+(i?"3d(":"("),k=i?",0)":")",h=Math;typeof exports!=="undefined"?exports.iScroll=o:window.iScroll=o})();